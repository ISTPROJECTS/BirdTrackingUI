// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.37/esri/copyright.txt for details.
/*
	Copyright (c) 2004-2016, The JS Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
(function(b, A) {
    var q, x = function() {
        return "undefined" !== typeof u && "function" !== typeof u ? u : "undefined" !== typeof window ? window : "undefined" !== typeof self ? self : this
    }(), r = function() {}, m = function(g) {
        for (var G in g)
            return 0;
        return 1
    }, p = {}.toString, t = function(g) {
        return "[object Function]" == p.call(g)
    }, h = function(g) {
        return "[object String]" == p.call(g)
    }, c = function(g) {
        return "[object Array]" == p.call(g)
    }, a = function(g, G) {
        if (g)
            for (var N = 0; N < g.length; )
                G(g[N++])
    }, f = function(g, G) {
        for (var N in G)
            g[N] = G[N];
        return g
    }, e = function(g, G) {
        return f(Error(g), {
            src: "dojoLoader",
            info: G
        })
    }, l = 1, k = function() {
        return "_" + l++
    }, d = function(g, G, N) {
        return sa(g, G, N, 0, d)
    }, u = x, y = u.document, n = y && y.createElement("DiV"), v = d.has = function(g) {
        return t(D[g]) ? D[g] = D[g](u, y, n) : D[g]
    }
    , D = v.cache = A.hasCache;
    t(b) && (b = b(x));
    v.add = function(g, G, N, P) {
        (void 0 === D[g] || P) && (D[g] = G);
        return N && v(g)
    }
    ;
    v.add("host-webworker", "undefined" !== typeof WorkerGlobalScope && self instanceof WorkerGlobalScope);
    v("host-webworker") && (f(A.hasCache, {
        "host-browser": 0,
        dom: 0,
        "dojo-dom-ready-api": 0,
        "dojo-sniff": 0,
        "dojo-inject-api": 1,
        "host-webworker": 1,
        "dojo-guarantee-console": 0
    }),
    A.loaderPatch = {
        injectUrl: function(g, G) {
            try {
                importScripts(g),
                G()
            } catch (N) {
                console.info("failed to load resource (" + g + ")"),
                console.error(N)
            }
        }
    });
    for (var O in b.has)
        v.add(O, b.has[O], 0, 1);
    var z = 0
      , w = []
      , E = 0
      , C = r
      , H = r;
    d.isXdUrl = r;
    d.initSyncLoader = function(g, G, N) {
        E || (E = g,
        C = G,
        H = N);
        return {
            sync: "sync",
            requested: 1,
            arrived: 2,
            nonmodule: 3,
            executing: 4,
            executed: 5,
            syncExecStack: w,
            modules: oa,
            execQ: ja,
            getModule: Ca,
            injectModule: Sa,
            setArrived: za,
            signal: U,
            finishExec: La,
            execModule: Ma,
            dojoRequirePlugin: E,
            getLegacyMode: function() {
                return z
            },
            guardCheckComplete: Na
        }
    }
    ;
    var B = location.protocol
      , K = location.host;
    d.isXdUrl = function(g) {
        return /^\./.test(g) ? !1 : /^\/\//.test(g) ? !0 : (g = g.match(/^([^\/:]+:)\/+([^\/]+)/)) && (g[1] != B || K && g[2] != K)
    }
    ;
    v.add("dojo-force-activex-xhr", !y.addEventListener && "file:" == window.location.protocol);
    v.add("native-xhr", "undefined" != typeof XMLHttpRequest);
    if (v("native-xhr") && !v("dojo-force-activex-xhr"))
        var J = function() {
            return new XMLHttpRequest
        };
    else {
        var R = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"];
        for (q = 0; 3 > q; )
            try {
                var V = R[q++];
                new ActiveXObject(V);
                break
            } catch (g) {}
        J = function() {
            return new ActiveXObject(V)
        }
    }
    d.getXhr = J;
    v.add("dojo-gettext-api", 1);
    d.getText = function(g, G, N) {
        var P = J();
        P.open("GET", Ta(g), !1);
        P.send(null);
        if (200 == P.status || !location.host && !P.status)
            N && N(P.responseText, G);
        else
            throw e("xhrFailed", P.status);
        return P.responseText
    }
    ;
    var Y = v("csp-restrictions") ? function() {}
    : new Function("return eval(arguments[0]);");
    d.eval = function(g, G) {
        return Y(g + "\r\n//# sourceURL\x3d" + G)
    }
    ;
    var S = {}
      , U = d.signal = function(g, G) {
        g = S[g];
        a(g && g.slice(0), function(N) {
            N.apply(null, c(G) ? G : [G])
        })
    }
      , L = d.on = function(g, G) {
        var N = S[g] || (S[g] = []);
        N.push(G);
        return {
            remove: function() {
                for (var P = 0; P < N.length; P++)
                    if (N[P] === G) {
                        N.splice(P, 1);
                        break
                    }
            }
        }
    }
      , T = []
      , da = {}
      , ha = []
      , ca = {}
      , qa = d.map = {}
      , ta = []
      , oa = {}
      , va = ""
      , na = {}
      , ra = {}
      , ia = {}
      , wa = 0;
    if (!v("foreign-loader"))
        var ya = function(g, G) {
            G = !1 !== G;
            var N, P;
            for (N in ra) {
                var W = ra[N];
                if (P = N.match(/^url:(.+)/))
                    na["url:" + jb(P[1], g)] = W;
                else if ("*now" == N)
                    var X = W;
                else
                    "*noref" != N && (P = Oa(N, g, !0),
                    na[P.mid] = na["url:" + P.url] = W)
            }
            X && X(Fa(g));
            G && (ra = {})
        };
    var F = function(g) {
        return g.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, function(G) {
            return "\\" + G
        })
    }
      , I = function(g, G) {
        G.splice(0, G.length);
        for (var N in g)
            G.push([N, g[N], new RegExp("^" + F(N) + "(/|$)"), N.length]);
        G.sort(function(P, W) {
            return W[3] - P[3]
        });
        return G
    }
      , M = function(g, G) {
        a(g, function(N) {
            G.push([h(N[0]) ? new RegExp("^" + F(N[0]) + "$") : N[0], N[1]])
        })
    }
      , Q = function(g) {
        var G = g.name;
        G || (G = g,
        g = {
            name: G
        });
        g = f({
            main: "main"
        }, g);
        g.location = g.location ? g.location : G;
        g.packageMap && (qa[G] = g.packageMap);
        g.main.indexOf("./") || (g.main = g.main.substring(2));
        ca[G] = g
    }
      , aa = []
      , ba = function(g, G, N) {
        for (var P in g) {
            "waitSeconds" == P && (d.waitms = 1E3 * (g[P] || 0));
            "cacheBust" == P && (va = g[P] ? h(g[P]) ? g[P] : (new Date).getTime() + "" : "");
            if ("baseUrl" == P || "combo" == P)
                d[P] = g[P];
            if ("async" == P) {
                var W = g[P];
                d.legacyMode = z = h(W) && /sync|legacyAsync/.test(W) ? W : W ? !1 : "sync";
                d.async = !z
            }
            g[P] !== D && (d.rawConfig[P] = g[P],
            "has" != P && v.add("config-" + P, g[P], 0, G))
        }
        d.baseUrl || (d.baseUrl = "./");
        /\/$/.test(d.baseUrl) || (d.baseUrl += "/");
        for (P in g.has)
            v.add(P, g.has[P], 0, G);
        a(g.packages, Q);
        for (var X in g.packagePaths)
            a(g.packagePaths[X], function(ka) {
                var Aa = X + "/" + ka;
                h(ka) && (ka = {
                    name: ka
                });
                ka.location = Aa;
                Q(ka)
            });
        I(f(qa, g.map), ta);
        a(ta, function(ka) {
            ka[1] = I(ka[1], []);
            "*" == ka[0] && (ta.star = ka)
        });
        I(f(da, g.paths), ha);
        M(g.aliases, T);
        if (!v("foreign-loader")) {
            if (G)
                aa.push({
                    config: g.config
                });
            else
                for (P in g.config)
                    G = Ca(P, N),
                    G.config = f(G.config || {}, g.config[P]);
            g.cache && (ya(),
            ra = g.cache,
            ya(0, !!g.cache["*noref"]))
        }
        U("config", [g, d.rawConfig])
    };
    v("dojo-cdn");
    var la = y.getElementsByTagName("script");
    q = 0;
    for (var Z, ea, pa, ma; q < la.length; )
        if (Z = la[q++],
        (pa = Z.getAttribute("src")) && (ma = pa.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)) && (ea = ma[3] || "",
        A.baseUrl = A.baseUrl || ea,
        wa = Z),
        pa = Z.getAttribute("data-dojo-config") || Z.getAttribute("djConfig"))
            ia = d.eval("({ " + pa + " })", "data-dojo-config"),
            wa = Z;
    d.rawConfig = {};
    ba(A, 1);
    v("dojo-cdn") && ((ca.dojo.location = ea) && (ea += "/"),
    ca.dijit.location = ea + "../dijit/",
    ca.dojox.location = ea + "../dojox/");
    ba(b, 1);
    ba(ia, 1);
    if (!v("foreign-loader"))
        var ua = function(g) {
            Na(function() {
                a(g.deps, Sa)
            })
        }
          , sa = function(g, G, N, P, W) {
            var X;
            if (h(g)) {
                if ((X = Ca(g, P, !0)) && X.executed)
                    return X.result;
                throw e("undefinedModule", g);
            }
            c(g) || (ba(g, 0, P),
            g = G,
            G = N);
            if (c(g))
                if (g.length) {
                    N = "require*" + k();
                    for (var ka, Aa = [], Da = 0; Da < g.length; )
                        ka = g[Da++],
                        Aa.push(Ca(ka, P));
                    X = f(Ua("", N, 0, ""), {
                        injected: 2,
                        deps: Aa,
                        def: G || r,
                        require: P ? P.require : d,
                        gc: 1
                    });
                    oa[X.mid] = X;
                    ua(X);
                    var ab = Pa && "sync" != z;
                    Na(function() {
                        Ma(X, ab)
                    });
                    X.executed || ja.push(X);
                    Ga()
                } else
                    G && G();
            return W
        }
          , Fa = function(g) {
            if (!g)
                return d;
            var G = g.require;
            G || (G = function(N, P, W) {
                return sa(N, P, W, g, G)
            }
            ,
            g.require = f(G, d),
            G.module = g,
            G.toUrl = function(N) {
                return jb(N, g)
            }
            ,
            G.toAbsMid = function(N) {
                return bb(N, g)
            }
            ,
            v("dojo-undef-api") && (G.undef = function(N) {
                d.undef(N, g)
            }
            ),
            G.syncLoadNls = function(N) {
                N = Oa(N, g);
                var P = oa[N.mid];
                if (!P || !P.executed)
                    if (Ea = na[N.mid] || na["url:" + N.url])
                        Va(Ea),
                        P = oa[N.mid];
                return P && P.executed && P.result
            }
            );
            return G
        }
          , ja = []
          , Ha = []
          , fa = {}
          , xa = function(g) {
            g.injected = 1;
            fa[g.mid] = 1;
            g.url && (fa[g.url] = g.pack || 1);
            kb()
        }
          , za = function(g) {
            g.injected = 2;
            delete fa[g.mid];
            g.url && delete fa[g.url];
            m(fa) && (Wa(),
            "xd" == z && (z = "sync"))
        }
          , Ia = d.idle = function() {
            return !Ha.length && m(fa) && !ja.length && !Pa
        }
        ;
    var Ja = function(g, G) {
        if (G)
            for (var N = 0; N < G.length; N++)
                if (G[N][2].test(g))
                    return G[N];
        return 0
    }
      , lb = function(g) {
        var G = [];
        for (g = g.replace(/\\/g, "/").split("/"); g.length; ) {
            var N = g.shift();
            if (".." == N && G.length && ".." != P) {
                G.pop();
                var P = G[G.length - 1]
            } else
                "." != N && G.push(P = N)
        }
        return G.join("/")
    }
      , Ua = function(g, G, N, P) {
        var W = d.isXdUrl(P);
        return {
            pid: g,
            mid: G,
            pack: N,
            url: P,
            executed: 0,
            def: 0,
            isXd: W,
            isAmd: !!(W || ca[g] && ca[g].isAmd)
        }
    }
      , ob = function(g, G, N, P, W, X, ka, Aa, Da, ab) {
        var Ka, mb, Ba;
        var cb = /^\./.test(g);
        if (/(^\/)|(:)|(\.js$)/.test(g) || cb && !G)
            return Ua(0, g, 0, g);
        g = lb(cb ? G.mid + "/../" + g : g);
        if (/^\./.test(g))
            throw e("irrationalPath", g);
        ab || cb || !X.star || (Ba = Ja(g, X.star[1]));
        !Ba && G && (Ba = (Ba = Ja(G.mid, X)) && Ja(g, Ba[1]));
        Ba && (g = Ba[1] + g.substring(Ba[3]));
        G = (ma = g.match(/^([^\/]+)(\/(.+))?$/)) ? ma[1] : "";
        (Ka = N[G]) ? g = G + "/" + (mb = ma[3] || Ka.main) : G = "";
        var db = 0;
        a(Aa, function(Qa) {
            var nb = g.match(Qa[0]);
            nb && 0 < nb.length && (db = t(Qa[1]) ? g.replace(Qa[0], Qa[1]) : Qa[1])
        });
        if (db)
            return ob(db, 0, N, P, W, X, ka, Aa, Da);
        if (N = P[g])
            return Da ? Ua(N.pid, N.mid, N.pack, N.url) : P[g];
        P = (Ba = Ja(g, ka)) ? Ba[1] + g.substring(Ba[3]) : G ? ("/" === Ka.location.slice(-1) ? Ka.location.slice(0, -1) : Ka.location) + "/" + mb : v("config-tlmSiblingOfDojo") ? "../" + g : g;
        /(^\/)|(:)/.test(P) || (P = W + P);
        return Ua(G, g, Ka, lb(P + ".js"))
    }
      , Oa = function(g, G, N) {
        return ob(g, G, ca, oa, d.baseUrl, ta, ha, T, void 0, N)
    };
    if (!v("foreign-loader"))
        var pb = function(g, G, N) {
            return g.normalize ? g.normalize(G, function(P) {
                return bb(P, N)
            }) : bb(G, N)
        }
          , qb = 0
          , Ca = function(g, G, N) {
            var P;
            if (P = g.match(/^(.+?)!(.*)$/)) {
                var W = Ca(P[1], G, N);
                "sync" != z || W.executed || (Sa(W),
                2 !== W.injected || W.executed || Na(function() {
                    Ma(W)
                }),
                W.executed ? Xa(W) : ja.unshift(W));
                5 !== W.executed || W.load || Xa(W);
                W.load ? (P = pb(W, P[2], G),
                g = W.mid + "!" + (W.dynamic ? ++qb + "!" : "") + P) : (P = P[2],
                g = W.mid + "!" + ++qb + "!waitingForPlugin");
                g = {
                    plugin: W,
                    mid: g,
                    req: Fa(G),
                    prid: P
                }
            } else
                g = Oa(g, G);
            return oa[g.mid] || !N && (oa[g.mid] = g)
        };
    var bb = d.toAbsMid = function(g, G) {
        return Oa(g, G).mid
    }
      , jb = d.toUrl = function(g, G) {
        G = Oa(g + "/x", G);
        var N = G.url;
        return Ta(0 === G.pid ? g : N.substring(0, N.length - 5))
    }
    ;
    if (!v("foreign-loader"))
        var rb = {
            injected: 2,
            executed: 5,
            def: 3,
            result: 3
        }
          , eb = function(g) {
            return oa[g] = f({
                mid: g
            }, rb)
        }
          , wb = eb("require")
          , xb = eb("exports")
          , yb = eb("module")
          , Ya = {}
          , fb = 0
          , Xa = function(g) {
            var G = g.result;
            g.dynamic = G.dynamic;
            g.normalize = G.normalize;
            g.load = G.load;
            return g
        }
          , zb = function(g) {
            var G = {};
            a(g.loadQ, function(W) {
                var X = pb(g, W.prid, W.req.module)
                  , ka = g.dynamic ? W.mid.replace(/waitingForPlugin$/, X) : g.mid + "!" + X;
                X = f(f({}, W), {
                    mid: ka,
                    prid: X,
                    injected: 0
                });
                oa[ka] && oa[ka].injected || sb(oa[ka] = X);
                G[W.mid] = oa[ka];
                za(W);
                delete oa[W.mid]
            });
            g.loadQ = 0;
            var N = function(W) {
                for (var X = W.deps || [], ka = 0; ka < X.length; ka++)
                    (W = G[X[ka].mid]) && (X[ka] = W)
            }, P;
            for (P in oa)
                N(oa[P]);
            a(ja, N)
        }
          , La = function(g) {
            d.trace("loader-finish-exec", [g.mid]);
            g.executed = 5;
            g.defOrder = fb++;
            a(g.provides, function(G) {
                G()
            });
            g.loadQ && (Xa(g),
            zb(g));
            for (q = 0; q < ja.length; )
                ja[q] === g ? ja.splice(q, 1) : q++;
            /^require\*/.test(g.mid) && delete oa[g.mid]
        }
          , Ab = []
          , Ma = function(g, G) {
            if (4 === g.executed)
                return d.trace("loader-circular-dependency", [Ab.concat(g.mid).join("-\x3e")]),
                !g.def || G ? Ya : g.cjs && g.cjs.exports;
            if (!g.executed) {
                if (!g.def)
                    return Ya;
                var N = g.mid, P = g.deps || [], W, X = [], ka = 0;
                for (g.executed = 4; W = P[ka++]; ) {
                    W = W === wb ? Fa(g) : W === xb ? g.cjs.exports : W === yb ? g.cjs : Ma(W, G);
                    if (W === Ya)
                        return g.executed = 0,
                        d.trace("loader-exec-module", ["abort", N]),
                        Ya;
                    X.push(W)
                }
                d.trace("loader-run-factory", [g.mid]);
                G = g.def;
                w.unshift(g);
                if (v("config-dojo-loader-catches"))
                    try {
                        var Aa = t(G) ? G.apply(null, X) : G
                    } catch (Da) {
                        U("error", g.result = e("factoryThrew", [g, Da]))
                    }
                else
                    Aa = t(G) ? G.apply(null, X) : G;
                g.result = void 0 === Aa && g.cjs ? g.cjs.exports : Aa;
                w.shift(g);
                La(g)
            }
            return g.result
        }
          , Pa = 0
          , Na = function(g) {
            try {
                Pa++,
                g()
            } catch (G) {
                throw G;
            } finally {
                Pa--
            }
            Ia() && U("idle", [])
        }
          , Ga = function() {
            Pa || Na(function() {
                C();
                for (var g, G, N = 0; N < ja.length; )
                    g = fb,
                    G = ja[N],
                    Ma(G),
                    g != fb ? (C(),
                    N = 0) : N++
            })
        };
    var Ta = "function" == typeof b.fixupUrl ? b.fixupUrl : function(g) {
        g += "";
        return g + (va ? (/\?/.test(g) ? "\x26" : "?") + va : "")
    }
    ;
    v("dojo-undef-api") && (d.undef = function(g, G) {
        g = Ca(g, G);
        za(g);
        f(g, {
            def: 0,
            executed: 0,
            injected: 0,
            node: 0,
            load: 0
        })
    }
    );
    void 0 === v("dojo-loader-eval-hint-url") && v.add("dojo-loader-eval-hint-url", 1);
    var sb = function(g) {
        var G = g.plugin;
        5 !== G.executed || G.load || Xa(G);
        var N = function(P) {
            g.result = P;
            za(g);
            La(g);
            Ga()
        };
        G.load ? G.load(g.prid, g.req, N) : G.loadQ ? G.loadQ.push(g) : (G.loadQ = [g],
        ja.unshift(G),
        Sa(G))
    }
      , Ea = 0
      , Ra = 0
      , gb = 0
      , Va = function(g, G) {
        v("config-stripStrict") && (g = g.replace(/(["'])use strict\1/g, ""));
        gb = 1;
        if (v("config-dojo-loader-catches"))
            try {
                g === Ea ? Ea.call(null) : d.eval(g, v("dojo-loader-eval-hint-url") ? G.url : G.mid)
            } catch (N) {
                U("error", e("evalModuleThrew", G))
            }
        else
            g === Ea ? Ea.call(null) : d.eval(g, v("dojo-loader-eval-hint-url") ? G.url : G.mid);
        gb = 0
    }
      , Sa = function(g) {
        var G = g.mid
          , N = g.url;
        if (!(g.executed || g.injected || fa[G] || g.url && (g.pack && fa[g.url] === g.pack || 1 == fa[g.url])))
            if (xa(g),
            g.plugin)
                sb(g);
            else {
                var P = function() {
                    tb(g);
                    if (2 !== g.injected) {
                        if (v("dojo-enforceDefine")) {
                            U("error", e("noDefine", g));
                            return
                        }
                        za(g);
                        f(g, rb);
                        d.trace("loader-define-nonmodule", [g.url])
                    }
                    z ? !w.length && Ga() : Ga()
                };
                if (Ea = na[G] || na["url:" + g.url])
                    d.trace("loader-inject", ["cache", g.mid, N]),
                    Va(Ea, g),
                    P();
                else {
                    if (z)
                        if (g.isXd)
                            "sync" == z && (z = "xd");
                        else if (!g.isAmd || "sync" == z) {
                            var W = function(X) {
                                if ("sync" == z) {
                                    w.unshift(g);
                                    Va(X, g);
                                    w.shift();
                                    tb(g);
                                    g.cjs || (za(g),
                                    La(g));
                                    if (g.finish) {
                                        X = G + "*finish";
                                        var ka = g.finish;
                                        delete g.finish;
                                        Za(X, ["dojo", ("dojo/require!" + ka.join(",")).replace(/\./g, "/")], function(Aa) {
                                            a(ka, function(Da) {
                                                Aa.require(Da)
                                            })
                                        });
                                        ja.unshift(Ca(X))
                                    }
                                    P()
                                } else
                                    (X = H(g, X)) ? (Va(X, g),
                                    P()) : (Ra = g,
                                    d.injectUrl(Ta(N), P, g),
                                    Ra = 0)
                            };
                            d.trace("loader-inject", ["xhr", g.mid, N, "sync" != z]);
                            if (v("config-dojo-loader-catches"))
                                try {
                                    d.getText(N, "sync" != z, W)
                                } catch (X) {
                                    U("error", e("xhrInjectFailed", [g, X]))
                                }
                            else
                                d.getText(N, "sync" != z, W);
                            return
                        }
                    d.trace("loader-inject", ["script", g.mid, N]);
                    Ra = g;
                    d.injectUrl(Ta(N), P, g);
                    Ra = 0
                }
            }
    }
      , hb = function(g, G, N) {
        d.trace("loader-define-module", [g.mid, G]);
        var P = g.mid;
        if (2 === g.injected)
            return U("error", e("multipleDefine", g)),
            g;
        f(g, {
            deps: G,
            def: N,
            cjs: {
                id: g.mid,
                uri: g.url,
                exports: g.result = {},
                setExports: function(X) {
                    g.cjs.exports = X
                },
                config: function() {
                    return g.config
                }
            }
        });
        for (var W = 0; G[W]; W++)
            G[W] = Ca(G[W], g);
        z && !fa[P] && (ua(g),
        ja.push(g),
        Ga());
        za(g);
        t(N) || G.length || (g.result = N,
        La(g));
        return g
    }
      , tb = function(g, G) {
        for (var N = [], P, W; Ha.length; )
            W = Ha.shift(),
            G && (W[0] = G.shift()),
            P = W[0] && Ca(W[0]) || g,
            N.push([P, W[1], W[2]]);
        ya(g);
        a(N, function(X) {
            ua(hb.apply(null, X))
        })
    }
      , $a = 0
      , Wa = r
      , kb = r;
    Wa = function() {
        $a && clearTimeout($a);
        $a = 0
    }
    ;
    kb = function() {
        Wa();
        d.waitms && ($a = u.setTimeout(function() {
            Wa();
            U("error", e("timeout", fa))
        }, d.waitms))
    }
    ;
    v.add("ie-event-behavior", y.attachEvent && "undefined" === typeof Windows && ("undefined" === typeof opera || "[object Opera]" != opera.toString()));
    var ib = function(g, G, N, P) {
        if (v("ie-event-behavior"))
            return g.attachEvent(N, P),
            function() {
                g.detachEvent(N, P)
            }
            ;
        g.addEventListener(G, P, !1);
        return function() {
            g.removeEventListener(G, P, !1)
        }
    }
      , Bb = ib(window, "load", "onload", function() {
        d.pageLoaded = 1;
        try {
            "complete" != y.readyState && (y.readyState = "complete")
        } catch (g) {}
        Bb()
    });
    la = y.getElementsByTagName("script");
    for (q = 0; !wa; )
        /^dojo/.test((Z = la[q++]) && Z.type) || (wa = Z);
    d.injectUrl = function(g, G, N) {
        N = N.node = y.createElement("script");
        var P = ib(N, "load", "onreadystatechange", function(X) {
            X = X || window.event;
            var ka = X.target || X.srcElement;
            if ("load" === X.type || /complete|loaded/.test(ka.readyState))
                P(),
                W(),
                G && G()
        })
          , W = ib(N, "error", "onerror", function(X) {
            P();
            W();
            U("error", e("scriptError: " + g, [g, X]))
        });
        N.type = "text/javascript";
        N.charset = "utf-8";
        N.src = g;
        wa.parentNode.insertBefore(N, wa);
        return N
    }
    ;
    d.log = function() {
        try {
            for (var g = 0; g < arguments.length; g++)
                console.log(arguments[g])
        } catch (G) {}
    }
    ;
    d.trace = r;
    if (v("foreign-loader"))
        Za = r;
    else {
        var Za = function(g, G, N) {
            var P = arguments.length
              , W = ["require", "exports", "module"]
              , X = [0, g, G];
            1 == P ? X = [0, t(g) ? W : [], g] : 2 == P && h(g) ? X = [g, t(G) ? W : [], G] : 3 == P && (X = [g, G, N]);
            d.trace("loader-define", X.slice(0, 2));
            if ((P = X[0] && Ca(X[0])) && !fa[P.mid])
                ua(hb(P, X[1], X[2]));
            else if (!v("ie-event-behavior") || gb)
                Ha.push(X);
            else {
                P = P || Ra;
                if (!P)
                    for (g in fa)
                        if ((W = oa[g]) && W.node && "interactive" === W.node.readyState) {
                            P = W;
                            break
                        }
                P ? (ya(P),
                ua(hb(P, X[1], X[2]))) : U("error", e("ieDefineFailed", X[0]));
                Ga()
            }
        };
        Za.amd = {
            vendor: "dojotoolkit.org"
        }
    }
    f(f(d, A.loaderPatch), b.loaderPatch);
    L("error", function(g) {
        try {
            if (console.error(g),
            g instanceof Error) {
                for (var G in g)
                    console.log(G + ":", g[G]);
                console.log(".")
            }
        } catch (N) {}
    });
    f(d, {
        uid: k,
        cache: na,
        packs: ca
    });
    if (u.define)
        U("error", e("defineAlreadyDefined", 0));
    else if (u.define = Za,
    u.require = d,
    !v("foreign-loader")) {
        a(aa, function(g) {
            ba(g)
        });
        var ub = ia.deps || b.deps || A.deps
          , vb = ia.callback || b.callback || A.callback;
        d.boot = ub || vb ? [ub || [], vb] : 0
    }
}
)(function(b) {
    return b.dojoConfig || b.djConfig || b.require || {}
}, {
    async: 0,
    baseUrl: "https://js.arcgis.com/3.37/dojo",
    hasCache: {
        "config-selectorEngine": "acme",
        "config-tlmSiblingOfDojo": 1,
        "dojo-built": 1,
        "dojo-has-api": 1,
        "dojo-loader": 1,
        "dojo-undef-api": 0,
        dom: 1,
        "extend-esri": 1,
        "host-browser": 1
    },
    packages: [{
        location: "../dijit",
        name: "dijit"
    }, {
        location: "../dojox",
        name: "dojox"
    }, {
        location: "../put-selector",
        main: "put",
        name: "put-selector"
    }, {
        location: "../xstyle",
        name: "xstyle"
    }, {
        location: "../dgrid",
        main: "OnDemandGrid",
        name: "dgrid"
    }, {
        location: "../dgrid1",
        main: "OnDemandGrid",
        name: "dgrid1"
    }, {
        location: "../dstore",
        main: "Store",
        name: "dstore"
    }, {
        location: "../moment",
        main: "moment",
        name: "moment"
    }, {
        location: "../esri",
        name: "esri"
    }, {
        location: ".",
        name: "dojo"
    }]
});
require({
    cache: {
        "dojo/loadInit": function() {
            define(["./_base/loader"], function(b) {
                return {
                    dynamic: 0,
                    normalize: function(A) {
                        return A
                    },
                    load: b.loadInit
                }
            })
        },
        "dojo/_base/loader": function() {
            define("./kernel ../has require module ../json ./lang ./array".split(" "), function(b, A, q, x, r, m, p) {
                var t = function(L) {
                    return L.replace(/\./g, "/")
                }
                  , h = /\/\/>>built/
                  , c = []
                  , a = []
                  , f = function(L, T, da) {
                    c.push(da);
                    p.forEach(L.split(","), function(ha) {
                        ha = B(ha, T.module);
                        a.push(ha);
                        K(ha)
                    });
                    e()
                }
                  , e = function() {
                    var L;
                    for (L in C) {
                        var T = C[L];
                        void 0 === T.noReqPluginCheck && (T.noReqPluginCheck = /loadInit!/.test(L) || /require!/.test(L) ? 1 : 0);
                        if (!T.executed && !T.noReqPluginCheck && T.injected == v)
                            return
                    }
                    U(function() {
                        var da = c;
                        c = [];
                        p.forEach(da, function(ha) {
                            ha(1)
                        })
                    })
                }
                  , l = /\/\/.*|\/\*[\s\S]*?\*\/|("(?:\\.|[^"])*"|'(?:\\.|[^'])*'|`(?:\\.|[^`])*`)/mg
                  , k = /(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg
                  , d = /(^|\s)(require|define)\s*\(/m
                  , u = function(L, T) {
                    var da = []
                      , ha = [];
                    var ca = [];
                    for (T = T || L.replace(l, "$1"); ca = k.exec(T); ) {
                        var qa = k.lastIndex;
                        var ta = qa - ca[0].length;
                        var oa = void 0
                          , va = T
                          , na = /\(|\)/g
                          , ra = 1;
                        for (na.lastIndex = qa; (oa = na.exec(va)) && (ra = ")" == oa[0] ? ra - 1 : ra + 1,
                        0 != ra); )
                            ;
                        if (0 != ra)
                            throw "unmatched paren around character " + na.lastIndex + " in: " + va;
                        qa = [b.trim(va.substring(ta, na.lastIndex)) + ";\n", na.lastIndex];
                        "loadInit" == ca[2] ? da.push(qa[0]) : ha.push(qa[0]);
                        k.lastIndex = qa[1]
                    }
                    ca = da.concat(ha);
                    return ca.length || !d.test(T) ? [L.replace(/(^|\s)dojo\.loadInit\s*\(/g, "\n0 \x26\x26 dojo.loadInit("), ca.join(""), ca] : 0
                }
                  , y = q.initSyncLoader(f, e, function(L, T) {
                    var da, ha = [], ca = [];
                    if (h.test(T) || !(da = u(T)))
                        return 0;
                    T = L.mid + "-*loadInit";
                    for (var qa in B("dojo", L).result.scopeMap)
                        ha.push(qa),
                        ca.push('"' + qa + '"');
                    return "// xdomain rewrite of " + L.mid + "\ndefine('" + T + "',{\n\tnames:" + r.stringify(ha) + ",\n\tdef:function(" + ha.join(",") + "){" + da[1] + "}});\n\ndefine(" + r.stringify(ha.concat(["dojo/loadInit!" + T])) + ", function(" + ha.join(",") + "){\n" + da[0] + "});"
                })
                  , n = y.sync
                  , v = y.requested
                  , D = y.arrived
                  , O = y.nonmodule
                  , z = y.executing
                  , w = y.executed
                  , E = y.syncExecStack
                  , C = y.modules
                  , H = y.execQ
                  , B = y.getModule
                  , K = y.injectModule
                  , J = y.setArrived
                  , R = y.signal
                  , V = y.finishExec
                  , Y = y.execModule
                  , S = y.getLegacyMode
                  , U = y.guardCheckComplete;
                f = y.dojoRequirePlugin;
                b.provide = function(L) {
                    var T = E[0]
                      , da = m.mixin(B(t(L), q.module), {
                        executed: z,
                        result: m.getObject(L, !0)
                    });
                    J(da);
                    T && (T.provides || (T.provides = [])).push(function() {
                        da.result = m.getObject(L);
                        delete da.provides;
                        da.executed !== w && V(da)
                    });
                    return da.result
                }
                ;
                A.add("config-publishRequireResult", 1, 0, 0);
                b.require = function(L, T) {
                    T = function(da, ha) {
                        var ca = B(t(da), q.module);
                        if (E.length && E[0].finish)
                            E[0].finish.push(da);
                        else {
                            if (ca.executed)
                                return ca.result;
                            ha && (ca.result = O);
                            ha = S();
                            K(ca);
                            ha = S();
                            ca.executed !== w && ca.injected === D && y.guardCheckComplete(function() {
                                Y(ca)
                            });
                            if (ca.executed)
                                return ca.result;
                            ha == n ? ca.cjs ? H.unshift(ca) : E.length && (E[0].finish = [da]) : H.push(ca)
                        }
                    }(L, T);
                    A("config-publishRequireResult") && !m.exists(L) && void 0 !== T && m.setObject(L, T);
                    return T
                }
                ;
                b.loadInit = function(L) {
                    L()
                }
                ;
                b.registerModulePath = function(L, T) {
                    var da = {};
                    da[L.replace(/\./g, "/")] = T;
                    q({
                        paths: da
                    })
                }
                ;
                b.platformRequire = function(L) {
                    L = (L.common || []).concat(L[b._name] || L["default"] || []);
                    for (var T; L.length; )
                        m.isArray(T = L.shift()) ? b.require.apply(b, T) : b.require(T)
                }
                ;
                b.requireIf = b.requireAfterIf = function(L, T, da) {
                    L && b.require(T, da)
                }
                ;
                b.requireLocalization = function(L, T, da) {
                    q(["../i18n"], function(ha) {
                        ha.getLocalization(L, T, da)
                    })
                }
                ;
                return {
                    extractLegacyApiApplications: u,
                    require: f,
                    loadInit: function(L, T, da) {
                        T([L], function(ha) {
                            T(ha.names, function() {
                                for (var ca = "", qa = [], ta = 0; ta < arguments.length; ta++)
                                    ca += "var " + ha.names[ta] + "\x3d arguments[" + ta + "]; ",
                                    qa.push(arguments[ta]);
                                eval(ca);
                                var oa = T.module, va = [], na;
                                ca = {
                                    provide: function(ia) {
                                        ia = t(ia);
                                        ia = B(ia, oa);
                                        ia !== oa && J(ia)
                                    },
                                    require: function(ia, wa) {
                                        ia = t(ia);
                                        wa && (B(ia, oa).result = O);
                                        va.push(ia)
                                    },
                                    requireLocalization: function(ia, wa, ya) {
                                        na || (na = ["dojo/i18n"]);
                                        ya = (ya || b.locale).toLowerCase();
                                        ia = t(ia) + "/nls/" + (/root/i.test(ya) ? "" : ya + "/") + t(wa);
                                        B(ia, oa).isXd && na.push("dojo/i18n!" + ia)
                                    },
                                    loadInit: function(ia) {
                                        ia()
                                    }
                                };
                                ta = {};
                                var ra;
                                try {
                                    for (ra in ca)
                                        ta[ra] = b[ra],
                                        b[ra] = ca[ra];
                                    ha.def.apply(null, qa)
                                } catch (ia) {
                                    R("error", [{
                                        src: x.id,
                                        id: "failedDojoLoadInit"
                                    }, ia])
                                } finally {
                                    for (ra in ca)
                                        b[ra] = ta[ra]
                                }
                                na && (va = va.concat(na));
                                va.length ? f(va.join(","), T, da) : da()
                            })
                        })
                    }
                }
            })
        },
        "dojo/_base/kernel": function() {
            define(["../global", "../has", "./config", "require", "module"], function(b, A, q, x, r) {
                var m, p = {}, t = {}, h = {
                    config: q,
                    global: b,
                    dijit: p,
                    dojox: t
                };
                p = {
                    dojo: ["dojo", h],
                    dijit: ["dijit", p],
                    dojox: ["dojox", t]
                };
                r = x.map && x.map[r.id.match(/[^\/]+/)[0]];
                for (m in r)
                    p[m] ? p[m][0] = r[m] : p[m] = [r[m], {}];
                for (m in p)
                    r = p[m],
                    r[1]._scopeName = r[0],
                    q.noGlobals || (b[r[0]] = r[1]);
                h.scopeMap = p;
                h.baseUrl = h.config.baseUrl = x.baseUrl;
                h.isAsync = x.async;
                h.locale = q.locale;
                b = "$Rev:$".match(/[0-9a-f]{7,}/);
                h.version = {
                    major: 1,
                    minor: 16,
                    patch: 3,
                    flag: "",
                    revision: b ? b[0] : NaN,
                    toString: function() {
                        var a = h.version;
                        return a.major + "." + a.minor + "." + a.patch + a.flag + " (" + a.revision + ")"
                    }
                };
                A("csp-restrictions") || Function("d", "d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(h);
                h.exit = function() {}
                ;
                A("host-webworker");
                A.add("console-as-object", function() {
                    return Function.prototype.bind && console && "object" === typeof console.log
                });
                "undefined" != typeof console || (console = {});
                r = "assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");
                var c;
                for (b = 0; c = r[b++]; )
                    console[c] ? A("console-as-object") && (console[c] = Function.prototype.bind.call(console[c], console)) : function() {
                        var a = c + "";
                        console[a] = "log"in console ? function() {
                            var f = Array.prototype.slice.call(arguments);
                            f.unshift(a + ":");
                            console.log(f.join(" "))
                        }
                        : function() {}
                        ;
                        console[a]._fake = !0
                    }();
                A.add("dojo-debug-messages", !!q.isDebug);
                h.deprecated = h.experimental = function() {}
                ;
                A("dojo-debug-messages") && (h.deprecated = function(a, f, e) {
                    a = "DEPRECATED: " + a;
                    f && (a += " " + f);
                    e && (a += " -- will be removed in version: " + e);
                    console.warn(a)
                }
                ,
                h.experimental = function(a, f) {
                    a = "EXPERIMENTAL: " + a + " -- APIs subject to change without notice.";
                    f && (a += " " + f);
                    console.warn(a)
                }
                );
                if (q.modulePaths) {
                    h.deprecated("dojo.modulePaths", "use paths configuration");
                    A = {};
                    for (m in q.modulePaths)
                        A[m.replace(/\./g, "/")] = q.modulePaths[m];
                    x({
                        paths: A
                    })
                }
                h.moduleUrl = function(a, f) {
                    h.deprecated("dojo.moduleUrl()", "use require.toUrl", "2.0");
                    var e = null;
                    a && (e = x.toUrl(a.replace(/\./g, "/") + (f ? "/" + f : "") + "/*.*").replace(/\/\*\.\*/, "") + (f ? "" : "/"));
                    return e
                }
                ;
                h._hasResource = {};
                return h
            })
        },
        "dojo/global": function() {
            define(function() {
                return "undefined" !== typeof global && "function" !== typeof global ? global : "undefined" !== typeof window ? window : "undefined" !== typeof self ? self : this
            })
        },
        "dojo/has": function() {
            define(["./global", "require", "module"], function(b, A, q) {
                var x = A.has || function() {}
                ;
                if (!x("dojo-has-api")) {
                    var r = "undefined" != typeof window && "undefined" != typeof location && "undefined" != typeof document && window.location == location && window.document == document && document
                      , m = r && r.createElement("DiV")
                      , p = q.config && q.config() || {};
                    x = function(t) {
                        return "function" == typeof p[t] ? p[t] = p[t](b, r, m) : p[t]
                    }
                    ;
                    x.cache = p;
                    x.add = function(t, h, c, a) {
                        ("undefined" == typeof p[t] || a) && (p[t] = h);
                        return c && x(t)
                    }
                }
                x.add("dom-addeventlistener", !!document.addEventListener);
                x.add("touch", "ontouchstart"in document || "onpointerdown"in document && 0 < navigator.maxTouchPoints || window.navigator.msMaxTouchPoints);
                x.add("touch-events", "ontouchstart"in document);
                x.add("pointer-events", "pointerEnabled"in window.navigator ? window.navigator.pointerEnabled : "PointerEvent"in window);
                x.add("MSPointer", window.navigator.msPointerEnabled);
                x.add("touch-action", x("touch") && x("pointer-events"));
                x.add("device-width", screen.availWidth || innerWidth);
                A = document.createElement("form");
                x.add("dom-attributes-explicit", 0 == A.attributes.length);
                x.add("dom-attributes-specified-flag", 0 < A.attributes.length && 40 > A.attributes.length);
                x.clearElement = function(t) {
                    t.innerHTML = "";
                    return t
                }
                ;
                x.normalize = function(t, h) {
                    var c = t.match(/[\?:]|[^:\?]*/g)
                      , a = 0
                      , f = function(e) {
                        var l = c[a++];
                        if (":" == l)
                            return 0;
                        if ("?" == c[a++]) {
                            if (!e && x(l))
                                return f();
                            f(!0);
                            return f(e)
                        }
                        return l || 0
                    };
                    return (t = f()) && h(t)
                }
                ;
                x.load = function(t, h, c) {
                    t ? h([t], c) : c()
                }
                ;
                return x
            })
        },
        "dojo/_base/config": function() {
            define(["../global", "../has", "require"], function(b, A, q) {
                b = {};
                q = q.rawConfig;
                for (var x in q)
                    b[x] = q[x];
                !b.locale && "undefined" != typeof navigator && (x = navigator.languages && navigator.languages.length ? navigator.languages[0] : navigator.language || navigator.userLanguage) && (b.locale = x.toLowerCase());
                return b
            })
        },
        "dojo/json": function() {
            define(["./has"], function(b) {
                var A = "undefined" != typeof JSON;
                b.add("json-parse", A);
                b.add("json-stringify", A && '{"a":1}' == JSON.stringify({
                    a: 0
                }, function(x, r) {
                    return r || 1
                }));
                if (b("json-stringify"))
                    return JSON;
                var q = function(x) {
                    return ('"' + x.replace(/(["\\])/g, "\\$1") + '"').replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r")
                };
                return {
                    parse: b("json-parse") ? JSON.parse : function(x, r) {
                        if (r && !/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(x))
                            throw new SyntaxError("Invalid characters in JSON");
                        return eval("(" + x + ")")
                    }
                    ,
                    stringify: function(x, r, m) {
                        function p(h, c, a) {
                            r && (h = r(a, h));
                            var f = typeof h;
                            if ("number" == f)
                                return isFinite(h) ? h + "" : "null";
                            if ("boolean" == f)
                                return h + "";
                            if (null === h)
                                return "null";
                            if ("string" == typeof h)
                                return q(h);
                            if ("function" == f || "undefined" == f)
                                return t;
                            if ("function" == typeof h.toJSON)
                                return p(h.toJSON(a), c, a);
                            if (h instanceof Date)
                                return '"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g, function(y, n, v) {
                                    y = h["getUTC" + n]() + (v ? 1 : 0);
                                    return 10 > y ? "0" + y : y
                                });
                            if (h.valueOf() !== h)
                                return p(h.valueOf(), c, a);
                            var e = m ? c + m : ""
                              , l = m ? " " : ""
                              , k = m ? "\n" : "";
                            if (h instanceof Array) {
                                l = h.length;
                                var d = [];
                                for (a = 0; a < l; a++)
                                    f = p(h[a], e, a),
                                    "string" != typeof f && (f = "null"),
                                    d.push(k + e + f);
                                return "[" + d.join(",") + k + c + "]"
                            }
                            d = [];
                            for (a in h)
                                if (h.hasOwnProperty(a)) {
                                    if ("number" == typeof a)
                                        var u = '"' + a + '"';
                                    else if ("string" == typeof a)
                                        u = q(a);
                                    else
                                        continue;
                                    f = p(h[a], e, a);
                                    "string" == typeof f && d.push(k + e + u + ":" + l + f)
                                }
                            return "{" + d.join(",") + k + c + "}"
                        }
                        var t;
                        "string" == typeof r && (m = r,
                        r = null);
                        return p(x, "", "")
                    }
                }
            })
        },
        "dojo/_base/lang": function() {
            define(["./kernel", "../has", "../sniff"], function(b, A) {
                A.add("bug-for-in-skips-shadowed", function() {
                    for (var c in {
                        toString: 1
                    })
                        return 0;
                    return 1
                });
                var q = A("bug-for-in-skips-shadowed") ? "hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" ") : []
                  , x = q.length
                  , r = function(c, a, f) {
                    f || (f = c[0] && b.scopeMap[c[0]] ? b.scopeMap[c.shift()][1] : b.global);
                    try {
                        for (var e = 0; e < c.length; e++) {
                            var l = c[e];
                            if (!(l in f))
                                if (a)
                                    f[l] = {};
                                else
                                    return;
                            f = f[l]
                        }
                        return f
                    } catch (k) {}
                }
                  , m = Object.prototype.toString
                  , p = function(c, a, f) {
                    return (f || []).concat(Array.prototype.slice.call(c, a || 0))
                }
                  , t = /\{([^\}]+)\}/g
                  , h = {
                    _extraNames: q,
                    _mixin: function(c, a, f) {
                        var e, l = {};
                        for (d in a) {
                            var k = a[d];
                            d in c && (c[d] === k || d in l && l[d] === k) || (c[d] = f ? f(k) : k)
                        }
                        if (A("bug-for-in-skips-shadowed") && a)
                            for (e = 0; e < x; ++e) {
                                var d = q[e];
                                k = a[d];
                                d in c && (c[d] === k || d in l && l[d] === k) || (c[d] = f ? f(k) : k)
                            }
                        return c
                    },
                    mixin: function(c, a) {
                        c || (c = {});
                        for (var f = 1, e = arguments.length; f < e; f++)
                            h._mixin(c, arguments[f]);
                        return c
                    },
                    setObject: function(c, a, f) {
                        var e = c.split(".");
                        c = e.pop();
                        return (f = r(e, !0, f)) && c ? f[c] = a : void 0
                    },
                    getObject: function(c, a, f) {
                        return c ? r(c.split("."), a, f) : f
                    },
                    exists: function(c, a) {
                        return void 0 !== h.getObject(c, !1, a)
                    },
                    isString: function(c) {
                        return "string" == typeof c || c instanceof String
                    },
                    isArray: Array.isArray || function(c) {
                        return "[object Array]" == m.call(c)
                    }
                    ,
                    isFunction: function(c) {
                        return "[object Function]" === m.call(c)
                    },
                    isObject: function(c) {
                        return void 0 !== c && (null === c || "object" == typeof c || h.isArray(c) || h.isFunction(c))
                    },
                    isArrayLike: function(c) {
                        return !!c && !h.isString(c) && !h.isFunction(c) && !(c.tagName && "form" == c.tagName.toLowerCase()) && (h.isArray(c) || isFinite(c.length))
                    },
                    isAlien: function(c) {
                        return c && !h.isFunction(c) && /\{\s*\[native code\]\s*\}/.test(String(c))
                    },
                    extend: function(c, a) {
                        for (var f = 1, e = arguments.length; f < e; f++)
                            h._mixin(c.prototype, arguments[f]);
                        return c
                    },
                    _hitchArgs: function(c, a) {
                        var f = h._toArray(arguments, 2)
                          , e = h.isString(a);
                        return function() {
                            var l = h._toArray(arguments)
                              , k = e ? (c || b.global)[a] : a;
                            return k && k.apply(c || this, f.concat(l))
                        }
                    },
                    hitch: function(c, a) {
                        if (2 < arguments.length)
                            return h._hitchArgs.apply(b, arguments);
                        a || (a = c,
                        c = null);
                        if (h.isString(a)) {
                            c = c || b.global;
                            if (!c[a])
                                throw ['lang.hitch: scope["', a, '"] is null (scope\x3d"', c, '")'].join("");
                            return function() {
                                return c[a].apply(c, arguments || [])
                            }
                        }
                        return c ? function() {
                            return a.apply(c, arguments || [])
                        }
                        : a
                    },
                    delegate: function() {
                        function c() {}
                        return function(a, f) {
                            c.prototype = a;
                            a = new c;
                            c.prototype = null;
                            f && h._mixin(a, f);
                            return a
                        }
                    }(),
                    _toArray: A("ie") ? function() {
                        function c(a, f, e) {
                            e = e || [];
                            for (f = f || 0; f < a.length; f++)
                                e.push(a[f]);
                            return e
                        }
                        return function(a) {
                            return (a.item ? c : p).apply(this, arguments)
                        }
                    }() : p,
                    partial: function(c) {
                        return h.hitch.apply(b, [null].concat(h._toArray(arguments)))
                    },
                    clone: function(c) {
                        if (!c || "object" != typeof c || h.isFunction(c))
                            return c;
                        if (c.nodeType && "cloneNode"in c)
                            return c.cloneNode(!0);
                        if (c instanceof Date)
                            return new Date(c.getTime());
                        if (c instanceof RegExp)
                            return new RegExp(c);
                        var a;
                        if (h.isArray(c)) {
                            var f = [];
                            var e = 0;
                            for (a = c.length; e < a; ++e)
                                e in c && (f[e] = h.clone(c[e]))
                        } else
                            f = c.constructor ? new c.constructor : {};
                        return h._mixin(f, c, h.clone)
                    },
                    trim: String.prototype.trim ? function(c) {
                        return c.trim()
                    }
                    : function(c) {
                        return c.replace(/^\s\s*/, "").replace(/\s\s*$/, "")
                    }
                    ,
                    replace: function(c, a, f) {
                        return c.replace(f || t, h.isFunction(a) ? a : function(e, l) {
                            return h.getObject(l, !1, a)
                        }
                        )
                    }
                };
                h.mixin(b, h);
                return h
            })
        },
        "dojo/sniff": function() {
            define(["./has"], function(b) {
                var A = navigator
                  , q = A.userAgent;
                A = A.appVersion;
                var x = parseFloat(A);
                b.add("air", 0 <= q.indexOf("AdobeAIR"));
                b.add("wp", parseFloat(q.split("Windows Phone")[1]) || void 0);
                b.add("msapp", parseFloat(q.split("MSAppHost/")[1]) || void 0);
                b.add("khtml", 0 <= A.indexOf("Konqueror") ? x : void 0);
                b.add("edge", parseFloat(q.split("Edge/")[1]) || void 0);
                b.add("opr", parseFloat(q.split("OPR/")[1]) || void 0);
                b.add("webkit", !b("wp") && !b("edge") && parseFloat(q.split("WebKit/")[1]) || void 0);
                b.add("chrome", !b("edge") && !b("opr") && parseFloat(q.split("Chrome/")[1]) || void 0);
                b.add("android", !b("wp") && parseFloat(q.split("Android ")[1]) || void 0);
                b.add("safari", !(0 <= A.indexOf("Safari")) || b("wp") || b("chrome") || b("android") || b("edge") || b("opr") ? void 0 : parseFloat(A.split("Version/")[1]));
                b.add("mac", 0 <= A.indexOf("Macintosh"));
                b.add("quirks", "BackCompat" == document.compatMode);
                if (!b("wp") && q.match(/(iPhone|iPod|iPad)/)) {
                    var r = RegExp.$1.replace(/P/, "p")
                      , m = q.match(/OS ([\d_]+)/) ? RegExp.$1 : "1";
                    m = parseFloat(m.replace(/_/, ".").replace(/_/g, ""));
                    b.add(r, m);
                    b.add("ios", m)
                }
                b.add("bb", (0 <= q.indexOf("BlackBerry") || 0 <= q.indexOf("BB10")) && parseFloat(q.split("Version/")[1]) || void 0);
                b.add("trident", parseFloat(A.split("Trident/")[1]) || void 0);
                b.add("svg", "undefined" !== typeof SVGAngle);
                b("webkit") || (0 <= q.indexOf("Opera") && b.add("opera", 9.8 <= x ? parseFloat(q.split("Version/")[1]) || x : x),
                !(0 <= q.indexOf("Gecko")) || b("wp") || b("khtml") || b("trident") || b("edge") || b.add("mozilla", x),
                b("mozilla") && b.add("ff", parseFloat(q.split("Firefox/")[1] || q.split("Minefield/")[1]) || void 0),
                document.all && !b("opera") && (q = parseFloat(A.split("MSIE ")[1]) || void 0,
                (A = document.documentMode) && 5 != A && Math.floor(q) != A && (q = A),
                b.add("ie", q)),
                b.add("wii", "undefined" != typeof opera && opera.wiiremote));
                return b
            })
        },
        "dojo/_base/array": function() {
            define(["./kernel", "../has", "./lang"], function(b, A, q) {
                function x(c) {
                    return p[c] = new Function("item","index","array",c)
                }
                function r(c) {
                    var a = !c;
                    return function(f, e, l) {
                        var k = 0
                          , d = f && f.length || 0;
                        d && "string" == typeof f && (f = f.split(""));
                        "string" == typeof e && (e = p[e] || x(e));
                        if (l)
                            for (; k < d; ++k) {
                                var u = !e.call(l, f[k], k, f);
                                if (c ^ u)
                                    return !u
                            }
                        else
                            for (; k < d; ++k)
                                if (u = !e(f[k], k, f),
                                c ^ u)
                                    return !u;
                        return a
                    }
                }
                function m(c) {
                    var a = 1
                      , f = 0
                      , e = 0;
                    c || (a = f = e = -1);
                    return function(l, k, d, u) {
                        if (u && 0 < a)
                            return h.lastIndexOf(l, k, d);
                        u = l && l.length || 0;
                        var y = c ? u + e : f;
                        d === t ? d = c ? f : u + e : 0 > d ? (d = u + d,
                        0 > d && (d = f)) : d = d >= u ? u + e : d;
                        for (u && "string" == typeof l && (l = l.split("")); d != y; d += a)
                            if (l[d] == k)
                                return d;
                        return -1
                    }
                }
                var p = {}, t, h = {
                    every: r(!1),
                    some: r(!0),
                    indexOf: m(!0),
                    lastIndexOf: m(!1),
                    forEach: function(c, a, f) {
                        var e = 0
                          , l = c && c.length || 0;
                        l && "string" == typeof c && (c = c.split(""));
                        "string" == typeof a && (a = p[a] || x(a));
                        if (f)
                            for (; e < l; ++e)
                                a.call(f, c[e], e, c);
                        else
                            for (; e < l; ++e)
                                a(c[e], e, c)
                    },
                    map: function(c, a, f, e) {
                        var l = 0
                          , k = c && c.length || 0;
                        e = new (e || Array)(k);
                        k && "string" == typeof c && (c = c.split(""));
                        "string" == typeof a && (a = p[a] || x(a));
                        if (f)
                            for (; l < k; ++l)
                                e[l] = a.call(f, c[l], l, c);
                        else
                            for (; l < k; ++l)
                                e[l] = a(c[l], l, c);
                        return e
                    },
                    filter: function(c, a, f) {
                        var e = 0
                          , l = c && c.length || 0
                          , k = [];
                        l && "string" == typeof c && (c = c.split(""));
                        "string" == typeof a && (a = p[a] || x(a));
                        if (f)
                            for (; e < l; ++e) {
                                var d = c[e];
                                a.call(f, d, e, c) && k.push(d)
                            }
                        else
                            for (; e < l; ++e)
                                d = c[e],
                                a(d, e, c) && k.push(d);
                        return k
                    },
                    clearCache: function() {
                        p = {}
                    }
                };
                q.mixin(b, h);
                return h
            })
        },
        "dojo/require": function() {
            define(["./_base/loader"], function(b) {
                return {
                    dynamic: 0,
                    normalize: function(A) {
                        return A
                    },
                    load: b.require
                }
            })
        },
        "dojo/text": function() {
            define(["./_base/kernel", "require", "./has", "./request"], function(b, A, q, x) {
                var r = function(c, a, f) {
                    x(c, {
                        sync: !!a,
                        headers: {
                            "X-Requested-With": null
                        }
                    }).then(f)
                };
                var m = {}
                  , p = function(c) {
                    if (c) {
                        c = c.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im, "");
                        var a = c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
                        a && (c = a[1])
                    } else
                        c = "";
                    return c
                }
                  , t = {}
                  , h = {};
                b.cache = function(c, a, f) {
                    if ("string" == typeof c)
                        if (/\//.test(c)) {
                            var e = c;
                            f = a
                        } else
                            e = A.toUrl(c.replace(/\./g, "/") + (a ? "/" + a : ""));
                    else
                        e = c + "",
                        f = a;
                    c = void 0 != f && "string" != typeof f ? f.value : f;
                    f = f && f.sanitize;
                    if ("string" == typeof c)
                        return m[e] = c,
                        f ? p(c) : c;
                    if (null === c)
                        return delete m[e],
                        null;
                    e in m || r(e, !0, function(l) {
                        m[e] = l
                    });
                    return f ? p(m[e]) : m[e]
                }
                ;
                return {
                    dynamic: !0,
                    normalize: function(c, a) {
                        c = c.split("!");
                        var f = c[0];
                        return (/^\./.test(f) ? a(f) : f) + (c[1] ? "!" + c[1] : "")
                    },
                    load: function(c, a, f) {
                        c = c.split("!");
                        var e = 1 < c.length
                          , l = c[0]
                          , k = a.toUrl(c[0]);
                        c = "url:" + k;
                        var d = t
                          , u = function(n) {
                            f(e ? p(n) : n)
                        };
                        l in m ? d = m[l] : a.cache && c in a.cache ? d = a.cache[c] : k in m && (d = m[k]);
                        if (d === t)
                            if (h[k])
                                h[k].push(u);
                            else {
                                var y = h[k] = [u];
                                r(k, !a.async, function(n) {
                                    m[l] = m[k] = n;
                                    for (var v = 0; v < y.length; )
                                        y[v++](n);
                                    delete h[k]
                                })
                            }
                        else
                            u(d)
                    }
                }
            })
        },
        "dojo/request": function() {
            define(["./request/default!"], function(b) {
                return b
            })
        },
        "dojo/request/default": function() {
            define(["exports", "require", "../has"], function(b, A, q) {
                var x = q("config-requestProvider");
                x || (x = "./xhr");
                b.getPlatformDefaultId = function() {
                    return "./xhr"
                }
                ;
                b.load = function(r, m, p, t) {
                    A(["platform" == r ? "./xhr" : x], function(h) {
                        p(h)
                    })
                }
            })
        },
        "dojo/i18n": function() {
            define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "), function(b, A, q, x, r, m, p, t, h) {
                q.add("dojo-preload-i18n-Api", 1);
                var c = b.i18n = {}
                  , a = /(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/
                  , f = function(B, K, J, R) {
                    var V = [J + R];
                    K = K.split("-");
                    for (var Y = "", S = 0; S < K.length; S++)
                        if (Y += (Y ? "-" : "") + K[S],
                        !B || B[Y])
                            V.push(J + Y + "/" + R),
                            V.specificity = Y;
                    return V
                }
                  , e = {}
                  , l = function(B, K, J) {
                    J = J ? J.toLowerCase() : b.locale;
                    B = B.replace(/\./g, "/");
                    K = K.replace(/\./g, "/");
                    return /root/i.test(J) ? B + "/nls/" + K : B + "/nls/" + J + "/" + K
                }
                  , k = b.getL10nName = function(B, K, J) {
                    return B = h.id + "!" + l(B, K, J)
                }
                  , d = function(B, K, J, R, V, Y) {
                    B([K], function(S) {
                        var U = m.clone(S.root || S.ROOT)
                          , L = f(!S._v1x && S, V, J, R);
                        B(L, function() {
                            for (var T = 1; T < L.length; T++)
                                U = m.mixin(m.clone(U), arguments[T]);
                            e[K + "/" + V] = U;
                            U.$locale = L.specificity;
                            Y()
                        })
                    })
                }
                  , u = function(B) {
                    var K = r.extraLocale || [];
                    K = m.isArray(K) ? K : [K];
                    K.push(B);
                    return K
                }
                  , y = function(B, K, J) {
                    var R = a.exec(B)
                      , V = R[1] + "/"
                      , Y = R[5] || R[4]
                      , S = V + Y
                      , U = (R = R[5] && R[4]) || b.locale || ""
                      , L = S + "/" + U;
                    R = R ? [U] : u(U);
                    var T = R.length
                      , da = function() {
                        --T || J(m.delegate(e[L]))
                    };
                    U = B.split("*");
                    var ha = "preload" == U[1];
                    if (q("dojo-preload-i18n-Api")) {
                        if (ha && (e[B] || (e[B] = 1,
                        O(U[2], t.parse(U[3]), 1, K)),
                        J(1)),
                        (U = ha) || (v && D.push([B, K, J]),
                        U = v && !e[L]),
                        U)
                            return
                    } else if (ha) {
                        J(1);
                        return
                    }
                    x.forEach(R, function(ca) {
                        var qa = S + "/" + ca;
                        q("dojo-preload-i18n-Api") && z(qa);
                        e[qa] ? da() : d(K, S, V, Y, ca, da)
                    })
                };
                q("dojo-preload-i18n-Api");
                var n = c.normalizeLocale = function(B) {
                    B = B ? B.toLowerCase() : b.locale;
                    return "root" == B ? "ROOT" : B
                }
                , v = 0, D = [], O = c._preloadLocalizations = function(B, K, J, R) {
                    function V(L, T) {
                        R.isXdUrl(A.toUrl(L + ".js")) || J ? R([L], T) : H([L], T, R)
                    }
                    function Y(L, T) {
                        for (L = L.split("-"); L.length; ) {
                            if (T(L.join("-")))
                                return;
                            L.pop()
                        }
                        T("ROOT")
                    }
                    function S() {
                        for (--v; !v && D.length; )
                            y.apply(null, D.shift())
                    }
                    function U(L) {
                        L = n(L);
                        Y(L, function(T) {
                            if (0 <= x.indexOf(K, T)) {
                                var da = B.replace(/\./g, "/") + "_" + T;
                                v++;
                                V(da, function(ha) {
                                    for (var ca in ha) {
                                        var qa = ha[ca]
                                          , ta = ca.match(/(.+)\/([^\/]+)$/);
                                        if (ta) {
                                            var oa = ta[2];
                                            ta = ta[1] + "/";
                                            if (qa._localized) {
                                                var va;
                                                if ("ROOT" === T) {
                                                    var na = va = qa._localized;
                                                    delete qa._localized;
                                                    na.root = qa;
                                                    e[A.toAbsMid(ca)] = na
                                                } else
                                                    va = qa._localized,
                                                    e[A.toAbsMid(ta + oa + "/" + T)] = qa;
                                                T !== L && function(ra, ia, wa, ya) {
                                                    var F = []
                                                      , I = [];
                                                    Y(L, function(M) {
                                                        ya[M] && (F.push(A.toAbsMid(ra + M + "/" + ia)),
                                                        I.push(A.toAbsMid(ra + ia + "/" + M)))
                                                    });
                                                    F.length ? (v++,
                                                    R(F, function() {
                                                        for (var M = F.length - 1; 0 <= M; M--)
                                                            wa = m.mixin(m.clone(wa), arguments[M]),
                                                            e[I[M]] = wa;
                                                        e[A.toAbsMid(ra + ia + "/" + L)] = m.clone(wa);
                                                        S()
                                                    })) : e[A.toAbsMid(ra + ia + "/" + L)] = wa
                                                }(ta, oa, qa, va)
                                            }
                                        }
                                    }
                                    S()
                                });
                                return !0
                            }
                            return !1
                        })
                    }
                    R = R || A;
                    U();
                    x.forEach(b.config.extraLocale, U)
                }
                , z = function() {}, w = {}, E = {}, C, H = function(B, K, J) {
                    var R = [];
                    x.forEach(B, function(V) {
                        function Y(L) {
                            C || (C = new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"));
                            L = C(L, z, V, w);
                            L === w ? R.push(e[S] = w.result) : (L instanceof Error && (console.error("failed to evaluate i18n bundle; url\x3d" + S, L),
                            L = {}),
                            R.push(e[S] = /nls\/[^\/]+\/[^\/]+$/.test(S) ? L : {
                                root: L,
                                _v1x: 1
                            }))
                        }
                        var S = J.toUrl(V + ".js");
                        if (e[S])
                            R.push(e[S]);
                        else {
                            var U = J.syncLoadNls(V);
                            U || (U = z(V.replace(/nls\/([^\/]*)\/([^\/]*)$/, "nls/$2/$1")));
                            if (U)
                                R.push(U);
                            else if (p)
                                p.get({
                                    url: S,
                                    sync: !0,
                                    load: Y,
                                    error: function() {
                                        R.push(e[S] = {})
                                    }
                                });
                            else
                                try {
                                    J.getText(S, !0, Y)
                                } catch (L) {
                                    R.push(e[S] = {})
                                }
                        }
                    });
                    K && K.apply(null, R)
                };
                z = function(B) {
                    for (var K, J = B.split("/"), R = b.global[J[0]], V = 1; R && V < J.length - 1; R = R[J[V++]])
                        ;
                    R && ((K = R[J[V]]) || (K = R[J[V].replace(/-/g, "_")]),
                    K && (e[B] = K));
                    return K
                }
                ;
                c.getLocalization = function(B, K, J) {
                    var R, V = l(B, K, J);
                    if (E[V])
                        return E[V];
                    y(V, A.isXdUrl(A.toUrl(V + ".js")) ? A : function(Y, S) {
                        H(Y, S, A)
                    }
                    , function(Y) {
                        R = E[V] = Y
                    });
                    return R
                }
                ;
                return m.mixin(c, {
                    dynamic: !0,
                    normalize: function(B, K) {
                        return /^\./.test(B) ? K(B) : B
                    },
                    load: y,
                    cache: e,
                    getL10nName: k
                })
            })
        },
        "dojo/_base/xhr": function() {
            define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "), function(b, A, q, x, r, m, p, t, h, c, a, f, e, l, k, d) {
                b._xhrObj = k._create;
                var u = b.config;
                b.objectToQuery = x.objectToQuery;
                b.queryToObject = x.queryToObject;
                b.fieldToObject = m.fieldToObject;
                b.formToObject = m.toObject;
                b.formToQuery = m.toQuery;
                b.formToJson = m.toJson;
                b._blockAsync = !1;
                A.add("native-xhr2-blob", function() {
                    if (A("native-xhr2")) {
                        var z = new XMLHttpRequest;
                        z.open("GET", "/", !0);
                        z.responseType = "blob";
                        var w = z.responseType;
                        z.abort();
                        return "blob" === w
                    }
                });
                var y = b._contentHandlers = b.contentHandlers = {
                    text: function(z) {
                        return z.responseText
                    },
                    json: function(z) {
                        return h.fromJson(z.responseText || null)
                    },
                    "json-comment-filtered": function(z) {
                        t.useCommentedJson || console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
                        z = z.responseText;
                        var w = z.indexOf("/*")
                          , E = z.lastIndexOf("*/");
                        if (-1 == w || -1 == E)
                            throw Error("JSON was not comment filtered");
                        return h.fromJson(z.substring(w + 2, E))
                    },
                    javascript: function(z) {
                        return b.eval(z.responseText)
                    },
                    xml: function(z) {
                        var w = z.responseXML;
                        w && A("dom-qsa2.1") && !w.querySelectorAll && A("dom-parser") && (w = (new DOMParser).parseFromString(z.responseText, "application/xml"));
                        if (A("ie") && (!w || !w.documentElement)) {
                            var E = function(C) {
                                return "MSXML" + C + ".DOMDocument"
                            };
                            E = ["Microsoft.XMLDOM", E(6), E(4), E(3), E(2)];
                            a.some(E, function(C) {
                                try {
                                    var H = new ActiveXObject(C);
                                    H.async = !1;
                                    H.loadXML(z.responseText);
                                    w = H
                                } catch (B) {
                                    return !1
                                }
                                return !0
                            })
                        }
                        return w
                    },
                    "json-comment-optional": function(z) {
                        return z.responseText && /^[^{\[]*\/\*/.test(z.responseText) ? y["json-comment-filtered"](z) : y.json(z)
                    }
                };
                A("native-xhr2") && (y.arraybuffer = y.blob = y.document = function(z, w) {
                    return "blob" !== w.args.handleAs || A("native-xhr2-blob") ? z.response : new Blob([z.response],{
                        type: z.getResponseHeader("Content-Type")
                    })
                }
                );
                b._ioSetArgs = function(z, w, E, C) {
                    var H = {
                        args: z,
                        url: z.url
                    }
                      , B = null;
                    if (z.form) {
                        B = r.byId(z.form);
                        var K = B.getAttributeNode("action");
                        H.url = H.url || (K ? K.value : b.doc ? b.doc.URL : null);
                        B = m.toObject(B)
                    }
                    K = {};
                    B && c.mixin(K, B);
                    z.content && c.mixin(K, z.content);
                    z.preventCache && (K["dojo.preventCache"] = (new Date).valueOf());
                    H.query = x.objectToQuery(K);
                    H.handleAs = z.handleAs || "text";
                    var J = new p(function(S) {
                        S.canceled = !0;
                        w && w(S);
                        var U = S.ioArgs.error;
                        U || (U = Error("request cancelled"),
                        U.dojoType = "cancel",
                        S.ioArgs.error = U);
                        return U
                    }
                    );
                    J.addCallback(E);
                    var R = z.load;
                    R && c.isFunction(R) && J.addCallback(function(S) {
                        return R.call(z, S, H)
                    });
                    var V = z.error;
                    V && c.isFunction(V) && J.addErrback(function(S) {
                        return V.call(z, S, H)
                    });
                    var Y = z.handle;
                    Y && c.isFunction(Y) && J.addBoth(function(S) {
                        return Y.call(z, S, H)
                    });
                    J.addErrback(function(S) {
                        return C(S, J)
                    });
                    u.ioPublish && b.publish && !1 !== H.args.ioPublish && (J.addCallbacks(function(S) {
                        b.publish("/dojo/io/load", [J, S]);
                        return S
                    }, function(S) {
                        b.publish("/dojo/io/error", [J, S]);
                        return S
                    }),
                    J.addBoth(function(S) {
                        b.publish("/dojo/io/done", [J, S]);
                        return S
                    }));
                    J.ioArgs = H;
                    return J
                }
                ;
                var n = function(z) {
                    z = y[z.ioArgs.handleAs](z.ioArgs.xhr, z.ioArgs);
                    return void 0 === z ? null : z
                }
                  , v = function(z, w) {
                    w.ioArgs.args.failOk || console.error(z);
                    return z
                }
                  , D = function(z) {
                    0 >= O && (O = 0,
                    u.ioPublish && b.publish && (!z || z && !1 !== z.ioArgs.args.ioPublish) && b.publish("/dojo/io/stop"))
                }
                  , O = 0;
                e.after(l, "_onAction", function() {
                    --O
                });
                e.after(l, "_onInFlight", D);
                b._ioCancelAll = l.cancelAll;
                b._ioNotifyStart = function(z) {
                    u.ioPublish && b.publish && !1 !== z.ioArgs.args.ioPublish && (O || b.publish("/dojo/io/start"),
                    O += 1,
                    b.publish("/dojo/io/send", [z]))
                }
                ;
                b._ioWatch = function(z, w, E, C) {
                    z.ioArgs.options = z.ioArgs.args;
                    c.mixin(z, {
                        response: z.ioArgs,
                        isValid: function(H) {
                            return w(z)
                        },
                        isReady: function(H) {
                            return E(z)
                        },
                        handleResponse: function(H) {
                            return C(z)
                        }
                    });
                    l(z);
                    D(z)
                }
                ;
                b._ioAddQueryToUrl = function(z) {
                    z.query.length && (z.url += (-1 == z.url.indexOf("?") ? "?" : "\x26") + z.query,
                    z.query = null)
                }
                ;
                b.xhr = function(z, w, E) {
                    var C = b._ioSetArgs(w, function(J) {
                        K && K.cancel()
                    }, n, v)
                      , H = C.ioArgs;
                    "postData"in w ? H.query = w.postData : "putData"in w ? H.query = w.putData : "rawBody"in w ? H.query = w.rawBody : (2 < arguments.length && !E || -1 === "POST|PUT".indexOf(z.toUpperCase())) && b._ioAddQueryToUrl(H);
                    var B;
                    A("native-xhr2") && (B = {
                        arraybuffer: 1,
                        blob: 1,
                        document: 1
                    });
                    B = B[w.handleAs] ? w.handleAs : "text";
                    "blob" !== B || A("native-xhr2-blob") || (B = "arraybuffer");
                    B = {
                        method: z,
                        handleAs: B,
                        responseType: w.responseType,
                        timeout: w.timeout,
                        withCredentials: w.withCredentials,
                        ioArgs: H
                    };
                    "undefined" !== typeof w.headers && (B.headers = w.headers);
                    "undefined" !== typeof w.contentType && (B.headers || (B.headers = {}),
                    B.headers["Content-Type"] = w.contentType);
                    "undefined" !== typeof H.query && (B.data = H.query);
                    "undefined" !== typeof w.sync && (B.sync = w.sync);
                    b._ioNotifyStart(C);
                    try {
                        var K = k(H.url, B, !0)
                    } catch (J) {
                        return C.cancel(),
                        C
                    }
                    C.ioArgs.xhr = K.response.xhr;
                    K.then(function() {
                        C.resolve(C)
                    }).otherwise(function(J) {
                        H.error = J;
                        J.response && (J.status = J.response.status,
                        J.responseText = J.response.text,
                        J.xhr = J.response.xhr);
                        C.reject(J)
                    });
                    return C
                }
                ;
                b.xhrGet = function(z) {
                    return b.xhr("GET", z)
                }
                ;
                b.rawXhrPost = b.xhrPost = function(z) {
                    return b.xhr("POST", z, !0)
                }
                ;
                b.rawXhrPut = b.xhrPut = function(z) {
                    return b.xhr("PUT", z, !0)
                }
                ;
                b.xhrDelete = function(z) {
                    return b.xhr("DELETE", z)
                }
                ;
                b._isDocumentOk = function(z) {
                    return d.checkStatus(z.status)
                }
                ;
                b._getText = function(z) {
                    var w;
                    b.xhrGet({
                        url: z,
                        sync: !0,
                        load: function(E) {
                            w = E
                        }
                    });
                    return w
                }
                ;
                c.mixin(b.xhr, {
                    _xhrObj: b._xhrObj,
                    fieldToObject: m.fieldToObject,
                    formToObject: m.toObject,
                    objectToQuery: x.objectToQuery,
                    formToQuery: m.toQuery,
                    formToJson: m.toJson,
                    queryToObject: x.queryToObject,
                    contentHandlers: y,
                    _ioSetArgs: b._ioSetArgs,
                    _ioCancelAll: b._ioCancelAll,
                    _ioNotifyStart: b._ioNotifyStart,
                    _ioWatch: b._ioWatch,
                    _ioAddQueryToUrl: b._ioAddQueryToUrl,
                    _isDocumentOk: b._isDocumentOk,
                    _getText: b._getText,
                    get: b.xhrGet,
                    post: b.xhrPost,
                    put: b.xhrPut,
                    del: b.xhrDelete
                });
                return b.xhr
            })
        },
        "dojo/_base/sniff": function() {
            define(["./kernel", "./lang", "../sniff"], function(b, A, q) {
                b._name = "browser";
                A.mixin(b, {
                    isBrowser: !0,
                    isFF: q("ff"),
                    isIE: q("ie"),
                    isKhtml: q("khtml"),
                    isWebKit: q("webkit"),
                    isMozilla: q("mozilla"),
                    isMoz: q("mozilla"),
                    isOpera: q("opera"),
                    isSafari: q("safari"),
                    isChrome: q("chrome"),
                    isMac: q("mac"),
                    isIos: q("ios"),
                    isAndroid: q("android"),
                    isWii: q("wii"),
                    isQuirks: q("quirks"),
                    isAir: q("air")
                });
                return q
            })
        },
        "dojo/io-query": function() {
            define(["./_base/lang"], function(b) {
                var A = {};
                return {
                    objectToQuery: function(q) {
                        var x = encodeURIComponent, r = [], m;
                        for (m in q) {
                            var p = q[m];
                            if (p != A[m]) {
                                var t = x(m) + "\x3d";
                                if (b.isArray(p))
                                    for (var h = 0, c = p.length; h < c; ++h)
                                        r.push(t + x(p[h]));
                                else
                                    r.push(t + x(p))
                            }
                        }
                        return r.join("\x26")
                    },
                    queryToObject: function(q) {
                        var x = decodeURIComponent;
                        q = q.split("\x26");
                        for (var r = {}, m, p, t = 0, h = q.length; t < h; ++t)
                            if (p = q[t],
                            p.length) {
                                var c = p.indexOf("\x3d");
                                0 > c ? (m = x(p),
                                p = "") : (m = x(p.slice(0, c)),
                                p = x(p.slice(c + 1)));
                                "string" == typeof r[m] && (r[m] = [r[m]]);
                                b.isArray(r[m]) ? r[m].push(p) : r[m] = p
                            }
                        return r
                    }
                }
            })
        },
        "dojo/dom": function() {
            define(["./sniff", "./_base/window", "./_base/kernel"], function(b, A, q) {
                if (7 >= b("ie"))
                    try {
                        document.execCommand("BackgroundImageCache", !1, !0)
                    } catch (m) {}
                var x = {};
                b("ie") ? x.byId = function(m, p) {
                    if ("string" != typeof m)
                        return m || null;
                    var t = p || A.doc;
                    p = m && t.getElementById(m);
                    if (!p || p.attributes.id.value != m && p.id != m) {
                        t = t.all[m];
                        if (!t || t.nodeName)
                            t = [t];
                        for (var h = 0; p = t[h++]; )
                            if (p.attributes && p.attributes.id && p.attributes.id.value == m || p.id == m)
                                return p
                    } else
                        return p;
                    return null
                }
                : x.byId = function(m, p) {
                    return ("string" == typeof m ? (p || A.doc).getElementById(m) : m) || null
                }
                ;
                q = q.global.document || null;
                b.add("dom-contains", !(!q || !q.contains));
                x.isDescendant = b("dom-contains") ? function(m, p) {
                    return !(!(p = x.byId(p)) || !p.contains(x.byId(m)))
                }
                : function(m, p) {
                    try {
                        for (m = x.byId(m),
                        p = x.byId(p); m; ) {
                            if (m == p)
                                return !0;
                            m = m.parentNode
                        }
                    } catch (t) {}
                    return !1
                }
                ;
                b.add("css-user-select", function(m, p, t) {
                    if (!t)
                        return !1;
                    m = t.style;
                    p = ["Khtml", "O", "Moz", "Webkit"];
                    t = p.length;
                    var h = "userSelect";
                    do
                        if ("undefined" !== typeof m[h])
                            return h;
                    while (t-- && (h = p[t] + "UserSelect"));
                    return !1
                });
                var r = b("css-user-select");
                x.setSelectable = r ? function(m, p) {
                    x.byId(m).style[r] = p ? "" : "none"
                }
                : function(m, p) {
                    m = x.byId(m);
                    var t = m.getElementsByTagName("*")
                      , h = t.length;
                    if (p)
                        for (m.removeAttribute("unselectable"); h--; )
                            t[h].removeAttribute("unselectable");
                    else
                        for (m.setAttribute("unselectable", "on"); h--; )
                            t[h].setAttribute("unselectable", "on")
                }
                ;
                return x
            })
        },
        "dojo/_base/window": function() {
            define(["./kernel", "./lang", "../sniff"], function(b, A, q) {
                var x = {
                    global: b.global,
                    doc: b.global.document || null,
                    body: function(r) {
                        r = r || b.doc;
                        return r.body || r.getElementsByTagName("body")[0]
                    },
                    setContext: function(r, m) {
                        b.global = x.global = r;
                        b.doc = x.doc = m
                    },
                    withGlobal: function(r, m, p, t) {
                        var h = b.global;
                        try {
                            return b.global = x.global = r,
                            x.withDoc.call(null, r.document, m, p, t)
                        } finally {
                            b.global = x.global = h
                        }
                    },
                    withDoc: function(r, m, p, t) {
                        var h = x.doc, c = q("quirks"), a = q("ie"), f, e;
                        try {
                            b.doc = x.doc = r;
                            b.isQuirks = q.add("quirks", "BackCompat" == b.doc.compatMode, !0, !0);
                            if (q("ie") && (e = r.parentWindow) && e.navigator) {
                                var l = parseFloat(e.navigator.appVersion.split("MSIE ")[1]) || void 0;
                                (f = r.documentMode) && 5 != f && Math.floor(l) != f && (l = f);
                                b.isIE = q.add("ie", l, !0, !0)
                            }
                            p && "string" == typeof m && (m = p[m]);
                            return m.apply(p, t || [])
                        } finally {
                            b.doc = x.doc = h,
                            b.isQuirks = q.add("quirks", c, !0, !0),
                            b.isIE = q.add("ie", a, !0, !0)
                        }
                    }
                };
                A.mixin(b, x);
                return x
            })
        },
        "dojo/dom-form": function() {
            define(["./_base/lang", "./dom", "./io-query", "./json"], function(b, A, q, x) {
                var r = {
                    fieldToObject: function(m) {
                        var p = null;
                        if (m = A.byId(m)) {
                            var t = m.name
                              , h = (m.type || "").toLowerCase();
                            if (t && h && !m.disabled)
                                if ("radio" == h || "checkbox" == h)
                                    m.checked && (p = m.value);
                                else if (m.multiple)
                                    for (p = [],
                                    m = [m.firstChild]; m.length; )
                                        for (t = m.pop(); t; t = t.nextSibling)
                                            if (1 == t.nodeType && "option" == t.tagName.toLowerCase())
                                                t.selected && p.push(t.value);
                                            else {
                                                t.nextSibling && m.push(t.nextSibling);
                                                t.firstChild && m.push(t.firstChild);
                                                break
                                            }
                                else
                                    p = m.value
                        }
                        return p
                    },
                    toObject: function(m) {
                        var p = {};
                        m = A.byId(m).elements;
                        for (var t = 0, h = m.length; t < h; ++t) {
                            var c = m[t]
                              , a = c.name
                              , f = (c.type || "").toLowerCase();
                            if (a && f && 0 > "file|submit|image|reset|button".indexOf(f) && !c.disabled) {
                                var e = p
                                  , l = a;
                                c = r.fieldToObject(c);
                                if (null !== c) {
                                    var k = e[l];
                                    "string" == typeof k ? e[l] = [k, c] : b.isArray(k) ? k.push(c) : e[l] = c
                                }
                                "image" == f && (p[a + ".x"] = p[a + ".y"] = p[a].x = p[a].y = 0)
                            }
                        }
                        return p
                    },
                    toQuery: function(m) {
                        return q.objectToQuery(r.toObject(m))
                    },
                    toJson: function(m, p) {
                        return x.stringify(r.toObject(m), null, p ? 4 : 0)
                    }
                };
                return r
            })
        },
        "dojo/_base/Deferred": function() {
            define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "), function(b, A, q, x, r, m, p) {
                var t = function() {}
                  , h = Object.freeze || function() {}
                  , c = b.Deferred = function(a) {
                    function f(z) {
                        if (k)
                            throw Error("This deferred has already been resolved");
                        l = z;
                        k = !0;
                        e()
                    }
                    function e() {
                        for (var z; !z && v; ) {
                            var w = v;
                            v = v.next;
                            if (z = w.progress == t)
                                k = !1;
                            var E = y ? w.error : w.resolved;
                            r("config-useDeferredInstrumentation") && y && A.instrumentRejected && A.instrumentRejected(l, !!E);
                            if (E)
                                try {
                                    var C = E(l);
                                    C && "function" === typeof C.then ? C.then(m.hitch(w.deferred, "resolve"), m.hitch(w.deferred, "reject"), m.hitch(w.deferred, "progress")) : (E = z && void 0 === C,
                                    z && !E && (y = C instanceof Error),
                                    w.deferred[E && y ? "reject" : "resolve"](E ? l : C))
                                } catch (H) {
                                    w.deferred.reject(H)
                                }
                            else
                                y ? w.deferred.reject(l) : w.deferred.resolve(l)
                        }
                    }
                    var l, k, d, u, y, n, v, D = this.promise = new q;
                    this.isResolved = D.isResolved = function() {
                        return 0 == u
                    }
                    ;
                    this.isRejected = D.isRejected = function() {
                        return 1 == u
                    }
                    ;
                    this.isFulfilled = D.isFulfilled = function() {
                        return 0 <= u
                    }
                    ;
                    this.isCanceled = D.isCanceled = function() {
                        return d
                    }
                    ;
                    this.resolve = this.callback = function(z) {
                        this.fired = u = 0;
                        this.results = [z, null];
                        f(z)
                    }
                    ;
                    this.reject = this.errback = function(z) {
                        y = !0;
                        this.fired = u = 1;
                        r("config-useDeferredInstrumentation") && A.instrumentRejected && A.instrumentRejected(z, !!v);
                        f(z);
                        this.results = [null, z]
                    }
                    ;
                    this.progress = function(z) {
                        for (var w = v; w; ) {
                            var E = w.progress;
                            E && E(z);
                            w = w.next
                        }
                    }
                    ;
                    this.addCallbacks = function(z, w) {
                        this.then(z, w, t);
                        return this
                    }
                    ;
                    D.then = this.then = function(z, w, E) {
                        var C = E == t ? this : new c(D.cancel);
                        z = {
                            resolved: z,
                            error: w,
                            progress: E,
                            deferred: C
                        };
                        v ? n = n.next = z : v = n = z;
                        k && e();
                        return C.promise
                    }
                    ;
                    var O = this;
                    D.cancel = this.cancel = function() {
                        if (!k) {
                            var z = a && a(O);
                            k || (z instanceof Error || (z = new x(z)),
                            z.log = !1,
                            O.reject(z))
                        }
                        d = !0
                    }
                    ;
                    h(D)
                }
                ;
                m.extend(c, {
                    addCallback: function(a) {
                        return this.addCallbacks(m.hitch.apply(b, arguments))
                    },
                    addErrback: function(a) {
                        return this.addCallbacks(null, m.hitch.apply(b, arguments))
                    },
                    addBoth: function(a) {
                        var f = m.hitch.apply(b, arguments);
                        return this.addCallbacks(f, f)
                    },
                    fired: -1
                });
                c.when = b.when = p;
                return c
            })
        },
        "dojo/Deferred": function() {
            define(["./has", "./_base/lang", "./errors/CancelError", "./promise/Promise", "./promise/instrumentation"], function(b, A, q, x, r) {
                var m = Object.freeze || function() {}
                  , p = function(f, e, l, k, d) {
                    2 === e && a.instrumentRejected && 0 === f.length && a.instrumentRejected(l, !1, k, d);
                    for (d = 0; d < f.length; d++)
                        t(f[d], e, l, k)
                }
                  , t = function(f, e, l, k) {
                    var d = f[e]
                      , u = f.deferred;
                    if (d)
                        try {
                            var y = d(l);
                            if (0 === e)
                                "undefined" !== typeof y && c(u, e, y);
                            else {
                                if (y && "function" === typeof y.then) {
                                    f.cancel = y.cancel;
                                    y.then(h(u, 1), h(u, 2), h(u, 0));
                                    return
                                }
                                c(u, 1, y)
                            }
                        } catch (n) {
                            c(u, 2, n)
                        }
                    else
                        c(u, e, l);
                    2 === e && a.instrumentRejected && a.instrumentRejected(l, !!d, k, u.promise)
                }
                  , h = function(f, e) {
                    return function(l) {
                        c(f, e, l)
                    }
                }
                  , c = function(f, e, l) {
                    if (!f.isCanceled())
                        switch (e) {
                        case 0:
                            f.progress(l);
                            break;
                        case 1:
                            f.resolve(l);
                            break;
                        case 2:
                            f.reject(l)
                        }
                }
                  , a = function(f) {
                    var e = this.promise = new x, l = this, k, d, u, y = !1, n = [];
                    Error.captureStackTrace && (Error.captureStackTrace(l, a),
                    Error.captureStackTrace(e, a));
                    this.isResolved = e.isResolved = function() {
                        return 1 === k
                    }
                    ;
                    this.isRejected = e.isRejected = function() {
                        return 2 === k
                    }
                    ;
                    this.isFulfilled = e.isFulfilled = function() {
                        return !!k
                    }
                    ;
                    this.isCanceled = e.isCanceled = function() {
                        return y
                    }
                    ;
                    this.progress = function(D, O) {
                        if (k) {
                            if (!0 === O)
                                throw Error("This deferred has already been fulfilled.");
                            return e
                        }
                        p(n, 0, D, null, l);
                        return e
                    }
                    ;
                    this.resolve = function(D, O) {
                        if (k) {
                            if (!0 === O)
                                throw Error("This deferred has already been fulfilled.");
                            return e
                        }
                        p(n, k = 1, d = D, null, l);
                        n = null;
                        return e
                    }
                    ;
                    var v = this.reject = function(D, O) {
                        if (k) {
                            if (!0 === O)
                                throw Error("This deferred has already been fulfilled.");
                            return e
                        }
                        Error.captureStackTrace && Error.captureStackTrace(u = {}, v);
                        p(n, k = 2, d = D, u, l);
                        n = null;
                        return e
                    }
                    ;
                    this.then = e.then = function(D, O, z) {
                        var w = [z, D, O];
                        w.cancel = e.cancel;
                        w.deferred = new a(function(E) {
                            return w.cancel && w.cancel(E)
                        }
                        );
                        k && !n ? t(w, k, d, u) : n.push(w);
                        return w.deferred.promise
                    }
                    ;
                    this.cancel = e.cancel = function(D, O) {
                        if (!k) {
                            f && (O = f(D),
                            D = "undefined" === typeof O ? D : O);
                            y = !0;
                            if (!k)
                                return "undefined" === typeof D && (D = new q),
                                v(D),
                                D;
                            if (2 === k && d === D)
                                return D
                        } else if (!0 === O)
                            throw Error("This deferred has already been fulfilled.");
                    }
                    ;
                    m(e)
                };
                a.prototype.toString = function() {
                    return "[object Deferred]"
                }
                ;
                r && r(a);
                return a
            })
        },
        "dojo/errors/CancelError": function() {
            define(["./create"], function(b) {
                return b("CancelError", null, null, {
                    dojoType: "cancel",
                    log: !1
                })
            })
        },
        "dojo/errors/create": function() {
            define(["../_base/lang"], function(b) {
                return function(A, q, x, r) {
                    x = x || Error;
                    var m = function(p) {
                        if (x === Error) {
                            Error.captureStackTrace && Error.captureStackTrace(this, m);
                            var t = Error.call(this, p), h;
                            for (h in t)
                                t.hasOwnProperty(h) && (this[h] = t[h]);
                            this.message = p;
                            this.stack = t.stack
                        } else
                            x.apply(this, arguments);
                        q && q.apply(this, arguments)
                    };
                    m.prototype = b.delegate(x.prototype, r);
                    m.prototype.name = A;
                    return m.prototype.constructor = m
                }
            })
        },
        "dojo/promise/Promise": function() {
            define(["../_base/lang"], function(b) {
                function A() {
                    throw new TypeError("abstract");
                }
                return b.extend(function() {}, {
                    then: function(q, x, r) {
                        A()
                    },
                    cancel: function(q, x) {
                        A()
                    },
                    isResolved: function() {
                        A()
                    },
                    isRejected: function() {
                        A()
                    },
                    isFulfilled: function() {
                        A()
                    },
                    isCanceled: function() {
                        A()
                    },
                    "finally": function(q) {
                        return this.then(function(x) {
                            var r = q();
                            return r && "function" === typeof r.then ? r.then(function() {
                                return x
                            }) : x
                        }, function(x) {
                            var r = q();
                            if (r && "function" === typeof r.then)
                                return r.then(function() {
                                    throw x;
                                });
                            throw x;
                        })
                    },
                    always: function(q) {
                        return this.then(q, q)
                    },
                    "catch": function(q) {
                        return this.then(null, q)
                    },
                    otherwise: function(q) {
                        return this.then(null, q)
                    },
                    trace: function() {
                        return this
                    },
                    traceRejected: function() {
                        return this
                    },
                    toString: function() {
                        return "[object Promise]"
                    }
                })
            })
        },
        "dojo/promise/instrumentation": function() {
            define(["./tracer", "../has", "../_base/lang", "../_base/array"], function(b, A, q, x) {
                function r(f, e, l) {
                    if (!f || !1 !== f.log) {
                        var k = "";
                        f && f.stack && (k += f.stack);
                        e && e.stack && (k += "\n    ----------------------------------------\n    rejected" + e.stack.split("\n").slice(1).join("\n").replace(/^\s+/, " "));
                        l && l.stack && (k += "\n    ----------------------------------------\n" + l.stack);
                        console.error(f, k)
                    }
                }
                function m(f, e, l, k) {
                    e || r(f, l, k)
                }
                function p(f, e, l, k) {
                    x.some(h, function(d) {
                        if (d.error === f)
                            return e && (d.handled = !0),
                            !0
                    }) || h.push({
                        error: f,
                        rejection: l,
                        handled: e,
                        deferred: k,
                        timestamp: (new Date).getTime()
                    });
                    c || (c = setTimeout(t, a))
                }
                function t() {
                    var f = (new Date).getTime()
                      , e = f - a;
                    h = x.filter(h, function(l) {
                        return l.timestamp < e ? (l.handled || r(l.error, l.rejection, l.deferred),
                        !1) : !0
                    });
                    c = h.length ? setTimeout(t, h[0].timestamp + a - f) : !1
                }
                A.add("config-useDeferredInstrumentation", "report-unhandled-rejections");
                var h = []
                  , c = !1
                  , a = 1E3;
                return function(f) {
                    var e = A("config-useDeferredInstrumentation");
                    if (e) {
                        b.on("resolved", q.hitch(console, "log", "resolved"));
                        b.on("rejected", q.hitch(console, "log", "rejected"));
                        b.on("progress", q.hitch(console, "log", "progress"));
                        var l = [];
                        "string" === typeof e && (l = e.split(","),
                        e = l.shift());
                        if ("report-rejections" === e)
                            f.instrumentRejected = m;
                        else if ("report-unhandled-rejections" === e || !0 === e || 1 === e)
                            f.instrumentRejected = p,
                            a = parseInt(l[0], 10) || a;
                        else
                            throw Error("Unsupported instrumentation usage \x3c" + e + "\x3e");
                    }
                }
            })
        },
        "dojo/promise/tracer": function() {
            define(["../_base/lang", "./Promise", "../Evented"], function(b, A, q) {
                function x(p) {
                    setTimeout(function() {
                        m.apply(r, p)
                    }, 0)
                }
                var r = new q
                  , m = r.emit;
                r.emit = null;
                A.prototype.trace = function() {
                    var p = b._toArray(arguments);
                    this.then(function(t) {
                        x(["resolved", t].concat(p))
                    }, function(t) {
                        x(["rejected", t].concat(p))
                    }, function(t) {
                        x(["progress", t].concat(p))
                    });
                    return this
                }
                ;
                A.prototype.traceRejected = function() {
                    var p = b._toArray(arguments);
                    this.otherwise(function(t) {
                        x(["rejected", t].concat(p))
                    });
                    return this
                }
                ;
                return r
            })
        },
        "dojo/Evented": function() {
            define(["./aspect", "./on"], function(b, A) {
                function q() {}
                var x = b.after;
                q.prototype = {
                    on: function(r, m) {
                        return A.parse(this, r, m, function(p, t) {
                            return x(p, "on" + t, m, !0)
                        })
                    },
                    emit: function(r, m) {
                        var p = [this];
                        p.push.apply(p, arguments);
                        return A.emit.apply(A, p)
                    }
                };
                return q
            })
        },
        "dojo/aspect": function() {
            define([], function() {
                function b(p, t, h, c) {
                    var a = p[t]
                      , f = "around" == t;
                    if (f) {
                        var e = h(function() {
                            return a.advice(this, arguments)
                        });
                        var l = {
                            remove: function() {
                                e && (e = p = h = null)
                            },
                            advice: function(k, d) {
                                return e ? e.apply(k, d) : a.advice(k, d)
                            }
                        }
                    } else
                        l = {
                            remove: function() {
                                if (l.advice) {
                                    var k = l.previous
                                      , d = l.next;
                                    d || k ? (k ? k.next = d : p[t] = d,
                                    d && (d.previous = k)) : delete p[t];
                                    p = h = l.advice = null
                                }
                            },
                            id: p.nextId++,
                            advice: h,
                            receiveArguments: c
                        };
                    if (a && !f)
                        if ("after" == t) {
                            for (; a.next && (a = a.next); )
                                ;
                            a.next = l;
                            l.previous = a
                        } else
                            "before" == t && (p[t] = l,
                            l.next = a,
                            a.previous = l);
                    else
                        p[t] = l;
                    return l
                }
                function A(p) {
                    return function(t, h, c, a) {
                        var f = t[h], e;
                        f && f.target == t || (t[h] = e = function() {
                            for (var l = e.nextId, k = arguments, d = e.before; d; )
                                d.advice && (k = d.advice.apply(this, k) || k),
                                d = d.next;
                            if (e.around)
                                var u = e.around.advice(this, k);
                            for (d = e.after; d && d.id < l; ) {
                                if (d.advice)
                                    if (d.receiveArguments) {
                                        var y = d.advice.apply(this, k);
                                        u = y === q ? u : y
                                    } else
                                        u = d.advice.call(this, u, k);
                                d = d.next
                            }
                            return u
                        }
                        ,
                        f && (e.around = {
                            advice: function(l, k) {
                                return f.apply(l, k)
                            }
                        }),
                        e.target = t,
                        e.nextId = e.nextId || 0);
                        t = b(e || f, p, c, a);
                        c = null;
                        return t
                    }
                }
                var q, x = A("after"), r = A("before"), m = A("around");
                return {
                    before: r,
                    around: m,
                    after: x
                }
            })
        },
        "dojo/on": function() {
            define(["./has!dom-addeventlistener?:./aspect", "./_base/kernel", "./sniff"], function(b, A, q) {
                function x(w, E, C, H, B) {
                    if (H = E.match(/(.*):(.*)/))
                        return E = H[2],
                        H = H[1],
                        t.selector(H, E).call(B, w, C);
                    q("touch") && (h.test(E) && (C = z(C)),
                    q("event-orientationchange") || "orientationchange" != E || (E = "resize",
                    w = window,
                    C = z(C)));
                    l && (C = l(C));
                    if (w.addEventListener) {
                        var K = E in f
                          , J = K ? f[E] : E;
                        w.addEventListener(J, C, K);
                        return {
                            remove: function() {
                                w.removeEventListener(J, C, K)
                            }
                        }
                    }
                    if (y && w.attachEvent)
                        return y(w, "on" + E, C);
                    throw Error("Target must be an event emitter");
                }
                function r() {
                    this.cancelable = !1;
                    this.defaultPrevented = !0
                }
                function m() {
                    this.bubbles = !1
                }
                var p = window.ScriptEngineMajorVersion;
                q.add("jscript", p && p() + ScriptEngineMinorVersion() / 10);
                q.add("event-orientationchange", q("touch") && !q("android"));
                q.add("event-stopimmediatepropagation", window.Event && !!window.Event.prototype && !!window.Event.prototype.stopImmediatePropagation);
                q.add("event-focusin", function(w, E, C) {
                    return "onfocusin"in C
                });
                q("touch") && q.add("touch-can-modify-event-delegate", function() {
                    var w = function() {};
                    w.prototype = document.createEvent("MouseEvents");
                    try {
                        var E = new w;
                        E.target = null;
                        return null === E.target
                    } catch (C) {
                        return !1
                    }
                });
                var t = function(w, E, C, H) {
                    return "function" != typeof w.on || "function" == typeof E || w.nodeType ? t.parse(w, E, C, x, H, this) : w.on(E, C)
                };
                t.pausable = function(w, E, C, H) {
                    var B;
                    w = t(w, E, function() {
                        if (!B)
                            return C.apply(this, arguments)
                    }, H);
                    w.pause = function() {
                        B = !0
                    }
                    ;
                    w.resume = function() {
                        B = !1
                    }
                    ;
                    return w
                }
                ;
                t.once = function(w, E, C, H) {
                    var B = t(w, E, function() {
                        B.remove();
                        return C.apply(this, arguments)
                    });
                    return B
                }
                ;
                t.parse = function(w, E, C, H, B, K) {
                    var J;
                    if (E.call)
                        return E.call(K, w, C);
                    E instanceof Array ? J = E : -1 < E.indexOf(",") && (J = E.split(/\s*,\s*/));
                    if (J) {
                        var R = [];
                        E = 0;
                        for (var V; V = J[E++]; )
                            R.push(t.parse(w, V, C, H, B, K));
                        R.remove = function() {
                            for (var Y = 0; Y < R.length; Y++)
                                R[Y].remove()
                        }
                        ;
                        return R
                    }
                    return H(w, E, C, B, K)
                }
                ;
                var h = /^touch/;
                t.matches = function(w, E, C, H, B) {
                    B = B && "function" == typeof B.matches ? B : A.query;
                    H = !1 !== H;
                    1 != w.nodeType && (w = w.parentNode);
                    for (; !B.matches(w, E, C); )
                        if (w == C || !1 === H || !(w = w.parentNode) || 1 != w.nodeType)
                            return !1;
                    return w
                }
                ;
                t.selector = function(w, E, C) {
                    return function(H, B) {
                        function K(V) {
                            return t.matches(V, w, H, C, J)
                        }
                        var J = "function" == typeof w ? {
                            matches: w
                        } : this
                          , R = E.bubble;
                        return R ? t(H, R(K), B) : t(H, E, function(V) {
                            var Y = K(V.target);
                            if (Y)
                                return V.selectorTarget = Y,
                                B.call(Y, V)
                        })
                    }
                }
                ;
                var c = [].slice
                  , a = t.emit = function(w, E, C) {
                    var H = c.call(arguments, 2)
                      , B = "on" + E;
                    if ("parentNode"in w) {
                        var K = H[0] = {}, J;
                        for (J in C)
                            K[J] = C[J];
                        K.preventDefault = r;
                        K.stopPropagation = m;
                        K.target = w;
                        K.type = E;
                        C = K
                    }
                    do
                        w[B] && w[B].apply(w, H);
                    while (C && C.bubbles && (w = w.parentNode));
                    return C && C.cancelable && C
                }
                  , f = q("event-focusin") ? {} : {
                    focusin: "focus",
                    focusout: "blur"
                };
                if (!q("event-stopimmediatepropagation"))
                    var e = function() {
                        this.modified = this.immediatelyStopped = !0
                    }
                      , l = function(w) {
                        return function(E) {
                            if (!E.immediatelyStopped)
                                return E.stopImmediatePropagation = e,
                                w.apply(this, arguments)
                        }
                    };
                if (q("dom-addeventlistener"))
                    t.emit = function(w, E, C) {
                        if (w.dispatchEvent && document.createEvent) {
                            var H = (w.ownerDocument || document).createEvent("HTMLEvents");
                            H.initEvent(E, !!C.bubbles, !!C.cancelable);
                            for (var B in C)
                                B in H || (H[B] = C[B]);
                            return w.dispatchEvent(H) && H
                        }
                        return a.apply(t, arguments)
                    }
                    ;
                else {
                    t._fixEvent = function(w, E) {
                        w || (w = (E && (E.ownerDocument || E.document || E).parentWindow || window).event);
                        if (!w)
                            return w;
                        try {
                            k && w.type == k.type && w.srcElement == k.target && (w = k)
                        } catch (C) {}
                        if (!w.target)
                            switch (w.target = w.srcElement,
                            w.currentTarget = E || w.srcElement,
                            "mouseover" == w.type && (w.relatedTarget = w.fromElement),
                            "mouseout" == w.type && (w.relatedTarget = w.toElement),
                            w.stopPropagation || (w.stopPropagation = n,
                            w.preventDefault = v),
                            w.type) {
                            case "keypress":
                                E = "charCode"in w ? w.charCode : w.keyCode,
                                10 == E ? (E = 0,
                                w.keyCode = 13) : 13 == E || 27 == E ? E = 0 : 3 == E && (E = 99),
                                w.charCode = E,
                                E = w,
                                E.keyChar = E.charCode ? String.fromCharCode(E.charCode) : "",
                                E.charOrCode = E.keyChar || E.keyCode
                            }
                        return w
                    }
                    ;
                    var k, d = function(w) {
                        this.handle = w
                    };
                    d.prototype.remove = function() {
                        delete _dojoIEListeners_[this.handle]
                    }
                    ;
                    var u = function(w) {
                        return function(E) {
                            E = t._fixEvent(E, this);
                            var C = w.call(this, E);
                            E.modified && (k || setTimeout(function() {
                                k = null
                            }),
                            k = E);
                            return C
                        }
                    }
                      , y = function(w, E, C) {
                        C = u(C);
                        if (((w.ownerDocument ? w.ownerDocument.parentWindow : w.parentWindow || w.window || window) != top || 5.8 > q("jscript")) && !q("config-_allow_leaks")) {
                            "undefined" == typeof _dojoIEListeners_ && (_dojoIEListeners_ = []);
                            var H = w[E];
                            if (!H || !H.listeners) {
                                var B = H;
                                H = Function("event", "var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
                                H.listeners = [];
                                w[E] = H;
                                H.global = this;
                                B && H.listeners.push(_dojoIEListeners_.push(B) - 1)
                            }
                            H.listeners.push(w = H.global._dojoIEListeners_.push(C) - 1);
                            return new d(w)
                        }
                        return b.after(w, E, C, !0)
                    }
                      , n = function() {
                        this.cancelBubble = !0
                    }
                      , v = t._preventDefault = function() {
                        this.bubbledKeyCode = this.keyCode;
                        if (this.ctrlKey)
                            try {
                                this.keyCode = 0
                            } catch (w) {}
                        this.defaultPrevented = !0;
                        this.returnValue = !1;
                        this.modified = !0
                    }
                }
                if (q("touch"))
                    var D = function() {}
                      , O = window.orientation
                      , z = function(w) {
                        return function(E) {
                            var C = E.corrected;
                            if (!C) {
                                var H = E.type;
                                try {
                                    delete E.type
                                } catch (J) {}
                                if (E.type) {
                                    if (q("touch-can-modify-event-delegate"))
                                        D.prototype = E,
                                        C = new D;
                                    else {
                                        C = {};
                                        for (var B in E)
                                            C[B] = E[B]
                                    }
                                    C.preventDefault = function() {
                                        E.preventDefault()
                                    }
                                    ;
                                    C.stopPropagation = function() {
                                        E.stopPropagation()
                                    }
                                } else
                                    C = E,
                                    C.type = H;
                                E.corrected = C;
                                if ("resize" == H) {
                                    if (O == window.orientation)
                                        return null;
                                    O = window.orientation;
                                    C.type = "orientationchange";
                                    return w.call(this, C)
                                }
                                "rotation"in C || (C.rotation = 0,
                                C.scale = 1);
                                if (window.TouchEvent && E instanceof TouchEvent) {
                                    H = C.changedTouches[0];
                                    for (var K in H)
                                        delete C[K],
                                        C[K] = H[K]
                                }
                            }
                            return w.call(this, C)
                        }
                    };
                return t
            })
        },
        "dojo/when": function() {
            define(["./Deferred", "./promise/Promise"], function(b, A) {
                return function(q, x, r, m) {
                    var p = q && "function" === typeof q.then
                      , t = p && q instanceof A;
                    if (!p)
                        return 1 < arguments.length ? x ? x(q) : q : (new b).resolve(q);
                    t || (p = new b(q.cancel),
                    q.then(p.resolve, p.reject, p.progress),
                    q = p.promise);
                    return x || r || m ? q.then(x, r, m) : q
                }
            })
        },
        "dojo/_base/json": function() {
            define(["./kernel", "../json"], function(b, A) {
                b.fromJson = function(q) {
                    return eval("(" + q + ")")
                }
                ;
                b._escapeString = A.stringify;
                b.toJsonIndentStr = "\t";
                b.toJson = function(q, x) {
                    return A.stringify(q, function(r, m) {
                        return m && (r = m.__json__ || m.json,
                        "function" == typeof r) ? r.call(m) : m
                    }, x && b.toJsonIndentStr)
                }
                ;
                return b
            })
        },
        "dojo/request/watch": function() {
            define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "), function(b, A, q, x, r, m) {
                function p() {
                    for (var a = +new Date, f = 0, e; f < c.length && (e = c[f]); f++) {
                        var l = e.response
                          , k = l.options;
                        e.isCanceled && e.isCanceled() || e.isValid && !e.isValid(l) ? (c.splice(f--, 1),
                        t._onAction && t._onAction()) : e.isReady && e.isReady(l) ? (c.splice(f--, 1),
                        e.handleResponse(l),
                        t._onAction && t._onAction()) : e.startTime && e.startTime + (k.timeout || 0) < a && (c.splice(f--, 1),
                        e.cancel(new A("Timeout exceeded",l)),
                        t._onAction && t._onAction())
                    }
                    t._onInFlight && t._onInFlight(e);
                    c.length || (clearInterval(h),
                    h = null)
                }
                function t(a) {
                    a.response.options.timeout && (a.startTime = +new Date);
                    a.isFulfilled() || (c.push(a),
                    h || (h = setInterval(p, 50)),
                    a.response.options.sync && p())
                }
                var h = null
                  , c = [];
                t.cancelAll = function() {
                    try {
                        x.forEach(c, function(a) {
                            try {
                                a.cancel(new q("All requests canceled."))
                            } catch (f) {}
                        })
                    } catch (a) {}
                }
                ;
                r && m && r.doc.attachEvent && m(r.global, "unload", function() {
                    t.cancelAll()
                });
                return t
            })
        },
        "dojo/request/util": function() {
            define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "), function(b, A, q, x, r, m, p, t, h) {
                function c(k) {
                    return h("native-arraybuffer") && k instanceof ArrayBuffer
                }
                function a(k) {
                    return h("native-blob") && k instanceof Blob
                }
                function f(k) {
                    return l(k)
                }
                function e(k) {
                    return void 0 !== k.data ? k.data : k.text
                }
                b.deepCopy = function(k, d) {
                    for (var u in d) {
                        var y = k[u]
                          , n = d[u];
                        if ("__proto__" !== u && y !== n) {
                            var v = n, D;
                            if (D = v && "object" === typeof v)
                                D = v,
                                D = !(h("native-formdata") && D instanceof FormData);
                            !D || ("undefined" !== typeof Element ? v instanceof Element : 1 === v.nodeType) || a(v) || c(v) ? k[u] = n : "[object Date]" === Object.prototype.toString.call(n) ? k[u] = new Date(n) : p.isArray(n) ? k[u] = b.deepCopyArray(n) : y && "object" === typeof y ? b.deepCopy(y, n) : k[u] = b.deepCopy({}, n)
                        }
                    }
                    return k
                }
                ;
                b.deepCopyArray = function(k) {
                    for (var d = [], u = 0, y = k.length; u < y; u++) {
                        var n = k[u];
                        "object" === typeof n ? d.push(b.deepCopy({}, n)) : d.push(n)
                    }
                    return d
                }
                ;
                b.deepCreate = function(k, d) {
                    d = d || {};
                    var u = p.delegate(k), y, n;
                    for (y in k)
                        (n = k[y]) && "object" === typeof n && (u[y] = b.deepCreate(n, d[y]));
                    return b.deepCopy(u, d)
                }
                ;
                var l = Object.freeze || function(k) {
                    return k
                }
                ;
                b.deferred = function(k, d, u, y, n, v) {
                    var D = new x(function(z) {
                        d && d(D, k);
                        return z && (z instanceof A || z instanceof q) ? z : new q("Request canceled",k)
                    }
                    );
                    D.response = k;
                    D.isValid = u;
                    D.isReady = y;
                    D.handleResponse = n;
                    u = D.then(f).otherwise(function(z) {
                        z.response = k;
                        throw z;
                    });
                    b.notify && u.then(p.hitch(b.notify, "emit", "load"), p.hitch(b.notify, "emit", "error"));
                    y = u.then(e);
                    n = new t;
                    for (var O in y)
                        y.hasOwnProperty(O) && (n[O] = y[O]);
                    n.response = u;
                    l(n);
                    v && D.then(function(z) {
                        v.call(D, z)
                    }, function(z) {
                        v.call(D, k, z)
                    });
                    D.promise = n;
                    D.then = n.then;
                    return D
                }
                ;
                b.addCommonMethods = function(k, d) {
                    m.forEach(d || ["GET", "POST", "PUT", "DELETE"], function(u) {
                        k[("DELETE" === u ? "DEL" : u).toLowerCase()] = function(y, n) {
                            n = p.delegate(n || {});
                            n.method = u;
                            return k(y, n)
                        }
                    })
                }
                ;
                b.parseArgs = function(k, d, u) {
                    var y = d.data
                      , n = d.query;
                    !y || u || "object" !== typeof y || h("native-xhr2") && (c(y) || a(y)) || (d.data = r.objectToQuery(y));
                    n ? ("object" === typeof n && (n = r.objectToQuery(n)),
                    d.preventCache && (n += (n ? "\x26" : "") + "request.preventCache\x3d" + +new Date)) : d.preventCache && (n = "request.preventCache\x3d" + +new Date);
                    k && n && (k += (~k.indexOf("?") ? "\x26" : "?") + n);
                    return {
                        url: k,
                        options: d,
                        getHeader: function(v) {
                            return null
                        }
                    }
                }
                ;
                b.checkStatus = function(k) {
                    k = k || 0;
                    return 200 <= k && 300 > k || 304 === k || 1223 === k || !k
                }
            })
        },
        "dojo/errors/RequestError": function() {
            define(["./create"], function(b) {
                return b("RequestError", function(A, q) {
                    this.response = q
                })
            })
        },
        "dojo/errors/RequestTimeoutError": function() {
            define(["./create", "./RequestError"], function(b, A) {
                return b("RequestTimeoutError", null, A, {
                    dojoType: "timeout"
                })
            })
        },
        "dojo/request/xhr": function() {
            define(["../errors/RequestError", "./watch", "./handlers", "./util", "../has"], function(b, A, q, x, r) {
                function m(d, u) {
                    var y = d.xhr;
                    d.status = d.xhr.status;
                    try {
                        d.text = y.responseText
                    } catch (v) {}
                    "xml" === d.options.handleAs && (d.data = y.responseXML);
                    if (u)
                        this.reject(u);
                    else {
                        try {
                            q(d)
                        } catch (v) {
                            var n = v
                        }
                        x.checkStatus(y.status) ? n ? this.reject(n) : this.resolve(d) : (u = n ? new b("Unable to load " + d.url + " status: " + y.status + " and an error in handleAs: transformation of response",d) : new b("Unable to load " + d.url + " status: " + y.status,d),
                        this.reject(u))
                    }
                }
                function p(d) {
                    return this.xhr.getResponseHeader(d)
                }
                function t(d, u, y) {
                    var n = r("native-formdata") && u && u.data && u.data instanceof FormData
                      , v = x.parseArgs(d, x.deepCreate(k, u), n);
                    d = v.url;
                    u = v.options;
                    var D = !u.data && "POST" !== u.method && "PUT" !== u.method;
                    10 >= r("ie") && (d = d.split("#")[0]);
                    var O, z = x.deferred(v, a, c, e, m, function() {
                        O && O()
                    }), w = v.xhr = t._create();
                    if (!w)
                        return z.cancel(new b("XHR was not created")),
                        y ? z : z.promise;
                    v.getHeader = p;
                    f && (O = f(w, z, v, u.uploadProgress));
                    var E = "undefined" === typeof u.data ? null : u.data
                      , C = !u.sync
                      , H = u.method;
                    try {
                        w.open(H, d, C, u.user || l, u.password || l);
                        u.withCredentials && (w.withCredentials = u.withCredentials);
                        r("native-response-type") && u.handleAs in h && (w.responseType = h[u.handleAs]);
                        var B = u.headers;
                        d = n || D ? !1 : "application/x-www-form-urlencoded";
                        if (B)
                            for (var K in B)
                                "content-type" === K.toLowerCase() ? d = B[K] : B[K] && w.setRequestHeader(K, B[K]);
                        d && !1 !== d && w.setRequestHeader("Content-Type", d);
                        B && "X-Requested-With"in B || w.setRequestHeader("X-Requested-With", "XMLHttpRequest");
                        x.notify && x.notify.emit("send", v, z.promise.cancel);
                        w.send(E)
                    } catch (J) {
                        z.reject(J)
                    }
                    A(z);
                    w = null;
                    return y ? z : z.promise
                }
                r.add("native-xhr", function() {
                    return "undefined" !== typeof XMLHttpRequest
                });
                r.add("dojo-force-activex-xhr", function() {
                    return r("activex") && "file:" === window.location.protocol
                });
                r.add("native-xhr2", function() {
                    if (r("native-xhr") && !r("dojo-force-activex-xhr")) {
                        var d = new XMLHttpRequest;
                        return "undefined" !== typeof d.addEventListener && ("undefined" === typeof opera || "undefined" !== typeof d.upload)
                    }
                });
                r.add("native-formdata", function() {
                    return "undefined" !== typeof FormData
                });
                r.add("native-blob", function() {
                    return "undefined" !== typeof Blob
                });
                r.add("native-arraybuffer", function() {
                    return "undefined" !== typeof ArrayBuffer
                });
                r.add("native-response-type", function() {
                    return r("native-xhr") && "undefined" !== typeof (new XMLHttpRequest).responseType
                });
                r.add("native-xhr2-blob", function() {
                    if (r("native-response-type")) {
                        var d = new XMLHttpRequest;
                        d.open("GET", "https://dojotoolkit.org/", !0);
                        d.responseType = "blob";
                        var u = d.responseType;
                        d.abort();
                        return "blob" === u
                    }
                });
                var h = {
                    blob: r("native-xhr2-blob") ? "blob" : "arraybuffer",
                    document: "document",
                    arraybuffer: "arraybuffer"
                };
                if (r("native-xhr2")) {
                    var c = function(d) {
                        return !this.isFulfilled()
                    };
                    var a = function(d, u) {
                        u.xhr.abort()
                    };
                    var f = function(d, u, y, n) {
                        function v(E) {
                            u.handleResponse(y)
                        }
                        function D(E) {
                            E = new b("Unable to load " + y.url + " status: " + E.target.status,y);
                            u.handleResponse(y, E)
                        }
                        function O(E, C) {
                            y.transferType = E;
                            C.lengthComputable ? (y.loaded = C.loaded,
                            y.total = C.total,
                            u.progress(y)) : 3 === y.xhr.readyState && (y.loaded = "loaded"in C ? C.loaded : C.position,
                            u.progress(y))
                        }
                        function z(E) {
                            return O("download", E)
                        }
                        function w(E) {
                            return O("upload", E)
                        }
                        d.addEventListener("load", v, !1);
                        d.addEventListener("error", D, !1);
                        d.addEventListener("progress", z, !1);
                        n && d.upload && d.upload.addEventListener("progress", w, !1);
                        return function() {
                            d.removeEventListener("load", v, !1);
                            d.removeEventListener("error", D, !1);
                            d.removeEventListener("progress", z, !1);
                            d.upload.removeEventListener("progress", w, !1);
                            d = null
                        }
                    }
                } else {
                    c = function(d) {
                        return d.xhr.readyState
                    }
                    ;
                    var e = function(d) {
                        return 4 === d.xhr.readyState
                    };
                    a = function(d, u) {
                        d = u.xhr;
                        u = typeof d.abort;
                        "function" !== u && "object" !== u && "unknown" !== u || d.abort()
                    }
                }
                var l, k = {
                    data: null,
                    query: null,
                    sync: !1,
                    method: "GET"
                };
                t._create = function() {
                    throw Error("XMLHTTP not available");
                }
                ;
                if (r("native-xhr") && !r("dojo-force-activex-xhr"))
                    t._create = function() {
                        return new XMLHttpRequest
                    }
                    ;
                else if (r("activex"))
                    try {
                        new ActiveXObject("Msxml2.XMLHTTP"),
                        t._create = function() {
                            return new ActiveXObject("Msxml2.XMLHTTP")
                        }
                    } catch (d) {
                        try {
                            new ActiveXObject("Microsoft.XMLHTTP"),
                            t._create = function() {
                                return new ActiveXObject("Microsoft.XMLHTTP")
                            }
                        } catch (u) {}
                    }
                x.addCommonMethods(t);
                return t
            })
        },
        "dojo/request/handlers": function() {
            define(["../json", "../_base/kernel", "../_base/array", "../has", "../selector/_loader"], function(b, A, q, x) {
                function r(a) {
                    var f = c[a.options.handleAs];
                    a.data = f ? f(a) : a.data || a.text;
                    return a
                }
                x.add("activex", "undefined" !== typeof ActiveXObject);
                x.add("dom-parser", function(a) {
                    return "DOMParser"in a
                });
                if (x("activex")) {
                    var m = ["Msxml2.DOMDocument.6.0", "Msxml2.DOMDocument.4.0", "MSXML2.DOMDocument.3.0", "MSXML.DOMDocument"], p;
                    var t = function(a) {
                        function f(k) {
                            try {
                                var d = new ActiveXObject(k);
                                d.async = !1;
                                d.loadXML(l);
                                e = d;
                                p = k
                            } catch (u) {
                                return !1
                            }
                            return !0
                        }
                        var e = a.data
                          , l = a.text;
                        e && x("dom-qsa2.1") && !e.querySelectorAll && x("dom-parser") && (e = (new DOMParser).parseFromString(l, "application/xml"));
                        e && e.documentElement || p && f(p) || q.some(m, f);
                        return e
                    }
                }
                var h = function(a) {
                    return x("native-xhr2-blob") || "blob" !== a.options.handleAs || "undefined" === typeof Blob ? a.xhr.response : new Blob([a.xhr.response],{
                        type: a.xhr.getResponseHeader("Content-Type")
                    })
                }
                  , c = {
                    javascript: function(a) {
                        return A.eval(a.text || "")
                    },
                    json: function(a) {
                        return b.parse(a.text || null)
                    },
                    xml: t,
                    blob: h,
                    arraybuffer: h,
                    document: h
                };
                r.register = function(a, f) {
                    c[a] = f
                }
                ;
                return r
            })
        },
        "dojo/selector/_loader": function() {
            define(["../has", "require"], function(b, A) {
                if ("undefined" !== typeof document) {
                    var q = document.createElement("div");
                    b.add("dom-qsa2.1", !!q.querySelectorAll);
                    b.add("dom-qsa3", function() {
                        try {
                            return q.innerHTML = "\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",
                            1 == q.querySelectorAll(".TEST:empty").length
                        } catch (r) {}
                    })
                }
                var x;
                return {
                    load: function(r, m, p, t) {
                        if (t && t.isBuild)
                            p();
                        else {
                            t = A;
                            r = "default" == r ? b("config-selectorEngine") || "css3" : r;
                            r = "css2" == r || "lite" == r ? "./lite" : "css2.1" == r ? b("dom-qsa2.1") ? "./lite" : "./acme" : "css3" == r ? b("dom-qsa3") ? "./lite" : "./acme" : "acme" == r ? "./acme" : (t = m) && r;
                            if ("?" == r.charAt(r.length - 1)) {
                                r = r.substring(0, r.length - 1);
                                var h = !0
                            }
                            if (h && (b("dom-compliant-qsa") || x))
                                return p(x);
                            t([r], function(c) {
                                "./lite" != r && (x = c);
                                p(c)
                            })
                        }
                    }
                }
            })
        },
        "dojo/request/script": function() {
            define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "), function(b, A, q, x, r, m, p, t, h, c, a) {
                function f(w, E) {
                    w.canDelete && u._remove(w.id, E.options.frameDoc, !0)
                }
                function e(w) {
                    z && z.length && (r.forEach(z, function(E) {
                        u._remove(E.id, E.frameDoc);
                        E.frameDoc = null
                    }),
                    z = []);
                    return w.options.jsonp ? !w.data : !0
                }
                function l(w) {
                    return !!this.scriptLoaded
                }
                function k(w) {
                    return (w = w.options.checkString) && eval("typeof(" + w + ') !\x3d\x3d "undefined"')
                }
                function d(w, E) {
                    if (this.canDelete) {
                        var C = this.response.options;
                        z.push({
                            id: this.id,
                            frameDoc: C.ioArgs ? C.ioArgs.frameDoc : C.frameDoc
                        });
                        C.ioArgs && (C.ioArgs.frameDoc = null);
                        C.frameDoc = null
                    }
                    E ? this.reject(E) : this.resolve(w)
                }
                function u(w, E, C) {
                    var H = q.parseArgs(w, q.deepCopy({}, E));
                    w = H.url;
                    E = H.options;
                    var B = q.deferred(H, f, e, E.jsonp ? null : E.checkString ? k : l, d);
                    m.mixin(B, {
                        id: y + n++,
                        canDelete: !1
                    });
                    E.jsonp && ((new RegExp("[?\x26]" + E.jsonp + "\x3d")).test(w) || (w += (~w.indexOf("?") ? "\x26" : "?") + E.jsonp + "\x3d" + (E.frameDoc ? "parent." : "") + y + "_callbacks." + B.id),
                    B.canDelete = !0,
                    O[B.id] = function(R) {
                        H.data = R;
                        B.handleResponse(H)
                    }
                    );
                    q.notify && q.notify.emit("send", H, B.promise.cancel);
                    if (!E.canAttach || E.canAttach(B)) {
                        var K = u._attach(B.id, w, E.frameDoc, function(R) {
                            if (!(R instanceof Error)) {
                                var V = Error("Error loading " + (R.target ? R.target.src : "script"));
                                V.source = R;
                                R = V
                            }
                            B.reject(R);
                            u._remove(B.id, E.frameDoc, !0)
                        });
                        if (!E.jsonp && !E.checkString)
                            var J = p(K, v, function(R) {
                                if ("load" === R.type || D.test(K.readyState))
                                    J.remove(),
                                    B.scriptLoaded = R
                            })
                    }
                    A(B);
                    return C ? B : B.promise
                }
                c.add("script-readystatechange", function(w, E) {
                    return "undefined" !== typeof E.createElement("script").onreadystatechange && ("undefined" === typeof w.opera || "[object Opera]" !== w.opera.toString())
                });
                var y = b.id.replace(/[\/\.\-]/g, "_")
                  , n = 0
                  , v = c("script-readystatechange") ? "readystatechange" : "load"
                  , D = /complete|loaded/
                  , O = x.global[y + "_callbacks"] = {}
                  , z = [];
                u.get = u;
                u._attach = function(w, E, C, H) {
                    C = C || a.doc;
                    var B = C.createElement("script");
                    if (H)
                        p.once(B, "error", H);
                    B.type = "text/javascript";
                    try {
                        B.src = E
                    } catch (K) {
                        H && H(B)
                    }
                    B.id = w;
                    B.async = !0;
                    B.charset = "utf-8";
                    return C.getElementsByTagName("head")[0].appendChild(B)
                }
                ;
                u._remove = function(w, E, C) {
                    h.destroy(t.byId(w, E));
                    O[w] && (C ? O[w] = function() {
                        delete O[w]
                    }
                    : delete O[w])
                }
                ;
                u._callbacksProperty = y + "_callbacks";
                return u
            })
        },
        "dojo/dom-construct": function() {
            define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "), function(b, A, q, x, r, m) {
                function p(y, n) {
                    var v = n.parentNode;
                    v && v.insertBefore(y, n)
                }
                function t(y) {
                    if ("innerHTML"in y)
                        try {
                            y.innerHTML = "";
                            return
                        } catch (v) {}
                    for (var n; n = y.lastChild; )
                        y.removeChild(n)
                }
                var h = {
                    option: ["select"],
                    tbody: ["table"],
                    thead: ["table"],
                    tfoot: ["table"],
                    tr: ["table", "tbody"],
                    td: ["table", "tbody", "tr"],
                    th: ["table", "thead", "tr"],
                    legend: ["fieldset"],
                    caption: ["table"],
                    colgroup: ["table"],
                    col: ["table", "colgroup"],
                    li: ["ul"]
                }, c = /<\s*([\w:]+)/, a = {}, f = 0, e = "__" + A._scopeName + "ToDomId", l;
                for (l in h)
                    h.hasOwnProperty(l) && (A = h[l],
                    A.pre = "option" == l ? '\x3cselect multiple\x3d"multiple"\x3e' : "\x3c" + A.join("\x3e\x3c") + "\x3e",
                    A.post = "\x3c/" + A.reverse().join("\x3e\x3c/") + "\x3e");
                var k;
                8 >= q("ie") && (k = function(y) {
                    y.__dojo_html5_tested = "yes";
                    var n = d("div", {
                        innerHTML: "\x3cnav\x3ea\x3c/nav\x3e",
                        style: {
                            visibility: "hidden"
                        }
                    }, y.body);
                    1 !== n.childNodes.length && "abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g, function(v) {
                        y.createElement(v)
                    });
                    u(n)
                }
                );
                b.toDom = function(y, n) {
                    n = n || x.doc;
                    var v = n[e];
                    v || (n[e] = v = ++f + "",
                    a[v] = n.createElement("div"));
                    8 >= q("ie") && !n.__dojo_html5_tested && n.body && k(n);
                    y += "";
                    var D = y.match(c)
                      , O = D ? D[1].toLowerCase() : "";
                    v = a[v];
                    if (D && h[O])
                        for (D = h[O],
                        v.innerHTML = D.pre + y + D.post,
                        y = D.length; y; --y)
                            v = v.firstChild;
                    else
                        v.innerHTML = y;
                    if (1 == v.childNodes.length)
                        return v.removeChild(v.firstChild);
                    for (y = n.createDocumentFragment(); n = v.firstChild; )
                        y.appendChild(n);
                    return y
                }
                ;
                b.place = function(y, n, v) {
                    n = r.byId(n);
                    "string" == typeof y && (y = /^\s*</.test(y) ? b.toDom(y, n.ownerDocument) : r.byId(y));
                    if ("number" == typeof v) {
                        var D = n.childNodes;
                        !D.length || D.length <= v ? n.appendChild(y) : p(y, D[0 > v ? 0 : v])
                    } else
                        switch (v) {
                        case "before":
                            p(y, n);
                            break;
                        case "after":
                            v = y;
                            (D = n.parentNode) && (D.lastChild == n ? D.appendChild(v) : D.insertBefore(v, n.nextSibling));
                            break;
                        case "replace":
                            n.parentNode.replaceChild(y, n);
                            break;
                        case "only":
                            b.empty(n);
                            n.appendChild(y);
                            break;
                        case "first":
                            if (n.firstChild) {
                                p(y, n.firstChild);
                                break
                            }
                        default:
                            n.appendChild(y)
                        }
                    return y
                }
                ;
                var d = b.create = function(y, n, v, D) {
                    var O = x.doc;
                    v && (v = r.byId(v),
                    O = v.ownerDocument);
                    "string" == typeof y && (y = O.createElement(y));
                    n && m.set(y, n);
                    v && b.place(y, v, D);
                    return y
                }
                ;
                b.empty = function(y) {
                    t(r.byId(y))
                }
                ;
                var u = b.destroy = function(y) {
                    if (y = r.byId(y)) {
                        var n = y;
                        y = y.parentNode;
                        n.firstChild && t(n);
                        y && (q("ie") && y.canHaveChildren && "removeNode"in n ? n.removeNode(!1) : y.removeChild(n))
                    }
                }
            })
        },
        "dojo/dom-attr": function() {
            define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "), function(b, A, q, x, r, m) {
                function p(c, a) {
                    c = c.getAttributeNode && c.getAttributeNode(a);
                    return !!c && c.specified
                }
                var t = {
                    innerHTML: 1,
                    textContent: 1,
                    className: 1,
                    htmlFor: A("ie") ? 1 : 0,
                    value: 1
                }
                  , h = {
                    classname: "class",
                    htmlfor: "for",
                    tabindex: "tabIndex",
                    readonly: "readOnly"
                };
                b.has = function(c, a) {
                    var f = a.toLowerCase();
                    return !!t[m.names[f] || a] || p(x.byId(c), h[f] || a)
                }
                ;
                b.get = function(c, a) {
                    c = x.byId(c);
                    var f = a.toLowerCase()
                      , e = m.names[f] || a
                      , l = c[e];
                    if (t[e] && "undefined" != typeof l)
                        return l;
                    if ("textContent" == e)
                        return m.get(c, e);
                    if ("href" != e && ("boolean" == typeof l || q.isFunction(l)))
                        return l;
                    a = h[f] || a;
                    return p(c, a) ? c.getAttribute(a) : null
                }
                ;
                b.set = function(c, a, f) {
                    c = x.byId(c);
                    if (2 == arguments.length) {
                        for (var e in a)
                            b.set(c, e, a[e]);
                        return c
                    }
                    e = a.toLowerCase();
                    var l = m.names[e] || a
                      , k = t[l];
                    if ("style" == l && "string" != typeof f)
                        return r.set(c, f),
                        c;
                    if (k || "boolean" == typeof f || q.isFunction(f))
                        return m.set(c, a, f);
                    c.setAttribute(h[e] || a, f);
                    return c
                }
                ;
                b.remove = function(c, a) {
                    x.byId(c).removeAttribute(h[a.toLowerCase()] || a)
                }
                ;
                b.getNodeProp = function(c, a) {
                    c = x.byId(c);
                    var f = a.toLowerCase()
                      , e = m.names[f] || a;
                    if (e in c && "href" != e)
                        return c[e];
                    a = h[f] || a;
                    return p(c, a) ? c.getAttribute(a) : null
                }
            })
        },
        "dojo/dom-style": function() {
            define(["./sniff", "./dom", "./_base/window"], function(b, A, q) {
                function x(l, k, d) {
                    k = k.toLowerCase();
                    if ("auto" == d) {
                        if ("height" == k)
                            return l.offsetHeight;
                        if ("width" == k)
                            return l.offsetWidth
                    }
                    if ("fontweight" == k)
                        switch (d) {
                        case 700:
                            return "bold";
                        default:
                            return "normal"
                        }
                    k in a || (a[k] = f.test(k));
                    return a[k] ? p(l, d) : d
                }
                var r = {};
                var m = b("webkit") ? function(l) {
                    if (1 == l.nodeType) {
                        var k = l.ownerDocument.defaultView;
                        var d = k.getComputedStyle(l, null);
                        !d && l.style && (l.style.display = "",
                        d = k.getComputedStyle(l, null))
                    }
                    return d || {}
                }
                : b("ie") && (9 > b("ie") || b("quirks")) ? function(l) {
                    return 1 == l.nodeType && l.currentStyle ? l.currentStyle : {}
                }
                : function(l) {
                    if (1 === l.nodeType) {
                        var k = l.ownerDocument.defaultView;
                        return (k.opener ? k : q.global.window).getComputedStyle(l, null)
                    }
                    return {}
                }
                ;
                r.getComputedStyle = m;
                var p = b("ie") ? function(l, k) {
                    if (!k)
                        return 0;
                    if ("medium" == k)
                        return 4;
                    if (k.slice && "px" == k.slice(-2))
                        return parseFloat(k);
                    var d = l.style
                      , u = l.runtimeStyle
                      , y = d.left
                      , n = u.left;
                    u.left = l.currentStyle.left;
                    try {
                        d.left = k,
                        k = d.pixelLeft
                    } catch (v) {
                        k = 0
                    }
                    d.left = y;
                    u.left = n;
                    return k
                }
                : function(l, k) {
                    return parseFloat(k) || 0
                }
                ;
                r.toPixelValue = p;
                var t = function(l, k) {
                    try {
                        return l.filters.item("DXImageTransform.Microsoft.Alpha")
                    } catch (d) {
                        return k ? {} : null
                    }
                }
                  , h = 9 > b("ie") || 10 > b("ie") && b("quirks") ? function(l) {
                    try {
                        return t(l).Opacity / 100
                    } catch (k) {
                        return 1
                    }
                }
                : function(l) {
                    return m(l).opacity
                }
                  , c = 9 > b("ie") || 10 > b("ie") && b("quirks") ? function(l, k) {
                    "" === k && (k = 1);
                    var d = 100 * k;
                    1 === k ? (l.style.zoom = "",
                    t(l) && (l.style.filter = l.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i, ""))) : (l.style.zoom = 1,
                    t(l) ? t(l, 1).Opacity = d : l.style.filter += " progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d" + d + ")",
                    t(l, 1).Enabled = !0);
                    if ("tr" == l.tagName.toLowerCase())
                        for (l = l.firstChild; l; l = l.nextSibling)
                            "td" == l.tagName.toLowerCase() && c(l, k);
                    return k
                }
                : function(l, k) {
                    return l.style.opacity = k
                }
                  , a = {
                    left: !0,
                    top: !0
                }
                  , f = /margin|padding|width|height|max|min|offset/
                  , e = {
                    cssFloat: 1,
                    styleFloat: 1,
                    "float": 1
                };
                r.get = function(l, k) {
                    var d = A.byId(l)
                      , u = arguments.length;
                    if (2 == u && "opacity" == k)
                        return h(d);
                    k = e[k] ? "cssFloat"in d.style ? "cssFloat" : "styleFloat" : k;
                    var y = r.getComputedStyle(d);
                    return 1 == u ? y : x(d, k, y[k] || d.style[k])
                }
                ;
                r.set = function(l, k, d) {
                    var u = A.byId(l)
                      , y = arguments.length
                      , n = "opacity" == k;
                    k = e[k] ? "cssFloat"in u.style ? "cssFloat" : "styleFloat" : k;
                    if (3 == y)
                        return n ? c(u, d) : u.style[k] = d;
                    for (var v in k)
                        r.set(l, v, k[v]);
                    return r.getComputedStyle(u)
                }
                ;
                return r
            })
        },
        "dojo/dom-prop": function() {
            define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "), function(b, A, q, x, r, m, p, t) {
                function h(e) {
                    var l = "";
                    e = e.childNodes;
                    for (var k = 0, d; d = e[k]; k++)
                        8 != d.nodeType && (l = 1 == d.nodeType ? l + h(d) : l + d.nodeValue);
                    return l
                }
                var c = {}
                  , a = 1
                  , f = A._scopeName + "attrid";
                q.add("dom-textContent", function(e, l, k) {
                    return "textContent"in k
                });
                b.names = {
                    "class": "className",
                    "for": "htmlFor",
                    tabindex: "tabIndex",
                    readonly: "readOnly",
                    colspan: "colSpan",
                    frameborder: "frameBorder",
                    rowspan: "rowSpan",
                    textcontent: "textContent",
                    valuetype: "valueType"
                };
                b.get = function(e, l) {
                    e = r.byId(e);
                    var k = l.toLowerCase();
                    l = b.names[k] || l;
                    return "textContent" != l || q("dom-textContent") ? e[l] : h(e)
                }
                ;
                b.set = function(e, l, k) {
                    e = r.byId(e);
                    if (2 == arguments.length && "string" != typeof l) {
                        for (var d in l)
                            b.set(e, d, l[d]);
                        return e
                    }
                    d = l.toLowerCase();
                    d = b.names[d] || l;
                    if ("style" == d && "string" != typeof k)
                        return m.set(e, k),
                        e;
                    if ("innerHTML" == d)
                        return q("ie") && e.tagName.toLowerCase()in {
                            col: 1,
                            colgroup: 1,
                            table: 1,
                            tbody: 1,
                            tfoot: 1,
                            thead: 1,
                            tr: 1,
                            title: 1
                        } ? (p.empty(e),
                        e.appendChild(p.toDom(k, e.ownerDocument))) : e[d] = k,
                        e;
                    if ("textContent" == d && !q("dom-textContent"))
                        return p.empty(e),
                        e.appendChild(e.ownerDocument.createTextNode(k)),
                        e;
                    if (x.isFunction(k)) {
                        var u = e[f];
                        u || (u = a++,
                        e[f] = u);
                        c[u] || (c[u] = {});
                        var y = c[u][d];
                        if (y)
                            t.disconnect(y);
                        else
                            try {
                                delete e[d]
                            } catch (n) {}
                        k ? c[u][d] = t.connect(e, d, k) : e[d] = null;
                        return e
                    }
                    e[d] = k;
                    return e
                }
            })
        },
        "dojo/_base/connect": function() {
            define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "), function(b, A, q, x, r, m, p, t) {
                function h(d, u, y, n, v) {
                    n = t.hitch(y, n);
                    if (!d || !d.addEventListener && !d.attachEvent)
                        return x.after(d || b.global, u, n, !0);
                    "string" == typeof u && "on" == u.substring(0, 2) && (u = u.substring(2));
                    d || (d = b.global);
                    if (!v)
                        switch (u) {
                        case "keypress":
                            u = l;
                            break;
                        case "mouseenter":
                            u = m.enter;
                            break;
                        case "mouseleave":
                            u = m.leave
                        }
                    return A(d, u, n, v)
                }
                function c(d) {
                    d.keyChar = d.charCode ? String.fromCharCode(d.charCode) : "";
                    d.charOrCode = d.keyChar || d.keyCode
                }
                p.add("events-keypress-typed", function() {
                    var d = {
                        charCode: 0
                    };
                    try {
                        d = document.createEvent("KeyboardEvent"),
                        (d.initKeyboardEvent || d.initKeyEvent).call(d, "keypress", !0, !0, null, !1, !1, !1, !1, 9, 3)
                    } catch (u) {}
                    return 0 == d.charCode && !p("opera")
                });
                var a = {
                    106: 42,
                    111: 47,
                    186: 59,
                    187: 43,
                    188: 44,
                    189: 45,
                    190: 46,
                    191: 47,
                    192: 96,
                    219: 91,
                    220: 92,
                    221: 93,
                    222: 39,
                    229: 113
                }
                  , f = p("mac") ? "metaKey" : "ctrlKey"
                  , e = function(d, u) {
                    u = t.mixin({}, d, u);
                    c(u);
                    u.preventDefault = function() {
                        d.preventDefault()
                    }
                    ;
                    u.stopPropagation = function() {
                        d.stopPropagation()
                    }
                    ;
                    return u
                };
                var l = p("events-keypress-typed") ? function(d, u) {
                    var y = A(d, "keydown", function(v) {
                        var D = v.keyCode
                          , O = 13 != D && 32 != D && (27 != D || !p("ie")) && (48 > D || 90 < D) && (96 > D || 111 < D) && (186 > D || 192 < D) && (219 > D || 222 < D) && 229 != D;
                        if (O || v.ctrlKey) {
                            O = O ? 0 : D;
                            if (v.ctrlKey) {
                                if (3 == D || 13 == D)
                                    return u.call(v.currentTarget, v);
                                O = 95 < O && 106 > O ? O - 48 : !v.shiftKey && 65 <= O && 90 >= O ? O + 32 : a[O] || O
                            }
                            D = e(v, {
                                type: "keypress",
                                faux: !0,
                                charCode: O
                            });
                            u.call(v.currentTarget, D);
                            if (p("ie"))
                                try {
                                    v.keyCode = D.keyCode
                                } catch (z) {}
                        }
                    })
                      , n = A(d, "keypress", function(v) {
                        var D = v.charCode;
                        v = e(v, {
                            charCode: 32 <= D ? D : 0,
                            faux: !0
                        });
                        return u.call(this, v)
                    });
                    return {
                        remove: function() {
                            y.remove();
                            n.remove()
                        }
                    }
                }
                : p("opera") ? function(d, u) {
                    return A(d, "keypress", function(y) {
                        var n = y.which;
                        3 == n && (n = 99);
                        n = 32 > n && !y.shiftKey ? 0 : n;
                        y.ctrlKey && !y.shiftKey && 65 <= n && 90 >= n && (n += 32);
                        return u.call(this, e(y, {
                            charCode: n
                        }))
                    })
                }
                : function(d, u) {
                    return A(d, "keypress", function(y) {
                        c(y);
                        return u.call(this, y)
                    })
                }
                ;
                var k = {
                    _keypress: l,
                    connect: function(d, u, y, n, v) {
                        var D = arguments
                          , O = []
                          , z = 0;
                        O.push("string" == typeof D[0] ? null : D[z++], D[z++]);
                        var w = D[z + 1];
                        O.push("string" == typeof w || "function" == typeof w ? D[z++] : null, D[z++]);
                        for (w = D.length; z < w; z++)
                            O.push(D[z]);
                        return h.apply(this, O)
                    },
                    disconnect: function(d) {
                        d && d.remove()
                    },
                    subscribe: function(d, u, y) {
                        return q.subscribe(d, t.hitch(u, y))
                    },
                    publish: function(d, u) {
                        return q.publish.apply(q, [d].concat(u))
                    },
                    connectPublisher: function(d, u, y) {
                        var n = function() {
                            k.publish(d, arguments)
                        };
                        return y ? k.connect(u, y, n) : k.connect(u, n)
                    },
                    isCopyKey: function(d) {
                        return d[f]
                    }
                };
                k.unsubscribe = k.disconnect;
                t.mixin(b, k);
                return k
            })
        },
        "dojo/topic": function() {
            define(["./Evented"], function(b) {
                var A = new b;
                return {
                    publish: function(q, x) {
                        return A.emit.apply(A, arguments)
                    },
                    subscribe: function(q, x) {
                        return A.on.apply(A, arguments)
                    }
                }
            })
        },
        "dojo/_base/event": function() {
            define(["./kernel", "../on", "../has", "../dom-geometry"], function(b, A, q, x) {
                if (A._fixEvent) {
                    var r = A._fixEvent;
                    A._fixEvent = function(p, t) {
                        (p = r(p, t)) && x.normalizeEvent(p);
                        return p
                    }
                }
                var m = {
                    fix: function(p, t) {
                        return A._fixEvent ? A._fixEvent(p, t) : p
                    },
                    stop: function(p) {
                        q("dom-addeventlistener") || p && p.preventDefault ? (p.preventDefault(),
                        p.stopPropagation()) : (p = p || window.event,
                        p.cancelBubble = !0,
                        A._preventDefault.call(p))
                    }
                };
                b.fixEvent = m.fix;
                b.stopEvent = m.stop;
                return m
            })
        },
        "dojo/dom-geometry": function() {
            define(["./sniff", "./_base/window", "./dom", "./dom-style"], function(b, A, q, x) {
                function r(a, f, e, l, k, d) {
                    d = d || "px";
                    a = a.style;
                    isNaN(f) || (a.left = f + d);
                    isNaN(e) || (a.top = e + d);
                    0 <= l && (a.width = l + d);
                    0 <= k && (a.height = k + d)
                }
                function m(a) {
                    return "button" == a.tagName.toLowerCase() || "input" == a.tagName.toLowerCase() && "button" == (a.getAttribute("type") || "").toLowerCase()
                }
                function p(a) {
                    return "border-box" == h.boxModel || "table" == a.tagName.toLowerCase() || m(a)
                }
                function t(a) {
                    var f = {
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0,
                        top: 0,
                        right: 0,
                        bottom: 0,
                        left: 0
                    };
                    try {
                        var e = a.getBoundingClientRect()
                    } catch (l) {
                        return f
                    }
                    return "undefined" === typeof e.left ? f : e
                }
                var h = {
                    boxModel: "content-box"
                };
                b("ie") && (h.boxModel = "BackCompat" == document.compatMode ? "border-box" : "content-box");
                h.getPadExtents = function(a, f) {
                    a = q.byId(a);
                    var e = f || x.getComputedStyle(a)
                      , l = x.toPixelValue;
                    f = l(a, e.paddingLeft);
                    var k = l(a, e.paddingTop)
                      , d = l(a, e.paddingRight);
                    a = l(a, e.paddingBottom);
                    return {
                        l: f,
                        t: k,
                        r: d,
                        b: a,
                        w: f + d,
                        h: k + a
                    }
                }
                ;
                h.getBorderExtents = function(a, f) {
                    a = q.byId(a);
                    var e = x.toPixelValue
                      , l = f || x.getComputedStyle(a);
                    f = "none" != l.borderLeftStyle ? e(a, l.borderLeftWidth) : 0;
                    var k = "none" != l.borderTopStyle ? e(a, l.borderTopWidth) : 0
                      , d = "none" != l.borderRightStyle ? e(a, l.borderRightWidth) : 0;
                    a = "none" != l.borderBottomStyle ? e(a, l.borderBottomWidth) : 0;
                    return {
                        l: f,
                        t: k,
                        r: d,
                        b: a,
                        w: f + d,
                        h: k + a
                    }
                }
                ;
                h.getPadBorderExtents = function(a, f) {
                    a = q.byId(a);
                    var e = f || x.getComputedStyle(a);
                    f = h.getPadExtents(a, e);
                    a = h.getBorderExtents(a, e);
                    return {
                        l: f.l + a.l,
                        t: f.t + a.t,
                        r: f.r + a.r,
                        b: f.b + a.b,
                        w: f.w + a.w,
                        h: f.h + a.h
                    }
                }
                ;
                h.getMarginExtents = function(a, f) {
                    a = q.byId(a);
                    var e = f || x.getComputedStyle(a)
                      , l = x.toPixelValue;
                    f = l(a, e.marginLeft);
                    var k = l(a, e.marginTop)
                      , d = l(a, e.marginRight);
                    a = l(a, e.marginBottom);
                    return {
                        l: f,
                        t: k,
                        r: d,
                        b: a,
                        w: f + d,
                        h: k + a
                    }
                }
                ;
                h.getMarginBox = function(a, f) {
                    a = q.byId(a);
                    f = f || x.getComputedStyle(a);
                    f = h.getMarginExtents(a, f);
                    var e = a.offsetLeft - f.l
                      , l = a.offsetTop - f.t
                      , k = a.parentNode
                      , d = x.toPixelValue;
                    8 == b("ie") && !b("quirks") && k && (k = x.getComputedStyle(k),
                    e -= "none" != k.borderLeftStyle ? d(a, k.borderLeftWidth) : 0,
                    l -= "none" != k.borderTopStyle ? d(a, k.borderTopWidth) : 0);
                    return {
                        l: e,
                        t: l,
                        w: a.offsetWidth + f.w,
                        h: a.offsetHeight + f.h
                    }
                }
                ;
                h.getContentBox = function(a, f) {
                    a = q.byId(a);
                    var e = f || x.getComputedStyle(a);
                    f = a.clientWidth;
                    var l = h.getPadExtents(a, e);
                    var k = h.getBorderExtents(a, e);
                    e = a.offsetLeft + l.l + k.l;
                    var d = a.offsetTop + l.t + k.t;
                    f ? k = a.clientHeight : (f = a.offsetWidth - k.w,
                    k = a.offsetHeight - k.h);
                    if (8 == b("ie") && !b("quirks")) {
                        var u = a.parentNode
                          , y = x.toPixelValue;
                        u && (u = x.getComputedStyle(u),
                        e -= "none" != u.borderLeftStyle ? y(a, u.borderLeftWidth) : 0,
                        d -= "none" != u.borderTopStyle ? y(a, u.borderTopWidth) : 0)
                    }
                    return {
                        l: e,
                        t: d,
                        w: f - l.w,
                        h: k - l.h
                    }
                }
                ;
                h.setContentSize = function(a, f, e) {
                    a = q.byId(a);
                    var l = f.w;
                    f = f.h;
                    p(a) && (e = h.getPadBorderExtents(a, e),
                    0 <= l && (l += e.w),
                    0 <= f && (f += e.h));
                    r(a, NaN, NaN, l, f)
                }
                ;
                var c = {
                    l: 0,
                    t: 0,
                    w: 0,
                    h: 0
                };
                h.setMarginBox = function(a, f, e) {
                    a = q.byId(a);
                    var l = e || x.getComputedStyle(a);
                    e = f.w;
                    var k = f.h
                      , d = p(a) ? c : h.getPadBorderExtents(a, l);
                    l = h.getMarginExtents(a, l);
                    if (b("webkit") && m(a)) {
                        var u = a.style;
                        0 <= e && !u.width && (u.width = "4px");
                        0 <= k && !u.height && (u.height = "4px")
                    }
                    0 <= e && (e = Math.max(e - d.w - l.w, 0));
                    0 <= k && (k = Math.max(k - d.h - l.h, 0));
                    r(a, f.l, f.t, e, k)
                }
                ;
                h.isBodyLtr = function(a) {
                    a = a || A.doc;
                    return "ltr" == (A.body(a).dir || a.documentElement.dir || "ltr").toLowerCase()
                }
                ;
                h.docScroll = function(a) {
                    a = a || A.doc;
                    var f = a.parentWindow || a.defaultView;
                    return "pageXOffset"in f ? {
                        x: f.pageXOffset,
                        y: f.pageYOffset
                    } : (f = b("quirks") ? A.body(a) : a.documentElement) && {
                        x: h.fixIeBiDiScrollLeft(f.scrollLeft || 0, a),
                        y: f.scrollTop || 0
                    }
                }
                ;
                h.getIeDocumentElementOffset = function(a) {
                    return {
                        x: 0,
                        y: 0
                    }
                }
                ;
                h.fixIeBiDiScrollLeft = function(a, f) {
                    f = f || A.doc;
                    var e = b("ie");
                    if (e && !h.isBodyLtr(f)) {
                        var l = b("quirks");
                        f = l ? A.body(f) : f.documentElement;
                        var k = A.global;
                        6 == e && !l && k.frameElement && f.scrollHeight > f.clientHeight && (a += f.clientLeft);
                        return 8 > e || l ? a + f.clientWidth - f.scrollWidth : -a
                    }
                    return a
                }
                ;
                h.position = function(a, f) {
                    a = q.byId(a);
                    var e = A.body(a.ownerDocument)
                      , l = t(a);
                    l = {
                        x: l.left,
                        y: l.top,
                        w: l.right - l.left,
                        h: l.bottom - l.top
                    };
                    9 > b("ie") && (l.x -= b("quirks") ? e.clientLeft + e.offsetLeft : 0,
                    l.y -= b("quirks") ? e.clientTop + e.offsetTop : 0);
                    f && (a = h.docScroll(a.ownerDocument),
                    l.x += a.x,
                    l.y += a.y);
                    return l
                }
                ;
                h.getMarginSize = function(a, f) {
                    a = q.byId(a);
                    f = h.getMarginExtents(a, f || x.getComputedStyle(a));
                    a = t(a);
                    return {
                        w: a.right - a.left + f.w,
                        h: a.bottom - a.top + f.h
                    }
                }
                ;
                h.normalizeEvent = function(a) {
                    "layerX"in a || (a.layerX = a.offsetX,
                    a.layerY = a.offsetY);
                    if (!("pageX"in a)) {
                        var f = a.target;
                        f = f && f.ownerDocument || document;
                        var e = b("quirks") ? f.body : f.documentElement;
                        a.pageX = a.clientX + h.fixIeBiDiScrollLeft(e.scrollLeft || 0, f);
                        a.pageY = a.clientY + (e.scrollTop || 0)
                    }
                }
                ;
                return h
            })
        },
        "dojo/mouse": function() {
            define(["./_base/kernel", "./on", "./has", "./dom", "./_base/window"], function(b, A, q, x, r) {
                function m(p, t) {
                    var h = function(c, a) {
                        return A(c, p, function(f) {
                            if (t)
                                return t(f, a);
                            if (!x.isDescendant(f.relatedTarget, c))
                                return a.call(this, f)
                        })
                    };
                    h.bubble = function(c) {
                        return m(p, function(a, f) {
                            var e = c(a.target)
                              , l = a.relatedTarget;
                            if (e && e != (l && 1 == l.nodeType && c(l)))
                                return f.call(e, a)
                        })
                    }
                    ;
                    return h
                }
                q.add("dom-quirks", r.doc && "BackCompat" == r.doc.compatMode);
                q.add("events-mouseenter", r.doc && "onmouseenter"in r.doc.createElement("div"));
                q.add("events-mousewheel", r.doc && "onmousewheel"in r.doc);
                r = q("dom-quirks") && q("ie") || !q("dom-addeventlistener") ? {
                    LEFT: 1,
                    MIDDLE: 4,
                    RIGHT: 2,
                    isButton: function(p, t) {
                        return p.button & t
                    },
                    isLeft: function(p) {
                        return p.button & 1
                    },
                    isMiddle: function(p) {
                        return p.button & 4
                    },
                    isRight: function(p) {
                        return p.button & 2
                    }
                } : {
                    LEFT: 0,
                    MIDDLE: 1,
                    RIGHT: 2,
                    isButton: function(p, t) {
                        return p.button == t
                    },
                    isLeft: function(p) {
                        return 0 == p.button
                    },
                    isMiddle: function(p) {
                        return 1 == p.button
                    },
                    isRight: function(p) {
                        return 2 == p.button
                    }
                };
                b.mouseButtons = r;
                b = q("events-mousewheel") ? "mousewheel" : function(p, t) {
                    return A(p, "DOMMouseScroll", function(h) {
                        h.wheelDelta = -h.detail;
                        t.call(this, h)
                    })
                }
                ;
                return {
                    _eventHandler: m,
                    enter: m("mouseover"),
                    leave: m("mouseout"),
                    wheel: b,
                    isLeft: r.isLeft,
                    isMiddle: r.isMiddle,
                    isRight: r.isRight
                }
            })
        },
        "dojo/keys": function() {
            define(["./_base/kernel", "./sniff"], function(b, A) {
                return b.keys = {
                    BACKSPACE: 8,
                    TAB: 9,
                    CLEAR: 12,
                    ENTER: 13,
                    SHIFT: 16,
                    CTRL: 17,
                    ALT: 18,
                    META: A("webkit") ? 91 : 224,
                    PAUSE: 19,
                    CAPS_LOCK: 20,
                    ESCAPE: 27,
                    SPACE: 32,
                    PAGE_UP: 33,
                    PAGE_DOWN: 34,
                    END: 35,
                    HOME: 36,
                    LEFT_ARROW: 37,
                    UP_ARROW: 38,
                    RIGHT_ARROW: 39,
                    DOWN_ARROW: 40,
                    INSERT: 45,
                    DELETE: 46,
                    HELP: 47,
                    LEFT_WINDOW: 91,
                    RIGHT_WINDOW: 92,
                    SELECT: 93,
                    NUMPAD_0: 96,
                    NUMPAD_1: 97,
                    NUMPAD_2: 98,
                    NUMPAD_3: 99,
                    NUMPAD_4: 100,
                    NUMPAD_5: 101,
                    NUMPAD_6: 102,
                    NUMPAD_7: 103,
                    NUMPAD_8: 104,
                    NUMPAD_9: 105,
                    NUMPAD_MULTIPLY: 106,
                    NUMPAD_PLUS: 107,
                    NUMPAD_ENTER: 108,
                    NUMPAD_MINUS: 109,
                    NUMPAD_PERIOD: 110,
                    NUMPAD_DIVIDE: 111,
                    F1: 112,
                    F2: 113,
                    F3: 114,
                    F4: 115,
                    F5: 116,
                    F6: 117,
                    F7: 118,
                    F8: 119,
                    F9: 120,
                    F10: 121,
                    F11: 122,
                    F12: 123,
                    F13: 124,
                    F14: 125,
                    F15: 126,
                    NUM_LOCK: 144,
                    SCROLL_LOCK: 145,
                    UP_DPAD: 175,
                    DOWN_DPAD: 176,
                    LEFT_DPAD: 177,
                    RIGHT_DPAD: 178,
                    copyKey: A("mac") && !A("air") ? A("safari") ? 91 : 224 : 17
                }
            })
        },
        "dojo/main": function() {
            define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "), function(b, A, q, x, r, m, p, t) {
                p.isDebug && q(["./_firebug/firebug"]);
                var h = p.require;
                h && (h = m.map(r.isArray(h) ? h : [h], function(c) {
                    return c.replace(/\./g, "/")
                }),
                b.isAsync ? q(h) : t(1, function() {
                    q(h)
                }));
                return b
            })
        },
        "dojo/ready": function() {
            define(["./_base/kernel", "./has", "require", "./domReady", "./_base/lang"], function(b, A, q, x, r) {
                var m = 0
                  , p = []
                  , t = 0;
                A = function() {
                    m = 1;
                    b._postLoad = b.config.afterOnLoad = !0;
                    h()
                }
                ;
                var h = function() {
                    if (!t) {
                        for (t = 1; m && (!x || 0 == x._Q.length) && (q.idle ? q.idle() : 1) && p.length; ) {
                            var f = p.shift();
                            try {
                                f()
                            } catch (e) {
                                if (e.info = e.message,
                                q.signal)
                                    q.signal("error", e);
                                else
                                    throw e;
                            }
                        }
                        t = 0
                    }
                };
                q.on && q.on("idle", h);
                x && (x._onQEmpty = h);
                var c = b.ready = b.addOnLoad = function(f, e, l) {
                    var k = r._toArray(arguments);
                    "number" != typeof f ? (l = e,
                    e = f,
                    f = 1E3) : k.shift();
                    l = l ? r.hitch.apply(b, k) : function() {
                        e()
                    }
                    ;
                    l.priority = f;
                    for (k = 0; k < p.length && f >= p[k].priority; k++)
                        ;
                    p.splice(k, 0, l);
                    h()
                }
                  , a = b.config.addOnLoad;
                if (a)
                    c[r.isArray(a) ? "apply" : "call"](b, a);
                b.config.parseOnLoad && !b.isAsync && c(99, function() {
                    b.parser || (b.deprecated("Add explicit require(['dojo/parser']);", "", "2.0"),
                    q(["dojo/parser"]))
                });
                x ? x(A) : A();
                return c
            })
        },
        "dojo/domReady": function() {
            define(["./global", "./has"], function(b, A) {
                function q(d) {
                    h.push(d);
                    t && x()
                }
                function x() {
                    if (!c) {
                        for (c = !0; h.length; )
                            try {
                                h.shift()(r)
                            } catch (d) {
                                console.error(d, "in domReady callback", d.stack)
                            }
                        c = !1;
                        q._onQEmpty()
                    }
                }
                var r = document, m = {
                    loaded: 1,
                    complete: 1
                }, p = "string" != typeof r.readyState, t = !!m[r.readyState], h = [], c;
                q.load = function(d, u, y) {
                    q(y)
                }
                ;
                q._Q = h;
                q._onQEmpty = function() {}
                ;
                p && (r.readyState = "loading");
                if (!t) {
                    var a = []
                      , f = function(d) {
                        d = d || b.event;
                        t || "readystatechange" == d.type && !m[r.readyState] || (p && (r.readyState = "complete"),
                        t = 1,
                        x())
                    }
                      , e = function(d, u) {
                        d.addEventListener(u, f, !1);
                        h.push(function() {
                            d.removeEventListener(u, f, !1)
                        })
                    };
                    if (!A("dom-addeventlistener")) {
                        e = function(d, u) {
                            u = "on" + u;
                            d.attachEvent(u, f);
                            h.push(function() {
                                d.detachEvent(u, f)
                            })
                        }
                        ;
                        var l = r.createElement("div");
                        try {
                            l.doScroll && null === b.frameElement && a.push(function() {
                                try {
                                    return l.doScroll("left"),
                                    1
                                } catch (d) {}
                            })
                        } catch (d) {}
                    }
                    e(r, "DOMContentLoaded");
                    e(b, "load");
                    "onreadystatechange"in r ? e(r, "readystatechange") : p || a.push(function() {
                        return m[r.readyState]
                    });
                    if (a.length) {
                        var k = function() {
                            if (!t) {
                                for (var d = a.length; d--; )
                                    if (a[d]()) {
                                        f("poller");
                                        return
                                    }
                                setTimeout(k, 30)
                            }
                        };
                        k()
                    }
                }
                return q
            })
        },
        "dojo/_base/declare": function() {
            define(["./kernel", "../has", "./lang"], function(b, A, q) {
                function x(C, H) {
                    throw Error("declare" + (H ? " " + H : "") + ": " + C);
                }
                function r(C, H) {
                    for (var B = [], K = [{
                        cls: 0,
                        refs: []
                    }], J = {}, R = 1, V = C.length, Y = 0, S, U, L, T, da; Y < V; ++Y) {
                        (S = C[Y]) ? "[object Function]" != O.call(S) && x("mixin #" + Y + " is not a callable constructor.", H) : x("mixin #" + Y + " is unknown. Did you use dojo.require to pull it in?", H);
                        U = S._meta ? S._meta.bases : [S];
                        L = 0;
                        for (S = U.length - 1; 0 <= S; --S)
                            T = U[S].prototype,
                            T.hasOwnProperty("declaredClass") || (T.declaredClass = "uniqName_" + z++),
                            T = T.declaredClass,
                            J.hasOwnProperty(T) || (J[T] = {
                                count: 0,
                                refs: [],
                                cls: U[S]
                            },
                            ++R),
                            T = J[T],
                            L && L !== T && (T.refs.push(L),
                            ++L.count),
                            L = T;
                        ++L.count;
                        K[0].refs.push(L)
                    }
                    for (; K.length; ) {
                        L = K.pop();
                        B.push(L.cls);
                        for (--R; da = L.refs,
                        1 == da.length; ) {
                            L = da[0];
                            if (!L || --L.count) {
                                L = 0;
                                break
                            }
                            B.push(L.cls);
                            --R
                        }
                        if (L)
                            for (Y = 0,
                            V = da.length; Y < V; ++Y)
                                L = da[Y],
                                --L.count || K.push(L)
                    }
                    R && x("can't build consistent linearization", H);
                    S = C[0];
                    B[0] = S ? S._meta && S === B[B.length - S._meta.bases.length] ? S._meta.bases.length : 1 : 0;
                    return B
                }
                function m(C, H, B, K) {
                    var J, R = this._inherited = this._inherited || {};
                    if ("string" === typeof C) {
                        var V = C;
                        C = H;
                        H = B;
                        B = K
                    }
                    if ("function" === typeof C) {
                        var Y = C;
                        C = H;
                        H = B
                    } else
                        try {
                            Y = C.callee
                        } catch (T) {
                            if (T instanceof TypeError)
                                x("strict mode inherited() requires the caller function to be passed before arguments", this.declaredClass);
                            else
                                throw T;
                        }
                    (V = V || Y.nom) || x("can't deduce a name to call inherited()", this.declaredClass);
                    B = K = 0;
                    var S = this.constructor._meta;
                    K = S.bases;
                    var U = R.p;
                    if ("constructor" != V) {
                        if (R.c !== Y) {
                            U = 0;
                            var L = K[0];
                            S = L._meta;
                            if (S.hidden[V] !== Y) {
                                (J = S.chains) && "string" == typeof J[V] && x("calling chained method with inherited: " + V, this.declaredClass);
                                do
                                    if (S = L._meta,
                                    J = L.prototype,
                                    S && (J[V] === Y && J.hasOwnProperty(V) || S.hidden[V] === Y))
                                        break;
                                while (L = K[++U]);
                                U = L ? U : -1
                            }
                        }
                        if (L = K[++U])
                            if (J = L.prototype,
                            L._meta && J.hasOwnProperty(V))
                                B = J[V];
                            else {
                                Y = D[V];
                                do
                                    if (J = L.prototype,
                                    (B = J[V]) && (L._meta ? J.hasOwnProperty(V) : B !== Y))
                                        break;
                                while (L = K[++U])
                            }
                        B = L && B || D[V]
                    } else {
                        if (R.c !== Y && (U = 0,
                        (S = K[0]._meta) && S.ctor !== Y)) {
                            for ((J = S.chains) && "manual" === J.constructor || x("calling chained constructor with inherited", this.declaredClass); (L = K[++U]) && (!(S = L._meta) || S.ctor !== Y); )
                                ;
                            U = L ? U : -1
                        }
                        for (; (L = K[++U]) && !(B = (S = L._meta) ? S.ctor : L); )
                            ;
                        B = L && B
                    }
                    R.c = B;
                    R.p = U;
                    if (B)
                        return !0 === H ? B : B.apply(this, H || C)
                }
                function p(C, H, B) {
                    return "string" === typeof C ? "function" === typeof H ? this.__inherited(C, H, B, !0) : this.__inherited(C, H, !0) : "function" === typeof C ? this.__inherited(C, H, !0) : this.__inherited(C, !0)
                }
                function t(C, H, B, K) {
                    var J = this.getInherited(C, H, B);
                    if (J)
                        return J.apply(this, K || B || H || C)
                }
                function h(C) {
                    for (var H = this.constructor._meta.bases, B = 0, K = H.length; B < K; ++B)
                        if (H[B] === C)
                            return !0;
                    return this instanceof C
                }
                function c(C, H) {
                    for (var B in H)
                        "constructor" != B && H.hasOwnProperty(B) && (C[B] = H[B]);
                    if (A("bug-for-in-skips-shadowed"))
                        for (var K = q._extraNames, J = K.length; J; )
                            B = K[--J],
                            "constructor" != B && H.hasOwnProperty(B) && (C[B] = H[B])
                }
                function a(C) {
                    n.safeMixin(this.prototype, C);
                    return this
                }
                function f(C, H) {
                    C instanceof Array || "function" === typeof C || (H = C,
                    C = void 0);
                    H = H || {};
                    C = C || [];
                    return n([this].concat(C), H)
                }
                function e(C, H) {
                    return function() {
                        var B = arguments, K = B, J = B[0], R;
                        var V = C.length;
                        if (!(this instanceof B.callee))
                            return y(B);
                        if (H && (J && J.preamble || this.preamble)) {
                            var Y = Array(C.length);
                            Y[0] = B;
                            for (R = 0; ; ) {
                                (J = B[0]) && (J = J.preamble) && (B = J.apply(this, B) || B);
                                J = C[R].prototype;
                                (J = J.hasOwnProperty("preamble") && J.preamble) && (B = J.apply(this, B) || B);
                                if (++R == V)
                                    break;
                                Y[R] = B
                            }
                        }
                        for (R = V - 1; 0 <= R; --R)
                            J = C[R],
                            (J = (V = J._meta) ? V.ctor : J) && J.apply(this, Y ? Y[R] : B);
                        (J = this.postscript) && J.apply(this, K)
                    }
                }
                function l(C, H) {
                    return function() {
                        var B = arguments
                          , K = B
                          , J = B[0];
                        if (!(this instanceof B.callee))
                            return y(B);
                        H && (J && (J = J.preamble) && (K = J.apply(this, K) || K),
                        (J = this.preamble) && J.apply(this, K));
                        C && C.apply(this, B);
                        (J = this.postscript) && J.apply(this, B)
                    }
                }
                function k(C) {
                    return function() {
                        var H = arguments, B = 0, K, J;
                        if (!(this instanceof H.callee))
                            return y(H);
                        for (; K = C[B]; ++B)
                            if (K = (J = K._meta) ? J.ctor : K) {
                                K.apply(this, H);
                                break
                            }
                        (K = this.postscript) && K.apply(this, H)
                    }
                }
                function d(C, H, B) {
                    return function() {
                        var K, J = 0, R = 1;
                        B && (J = H.length - 1,
                        R = -1);
                        for (; K = H[J]; J += R) {
                            var V = K._meta;
                            (K = (V ? V.hidden : K.prototype)[C]) && K.apply(this, arguments)
                        }
                    }
                }
                function u(C) {
                    w.prototype = C.prototype;
                    C = new w;
                    w.prototype = null;
                    return C
                }
                function y(C) {
                    var H = C.callee
                      , B = u(H);
                    H.apply(B, C);
                    return B
                }
                function n(C, H, B) {
                    "string" != typeof C && (B = H,
                    H = C,
                    C = "");
                    B = B || {};
                    var K, J, R, V = 1, Y = H;
                    if ("[object Array]" == O.call(H)) {
                        var S = r(H, C);
                        var U = S[0];
                        V = S.length - U;
                        H = S[V]
                    } else
                        S = [0],
                        H ? "[object Function]" == O.call(H) ? (U = H._meta,
                        S = S.concat(U ? U.bases : H)) : x("base class is not a callable constructor.", C) : null !== H && x("unknown base class. Did you use dojo.require to pull it in?", C);
                    if (H)
                        for (K = V - 1; ; --K) {
                            var L = u(H);
                            if (!K)
                                break;
                            U = S[K];
                            (U._meta ? c : v)(L, U.prototype);
                            var T = A("csp-restrictions") ? function() {}
                            : new Function;
                            T.superclass = H;
                            T.prototype = L;
                            H = L.constructor = T
                        }
                    else
                        L = {};
                    n.safeMixin(L, B);
                    U = B.constructor;
                    U !== D.constructor && (U.nom = "constructor",
                    L.constructor = U);
                    for (K = V - 1; K; --K)
                        (U = S[K]._meta) && U.chains && (R = v(R || {}, U.chains));
                    L["-chains-"] && (R = v(R || {}, L["-chains-"]));
                    H && H.prototype && H.prototype["-chains-"] && (R = v(R || {}, H.prototype["-chains-"]));
                    U = !R || !R.hasOwnProperty("constructor");
                    S[0] = T = R && "manual" === R.constructor ? k(S) : 1 == S.length ? l(B.constructor, U) : e(S, U);
                    T._meta = {
                        bases: S,
                        hidden: B,
                        chains: R,
                        parents: Y,
                        ctor: B.constructor
                    };
                    T.superclass = H && H.prototype;
                    T.extend = a;
                    T.createSubclass = f;
                    T.prototype = L;
                    L.constructor = T;
                    L.getInherited = p;
                    L.isInstanceOf = h;
                    L.inherited = E;
                    L.__inherited = m;
                    C && (L.declaredClass = C,
                    q.setObject(C, T));
                    if (R)
                        for (J in R)
                            L[J] && "string" == typeof R[J] && "constructor" != J && (U = L[J] = d(J, S, "after" === R[J]),
                            U.nom = J);
                    return T
                }
                var v = q.mixin
                  , D = Object.prototype
                  , O = D.toString
                  , z = 0;
                var w = A("csp-restrictions") ? function() {}
                : new Function;
                var E = b.config.isDebug ? t : m;
                b.safeMixin = n.safeMixin = function(C, H) {
                    for (R in H) {
                        var B = H[R];
                        B === D[R] && R in D || "constructor" == R || ("[object Function]" == O.call(B) && (B.nom = R),
                        C[R] = B)
                    }
                    if (A("bug-for-in-skips-shadowed") && H)
                        for (var K = q._extraNames, J = K.length; J; ) {
                            var R = K[--J];
                            B = H[R];
                            B === D[R] && R in D || "constructor" == R || ("[object Function]" == O.call(B) && (B.nom = R),
                            C[R] = B)
                        }
                    return C
                }
                ;
                return b.declare = n
            })
        },
        "dojo/_base/Color": function() {
            define(["./kernel", "./lang", "./array", "./config"], function(b, A, q, x) {
                var r = b.Color = function(m) {
                    m && this.setColor(m)
                }
                ;
                r.named = {
                    black: [0, 0, 0],
                    silver: [192, 192, 192],
                    gray: [128, 128, 128],
                    white: [255, 255, 255],
                    maroon: [128, 0, 0],
                    red: [255, 0, 0],
                    purple: [128, 0, 128],
                    fuchsia: [255, 0, 255],
                    green: [0, 128, 0],
                    lime: [0, 255, 0],
                    olive: [128, 128, 0],
                    yellow: [255, 255, 0],
                    navy: [0, 0, 128],
                    blue: [0, 0, 255],
                    teal: [0, 128, 128],
                    aqua: [0, 255, 255],
                    transparent: x.transparentColor || [0, 0, 0, 0]
                };
                A.extend(r, {
                    r: 255,
                    g: 255,
                    b: 255,
                    a: 1,
                    _set: function(m, p, t, h) {
                        this.r = m;
                        this.g = p;
                        this.b = t;
                        this.a = h
                    },
                    setColor: function(m) {
                        A.isString(m) ? r.fromString(m, this) : A.isArray(m) ? r.fromArray(m, this) : (this._set(m.r, m.g, m.b, m.a),
                        m instanceof r || this.sanitize());
                        return this
                    },
                    sanitize: function() {
                        return this
                    },
                    toRgb: function() {
                        return [this.r, this.g, this.b]
                    },
                    toRgba: function() {
                        return [this.r, this.g, this.b, this.a]
                    },
                    toHex: function() {
                        return "#" + q.map(["r", "g", "b"], function(m) {
                            m = this[m].toString(16);
                            return 2 > m.length ? "0" + m : m
                        }, this).join("")
                    },
                    toCss: function(m) {
                        var p = this.r + ", " + this.g + ", " + this.b;
                        return (m ? "rgba(" + p + ", " + this.a : "rgb(" + p) + ")"
                    },
                    toString: function() {
                        return this.toCss(!0)
                    }
                });
                r.blendColors = b.blendColors = function(m, p, t, h) {
                    h = h || new r;
                    h.r = Math.round(m.r + (p.r - m.r) * t);
                    h.g = Math.round(m.g + (p.g - m.g) * t);
                    h.b = Math.round(m.b + (p.b - m.b) * t);
                    h.a = m.a + (p.a - m.a) * t;
                    return h.sanitize()
                }
                ;
                r.fromRgb = b.colorFromRgb = function(m, p) {
                    return (m = m.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/)) && r.fromArray(m[1].split(/\s*,\s*/), p)
                }
                ;
                r.fromHex = b.colorFromHex = function(m, p) {
                    var t = p || new r
                      , h = 4 == m.length ? 4 : 8
                      , c = (1 << h) - 1;
                    m = Number("0x" + m.substr(1));
                    if (isNaN(m))
                        return null;
                    q.forEach(["b", "g", "r"], function(a) {
                        var f = m & c;
                        m >>= h;
                        t[a] = 4 == h ? 17 * f : f
                    });
                    t.a = 1;
                    return t
                }
                ;
                r.fromArray = b.colorFromArray = function(m, p) {
                    p = p || new r;
                    p._set(Number(m[0]), Number(m[1]), Number(m[2]), Number(m[3]));
                    isNaN(p.a) && (p.a = 1);
                    return p.sanitize()
                }
                ;
                r.fromString = b.colorFromString = function(m, p) {
                    var t = r.named[m];
                    return t && r.fromArray(t, p) || r.fromRgb(m, p) || r.fromHex(m, p)
                }
                ;
                return r
            })
        },
        "dojo/_base/browser": function() {
            require.has && require.has.add("config-selectorEngine", "acme");
            define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "), function(b) {
                return b
            })
        },
        "dojo/_base/unload": function() {
            define(["./kernel", "./lang", "../on"], function(b, A, q) {
                var x = window
                  , r = {
                    addOnWindowUnload: function(m, p) {
                        b.windowUnloaded || q(x, "unload", b.windowUnloaded = function() {}
                        );
                        q(x, "unload", A.hitch(m, p))
                    },
                    addOnUnload: function(m, p) {
                        q(x, "beforeunload", A.hitch(m, p))
                    }
                };
                b.addOnWindowUnload = r.addOnWindowUnload;
                b.addOnUnload = r.addOnUnload;
                return r
            })
        },
        "dojo/_base/html": function() {
            define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "), function(b, A, q, x, r, m, p, t) {
                b.byId = A.byId;
                b.isDescendant = A.isDescendant;
                b.setSelectable = A.setSelectable;
                b.getAttr = x.get;
                b.setAttr = x.set;
                b.hasAttr = x.has;
                b.removeAttr = x.remove;
                b.getNodeProp = x.getNodeProp;
                b.attr = function(h, c, a) {
                    return 2 == arguments.length ? x["string" == typeof c ? "get" : "set"](h, c) : x.set(h, c, a)
                }
                ;
                b.hasClass = m.contains;
                b.addClass = m.add;
                b.removeClass = m.remove;
                b.toggleClass = m.toggle;
                b.replaceClass = m.replace;
                b._toDom = b.toDom = p.toDom;
                b.place = p.place;
                b.create = p.create;
                b.empty = function(h) {
                    p.empty(h)
                }
                ;
                b._destroyElement = b.destroy = function(h) {
                    p.destroy(h)
                }
                ;
                b._getPadExtents = b.getPadExtents = t.getPadExtents;
                b._getBorderExtents = b.getBorderExtents = t.getBorderExtents;
                b._getPadBorderExtents = b.getPadBorderExtents = t.getPadBorderExtents;
                b._getMarginExtents = b.getMarginExtents = t.getMarginExtents;
                b._getMarginSize = b.getMarginSize = t.getMarginSize;
                b._getMarginBox = b.getMarginBox = t.getMarginBox;
                b.setMarginBox = t.setMarginBox;
                b._getContentBox = b.getContentBox = t.getContentBox;
                b.setContentSize = t.setContentSize;
                b._isBodyLtr = b.isBodyLtr = t.isBodyLtr;
                b._docScroll = b.docScroll = t.docScroll;
                b._getIeDocumentElementOffset = b.getIeDocumentElementOffset = t.getIeDocumentElementOffset;
                b._fixIeBiDiScrollLeft = b.fixIeBiDiScrollLeft = t.fixIeBiDiScrollLeft;
                b.position = t.position;
                b.marginBox = function(h, c) {
                    return c ? t.setMarginBox(h, c) : t.getMarginBox(h)
                }
                ;
                b.contentBox = function(h, c) {
                    return c ? t.setContentSize(h, c) : t.getContentBox(h)
                }
                ;
                b.coords = function(h, c) {
                    b.deprecated("dojo.coords()", "Use dojo.position() or dojo.marginBox().");
                    h = A.byId(h);
                    var a = q.getComputedStyle(h);
                    a = t.getMarginBox(h, a);
                    h = t.position(h, c);
                    a.x = h.x;
                    a.y = h.y;
                    return a
                }
                ;
                b.getProp = r.get;
                b.setProp = r.set;
                b.prop = function(h, c, a) {
                    return 2 == arguments.length ? r["string" == typeof c ? "get" : "set"](h, c) : r.set(h, c, a)
                }
                ;
                b.getStyle = q.get;
                b.setStyle = q.set;
                b.getComputedStyle = q.getComputedStyle;
                b.__toPixelValue = b.toPixelValue = q.toPixelValue;
                b.style = function(h, c, a) {
                    switch (arguments.length) {
                    case 1:
                        return q.get(h);
                    case 2:
                        return q["string" == typeof c ? "get" : "set"](h, c)
                    }
                    return q.set(h, c, a)
                }
                ;
                return b
            })
        },
        "dojo/dom-class": function() {
            define(["./_base/lang", "./_base/array", "./dom"], function(b, A, q) {
                function x(h) {
                    if ("string" == typeof h || h instanceof String) {
                        if (h && !m.test(h))
                            return p[0] = h,
                            p;
                        h = h.split(m);
                        h.length && !h[0] && h.shift();
                        h.length && !h[h.length - 1] && h.pop();
                        return h
                    }
                    return h ? A.filter(h, function(c) {
                        return c
                    }) : []
                }
                var r, m = /\s+/, p = [""], t = {};
                return r = {
                    contains: function(h, c) {
                        return 0 <= (" " + q.byId(h).className + " ").indexOf(" " + c + " ")
                    },
                    add: function(h, c) {
                        h = q.byId(h);
                        c = x(c);
                        var a = h.className;
                        a = a ? " " + a + " " : " ";
                        var f = a.length;
                        for (var e = 0, l = c.length, k; e < l; ++e)
                            (k = c[e]) && 0 > a.indexOf(" " + k + " ") && (a += k + " ");
                        f < a.length && (h.className = a.substr(1, a.length - 2))
                    },
                    remove: function(h, c) {
                        h = q.byId(h);
                        if (void 0 !== c) {
                            c = x(c);
                            var a = " " + h.className + " ";
                            for (var f = 0, e = c.length; f < e; ++f)
                                a = a.replace(" " + c[f] + " ", " ");
                            a = b.trim(a)
                        } else
                            a = "";
                        h.className != a && (h.className = a)
                    },
                    replace: function(h, c, a) {
                        h = q.byId(h);
                        t.className = h.className;
                        r.remove(t, a);
                        r.add(t, c);
                        h.className !== t.className && (h.className = t.className)
                    },
                    toggle: function(h, c, a) {
                        h = q.byId(h);
                        if (void 0 === a) {
                            c = x(c);
                            for (var f = 0, e = c.length, l; f < e; ++f)
                                l = c[f],
                                r[r.contains(h, l) ? "remove" : "add"](h, l)
                        } else
                            r[a ? "add" : "remove"](h, c);
                        return a
                    }
                }
            })
        },
        "dojo/_base/NodeList": function() {
            define(["./kernel", "../query", "./array", "./html", "../NodeList-dom"], function(b, A, q) {
                A = A.NodeList;
                var x = A.prototype;
                x.connect = A._adaptAsForEach(function() {
                    return b.connect.apply(this, arguments)
                });
                x.coords = A._adaptAsMap(b.coords);
                A.events = "blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");
                q.forEach(A.events, function(r) {
                    var m = "on" + r;
                    x[m] = function(p, t) {
                        return this.connect(m, p, t)
                    }
                });
                return b.NodeList = A
            })
        },
        "dojo/query": function() {
            define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "), function(b, A, q, x, r, m, p, t) {
                function h(n, v) {
                    var D = function(z, w) {
                        if ("string" == typeof w && (w = q.byId(w),
                        !w))
                            return new v([]);
                        z = "string" == typeof z ? n(z, w) : z ? z.end && z.on ? z : [z] : [];
                        return z.end && z.on ? z : new v(z)
                    };
                    D.matches = n.match || function(z, w, E) {
                        return 0 < D.filter([z], w, E).length
                    }
                    ;
                    D.filter = n.filter || function(z, w, E) {
                        return D(w, E).filter(function(C) {
                            return -1 < r.indexOf(z, C)
                        })
                    }
                    ;
                    if ("function" != typeof n) {
                        var O = n.search;
                        n = function(z, w) {
                            return O(w || document, z)
                        }
                    }
                    return D
                }
                A.add("array-extensible", function() {
                    return 1 == m.delegate([], {
                        length: 1
                    }).length && !A("bug-for-in-skips-shadowed")
                });
                var c = Array.prototype
                  , a = c.slice
                  , f = c.concat
                  , e = r.forEach
                  , l = function(n, v, D) {
                    v = [0].concat(a.call(v, 0));
                    D = D || b.global;
                    return function(O) {
                        v[0] = O;
                        return n.apply(D, v)
                    }
                }
                  , k = function(n) {
                    var v = this instanceof d && A("array-extensible");
                    "number" == typeof n && (n = Array(n));
                    var D = n && "length"in n ? n : arguments;
                    if (v || !D.sort) {
                        for (var O = v ? this : [], z = O.length = D.length, w = 0; w < z; w++)
                            O[w] = D[w];
                        if (v)
                            return O;
                        D = O
                    }
                    m._mixin(D, u);
                    D._NodeListCtor = function(E) {
                        return d(E)
                    }
                    ;
                    return D
                }
                  , d = k
                  , u = d.prototype = A("array-extensible") ? [] : {};
                d._wrap = u._wrap = function(n, v, D) {
                    n = new (D || this._NodeListCtor || d)(n);
                    return v ? n._stash(v) : n
                }
                ;
                d._adaptAsMap = function(n, v) {
                    return function() {
                        return this.map(l(n, arguments, v))
                    }
                }
                ;
                d._adaptAsForEach = function(n, v) {
                    return function() {
                        this.forEach(l(n, arguments, v));
                        return this
                    }
                }
                ;
                d._adaptAsFilter = function(n, v) {
                    return function() {
                        return this.filter(l(n, arguments, v))
                    }
                }
                ;
                d._adaptWithCondition = function(n, v, D) {
                    return function() {
                        var O = arguments
                          , z = l(n, O, D);
                        if (v.call(D || b.global, O))
                            return this.map(z);
                        this.forEach(z);
                        return this
                    }
                }
                ;
                e(["slice", "splice"], function(n) {
                    var v = c[n];
                    u[n] = function() {
                        return this._wrap(v.apply(this, arguments), "slice" == n ? this : null)
                    }
                });
                e(["indexOf", "lastIndexOf", "every", "some"], function(n) {
                    var v = r[n];
                    u[n] = function() {
                        return v.apply(b, [this].concat(a.call(arguments, 0)))
                    }
                });
                m.extend(k, {
                    constructor: d,
                    _NodeListCtor: d,
                    toString: function() {
                        return this.join(",")
                    },
                    _stash: function(n) {
                        this._parent = n;
                        return this
                    },
                    on: function(n, v) {
                        var D = this.map(function(O) {
                            return x(O, n, v)
                        });
                        D.remove = function() {
                            for (var O = 0; O < D.length; O++)
                                D[O].remove()
                        }
                        ;
                        return D
                    },
                    end: function() {
                        return this._parent ? this._parent : new this._NodeListCtor(0)
                    },
                    concat: function(n) {
                        var v = a.call(this, 0)
                          , D = r.map(arguments, function(O) {
                            return a.call(O, 0)
                        });
                        return this._wrap(f.apply(v, D), this)
                    },
                    map: function(n, v) {
                        return this._wrap(r.map(this, n, v), this)
                    },
                    forEach: function(n, v) {
                        e(this, n, v);
                        return this
                    },
                    filter: function(n) {
                        var v = arguments
                          , D = this
                          , O = 0;
                        if ("string" == typeof n) {
                            D = y._filterResult(this, v[0]);
                            if (1 == v.length)
                                return D._stash(this);
                            O = 1
                        }
                        return this._wrap(r.filter(D, v[O], v[O + 1]), this)
                    },
                    instantiate: function(n, v) {
                        var D = m.isFunction(n) ? n : m.getObject(n);
                        v = v || {};
                        return this.forEach(function(O) {
                            new D(v,O)
                        })
                    },
                    at: function() {
                        var n = new this._NodeListCtor(0);
                        e(arguments, function(v) {
                            0 > v && (v = this.length + v);
                            this[v] && n.push(this[v])
                        }, this);
                        return n._stash(this)
                    }
                });
                var y = h(t, k);
                b.query = h(t, function(n) {
                    return k(n)
                });
                y.load = function(n, v, D) {
                    p.load(n, v, function(O) {
                        D(h(O, k))
                    })
                }
                ;
                b._filterQueryResult = y._filterResult = function(n, v, D) {
                    return new k(y.filter(n, v, D))
                }
                ;
                b.NodeList = y.NodeList = k;
                return y
            })
        },
        "dojo/selector/acme": function() {
            define(["../dom", "../sniff", "../_base/array", "../_base/lang", "../_base/window"], function(b, A, q, x, r) {
                var m = x.trim
                  , p = q.forEach
                  , t = "BackCompat" == r.doc.compatMode
                  , h = !1
                  , c = function() {
                    return !0
                }
                  , a = function(F) {
                    F = 0 <= "\x3e~+".indexOf(F.slice(-1)) ? F + " * " : F + " ";
                    for (var I = function(Ia, Ja) {
                        return m(F.slice(Ia, Ja))
                    }, M = [], Q = -1, aa = -1, ba = -1, la = -1, Z = -1, ea = -1, pa = -1, ma, ua = "", sa = "", Fa, ja = 0, Ha = F.length, fa = null, xa = null, za = function() {
                        0 <= ea && (fa.id = I(ea, ja).replace(/\\/g, ""),
                        ea = -1);
                        if (0 <= pa) {
                            var Ia = pa == ja ? null : I(pa, ja);
                            fa[0 > "\x3e~+".indexOf(Ia) ? "tag" : "oper"] = Ia;
                            pa = -1
                        }
                        0 <= Z && (fa.classes.push(I(Z + 1, ja).replace(/\\/g, "")),
                        Z = -1)
                    }; ua = sa,
                    sa = F.charAt(ja),
                    ja < Ha; ja++)
                        "\\" != ua && (fa || (Fa = ja,
                        fa = {
                            query: null,
                            pseudos: [],
                            attrs: [],
                            classes: [],
                            tag: null,
                            oper: null,
                            id: null,
                            getTag: function() {
                                return h ? this.otag : this.tag
                            }
                        },
                        pa = ja),
                        ma ? sa == ma && (ma = null) : "'" == sa || '"' == sa ? ma = sa : 0 <= Q ? "]" == sa ? (xa.attr ? xa.matchFor = I(ba || Q + 1, ja) : xa.attr = I(Q + 1, ja),
                        !(Q = xa.matchFor) || '"' != Q.charAt(0) && "'" != Q.charAt(0) || (xa.matchFor = Q.slice(1, -1)),
                        xa.matchFor && (xa.matchFor = xa.matchFor.replace(/\\/g, "")),
                        fa.attrs.push(xa),
                        xa = null,
                        Q = ba = -1) : "\x3d" == sa && (ba = 0 <= "|~^$*".indexOf(ua) ? ua : "",
                        xa.type = ba + sa,
                        xa.attr = I(Q + 1, ja - ba.length),
                        ba = ja + 1) : 0 <= aa ? ")" == sa && (0 <= la && (xa.value = I(aa + 1, ja)),
                        la = aa = -1) : "#" == sa ? (za(),
                        ea = ja + 1) : "." == sa ? (za(),
                        Z = ja) : ":" == sa ? (za(),
                        la = ja) : "[" == sa ? (za(),
                        Q = ja,
                        xa = {}) : "(" == sa ? (0 <= la && (xa = {
                            name: I(la + 1, ja),
                            value: null
                        },
                        fa.pseudos.push(xa)),
                        aa = ja) : " " == sa && ua != sa && (za(),
                        0 <= la && fa.pseudos.push({
                            name: I(la + 1, ja)
                        }),
                        fa.loops = fa.pseudos.length || fa.attrs.length || fa.classes.length,
                        fa.oquery = fa.query = I(Fa, ja),
                        fa.otag = fa.tag = fa.oper ? null : fa.tag || "*",
                        fa.tag && (fa.tag = fa.tag.toUpperCase()),
                        M.length && M[M.length - 1].oper && (fa.infixOper = M.pop(),
                        fa.query = fa.infixOper.query + " " + fa.query),
                        M.push(fa),
                        fa = null));
                    return M
                }
                  , f = function(F, I) {
                    return F ? I ? function() {
                        return F.apply(window, arguments) && I.apply(window, arguments)
                    }
                    : F : I
                }
                  , e = function(F, I) {
                    I = I || [];
                    F && I.push(F);
                    return I
                }
                  , l = function(F) {
                    return 1 == F.nodeType
                }
                  , k = function(F, I) {
                    return F ? "class" == I ? F.className || "" : "for" == I ? F.htmlFor || "" : "style" == I ? F.style.cssText || "" : (h ? F.getAttribute(I) : F.getAttribute(I, 2)) || "" : ""
                }
                  , d = {
                    "*\x3d": function(F, I) {
                        return function(M) {
                            return 0 <= k(M, F).indexOf(I)
                        }
                    },
                    "^\x3d": function(F, I) {
                        return function(M) {
                            return 0 == k(M, F).indexOf(I)
                        }
                    },
                    "$\x3d": function(F, I) {
                        return function(M) {
                            M = " " + k(M, F);
                            var Q = M.lastIndexOf(I);
                            return -1 < Q && Q == M.length - I.length
                        }
                    },
                    "~\x3d": function(F, I) {
                        var M = " " + I + " ";
                        return function(Q) {
                            return 0 <= (" " + k(Q, F) + " ").indexOf(M)
                        }
                    },
                    "|\x3d": function(F, I) {
                        var M = I + "-";
                        return function(Q) {
                            Q = k(Q, F);
                            return Q == I || 0 == Q.indexOf(M)
                        }
                    },
                    "\x3d": function(F, I) {
                        return function(M) {
                            return k(M, F) == I
                        }
                    }
                };
                x = r.doc.documentElement;
                var u = !(x.nextElementSibling || "nextElementSibling"in x)
                  , y = u ? "nextSibling" : "nextElementSibling"
                  , n = u ? "previousSibling" : "previousElementSibling"
                  , v = u ? l : c
                  , D = function(F) {
                    for (; F = F[n]; )
                        if (v(F))
                            return !1;
                    return !0
                }
                  , O = function(F) {
                    for (; F = F[y]; )
                        if (v(F))
                            return !1;
                    return !0
                }
                  , z = function(F) {
                    var I = F.parentNode;
                    I = 7 != I.nodeType ? I : I.nextSibling;
                    var M = 0
                      , Q = I.children || I.childNodes
                      , aa = F._i || F.getAttribute("_i") || -1
                      , ba = I._l || ("undefined" !== typeof I.getAttribute ? I.getAttribute("_l") : -1);
                    if (!Q)
                        return -1;
                    Q = Q.length;
                    if (ba == Q && 0 <= aa && 0 <= ba)
                        return aa;
                    A("ie") && "undefined" !== typeof I.setAttribute ? I.setAttribute("_l", Q) : I._l = Q;
                    aa = -1;
                    for (I = I.firstElementChild || I.firstChild; I; I = I[y])
                        v(I) && (A("ie") ? I.setAttribute("_i", ++M) : I._i = ++M,
                        F === I && (aa = M));
                    return aa
                }
                  , w = function(F) {
                    return !(z(F) % 2)
                }
                  , E = function(F) {
                    return z(F) % 2
                }
                  , C = {
                    checked: function(F, I) {
                        return function(M) {
                            return !("checked"in M ? !M.checked : !M.selected)
                        }
                    },
                    disabled: function(F, I) {
                        return function(M) {
                            return M.disabled
                        }
                    },
                    enabled: function(F, I) {
                        return function(M) {
                            return !M.disabled
                        }
                    },
                    "first-child": function() {
                        return D
                    },
                    "last-child": function() {
                        return O
                    },
                    "only-child": function(F, I) {
                        return function(M) {
                            return D(M) && O(M)
                        }
                    },
                    empty: function(F, I) {
                        return function(M) {
                            var Q = M.childNodes;
                            for (M = M.childNodes.length - 1; 0 <= M; M--) {
                                var aa = Q[M].nodeType;
                                if (1 === aa || 3 == aa)
                                    return !1
                            }
                            return !0
                        }
                    },
                    contains: function(F, I) {
                        F = I.charAt(0);
                        if ('"' == F || "'" == F)
                            I = I.slice(1, -1);
                        return function(M) {
                            return 0 <= M.innerHTML.indexOf(I)
                        }
                    },
                    not: function(F, I) {
                        F = a(I)[0];
                        I = {
                            el: 1
                        };
                        "*" != F.tag && (I.tag = 1);
                        F.classes.length || (I.classes = 1);
                        var M = B(F, I);
                        return function(Q) {
                            return !M(Q)
                        }
                    },
                    "nth-child": function(F, I) {
                        F = parseInt;
                        if ("odd" == I)
                            return E;
                        if ("even" == I)
                            return w;
                        if (-1 != I.indexOf("n")) {
                            I = I.split("n", 2);
                            var M = I[0] ? "-" == I[0] ? -1 : F(I[0]) : 1
                              , Q = I[1] ? F(I[1]) : 0
                              , aa = 0
                              , ba = -1;
                            0 < M ? 0 > Q ? Q = Q % M && M + Q % M : 0 < Q && (Q >= M && (aa = Q - Q % M),
                            Q %= M) : 0 > M && (M *= -1,
                            0 < Q && (ba = Q,
                            Q %= M));
                            if (0 < M)
                                return function(Z) {
                                    Z = z(Z);
                                    return Z >= aa && (0 > ba || Z <= ba) && Z % M == Q
                                }
                                ;
                            I = Q
                        }
                        var la = F(I);
                        return function(Z) {
                            return z(Z) == la
                        }
                    }
                }
                  , H = 9 > A("ie") || 9 == A("ie") && A("quirks") ? function(F) {
                    var I = F.toLowerCase();
                    "class" == I && (F = "className");
                    return function(M) {
                        return h ? M.getAttribute(F) : M[F] || M[I]
                    }
                }
                : function(F) {
                    return function(I) {
                        return I && I.getAttribute && I.hasAttribute(F)
                    }
                }
                  , B = function(F, I) {
                    if (!F)
                        return c;
                    I = I || {};
                    var M = null;
                    "el"in I || (M = f(M, l));
                    "tag"in I || "*" != F.tag && (M = f(M, function(Q) {
                        return Q && (h ? Q.tagName : Q.tagName.toUpperCase()) == F.getTag()
                    }));
                    "classes"in I || p(F.classes, function(Q, aa, ba) {
                        var la = new RegExp("(?:^|\\s)" + Q + "(?:\\s|$)");
                        M = f(M, function(Z) {
                            return la.test(Z.className)
                        });
                        M.count = aa
                    });
                    "pseudos"in I || p(F.pseudos, function(Q) {
                        var aa = Q.name;
                        C[aa] && (M = f(M, C[aa](aa, Q.value)))
                    });
                    "attrs"in I || p(F.attrs, function(Q) {
                        var aa, ba = Q.attr;
                        Q.type && d[Q.type] ? aa = d[Q.type](ba, Q.matchFor) : ba.length && (aa = H(ba));
                        aa && (M = f(M, aa))
                    });
                    "id"in I || F.id && (M = f(M, function(Q) {
                        return !!Q && Q.id == F.id
                    }));
                    M || "default"in I || (M = c);
                    return M
                }
                  , K = function(F) {
                    return function(I, M, Q) {
                        for (; I = I[y]; )
                            if (!u || l(I)) {
                                Q && !ia(I, Q) || !F(I) || M.push(I);
                                break
                            }
                        return M
                    }
                }
                  , J = function(F) {
                    return function(I, M, Q) {
                        for (I = I[y]; I; ) {
                            if (v(I)) {
                                if (Q && !ia(I, Q))
                                    break;
                                F(I) && M.push(I)
                            }
                            I = I[y]
                        }
                        return M
                    }
                }
                  , R = function(F, I) {
                    var M = function(Q) {
                        var aa = [];
                        try {
                            aa = Array.prototype.slice.call(Q)
                        } catch (Z) {
                            for (var ba = 0, la = Q.length; ba < la; ba++)
                                aa.push(Q[ba])
                        }
                        return aa
                    };
                    F = F || c;
                    return function(Q, aa, ba) {
                        var la = 0
                          , Z = [];
                        Z = M(Q.children || Q.childNodes);
                        for (I && q.forEach(Z, function(ea) {
                            1 === ea.nodeType && (Z = Z.concat(M(ea.getElementsByTagName("*"))))
                        }); Q = Z[la++]; )
                            v(Q) && (!ba || ia(Q, ba)) && F(Q, la) && aa.push(Q);
                        return aa
                    }
                }
                  , V = function(F, I) {
                    for (F = F.parentNode; F && F != I; )
                        F = F.parentNode;
                    return !!F
                }
                  , Y = {}
                  , S = function(F) {
                    var I = Y[F.query];
                    if (I)
                        return I;
                    var M = F.infixOper;
                    M = M ? M.oper : "";
                    var Q = B(F, {
                        el: 1
                    })
                      , aa = "*" == F.tag
                      , ba = r.doc.getElementsByClassName;
                    if (M)
                        ba = {
                            el: 1
                        },
                        aa && (ba.tag = 1),
                        Q = B(F, ba),
                        "+" == M ? I = K(Q) : "~" == M ? I = J(Q) : "\x3e" == M && (I = R(Q));
                    else if (F.id)
                        Q = !F.loops && aa ? c : B(F, {
                            el: 1,
                            id: 1
                        }),
                        I = function(Z, ea) {
                            var pa = b.byId(F.id, Z.ownerDocument || Z);
                            Z.ownerDocument && !V(Z, Z.ownerDocument) && q.some(11 === Z.nodeType ? Z.childNodes : [Z], function(ma) {
                                ma = R(function(ua) {
                                    return ua.id === F.id
                                }, !0)(ma, []);
                                if (ma.length)
                                    return pa = ma[0],
                                    !1
                            });
                            if (pa && Q(pa) && (9 == Z.nodeType || V(pa, Z)))
                                return e(pa, ea)
                        }
                        ;
                    else if (ba && /\{\s*\[native code\]\s*\}/.test(String(ba)) && F.classes.length && !t) {
                        Q = B(F, {
                            el: 1,
                            classes: 1,
                            id: 1
                        });
                        var la = F.classes.join(" ");
                        I = function(Z, ea, pa) {
                            ea = e(0, ea);
                            for (var ma, ua = 0, sa = Z.getElementsByClassName(la); ma = sa[ua++]; )
                                Q(ma, Z) && ia(ma, pa) && ea.push(ma);
                            return ea
                        }
                    } else
                        aa || F.loops ? (Q = B(F, {
                            el: 1,
                            tag: 1,
                            id: 1
                        }),
                        I = function(Z, ea, pa) {
                            ea = e(0, ea);
                            for (var ma, ua = 0, sa = (ma = F.getTag()) ? Z.getElementsByTagName(ma) : []; ma = sa[ua++]; )
                                Q(ma, Z) && ia(ma, pa) && ea.push(ma);
                            return ea
                        }
                        ) : I = function(Z, ea, pa) {
                            ea = e(0, ea);
                            var ma = 0
                              , ua = F.getTag();
                            for (ua = ua ? Z.getElementsByTagName(ua) : []; Z = ua[ma++]; )
                                ia(Z, pa) && ea.push(Z);
                            return ea
                        }
                        ;
                    return Y[F.query] = I
                }
                  , U = {}
                  , L = {}
                  , T = function(F) {
                    var I = a(m(F));
                    if (1 == I.length) {
                        var M = S(I[0]);
                        return function(Q) {
                            if (Q = M(Q, []))
                                Q.nozip = !0;
                            return Q
                        }
                    }
                    return function(Q) {
                        Q = e(Q);
                        for (var aa, ba, la = I.length, Z, ea, pa = 0; pa < la; pa++) {
                            ea = [];
                            aa = I[pa];
                            ba = Q.length - 1;
                            0 < ba && (Z = {},
                            ea.nozip = !0);
                            ba = S(aa);
                            for (var ma = 0; aa = Q[ma]; ma++)
                                ba(aa, ea, Z);
                            if (!ea.length)
                                break;
                            Q = ea
                        }
                        return ea
                    }
                }
                  , da = A("ie") ? "commentStrip" : "nozip"
                  , ha = !!r.doc.querySelectorAll
                  , ca = /\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g
                  , qa = function(F, I, M, Q) {
                    return M ? (I ? I + " " : "") + M + (Q ? " " + Q : "") : F
                }
                  , ta = /([^[]*)([^\]]*])?/g
                  , oa = function(F, I, M) {
                    return I.replace(ca, qa) + (M || "")
                }
                  , va = function(F, I) {
                    F = F.replace(ta, oa);
                    if (ha) {
                        var M = L[F];
                        if (M && !I)
                            return M
                    }
                    if (M = U[F])
                        return M;
                    M = F.charAt(0);
                    var Q = -1 == F.indexOf(" ");
                    0 <= F.indexOf("#") && Q && (I = !0);
                    if (!ha || I || -1 != "\x3e~+".indexOf(M) || A("ie") && -1 != F.indexOf(":") || t && 0 <= F.indexOf(".") || -1 != F.indexOf(":contains") || -1 != F.indexOf(":checked") || -1 != F.indexOf("|\x3d")) {
                        var aa = F.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);
                        return U[F] = 2 > aa.length ? T(F) : function(la) {
                            for (var Z = 0, ea = [], pa; pa = aa[Z++]; )
                                ea = ea.concat(T(pa)(la));
                            return ea
                        }
                    }
                    var ba = 0 <= "\x3e~+".indexOf(F.charAt(F.length - 1)) ? F + " *" : F;
                    return L[F] = function(la) {
                        if (9 == la.nodeType || Q)
                            try {
                                var Z = la.querySelectorAll(ba);
                                Z[da] = !0;
                                return Z
                            } catch (ea) {}
                        return va(F, !0)(la)
                    }
                }
                  , na = 0
                  , ra = A("ie") ? function(F) {
                    return h ? F.getAttribute("_uid") || F.setAttribute("_uid", ++na) || na : F.uniqueID
                }
                : function(F) {
                    return F._uid || (F._uid = ++na)
                }
                  , ia = function(F, I) {
                    if (!I)
                        return 1;
                    F = ra(F);
                    return I[F] ? 0 : I[F] = 1
                }
                  , wa = function(F) {
                    if (F && F.nozip)
                        return F;
                    if (!F || !F.length)
                        return [];
                    if (2 > F.length)
                        return [F[0]];
                    var I = [];
                    na++;
                    var M, Q;
                    if (A("ie") && h) {
                        var aa = na + "";
                        for (M = 0; M < F.length; M++)
                            (Q = F[M]) && Q.getAttribute("_zipIdx") != aa && (I.push(Q),
                            Q.setAttribute("_zipIdx", aa))
                    } else if (A("ie") && F.commentStrip)
                        try {
                            for (M = 0; M < F.length; M++)
                                (Q = F[M]) && l(Q) && I.push(Q)
                        } catch (ba) {}
                    else
                        for (M = 0; M < F.length; M++)
                            (Q = F[M]) && Q._zipIdx != na && (I.push(Q),
                            Q._zipIdx = na);
                    return I
                }
                  , ya = function(F, I) {
                    I = I || r.doc;
                    h = "div" === (I.ownerDocument || I).createElement("div").tagName;
                    return (F = va(F)(I)) && F.nozip ? F : wa(F)
                };
                ya.filter = function(F, I, M) {
                    var Q = []
                      , aa = a(I);
                    aa = 1 != aa.length || /[^\w#\.]/.test(I) ? function(Z) {
                        return -1 != q.indexOf(ya(I, b.byId(M)), Z)
                    }
                    : B(aa[0]);
                    for (var ba = 0, la; la = F[ba]; ba++)
                        aa(la) && Q.push(la);
                    return Q
                }
                ;
                return ya
            })
        },
        "dojo/NodeList-dom": function() {
            define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "), function(b, A, q, x, r, m, p, t, h) {
                function c(u) {
                    return function(y, n, v) {
                        return 2 == arguments.length ? u["string" == typeof n ? "get" : "set"](y, n) : u.set(y, n, v)
                    }
                }
                var a = function(u) {
                    return 1 == u.length && "string" == typeof u[0]
                }
                  , f = function(u) {
                    var y = u.parentNode;
                    y && y.removeChild(u)
                }
                  , e = A.NodeList
                  , l = e._adaptWithCondition
                  , k = e._adaptAsForEach
                  , d = e._adaptAsMap;
                x.extend(e, {
                    _normalize: function(u, y) {
                        var n = !0 === u.parse;
                        if ("string" == typeof u.template) {
                            var v = u.templateFunc || b.string && b.string.substitute;
                            u = v ? v(u.template, u) : u
                        }
                        v = typeof u;
                        "string" == v || "number" == v ? (u = m.toDom(u, y && y.ownerDocument),
                        u = 11 == u.nodeType ? x._toArray(u.childNodes) : [u]) : x.isArrayLike(u) ? x.isArray(u) || (u = x._toArray(u)) : u = [u];
                        n && (u._runParse = !0);
                        return u
                    },
                    _cloneNode: function(u) {
                        return u.cloneNode(!0)
                    },
                    _place: function(u, y, n, v) {
                        if (1 == y.nodeType || "only" != n)
                            for (var D, O = u.length, z = O - 1; 0 <= z; z--) {
                                var w = v ? this._cloneNode(u[z]) : u[z];
                                if (u._runParse && b.parser && b.parser.parse)
                                    for (D || (D = y.ownerDocument.createElement("div")),
                                    D.appendChild(w),
                                    b.parser.parse(D),
                                    w = D.firstChild; D.firstChild; )
                                        D.removeChild(D.firstChild);
                                z == O - 1 ? m.place(w, y, n) : y.parentNode.insertBefore(w, y);
                                y = w
                            }
                    },
                    position: d(p.position),
                    attr: l(c(t), a),
                    style: l(c(h), a),
                    addClass: k(r.add),
                    removeClass: k(r.remove),
                    toggleClass: k(r.toggle),
                    replaceClass: k(r.replace),
                    empty: k(m.empty),
                    removeAttr: k(t.remove),
                    marginBox: d(p.getMarginBox),
                    place: function(u, y) {
                        var n = A(u)[0];
                        return this.forEach(function(v) {
                            m.place(v, n, y)
                        })
                    },
                    orphan: function(u) {
                        return (u ? A._filterResult(this, u) : this).forEach(f)
                    },
                    adopt: function(u, y) {
                        return A(u).place(this[0], y)._stash(this)
                    },
                    query: function(u) {
                        if (!u)
                            return this;
                        var y = new e;
                        this.map(function(n) {
                            A(u, n).forEach(function(v) {
                                void 0 !== v && y.push(v)
                            })
                        });
                        return y._stash(this)
                    },
                    filter: function(u) {
                        var y = arguments
                          , n = this
                          , v = 0;
                        if ("string" == typeof u) {
                            n = A._filterResult(this, y[0]);
                            if (1 == y.length)
                                return n._stash(this);
                            v = 1
                        }
                        return this._wrap(q.filter(n, y[v], y[v + 1]), this)
                    },
                    addContent: function(u, y) {
                        u = this._normalize(u, this[0]);
                        for (var n = 0, v; v = this[n]; n++)
                            u.length ? this._place(u, v, y, 0 < n) : m.empty(v);
                        return this
                    }
                });
                return e
            })
        },
        "dojo/_base/fx": function() {
            define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "), function(b, A, q, x, r, m, p, t, h) {
                var c = q.mixin
                  , a = {}
                  , f = a._Line = function(n, v) {
                    this.start = n;
                    this.end = v
                }
                ;
                f.prototype.getValue = function(n) {
                    return (this.end - this.start) * n + this.start
                }
                ;
                var e = a.Animation = function(n) {
                    c(this, n);
                    q.isArray(this.curve) && (this.curve = new f(this.curve[0],this.curve[1]))
                }
                ;
                e.prototype = new x;
                q.extend(e, {
                    duration: 350,
                    repeat: 0,
                    rate: 20,
                    _percent: 0,
                    _startRepeatCount: 0,
                    _getStep: function() {
                        var n = this._percent
                          , v = this.easing;
                        return v ? v(n) : n
                    },
                    _fire: function(n, v) {
                        v = v || [];
                        if (this[n])
                            if (A.debugAtAllCosts)
                                this[n].apply(this, v);
                            else
                                try {
                                    this[n].apply(this, v)
                                } catch (D) {
                                    console.error("exception in animation handler for:", n),
                                    console.error(D)
                                }
                        return this
                    },
                    play: function(n, v) {
                        this._delayTimer && this._clearTimer();
                        if (v)
                            this._stopTimer(),
                            this._active = this._paused = !1,
                            this._percent = 0;
                        else if (this._active && !this._paused)
                            return this;
                        this._fire("beforeBegin", [this.node]);
                        n = n || this.delay;
                        v = q.hitch(this, "_play", v);
                        if (0 < n)
                            return this._delayTimer = setTimeout(v, n),
                            this;
                        v();
                        return this
                    },
                    _play: function(n) {
                        this._delayTimer && this._clearTimer();
                        this._startTime = (new Date).valueOf();
                        this._paused && (this._startTime -= this.duration * this._percent);
                        this._active = !0;
                        this._paused = !1;
                        n = this.curve.getValue(this._getStep());
                        this._percent || (this._startRepeatCount || (this._startRepeatCount = this.repeat),
                        this._fire("onBegin", [n]));
                        this._fire("onPlay", [n]);
                        this._cycle();
                        return this
                    },
                    pause: function() {
                        this._delayTimer && this._clearTimer();
                        this._stopTimer();
                        if (!this._active)
                            return this;
                        this._paused = !0;
                        this._fire("onPause", [this.curve.getValue(this._getStep())]);
                        return this
                    },
                    gotoPercent: function(n, v) {
                        this._stopTimer();
                        this._active = this._paused = !0;
                        this._percent = n;
                        v && this.play();
                        return this
                    },
                    stop: function(n) {
                        this._delayTimer && this._clearTimer();
                        if (!this._timer)
                            return this;
                        this._stopTimer();
                        n && (this._percent = 1);
                        this._fire("onStop", [this.curve.getValue(this._getStep())]);
                        this._active = this._paused = !1;
                        return this
                    },
                    destroy: function() {
                        this.stop()
                    },
                    status: function() {
                        return this._active ? this._paused ? "paused" : "playing" : "stopped"
                    },
                    _cycle: function() {
                        if (this._active) {
                            var n = (new Date).valueOf();
                            n = 0 === this.duration ? 1 : (n - this._startTime) / this.duration;
                            1 <= n && (n = 1);
                            this._percent = n;
                            this.easing && (n = this.easing(n));
                            this._fire("onAnimate", [this.curve.getValue(n)]);
                            1 > this._percent ? this._startTimer() : (this._active = !1,
                            0 < this.repeat ? (this.repeat--,
                            this.play(null, !0)) : -1 == this.repeat ? this.play(null, !0) : this._startRepeatCount && (this.repeat = this._startRepeatCount,
                            this._startRepeatCount = 0),
                            this._percent = 0,
                            this._fire("onEnd", [this.node]),
                            !this.repeat && this._stopTimer())
                        }
                        return this
                    },
                    _clearTimer: function() {
                        clearTimeout(this._delayTimer);
                        delete this._delayTimer
                    }
                });
                var l = 0
                  , k = null
                  , d = {
                    run: function() {}
                };
                q.extend(e, {
                    _startTimer: function() {
                        this._timer || (this._timer = m.after(d, "run", q.hitch(this, "_cycle"), !0),
                        l++);
                        k || (k = setInterval(q.hitch(d, "run"), this.rate))
                    },
                    _stopTimer: function() {
                        this._timer && (this._timer.remove(),
                        this._timer = null,
                        l--);
                        0 >= l && (clearInterval(k),
                        k = null,
                        l = 0)
                    }
                });
                var u = p("ie") ? function(n) {
                    var v = n.style;
                    v.width.length || "auto" != h.get(n, "width") || (v.width = "auto")
                }
                : function() {}
                ;
                a._fade = function(n) {
                    n.node = t.byId(n.node);
                    var v = c({
                        properties: {}
                    }, n);
                    n = v.properties.opacity = {};
                    n.start = "start"in v ? v.start : function() {
                        return +h.get(v.node, "opacity") || 0
                    }
                    ;
                    n.end = v.end;
                    n = a.animateProperty(v);
                    m.after(n, "beforeBegin", q.partial(u, v.node), !0);
                    return n
                }
                ;
                a.fadeIn = function(n) {
                    return a._fade(c({
                        end: 1
                    }, n))
                }
                ;
                a.fadeOut = function(n) {
                    return a._fade(c({
                        end: 0
                    }, n))
                }
                ;
                a._defaultEasing = function(n) {
                    return .5 + Math.sin((n + 1.5) * Math.PI) / 2
                }
                ;
                var y = function(n) {
                    this._properties = n;
                    for (var v in n) {
                        var D = n[v];
                        D.start instanceof r && (D.tempColor = new r)
                    }
                };
                y.prototype.getValue = function(n) {
                    var v = {}, D;
                    for (D in this._properties) {
                        var O = this._properties[D]
                          , z = O.start;
                        z instanceof r ? v[D] = r.blendColors(z, O.end, n, O.tempColor).toCss() : q.isArray(z) || (v[D] = (O.end - z) * n + z + ("opacity" != D ? O.units || "px" : 0))
                    }
                    return v
                }
                ;
                a.animateProperty = function(n) {
                    var v = n.node = t.byId(n.node);
                    n.easing || (n.easing = b._defaultEasing);
                    n = new e(n);
                    m.after(n, "beforeBegin", q.hitch(n, function() {
                        var D = {}, O;
                        for (O in this.properties) {
                            if ("width" == O || "height" == O)
                                this.node.display = "block";
                            var z = this.properties[O];
                            q.isFunction(z) && (z = z(v));
                            z = D[O] = c({}, q.isObject(z) ? z : {
                                end: z
                            });
                            q.isFunction(z.start) && (z.start = z.start(v));
                            q.isFunction(z.end) && (z.end = z.end(v));
                            var w = 0 <= O.toLowerCase().indexOf("color")
                              , E = function(C, H) {
                                var B = {
                                    height: C.offsetHeight,
                                    width: C.offsetWidth
                                }[H];
                                if (void 0 !== B)
                                    return B;
                                B = h.get(C, H);
                                return "opacity" == H ? +B : w ? B : parseFloat(B)
                            };
                            "end"in z ? "start"in z || (z.start = E(v, O)) : z.end = E(v, O);
                            w ? (z.start = new r(z.start),
                            z.end = new r(z.end)) : z.start = "opacity" == O ? +z.start : parseFloat(z.start)
                        }
                        this.curve = new y(D)
                    }), !0);
                    m.after(n, "onAnimate", q.hitch(h, "set", n.node), !0);
                    return n
                }
                ;
                a.anim = function(n, v, D, O, z, w) {
                    return a.animateProperty({
                        node: n,
                        duration: D || e.prototype.duration,
                        properties: v,
                        easing: O,
                        onEnd: z
                    }).play(w || 0)
                }
                ;
                c(b, a);
                b._Animation = e;
                return a
            })
        },
        "*noref": 1
    }
});
(function() {
    var b = this.require;
    b({
        cache: {}
    });
    !b.async && b(["dojo"]);
    b.boot && b.apply(null, b.boot)
}
)();
// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.37/esri/copyright.txt for details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.7.0 - Wed Jul 14 2021 13:34:33 GMT-0400 (Eastern Daylight Time)
 Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
*/
require({
    cache: {
        "dojo/fx/Toggler": function() {
            define(["../_base/lang", "../_base/declare", "../_base/fx", "../aspect"], function(C, y, b, w) {
                return y("dojo.fx.Toggler", null, {
                    node: null,
                    showFunc: b.fadeIn,
                    hideFunc: b.fadeOut,
                    showDuration: 200,
                    hideDuration: 200,
                    constructor: function(m) {
                        C.mixin(this, m);
                        this.node = m.node;
                        this._showArgs = C.mixin({}, m);
                        this._showArgs.node = this.node;
                        this._showArgs.duration = this.showDuration;
                        this.showAnim = this.showFunc(this._showArgs);
                        this._hideArgs = C.mixin({}, m);
                        this._hideArgs.node = this.node;
                        this._hideArgs.duration = this.hideDuration;
                        this.hideAnim = this.hideFunc(this._hideArgs);
                        w.after(this.showAnim, "beforeBegin", C.hitch(this.hideAnim, "stop", !0), !0);
                        w.after(this.hideAnim, "beforeBegin", C.hitch(this.showAnim, "stop", !0), !0)
                    },
                    show: function(m) {
                        return this.showAnim.play(m || 0)
                    },
                    hide: function(m) {
                        return this.hideAnim.play(m || 0)
                    }
                })
            })
        },
        "dijit/_base": function() {
            define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "), function(C) {
                return C._base
            })
        },
        "dijit/main": function() {
            define(["dojo/_base/kernel"], function(C) {
                return C.dijit
            })
        },
        "dijit/a11y": function() {
            define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "), function(C, y, b, w, m, l, k) {
                var h = {
                    _isElementShown: function(f) {
                        var d = w.get(f);
                        return "hidden" != d.visibility && "collapsed" != d.visibility && "none" != d.display && "hidden" != b.get(f, "type")
                    },
                    hasDefaultTabStop: function(f) {
                        switch (f.nodeName.toLowerCase()) {
                        case "a":
                            return b.has(f, "href");
                        case "area":
                        case "button":
                        case "input":
                        case "object":
                        case "select":
                        case "textarea":
                            return !0;
                        case "iframe":
                            try {
                                var d = f.contentDocument;
                                if ("designMode"in d && "on" == d.designMode)
                                    return !0;
                                var a = d.body
                            } catch (c) {
                                try {
                                    a = f.contentWindow.document.body
                                } catch (e) {
                                    return !1
                                }
                            }
                            return a && ("true" == a.contentEditable || a.firstChild && "true" == a.firstChild.contentEditable);
                        default:
                            return "true" == f.contentEditable
                        }
                    },
                    effectiveTabIndex: function(f) {
                        if (!b.get(f, "disabled"))
                            return b.has(f, "tabIndex") ? +b.get(f, "tabIndex") : h.hasDefaultTabStop(f) ? 0 : void 0
                    },
                    isTabNavigable: function(f) {
                        return 0 <= h.effectiveTabIndex(f)
                    },
                    isFocusable: function(f) {
                        return -1 <= h.effectiveTabIndex(f)
                    },
                    _getTabNavigable: function(f) {
                        function d(p) {
                            return p && "input" == p.tagName.toLowerCase() && p.type && "radio" == p.type.toLowerCase() && p.name && p.name.toLowerCase()
                        }
                        function a(p) {
                            return x[d(p)] || p
                        }
                        var c, e, n, t, g, q, x = {}, v = h._isElementShown, z = h.effectiveTabIndex, u = function(p) {
                            for (p = p.firstChild; p; p = p.nextSibling)
                                if (!(1 != p.nodeType || 9 >= l("ie") && "HTML" !== p.scopeName) && v(p)) {
                                    var r = z(p);
                                    if (0 <= r) {
                                        if (0 == r)
                                            c || (c = p),
                                            e = p;
                                        else if (0 < r) {
                                            if (!n || r < t)
                                                t = r,
                                                n = p;
                                            if (!g || r >= q)
                                                q = r,
                                                g = p
                                        }
                                        r = d(p);
                                        b.get(p, "checked") && r && (x[r] = p)
                                    }
                                    "SELECT" != p.nodeName.toUpperCase() && u(p)
                                }
                        };
                        v(f) && u(f);
                        return {
                            first: a(c),
                            last: a(e),
                            lowest: a(n),
                            highest: a(g)
                        }
                    },
                    getFirstInTabbingOrder: function(f, d) {
                        f = h._getTabNavigable(y.byId(f, d));
                        return f.lowest ? f.lowest : f.first
                    },
                    getLastInTabbingOrder: function(f, d) {
                        f = h._getTabNavigable(y.byId(f, d));
                        return f.last ? f.last : f.highest
                    }
                };
                m.mixin(k, h);
                return h
            })
        },
        "dijit/WidgetSet": function() {
            define(["dojo/_base/array", "dojo/_base/declare", "dojo/_base/kernel", "./registry"], function(C, y, b, w) {
                var m = y("dijit.WidgetSet", null, {
                    constructor: function() {
                        this._hash = {};
                        this.length = 0
                    },
                    add: function(l) {
                        if (this._hash[l.id])
                            throw Error("Tried to register widget with id\x3d\x3d" + l.id + " but that id is already registered");
                        this._hash[l.id] = l;
                        this.length++
                    },
                    remove: function(l) {
                        this._hash[l] && (delete this._hash[l],
                        this.length--)
                    },
                    forEach: function(l, k) {
                        k = k || b.global;
                        var h = 0, f;
                        for (f in this._hash)
                            l.call(k, this._hash[f], h++, this._hash);
                        return this
                    },
                    filter: function(l, k) {
                        k = k || b.global;
                        var h = new m, f = 0, d;
                        for (d in this._hash) {
                            var a = this._hash[d];
                            l.call(k, a, f++, this._hash) && h.add(a)
                        }
                        return h
                    },
                    byId: function(l) {
                        return this._hash[l]
                    },
                    byClass: function(l) {
                        var k = new m, h;
                        for (h in this._hash) {
                            var f = this._hash[h];
                            f.declaredClass == l && k.add(f)
                        }
                        return k
                    },
                    toArray: function() {
                        var l = [], k;
                        for (k in this._hash)
                            l.push(this._hash[k]);
                        return l
                    },
                    map: function(l, k) {
                        return C.map(this.toArray(), l, k)
                    },
                    every: function(l, k) {
                        k = k || b.global;
                        var h = 0, f;
                        for (f in this._hash)
                            if (!l.call(k, this._hash[f], h++, this._hash))
                                return !1;
                        return !0
                    },
                    some: function(l, k) {
                        k = k || b.global;
                        var h = 0, f;
                        for (f in this._hash)
                            if (l.call(k, this._hash[f], h++, this._hash))
                                return !0;
                        return !1
                    }
                });
                C.forEach("forEach filter byClass map every some".split(" "), function(l) {
                    w[l] = m.prototype[l]
                });
                return m
            })
        },
        "dijit/registry": function() {
            define(["dojo/_base/array", "dojo/_base/window", "./main"], function(C, y, b) {
                var w = {}
                  , m = {}
                  , l = {
                    length: 0,
                    add: function(k) {
                        if (m[k.id])
                            throw Error("Tried to register widget with id\x3d\x3d" + k.id + " but that id is already registered");
                        m[k.id] = k;
                        this.length++
                    },
                    remove: function(k) {
                        m[k] && (delete m[k],
                        this.length--)
                    },
                    byId: function(k) {
                        return "string" == typeof k ? m[k] : k
                    },
                    byNode: function(k) {
                        return m[k.getAttribute("widgetId")]
                    },
                    toArray: function() {
                        var k = [], h;
                        for (h in m)
                            k.push(m[h]);
                        return k
                    },
                    getUniqueId: function(k) {
                        do
                            var h = k + "_" + (k in w ? ++w[k] : w[k] = 0);
                        while (m[h]);
                        return "dijit" == b._scopeName ? h : b._scopeName + "_" + h
                    },
                    findWidgets: function(k, h) {
                        function f(a) {
                            for (a = a.firstChild; a; a = a.nextSibling)
                                if (1 == a.nodeType) {
                                    var c = a.getAttribute("widgetId");
                                    c ? (c = m[c]) && d.push(c) : a !== h && f(a)
                                }
                        }
                        var d = [];
                        f(k);
                        return d
                    },
                    _destroyAll: function() {
                        b._curFocus = null;
                        b._prevFocus = null;
                        b._activeStack = [];
                        C.forEach(l.findWidgets(y.body()), function(k) {
                            k._destroyed || (k.destroyRecursive ? k.destroyRecursive() : k.destroy && k.destroy())
                        })
                    },
                    getEnclosingWidget: function(k) {
                        for (; k; ) {
                            var h = 1 == k.nodeType && k.getAttribute("widgetId");
                            if (h)
                                return m[h];
                            k = k.parentNode
                        }
                        return null
                    },
                    _hash: m
                };
                return b.registry = l
            })
        },
        "dijit/_base/focus": function() {
            define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "), function(C, y, b, w, m, l, k, h) {
                l.focus = function(f) {
                    if (f) {
                        var d = "node"in f ? f.node : f
                          , a = f.bookmark;
                        f = f.openedForWindow;
                        var c = a ? a.isCollapsed : !1;
                        if (d) {
                            var e = "iframe" == d.tagName.toLowerCase() ? d.contentWindow : d;
                            if (e && e.focus)
                                try {
                                    e.focus()
                                } catch (n) {}
                            l._onFocusNode(d)
                        }
                        if (a && m.withGlobal(f || m.global, h.isCollapsed) && !c) {
                            f && f.focus();
                            try {
                                m.withGlobal(f || m.global, h.moveToBookmark, null, [a])
                            } catch (n) {}
                        }
                    }
                }
                ;
                l.watch("curNode", function(f, d, a) {
                    h._curFocus = a;
                    h._prevFocus = d;
                    a && w.publish("focusNode", a)
                });
                l.watch("activeStack", function(f, d, a) {
                    h._activeStack = a
                });
                l.on("widget-blur", function(f, d) {
                    w.publish("widgetBlur", f, d)
                });
                l.on("widget-focus", function(f, d) {
                    w.publish("widgetFocus", f, d)
                });
                b.mixin(h, {
                    _curFocus: null,
                    _prevFocus: null,
                    isCollapsed: function() {
                        return h.getBookmark().isCollapsed
                    },
                    getBookmark: function() {
                        return (m.global == window ? k : new k.SelectionManager(m.global)).getBookmark()
                    },
                    moveToBookmark: function(f) {
                        return (m.global == window ? k : new k.SelectionManager(m.global)).moveToBookmark(f)
                    },
                    getFocus: function(f, d) {
                        f = !l.curNode || f && y.isDescendant(l.curNode, f.domNode) ? h._prevFocus : l.curNode;
                        return {
                            node: f,
                            bookmark: f && f == l.curNode && m.withGlobal(d || m.global, h.getBookmark),
                            openedForWindow: d
                        }
                    },
                    _activeStack: [],
                    registerIframe: function(f) {
                        return l.registerIframe(f)
                    },
                    unregisterIframe: function(f) {
                        f && f.remove()
                    },
                    registerWin: function(f, d) {
                        return l.registerWin(f, d)
                    },
                    unregisterWin: function(f) {
                        f && f.remove()
                    }
                });
                return h
            })
        },
        "dijit/focus": function() {
            define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q) {
                var x, v, z = new (y([c, k], {
                    curNode: null,
                    activeStack: [],
                    constructor: function() {
                        var p = h.hitch(this, function(r) {
                            b.isDescendant(this.curNode, r) && this.set("curNode", null);
                            b.isDescendant(this.prevNode, r) && this.set("prevNode", null)
                        });
                        C.before(l, "empty", p);
                        C.before(l, "destroy", p)
                    },
                    registerIframe: function(p) {
                        return this.registerWin(p.contentWindow, p)
                    },
                    registerWin: function(p, r) {
                        var B = this
                          , D = p.document && p.document.body;
                        if (D) {
                            var G = a("pointer-events") ? "pointerdown" : a("MSPointer") ? "MSPointerDown" : a("touch-events") ? "mousedown, touchstart" : "mousedown"
                              , A = f(p.document, G, function(J) {
                                J && J.target && null == J.target.parentNode || B._onTouchNode(r || J.target, "mouse")
                            })
                              , E = f(D, "focusin", function(J) {
                                if (J.target.tagName) {
                                    var O = J.target.tagName.toLowerCase();
                                    "#document" != O && "body" != O && (t.isFocusable(J.target) ? B._onFocusNode(r || J.target) : B._onTouchNode(r || J.target))
                                }
                            })
                              , H = f(D, "focusout", function(J) {
                                B._onBlurNode(r || J.target)
                            });
                            return {
                                remove: function() {
                                    A.remove();
                                    E.remove();
                                    H.remove();
                                    D = A = E = H = null
                                }
                            }
                        }
                    },
                    _onBlurNode: function(p) {
                        p = (new Date).getTime();
                        p < x + 100 || (this._clearFocusTimer && clearTimeout(this._clearFocusTimer),
                        this._clearFocusTimer = setTimeout(h.hitch(this, function() {
                            this.set("prevNode", this.curNode);
                            this.set("curNode", null)
                        }), 0),
                        this._clearActiveWidgetsTimer && clearTimeout(this._clearActiveWidgetsTimer),
                        p < v + 100 || (this._clearActiveWidgetsTimer = setTimeout(h.hitch(this, function() {
                            delete this._clearActiveWidgetsTimer;
                            this._setStack([])
                        }), 0)))
                    },
                    _onTouchNode: function(p, r) {
                        v = (new Date).getTime();
                        this._clearActiveWidgetsTimer && (clearTimeout(this._clearActiveWidgetsTimer),
                        delete this._clearActiveWidgetsTimer);
                        m.contains(p, "dijitPopup") && (p = p.firstChild);
                        var B = [];
                        try {
                            for (; p; ) {
                                var D = w.get(p, "dijitPopupParent");
                                if (D)
                                    p = g.byId(D).domNode;
                                else if (p.tagName && "body" == p.tagName.toLowerCase()) {
                                    if (p === e.body())
                                        break;
                                    p = n.get(p.ownerDocument).frameElement
                                } else {
                                    var G = p.getAttribute && p.getAttribute("widgetId")
                                      , A = G && g.byId(G);
                                    !A || "mouse" == r && A.get("disabled") || B.unshift(G);
                                    p = p.parentNode
                                }
                            }
                        } catch (E) {}
                        this._setStack(B, r)
                    },
                    _onFocusNode: function(p) {
                        p && 9 != p.nodeType && (x = (new Date).getTime(),
                        this._clearFocusTimer && (clearTimeout(this._clearFocusTimer),
                        delete this._clearFocusTimer),
                        this._onTouchNode(p),
                        p != this.curNode && (this.set("prevNode", this.curNode),
                        this.set("curNode", p)))
                    },
                    _setStack: function(p, r) {
                        var B = this.activeStack
                          , D = B.length - 1
                          , G = p.length - 1;
                        if (p[G] != B[D]) {
                            this.set("activeStack", p);
                            var A;
                            for (A = D; 0 <= A && B[A] != p[A]; A--)
                                if (D = g.byId(B[A]))
                                    D._hasBeenBlurred = !0,
                                    D.set("focused", !1),
                                    D._focusManager == this && D._onBlur(r),
                                    this.emit("widget-blur", D, r);
                            for (A++; A <= G; A++)
                                if (D = g.byId(p[A]))
                                    D.set("focused", !0),
                                    D._focusManager == this && D._onFocus(r),
                                    this.emit("widget-focus", D, r)
                        }
                    },
                    focus: function(p) {
                        if (p)
                            try {
                                p.focus()
                            } catch (r) {}
                    }
                }));
                d(function() {
                    var p = z.registerWin(n.get(document));
                    a("ie") && f(window, "unload", function() {
                        p && (p.remove(),
                        p = null)
                    })
                });
                q.focus = function(p) {
                    z.focus(p)
                }
                ;
                for (var u in z)
                    /^_/.test(u) || (q.focus[u] = "function" == typeof z[u] ? h.hitch(z, u) : z[u]);
                z.watch(function(p, r, B) {
                    q.focus[p] = B
                });
                return z
            })
        },
        "dojo/Stateful": function() {
            define(["./_base/declare", "./_base/lang", "./_base/array", "./when"], function(C, y, b, w) {
                return C("dojo.Stateful", null, {
                    _attrPairNames: {},
                    _getAttrNames: function(m) {
                        var l = this._attrPairNames;
                        return l[m] ? l[m] : l[m] = {
                            s: "_" + m + "Setter",
                            g: "_" + m + "Getter"
                        }
                    },
                    postscript: function(m) {
                        m && this.set(m)
                    },
                    _get: function(m, l) {
                        return "function" === typeof this[l.g] ? this[l.g]() : this[m]
                    },
                    get: function(m) {
                        return this._get(m, this._getAttrNames(m))
                    },
                    set: function(m, l) {
                        if ("object" === typeof m) {
                            for (var k in m)
                                m.hasOwnProperty(k) && "_watchCallbacks" != k && this.set(k, m[k]);
                            return this
                        }
                        k = this._getAttrNames(m);
                        var h = this._get(m, k);
                        k = this[k.s];
                        var f;
                        "function" === typeof k ? f = k.apply(this, Array.prototype.slice.call(arguments, 1)) : this[m] = l;
                        if (this._watchCallbacks) {
                            var d = this;
                            w(f, function() {
                                d._watchCallbacks(m, h, l)
                            })
                        }
                        return this
                    },
                    _changeAttrValue: function(m, l) {
                        var k = this.get(m);
                        this[m] = l;
                        this._watchCallbacks && this._watchCallbacks(m, k, l);
                        return this
                    },
                    watch: function(m, l) {
                        var k = this._watchCallbacks;
                        if (!k) {
                            var h = this;
                            k = this._watchCallbacks = function(d, a, c, e) {
                                var n = function(t) {
                                    if (t) {
                                        t = t.slice();
                                        for (var g = 0, q = t.length; g < q; g++)
                                            t[g].call(h, d, a, c)
                                    }
                                };
                                n(k["_" + d]);
                                e || n(k["*"])
                            }
                        }
                        l || "function" !== typeof m ? m = "_" + m : (l = m,
                        m = "*");
                        var f = k[m];
                        "object" !== typeof f && (f = k[m] = []);
                        f.push(l);
                        m = {};
                        m.unwatch = m.remove = function() {
                            var d = b.indexOf(f, l);
                            -1 < d && f.splice(d, 1)
                        }
                        ;
                        return m
                    }
                })
            })
        },
        "dojo/window": function() {
            define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "), function(C, y, b, w, m, l, k) {
                y.add("rtl-adjust-position-for-verticalScrollBar", function(f, d) {
                    f = b.body(d);
                    d = k.create("div", {
                        style: {
                            overflow: "scroll",
                            overflowX: "visible",
                            direction: "rtl",
                            visibility: "hidden",
                            position: "absolute",
                            left: "0",
                            top: "0",
                            width: "64px",
                            height: "64px"
                        }
                    }, f, "last");
                    var a = k.create("div", {
                        style: {
                            overflow: "hidden",
                            direction: "ltr"
                        }
                    }, d, "last")
                      , c = 0 != m.position(a).x;
                    d.removeChild(a);
                    f.removeChild(d);
                    return c
                });
                y.add("position-fixed-support", function(f, d) {
                    f = b.body(d);
                    d = k.create("span", {
                        style: {
                            visibility: "hidden",
                            position: "fixed",
                            left: "1px",
                            top: "1px"
                        }
                    }, f, "last");
                    var a = k.create("span", {
                        style: {
                            position: "fixed",
                            left: "0",
                            top: "0"
                        }
                    }, d, "last")
                      , c = m.position(a).x != m.position(d).x;
                    d.removeChild(a);
                    f.removeChild(d);
                    return c
                });
                var h = {
                    getBox: function(f) {
                        f = f || b.doc;
                        var d = "BackCompat" == f.compatMode ? b.body(f) : f.documentElement
                          , a = m.docScroll(f);
                        if (y("touch")) {
                            var c = h.get(f);
                            f = c.innerWidth || d.clientWidth;
                            d = c.innerHeight || d.clientHeight
                        } else
                            f = d.clientWidth,
                            d = d.clientHeight;
                        return {
                            l: a.x,
                            t: a.y,
                            w: f,
                            h: d
                        }
                    },
                    get: function(f) {
                        if (y("ie") && h !== document.parentWindow) {
                            f.parentWindow.execScript("document._parentWindow \x3d window;", "Javascript");
                            var d = f._parentWindow;
                            f._parentWindow = null;
                            return d
                        }
                        return f.parentWindow || f.defaultView
                    },
                    scrollIntoView: function(f, d) {
                        try {
                            f = w.byId(f);
                            var a = f.ownerDocument || b.doc
                              , c = b.body(a)
                              , e = a.documentElement || c.parentNode
                              , n = y("ie") || y("trident")
                              , t = y("webkit");
                            if (f != c && f != e)
                                if (!(y("mozilla") || n || t || y("opera") || y("trident") || y("edge")) && "scrollIntoView"in f)
                                    f.scrollIntoView(!1);
                                else {
                                    var g = "BackCompat" == a.compatMode
                                      , q = Math.min(c.clientWidth || e.clientWidth, e.clientWidth || c.clientWidth)
                                      , x = Math.min(c.clientHeight || e.clientHeight, e.clientHeight || c.clientHeight);
                                    a = t || g ? c : e;
                                    var v = d || m.position(f)
                                      , z = f.parentNode;
                                    d = function(da) {
                                        return 6 >= n || 7 == n && g ? !1 : y("position-fixed-support") && "fixed" == l.get(da, "position").toLowerCase()
                                    }
                                    ;
                                    var u = this;
                                    t = function(da, ea, Y) {
                                        "BODY" == da.tagName || "HTML" == da.tagName ? u.get(da.ownerDocument).scrollBy(ea, Y) : (ea && (da.scrollLeft += ea),
                                        Y && (da.scrollTop += Y))
                                    }
                                    ;
                                    if (!d(f))
                                        for (; z; ) {
                                            z == c && (z = a);
                                            var p = m.position(z)
                                              , r = d(z)
                                              , B = "rtl" == l.getComputedStyle(z).direction.toLowerCase();
                                            if (z == a)
                                                p.w = q,
                                                p.h = x,
                                                a == e && (n || y("trident")) && B && (p.x += a.offsetWidth - p.w),
                                                p.x = 0,
                                                p.y = 0;
                                            else {
                                                var D = m.getPadBorderExtents(z);
                                                p.w -= D.w;
                                                p.h -= D.h;
                                                p.x += D.l;
                                                p.y += D.t;
                                                var G = z.clientWidth
                                                  , A = p.w - G;
                                                0 < G && 0 < A && (B && y("rtl-adjust-position-for-verticalScrollBar") && (p.x += A),
                                                p.w = G);
                                                G = z.clientHeight;
                                                A = p.h - G;
                                                0 < G && 0 < A && (p.h = G)
                                            }
                                            r && (0 > p.y && (p.h += p.y,
                                            p.y = 0),
                                            0 > p.x && (p.w += p.x,
                                            p.x = 0),
                                            p.y + p.h > x && (p.h = x - p.y),
                                            p.x + p.w > q && (p.w = q - p.x));
                                            var E = v.x - p.x
                                              , H = v.y - p.y
                                              , J = E + v.w - p.w
                                              , O = H + v.h - p.h;
                                            if (0 < J * E && (z.scrollLeft || z == a || z.scrollWidth > z.offsetHeight)) {
                                                var V = Math[0 > E ? "max" : "min"](E, J);
                                                B && (8 == n && !g || 5 <= y("trident")) && (V = -V);
                                                var aa = z.scrollLeft;
                                                t(z, V, 0);
                                                V = z.scrollLeft - aa;
                                                v.x -= V
                                            }
                                            0 < O * H && (z.scrollTop || z == a || z.scrollHeight > z.offsetHeight) && (V = Math.ceil(Math[0 > H ? "max" : "min"](H, O)),
                                            aa = z.scrollTop,
                                            t(z, 0, V),
                                            V = z.scrollTop - aa,
                                            v.y -= V);
                                            z = z != a && !r && z.parentNode
                                        }
                                }
                        } catch (da) {
                            console.error("scrollIntoView: " + da),
                            f.scrollIntoView(!1)
                        }
                    }
                };
                C.setObject("dojo.window", h);
                return h
            })
        },
        "dijit/selection": function() {
            define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "), function(C, y, b, w, m, l) {
                var k = function(f) {
                    var d = f.document;
                    this.getType = function() {
                        if (d.getSelection) {
                            var a = "text";
                            try {
                                var c = f.getSelection()
                            } catch (e) {}
                            c && 1 == c.rangeCount && (c = c.getRangeAt(0),
                            c.startContainer == c.endContainer && 1 == c.endOffset - c.startOffset && 3 != c.startContainer.nodeType && (a = "control"));
                            return a
                        }
                        return d.selection.type.toLowerCase()
                    }
                    ;
                    this.getSelectedText = function() {
                        if (d.getSelection) {
                            var a = f.getSelection();
                            return a ? a.toString() : ""
                        }
                        return "control" == this.getType() ? null : d.selection.createRange().text
                    }
                    ;
                    this.getSelectedHtml = function() {
                        if (d.getSelection) {
                            var a = f.getSelection();
                            if (a && a.rangeCount) {
                                var c, e = "";
                                for (c = 0; c < a.rangeCount; c++) {
                                    var n = a.getRangeAt(c).cloneContents()
                                      , t = d.createElement("div");
                                    t.appendChild(n);
                                    e += t.innerHTML
                                }
                                return e
                            }
                            return null
                        }
                        return "control" == this.getType() ? null : d.selection.createRange().htmlText
                    }
                    ;
                    this.getSelectedElement = function() {
                        if ("control" == this.getType()) {
                            if (d.getSelection) {
                                var a = f.getSelection();
                                return a.anchorNode.childNodes[a.anchorOffset]
                            }
                            if ((a = d.selection.createRange()) && a.item)
                                return d.selection.createRange().item(0)
                        }
                        return null
                    }
                    ;
                    this.getParentElement = function() {
                        if ("control" == this.getType()) {
                            var a = this.getSelectedElement();
                            if (a)
                                return a.parentNode
                        } else if (d.getSelection) {
                            if (a = d.getSelection()) {
                                for (a = a.anchorNode; a && 1 != a.nodeType; )
                                    a = a.parentNode;
                                return a
                            }
                        } else
                            return a = d.selection.createRange(),
                            a.collapse(!0),
                            a.parentElement();
                        return null
                    }
                    ;
                    this.hasAncestorElement = function(a) {
                        return null != this.getAncestorElement.apply(this, arguments)
                    }
                    ;
                    this.getAncestorElement = function(a) {
                        var c = this.getSelectedElement() || this.getParentElement();
                        return this.getParentOfType(c, arguments)
                    }
                    ;
                    this.isTag = function(a, c) {
                        if (a && a.tagName) {
                            a = a.tagName.toLowerCase();
                            for (var e = 0; e < c.length; e++) {
                                var n = String(c[e]).toLowerCase();
                                if (a == n)
                                    return n
                            }
                        }
                        return ""
                    }
                    ;
                    this.getParentOfType = function(a, c) {
                        for (; a; ) {
                            if (this.isTag(a, c).length)
                                return a;
                            a = a.parentNode
                        }
                        return null
                    }
                    ;
                    this.collapse = function(a) {
                        if (d.getSelection) {
                            var c = f.getSelection();
                            c.removeAllRanges ? a ? c.collapseToStart() : c.collapseToEnd() : c.collapse(a)
                        } else
                            c = d.selection.createRange(),
                            c.collapse(a),
                            c.select()
                    }
                    ;
                    this.remove = function() {
                        var a = d.selection;
                        d.getSelection ? (a = f.getSelection(),
                        a.deleteFromDocument()) : "none" != a.type.toLowerCase() && a.clear();
                        return a
                    }
                    ;
                    this.selectElementChildren = function(a, c) {
                        a = y.byId(a);
                        if (d.getSelection)
                            if (c = f.getSelection(),
                            w("opera")) {
                                var e = c.rangeCount ? c.getRangeAt(0) : d.createRange();
                                e.setStart(a, 0);
                                e.setEnd(a, 3 == a.nodeType ? a.length : a.childNodes.length);
                                c.addRange(e)
                            } else
                                c.selectAllChildren(a);
                        else if (e = a.ownerDocument.body.createTextRange(),
                        e.moveToElementText(a),
                        !c)
                            try {
                                e.select()
                            } catch (n) {}
                    }
                    ;
                    this.selectElement = function(a, c) {
                        a = y.byId(a);
                        if (d.getSelection) {
                            c = d.getSelection();
                            var e = d.createRange();
                            c.removeAllRanges && (w("opera") && c.getRangeAt(0) && (e = c.getRangeAt(0)),
                            e.selectNode(a),
                            c.removeAllRanges(),
                            c.addRange(e))
                        } else
                            try {
                                var n = a.tagName ? a.tagName.toLowerCase() : "";
                                e = "img" === n || "table" === n ? m.body(d).createControlRange() : m.body(d).createRange();
                                e.addElement(a);
                                c || e.select()
                            } catch (t) {
                                this.selectElementChildren(a, c)
                            }
                    }
                    ;
                    this.inSelection = function(a) {
                        if (a) {
                            var c;
                            if (d.getSelection) {
                                var e = f.getSelection();
                                e && 0 < e.rangeCount && (c = e.getRangeAt(0));
                                if (c && c.compareBoundaryPoints && d.createRange)
                                    try {
                                        var n = d.createRange();
                                        n.setStart(a, 0);
                                        if (1 === c.compareBoundaryPoints(c.START_TO_END, n))
                                            return !0
                                    } catch (t) {}
                            } else {
                                c = d.selection.createRange();
                                try {
                                    n = a.ownerDocument.body.createTextRange(),
                                    n.moveToElementText(a)
                                } catch (t) {}
                                if (c && n && 1 === c.compareEndPoints("EndToStart", n))
                                    return !0
                            }
                        }
                        return !1
                    }
                    ;
                    this.getBookmark = function() {
                        var a, c = d.selection, e = l.curNode;
                        if (d.getSelection) {
                            if (c = f.getSelection())
                                if (c.isCollapsed) {
                                    if (a = e ? e.tagName : "")
                                        if (a = a.toLowerCase(),
                                        "textarea" == a || "input" == a && (!e.type || "text" == e.type.toLowerCase()))
                                            return c = {
                                                start: e.selectionStart,
                                                end: e.selectionEnd,
                                                node: e,
                                                pRange: !0
                                            },
                                            {
                                                isCollapsed: c.end <= c.start,
                                                mark: c
                                            };
                                    a = {
                                        isCollapsed: !0
                                    };
                                    c.rangeCount && (a.mark = c.getRangeAt(0).cloneRange())
                                } else {
                                    var n = c.getRangeAt(0);
                                    a = {
                                        isCollapsed: !1,
                                        mark: n.cloneRange()
                                    }
                                }
                        } else if (c) {
                            a = e ? e.tagName : "";
                            a = a.toLowerCase();
                            if (e && a && ("button" == a || "textarea" == a || "input" == a)) {
                                if (c.type && "none" == c.type.toLowerCase())
                                    return {
                                        isCollapsed: !0,
                                        mark: null
                                    };
                                n = c.createRange();
                                return {
                                    isCollapsed: n.text && n.text.length ? !1 : !0,
                                    mark: {
                                        range: n,
                                        pRange: !0
                                    }
                                }
                            }
                            a = {};
                            try {
                                n = c.createRange(),
                                a.isCollapsed = !("Text" == c.type ? n.htmlText.length : n.length)
                            } catch (t) {
                                return a.isCollapsed = !0,
                                a
                            }
                            if ("CONTROL" == c.type.toUpperCase())
                                if (n.length)
                                    for (a.mark = [],
                                    c = 0,
                                    e = n.length; c < e; )
                                        a.mark.push(n.item(c++));
                                else
                                    a.isCollapsed = !0,
                                    a.mark = null;
                            else
                                a.mark = n.getBookmark()
                        } else
                            console.warn("No idea how to store the current selection for this browser!");
                        return a
                    }
                    ;
                    this.moveToBookmark = function(a) {
                        if (a = a.mark)
                            if (d.getSelection) {
                                var c = f.getSelection();
                                c && c.removeAllRanges ? a.pRange ? (c = a.node,
                                c.selectionStart = a.start,
                                c.selectionEnd = a.end) : (c.removeAllRanges(),
                                c.addRange(a)) : console.warn("No idea how to restore selection for this browser!")
                            } else if (d.selection && a) {
                                if (a.pRange)
                                    var e = a.range;
                                else
                                    b.isArray(a) ? (e = d.body.createControlRange(),
                                    C.forEach(a, function(n) {
                                        e.addElement(n)
                                    })) : (e = d.body.createTextRange(),
                                    e.moveToBookmark(a));
                                e.select()
                            }
                    }
                    ;
                    this.isCollapsed = function() {
                        return this.getBookmark().isCollapsed
                    }
                }
                  , h = new k(window);
                h.SelectionManager = k;
                return h
            })
        },
        "dijit/_base/manager": function() {
            define(["dojo/_base/array", "dojo/_base/config", "dojo/_base/lang", "../registry", "../main"], function(C, y, b, w, m) {
                var l = {};
                C.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "), function(k) {
                    l[k] = w[k]
                });
                b.mixin(l, {
                    defaultDuration: y.defaultDuration || 200
                });
                b.mixin(m, l);
                return m
            })
        },
        "dijit/_base/place": function() {
            define(["dojo/_base/array", "dojo/_base/lang", "dojo/window", "../place", "../main"], function(C, y, b, w, m) {
                var l = {
                    getViewport: function() {
                        return b.getBox()
                    }
                };
                l.placeOnScreen = w.at;
                l.placeOnScreenAroundElement = function(k, h, f, d) {
                    if (y.isArray(f))
                        var a = f;
                    else {
                        a = [];
                        for (var c in f)
                            a.push({
                                aroundCorner: c,
                                corner: f[c]
                            })
                    }
                    return w.around(k, h, a, !0, d)
                }
                ;
                l.placeOnScreenAroundNode = l.placeOnScreenAroundElement;
                l.placeOnScreenAroundRectangle = l.placeOnScreenAroundElement;
                l.getPopupAroundAlignment = function(k, h) {
                    var f = {};
                    C.forEach(k, function(d) {
                        var a = h;
                        switch (d) {
                        case "after":
                            f[h ? "BR" : "BL"] = h ? "BL" : "BR";
                            break;
                        case "before":
                            f[h ? "BL" : "BR"] = h ? "BR" : "BL";
                            break;
                        case "below-alt":
                            a = !a;
                        case "below":
                            f[a ? "BL" : "BR"] = a ? "TL" : "TR";
                            f[a ? "BR" : "BL"] = a ? "TR" : "TL";
                            break;
                        case "above-alt":
                            a = !a;
                        default:
                            f[a ? "TL" : "TR"] = a ? "BL" : "BR",
                            f[a ? "TR" : "TL"] = a ? "BR" : "BL"
                        }
                    });
                    return f
                }
                ;
                y.mixin(m, l);
                return m
            })
        },
        "dijit/place": function() {
            define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "), function(C, y, b, w, m, l, k) {
                function h(d, a, c, e) {
                    var n = l.getEffectiveBox(d.ownerDocument);
                    d.parentNode && "body" == String(d.parentNode.tagName).toLowerCase() || m.body(d.ownerDocument).appendChild(d);
                    var t = null;
                    C.some(a, function(x) {
                        var v = x.corner
                          , z = x.pos
                          , u = 0
                          , p = {
                            w: {
                                L: n.l + n.w - z.x,
                                R: z.x - n.l,
                                M: n.w
                            }[v.charAt(1)],
                            h: {
                                T: n.t + n.h - z.y,
                                B: z.y - n.t,
                                M: n.h
                            }[v.charAt(0)]
                        }
                          , r = d.style;
                        r.left = r.right = "auto";
                        c && (u = c(d, x.aroundCorner, v, p, e),
                        u = "undefined" == typeof u ? 0 : u);
                        var B = d.style
                          , D = B.display
                          , G = B.visibility;
                        "none" == B.display && (B.visibility = "hidden",
                        B.display = "");
                        r = y.position(d);
                        B.display = D;
                        B.visibility = G;
                        D = {
                            L: z.x,
                            R: z.x - r.w,
                            M: Math.max(n.l, Math.min(n.l + n.w, z.x + (r.w >> 1)) - r.w)
                        }[v.charAt(1)];
                        G = {
                            T: z.y,
                            B: z.y - r.h,
                            M: Math.max(n.t, Math.min(n.t + n.h, z.y + (r.h >> 1)) - r.h)
                        }[v.charAt(0)];
                        z = Math.max(n.l, D);
                        B = Math.max(n.t, G);
                        D = Math.min(n.l + n.w, D + r.w) - z;
                        G = Math.min(n.t + n.h, G + r.h) - B;
                        u += r.w - D + (r.h - G);
                        if (null == t || u < t.overflow)
                            t = {
                                corner: v,
                                aroundCorner: x.aroundCorner,
                                x: z,
                                y: B,
                                w: D,
                                h: G,
                                overflow: u,
                                spaceAvailable: p
                            };
                        return !u
                    });
                    t.overflow && c && c(d, t.aroundCorner, t.corner, t.spaceAvailable, e);
                    a = t.y;
                    var g = t.x
                      , q = m.body(d.ownerDocument);
                    /relative|absolute/.test(b.get(q, "position")) && (a -= b.get(q, "marginTop"),
                    g -= b.get(q, "marginLeft"));
                    q = d.style;
                    q.top = a + "px";
                    q.left = g + "px";
                    q.right = "auto";
                    return t
                }
                var f = {
                    TL: "BR",
                    TR: "BL",
                    BL: "TR",
                    BR: "TL"
                };
                return k.place = {
                    at: function(d, a, c, e, n) {
                        c = C.map(c, function(t) {
                            var g = {
                                corner: t,
                                aroundCorner: f[t],
                                pos: {
                                    x: a.x,
                                    y: a.y
                                }
                            };
                            e && (g.pos.x += "L" == t.charAt(1) ? e.x : -e.x,
                            g.pos.y += "T" == t.charAt(0) ? e.y : -e.y);
                            return g
                        });
                        return h(d, c, n)
                    },
                    around: function(d, a, c, e, n) {
                        function t(A, E) {
                            G.push({
                                aroundCorner: A,
                                corner: E,
                                pos: {
                                    x: {
                                        L: p,
                                        R: p + B,
                                        M: p + (B >> 1)
                                    }[A.charAt(1)],
                                    y: {
                                        T: r,
                                        B: r + D,
                                        M: r + (D >> 1)
                                    }[A.charAt(0)]
                                }
                            })
                        }
                        if ("string" == typeof a || "offsetWidth"in a || "ownerSVGElement"in a) {
                            var g = y.position(a, !0);
                            if (/^(above|below)/.test(c[0])) {
                                var q = y.getBorderExtents(a)
                                  , x = a.firstChild ? y.getBorderExtents(a.firstChild) : {
                                    t: 0,
                                    l: 0,
                                    b: 0,
                                    r: 0
                                }
                                  , v = y.getBorderExtents(d)
                                  , z = d.firstChild ? y.getBorderExtents(d.firstChild) : {
                                    t: 0,
                                    l: 0,
                                    b: 0,
                                    r: 0
                                };
                                g.y += Math.min(q.t + x.t, v.t + z.t);
                                g.h -= Math.min(q.t + x.t, v.t + z.t) + Math.min(q.b + x.b, v.b + z.b)
                            }
                        } else
                            g = a;
                        if (a.parentNode)
                            for (q = "absolute" == b.getComputedStyle(a).position,
                            a = a.parentNode; a && 1 == a.nodeType && "BODY" != a.nodeName; ) {
                                x = y.position(a, !0);
                                v = b.getComputedStyle(a);
                                /relative|absolute/.test(v.position) && (q = !1);
                                if (!q && /hidden|auto|scroll/.test(v.overflow)) {
                                    z = Math.min(g.y + g.h, x.y + x.h);
                                    var u = Math.min(g.x + g.w, x.x + x.w);
                                    g.x = Math.max(g.x, x.x);
                                    g.y = Math.max(g.y, x.y);
                                    g.h = z - g.y;
                                    g.w = u - g.x
                                }
                                "absolute" == v.position && (q = !0);
                                a = a.parentNode
                            }
                        var p = g.x
                          , r = g.y
                          , B = "w"in g ? g.w : g.w = g.width
                          , D = "h"in g ? g.h : (w.deprecated("place.around: dijit/place.__Rectangle: { x:" + p + ", y:" + r + ", height:" + g.height + ", width:" + B + " } has been deprecated.  Please use { x:" + p + ", y:" + r + ", h:" + g.height + ", w:" + B + " }", "", "2.0"),
                        g.h = g.height)
                          , G = [];
                        C.forEach(c, function(A) {
                            var E = e;
                            switch (A) {
                            case "above-centered":
                                t("TM", "BM");
                                break;
                            case "below-centered":
                                t("BM", "TM");
                                break;
                            case "after-centered":
                                E = !E;
                            case "before-centered":
                                t(E ? "ML" : "MR", E ? "MR" : "ML");
                                break;
                            case "after":
                                E = !E;
                            case "before":
                                t(E ? "TL" : "TR", E ? "TR" : "TL");
                                t(E ? "BL" : "BR", E ? "BR" : "BL");
                                break;
                            case "below-alt":
                                E = !E;
                            case "below":
                                t(E ? "BL" : "BR", E ? "TL" : "TR");
                                t(E ? "BR" : "BL", E ? "TR" : "TL");
                                break;
                            case "above-alt":
                                E = !E;
                            case "above":
                                t(E ? "TL" : "TR", E ? "BL" : "BR");
                                t(E ? "TR" : "TL", E ? "BR" : "BL");
                                break;
                            default:
                                t(A.aroundCorner, A.corner)
                            }
                        });
                        d = h(d, G, n, {
                            w: B,
                            h: D
                        });
                        d.aroundNodePos = g;
                        return d
                    }
                }
            })
        },
        "dijit/Viewport": function() {
            define(["dojo/Evented", "dojo/on", "dojo/domReady", "dojo/sniff", "dojo/window"], function(C, y, b, w, m) {
                var l = new C, k;
                b(function() {
                    var h = m.getBox();
                    l._rlh = y(window, "resize", function() {
                        var d = m.getBox();
                        if (h.h != d.h || h.w != d.w)
                            h = d,
                            l.emit("resize")
                    });
                    if (8 == w("ie")) {
                        var f = screen.deviceXDPI;
                        setInterval(function() {
                            screen.deviceXDPI != f && (f = screen.deviceXDPI,
                            l.emit("resize"))
                        }, 500)
                    }
                    w("ios") && (y(document, "focusin", function(d) {
                        k = d.target
                    }),
                    y(document, "focusout", function(d) {
                        k = null
                    }))
                });
                l.getEffectiveBox = function(h) {
                    h = m.getBox(h);
                    var f = k && k.tagName && k.tagName.toLowerCase();
                    w("ios") && k && !k.readOnly && ("textarea" == f || "input" == f && /^(color|email|number|password|search|tel|text|url)$/.test(k.type)) && (h.h *= 0 == orientation || 180 == orientation ? .66 : .4,
                    f = k.getBoundingClientRect(),
                    h.h = Math.max(h.h, f.top + f.height));
                    return h
                }
                ;
                return l
            })
        },
        "dijit/_base/popup": function() {
            define(["dojo/dom-class", "dojo/_base/window", "../popup", "../BackgroundIframe"], function(C, y, b) {
                var w = b._createWrapper;
                b._createWrapper = function(l) {
                    l.declaredClass || (l = {
                        _popupWrapper: l.parentNode && C.contains(l.parentNode, "dijitPopup") ? l.parentNode : null,
                        domNode: l,
                        destroy: function() {},
                        ownerDocument: l.ownerDocument,
                        ownerDocumentBody: y.body(l.ownerDocument)
                    });
                    return w.call(this, l)
                }
                ;
                var m = b.open;
                b.open = function(l) {
                    if (l.orient && "string" != typeof l.orient && !("length"in l.orient)) {
                        var k = [], h;
                        for (h in l.orient)
                            k.push({
                                aroundCorner: h,
                                corner: l.orient[h]
                            });
                        l.orient = k
                    }
                    return m.call(this, l)
                }
                ;
                return b
            })
        },
        "dijit/popup": function() {
            define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main dojo/touch".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g) {
                function q() {
                    this._popupWrapper && (l.destroy(this._popupWrapper),
                    delete this._popupWrapper)
                }
                b = b(null, {
                    _stack: [],
                    _beginZIndex: 1E3,
                    _idGen: 1,
                    _repositionAll: function() {
                        if (this._firstAroundNode) {
                            var x = this._firstAroundPosition
                              , v = k.position(this._firstAroundNode, !0)
                              , z = v.x - x.x;
                            x = v.y - x.y;
                            if (z || x)
                                for (this._firstAroundPosition = v,
                                v = 0; v < this._stack.length; v++) {
                                    var u = this._stack[v].wrapper.style;
                                    u.top = parseFloat(u.top) + x + "px";
                                    "auto" == u.right ? u.left = parseFloat(u.left) + z + "px" : u.right = parseFloat(u.right) - z + "px"
                                }
                            this._aroundMoveListener = setTimeout(a.hitch(this, "_repositionAll"), z || x ? 10 : 50)
                        }
                    },
                    _createWrapper: function(x) {
                        var v = x._popupWrapper
                          , z = x.domNode;
                        v || (v = l.create("div", {
                            "class": "dijitPopup",
                            style: {
                                display: "none"
                            },
                            role: "region",
                            "aria-label": x["aria-label"] || x.label || x.name || x.id
                        }, x.ownerDocumentBody),
                        v.appendChild(z),
                        z = z.style,
                        z.display = "",
                        z.visibility = "",
                        z.position = "",
                        z.top = "0px",
                        x._popupWrapper = v,
                        y.after(x, "destroy", q, !0),
                        "ontouchend"in document && c(v, "touchend", function(u) {
                            /^(input|button|textarea)$/i.test(u.target.tagName) || u.preventDefault()
                        }),
                        v.dojoClick = !0);
                        return v
                    },
                    moveOffScreen: function(x) {
                        var v = this._createWrapper(x);
                        x = k.isBodyLtr(x.ownerDocument);
                        var z = {
                            visibility: "hidden",
                            top: "-9999px",
                            display: ""
                        };
                        z[x ? "left" : "right"] = "-9999px";
                        z[x ? "right" : "left"] = "auto";
                        h.set(v, z);
                        return v
                    },
                    hide: function(x) {
                        var v = this._createWrapper(x);
                        h.set(v, {
                            display: "none",
                            height: "auto",
                            overflowY: "visible",
                            border: ""
                        });
                        x = x.domNode;
                        "_originalStyle"in x && (x.style.cssText = x._originalStyle)
                    },
                    getTopPopup: function() {
                        for (var x = this._stack, v = x.length - 1; 0 < v && x[v].parent === x[v - 1].widget; v--)
                            ;
                        return x[v]
                    },
                    open: function(x) {
                        for (var v = this._stack, z = x.popup, u = z.domNode, p = x.orient || ["below", "below-alt", "above", "above-alt"], r = x.parent ? x.parent.isLeftToRight() : k.isBodyLtr(z.ownerDocument), B = x.around, D = x.around && x.around.id ? x.around.id + "_dropdown" : "popup_" + this._idGen++; v.length && (!x.parent || !w.isDescendant(x.parent.domNode, v[v.length - 1].widget.domNode)); )
                            this.close(v[v.length - 1].widget);
                        var G = this.moveOffScreen(z);
                        z.startup && !z._started && z.startup();
                        var A = k.position(u);
                        if ("maxHeight"in x && -1 != x.maxHeight)
                            var E = x.maxHeight || Infinity;
                        else {
                            E = t.getEffectiveBox(this.ownerDocument);
                            var H = B ? k.position(B, !1) : {
                                y: x.y - (x.padding || 0),
                                h: 2 * (x.padding || 0)
                            };
                            E = Math.floor(Math.max(H.y, E.h - (H.y + H.h)))
                        }
                        A.h > E && (A = h.getComputedStyle(u),
                        h.set(G, {
                            overflowY: "scroll",
                            height: E + "px",
                            border: A.borderLeftWidth + " " + A.borderLeftStyle + " " + A.borderLeftColor
                        }),
                        u._originalStyle = u.style.cssText,
                        u.style.border = "none");
                        m.set(G, {
                            id: D,
                            style: {
                                zIndex: this._beginZIndex + v.length
                            },
                            "class": "dijitPopup " + (z.baseClass || z["class"] || "").split(" ")[0] + "Popup",
                            dijitPopupParent: x.parent ? x.parent.id : ""
                        });
                        0 == v.length && B && (this._firstAroundNode = B,
                        this._firstAroundPosition = k.position(B, !0),
                        this._aroundMoveListener = setTimeout(a.hitch(this, "_repositionAll"), 50));
                        f("config-bgIframe") && !z.bgIframe && (z.bgIframe = new n(G));
                        D = z.orient ? a.hitch(z, "orient") : null;
                        p = B ? e.around(G, B, p, r, D) : e.at(G, x, "R" == p ? ["TR", "BR", "TL", "BL"] : ["TL", "BL", "TR", "BR"], x.padding, D);
                        G.style.visibility = "visible";
                        u.style.visibility = "visible";
                        u = [];
                        u.push(c(G, "keydown", a.hitch(this, function(J) {
                            if (J.keyCode == d.ESCAPE && x.onCancel)
                                J.stopPropagation(),
                                J.preventDefault(),
                                x.onCancel();
                            else if (J.keyCode == d.TAB && (J.stopPropagation(),
                            J.preventDefault(),
                            (J = this.getTopPopup()) && J.onCancel))
                                J.onCancel()
                        })));
                        z.onCancel && x.onCancel && u.push(z.on("cancel", x.onCancel));
                        u.push(z.on(z.onExecute ? "execute" : "change", a.hitch(this, function() {
                            var J = this.getTopPopup();
                            if (J && J.onExecute)
                                J.onExecute()
                        })));
                        v.push({
                            widget: z,
                            wrapper: G,
                            parent: x.parent,
                            onExecute: x.onExecute,
                            onCancel: x.onCancel,
                            onClose: x.onClose,
                            handlers: u
                        });
                        if (z.onOpen)
                            z.onOpen(p);
                        return p
                    },
                    close: function(x) {
                        for (var v = this._stack; x && C.some(v, function(B) {
                            return B.widget == x
                        }) || !x && v.length; ) {
                            var z = v.pop()
                              , u = z.widget
                              , p = z.onClose;
                            u.bgIframe && (u.bgIframe.destroy(),
                            delete u.bgIframe);
                            if (u.onClose)
                                u.onClose();
                            for (var r; r = z.handlers.pop(); )
                                r.remove();
                            u && u.domNode && this.hide(u);
                            p && p()
                        }
                        0 == v.length && this._aroundMoveListener && (clearTimeout(this._aroundMoveListener),
                        this._firstAroundNode = this._firstAroundPosition = this._aroundMoveListener = null)
                    }
                });
                return g.popup = new b
            })
        },
        "dijit/BackgroundIframe": function() {
            define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "), function(C, y, b, w, m, l, k, h) {
                h.add("config-bgIframe", (h("ie") || h("trident")) && !/IEMobile\/10\.0/.test(navigator.userAgent));
                var f = new function() {
                    var d = [];
                    this.pop = function() {
                        if (d.length) {
                            var a = d.pop();
                            a.style.display = ""
                        } else
                            9 > h("ie") ? (a = b.dojoBlankHtmlUrl || C.toUrl("dojo/resources/blank.html") || 'javascript:""',
                            a = document.createElement("\x3ciframe src\x3d'" + a + "' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")) : (a = w.create("iframe"),
                            a.src = 'javascript:""',
                            a.className = "dijitBackgroundIframe",
                            a.setAttribute("role", "presentation"),
                            m.set(a, "opacity", .1)),
                            a.tabIndex = -1;
                        return a
                    }
                    ;
                    this.push = function(a) {
                        a.style.display = "none";
                        d.push(a)
                    }
                }
                ;
                y.BackgroundIframe = function(d) {
                    if (!d.id)
                        throw Error("no id");
                    if (h("config-bgIframe")) {
                        var a = this.iframe = f.pop();
                        d.appendChild(a);
                        7 > h("ie") || h("quirks") ? (this.resize(d),
                        this._conn = k(d, "resize", l.hitch(this, "resize", d))) : m.set(a, {
                            width: "100%",
                            height: "100%"
                        })
                    }
                }
                ;
                l.extend(y.BackgroundIframe, {
                    resize: function(d) {
                        this.iframe && m.set(this.iframe, {
                            width: d.offsetWidth + "px",
                            height: d.offsetHeight + "px"
                        })
                    },
                    destroy: function() {
                        this._conn && (this._conn.remove(),
                        this._conn = null);
                        this.iframe && (this.iframe.parentNode.removeChild(this.iframe),
                        f.push(this.iframe),
                        delete this.iframe)
                    }
                });
                return y.BackgroundIframe
            })
        },
        "dojo/touch": function() {
            define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                function a(H, J, O) {
                    return t && O ? function(V, aa) {
                        return l(V, O, aa)
                    }
                    : q ? function(V, aa) {
                        var da = l(V, J, function(Y) {
                            aa.call(this, Y);
                            A = (new Date).getTime()
                        })
                          , ea = l(V, H, function(Y) {
                            (!A || (new Date).getTime() > A + 1E3) && aa.call(this, Y)
                        });
                        return {
                            remove: function() {
                                da.remove();
                                ea.remove()
                            }
                        }
                    }
                    : function(V, aa) {
                        return l(V, H, aa)
                    }
                }
                function c(H) {
                    do
                        if (void 0 !== H.dojoClick)
                            return H;
                    while (H = H.parentNode)
                }
                function e(H, J, O) {
                    if (!h.isRight(H)) {
                        var V = c(H.target);
                        if (v = !H.target.disabled && V && V.dojoClick)
                            if (u = (z = "useTarget" == v) ? V : H.target,
                            z && H.preventDefault(),
                            p = H.changedTouches ? H.changedTouches[0].pageX - d.global.pageXOffset : H.clientX,
                            r = H.changedTouches ? H.changedTouches[0].pageY - d.global.pageYOffset : H.clientY,
                            B = ("object" == typeof v ? v.x : "number" == typeof v ? v : 0) || 4,
                            D = ("object" == typeof v ? v.y : "number" == typeof v ? v : 0) || 4,
                            !x) {
                                x = !0;
                                var aa = function(da) {
                                    v = z ? b.isDescendant(d.doc.elementFromPoint(da.changedTouches ? da.changedTouches[0].pageX - d.global.pageXOffset : da.clientX, da.changedTouches ? da.changedTouches[0].pageY - d.global.pageYOffset : da.clientY), u) : v && (da.changedTouches ? da.changedTouches[0].target : da.target) == u && Math.abs((da.changedTouches ? da.changedTouches[0].pageX - d.global.pageXOffset : da.clientX) - p) <= B && Math.abs((da.changedTouches ? da.changedTouches[0].pageY - d.global.pageYOffset : da.clientY) - r) <= D
                                };
                                d.doc.addEventListener(J, function(da) {
                                    h.isRight(da) || (aa(da),
                                    z && da.preventDefault())
                                }, !0);
                                d.doc.addEventListener(O, function(da) {
                                    if (!h.isRight(da) && (aa(da),
                                    v)) {
                                        G = (new Date).getTime();
                                        var ea = z ? u : da.target;
                                        "LABEL" === ea.tagName && (ea = b.byId(ea.getAttribute("for")) || ea);
                                        var Y = da.changedTouches ? da.changedTouches[0] : da
                                          , ia = function(Z) {
                                            var pa = document.createEvent("MouseEvents");
                                            pa._dojo_click = !0;
                                            pa.initMouseEvent(Z, !0, !0, da.view, da.detail, Y.screenX, Y.screenY, Y.clientX, Y.clientY, da.ctrlKey, da.altKey, da.shiftKey, da.metaKey, 0, null);
                                            return pa
                                        }
                                          , qa = ia("mousedown")
                                          , wa = ia("mouseup")
                                          , K = ia("click");
                                        setTimeout(function() {
                                            l.emit(ea, "mousedown", qa);
                                            l.emit(ea, "mouseup", wa);
                                            l.emit(ea, "click", K);
                                            G = (new Date).getTime()
                                        }, 0)
                                    }
                                }, !0);
                                H = function(da) {
                                    d.doc.addEventListener(da, function(ea) {
                                        var Y = ea.target;
                                        v && !ea._dojo_click && (new Date).getTime() <= G + 1E3 && ("INPUT" != Y.tagName || !w.contains(Y, "dijitOffScreen")) && (ea.stopPropagation(),
                                        ea.stopImmediatePropagation && ea.stopImmediatePropagation(),
                                        "click" == da && ("INPUT" != Y.tagName || "radio" == Y.type && (w.contains(Y, "dijitCheckBoxInput") || w.contains(Y, "mblRadioButton")) || "checkbox" == Y.type && (w.contains(Y, "dijitCheckBoxInput") || w.contains(Y, "mblCheckBox"))) && "TEXTAREA" != Y.tagName && "AUDIO" != Y.tagName && "VIDEO" != Y.tagName && ea.preventDefault())
                                    }, !0)
                                }
                                ;
                                H("click");
                                H("mousedown");
                                H("mouseup")
                            }
                    }
                }
                var n = 5 > k("ios"), t = k("pointer-events") || k("MSPointer"), g = function() {
                    var H = {}, J;
                    for (J in {
                        down: 1,
                        move: 1,
                        up: 1,
                        cancel: 1,
                        over: 1,
                        out: 1
                    })
                        H[J] = k("MSPointer") ? "MSPointer" + J.charAt(0).toUpperCase() + J.slice(1) : "pointer" + J;
                    return H
                }(), q = k("touch-events"), x, v, z = !1, u, p, r, B, D, G, A, E;
                k("touch") && (t ? f(function() {
                    d.doc.addEventListener(g.down, function(H) {
                        e(H, g.move, g.up)
                    }, !0)
                }) : f(function() {
                    function H(J) {
                        var O = m.delegate(J, {
                            bubbles: !0
                        });
                        6 <= k("ios") && (O.touches = J.touches,
                        O.altKey = J.altKey,
                        O.changedTouches = J.changedTouches,
                        O.ctrlKey = J.ctrlKey,
                        O.metaKey = J.metaKey,
                        O.shiftKey = J.shiftKey,
                        O.targetTouches = J.targetTouches);
                        return O
                    }
                    E = d.body();
                    d.doc.addEventListener("touchstart", function(J) {
                        A = (new Date).getTime();
                        var O = E;
                        E = J.target;
                        l.emit(O, "dojotouchout", {
                            relatedTarget: E,
                            bubbles: !0
                        });
                        l.emit(E, "dojotouchover", {
                            relatedTarget: O,
                            bubbles: !0
                        });
                        e(J, "touchmove", "touchend")
                    }, !0);
                    l(d.doc, "touchmove", function(J) {
                        A = (new Date).getTime();
                        var O = d.doc.elementFromPoint(J.pageX - (n ? 0 : d.global.pageXOffset), J.pageY - (n ? 0 : d.global.pageYOffset));
                        O && (E !== O && (l.emit(E, "dojotouchout", {
                            relatedTarget: O,
                            bubbles: !0
                        }),
                        l.emit(O, "dojotouchover", {
                            relatedTarget: E,
                            bubbles: !0
                        }),
                        E = O),
                        l.emit(O, "dojotouchmove", H(J)) || J.preventDefault())
                    });
                    l(d.doc, "touchend", function(J) {
                        A = (new Date).getTime();
                        var O = d.doc.elementFromPoint(J.pageX - (n ? 0 : d.global.pageXOffset), J.pageY - (n ? 0 : d.global.pageYOffset)) || d.body();
                        l.emit(O, "dojotouchend", H(J))
                    })
                }));
                y = {
                    press: a("mousedown", "touchstart", g.down),
                    move: a("mousemove", "dojotouchmove", g.move),
                    release: a("mouseup", "dojotouchend", g.up),
                    cancel: a(h.leave, "touchcancel", t ? g.cancel : null),
                    over: a("mouseover", "dojotouchover", g.over),
                    out: a("mouseout", "dojotouchout", g.out),
                    enter: h._eventHandler(a("mouseover", "dojotouchover", g.over)),
                    leave: h._eventHandler(a("mouseout", "dojotouchout", g.out))
                };
                return C.touch = y
            })
        },
        "dijit/_base/scroll": function() {
            define(["dojo/window", "../main"], function(C, y) {
                y.scrollIntoView = function(b, w) {
                    C.scrollIntoView(b, w)
                }
            })
        },
        "dijit/_base/sniff": function() {
            define(["dojo/uacss"], function() {})
        },
        "dojo/uacss": function() {
            define(["./dom-geometry", "./_base/lang", "./domReady", "./sniff", "./_base/window"], function(C, y, b, w, m) {
                var l = m.doc.documentElement;
                m = w("ie");
                var k = w("trident")
                  , h = w("opera")
                  , f = Math.floor
                  , d = w("ff")
                  , a = C.boxModel.replace(/-/, "");
                h = {
                    dj_quirks: w("quirks"),
                    dj_opera: h,
                    dj_khtml: w("khtml"),
                    dj_webkit: w("webkit"),
                    dj_safari: w("safari"),
                    dj_chrome: w("chrome"),
                    dj_edge: w("edge"),
                    dj_gecko: w("mozilla"),
                    dj_ios: w("ios"),
                    dj_android: w("android")
                };
                m && (h.dj_ie = !0,
                h["dj_ie" + f(m)] = !0,
                h.dj_iequirks = w("quirks"));
                k && (h.dj_trident = !0,
                h["dj_trident" + f(k)] = !0);
                d && (h["dj_ff" + f(d)] = !0);
                h["dj_" + a] = !0;
                var c = "", e;
                for (e in h)
                    h[e] && (c += e + " ");
                l.className = y.trim(l.className + " " + c);
                b(function() {
                    if (!C.isBodyLtr()) {
                        var n = "dj_rtl dijitRtl " + c.replace(/ /g, "-rtl ");
                        l.className = y.trim(l.className + " " + n + "dj_rtl dijitRtl " + c.replace(/ /g, "-rtl "))
                    }
                });
                return w
            })
        },
        "dijit/_base/typematic": function() {
            define(["../typematic"], function() {})
        },
        "dijit/typematic": function() {
            define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "), function(C, y, b, w, m, l) {
                var k = l.typematic = {
                    _fireEventAndReload: function() {
                        this._timer = null;
                        this._callback(++this._count, this._node, this._evt);
                        this._currentTimeout = Math.max(0 > this._currentTimeout ? this._initialDelay : 1 < this._subsequentDelay ? this._subsequentDelay : Math.round(this._currentTimeout * this._subsequentDelay), this._minDelay);
                        this._timer = setTimeout(b.hitch(this, "_fireEventAndReload"), this._currentTimeout)
                    },
                    trigger: function(h, f, d, a, c, e, n, t) {
                        if (c != this._obj) {
                            this.stop();
                            this._initialDelay = n || 500;
                            this._subsequentDelay = e || .9;
                            this._minDelay = t || 10;
                            this._obj = c;
                            this._node = d;
                            this._count = this._currentTimeout = -1;
                            this._callback = b.hitch(f, a);
                            this._evt = {
                                faux: !0
                            };
                            for (var g in h)
                                "layerX" != g && "layerY" != g && (f = h[g],
                                "function" != typeof f && "undefined" != typeof f && (this._evt[g] = f));
                            this._fireEventAndReload()
                        }
                    },
                    stop: function() {
                        this._timer && (clearTimeout(this._timer),
                        this._timer = null);
                        this._obj && (this._callback(-1, this._node, this._evt),
                        this._obj = null)
                    },
                    addKeyListener: function(h, f, d, a, c, e, n) {
                        var t = "keyCode"in f ? "keyCode" : "charCode"in f ? "charCode" : "charOrCode"
                          , g = [w(h, "keyCode"in f ? "keydown" : "charCode"in f ? "keypress" : y._keypress, b.hitch(this, function(q) {
                            q[t] != f[t] || void 0 !== f.ctrlKey && f.ctrlKey != q.ctrlKey || void 0 !== f.altKey && f.altKey != q.altKey || void 0 !== f.metaKey && f.metaKey != (q.metaKey || !1) || void 0 !== f.shiftKey && f.shiftKey != q.shiftKey ? k._obj == f && k.stop() : (q.stopPropagation(),
                            q.preventDefault(),
                            k.trigger(q, d, h, a, f, c, e, n))
                        })), w(h, "keyup", b.hitch(this, function() {
                            k._obj == f && k.stop()
                        }))];
                        return {
                            remove: function() {
                                C.forEach(g, function(q) {
                                    q.remove()
                                })
                            }
                        }
                    },
                    addMouseListener: function(h, f, d, a, c, e) {
                        var n = [w(h, "mousedown", b.hitch(this, function(t) {
                            t.preventDefault();
                            k.trigger(t, f, h, d, h, a, c, e)
                        })), w(h, "mouseup", b.hitch(this, function(t) {
                            this._obj && t.preventDefault();
                            k.stop()
                        })), w(h, "mouseout", b.hitch(this, function(t) {
                            this._obj && t.preventDefault();
                            k.stop()
                        })), w(h, "dblclick", b.hitch(this, function(t) {
                            t.preventDefault();
                            9 > m("ie") && (k.trigger(t, f, h, d, h, a, c, e),
                            setTimeout(b.hitch(this, k.stop), 50))
                        }))];
                        return {
                            remove: function() {
                                C.forEach(n, function(t) {
                                    t.remove()
                                })
                            }
                        }
                    },
                    addListener: function(h, f, d, a, c, e, n, t) {
                        var g = [this.addKeyListener(f, d, a, c, e, n, t), this.addMouseListener(h, a, c, e, n, t)];
                        return {
                            remove: function() {
                                C.forEach(g, function(q) {
                                    q.remove()
                                })
                            }
                        }
                    }
                };
                return k
            })
        },
        "dijit/_base/wai": function() {
            define(["dojo/dom-attr", "dojo/_base/lang", "../main", "../hccss"], function(C, y, b) {
                y.mixin(b, {
                    hasWaiRole: function(w, m) {
                        w = this.getWaiRole(w);
                        return m ? -1 < w.indexOf(m) : 0 < w.length
                    },
                    getWaiRole: function(w) {
                        return y.trim((C.get(w, "role") || "").replace("wairole:", ""))
                    },
                    setWaiRole: function(w, m) {
                        C.set(w, "role", m)
                    },
                    removeWaiRole: function(w, m) {
                        var l = C.get(w, "role");
                        l && (m ? (m = y.trim((" " + l + " ").replace(" " + m + " ", " ")),
                        C.set(w, "role", m)) : w.removeAttribute("role"))
                    },
                    hasWaiState: function(w, m) {
                        return w.hasAttribute ? w.hasAttribute("aria-" + m) : !!w.getAttribute("aria-" + m)
                    },
                    getWaiState: function(w, m) {
                        return w.getAttribute("aria-" + m) || ""
                    },
                    setWaiState: function(w, m, l) {
                        w.setAttribute("aria-" + m, l)
                    },
                    removeWaiState: function(w, m) {
                        w.removeAttribute("aria-" + m)
                    }
                });
                return b
            })
        },
        "dijit/hccss": function() {
            define(["dojo/dom-class", "dojo/hccss", "dojo/domReady", "dojo/_base/window"], function(C, y, b, w) {
                b(function() {
                    y("highcontrast") && C.add(w.body(), "dijit_a11y")
                });
                return y
            })
        },
        "dojo/hccss": function() {
            define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "), function(C, y, b, w, m, l, k) {
                m.add("highcontrast", function() {
                    var h = k.doc.createElement("div");
                    try {
                        h.style.cssText = 'border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("' + (y.blankGif || C.toUrl("./resources/blank.gif")) + '");';
                        k.body().appendChild(h);
                        var f = w.getComputedStyle(h)
                          , d = f.backgroundImage;
                        return f.borderTopColor == f.borderRightColor || d && ("none" == d || "url(invalid-url:)" == d)
                    } catch (a) {
                        return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: " + a.toString()),
                        !1
                    } finally {
                        8 >= m("ie") ? h.outerHTML = "" : k.body().removeChild(h)
                    }
                });
                l(function() {
                    m("highcontrast") && b.add(k.body(), "dj_a11y")
                });
                return m
            })
        },
        "dijit/_base/window": function() {
            define(["dojo/window", "../main"], function(C, y) {
                y.getDocumentWindow = function(b) {
                    return C.get(b)
                }
            })
        },
        "dijit/form/DropDownButton": function() {
            define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html ../a11yclick".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                return C("dijit.form.DropDownButton", [k, h, f], {
                    baseClass: "dijitDropDownButton",
                    templateString: d,
                    _fillContent: function() {
                        var a = this.srcNodeRef
                          , c = this.containerNode;
                        if (a && c)
                            for (; a.hasChildNodes(); ) {
                                var e = a.firstChild;
                                e.hasAttribute && (e.hasAttribute("data-dojo-type") || e.hasAttribute("dojoType") || e.hasAttribute("data-" + y._scopeName + "-type") || e.hasAttribute(y._scopeName + "Type")) ? (this.dropDownContainer = this.ownerDocument.createElement("div"),
                                this.dropDownContainer.appendChild(e)) : c.appendChild(e)
                            }
                    },
                    startup: function() {
                        this._started || (!this.dropDown && this.dropDownContainer && (this.dropDown = m.byNode(this.dropDownContainer.firstChild),
                        delete this.dropDownContainer),
                        this.dropDown && l.hide(this.dropDown),
                        this.inherited(arguments))
                    },
                    isLoaded: function() {
                        var a = this.dropDown;
                        return !!a && (!a.href || a.isLoaded)
                    },
                    loadDropDown: function(a) {
                        var c = this.dropDown
                          , e = c.on("load", b.hitch(this, function() {
                            e.remove();
                            a()
                        }));
                        c.refresh()
                    },
                    isFocusable: function() {
                        return this.inherited(arguments) && !this._mouseDown
                    }
                })
            })
        },
        "dijit/form/Button": function() {
            define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                w("dijit-legacy-requires") && k(0, function() {
                    C(["dijit/form/DropDownButton", "dijit/form/ComboButton", "dijit/form/ToggleButton"])
                });
                k = y("dijit.form.Button" + (w("dojo-bidi") ? "_NoBidi" : ""), [h, f], {
                    showLabel: !0,
                    iconClass: "dijitNoIcon",
                    _setIconClassAttr: {
                        node: "iconNode",
                        type: "class"
                    },
                    baseClass: "dijitButton",
                    templateString: d,
                    _setValueAttr: "valueNode",
                    _setNameAttr: function(a) {
                        this.valueNode && this.valueNode.setAttribute("name", a)
                    },
                    postCreate: function() {
                        this.inherited(arguments);
                        this._setLabelFromContainer()
                    },
                    _setLabelFromContainer: function() {
                        this.containerNode && !this.label && (this.label = l.trim(this.containerNode.innerHTML),
                        this.onLabelSet())
                    },
                    _setShowLabelAttr: function(a) {
                        this.containerNode && b.toggle(this.containerNode, "dijitDisplayNone", !a);
                        this._set("showLabel", a)
                    },
                    setLabel: function(a) {
                        m.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.", "", "2.0");
                        this.set("label", a)
                    },
                    onLabelSet: function() {
                        this.inherited(arguments);
                        this.showLabel || "title"in this.params || (this.titleNode.title = l.trim(this.containerNode.innerText || this.containerNode.textContent || ""))
                    }
                });
                w("dojo-bidi") && (k = y("dijit.form.Button", k, {
                    onLabelSet: function() {
                        this.inherited(arguments);
                        this.titleNode.title && this.applyTextDir(this.titleNode, this.titleNode.title)
                    },
                    _setTextDirAttr: function(a) {
                        this._created && this.textDir != a && (this._set("textDir", a),
                        this._setLabelAttr(this.label))
                    }
                }));
                return k
            })
        },
        "dijit/form/_FormWidget": function() {
            define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "), function(C, y, b, w, m, l, k, h) {
                y("dijit-legacy-requires") && w(0, function() {
                    require(["dijit/form/_FormValueWidget"])
                });
                return C("dijit.form._FormWidget", [m, k, l, h], {
                    setDisabled: function(f) {
                        b.deprecated("setDisabled(" + f + ") is deprecated. Use set('disabled'," + f + ") instead.", "", "2.0");
                        this.set("disabled", f)
                    },
                    setValue: function(f) {
                        b.deprecated("dijit.form._FormWidget:setValue(" + f + ") is deprecated.  Use set('value'," + f + ") instead.", "", "2.0");
                        this.set("value", f)
                    },
                    getValue: function() {
                        b.deprecated(this.declaredClass + "::getValue() is deprecated. Use get('value') instead.", "", "2.0");
                        return this.get("value")
                    },
                    postMixInProperties: function() {
                        this.nameAttrSetting = this.name && !y("msapp") ? 'name\x3d"' + this.name.replace(/"/g, "\x26quot;") + '"' : "";
                        this.inherited(arguments)
                    }
                })
            })
        },
        "dijit/_Widget": function() {
            define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                function n() {}
                function t(g) {
                    return function(q, x, v, z) {
                        return q && "string" == typeof x && q[x] == n ? q.on(x.substring(2).toLowerCase(), k.hitch(v, z)) : g.apply(b, arguments)
                    }
                }
                C.around(b, "connect", t);
                l.connect && C.around(l, "connect", t);
                C = w("dijit._Widget", [a, c, e], {
                    onClick: n,
                    onDblClick: n,
                    onKeyDown: n,
                    onKeyPress: n,
                    onKeyUp: n,
                    onMouseDown: n,
                    onMouseMove: n,
                    onMouseOut: n,
                    onMouseOver: n,
                    onMouseLeave: n,
                    onMouseEnter: n,
                    onMouseUp: n,
                    constructor: function(g) {
                        this._toConnect = {};
                        for (var q in g)
                            this[q] === n && (this._toConnect[q.replace(/^on/, "").toLowerCase()] = g[q],
                            delete g[q])
                    },
                    postCreate: function() {
                        this.inherited(arguments);
                        for (var g in this._toConnect)
                            this.on(g, this._toConnect[g]);
                        delete this._toConnect
                    },
                    on: function(g, q) {
                        return this[this._onMap(g)] === n ? b.connect(this.domNode, g.toLowerCase(), this, q) : this.inherited(arguments)
                    },
                    _setFocusedAttr: function(g) {
                        this._focused = g;
                        this._set("focused", g)
                    },
                    setAttribute: function(g, q) {
                        l.deprecated(this.declaredClass + "::setAttribute(attr, value) is deprecated. Use set() instead.", "", "2.0");
                        this.set(g, q)
                    },
                    attr: function(g, q) {
                        return 2 <= arguments.length || "object" === typeof g ? this.set.apply(this, arguments) : this.get(g)
                    },
                    getDescendants: function() {
                        l.deprecated(this.declaredClass + "::getDescendants() is deprecated. Use getChildren() instead.", "", "2.0");
                        return this.containerNode ? h("[widgetId]", this.containerNode).map(d.byNode) : []
                    },
                    _onShow: function() {
                        this.onShow()
                    },
                    onShow: function() {},
                    onHide: function() {},
                    onClose: function() {
                        return !0
                    }
                });
                m("dijit-legacy-requires") && f(0, function() {
                    require(["dijit/_base"])
                });
                return C
            })
        },
        "dijit/_WidgetBase": function() {
            define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r) {
                function B(G) {
                    return function(A) {
                        h[A ? "set" : "remove"](this.domNode, G, A);
                        this._set(G, A)
                    }
                }
                e.add("dijit-legacy-requires", !n.isAsync);
                e.add("dojo-bidi", !1);
                e("dijit-legacy-requires") && q(0, function() {
                    C(["dijit/_base/manager"])
                });
                var D = {};
                w = l("dijit._WidgetBase", [x, u], {
                    id: "",
                    _setIdAttr: "domNode",
                    lang: "",
                    _setLangAttr: B("lang"),
                    dir: "",
                    _setDirAttr: B("dir"),
                    "class": "",
                    _setClassAttr: {
                        node: "domNode",
                        type: "class"
                    },
                    _setTypeAttr: null,
                    style: "",
                    title: "",
                    tooltip: "",
                    baseClass: "",
                    srcNodeRef: null,
                    domNode: null,
                    containerNode: null,
                    ownerDocument: null,
                    _setOwnerDocumentAttr: function(G) {
                        this._set("ownerDocument", G)
                    },
                    attributeMap: {},
                    _blankGif: w.blankGif || C.toUrl("dojo/resources/blank.gif"),
                    textDir: "",
                    _introspect: function() {
                        var G = this.constructor;
                        if (!G._setterAttrs) {
                            var A = G.prototype
                              , E = G._setterAttrs = [];
                            G = G._onMap = {};
                            for (var H in A.attributeMap)
                                E.push(H);
                            for (H in A)
                                /^on/.test(H) && (G[H.substring(2).toLowerCase()] = H),
                                /^_set[A-Z](.*)Attr$/.test(H) && (H = H.charAt(4).toLowerCase() + H.substr(5, H.length - 9),
                                A.attributeMap && H in A.attributeMap || E.push(H))
                        }
                    },
                    postscript: function(G, A) {
                        this.create(G, A)
                    },
                    create: function(G, A) {
                        this._introspect();
                        this.srcNodeRef = k.byId(A);
                        this._connects = [];
                        this._supportingWidgets = [];
                        this.srcNodeRef && this.srcNodeRef.id && "string" == typeof this.srcNodeRef.id && (this.id = this.srcNodeRef.id);
                        G && (this.params = G,
                        t.mixin(this, G));
                        this.postMixInProperties();
                        this.id || (this.id = r.getUniqueId(this.declaredClass.replace(/\./g, "_")),
                        this.params && delete this.params.id);
                        this.ownerDocument = this.ownerDocument || (this.srcNodeRef ? this.srcNodeRef.ownerDocument : document);
                        this.ownerDocumentBody = z.body(this.ownerDocument);
                        r.add(this);
                        this.buildRendering();
                        if (this.domNode) {
                            this._applyAttributes();
                            if ((G = this.srcNodeRef) && G.parentNode && this.domNode !== G) {
                                G.parentNode.replaceChild(this.domNode, G);
                                var E = !0
                            }
                            this.domNode.setAttribute("widgetId", this.id)
                        }
                        this.postCreate();
                        E && delete this.srcNodeRef;
                        this._created = !0
                    },
                    _applyAttributes: function() {
                        var G = {}, A;
                        for (A in this.params || {})
                            G[A] = this._get(A);
                        y.forEach(this.constructor._setterAttrs, function(E) {
                            if (!(E in G)) {
                                var H = this._get(E);
                                H && this.set(E, H)
                            }
                        }, this);
                        for (A in G)
                            this.set(A, G[A])
                    },
                    postMixInProperties: function() {},
                    buildRendering: function() {
                        this.domNode || (this.domNode = this.srcNodeRef || this.ownerDocument.createElement("div"));
                        if (this.baseClass) {
                            var G = this.baseClass.split(" ");
                            this.isLeftToRight() || (G = G.concat(y.map(G, function(A) {
                                return A + "Rtl"
                            })));
                            f.add(this.domNode, G)
                        }
                    },
                    postCreate: function() {},
                    startup: function() {
                        this._started || (this._started = !0,
                        y.forEach(this.getChildren(), function(G) {
                            G._started || G._destroyed || !t.isFunction(G.startup) || (G.startup(),
                            G._started = !0)
                        }))
                    },
                    destroyRecursive: function(G) {
                        this._beingDestroyed = !0;
                        this.destroyDescendants(G);
                        this.destroy(G)
                    },
                    destroy: function(G) {
                        function A(E) {
                            E.destroyRecursive ? E.destroyRecursive(G) : E.destroy && E.destroy(G)
                        }
                        this._beingDestroyed = !0;
                        this.uninitialize();
                        y.forEach(this._connects, t.hitch(this, "disconnect"));
                        y.forEach(this._supportingWidgets, A);
                        this.domNode && y.forEach(r.findWidgets(this.domNode, this.containerNode), A);
                        this.destroyRendering(G);
                        r.remove(this.id);
                        this._destroyed = !0
                    },
                    destroyRendering: function(G) {
                        this.bgIframe && (this.bgIframe.destroy(G),
                        delete this.bgIframe);
                        this.domNode && (G ? h.remove(this.domNode, "widgetId") : d.destroy(this.domNode),
                        delete this.domNode);
                        this.srcNodeRef && (G || d.destroy(this.srcNodeRef),
                        delete this.srcNodeRef)
                    },
                    destroyDescendants: function(G) {
                        y.forEach(this.getChildren(), function(A) {
                            A.destroyRecursive && A.destroyRecursive(G)
                        })
                    },
                    uninitialize: function() {
                        return !1
                    },
                    _setStyleAttr: function(G) {
                        var A = this.domNode;
                        t.isObject(G) ? c.set(A, G) : A.style.cssText = A.style.cssText ? A.style.cssText + ("; " + G) : G;
                        this._set("style", G)
                    },
                    _attrToDom: function(G, A, E) {
                        E = 3 <= arguments.length ? E : this.attributeMap[G];
                        y.forEach(t.isArray(E) ? E : [E], function(H) {
                            var J = this[H.node || H || "domNode"];
                            switch (H.type || "attribute") {
                            case "attribute":
                                t.isFunction(A) && (A = t.hitch(this, A));
                                H = H.attribute ? H.attribute : /^on[A-Z][a-zA-Z]*$/.test(G) ? G.toLowerCase() : G;
                                J.tagName ? h.set(J, H, A) : J.set(H, A);
                                break;
                            case "innerText":
                                J.innerHTML = "";
                                J.appendChild(this.ownerDocument.createTextNode(A));
                                break;
                            case "textContent":
                                J.textContent = A;
                                break;
                            case "innerHTML":
                                J.innerHTML = A;
                                break;
                            case "class":
                                f.replace(J, A, this[G]);
                                break;
                            case "toggleClass":
                                f.toggle(J, H.className || G, A)
                            }
                        }, this)
                    },
                    get: function(G) {
                        var A = this._getAttrNames(G);
                        return this[A.g] ? this[A.g]() : this._get(G)
                    },
                    set: function(G, A) {
                        if ("object" === typeof G) {
                            for (var E in G)
                                this.set(E, G[E]);
                            return this
                        }
                        E = this._getAttrNames(G);
                        var H = this[E.s];
                        if (t.isFunction(H))
                            var J = H.apply(this, Array.prototype.slice.call(arguments, 1));
                        else {
                            H = this.focusNode && !t.isFunction(this.focusNode) ? "focusNode" : "domNode";
                            var O = this[H] && this[H].tagName, V;
                            if ((V = O) && !(V = D[O])) {
                                V = this[H];
                                var aa = {};
                                for (da in V)
                                    aa[da.toLowerCase()] = !0;
                                V = D[O] = aa
                            }
                            var da = V;
                            E = G in this.attributeMap ? this.attributeMap[G] : E.s in this ? this[E.s] : da && E.l in da && "function" != typeof A || /^aria-|^data-|^role$/.test(G) ? H : null;
                            null != E && this._attrToDom(G, A, E);
                            this._set(G, A)
                        }
                        return J || this
                    },
                    _attrPairNames: {},
                    _getAttrNames: function(G) {
                        var A = this._attrPairNames;
                        if (A[G])
                            return A[G];
                        var E = G.replace(/^[a-z]|-[a-zA-Z]/g, function(H) {
                            return H.charAt(H.length - 1).toUpperCase()
                        });
                        return A[G] = {
                            n: G + "Node",
                            s: "_set" + E + "Attr",
                            g: "_get" + E + "Attr",
                            l: E.toLowerCase()
                        }
                    },
                    _set: function(G, A) {
                        var E = this[G];
                        this[G] = A;
                        !this._created || E === A || E !== E && A !== A || (this._watchCallbacks && this._watchCallbacks(G, E, A),
                        this.emit("attrmodified-" + G, {
                            detail: {
                                prevValue: E,
                                newValue: A
                            }
                        }))
                    },
                    _get: function(G) {
                        return this[G]
                    },
                    emit: function(G, A, E) {
                        A = A || {};
                        void 0 === A.bubbles && (A.bubbles = !0);
                        void 0 === A.cancelable && (A.cancelable = !0);
                        A.detail || (A.detail = {});
                        A.detail.widget = this;
                        var H, J = this["on" + G];
                        J && (H = J.apply(this, E ? E : [A]));
                        this._started && !this._beingDestroyed && g.emit(this.domNode, G.toLowerCase(), A);
                        return H
                    },
                    on: function(G, A) {
                        var E = this._onMap(G);
                        return E ? b.after(this, E, A, !0) : this.own(g(this.domNode, G, A))[0]
                    },
                    _onMap: function(G) {
                        var A = this.constructor
                          , E = A._onMap;
                        if (!E) {
                            E = A._onMap = {};
                            for (var H in A.prototype)
                                /^on/.test(H) && (E[H.replace(/^on/, "").toLowerCase()] = H)
                        }
                        return E["string" == typeof G && G.toLowerCase()]
                    },
                    toString: function() {
                        return "[Widget " + this.declaredClass + ", " + (this.id || "NO ID") + "]"
                    },
                    getChildren: function() {
                        return this.containerNode ? r.findWidgets(this.containerNode) : []
                    },
                    getParent: function() {
                        return r.getEnclosingWidget(this.domNode.parentNode)
                    },
                    connect: function(G, A, E) {
                        return this.own(m.connect(G, A, this, E))[0]
                    },
                    disconnect: function(G) {
                        G.remove()
                    },
                    subscribe: function(G, A) {
                        return this.own(v.subscribe(G, t.hitch(this, A)))[0]
                    },
                    unsubscribe: function(G) {
                        G.remove()
                    },
                    isLeftToRight: function() {
                        return this.dir ? "ltr" == this.dir.toLowerCase() : a.isBodyLtr(this.ownerDocument)
                    },
                    isFocusable: function() {
                        return this.focus && "none" != c.get(this.domNode, "display")
                    },
                    placeAt: function(G, A) {
                        var E = !G.tagName && r.byId(G);
                        !E || !E.addChild || A && "number" !== typeof A ? (G = E && "domNode"in E ? E.containerNode && !/after|before|replace/.test(A || "") ? E.containerNode : E.domNode : k.byId(G, this.ownerDocument),
                        d.place(this.domNode, G, A),
                        !this._started && (this.getParent() || {})._started && this.startup()) : E.addChild(this, A);
                        return this
                    },
                    defer: function(G, A) {
                        var E = setTimeout(t.hitch(this, function() {
                            E && (E = null,
                            this._destroyed || t.hitch(this, G)())
                        }), A || 0);
                        return {
                            remove: function() {
                                E && (clearTimeout(E),
                                E = null);
                                return null
                            }
                        }
                    }
                });
                e("dojo-bidi") && w.extend(p);
                return w
            })
        },
        "dijit/Destroyable": function() {
            define(["dojo/_base/array", "dojo/aspect", "dojo/_base/declare"], function(C, y, b) {
                return b("dijit.Destroyable", null, {
                    destroy: function(w) {
                        this._destroyed = !0
                    },
                    own: function() {
                        var w = ["destroyRecursive", "destroy", "remove"];
                        C.forEach(arguments, function(m) {
                            function l() {
                                k.remove();
                                C.forEach(h, function(d) {
                                    d.remove()
                                })
                            }
                            var k = y.before(this, "destroy", function(d) {
                                m[f](d)
                            })
                              , h = [];
                            if (m.then) {
                                var f = "cancel";
                                m.then(l, l)
                            } else
                                C.forEach(w, function(d) {
                                    "function" === typeof m[d] && (f || (f = d),
                                    h.push(y.after(m, d, l, !0)))
                                })
                        }, this);
                        return arguments
                    }
                })
            })
        },
        "dijit/_OnDijitClickMixin": function() {
            define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "), function(C, y, b, w, m, l) {
                C = w("dijit._OnDijitClickMixin", null, {
                    connect: function(k, h, f) {
                        return this.inherited(arguments, [k, "ondijitclick" == h ? l : h, f])
                    }
                });
                C.a11yclick = l;
                return C
            })
        },
        "dijit/a11yclick": function() {
            define(["dojo/keys", "dojo/mouse", "dojo/on", "dojo/touch"], function(C, y, b, w) {
                function m(h) {
                    if ((h.keyCode === C.ENTER || h.keyCode === C.SPACE) && !/input|button|textarea/i.test(h.target.nodeName))
                        for (h = h.target; h; h = h.parentNode)
                            if (h.dojoClick)
                                return !0
                }
                var l;
                b(document, "keydown", function(h) {
                    m(h) ? (l = h.target,
                    h.preventDefault()) : l = null
                });
                b(document, "keyup", function(h) {
                    m(h) && h.target == l && (l = null,
                    b.emit(h.target, "click", {
                        cancelable: !0,
                        bubbles: !0,
                        ctrlKey: h.ctrlKey,
                        shiftKey: h.shiftKey,
                        metaKey: h.metaKey,
                        altKey: h.altKey,
                        _origType: h.type
                    }))
                });
                var k = function(h, f) {
                    h.dojoClick = !0;
                    return b(h, "click", f)
                };
                k.click = k;
                k.press = function(h, f) {
                    var d = b(h, w.press, function(c) {
                        ("mousedown" != c.type || y.isLeft(c)) && f(c)
                    })
                      , a = b(h, "keydown", function(c) {
                        c.keyCode !== C.ENTER && c.keyCode !== C.SPACE || f(c)
                    });
                    return {
                        remove: function() {
                            d.remove();
                            a.remove()
                        }
                    }
                }
                ;
                k.release = function(h, f) {
                    var d = b(h, w.release, function(c) {
                        ("mouseup" != c.type || y.isLeft(c)) && f(c)
                    })
                      , a = b(h, "keyup", function(c) {
                        c.keyCode !== C.ENTER && c.keyCode !== C.SPACE || f(c)
                    });
                    return {
                        remove: function() {
                            d.remove();
                            a.remove()
                        }
                    }
                }
                ;
                k.move = w.move;
                return k
            })
        },
        "dijit/_FocusMixin": function() {
            define(["./focus", "./_WidgetBase", "dojo/_base/declare", "dojo/_base/lang"], function(C, y, b, w) {
                w.extend(y, {
                    focused: !1,
                    onFocus: function() {},
                    onBlur: function() {},
                    _onFocus: function() {
                        this.onFocus()
                    },
                    _onBlur: function() {
                        this.onBlur()
                    }
                });
                return b("dijit._FocusMixin", null, {
                    _focusManager: C
                })
            })
        },
        "dijit/_CssStateMixin": function() {
            define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c) {
                y = y("dijit._CssStateMixin", [], {
                    hovering: !1,
                    active: !1,
                    _applyAttributes: function() {
                        this.inherited(arguments);
                        C.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "), function(n) {
                            this.watch(n, l.hitch(this, "_setStateClass"))
                        }, this);
                        for (var e in this.cssStateNodes || {})
                            this._trackMouseState(this[e], this.cssStateNodes[e]);
                        this._trackMouseState(this.domNode, this.baseClass);
                        this._setStateClass()
                    },
                    _cssMouseEvent: function(e) {
                        if (!this.disabled)
                            switch (e.type) {
                            case "mouseover":
                            case "MSPointerOver":
                            case "pointerover":
                                this._set("hovering", !0);
                                this._set("active", this._mouseDown);
                                break;
                            case "mouseout":
                            case "MSPointerOut":
                            case "pointerout":
                                this._set("hovering", !1);
                                this._set("active", !1);
                                break;
                            case "mousedown":
                            case "touchstart":
                            case "MSPointerDown":
                            case "pointerdown":
                            case "keydown":
                                this._set("active", !0);
                                break;
                            case "mouseup":
                            case "dojotouchend":
                            case "MSPointerUp":
                            case "pointerup":
                            case "keyup":
                                this._set("active", !1)
                            }
                    },
                    _setStateClass: function() {
                        function e(v) {
                            n = n.concat(C.map(n, function(z) {
                                return z + v
                            }), "dijit" + v)
                        }
                        var n = this.baseClass.split(" ");
                        this.isLeftToRight() || e("Rtl");
                        var t = "mixed" == this.checked ? "Mixed" : this.checked ? "Checked" : "";
                        this.checked && e(t);
                        this.state && e(this.state);
                        this.selected && e("Selected");
                        this._opened && e("Opened");
                        this.disabled ? e("Disabled") : this.readOnly ? e("ReadOnly") : this.active ? e("Active") : this.hovering && e("Hover");
                        this.focused && e("Focused");
                        t = this.stateNode || this.domNode;
                        var g = {};
                        C.forEach(t.className.split(" "), function(v) {
                            g[v] = !0
                        });
                        "_stateClasses"in this && C.forEach(this._stateClasses, function(v) {
                            delete g[v]
                        });
                        C.forEach(n, function(v) {
                            g[v] = !0
                        });
                        var q = [], x;
                        for (x in g)
                            q.push(x);
                        t.className = q.join(" ");
                        this._stateClasses = n
                    },
                    _subnodeCssMouseEvent: function(e, n, t) {
                        function g(q) {
                            w.toggle(e, n + "Active", q)
                        }
                        if (!this.disabled && !this.readOnly)
                            switch (t.type) {
                            case "mouseover":
                            case "MSPointerOver":
                            case "pointerover":
                                w.toggle(e, n + "Hover", !0);
                                break;
                            case "mouseout":
                            case "MSPointerOut":
                            case "pointerout":
                                w.toggle(e, n + "Hover", !1);
                                g(!1);
                                break;
                            case "mousedown":
                            case "touchstart":
                            case "MSPointerDown":
                            case "pointerdown":
                            case "keydown":
                                g(!0);
                                break;
                            case "mouseup":
                            case "MSPointerUp":
                            case "pointerup":
                            case "dojotouchend":
                            case "keyup":
                                g(!1);
                                break;
                            case "focus":
                            case "focusin":
                                w.toggle(e, n + "Focused", !0);
                                break;
                            case "blur":
                            case "focusout":
                                w.toggle(e, n + "Focused", !1)
                            }
                    },
                    _trackMouseState: function(e, n) {
                        e._cssState = n
                    }
                });
                h(function() {
                    function e(g, q, x) {
                        if (!x || !b.isDescendant(x, q))
                            for (; q && q != x; q = q.parentNode)
                                if (q._cssState) {
                                    var v = c.getEnclosingWidget(q);
                                    v && (q == v.domNode ? v._cssMouseEvent(g) : v._subnodeCssMouseEvent(q, q._cssState, g))
                                }
                    }
                    var n = d.body(), t;
                    k(n, f.over, function(g) {
                        e(g, g.target, g.relatedTarget)
                    });
                    k(n, f.out, function(g) {
                        e(g, g.target, g.relatedTarget)
                    });
                    k(n, a.press, function(g) {
                        t = g.target;
                        e(g, t)
                    });
                    k(n, a.release, function(g) {
                        e(g, t);
                        t = null
                    });
                    k(n, "focusin, focusout", function(g) {
                        var q = g.target;
                        if (q._cssState && !q.getAttribute("widgetId")) {
                            var x = c.getEnclosingWidget(q);
                            x && x._subnodeCssMouseEvent(q, q._cssState, g)
                        }
                    })
                });
                return y
            })
        },
        "dijit/_TemplatedMixin": function() {
            define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = y("dijit._TemplatedMixin", h, {
                    templateString: null,
                    templatePath: null,
                    _skipNodeCache: !1,
                    searchContainerNode: !0,
                    _stringRepl: function(d) {
                        var a = this.declaredClass
                          , c = this;
                        return k.substitute(d, this, function(e, n) {
                            "!" == n.charAt(0) && (e = w.getObject(n.substr(1), !1, c));
                            if ("undefined" == typeof e)
                                throw Error(a + " template:" + n);
                            return null == e ? "" : "!" == n.charAt(0) ? e : this._escapeValue("" + e)
                        }, this)
                    },
                    _escapeValue: function(d) {
                        return d.replace(/["'<>&]/g, function(a) {
                            return {
                                "\x26": "\x26amp;",
                                "\x3c": "\x26lt;",
                                "\x3e": "\x26gt;",
                                '"': "\x26quot;",
                                "'": "\x26#x27;"
                            }[a]
                        })
                    },
                    buildRendering: function() {
                        if (!this._rendered) {
                            this.templateString || (this.templateString = C(this.templatePath, {
                                sanitize: !0
                            }));
                            var d = f.getCachedTemplate(this.templateString, this._skipNodeCache, this.ownerDocument);
                            if (w.isString(d)) {
                                var a = b.toDom(this._stringRepl(d), this.ownerDocument);
                                if (1 != a.nodeType)
                                    throw Error("Invalid template: " + d);
                            } else
                                a = d.cloneNode(!0);
                            this.domNode = a
                        }
                        this.inherited(arguments);
                        this._rendered || this._fillContent(this.srcNodeRef);
                        this._rendered = !0
                    },
                    _fillContent: function(d) {
                        var a = this.containerNode;
                        if (d && a)
                            for (; d.hasChildNodes(); )
                                a.appendChild(d.firstChild)
                    }
                });
                f._templateCache = {};
                f.getCachedTemplate = function(d, a, c) {
                    var e = f._templateCache
                      , n = d
                      , t = e[n];
                    if (t) {
                        try {
                            if (!t.ownerDocument || t.ownerDocument == (c || document))
                                return t
                        } catch (g) {}
                        b.destroy(t)
                    }
                    d = k.trim(d);
                    if (a || d.match(/\$\{([^\}]+)\}/g))
                        return e[n] = d;
                    a = b.toDom(d, c);
                    if (1 != a.nodeType)
                        throw Error("Invalid template: " + d);
                    return e[n] = a
                }
                ;
                l("ie") && m(window, "unload", function() {
                    var d = f._templateCache, a;
                    for (a in d) {
                        var c = d[a];
                        "object" == typeof c && b.destroy(c);
                        delete d[a]
                    }
                });
                return f
            })
        },
        "dojo/cache": function() {
            define(["./_base/kernel", "./text"], function(C) {
                return C.cache
            })
        },
        "dojo/string": function() {
            define(["./_base/kernel", "./_base/lang"], function(C, y) {
                var b = /[&<>'"\/]/g
                  , w = {
                    "\x26": "\x26amp;",
                    "\x3c": "\x26lt;",
                    "\x3e": "\x26gt;",
                    '"': "\x26quot;",
                    "'": "\x26#x27;",
                    "/": "\x26#x2F;"
                }
                  , m = {};
                y.setObject("dojo.string", m);
                m.escape = function(l) {
                    return l ? l.replace(b, function(k) {
                        return w[k]
                    }) : ""
                }
                ;
                m.rep = function(l, k) {
                    if (0 >= k || !l)
                        return "";
                    for (var h = []; ; ) {
                        k & 1 && h.push(l);
                        if (!(k >>= 1))
                            break;
                        l += l
                    }
                    return h.join("")
                }
                ;
                m.pad = function(l, k, h, f) {
                    h || (h = "0");
                    l = String(l);
                    k = m.rep(h, Math.ceil((k - l.length) / h.length));
                    return f ? l + k : k + l
                }
                ;
                m.substitute = function(l, k, h, f) {
                    f = f || C.global;
                    h = h ? y.hitch(f, h) : function(d) {
                        return d
                    }
                    ;
                    return l.replace(/\$\{([^\s:\}]*)(?::([^\s:\}]+))?\}/g, function(d, a, c) {
                        if ("" == a)
                            return "$";
                        d = y.getObject(a, !1, k);
                        c && (d = y.getObject(c, !1, f).call(f, d, a));
                        c = h(d, a);
                        if ("undefined" === typeof c)
                            throw Error('string.substitute could not find key "' + a + '" in template');
                        return c.toString()
                    })
                }
                ;
                m.trim = String.prototype.trim ? y.trim : function(l) {
                    l = l.replace(/^\s+/, "");
                    for (var k = l.length - 1; 0 <= k; k--)
                        if (/\S/.test(l.charAt(k))) {
                            l = l.substring(0, k + 1);
                            break
                        }
                    return l
                }
                ;
                return m
            })
        },
        "dijit/_AttachMixin": function() {
            define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "), function(C, y, b, w, m, l, k, h, f) {
                var d = m.delegate(h, {
                    mouseenter: l.enter,
                    mouseleave: l.leave,
                    keypress: b._keypress
                }), a;
                b = w("dijit._AttachMixin", null, {
                    constructor: function() {
                        this._attachPoints = [];
                        this._attachEvents = []
                    },
                    buildRendering: function() {
                        this.inherited(arguments);
                        this._attachTemplateNodes(this.domNode);
                        this._beforeFillContent()
                    },
                    _beforeFillContent: function() {},
                    _attachTemplateNodes: function(c) {
                        for (var e = c; ; )
                            if (1 == e.nodeType && (this._processTemplateNode(e, function(n, t) {
                                return n.getAttribute(t)
                            }, this._attach) || this.searchContainerNode) && e.firstChild)
                                e = e.firstChild;
                            else {
                                if (e == c)
                                    break;
                                for (; !e.nextSibling; )
                                    if (e = e.parentNode,
                                    e == c)
                                        return;
                                e = e.nextSibling
                            }
                    },
                    _processTemplateNode: function(c, e, n) {
                        var t = !0
                          , g = this.attachScope || this
                          , q = e(c, "dojoAttachPoint") || e(c, "data-dojo-attach-point");
                        if (q)
                            for (var x = q.split(/\s*,\s*/); q = x.shift(); )
                                m.isArray(g[q]) ? g[q].push(c) : g[q] = c,
                                t = "containerNode" != q,
                                this._attachPoints.push(q);
                        if (e = e(c, "dojoAttachEvent") || e(c, "data-dojo-attach-event"))
                            for (q = e.split(/\s*,\s*/),
                            x = m.trim; e = q.shift(); )
                                if (e) {
                                    var v = null;
                                    -1 != e.indexOf(":") ? (v = e.split(":"),
                                    e = x(v[0]),
                                    v = x(v[1])) : e = x(e);
                                    v || (v = e);
                                    this._attachEvents.push(n(c, e, m.hitch(g, v)))
                                }
                        return t
                    },
                    _attach: function(c, e, n) {
                        e = e.replace(/^on/, "").toLowerCase();
                        e = "dijitclick" == e ? a || (a = C("./a11yclick")) : d[e] || e;
                        return k(c, e, n)
                    },
                    _detachTemplateNodes: function() {
                        var c = this.attachScope || this;
                        y.forEach(this._attachPoints, function(e) {
                            delete c[e]
                        });
                        this._attachPoints = [];
                        y.forEach(this._attachEvents, function(e) {
                            e.remove()
                        });
                        this._attachEvents = []
                    },
                    destroyRendering: function() {
                        this._detachTemplateNodes();
                        this.inherited(arguments)
                    }
                });
                m.extend(f, {
                    dojoAttachEvent: "",
                    dojoAttachPoint: ""
                });
                return b
            })
        },
        "dijit/form/_FormWidgetMixin": function() {
            define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                return y("dijit.form._FormWidgetMixin", null, {
                    name: "",
                    alt: "",
                    value: "",
                    type: "text",
                    "aria-label": "focusNode",
                    tabIndex: "0",
                    _setTabIndexAttr: "focusNode",
                    disabled: !1,
                    intermediateChanges: !1,
                    scrollOnFocus: !0,
                    _setIdAttr: "focusNode",
                    _setDisabledAttr: function(a) {
                        this._set("disabled", a);
                        /^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName) ? (b.set(this.focusNode, "disabled", a),
                        h("trident") && "readOnly"in this && b.set(this.focusNode, "readonly", a || this.readOnly)) : this.focusNode.setAttribute("aria-disabled", a ? "true" : "false");
                        this.valueNode && b.set(this.valueNode, "disabled", a);
                        a ? (this._set("hovering", !1),
                        this._set("active", !1),
                        a = "tabIndex"in this.attributeMap ? this.attributeMap.tabIndex : "_setTabIndexAttr"in this ? this._setTabIndexAttr : "focusNode",
                        C.forEach(m.isArray(a) ? a : [a], function(c) {
                            c = this[c];
                            h("webkit") || d.hasDefaultTabStop(c) ? c.setAttribute("tabIndex", "-1") : c.removeAttribute("tabIndex")
                        }, this)) : "" != this.tabIndex && this.set("tabIndex", this.tabIndex)
                    },
                    _onFocus: function(a) {
                        if ("mouse" == a && this.isFocusable())
                            var c = this.own(k(this.focusNode, "focus", function() {
                                n.remove();
                                c.remove()
                            }))[0]
                              , e = h("pointer-events") ? "pointerup" : h("MSPointer") ? "MSPointerUp" : h("touch-events") ? "touchend, mouseup" : "mouseup"
                              , n = this.own(k(this.ownerDocumentBody, e, m.hitch(this, function(t) {
                                n.remove();
                                c.remove();
                                this.focused && ("touchend" == t.type ? this.defer("focus") : this.focus())
                            })))[0];
                        this.scrollOnFocus && this.defer(function() {
                            f.scrollIntoView(this.domNode)
                        });
                        this.inherited(arguments)
                    },
                    isFocusable: function() {
                        return !this.disabled && this.focusNode && "none" != w.get(this.domNode, "display")
                    },
                    focus: function() {
                        if (!this.disabled && this.focusNode.focus)
                            try {
                                this.focusNode.focus()
                            } catch (a) {}
                    },
                    compare: function(a, c) {
                        return "number" == typeof a && "number" == typeof c ? isNaN(a) && isNaN(c) ? 0 : a - c : a > c ? 1 : a < c ? -1 : 0
                    },
                    onChange: function() {},
                    _onChangeActive: !1,
                    _handleOnChange: function(a, c) {
                        void 0 != this._lastValueReported || null !== c && this._onChangeActive || (this._resetValue = this._lastValueReported = a);
                        this._pendingOnChange = this._pendingOnChange || typeof a != typeof this._lastValueReported || 0 != this.compare(a, this._lastValueReported);
                        (this.intermediateChanges || c || void 0 === c) && this._pendingOnChange && (this._lastValueReported = a,
                        this._pendingOnChange = !1,
                        this._onChangeActive && (this._onChangeHandle && this._onChangeHandle.remove(),
                        this._onChangeHandle = this.defer(function() {
                            this._onChangeHandle = null;
                            this.onChange(a)
                        })))
                    },
                    create: function() {
                        this.inherited(arguments);
                        this._onChangeActive = !0
                    },
                    destroy: function() {
                        this._onChangeHandle && (this._onChangeHandle.remove(),
                        this.onChange(this._lastValueReported));
                        this.inherited(arguments)
                    }
                })
            })
        },
        "dijit/form/_ButtonMixin": function() {
            define(["dojo/_base/declare", "dojo/dom", "dojo/has", "../registry"], function(C, y, b, w) {
                var m = C("dijit.form._ButtonMixin" + (b("dojo-bidi") ? "_NoBidi" : ""), null, {
                    label: "",
                    type: "button",
                    __onClick: function(l) {
                        l.stopPropagation();
                        l.preventDefault();
                        this.disabled || this.valueNode.click(l);
                        return !1
                    },
                    _onClick: function(l) {
                        if (this.disabled)
                            return l.stopPropagation(),
                            l.preventDefault(),
                            !1;
                        !1 === this.onClick(l) && l.preventDefault();
                        var k = l.defaultPrevented;
                        if (!k && "submit" == this.type && !(this.valueNode || this.focusNode).form)
                            for (var h = this.domNode; h.parentNode; h = h.parentNode) {
                                var f = w.byNode(h);
                                if (f && "function" == typeof f._onSubmit) {
                                    f._onSubmit(l);
                                    l.preventDefault();
                                    k = !0;
                                    break
                                }
                            }
                        return !k
                    },
                    postCreate: function() {
                        this.inherited(arguments);
                        y.setSelectable(this.focusNode, !1)
                    },
                    onClick: function() {
                        return !0
                    },
                    _setLabelAttr: function(l) {
                        this._set("label", l);
                        (this.containerNode || this.focusNode).innerHTML = l;
                        this.onLabelSet()
                    },
                    onLabelSet: function() {}
                });
                b("dojo-bidi") && (m = C("dijit.form._ButtonMixin", m, {
                    onLabelSet: function() {
                        this.inherited(arguments);
                        this.applyTextDir(this.containerNode || this.focusNode)
                    }
                }));
                return m
            })
        },
        "dijit/_Container": function() {
            define(["dojo/_base/array", "dojo/_base/declare", "dojo/dom-construct", "dojo/_base/kernel"], function(C, y, b, w) {
                return y("dijit._Container", null, {
                    buildRendering: function() {
                        this.inherited(arguments);
                        this.containerNode || (this.containerNode = this.domNode)
                    },
                    addChild: function(m, l) {
                        var k = this.containerNode;
                        if (0 < l) {
                            for (k = k.firstChild; 0 < l; )
                                1 == k.nodeType && l--,
                                k = k.nextSibling;
                            k ? l = "before" : (k = this.containerNode,
                            l = "last")
                        }
                        b.place(m.domNode, k, l);
                        this._started && !m._started && m.startup()
                    },
                    removeChild: function(m) {
                        "number" == typeof m && (m = this.getChildren()[m]);
                        m && (m = m.domNode) && m.parentNode && m.parentNode.removeChild(m)
                    },
                    hasChildren: function() {
                        return 0 < this.getChildren().length
                    },
                    _getSiblingOfChild: function(m, l) {
                        var k = this.getChildren();
                        m = C.indexOf(k, m);
                        return k[m + l]
                    },
                    getIndexOfChild: function(m) {
                        return C.indexOf(this.getChildren(), m)
                    }
                })
            })
        },
        "dijit/_HasDropDown": function() {
            define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g) {
                return C("dijit._HasDropDown", g, {
                    _buttonNode: null,
                    _arrowWrapperNode: null,
                    _popupStateNode: null,
                    _aroundNode: null,
                    dropDown: null,
                    autoWidth: !0,
                    forceWidth: !1,
                    maxHeight: -1,
                    dropDownPosition: ["below", "above"],
                    _stopClickEvents: !0,
                    _onDropDownMouseDown: function(q) {
                        this.disabled || this.readOnly || ("MSPointerDown" != q.type && q.preventDefault(),
                        this.own(a.once(this.ownerDocument, c.release, d.hitch(this, "_onDropDownMouseUp"))),
                        this.toggleDropDown())
                    },
                    _onDropDownMouseUp: function(q) {
                        var x = this.dropDown
                          , v = !1;
                        if (q && this._opened) {
                            var z = l.position(this._buttonNode, !0);
                            if (!(q.pageX >= z.x && q.pageX <= z.x + z.w && q.pageY >= z.y && q.pageY <= z.y + z.h)) {
                                for (z = q.target; z && !v; )
                                    m.contains(z, "dijitPopup") ? v = !0 : z = z.parentNode;
                                if (v) {
                                    z = q.target;
                                    if (x.onItemClick) {
                                        for (var u; z && !(u = e.byNode(z)); )
                                            z = z.parentNode;
                                        if (u && u.onClick && u.getParent)
                                            u.getParent().onItemClick(u, q)
                                    }
                                    return
                                }
                            }
                        }
                        this._opened ? x.focus && (!1 !== x.autoFocus || "mouseup" == q.type && !this.hovering) && (this._focusDropDownTimer = this.defer(function() {
                            x.focus();
                            delete this._focusDropDownTimer
                        })) : this.focus && this.defer("focus")
                    },
                    _onDropDownClick: function(q) {
                        this._stopClickEvents && (q.stopPropagation(),
                        q.preventDefault())
                    },
                    buildRendering: function() {
                        this.inherited(arguments);
                        this._buttonNode = this._buttonNode || this.focusNode || this.domNode;
                        this._popupStateNode = this._popupStateNode || this.focusNode || this._buttonNode;
                        var q = {
                            after: this.isLeftToRight() ? "Right" : "Left",
                            before: this.isLeftToRight() ? "Left" : "Right",
                            above: "Up",
                            below: "Down",
                            left: "Left",
                            right: "Right"
                        }[this.dropDownPosition[0]] || this.dropDownPosition[0] || "Down";
                        m.add(this._arrowWrapperNode || this._buttonNode, "dijit" + q + "ArrowButton")
                    },
                    postCreate: function() {
                        this.inherited(arguments);
                        var q = this.focusNode || this.domNode;
                        this.own(a(this._buttonNode, c.press, d.hitch(this, "_onDropDownMouseDown")), a(this._buttonNode, "click", d.hitch(this, "_onDropDownClick")), a(q, "keydown", d.hitch(this, "_onKey")), a(q, "keyup", d.hitch(this, "_onKeyUp")))
                    },
                    destroy: function() {
                        this._opened && this.closeDropDown(!0);
                        this.dropDown && (this.dropDown._destroyed || this.dropDown.destroyRecursive(),
                        delete this.dropDown);
                        this.inherited(arguments)
                    },
                    _onKey: function(q) {
                        if (!this.disabled && !this.readOnly) {
                            var x = this.dropDown
                              , v = q.target;
                            x && this._opened && x.handleKey && !1 === x.handleKey(q) ? (q.stopPropagation(),
                            q.preventDefault()) : x && this._opened && q.keyCode == f.ESCAPE ? (this.closeDropDown(),
                            q.stopPropagation(),
                            q.preventDefault()) : !this._opened && (q.keyCode == f.DOWN_ARROW || (q.keyCode == f.ENTER || q.keyCode == f.SPACE && (!this._searchTimer || q.ctrlKey || q.altKey || q.metaKey)) && ("input" !== (v.tagName || "").toLowerCase() || v.type && "text" !== v.type.toLowerCase())) && (this._toggleOnKeyUp = !0,
                            q.stopPropagation(),
                            q.preventDefault())
                        }
                    },
                    _onKeyUp: function() {
                        if (this._toggleOnKeyUp) {
                            delete this._toggleOnKeyUp;
                            this.toggleDropDown();
                            var q = this.dropDown;
                            q && q.focus && this.defer(d.hitch(q, "focus"), 1)
                        }
                    },
                    _onBlur: function() {
                        this.closeDropDown(!1);
                        this.inherited(arguments)
                    },
                    isLoaded: function() {
                        return !0
                    },
                    loadDropDown: function(q) {
                        q()
                    },
                    loadAndOpenDropDown: function() {
                        var q = new y
                          , x = d.hitch(this, function() {
                            this.openDropDown();
                            q.resolve(this.dropDown)
                        });
                        this.isLoaded() ? x() : this.loadDropDown(x);
                        return q
                    },
                    toggleDropDown: function() {
                        this.disabled || this.readOnly || (this._opened ? this.closeDropDown(!0) : this.loadAndOpenDropDown())
                    },
                    openDropDown: function() {
                        var q = this.dropDown
                          , x = q.domNode
                          , v = this._aroundNode || this.domNode
                          , z = this
                          , u = t.open({
                            parent: this,
                            popup: q,
                            around: v,
                            orient: this.dropDownPosition,
                            maxHeight: this.maxHeight,
                            onExecute: function() {
                                z.closeDropDown(!0)
                            },
                            onCancel: function() {
                                z.closeDropDown(!0)
                            },
                            onClose: function() {
                                w.set(z._popupStateNode, "popupActive", !1);
                                m.remove(z._popupStateNode, "dijitHasDropDownOpen");
                                z._set("_opened", !1)
                            }
                        });
                        if (this.forceWidth || this.autoWidth && v.offsetWidth > q._popupWrapper.offsetWidth) {
                            v = v.offsetWidth - q._popupWrapper.offsetWidth;
                            var p = {
                                w: q.domNode.offsetWidth + v
                            };
                            this._origStyle = x.style.cssText;
                            d.isFunction(q.resize) ? q.resize(p) : l.setMarginBox(x, p);
                            "R" == u.corner[1] && (q._popupWrapper.style.left = q._popupWrapper.style.left.replace("px", "") - v + "px")
                        }
                        w.set(this._popupStateNode, "popupActive", "true");
                        m.add(this._popupStateNode, "dijitHasDropDownOpen");
                        this._set("_opened", !0);
                        this._popupStateNode.setAttribute("aria-expanded", "true");
                        this._popupStateNode.setAttribute("aria-owns", q.id);
                        "presentation" === x.getAttribute("role") || x.getAttribute("aria-labelledby") || x.setAttribute("aria-labelledby", this.id);
                        return u
                    },
                    closeDropDown: function(q) {
                        this._focusDropDownTimer && (this._focusDropDownTimer.remove(),
                        delete this._focusDropDownTimer);
                        this._opened && (this._popupStateNode.setAttribute("aria-expanded", "false"),
                        q && this.focus && this.focus(),
                        t.close(this.dropDown),
                        this._opened = !1);
                        this._origStyle && (this.dropDown.domNode.style.cssText = this._origStyle,
                        delete this._origStyle)
                    }
                })
            })
        },
        "dijit/form/ComboButton": function() {
            define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "), function(C, y, b, w, m) {
                return C("dijit.form.ComboButton", w, {
                    templateString: m,
                    _setIdAttr: "",
                    _setTabIndexAttr: ["focusNode", "titleNode"],
                    _setTitleAttr: "titleNode",
                    optionsTitle: "",
                    baseClass: "dijitComboButton",
                    cssStateNodes: {
                        buttonNode: "dijitButtonNode",
                        titleNode: "dijitButtonContents",
                        _popupStateNode: "dijitDownArrowButton"
                    },
                    _focusedNode: null,
                    _onButtonKeyDown: function(l) {
                        l.keyCode == y[this.isLeftToRight() ? "RIGHT_ARROW" : "LEFT_ARROW"] && (b.focus(this._popupStateNode),
                        l.stopPropagation(),
                        l.preventDefault())
                    },
                    _onArrowKeyDown: function(l) {
                        l.keyCode == y[this.isLeftToRight() ? "LEFT_ARROW" : "RIGHT_ARROW"] && (b.focus(this.titleNode),
                        l.stopPropagation(),
                        l.preventDefault())
                    },
                    focus: function(l) {
                        this.disabled || b.focus("start" == l ? this.titleNode : this._popupStateNode)
                    }
                })
            })
        },
        "dijit/form/ToggleButton": function() {
            define(["dojo/_base/declare", "dojo/_base/kernel", "./Button", "./_ToggleButtonMixin"], function(C, y, b, w) {
                return C("dijit.form.ToggleButton", [b, w], {
                    baseClass: "dijitToggleButton",
                    setChecked: function(m) {
                        y.deprecated("setChecked(" + m + ") is deprecated. Use set('checked'," + m + ") instead.", "", "2.0");
                        this.set("checked", m)
                    }
                })
            })
        },
        "dijit/form/_ToggleButtonMixin": function() {
            define(["dojo/_base/declare", "dojo/dom-attr"], function(C, y) {
                return C("dijit.form._ToggleButtonMixin", null, {
                    checked: !1,
                    _aria_attr: "aria-pressed",
                    _onClick: function(b) {
                        var w = this.checked;
                        this._set("checked", !w);
                        var m = this.inherited(arguments);
                        this.set("checked", m ? this.checked : w);
                        return m
                    },
                    _setCheckedAttr: function(b, w) {
                        this._set("checked", b);
                        var m = this.focusNode || this.domNode;
                        this._created && y.get(m, "checked") != !!b && y.set(m, "checked", !!b);
                        m.setAttribute(this._aria_attr, String(b));
                        this._handleOnChange(b, w)
                    },
                    postCreate: function() {
                        this.inherited(arguments);
                        var b = this.focusNode || this.domNode;
                        this.checked && b.setAttribute("checked", "checked");
                        void 0 === this._resetValue && (this._lastValueReported = this._resetValue = this.checked)
                    },
                    reset: function() {
                        this._hasBeenBlurred = !1;
                        this.set("checked", this.params.checked || !1)
                    }
                })
            })
        },
        "dijit/TooltipDialog": function() {
            define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                C = C("dijit.TooltipDialog", [h, a, d, f], {
                    title: "",
                    doLayout: !1,
                    autofocus: !0,
                    baseClass: "dijitTooltipDialog",
                    _firstFocusItem: null,
                    _lastFocusItem: null,
                    templateString: c,
                    _setTitleAttr: "containerNode",
                    postCreate: function() {
                        this.inherited(arguments);
                        this.own(l(this.domNode, "keydown", m.hitch(this, "_onKey")))
                    },
                    orient: function(n, t, g) {
                        n = {
                            "MR-ML": "dijitTooltipRight",
                            "ML-MR": "dijitTooltipLeft",
                            "TM-BM": "dijitTooltipAbove",
                            "BM-TM": "dijitTooltipBelow",
                            "BL-TL": "dijitTooltipBelow dijitTooltipABLeft",
                            "TL-BL": "dijitTooltipAbove dijitTooltipABLeft",
                            "BR-TR": "dijitTooltipBelow dijitTooltipABRight",
                            "TR-BR": "dijitTooltipAbove dijitTooltipABRight",
                            "BR-BL": "dijitTooltipRight",
                            "BL-BR": "dijitTooltipLeft",
                            "BR-TL": "dijitTooltipBelow dijitTooltipABLeft",
                            "BL-TR": "dijitTooltipBelow dijitTooltipABRight",
                            "TL-BR": "dijitTooltipAbove dijitTooltipABRight",
                            "TR-BL": "dijitTooltipAbove dijitTooltipABLeft"
                        }[t + "-" + g];
                        y.replace(this.domNode, n, this._currentOrientClass || "");
                        this._currentOrientClass = n
                    },
                    focus: function() {
                        this._getFocusItems();
                        k.focus(this._firstFocusItem)
                    },
                    onOpen: function(n) {
                        this.orient(this.domNode, n.aroundCorner, n.corner);
                        var t = n.aroundNodePos;
                        "M" == n.corner.charAt(0) && "M" == n.aroundCorner.charAt(0) ? (this.connectorNode.style.top = t.y + (t.h - this.connectorNode.offsetHeight >> 1) - n.y + "px",
                        this.connectorNode.style.left = "") : "M" == n.corner.charAt(1) && "M" == n.aroundCorner.charAt(1) && (this.connectorNode.style.left = t.x + (t.w - this.connectorNode.offsetWidth >> 1) - n.x + "px");
                        this._onShow()
                    },
                    onClose: function() {
                        this.onHide()
                    },
                    _onKey: function(n) {
                        if (n.keyCode == w.ESCAPE)
                            this.defer("onCancel"),
                            n.stopPropagation(),
                            n.preventDefault();
                        else if (n.keyCode == w.TAB) {
                            var t = n.target;
                            this._getFocusItems();
                            this._firstFocusItem == this._lastFocusItem ? (n.stopPropagation(),
                            n.preventDefault()) : t == this._firstFocusItem && n.shiftKey ? (k.focus(this._lastFocusItem),
                            n.stopPropagation(),
                            n.preventDefault()) : t != this._lastFocusItem || n.shiftKey ? n.stopPropagation() : (k.focus(this._firstFocusItem),
                            n.stopPropagation(),
                            n.preventDefault())
                        }
                    }
                });
                b("dojo-bidi") && C.extend({
                    _setTitleAttr: function(n) {
                        this.containerNode.title = this.textDir && this.enforceTextDirWithUcc ? this.enforceTextDirWithUcc(null, n) : n;
                        this._set("title", n)
                    },
                    _setTextDirAttr: function(n) {
                        this._created && this.textDir == n || (this._set("textDir", n),
                        this.textDir && this.title && (this.containerNode.title = this.enforceTextDirWithUcc(null, this.title)))
                    }
                });
                return C
            })
        },
        "dijit/layout/ContentPane": function() {
            define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g) {
                return f("dijit.layout.ContentPane", [b, w, m], {
                    href: "",
                    content: "",
                    extractContent: !1,
                    parseOnLoad: !0,
                    parserScope: C._scopeName,
                    preventCache: !1,
                    preload: !1,
                    refreshOnShow: !1,
                    loadingMessage: "\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",
                    errorMessage: "\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
                    isLoaded: !1,
                    baseClass: "dijitContentPane",
                    ioArgs: {},
                    onLoadDeferred: null,
                    _setTitleAttr: null,
                    stopParser: !0,
                    template: !1,
                    markupFactory: function(q, x, v) {
                        var z = new v(q,x);
                        return !z.href && z._contentSetter && z._contentSetter.parseDeferred && !z._contentSetter.parseDeferred.isFulfilled() ? z._contentSetter.parseDeferred.then(function() {
                            return z
                        }) : z
                    },
                    create: function(q, x) {
                        if (!(q && q.template || !x || "href"in q || "content"in q)) {
                            x = a.byId(x);
                            for (var v = x.ownerDocument.createDocumentFragment(); x.firstChild; )
                                v.appendChild(x.firstChild);
                            q = y.delegate(q, {
                                content: v
                            })
                        }
                        this.inherited(arguments, [q, x])
                    },
                    postMixInProperties: function() {
                        this.inherited(arguments);
                        var q = t.getLocalization("dijit", "loading", this.lang);
                        this.loadingMessage = l.substitute(this.loadingMessage, q);
                        this.errorMessage = l.substitute(this.errorMessage, q)
                    },
                    buildRendering: function() {
                        this.inherited(arguments);
                        this.containerNode || (this.containerNode = this.domNode);
                        this.domNode.removeAttribute("title")
                    },
                    startup: function() {
                        this.inherited(arguments);
                        this._contentSetter && h.forEach(this._contentSetter.parseResults, function(q) {
                            q._started || q._destroyed || !y.isFunction(q.startup) || (q.startup(),
                            q._started = !0)
                        }, this)
                    },
                    _startChildren: function() {
                        h.forEach(this.getChildren(), function(q) {
                            q._started || q._destroyed || !y.isFunction(q.startup) || (q.startup(),
                            q._started = !0)
                        });
                        this._contentSetter && h.forEach(this._contentSetter.parseResults, function(q) {
                            q._started || q._destroyed || !y.isFunction(q.startup) || (q.startup(),
                            q._started = !0)
                        }, this)
                    },
                    setHref: function(q) {
                        C.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.", "", "2.0");
                        return this.set("href", q)
                    },
                    _setHrefAttr: function(q) {
                        this.cancel();
                        this.onLoadDeferred = new d(y.hitch(this, "cancel"));
                        this.onLoadDeferred.then(y.hitch(this, "onLoad"));
                        this._set("href", q);
                        this.preload || this._created && this._isShown() ? this._load() : this._hrefChanged = !0;
                        return this.onLoadDeferred
                    },
                    setContent: function(q) {
                        C.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.", "", "2.0");
                        this.set("content", q)
                    },
                    _setContentAttr: function(q) {
                        this._set("href", "");
                        this.cancel();
                        this.onLoadDeferred = new d(y.hitch(this, "cancel"));
                        this._created && this.onLoadDeferred.then(y.hitch(this, "onLoad"));
                        this._setContent(q || "");
                        this._isDownloaded = !1;
                        return this.onLoadDeferred
                    },
                    _getContentAttr: function() {
                        return this.containerNode.innerHTML
                    },
                    cancel: function() {
                        this._xhrDfd && -1 == this._xhrDfd.fired && this._xhrDfd.cancel();
                        delete this._xhrDfd;
                        this.onLoadDeferred = null
                    },
                    destroy: function() {
                        this.cancel();
                        this.inherited(arguments)
                    },
                    destroyRecursive: function(q) {
                        this._beingDestroyed || this.inherited(arguments)
                    },
                    _onShow: function() {
                        this.inherited(arguments);
                        if (this.href && !this._xhrDfd && (!this.isLoaded || this._hrefChanged || this.refreshOnShow))
                            return this.refresh()
                    },
                    refresh: function() {
                        this.cancel();
                        this.onLoadDeferred = new d(y.hitch(this, "cancel"));
                        this.onLoadDeferred.then(y.hitch(this, "onLoad"));
                        this._load();
                        return this.onLoadDeferred
                    },
                    _load: function() {
                        this._setContent(this.onDownloadStart(), !0);
                        var q = this
                          , x = {
                            preventCache: this.preventCache || this.refreshOnShow,
                            url: this.href,
                            handleAs: "text"
                        };
                        y.isObject(this.ioArgs) && y.mixin(x, this.ioArgs);
                        var v = this._xhrDfd = (this.ioMethod || n.get)(x), z;
                        v.then(function(u) {
                            z = u;
                            try {
                                return q._isDownloaded = !0,
                                q._setContent(u, !1)
                            } catch (p) {
                                q._onError("Content", p)
                            }
                        }, function(u) {
                            v.canceled || q._onError("Download", u);
                            delete q._xhrDfd;
                            return u
                        }).then(function() {
                            q.onDownloadEnd();
                            delete q._xhrDfd;
                            return z
                        });
                        delete this._hrefChanged
                    },
                    _onLoadHandler: function(q) {
                        this._set("isLoaded", !0);
                        try {
                            this.onLoadDeferred.resolve(q)
                        } catch (x) {
                            console.error("Error " + (this.widgetId || this.id) + " running custom onLoad code: " + x.message)
                        }
                    },
                    _onUnloadHandler: function() {
                        this._set("isLoaded", !1);
                        try {
                            this.onUnload()
                        } catch (q) {
                            console.error("Error " + this.widgetId + " running custom onUnload code: " + q.message)
                        }
                    },
                    destroyDescendants: function(q) {
                        this.isLoaded && this._onUnloadHandler();
                        var x = this._contentSetter;
                        h.forEach(this.getChildren(), function(v) {
                            v.destroyRecursive ? v.destroyRecursive(q) : v.destroy && v.destroy(q);
                            v._destroyed = !0
                        });
                        x && (h.forEach(x.parseResults, function(v) {
                            v._destroyed || (v.destroyRecursive ? v.destroyRecursive(q) : v.destroy && v.destroy(q),
                            v._destroyed = !0)
                        }),
                        delete x.parseResults);
                        q || e.empty(this.containerNode);
                        delete this._singleChild
                    },
                    _setContent: function(q, x) {
                        q = this.preprocessContent(q);
                        this.destroyDescendants();
                        var v = this._contentSetter;
                        v && v instanceof k._ContentSetter || (v = this._contentSetter = new k._ContentSetter({
                            node: this.containerNode,
                            _onError: y.hitch(this, this._onError),
                            onContentError: y.hitch(this, function(p) {
                                p = this.onContentError(p);
                                try {
                                    this.containerNode.innerHTML = p
                                } catch (r) {
                                    console.error("Fatal " + this.id + " could not change content due to " + r.message, r)
                                }
                            })
                        }));
                        var z = y.mixin({
                            cleanContent: this.cleanContent,
                            extractContent: this.extractContent,
                            parseContent: !q.domNode && this.parseOnLoad,
                            parserScope: this.parserScope,
                            startup: !1,
                            dir: this.dir,
                            lang: this.lang,
                            textDir: this.textDir
                        }, this._contentSetterParams || {});
                        z = v.set(y.isObject(q) && q.domNode ? q.domNode : q, z);
                        var u = this;
                        return g(z && z.then ? z : v.parseDeferred, function() {
                            delete u._contentSetterParams;
                            x || (u._started && (u._startChildren(),
                            u._scheduleLayout()),
                            u._onLoadHandler(q))
                        })
                    },
                    preprocessContent: function(q) {
                        return q
                    },
                    _onError: function(q, x, v) {
                        this.onLoadDeferred.reject(x);
                        q = this["on" + q + "Error"].call(this, x);
                        v ? console.error(v, x) : q && this._setContent(q, !0)
                    },
                    onLoad: function() {},
                    onUnload: function() {},
                    onDownloadStart: function() {
                        return this.loadingMessage
                    },
                    onContentError: function() {},
                    onDownloadError: function() {
                        return this.errorMessage
                    },
                    onDownloadEnd: function() {}
                })
            })
        },
        "dijit/layout/_ContentPaneResizeMixin": function() {
            define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                return y("dijit.layout._ContentPaneResizeMixin", null, {
                    doLayout: !0,
                    isLayoutContainer: !0,
                    startup: function() {
                        if (!this._started) {
                            var a = this.getParent();
                            this._childOfLayoutWidget = a && a.isLayoutContainer;
                            this._needLayout = !this._childOfLayoutWidget;
                            this.inherited(arguments);
                            this._isShown() && this._onShow();
                            this._childOfLayoutWidget || this.own(f.on("resize", l.hitch(this, "resize")))
                        }
                    },
                    _checkIfSingleChild: function() {
                        if (this.doLayout) {
                            var a = []
                              , c = !1;
                            k("\x3e *", this.containerNode).some(function(e) {
                                var n = h.byNode(e);
                                n && n.resize ? a.push(n) : !/script|link|style/i.test(e.nodeName) && e.offsetHeight && (c = !0)
                            });
                            this._singleChild = 1 != a.length || c ? null : a[0];
                            b.toggle(this.containerNode, this.baseClass + "SingleChild", !!this._singleChild)
                        }
                    },
                    resize: function(a, c) {
                        this._resizeCalled = !0;
                        this._scheduleLayout(a, c)
                    },
                    _scheduleLayout: function(a, c) {
                        this._isShown() ? this._layout(a, c) : (this._needLayout = !0,
                        this._changeSize = a,
                        this._resultSize = c)
                    },
                    _layout: function(a, c) {
                        delete this._needLayout;
                        this._wasShown || !1 === this.open || this._onShow();
                        a && w.setMarginBox(this.domNode, a);
                        var e = this.containerNode;
                        e === this.domNode ? (c = c || {},
                        l.mixin(c, a || {}),
                        "h"in c && "w"in c || (c = l.mixin(w.getMarginBox(e), c)),
                        this._contentBox = d.marginBox2contentBox(e, c)) : this._contentBox = w.getContentBox(e);
                        this._layoutChildren()
                    },
                    _layoutChildren: function() {
                        this._checkIfSingleChild();
                        if (this._singleChild && this._singleChild.resize) {
                            var a = this._contentBox || w.getContentBox(this.containerNode);
                            this._singleChild.resize({
                                w: a.w,
                                h: a.h
                            })
                        } else {
                            a = this.getChildren();
                            for (var c, e = 0; c = a[e++]; )
                                c.resize && c.resize()
                        }
                    },
                    _isShown: function() {
                        if (this._childOfLayoutWidget)
                            return this._resizeCalled && "open"in this ? this.open : this._resizeCalled;
                        if ("open"in this)
                            return this.open;
                        var a = this.domNode
                          , c = this.domNode.parentNode;
                        return "none" != a.style.display && "hidden" != a.style.visibility && !b.contains(a, "dijitHidden") && c && c.style && "none" != c.style.display
                    },
                    _onShow: function() {
                        this._wasShown = !0;
                        this._needLayout && this._layout(this._changeSize, this._resultSize);
                        this.inherited(arguments)
                    }
                })
            })
        },
        "dijit/layout/utils": function() {
            define(["dojo/_base/array", "dojo/dom-class", "dojo/dom-geometry", "dojo/dom-style", "dojo/_base/lang"], function(C, y, b, w, m) {
                function l(f) {
                    return f.substring(0, 1).toUpperCase() + f.substring(1)
                }
                function k(f, d) {
                    var a = f.resize ? f.resize(d) : b.setMarginBox(f.domNode, d);
                    a ? m.mixin(f, a) : (m.mixin(f, b.getMarginBox(f.domNode)),
                    m.mixin(f, d))
                }
                var h = {
                    marginBox2contentBox: function(f, d) {
                        var a = w.getComputedStyle(f)
                          , c = b.getMarginExtents(f, a)
                          , e = b.getPadBorderExtents(f, a);
                        return {
                            l: w.toPixelValue(f, a.paddingLeft),
                            t: w.toPixelValue(f, a.paddingTop),
                            w: d.w - (c.w + e.w),
                            h: d.h - (c.h + e.h)
                        }
                    },
                    layoutChildren: function(f, d, a, c, e) {
                        d = m.mixin({}, d);
                        y.add(f, "dijitLayoutContainer");
                        a = C.filter(a, function(n) {
                            return "center" != n.region && "client" != n.layoutAlign
                        }).concat(C.filter(a, function(n) {
                            return "center" == n.region || "client" == n.layoutAlign
                        }));
                        C.forEach(a, function(n) {
                            var t = n.domNode
                              , g = n.region || n.layoutAlign;
                            if (!g)
                                throw Error("No region setting for " + n.id);
                            var q = t.style;
                            q.left = d.l + "px";
                            q.top = d.t + "px";
                            q.position = "absolute";
                            y.add(t, "dijitAlign" + l(g));
                            t = {};
                            c && c == n.id && (t["top" == n.region || "bottom" == n.region ? "h" : "w"] = e);
                            "leading" == g && (g = n.isLeftToRight() ? "left" : "right");
                            "trailing" == g && (g = n.isLeftToRight() ? "right" : "left");
                            "top" == g || "bottom" == g ? (t.w = d.w,
                            k(n, t),
                            d.h -= n.h,
                            "top" == g ? d.t += n.h : q.top = d.t + d.h + "px") : "left" == g || "right" == g ? (t.h = d.h,
                            k(n, t),
                            d.w -= n.w,
                            "left" == g ? d.l += n.w : q.left = d.l + d.w + "px") : "client" != g && "center" != g || k(n, d)
                        })
                    }
                };
                m.setObject("dijit.layout.utils", h);
                return h
            })
        },
        "dojo/html": function() {
            define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "), function(C, y, b, w, m, l, k) {
                var h = 0
                  , f = {
                    _secureForInnerHtml: function(d) {
                        return d.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig, "")
                    },
                    _emptyNode: l.empty,
                    _setNodeContent: function(d, a) {
                        l.empty(d);
                        if (a)
                            if ("number" == typeof a && (a = a.toString()),
                            "string" == typeof a && (a = l.toDom(a, d.ownerDocument)),
                            !a.nodeType && y.isArrayLike(a))
                                for (var c = a.length, e = 0; e < a.length; e = c == a.length ? e + 1 : 0)
                                    l.place(a[e], d, "last");
                            else
                                l.place(a, d, "last");
                        return d
                    },
                    _ContentSetter: w("dojo.html._ContentSetter", null, {
                        node: "",
                        content: "",
                        id: "",
                        cleanContent: !1,
                        extractContent: !1,
                        parseContent: !1,
                        parserScope: C._scopeName,
                        startup: !0,
                        constructor: function(d, a) {
                            y.mixin(this, d || {});
                            a = this.node = m.byId(this.node || a);
                            this.id || (this.id = ["Setter", a ? a.id || a.tagName : "", h++].join("_"))
                        },
                        set: function(d, a) {
                            void 0 !== d && (this.content = d);
                            "number" == typeof d && (d = d.toString());
                            a && this._mixin(a);
                            this.onBegin();
                            this.setContent();
                            return (d = this.onEnd()) && d.then ? d : this.node
                        },
                        setContent: function() {
                            var d = this.node;
                            if (!d)
                                throw Error(this.declaredClass + ": setContent given no node");
                            try {
                                d = f._setNodeContent(d, this.content)
                            } catch (c) {
                                var a = this.onContentError(c);
                                try {
                                    d.innerHTML = a
                                } catch (e) {
                                    console.error("Fatal " + this.declaredClass + ".setContent could not change content due to " + e.message, e)
                                }
                            }
                            this.node = d
                        },
                        empty: function() {
                            this.parseDeferred && (this.parseDeferred.isResolved() || this.parseDeferred.cancel(),
                            delete this.parseDeferred);
                            this.parseResults && this.parseResults.length && (b.forEach(this.parseResults, function(d) {
                                d.destroy && d.destroy()
                            }),
                            delete this.parseResults);
                            l.empty(this.node)
                        },
                        onBegin: function() {
                            var d = this.content;
                            if (y.isString(d) && (this.cleanContent && (d = f._secureForInnerHtml(d)),
                            this.extractContent)) {
                                var a = d.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
                                a && (d = a[1])
                            }
                            this.empty();
                            this.content = d;
                            return this.node
                        },
                        onEnd: function() {
                            this.parseContent && this._parse();
                            return this.node
                        },
                        tearDown: function() {
                            delete this.parseResults;
                            delete this.parseDeferred;
                            delete this.node;
                            delete this.content
                        },
                        onContentError: function(d) {
                            return "Error occurred setting content: " + d
                        },
                        onExecError: function(d) {
                            return "Error occurred executing scripts: " + d
                        },
                        _mixin: function(d) {
                            var a = {}, c;
                            for (c in d)
                                c in a || (this[c] = d[c])
                        },
                        _parse: function() {
                            var d = this.node;
                            try {
                                var a = {};
                                b.forEach(["dir", "lang", "textDir"], function(e) {
                                    this[e] && (a[e] = this[e])
                                }, this);
                                var c = this;
                                this.parseDeferred = k.parse({
                                    rootNode: d,
                                    noStart: !this.startup,
                                    inherited: a,
                                    scope: this.parserScope
                                }).then(function(e) {
                                    return c.parseResults = e
                                }, function(e) {
                                    c._onError("Content", e, "Error parsing in _ContentSetter#" + c.id)
                                })
                            } catch (e) {
                                this._onError("Content", e, "Error parsing in _ContentSetter#" + this.id)
                            }
                        },
                        _onError: function(d, a, c) {
                            d = this["on" + d + "Error"].call(this, a);
                            c ? console.error(c, a) : d && f._setNodeContent(this.node, d, !0)
                        }
                    }),
                    set: function(d, a, c) {
                        void 0 == a && (console.warn("dojo.html.set: no cont argument provided, using empty string"),
                        a = "");
                        "number" == typeof a && (a = a.toString());
                        return c ? (new f._ContentSetter(y.mixin(c, {
                            content: a,
                            node: d
                        }))).set() : f._setNodeContent(d, a, !0)
                    }
                };
                y.setObject("dojo.html", f);
                return f
            })
        },
        "dojo/parser": function() {
            define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g) {
                function q(p) {
                    return eval("(" + p + ")")
                }
                function x(p) {
                    var r = p._nameCaseMap
                      , B = p.prototype;
                    if (!r || r._extendCnt < z) {
                        r = p._nameCaseMap = {};
                        for (var D in B)
                            "_" !== D.charAt(0) && (r[D.toLowerCase()] = D);
                        r._extendCnt = z
                    }
                    return r
                }
                function v(p, r) {
                    r || (r = C);
                    var B = r._dojoParserCtorMap || (r._dojoParserCtorMap = {})
                      , D = p.join();
                    if (!B[D]) {
                        for (var G = [], A = 0, E = p.length; A < E; A++) {
                            var H = p[A];
                            G[G.length] = B[H] = B[H] || b.getObject(H) || ~H.indexOf("/") && r(H)
                        }
                        p = G.shift();
                        B[D] = G.length ? p.createSubclass ? p.createSubclass(G) : p.extend.apply(p, G) : p
                    }
                    return B[D]
                }
                new Date("X");
                var z = 0;
                f.after(b, "extend", function() {
                    z++
                }, !0);
                var u = {
                    _clearCache: function() {
                        z++;
                        _ctorMap = {}
                    },
                    _functionFromScript: function(p, r) {
                        var B = ""
                          , D = ""
                          , G = p.getAttribute(r + "args") || p.getAttribute("args");
                        r = p.getAttribute("with");
                        G = (G || "").split(/\s*,\s*/);
                        r && r.length && w.forEach(r.split(/\s*,\s*/), function(A) {
                            B += "with(" + A + "){";
                            D += "}"
                        });
                        return new Function(G,B + p.innerHTML + D)
                    },
                    instantiate: function(p, r, B) {
                        r = r || {};
                        B = B || {};
                        var D = (B.scope || y._scopeName) + "Type"
                          , G = "data-" + (B.scope || y._scopeName) + "-"
                          , A = G + "type"
                          , E = G + "mixins"
                          , H = [];
                        w.forEach(p, function(J) {
                            var O = D in r ? r[D] : J.getAttribute(A) || J.getAttribute(D);
                            if (O) {
                                var V = J.getAttribute(E);
                                O = V ? [O].concat(V.split(/\s*,\s*/)) : [O];
                                H.push({
                                    node: J,
                                    types: O
                                })
                            }
                        });
                        return this._instantiate(H, r, B)
                    },
                    _instantiate: function(p, r, B, D) {
                        function G(A) {
                            r._started || B.noStart || w.forEach(A, function(E) {
                                "function" !== typeof E.startup || E._started || E.startup()
                            });
                            return A
                        }
                        p = w.map(p, function(A) {
                            var E = A.ctor || v(A.types, B.contextRequire);
                            if (!E)
                                throw Error("Unable to resolve constructor for: '" + A.types.join() + "'");
                            return this.construct(E, A.node, r, B, A.scripts, A.inherited)
                        }, this);
                        return D ? d(p).then(G) : G(p)
                    },
                    construct: function(p, r, B, D, G, A) {
                        function E(R) {
                            Y && b.setObject(Y, R);
                            for (da = 0; da < K.length; da++)
                                f[K[da].advice || "after"](R, K[da].method, b.hitch(R, K[da].func), !0);
                            for (da = 0; da < Z.length; da++)
                                Z[da].call(R);
                            for (da = 0; da < pa.length; da++)
                                R.watch(pa[da].prop, pa[da].func);
                            for (da = 0; da < L.length; da++)
                                t(R, L[da].event, L[da].func);
                            return R
                        }
                        var H = p && p.prototype;
                        D = D || {};
                        var J = {};
                        D.defaults && b.mixin(J, D.defaults);
                        A && b.mixin(J, A);
                        if (e("dom-attributes-explicit"))
                            var O = r.attributes;
                        else
                            e("dom-attributes-specified-flag") ? O = w.filter(r.attributes, function(R) {
                                return R.specified
                            }) : (A = (/^input$|^img$/i.test(r.nodeName) ? r : r.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g, "").replace(/^\s*<[a-zA-Z0-9]*\s*/, "").replace(/\s*>.*$/, ""),
                            O = w.map(A.split(/\s+/), function(R) {
                                var ha = R.toLowerCase();
                                return {
                                    name: R,
                                    value: "LI" == r.nodeName && "value" == R || "enctype" == ha ? r.getAttribute(ha) : r.getAttributeNode(ha).value
                                }
                            }));
                        var V = D.scope || y._scopeName;
                        A = "data-" + V + "-";
                        var aa = {};
                        "dojo" !== V && (aa[A + "props"] = "data-dojo-props",
                        aa[A + "type"] = "data-dojo-type",
                        aa[A + "mixins"] = "data-dojo-mixins",
                        aa[V + "type"] = "dojotype",
                        aa[A + "id"] = "data-dojo-id");
                        var da = 0, ea;
                        V = [];
                        for (var Y, ia; ea = O[da++]; ) {
                            var qa = ea.name
                              , wa = qa.toLowerCase();
                            ea = ea.value;
                            switch (aa[wa] || wa) {
                            case "data-dojo-type":
                            case "dojotype":
                            case "data-dojo-mixins":
                                break;
                            case "data-dojo-props":
                                ia = ea;
                                break;
                            case "data-dojo-id":
                            case "jsid":
                                Y = ea;
                                break;
                            case "data-dojo-attach-point":
                            case "dojoattachpoint":
                                J.dojoAttachPoint = ea;
                                break;
                            case "data-dojo-attach-event":
                            case "dojoattachevent":
                                J.dojoAttachEvent = ea;
                                break;
                            case "class":
                                J["class"] = r.className;
                                break;
                            case "style":
                                J.style = r.style && r.style.cssText;
                                break;
                            default:
                                if (qa in H || (qa = x(p)[wa] || qa),
                                qa in H)
                                    switch (typeof H[qa]) {
                                    case "string":
                                        J[qa] = ea;
                                        break;
                                    case "number":
                                        J[qa] = ea.length ? Number(ea) : NaN;
                                        break;
                                    case "boolean":
                                        J[qa] = "false" != ea.toLowerCase();
                                        break;
                                    case "function":
                                        "" === ea || -1 != ea.search(/[^\w\.]+/i) ? J[qa] = new Function(ea) : J[qa] = b.getObject(ea, !1) || new Function(ea);
                                        V.push(qa);
                                        break;
                                    default:
                                        wa = H[qa],
                                        J[qa] = wa && "length"in wa ? ea ? ea.split(/\s*,\s*/) : [] : wa instanceof Date ? "" == ea ? new Date("") : "now" == ea ? new Date : a.fromISOString(ea) : wa instanceof h ? y.baseUrl + ea : q(ea)
                                    }
                                else
                                    J[qa] = ea
                            }
                        }
                        for (O = 0; O < V.length; O++)
                            aa = V[O].toLowerCase(),
                            r.removeAttribute(aa),
                            r[aa] = null;
                        if (ia)
                            try {
                                ia = q.call(D.propsThis, "{" + ia + "}"),
                                b.mixin(J, ia)
                            } catch (R) {
                                throw Error(R.toString() + " in data-dojo-props\x3d'" + ia + "'");
                            }
                        b.mixin(J, B);
                        G || (G = p && (p._noScript || H._noScript) ? [] : n("\x3e script[type^\x3d'dojo/']", r));
                        var K = []
                          , Z = []
                          , pa = []
                          , L = [];
                        if (G)
                            for (da = 0; da < G.length; da++)
                                aa = G[da],
                                r.removeChild(aa),
                                B = aa.getAttribute(A + "event") || aa.getAttribute("event"),
                                D = aa.getAttribute(A + "prop"),
                                ia = aa.getAttribute(A + "method"),
                                V = aa.getAttribute(A + "advice"),
                                O = aa.getAttribute("type"),
                                aa = this._functionFromScript(aa, A),
                                B ? "dojo/connect" == O ? K.push({
                                    method: B,
                                    func: aa
                                }) : "dojo/on" == O ? L.push({
                                    event: B,
                                    func: aa
                                }) : J[B] = aa : "dojo/aspect" == O ? K.push({
                                    method: ia,
                                    advice: V,
                                    func: aa
                                }) : "dojo/watch" == O ? pa.push({
                                    prop: D,
                                    func: aa
                                }) : Z.push(aa);
                        p = (G = p.markupFactory || H.markupFactory) ? G(J, r, p) : new p(J,r);
                        return p.then ? p.then(E) : E(p)
                    },
                    scan: function(p, r) {
                        function B(wa) {
                            if (!wa.inherited) {
                                wa.inherited = {};
                                var K = wa.node
                                  , Z = B(wa.parent);
                                K = {
                                    dir: K.getAttribute("dir") || Z.dir,
                                    lang: K.getAttribute("lang") || Z.lang,
                                    textDir: K.getAttribute(O) || Z.textDir
                                };
                                for (var pa in K)
                                    K[pa] && (wa.inherited[pa] = K[pa])
                            }
                            return wa.inherited
                        }
                        var D = []
                          , G = []
                          , A = {}
                          , E = (r.scope || y._scopeName) + "Type"
                          , H = "data-" + (r.scope || y._scopeName) + "-"
                          , J = H + "type"
                          , O = H + "textdir";
                        H += "mixins";
                        var V = p.firstChild
                          , aa = r.inherited;
                        if (!aa) {
                            aa = function pa(K, Z) {
                                return K.getAttribute && K.getAttribute(Z) || K.parentNode && pa(K.parentNode, Z)
                            }
                            ;
                            aa = {
                                dir: aa(p, "dir"),
                                lang: aa(p, "lang"),
                                textDir: aa(p, O)
                            };
                            for (var da in aa)
                                aa[da] || delete aa[da]
                        }
                        da = {
                            inherited: aa
                        };
                        for (var ea, Y; ; )
                            if (V)
                                if (1 != V.nodeType)
                                    V = V.nextSibling;
                                else if (ea && "script" == V.nodeName.toLowerCase())
                                    (aa = V.getAttribute("type")) && /^dojo\/\w/i.test(aa) && ea.push(V),
                                    V = V.nextSibling;
                                else if (Y)
                                    V = V.nextSibling;
                                else if (aa = V.getAttribute(J) || V.getAttribute(E),
                                p = V.firstChild,
                                aa || p && (3 != p.nodeType || p.nextSibling)) {
                                    Y = null;
                                    if (aa) {
                                        var ia = V.getAttribute(H);
                                        ea = ia ? [aa].concat(ia.split(/\s*,\s*/)) : [aa];
                                        try {
                                            Y = v(ea, r.contextRequire)
                                        } catch (wa) {}
                                        Y || w.forEach(ea, function(wa) {
                                            ~wa.indexOf("/") && !A[wa] && (A[wa] = !0,
                                            G[G.length] = wa)
                                        });
                                        ia = Y && !Y.prototype._noScript ? [] : null;
                                        da = {
                                            types: ea,
                                            ctor: Y,
                                            parent: da,
                                            node: V,
                                            scripts: ia
                                        };
                                        da.inherited = B(da);
                                        D.push(da)
                                    } else
                                        da = {
                                            node: V,
                                            scripts: ea,
                                            parent: da
                                        };
                                    ea = ia;
                                    Y = V.stopParser || Y && Y.prototype.stopParser && !r.template;
                                    V = p
                                } else
                                    V = V.nextSibling;
                            else {
                                if (!da || !da.node)
                                    break;
                                V = da.node.nextSibling;
                                Y = !1;
                                da = da.parent;
                                ea = da.scripts
                            }
                        var qa = new c;
                        G.length ? (e("dojo-debug-messages") && console.warn("WARNING: Modules being Auto-Required: " + G.join(", ")),
                        (r.contextRequire || C)(G, function() {
                            qa.resolve(w.filter(D, function(wa) {
                                if (!wa.ctor)
                                    try {
                                        wa.ctor = v(wa.types, r.contextRequire)
                                    } catch (pa) {}
                                for (var K = wa.parent; K && !K.types; )
                                    K = K.parent;
                                var Z = wa.ctor && wa.ctor.prototype;
                                wa.instantiateChildren = !(Z && Z.stopParser && !r.template);
                                wa.instantiate = !K || K.instantiate && K.instantiateChildren;
                                return wa.instantiate
                            }))
                        })) : qa.resolve(D);
                        return qa.promise
                    },
                    _require: function(p, r) {
                        p = q("{" + p.innerHTML + "}");
                        var B = []
                          , D = []
                          , G = new c;
                        r = r && r.contextRequire || C;
                        for (var A in p)
                            B.push(A),
                            D.push(p[A]);
                        r(D, function() {
                            for (var E = 0; E < B.length; E++)
                                b.setObject(B[E], arguments[E]);
                            G.resolve(arguments)
                        });
                        return G.promise
                    },
                    _scanAmd: function(p, r) {
                        var B = new c
                          , D = B.promise;
                        B.resolve(!0);
                        var G = this;
                        n("script[type\x3d'dojo/require']", p).forEach(function(A) {
                            D = D.then(function() {
                                return G._require(A, r)
                            });
                            A.parentNode.removeChild(A)
                        });
                        return D
                    },
                    parse: function(p, r) {
                        !p || "string" == typeof p || "nodeType"in p || (r = p,
                        p = r.rootNode);
                        var B = p ? l.byId(p) : k.body();
                        r = r || {};
                        var D = r.template ? {
                            template: !0
                        } : {}
                          , G = []
                          , A = this;
                        p = this._scanAmd(B, r).then(function() {
                            return A.scan(B, r)
                        }).then(function(E) {
                            return A._instantiate(E, D, r, !0)
                        }).then(function(E) {
                            return G = G.concat(E)
                        }).otherwise(function(E) {
                            console.error("dojo/parser::parse() error", E);
                            throw E;
                        });
                        b.mixin(G, p);
                        return G
                    }
                };
                y.parser = u;
                m.parseOnLoad && g(100, u, "parse");
                return u
            })
        },
        "dojo/_base/url": function() {
            define(["./kernel"], function(C) {
                var y = /^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/
                  , b = /^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/
                  , w = function() {
                    for (var m = arguments, l = [m[0]], k = 1; k < m.length; k++)
                        if (m[k]) {
                            var h = new w(m[k] + "");
                            l = new w(l[0] + "");
                            if ("" == h.path && !h.scheme && !h.authority && !h.query)
                                null != h.fragment && (l.fragment = h.fragment),
                                h = l;
                            else if (!h.scheme && (h.scheme = l.scheme,
                            !h.authority && (h.authority = l.authority,
                            "/" != h.path.charAt(0)))) {
                                l = (l.path.substring(0, l.path.lastIndexOf("/") + 1) + h.path).split("/");
                                for (var f = 0; f < l.length; f++)
                                    "." == l[f] ? f == l.length - 1 ? l[f] = "" : (l.splice(f, 1),
                                    f--) : 0 < f && (1 != f || "" != l[0]) && ".." == l[f] && ".." != l[f - 1] && (f == l.length - 1 ? (l.splice(f, 1),
                                    l[f - 1] = "") : (l.splice(f - 1, 2),
                                    f -= 2));
                                h.path = l.join("/")
                            }
                            l = [];
                            h.scheme && l.push(h.scheme, ":");
                            h.authority && l.push("//", h.authority);
                            l.push(h.path);
                            h.query && l.push("?", h.query);
                            h.fragment && l.push("#", h.fragment)
                        }
                    this.uri = l.join("");
                    m = this.uri.match(y);
                    this.scheme = m[2] || (m[1] ? "" : null);
                    this.authority = m[4] || (m[3] ? "" : null);
                    this.path = m[5];
                    this.query = m[7] || (m[6] ? "" : null);
                    this.fragment = m[9] || (m[8] ? "" : null);
                    null != this.authority && (m = this.authority.match(b),
                    this.user = m[3] || null,
                    this.password = m[4] || null,
                    this.host = m[6] || m[7],
                    this.port = m[9] || null)
                };
                w.prototype.toString = function() {
                    return this.uri
                }
                ;
                return C._Url = w
            })
        },
        "dojo/promise/all": function() {
            define(["../_base/array", "../_base/lang", "../Deferred", "../when"], function(C, y, b, w) {
                var m = C.some;
                return function(l) {
                    var k, h;
                    y.isArray(l) ? h = l : l && "object" === typeof l && (k = l);
                    var f = [];
                    if (k) {
                        h = [];
                        for (var d in k)
                            Object.hasOwnProperty.call(k, d) && (f.push(d),
                            h.push(k[d]));
                        var a = {}
                    } else
                        h && (a = []);
                    if (!h || !h.length)
                        return (new b).resolve(a);
                    var c = new b;
                    c.promise.always(function() {
                        a = f = null
                    });
                    var e = h.length;
                    m(h, function(n, t) {
                        k || f.push(t);
                        w(n, function(g) {
                            c.isFulfilled() || (a[f[t]] = g,
                            0 === --e && c.resolve(a))
                        }, c.reject);
                        return c.isFulfilled()
                    });
                    return c.promise
                }
            })
        },
        "dojo/date/stamp": function() {
            define(["../_base/lang", "../_base/array"], function(C, y) {
                var b = {};
                C.setObject("dojo.date.stamp", b);
                b.fromISOString = function(w, m) {
                    b._isoRegExp || (b._isoRegExp = /^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);
                    var l = b._isoRegExp.exec(w);
                    w = null;
                    if (l) {
                        l.shift();
                        l[1] && l[1]--;
                        l[6] && (l[6] *= 1E3);
                        m && (m = new Date(m),
                        y.forEach(y.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "), function(f) {
                            return m["get" + f]()
                        }), function(f, d) {
                            l[d] = l[d] || f
                        }));
                        w = new Date(l[0] || 1970,l[1] || 0,l[2] || 1,l[3] || 0,l[4] || 0,l[5] || 0,l[6] || 0);
                        100 > l[0] && w.setFullYear(l[0] || 1970);
                        var k = 0
                          , h = l[7] && l[7].charAt(0);
                        "Z" != h && (k = 60 * (l[8] || 0) + (Number(l[9]) || 0),
                        "-" != h && (k *= -1));
                        h && (k -= w.getTimezoneOffset());
                        k && w.setTime(w.getTime() + 6E4 * k)
                    }
                    return w
                }
                ;
                b.toISOString = function(w, m) {
                    var l = function(d) {
                        return 10 > d ? "0" + d : d
                    };
                    m = m || {};
                    var k = []
                      , h = m.zulu ? "getUTC" : "get"
                      , f = "";
                    "time" != m.selector && (f = w[h + "FullYear"](),
                    f = ["0000".substr((f + "").length) + f, l(w[h + "Month"]() + 1), l(w[h + "Date"]())].join("-"));
                    k.push(f);
                    "date" != m.selector && (f = [l(w[h + "Hours"]()), l(w[h + "Minutes"]()), l(w[h + "Seconds"]())].join(":"),
                    h = w[h + "Milliseconds"](),
                    m.milliseconds && (f += "." + (100 > h ? "0" : "") + l(h)),
                    m.zulu ? f += "Z" : "time" != m.selector && (w = w.getTimezoneOffset(),
                    m = Math.abs(w),
                    f += (0 < w ? "-" : "+") + l(Math.floor(m / 60)) + ":" + l(m % 60)),
                    k.push(f));
                    return k.join("T")
                }
                ;
                return b
            })
        },
        "dijit/_DialogMixin": function() {
            define(["dojo/_base/declare", "./a11y"], function(C, y) {
                return C("dijit._DialogMixin", null, {
                    actionBarTemplate: "",
                    execute: function() {},
                    onCancel: function() {},
                    onExecute: function() {},
                    _onSubmit: function() {
                        this.onExecute();
                        this.execute(this.get("value"))
                    },
                    _getFocusItems: function() {
                        var b = y._getTabNavigable(this.domNode);
                        this._firstFocusItem = b.lowest || b.first || this.closeButtonNode || this.domNode;
                        this._lastFocusItem = b.last || b.highest || this._firstFocusItem
                    }
                })
            })
        },
        "dijit/form/_FormMixin": function() {
            define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "), function(C, y, b, w, m, l) {
                return y("dijit.form._FormMixin", null, {
                    state: "",
                    _getDescendantFormWidgets: function(k) {
                        var h = [];
                        C.forEach(k || this.getChildren(), function(f) {
                            "value"in f ? h.push(f) : h = h.concat(this._getDescendantFormWidgets(f.getChildren()))
                        }, this);
                        return h
                    },
                    reset: function() {
                        C.forEach(this._getDescendantFormWidgets(), function(k) {
                            k.reset && k.reset()
                        })
                    },
                    validate: function() {
                        var k = !1;
                        return C.every(C.map(this._getDescendantFormWidgets(), function(h) {
                            h._hasBeenBlurred = !0;
                            var f = h.disabled || !h.validate || h.validate();
                            f || k || (l.scrollIntoView(h.containerNode || h.domNode),
                            h.focus(),
                            k = !0);
                            return f
                        }), function(h) {
                            return h
                        })
                    },
                    setValues: function(k) {
                        b.deprecated(this.declaredClass + "::setValues() is deprecated. Use set('value', val) instead.", "", "2.0");
                        return this.set("value", k)
                    },
                    _setValueAttr: function(k) {
                        var h = {};
                        C.forEach(this._getDescendantFormWidgets(), function(c) {
                            c.name && (h[c.name] || (h[c.name] = [])).push(c)
                        });
                        for (var f in h)
                            if (h.hasOwnProperty(f)) {
                                var d = h[f]
                                  , a = w.getObject(f, !1, k);
                                void 0 !== a && (a = [].concat(a),
                                "boolean" == typeof d[0].checked ? C.forEach(d, function(c) {
                                    c.set("value", -1 != C.indexOf(a, c._get("value")))
                                }) : d[0].multiple ? d[0].set("value", a) : C.forEach(d, function(c, e) {
                                    c.set("value", a[e])
                                }))
                            }
                    },
                    getValues: function() {
                        b.deprecated(this.declaredClass + "::getValues() is deprecated. Use get('value') instead.", "", "2.0");
                        return this.get("value")
                    },
                    _getValueAttr: function() {
                        var k = {};
                        C.forEach(this._getDescendantFormWidgets(), function(h) {
                            var f = h.name;
                            if (f && !h.disabled) {
                                var d = h.get("value");
                                "boolean" == typeof h.checked ? /Radio/.test(h.declaredClass) ? !1 !== d ? w.setObject(f, d, k) : (d = w.getObject(f, !1, k),
                                void 0 === d && w.setObject(f, null, k)) : (h = w.getObject(f, !1, k),
                                h || (h = [],
                                w.setObject(f, h, k)),
                                !1 !== d && h.push(d)) : (h = w.getObject(f, !1, k),
                                "undefined" != typeof h ? w.isArray(h) ? h.push(d) : w.setObject(f, [h, d], k) : w.setObject(f, d, k))
                            }
                        });
                        return k
                    },
                    isValid: function() {
                        return "" == this.state
                    },
                    onValidStateChange: function() {},
                    _getState: function() {
                        var k = C.map(this._descendants, function(h) {
                            return h.get("state") || ""
                        });
                        return 0 <= C.indexOf(k, "Error") ? "Error" : 0 <= C.indexOf(k, "Incomplete") ? "Incomplete" : ""
                    },
                    disconnectChildren: function() {},
                    connectChildren: function(k) {
                        this._descendants = this._getDescendantFormWidgets();
                        C.forEach(this._descendants, function(h) {
                            h._started || h.startup()
                        });
                        k || this._onChildChange()
                    },
                    _onChildChange: function(k) {
                        k && "state" != k && "disabled" != k || this._set("state", this._getState());
                        k && "value" != k && "disabled" != k && "checked" != k || (this._onChangeDelayTimer && this._onChangeDelayTimer.remove(),
                        this._onChangeDelayTimer = this.defer(function() {
                            delete this._onChangeDelayTimer;
                            this._set("value", this.get("value"))
                        }, 10))
                    },
                    startup: function() {
                        this.inherited(arguments);
                        this._descendants = this._getDescendantFormWidgets();
                        this.value = this.get("value");
                        this.state = this._getState();
                        var k = this;
                        this.own(m(this.containerNode, "attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked", function(h) {
                            h.target != k.domNode && k._onChildChange(h.type.replace("attrmodified-", ""))
                        }));
                        this.watch("state", function(h, f, d) {
                            this.onValidStateChange("" == d)
                        })
                    },
                    destroy: function() {
                        this.inherited(arguments)
                    }
                })
            })
        },
        "esri/main": function() {
            define(["./kernel", "dojo/i18n!./nls/jsapi", "./config", "./sniff"], function(C, y) {
                C.bundle = y;
                return C
            })
        },
        "esri/kernel": function() {
            define(["dojo/_base/kernel", "dojo/_base/config", "dojo/has"], function(C, y, b) {
                var w = function() {
                    return this
                }()
                  , m = w.location
                  , l = m.pathname
                  , k = m.protocol;
                m = {
                    version: "3.37",
                    _appBaseUrl: k + "//" + m.host + l.substring(0, l.lastIndexOf(l.split("/")[l.split("/").length - 1]))
                };
                y.noGlobals || (w.esri = m);
                C.isAsync || b.add("extend-esri", 1);
                (m.dijit = m.dijit || {})._arcgisUrl = ("http:" === k || "https:" === k ? k : "http:") + "//www.arcgis.com/sharing/rest";
                return m
            })
        },
        "esri/config": function() {
            define(["dojo/_base/config", "dojo/topic", "dojo/has", "./kernel"], function(C, y, b, w) {
                var m = function() {
                    return this
                }()
                  , l = {
                    defaults: {
                        screenDPI: 96,
                        geometryService: null,
                        kmlService: null,
                        map: {
                            width: 400,
                            height: 400,
                            layerNamePrefix: "layer",
                            graphicsLayerNamePrefix: "graphicsLayer",
                            slider: {
                                left: "30px",
                                top: "30px",
                                width: null,
                                height: "200px"
                            },
                            sliderLabel: {
                                tick: 5,
                                labels: null,
                                style: "width:2em; font-family:Verdana; font-size:75%;"
                            },
                            sliderChangeImmediate: !0,
                            zoomSymbol: {
                                color: [0, 0, 0, 64],
                                outline: {
                                    color: [255, 0, 0, 255],
                                    width: 1.25,
                                    style: "esriSLSSolid"
                                },
                                style: "esriSFSSolid"
                            },
                            zoomDuration: 500,
                            zoomRate: 25,
                            zoomAnimationThrottled: !1,
                            panDuration: 350,
                            panRate: 25,
                            logoLink: "http://www.esri.com"
                        },
                        autoSpatialIndexing: m.Worker && !1,
                        io: {
                            errorHandler: function(k, h) {
                                y.publish("esri.Error", [k])
                            },
                            proxyUrl: null,
                            alwaysUseProxy: !1,
                            useCors: "with-credentials",
                            corsEnabledServers: [/^https?:\/\/.+\.arcgis\.com(\/|$)/i, "server.arcgisonline.com", "services.arcgisonline.com", "www.arcgis.com", "js.arcgis.com", "jsdev.arcgis.com", "jsqa.arcgis.com", "tiles.arcgis.com", "tiles1.arcgis.com", "tiles2.arcgis.com", "tiles3.arcgis.com", "tiles4.arcgis.com", "basemaps.arcgis.com", "basemapsbeta.arcgis.com", "basemaps-api.arcgis.com", "elevation3d.arcgis.com", "services.arcgis.com", "services1.arcgis.com", "services2.arcgis.com", "services3.arcgis.com", "services4.arcgis.com", "services5.arcgis.com", "services6.arcgis.com", "services7.arcgis.com", "services8.arcgis.com", "services9.arcgis.com", "cdn.arcgis.com", "cdn-a.arcgis.com", "cdn-b.arcgis.com", "static.arcgis.com", "utility.arcgis.com", "utility.arcgisonline.com", "geocode.arcgis.com", "geoenrich.arcgis.com", "qaext.arcgis.com", "staticqa.arcgis.com", "tilesqa.arcgis.com", "servicesqa.arcgis.com", "servicesqa1.arcgis.com", "servicesqa2.arcgis.com", "servicesqa3.arcgis.com", "geocodeqa.arcgis.com", "geoenrichqa.arcgis.com", "dev.arcgis.com", "devext.arcgis.com", "localvtiles.arcgis.com", "staticdev.arcgis.com", "tilesdevext.arcgis.com", "elevation3ddev.arcgis.com", "servicesdev.arcgis.com", "servicesdev1.arcgis.com", "servicesdev2.arcgis.com", "servicesdev3.arcgis.com", "geocodedev.arcgis.com", "geoenrichdev.arcgis.com", "basemapsdev.arcgis.com", "basemapsdev-api.arcgis.com", "basemapsbetadev.arcgis.com"],
                            corsDetection: m.cordova ? !1 : !0,
                            corsDetectionTimeout: 15,
                            corsStatus: {},
                            webTierAuthServers: [],
                            proxyRules: [],
                            postLength: 2E3,
                            timeout: 6E4,
                            useWorkers: "on-request",
                            maxRequestWorkers: 5,
                            httpsDomains: "arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")
                        },
                        workers: {
                            loaderConfig: {
                                has: {},
                                paths: {},
                                map: {},
                                packages: []
                            }
                        }
                    }
                };
                b("extend-esri") && (w.config = l);
                C.noGlobals || (m.esriConfig = l);
                return l
            })
        },
        "esri/sniff": function() {
            define(["dojo/_base/sniff", "dojo/global", "./kernel"], function(C, y, b) {
                var w = C("ff"), m = C("ie"), l = void 0 === m && 7 <= C("trident"), k = C("edge"), h = C("webkit"), f = C("opera"), d = C("chrome"), a = C("safari"), c = navigator.userAgent, e;
                (e = c.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i)) && C.add("esri-iphone", parseFloat(e[2].replace("_", ".")));
                (e = c.match(/Android\s+(\d+(\.\d+)*)/i)) && C.add("esri-android", parseFloat(e[1]));
                (e = c.match(/Fennec\/(\d+\.\d+)/i)) && C.add("esri-fennec", parseFloat(e[1]));
                0 <= c.indexOf("BlackBerry") && 0 <= c.indexOf("WebKit") && C.add("esri-blackberry", 1);
                C.add("esri-touch", C("esri-iphone") || C("esri-android") || C("esri-blackberry") || 6 <= C("esri-fennec") || (w || h) && (document.createTouch || "ontouchstart"in y || y.TouchEvent && 0 < navigator.maxTouchPoints) ? !0 : !1);
                (e = c.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i)) && C.add("esri-mobile", !!e);
                C.add("esri-pointer", !w && (navigator.pointerEnabled || navigator.msPointerEnabled || !!y.PointerEvent));
                b._getDOMAccessor = function(t) {
                    var g = "";
                    w ? g = "Moz" : h ? g = "Webkit" : m ? g = "ms" : f && (g = "O");
                    return g + t.charAt(0).toUpperCase() + t.substr(1)
                }
                ;
                C.add("esri-phonegap", !!y.cordova);
                C.add("esri-cors", C("esri-phonegap") || y.XMLHttpRequest && "withCredentials"in new XMLHttpRequest);
                C.add("esri-file-upload", y.FormData && y.FileList ? !0 : !1);
                C.add("esri-script-sandbox", function() {
                    return "MessageChannel"in y && "HTMLIFrameElement"in y && "sandbox"in HTMLIFrameElement.prototype
                });
                C.add("esri-secure-context", function() {
                    if ("isSecureContext"in y)
                        return y.isSecureContext;
                    if (y.location && y.location.origin)
                        return 0 === y.location.origin.indexOf("https:")
                });
                C.add("esri-wasm", "WebAssembly"in y);
                C.add("esri-workers", y.Worker ? !0 : !1);
                C.add("esri-featurelayer-webgl", !1);
                if (c = C("esri-featurelayer-webgl")) {
                    var n = C("esri-mobile");
                    e = n ? 1 : 2;
                    n = n ? 1 : 3;
                    "object" === typeof c ? (c.maxDrillLevel = null == c.maxDrillLevel ? e : c.maxDrillLevel,
                    c.maxRecordCountFactor = null == c.maxRecordCountFactor ? n : c.maxRecordCountFactor,
                    c.enablePBFQuery = null == c.enablePBFQuery ? !0 : c.enablePBFQuery) : C.add("esri-featurelayer-webgl", {
                        maxDrillLevel: e,
                        maxRecordCountFactor: n,
                        enablePBFQuery: !0
                    }, null, !0)
                }
                C.add("esri-featurelayer-webgl-labeling", !1);
                C.add("esri-pbf", !m || 10 <= m);
                C.add("esri-featurelayer-pbf", !0);
                C.add("esri-transforms", l || k || 9 <= m || 3.5 <= w || 4 <= d || 3.1 <= a || 10.5 <= f || 3.2 <= C("esri-iphone") || 2.1 <= C("esri-android"));
                C.add("esri-transitions", l || k || 10 <= m || 4 <= w || 4 <= d || 3.1 <= a || 10.5 <= f || 3.2 <= C("esri-iphone") || 2.1 <= C("esri-android"));
                C.add("esri-transforms3d", l || k || 10 <= w || 12 <= d || 4 <= a || 3.2 <= C("esri-iphone") || 3 <= C("esri-android"));
                C.add("esri-url-encodes-apostrophe", function() {
                    if (!y.document)
                        return !1;
                    var t = y.document.createElement("a");
                    t.href = "?'";
                    return -1 < t.href.indexOf("?%27")
                });
                3 > C("esri-android") && (C.add("esri-transforms", !1, !1, !0),
                C.add("esri-transitions", !1, !1, !0),
                C.add("esri-transforms3d", !1, !1, !0));
                C.add("esri-will-change", C("esri-transforms") && (52 <= d || 11.1 <= a));
                b._css = function(t) {
                    var g = C("esri-transforms3d");
                    void 0 !== t && null !== t ? g = t : g && (d || a && !C("esri-iphone")) && (g = !1);
                    var q = g ? "translate3d(" : "translate("
                      , x = g ? d ? ",-1px)" : ",0px)" : ")"
                      , v = g ? "scale3d(" : "scale("
                      , z = g ? ",1)" : ")"
                      , u = g ? "rotate3d(0,0,1," : "rotate("
                      , p = g ? "matrix3d(" : "matrix("
                      , r = g ? ",0,0," : ","
                      , B = g ? ",0,0,0,0,1,0," : ","
                      , D = g ? ",0,1)" : ")";
                    return {
                        names: {
                            transition: h && "-webkit-transition" || w && "MozTransition" || f && "OTransition" || m && "msTransition" || "transition",
                            transform: h && "-webkit-transform" || w && "MozTransform" || f && "OTransform" || m && "msTransform" || "transform",
                            transformName: h && "-webkit-transform" || w && "-moz-transform" || f && "-o-transform" || m && "-ms-transform" || "transform",
                            origin: h && "-webkit-transform-origin" || w && "MozTransformOrigin" || f && "OTransformOrigin" || m && "msTransformOrigin" || "transformOrigin",
                            endEvent: h && "webkitTransitionEnd" || w && "transitionend" || f && "oTransitionEnd" || m && "MSTransitionEnd" || "transitionend"
                        },
                        translate: function(G, A) {
                            return q + G + "px," + A + "px" + x
                        },
                        scale: function(G) {
                            return v + G + "," + G + z
                        },
                        rotate: function(G) {
                            return u + G + "deg)"
                        },
                        matrix: function(G) {
                            return p + G.xx + "," + G.xy + r + G.yx + "," + G.yy + B + G.dx.toFixed(10) + (w && 59 >= w ? "px," : ",") + G.dy.toFixed(10) + (w && 59 >= w ? "px" : "") + D
                        },
                        getScaleFromMatrix: function(G) {
                            if (!G)
                                return 1;
                            G = G.toLowerCase();
                            var A = -1 < G.indexOf("matrix3d") ? "matrix3d(" : "matrix(";
                            return Number(G.substring(A.length, G.indexOf(",")))
                        }
                    }
                }
                ;
                C("extend-esri") && (b.isiPhone = C("esri-iphone"),
                b.isAndroid = C("esri-android"),
                b.isFennec = C("esri-fennec"),
                b.isBlackBerry = C("esri-blackberry"),
                b.isTouchEnabled = C("esri-touch"),
                b.isPointerEnabled = C("esri-pointer"),
                b._hasCors = C("esri-cors"),
                b._hasFileUpload = C("esri-file-upload"),
                b._hasTransforms = C("esri-transforms"),
                b._hasTransitions = C("esri-transitions"),
                b._has3DTransforms = C("esri-transforms3d"));
                return C
            })
        },
        "esri/map": function() {
            define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B) {
                var D = {
                    up: "panUp",
                    right: "panRight",
                    down: "panDown",
                    left: "panLeft"
                }
                  , G = {
                    upperRight: "panUpperRight",
                    lowerRight: "panLowerRight",
                    lowerLeft: "panLowerLeft",
                    upperLeft: "panUpperLeft"
                }
                  , A = w.connect
                  , E = w.disconnect
                  , H = e.create
                  , J = t.set
                  , O = m.hitch
                  , V = n.getMarginBox
                  , aa = y.deprecated
                  , da = m.mixin
                  , ea = 0;
                y = b(p, {
                    declaredClass: "esri.Map",
                    constructor: function(Y, ia) {
                        ia = ia || {};
                        da(this, {
                            _slider: null,
                            _navDiv: null,
                            _mapParams: da({
                                attributionWidth: .45,
                                slider: !0,
                                nav: !1,
                                logo: !0,
                                sliderStyle: "small",
                                sliderPosition: "top-left",
                                sliderOrientation: "vertical",
                                autoResize: !0
                            }, ia)
                        });
                        da(this, {
                            isMapNavigation: null != ia.isMapNavigation ? ia.isMapNavigation : !0,
                            isDoubleClickZoom: null != ia.isDoubleClickZoom ? ia.isDoubleClickZoom : !0,
                            isClickRecenter: null != ia.isClickRecenter ? ia.isClickRecenter : !0,
                            isPan: null != ia.isPan ? ia.isPan : !0,
                            isRubberBandZoom: null != ia.isRubberBandZoom ? ia.isRubberBandZoom : !0,
                            isPinchZoom: null != ia.isPinchZoom ? ia.isPinchZoom : !0,
                            isKeyboardNavigation: null != ia.isKeyboardNavigation ? ia.isKeyboardNavigation : !0,
                            isScrollWheel: null != ia.isScrollWheel ? ia.isScrollWheel : !0,
                            isShiftDoubleClickZoom: !1,
                            isScrollWheelZoom: !1,
                            isPanArrows: !1,
                            isZoomSlider: !1
                        });
                        m.isFunction(x._css) && (x._css = x._css(this._mapParams.force3DTransforms),
                        this.force3DTransforms = this._mapParams.force3DTransforms);
                        Y = z("esri-transforms") && z("esri-transitions");
                        this.navigationMode = this._mapParams.navigationMode || Y && "css-transforms" || "classic";
                        "css-transforms" !== this.navigationMode || Y || (this.navigationMode = "classic");
                        this.fadeOnZoom = u.isDefined(this._mapParams.fadeOnZoom) ? this._mapParams.fadeOnZoom : "css-transforms" === this.navigationMode;
                        "css-transforms" !== this.navigationMode && (this.fadeOnZoom = !1);
                        this.setMapCursor("default");
                        this.smartNavigation = ia && ia.smartNavigation;
                        if (!(u.isDefined(this.smartNavigation) || !z("mac") || z("esri-touch") || z("esri-pointer") || 3.5 >= z("ff"))) {
                            var qa = navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);
                            qa && u.isDefined(qa[1]) && u.isDefined(qa[3]) && (Y = parseInt(qa[1], 10),
                            qa = parseInt(qa[3], 10),
                            this.smartNavigation = 10 < Y || 10 === Y && 6 <= qa)
                        }
                        this.showAttribution = u.isDefined(this._mapParams.showAttribution) ? this._mapParams.showAttribution : !0;
                        this._onLoadHandler_connect = A(this, "onLoad", this, "_onLoadInitNavsHandler");
                        var wa = H("div", {
                            class: "esriControlsBR" + (this._mapParams.nav ? " withPanArrows" : "")
                        }, this.root);
                        if (this.showAttribution)
                            if (Y = m.getObject("esri.dijit.Attribution", !1))
                                this._initAttribution(Y, wa);
                            else {
                                var K = ea++
                                  , Z = this;
                                this._rids && this._rids.push(K);
                                C(["./dijit/Attribution"], function(pa) {
                                    var L = Z._rids ? l.indexOf(Z._rids, K) : -1;
                                    -1 !== L && (Z._rids.splice(L, 1),
                                    Z._initAttribution(pa, wa))
                                })
                            }
                        this._mapParams.logo && (Y = {},
                        6 === z("ie") && (Y.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'" + C.toUrl("./images/map/logo-med.png") + "')"),
                        this._ogol = H("div", {
                            style: Y,
                            tabIndex: "0",
                            title: "Esri"
                        }, wa),
                        this._setLogoSize(),
                        this._onMapResizeLogo_connect = A(this, "onResize", this, "_setLogoSize"),
                        this._ogol_connect = A(this._ogol, g, this, "_openLogoLink"));
                        this.navigationManager = new r(this);
                        ia && ia.basemap && (this._onLoadFix = !0,
                        this.setBasemap(ia.basemap),
                        this._onLoadFix = !1);
                        if (this.autoResize = this._mapParams.autoResize)
                            ia = this._getEnclosingResizableWidget(this.container) || window,
                            Y = this.resize,
                            this._rszSignal = h.pausable(ia, "resize", Y),
                            this._oriSignal = h.pausable(window, "orientationchange", Y),
                            f.after(ia, "resize", Y, !0),
                            this._startResizeTimer()
                    },
                    _startResizeTimer: function() {
                        clearTimeout(this._persistentTimer);
                        this._persistentTimer = setTimeout(this._timedResize, 2 * this.resizeDelay)
                    },
                    _getEnclosingResizableWidget: function(Y) {
                        var ia = q.getEnclosingWidget(Y);
                        return ia ? ia.resize ? ia : this._getEnclosingResizableWidget(Y.parentNode) : ia
                    },
                    _setLogoSize: function() {
                        this._ogol && (25E4 > this.root.clientWidth * this.root.clientHeight ? (c.remove(this._ogol, "logo-med"),
                        c.add(this._ogol, "logo-sm")) : (c.remove(this._ogol, "logo-sm"),
                        c.add(this._ogol, "logo-med")))
                    },
                    _initAttribution: function(Y, ia) {
                        ia = H("span", {
                            class: "esriAttribution"
                        }, ia, "first");
                        J(ia, "maxWidth", Math.floor(this.width * this._mapParams.attributionWidth) + "px");
                        this._connects.push(A(ia, g, function() {
                            c.contains(this, "esriAttributionOpen") ? c.remove(this, "esriAttributionOpen") : this.scrollWidth > this.clientWidth && c.add(this, "esriAttributionOpen")
                        }));
                        this.attribution = new Y({
                            map: this
                        },ia)
                    },
                    _cleanUp: function() {
                        this.disableMapNavigation();
                        this.navigationManager.destroy();
                        var Y = this._slider;
                        Y && Y.destroy && !Y._destroyed && Y.destroy();
                        Y = this._navDiv;
                        var ia = this.attribution;
                        Y && e.destroy(Y);
                        ia && ia.destroy();
                        this._connects.push(this._slider_connect, this._ogol_connect, this._rszSignal, this._oriSignal);
                        l.forEach(this._connects, E);
                        clearInterval(this._persistentTimer);
                        this.attribution = this.navigationManager = this._rids = this._connects = this._slider_connect = this._ogol_connect = this._rszSignal = this._oriSignal = this._persistentTimer = null;
                        this.inherited("_cleanUp", arguments)
                    },
                    _isPanningOrZooming: function() {
                        return this.__panning || this.__zooming
                    },
                    _canZoom: function(Y) {
                        var ia = this.getLevel();
                        return !this.__tileInfo || !(ia === this.getMinZoom() && 0 > Y || ia === this.getMaxZoom() && 0 < Y)
                    },
                    _onLoadInitNavsHandler: function() {
                        this._evalMapNavigation();
                        this._createNav();
                        if ("small" === this._mapParams.sliderStyle || !this._createSlider)
                            this._createSimpleSlider();
                        else if (this._mapParams.slider) {
                            var Y = -1 !== this._getSliderClass(!0).indexOf("Horizontal");
                            Y = [Y ? "dijit.form.HorizontalSlider" : "dijit.form.VerticalSlider", Y ? "dijit.form.HorizontalRule" : "dijit.form.VerticalRule", Y ? "dijit.form.HorizontalRuleLabels" : "dijit.form.VerticalRuleLabels"];
                            if (l.some(Y, function(wa) {
                                return !m.getObject(wa, !1)
                            })) {
                                Y = l.map(Y, function(wa) {
                                    return wa.replace(/\./g, "/")
                                });
                                var ia = ea++
                                  , qa = this;
                                this._rids && this._rids.push(ia);
                                C(Y, function() {
                                    var wa = qa._rids ? l.indexOf(qa._rids, ia) : -1;
                                    -1 !== wa && (qa._rids.splice(wa, 1),
                                    qa._createSlider.apply(qa, arguments))
                                })
                            } else
                                Y = l.map(Y, function(wa) {
                                    return m.getObject(wa, !1)
                                }),
                                this._createSlider.apply(this, Y)
                        }
                        E(this._onLoadHandler_connect)
                    },
                    _createNav: function() {
                        if (this._mapParams.nav) {
                            var Y, ia = c.add, qa = this.id;
                            this._navDiv = H("div", {
                                id: qa + "_navdiv"
                            }, this.root);
                            ia(this._navDiv, "navDiv");
                            var wa = this.width / 2
                              , K = this.height / 2;
                            for (Y in D) {
                                var Z = D[Y];
                                var pa = H("div", {
                                    id: qa + "_pan_" + Y
                                }, this._navDiv);
                                ia(pa, "fixedPan " + Z);
                                if ("up" === Y || "down" === Y) {
                                    var L = parseInt(V(pa).w, 10) / 2;
                                    J(pa, {
                                        left: wa - L + "px",
                                        zIndex: 30
                                    })
                                } else
                                    L = parseInt(V(pa).h, 10) / 2,
                                    J(pa, {
                                        top: K - L + "px",
                                        zIndex: 30
                                    });
                                this._connects.push(A(pa, "onclick", O(this, this[Z])))
                            }
                            this._onMapResizeNavHandler_connect = A(this, "onResize", this, "_onMapResizeNavHandler");
                            for (Y in G)
                                Z = G[Y],
                                pa = H("div", {
                                    id: qa + "_pan_" + Y,
                                    style: {
                                        zIndex: 30
                                    }
                                }, this._navDiv),
                                ia(pa, "fixedPan " + Z),
                                this._connects.push(A(pa, "onclick", O(this, this[Z])));
                            this.isPanArrows = !0
                        }
                    },
                    _onMapResizeNavHandler: function(Y, ia, qa) {
                        Y = this.id;
                        ia /= 2;
                        qa /= 2;
                        var wa = d.byId, K;
                        for (K in D) {
                            var Z = wa(Y + "_pan_" + K);
                            if ("up" === K || "down" === K) {
                                var pa = parseInt(V(Z).w, 10) / 2;
                                J(Z, "left", ia - pa + "px")
                            } else
                                pa = parseInt(V(Z).h, 10) / 2,
                                J(Z, "top", qa - pa + "px")
                        }
                    },
                    _createSimpleSlider: function() {
                        if (this._mapParams.slider) {
                            var Y = this._slider = H("div", {
                                id: this.id + "_zoom_slider",
                                class: this._getSliderClass(),
                                style: {
                                    zIndex: 30
                                }
                            })
                              , ia = H("div", {
                                class: "esriSimpleSliderIncrementButton",
                                tabIndex: "0",
                                role: "button"
                            }, Y)
                              , qa = H("div", {
                                class: "esriSimpleSliderDecrementButton",
                                tabIndex: "0",
                                role: "button"
                            }, Y);
                            this._addZoomButtonTooltips(ia, qa);
                            this._incButton = ia;
                            this._decButton = qa;
                            this._simpleSliderZoomHandler(null, null, null, this.getLevel());
                            var wa = B.widgets.zoomSlider;
                            this._addZoomButtonIcon(ia, "+", wa.zoomIn);
                            this._addZoomButtonIcon(qa, "\x26minus;", wa.zoomOut);
                            8 > z("ie") && c.add(qa, "dj_ie67Fix");
                            this._connects.push(A(ia, g, this, this._simpleSliderChangeHandler));
                            this._connects.push(A(qa, g, this, this._simpleSliderChangeHandler));
                            (-1 < this.getMaxZoom() || -1 < this.getMinZoom()) && this._connects.push(A(this, "onZoomEnd", this, this._simpleSliderZoomHandler));
                            10 > z("ie") && d.setSelectable(Y, !1);
                            this.root.appendChild(Y);
                            this.isZoomSlider = !0
                        }
                    },
                    _simpleSliderChangeHandler: function(Y) {
                        k.stop(Y);
                        Y = -1 !== Y.currentTarget.className.indexOf("IncrementButton") ? !0 : !1;
                        this._extentUtil({
                            numLevels: Y ? 1 : -1
                        })
                    },
                    _simpleSliderZoomHandler: function(Y, ia, qa, wa) {
                        var K;
                        Y = this._incButton;
                        ia = this._decButton;
                        -1 < wa && wa === this.getMaxZoom() ? K = Y : -1 < wa && wa === this.getMinZoom() && (K = ia);
                        K ? (c.add(K, "esriSimpleSliderDisabledButton"),
                        c.remove(K === Y ? ia : Y, "esriSimpleSliderDisabledButton")) : (c.remove(Y, "esriSimpleSliderDisabledButton"),
                        c.remove(ia, "esriSimpleSliderDisabledButton"))
                    },
                    _getSliderClass: function(Y) {
                        Y = Y ? "Large" : "Simple";
                        var ia = this._mapParams.sliderOrientation
                          , qa = this._mapParams.sliderPosition || "";
                        ia = ia && "horizontal" === ia.toLowerCase() ? "esri" + Y + "SliderHorizontal" : "esri" + Y + "SliderVertical";
                        if (qa)
                            switch (qa.toLowerCase()) {
                            case "top-left":
                                qa = "esri" + Y + "SliderTL";
                                break;
                            case "top-right":
                                qa = "esri" + Y + "SliderTR";
                                break;
                            case "bottom-left":
                                qa = "esri" + Y + "SliderBL";
                                break;
                            case "bottom-right":
                                qa = "esri" + Y + "SliderBR"
                            }
                        return "esri" + Y + "Slider " + ia + " " + qa
                    },
                    _addZoomButtonIcon: function(Y, ia, qa) {
                        e.create("span", {
                            "aria-hidden": "true",
                            role: "presentation",
                            innerHTML: ia
                        }, Y);
                        e.create("span", {
                            class: "esriIconFallbackText",
                            innerHTML: qa
                        }, Y)
                    },
                    _addZoomButtonTooltips: function(Y, ia) {
                        var qa = B.widgets.zoomSlider;
                        a.set(Y, "title", qa.zoomIn);
                        a.set(ia, "title", qa.zoomOut)
                    },
                    _createSlider: function(Y, ia, qa) {
                        if (this._mapParams.slider) {
                            var wa = H("div", {
                                id: this.id + "_zoom_slider"
                            }, this.root)
                              , K = v.defaults.map
                              , Z = this._getSliderClass(!0)
                              , pa = -1 !== Z.indexOf("Horizontal")
                              , L = this.getNumLevels();
                            if (0 < L) {
                                var R, ha, na = this._mapParams.sliderLabels, ta = !!na, xa = !1 !== na;
                                if (xa) {
                                    var Aa = pa ? "bottomDecoration" : "rightDecoration";
                                    if (!na)
                                        for (na = [],
                                        K = 0; K < L; K++)
                                            na[K] = "";
                                    l.forEach([{
                                        class: "esriLargeSliderTicks",
                                        container: Aa,
                                        count: L,
                                        dijitClass: ia
                                    }, {
                                        class: ta && "esriLargeSliderLabels",
                                        container: Aa,
                                        count: L,
                                        labels: na,
                                        dijitClass: qa
                                    }], function(ja) {
                                        var X = H("div")
                                          , oa = ja.dijitClass;
                                        delete ja.dijitClass;
                                        wa.appendChild(X);
                                        oa === ia ? R = new oa(ja,X) : ha = new oa(ja,X)
                                    })
                                }
                                Y = this._slider = new Y({
                                    id: wa.id,
                                    class: Z,
                                    minimum: this.getMinZoom(),
                                    maximum: this.getMaxZoom(),
                                    discreteValues: L,
                                    value: this.getLevel(),
                                    clickSelect: !0,
                                    intermediateChanges: !0,
                                    style: "z-index:30;"
                                },wa);
                                Y.startup();
                                xa && (R.startup(),
                                ha.startup());
                                this._slider_connect = A(Y, "onChange", this, "_onSliderChangeHandler");
                                this._connects.push(A(this, "onExtentChange", this, "_onExtentChangeSliderHandler"));
                                this._connects.push(A(Y._movable, "onFirstMove", this, "_onSliderMoveStartHandler"))
                            } else {
                                Y = this._slider = new Y({
                                    id: wa.id,
                                    class: Z,
                                    minimum: 0,
                                    maximum: 2,
                                    discreteValues: 3,
                                    value: 1,
                                    clickSelect: !0,
                                    intermediateChanges: K.sliderChangeImmediate,
                                    style: "height:50px; z-index:30;"
                                },wa);
                                qa = Y.domNode.firstChild.childNodes;
                                for (K = 1; 3 >= K; K++)
                                    J(qa[K], "visibility", "hidden");
                                Y.startup();
                                this._slider_connect = A(Y, "onChange", this, "_onDynSliderChangeHandler");
                                this._connects.push(A(this, "onExtentChange", this, "_onExtentChangeDynSliderHandler"))
                            }
                            K = Y.incrementButton;
                            qa = Y.decrementButton;
                            pa ? this._addZoomButtonTooltips(K, qa) : this._addZoomButtonTooltips(qa, K);
                            K.style.outline = "none";
                            qa.style.outline = "none";
                            Y.sliderHandle.style.outline = "none";
                            Y._onKeyPress = function() {}
                            ;
                            if (pa = Y._movable) {
                                var ca = pa.onMouseDown;
                                pa.onMouseDown = function(ja) {
                                    9 > z("ie") && 1 !== ja.button || ca.apply(this, arguments)
                                }
                            }
                            this.isZoomSlider = !0
                        }
                    },
                    _onSliderMoveStartHandler: function() {
                        E(this._slider_connect);
                        E(this._slidermovestop_connect);
                        this._slider_connect = A(this._slider, "onChange", this, "_onSliderChangeDragHandler");
                        this._slidermovestop_connect = A(this._slider._movable, "onMoveStop", this, "_onSliderMoveEndHandler")
                    },
                    _onSliderChangeDragHandler: function(Y) {
                        this._extentUtil({
                            targetLevel: Y
                        })
                    },
                    _onSliderMoveEndHandler: function() {
                        E(this._slider_connect);
                        E(this._slidermovestop_connect)
                    },
                    _onSliderChangeHandler: function(Y) {
                        this.setLevel(Y)
                    },
                    _updateSliderValue: function(Y, ia) {
                        E(this._slider_connect);
                        var qa = this._slider
                          , wa = qa._onChangeActive;
                        qa._onChangeActive = !1;
                        qa.set("value", Y);
                        qa._onChangeActive = wa;
                        this._slider_connect = A(qa, "onChange", this, ia)
                    },
                    _onExtentChangeSliderHandler: function(Y, ia, qa, wa) {
                        E(this._slidermovestop_connect);
                        this._updateSliderValue(wa.level, "_onSliderChangeHandler")
                    },
                    _onDynSliderChangeHandler: function(Y) {
                        this._extentUtil({
                            numLevels: 0 < Y ? 1 : -1
                        })
                    },
                    _onExtentChangeDynSliderHandler: function() {
                        this._updateSliderValue(1, "_onDynSliderChangeHandler")
                    },
                    _openLogoLink: function(Y) {
                        window.open(v.defaults.map.logoLink, "_blank");
                        k.stop(Y)
                    },
                    enableMapNavigation: function() {
                        this.isMapNavigation || (this.isMapNavigation = !0,
                        this._evalMapNavigation())
                    },
                    disableMapNavigation: function() {
                        this.isMapNavigation && (this.isMapNavigation = !1,
                        this._evalMapNavigation())
                    },
                    _evalMapNavigation: function() {
                        this.isMapNavigation ? this.navigationManager.enableNavigation() : this.navigationManager.disableNavigation()
                    },
                    _evalNavigationFeature: function(Y) {
                        if (this.isMapNavigation && this["is" + Y])
                            this.navigationManager["enable" + Y]();
                        else
                            this.navigationManager["disable" + Y]()
                    },
                    enableDoubleClickZoom: function() {
                        this.isDoubleClickZoom || (this.isDoubleClickZoom = !0,
                        this._evalNavigationFeature("DoubleClickZoom"))
                    },
                    disableDoubleClickZoom: function() {
                        this.isDoubleClickZoom && (this.isDoubleClickZoom = !1,
                        this._evalNavigationFeature("DoubleClickZoom"))
                    },
                    enableShiftDoubleClickZoom: function() {
                        this.isShiftDoubleClickZoom || (aa(this.declaredClass + ": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.", null, "v2.0"),
                        this.navigationManager.enableShiftDoubleClickZoom(),
                        this.isShiftDoubleClickZoom = !0)
                    },
                    disableShiftDoubleClickZoom: function() {
                        this.isShiftDoubleClickZoom && (aa(this.declaredClass + ": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.", null, "v2.0"),
                        this.navigationManager.disableShiftDoubleClickZoom(),
                        this.isShiftDoubleClickZoom = !1)
                    },
                    enableClickRecenter: function() {
                        this.isClickRecenter || (this.isClickRecenter = !0,
                        this._evalNavigationFeature("ClickRecenter"))
                    },
                    disableClickRecenter: function() {
                        this.isClickRecenter && (this.isClickRecenter = !1,
                        this._evalNavigationFeature("ClickRecenter"))
                    },
                    enablePan: function() {
                        this.isPan || (this.isPan = !0,
                        this._evalNavigationFeature("Pan"))
                    },
                    disablePan: function() {
                        this.isPan && (this.isPan = !1,
                        this._evalNavigationFeature("Pan"))
                    },
                    enableRubberBandZoom: function() {
                        this.isRubberBandZoom || (this.isRubberBandZoom = !0,
                        this._evalNavigationFeature("RubberBandZoom"))
                    },
                    disableRubberBandZoom: function() {
                        this.isRubberBandZoom && (this.isRubberBandZoom = !1,
                        this._evalNavigationFeature("RubberBandZoom"))
                    },
                    enablePinchZoom: function() {
                        this.isPinchZoom || (this.isPinchZoom = !0,
                        this._evalNavigationFeature("PinchZoom"))
                    },
                    disablePinchZoom: function() {
                        this.isPinchZoom && (this.isPinchZoom = !1,
                        this._evalNavigationFeature("PinchZoom"))
                    },
                    enableKeyboardNavigation: function() {
                        this.isKeyboardNavigation || (this.isKeyboardNavigation = !0,
                        this._evalNavigationFeature("KeyboardNavigation"))
                    },
                    disableKeyboardNavigation: function() {
                        this.isKeyboardNavigation && (this.isKeyboardNavigation = !1,
                        this._evalNavigationFeature("KeyboardNavigation"))
                    },
                    enableScrollWheel: function() {
                        this.isScrollWheel || (this.isScrollWheel = !0,
                        this._evalNavigationFeature("ScrollWheel"))
                    },
                    disableScrollWheel: function() {
                        this.isScrollWheel && (this.isScrollWheel = !1,
                        this._evalNavigationFeature("ScrollWheel"))
                    },
                    enableScrollWheelZoom: function() {
                        this.isScrollWheelZoom || (this.navigationManager.enableScrollWheelZoom(),
                        this.isScrollWheelZoom = !0)
                    },
                    disableScrollWheelZoom: function() {
                        this.isScrollWheelZoom && (this.navigationManager.disableScrollWheelZoom(),
                        this.isScrollWheelZoom = !1)
                    },
                    enableScrollWheelPan: function() {
                        this.isScrollWheelPan || this.navigationManager.enableScrollWheelPan()
                    },
                    disableScrollWheelPan: function() {
                        this.isScrollWheelPan && this.navigationManager.disableScrollWheelPan()
                    },
                    showPanArrows: function() {
                        this._navDiv && (this._navDiv.style.display = "block",
                        this.isPanArrows = !0)
                    },
                    hidePanArrows: function() {
                        this._navDiv && (this._navDiv.style.display = "none",
                        this.isPanArrows = !1)
                    },
                    showZoomSlider: function() {
                        this._slider && (J(this._slider.domNode || this._slider, "visibility", "inherit"),
                        this.isZoomSlider = !0)
                    },
                    hideZoomSlider: function() {
                        this._slider && (J(this._slider.domNode || this._slider, "visibility", "hidden"),
                        this.isZoomSlider = !1)
                    },
                    onClick: function(Y) {
                        Y.graphic || (Y.graphic = this.syncHitTestForWebGL(Y))
                    }
                });
                z("extend-esri") && (x.Map = y);
                return y
            })
        },
        "esri/lang": function() {
            define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "), function(C, y, b, w, m, l, k, h, f) {
                function d(v, z, u, p) {
                    (z = z && z[v]) ? z = {
                        formatType: z.formatType,
                        options: z
                    } : p && -1 !== C.indexOf(p.properties || "", v) ? z = {
                        formatType: p.formatter || "DateString",
                        options: null
                    } : u && -1 !== C.indexOf(u.properties || "", v) && (z = {
                        formatType: u.formatter || "NumberFormat",
                        options: null
                    });
                    return z
                }
                function a(v, z, u) {
                    return [w.isString(v) ? v.split("") : v, z || b.global, w.isString(u) ? new Function("item","index","array",u) : u]
                }
                function c(v) {
                    return void 0 !== v && null !== v
                }
                function e(v) {
                    return c(v) ? v : ""
                }
                function n(v, z, u, p) {
                    var r = u.match(/([^\(]+)(\([^\)]+\))?/i);
                    u = w.trim(r[1]);
                    var B = r[2] ? w.trim(r[2]) : null;
                    r = z[v];
                    p = p || (B ? y.fromJson(B.replace(/^\(/, "({").replace(/\)$/, "})")) : {});
                    B = p.utcOffset;
                    if (-1 === C.indexOf(g, u))
                        u = w.getObject(u),
                        w.isFunction(u) && (r = u(r, v, z, p));
                    else if ("number" === typeof r || "string" === typeof r && r && !isNaN(Number(r)))
                        switch (r = Number(r),
                        u) {
                        case "NumberFormat":
                            return k.format(r, p);
                        case "DateString":
                            v = new Date(r);
                            if (p.local || p.systemLocale)
                                return p.systemLocale ? v.toLocaleDateString() + (p.hideTime ? "" : " " + v.toLocaleTimeString()) : v.toDateString() + (p.hideTime ? "" : " " + v.toTimeString());
                            v = v.toUTCString();
                            p.hideTime && (v = v.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i, ""));
                            return v;
                        case "DateFormat":
                            return v = new Date(r),
                            c(B) && (v = m.add(v, "minute", v.getTimezoneOffset() - B)),
                            h.format(v, p)
                        }
                    return e(r)
                }
                function t(v, z) {
                    var u;
                    if (z)
                        for (u in v)
                            v.hasOwnProperty(u) && (void 0 === v[u] ? delete v[u] : v[u]instanceof Object && t(v[u], !0));
                    else
                        for (u in v)
                            v.hasOwnProperty(u) && void 0 === v[u] && delete v[u];
                    return v
                }
                var g = ["NumberFormat", "DateString", "DateFormat"]
                  , q = /<\/?[^>]+>/g
                  , x = {
                    valueOf: function(v, z) {
                        for (var u in v)
                            if (v[u] == z)
                                return u;
                        return null
                    },
                    stripTags: function(v) {
                        if (v) {
                            var z = typeof v;
                            if ("string" === z)
                                v = v.replace(q, "");
                            else if ("object" === z)
                                for (var u in v)
                                    (z = v[u]) && "string" === typeof z && (z = z.replace(q, "")),
                                    v[u] = z
                        }
                        return v
                    },
                    substitute: function(v, z, u) {
                        if (c(u))
                            if (w.isObject(u)) {
                                var p = u.first;
                                var r = u.dateFormat;
                                var B = u.numberFormat;
                                var D = u.format
                            } else
                                p = u;
                        if (z && "${*}" !== z)
                            return w.replace(z, w.hitch({
                                obj: v
                            }, function(A, E) {
                                var H = E.split(":");
                                return 1 < H.length ? (E = H[0],
                                H.shift(),
                                (A = D && D[H[0]]) ? H = A.formatType : (H = H.join(":"),
                                A = null),
                                n(E, this.obj, H, A)) : (A = d(E, D, B, r)) ? n(E, this.obj, A.formatType, A.options) : e(this.obj[E])
                            }), /\$\{([^\}]+)\}/g);
                        z = [];
                        for (var G in v)
                            if (u = (u = d(G, D, B, r)) ? n(G, v, u.formatType, u.options) : v[G],
                            z.push(G + " \x3d " + e(u) + "\x3cbr/\x3e"),
                            p)
                                break;
                        return z.join("")
                    },
                    filter: function(v, z, u) {
                        z = a(v, u, z);
                        u = {};
                        var p;
                        v = z[0];
                        for (p in v)
                            z[2].call(z[p], v[p], p, v) && (u[p] = v[p]);
                        return u
                    },
                    startsWith: function(v, z, u) {
                        u = u || 0;
                        return v.indexOf(z, u) === u
                    },
                    endsWith: function(v, z, u) {
                        if ("number" !== typeof u || !isFinite(u) || Math.floor(u) !== u || u > v.length)
                            u = v.length;
                        u -= z.length;
                        v = v.indexOf(z, u);
                        return -1 !== v && v === u
                    },
                    isDefined: c,
                    fixJson: t,
                    isObject: function(v) {
                        return v && "object" === typeof v
                    },
                    isString: function(v) {
                        return "string" === typeof v
                    },
                    mixin: function(v, z) {
                        for (var u in z)
                            z.hasOwnProperty(u) && (v[u] = z[u]);
                        return v
                    },
                    clone2DArray: function(v) {
                        if (v = v ? v.slice(0) : null) {
                            var z, u = v.length;
                            for (z = 0; z < u; z++)
                                v[z] = v[z] ? v[z].slice(0) : null
                        }
                        return v
                    },
                    clone3DArray: function(v) {
                        if (v = v ? v.slice(0) : null) {
                            var z, u = v.length;
                            for (z = 0; z < u; z++) {
                                v[z] = v[z] ? v[z].slice(0) : null;
                                var p = v[z];
                                if (p) {
                                    var r, B = p.length;
                                    for (r = 0; r < B; r++)
                                        p[r] = p[r] ? p[r].slice(0) : null
                                }
                            }
                        }
                        return v
                    }
                };
                l("extend-esri") && (w.mixin(f, x),
                f._isDefined = c,
                f._getParts = a,
                f._sanitize = t);
                return x
            })
        },
        "dojo/date": function() {
            define(["./has", "./_base/lang"], function(C, y) {
                var b = {
                    getDaysInMonth: function(w) {
                        var m = w.getMonth();
                        return 1 == m && b.isLeapYear(w) ? 29 : [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][m]
                    },
                    isLeapYear: function(w) {
                        w = w.getFullYear();
                        return !(w % 400) || !(w % 4) && !!(w % 100)
                    },
                    getTimezoneName: function(w) {
                        var m = w.toString()
                          , l = ""
                          , k = m.indexOf("(");
                        if (-1 < k)
                            l = m.substring(++k, m.indexOf(")"));
                        else if (k = /([A-Z\/]+) \d{4}$/,
                        m = m.match(k))
                            l = m[1];
                        else if (m = w.toLocaleString(),
                        k = / ([A-Z\/]+)$/,
                        m = m.match(k))
                            l = m[1];
                        return "AM" == l || "PM" == l ? "" : l
                    },
                    compare: function(w, m, l) {
                        w = new Date(+w);
                        m = new Date(+(m || new Date));
                        "date" == l ? (w.setHours(0, 0, 0, 0),
                        m.setHours(0, 0, 0, 0)) : "time" == l && (w.setFullYear(0, 0, 0),
                        m.setFullYear(0, 0, 0));
                        return w > m ? 1 : w < m ? -1 : 0
                    },
                    add: function(w, m, l) {
                        var k = new Date(+w)
                          , h = !1
                          , f = "Date";
                        switch (m) {
                        case "day":
                            break;
                        case "weekday":
                            if (m = l % 5)
                                var d = parseInt(l / 5);
                            else
                                m = 0 < l ? 5 : -5,
                                d = 0 < l ? (l - 5) / 5 : (l + 5) / 5;
                            var a = w.getDay()
                              , c = 0;
                            6 == a && 0 < l ? c = 1 : 0 == a && 0 > l && (c = -1);
                            a += m;
                            if (0 == a || 6 == a)
                                c = 0 < l ? 2 : -2;
                            l = 7 * d + m + c;
                            break;
                        case "year":
                            f = "FullYear";
                            h = !0;
                            break;
                        case "week":
                            l *= 7;
                            break;
                        case "quarter":
                            l *= 3;
                        case "month":
                            h = !0;
                            f = "Month";
                            break;
                        default:
                            f = "UTC" + m.charAt(0).toUpperCase() + m.substring(1) + "s"
                        }
                        if (f)
                            k["set" + f](k["get" + f]() + l);
                        h && k.getDate() < w.getDate() && k.setDate(0);
                        return k
                    },
                    difference: function(w, m, l) {
                        m = m || new Date;
                        l = l || "day";
                        var k = m.getFullYear() - w.getFullYear()
                          , h = 1;
                        switch (l) {
                        case "quarter":
                            w = w.getMonth();
                            m = m.getMonth();
                            h = Math.floor(m / 3) + 1 + 4 * k - (Math.floor(w / 3) + 1);
                            break;
                        case "weekday":
                            k = Math.round(b.difference(w, m, "day"));
                            l = parseInt(b.difference(w, m, "week"));
                            if (0 == k % 7)
                                k = 5 * l;
                            else {
                                h = 0;
                                var f = w.getDay()
                                  , d = m.getDay();
                                l = parseInt(k / 7);
                                m = k % 7;
                                w = new Date(w);
                                w.setDate(w.getDate() + 7 * l);
                                w = w.getDay();
                                if (0 < k)
                                    switch (!0) {
                                    case 6 == f:
                                        h = -1;
                                        break;
                                    case 0 == f:
                                        h = 0;
                                        break;
                                    case 6 == d:
                                        h = -1;
                                        break;
                                    case 0 == d:
                                        h = -2;
                                        break;
                                    case 5 < w + m:
                                        h = -2
                                    }
                                else if (0 > k)
                                    switch (!0) {
                                    case 6 == f:
                                        h = 0;
                                        break;
                                    case 0 == f:
                                        h = 1;
                                        break;
                                    case 6 == d:
                                        h = 2;
                                        break;
                                    case 0 == d:
                                        h = 1;
                                        break;
                                    case 0 > w + m:
                                        h = 2
                                    }
                                k = k + h - 2 * l
                            }
                            h = k;
                            break;
                        case "year":
                            h = k;
                            break;
                        case "month":
                            h = m.getMonth() - w.getMonth() + 12 * k;
                            break;
                        case "week":
                            h = parseInt(b.difference(w, m, "day") / 7);
                            break;
                        case "day":
                            h /= 24;
                        case "hour":
                            h /= 60;
                        case "minute":
                            h /= 60;
                        case "second":
                            h /= 1E3;
                        case "millisecond":
                            h *= m.getTime() - w.getTime()
                        }
                        return Math.round(h)
                    }
                };
                y.mixin(y.getObject("dojo.date", !0), b);
                return b
            })
        },
        "dojo/number": function() {
            define(["./_base/lang", "./i18n", "./i18n!./cldr/nls/number", "./string", "./regexp"], function(C, y, b, w, m) {
                var l = {};
                C.setObject("dojo.number", l);
                l.format = function(h, f) {
                    f = C.mixin({}, f || {});
                    var d = y.normalizeLocale(f.locale);
                    d = y.getLocalization("dojo.cldr", "number", d);
                    f.customs = d;
                    d = f.pattern || d[(f.type || "decimal") + "Format"];
                    return isNaN(h) || Infinity == Math.abs(h) ? null : l._applyPattern(h, d, f)
                }
                ;
                l._numberPatternRE = /[#0,]*[#0](?:\.0*#*)?/;
                l._applyPattern = function(h, f, d) {
                    d = d || {};
                    var a = d.customs.group
                      , c = d.customs.decimal;
                    f = f.split(";");
                    var e = f[0];
                    f = f[0 > h ? 1 : 0] || "-" + e;
                    if (-1 != f.indexOf("%"))
                        h *= 100;
                    else if (-1 != f.indexOf("\u2030"))
                        h *= 1E3;
                    else if (-1 != f.indexOf("\u00a4"))
                        a = d.customs.currencyGroup || a,
                        c = d.customs.currencyDecimal || c,
                        f = f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/, function(t, g, q, x) {
                            return (t = d[["symbol", "currency", "displayName"][q.length - 1]] || d.currency || "") ? g + t + x : ""
                        });
                    else if (-1 != f.indexOf("E"))
                        throw Error("exponential notation not supported");
                    var n = l._numberPatternRE;
                    e = e.match(n);
                    if (!e)
                        throw Error("unable to find a number expression in pattern: " + f);
                    !1 === d.fractional && (d.places = 0);
                    return f.replace(n, l._formatAbsolute(h, e[0], {
                        decimal: c,
                        group: a,
                        places: d.places,
                        round: d.round
                    }))
                }
                ;
                l.round = function(h, f, d) {
                    d = 10 / (d || 10);
                    return (d * +h).toFixed(f) / d
                }
                ;
                if (0 == (.9).toFixed()) {
                    var k = l.round;
                    l.round = function(h, f, d) {
                        var a = Math.pow(10, -f || 0)
                          , c = Math.abs(h);
                        if (!h || c >= a)
                            a = 0;
                        else if (c /= a,
                        .5 > c || .95 <= c)
                            a = 0;
                        return k(h, f, d) + (0 < h ? a : -a)
                    }
                }
                l._formatAbsolute = function(h, f, d) {
                    d = d || {};
                    !0 === d.places && (d.places = 0);
                    Infinity === d.places && (d.places = 6);
                    f = f.split(".");
                    var a = "string" == typeof d.places && d.places.indexOf(",")
                      , c = d.places;
                    a ? c = d.places.substring(a + 1) : 0 <= c || (c = (f[1] || []).length);
                    0 > d.round || (h = l.round(h, c, d.round));
                    h = String(Math.abs(h)).split(".");
                    var e = h[1] || "";
                    f[1] || d.places ? (a && (d.places = d.places.substring(0, a)),
                    a = void 0 !== d.places ? d.places : f[1] && f[1].lastIndexOf("0") + 1,
                    a > e.length && (h[1] = w.pad(e, a, "0", !0)),
                    c < e.length && (h[1] = e.substr(0, c))) : h[1] && h.pop();
                    c = f[0].replace(",", "");
                    a = c.indexOf("0");
                    -1 != a && (a = c.length - a,
                    a > h[0].length && (h[0] = w.pad(h[0], a)),
                    -1 == c.indexOf("#") && (h[0] = h[0].substr(h[0].length - a)));
                    c = f[0].lastIndexOf(",");
                    var n;
                    if (-1 != c) {
                        var t = f[0].length - c - 1;
                        f = f[0].substr(0, c);
                        c = f.lastIndexOf(",");
                        -1 != c && (n = f.length - c - 1)
                    }
                    f = [];
                    for (c = h[0]; c; )
                        a = c.length - t,
                        f.push(0 < a ? c.substr(a) : c),
                        c = 0 < a ? c.slice(0, a) : "",
                        n && (t = n,
                        n = void 0);
                    h[0] = f.reverse().join(d.group || ",");
                    return h.join(d.decimal || ".")
                }
                ;
                l.regexp = function(h) {
                    return l._parseInfo(h).regexp
                }
                ;
                l._parseInfo = function(h) {
                    h = h || {};
                    var f = y.normalizeLocale(h.locale);
                    f = y.getLocalization("dojo.cldr", "number", f);
                    var d = h.pattern || f[(h.type || "decimal") + "Format"]
                      , a = f.group
                      , c = f.decimal
                      , e = 1;
                    if (-1 != d.indexOf("%"))
                        e /= 100;
                    else if (-1 != d.indexOf("\u2030"))
                        e /= 1E3;
                    else {
                        var n = -1 != d.indexOf("\u00a4");
                        n && (a = f.currencyGroup || a,
                        c = f.currencyDecimal || c)
                    }
                    f = d.split(";");
                    1 == f.length && f.push("-" + f[0]);
                    f = m.buildGroupRE(f, function(t) {
                        t = "(?:" + m.escapeString(t, ".") + ")";
                        return t.replace(l._numberPatternRE, function(g) {
                            var q = {
                                signed: !1,
                                separator: h.strict ? a : [a, ""],
                                fractional: h.fractional,
                                decimal: c,
                                exponent: !1
                            };
                            g = g.split(".");
                            var x = h.places;
                            1 == g.length && 1 != e && (g[1] = "###");
                            1 == g.length || 0 === x ? q.fractional = !1 : (void 0 === x && (x = h.pattern ? g[1].lastIndexOf("0") + 1 : Infinity),
                            x && void 0 == h.fractional && (q.fractional = !0),
                            !h.places && x < g[1].length && (x += "," + g[1].length),
                            q.places = x);
                            g = g[0].split(",");
                            1 < g.length && (q.groupSize = g.pop().length,
                            1 < g.length && (q.groupSize2 = g.pop().length));
                            return "(" + l._realNumberRegexp(q) + ")"
                        })
                    }, !0);
                    n && (f = f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g, function(t, g, q, x) {
                        t = m.escapeString(h[["symbol", "currency", "displayName"][q.length - 1]] || h.currency || "");
                        if (!t)
                            return "";
                        g = g ? "[\\s\\xa0]" : "";
                        x = x ? "[\\s\\xa0]" : "";
                        return h.strict ? g + t + x : (g && (g += "*"),
                        x && (x += "*"),
                        "(?:" + g + t + x + ")?")
                    }));
                    return {
                        regexp: f.replace(/[\xa0 ]/g, "[\\s\\xa0]"),
                        group: a,
                        decimal: c,
                        factor: e
                    }
                }
                ;
                l.parse = function(h, f) {
                    f = l._parseInfo(f);
                    h = (new RegExp("^" + f.regexp + "$")).exec(h);
                    if (!h)
                        return NaN;
                    var d = h[1];
                    if (!h[1]) {
                        if (!h[2])
                            return NaN;
                        d = h[2];
                        f.factor *= -1
                    }
                    d = d.replace(new RegExp("[" + f.group + "\\s\\xa0]","g"), "").replace(f.decimal, ".");
                    return d * f.factor
                }
                ;
                l._realNumberRegexp = function(h) {
                    h = h || {};
                    "places"in h || (h.places = Infinity);
                    "string" != typeof h.decimal && (h.decimal = ".");
                    "fractional"in h && !/^0/.test(h.places) || (h.fractional = [!0, !1]);
                    "exponent"in h || (h.exponent = [!0, !1]);
                    "eSigned"in h || (h.eSigned = [!0, !1]);
                    var f = l._integerRegexp(h)
                      , d = m.buildGroupRE(h.fractional, function(c) {
                        var e = "";
                        c && 0 !== h.places && (e = "\\" + h.decimal,
                        e = Infinity == h.places ? "(?:" + e + "\\d+)?" : e + ("\\d{" + h.places + "}"));
                        return e
                    }, !0)
                      , a = m.buildGroupRE(h.exponent, function(c) {
                        return c ? "([eE]" + l._integerRegexp({
                            signed: h.eSigned
                        }) + ")" : ""
                    });
                    f += d;
                    d && (f = "(?:(?:" + f + ")|(?:" + d + "))");
                    return f + a
                }
                ;
                l._integerRegexp = function(h) {
                    h = h || {};
                    "signed"in h || (h.signed = [!0, !1]);
                    "separator"in h ? "groupSize"in h || (h.groupSize = 3) : h.separator = "";
                    var f = m.buildGroupRE(h.signed, function(a) {
                        return a ? "[-+]" : ""
                    }, !0)
                      , d = m.buildGroupRE(h.separator, function(a) {
                        if (!a)
                            return "(?:\\d+)";
                        a = m.escapeString(a);
                        " " == a ? a = "\\s" : "\u00a0" == a && (a = "\\s\\xa0");
                        var c = h.groupSize
                          , e = h.groupSize2;
                        return e ? (a = "(?:0|[1-9]\\d{0," + (e - 1) + "}(?:[" + a + "]\\d{" + e + "})*[" + a + "]\\d{" + c + "})",
                        0 < c - e ? "(?:" + a + "|(?:0|[1-9]\\d{0," + (c - 1) + "}))" : a) : "(?:0|[1-9]\\d{0," + (c - 1) + "}(?:[" + a + "]\\d{" + c + "})*)"
                    }, !0);
                    return f + d
                }
                ;
                return l
            })
        },
        "dojo/regexp": function() {
            define(["./_base/kernel", "./_base/lang"], function(C, y) {
                var b = {};
                y.setObject("dojo.regexp", b);
                b.escapeString = function(w, m) {
                    return w.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g, function(l) {
                        return m && -1 != m.indexOf(l) ? l : "\\" + l
                    })
                }
                ;
                b.buildGroupRE = function(w, m, l) {
                    if (!(w instanceof Array))
                        return m(w);
                    for (var k = [], h = 0; h < w.length; h++)
                        k.push(m(w[h]));
                    return b.group(k.join("|"), l)
                }
                ;
                b.group = function(w, m) {
                    return "(" + (m ? "?:" : "") + w + ")"
                }
                ;
                return b
            })
        },
        "dojo/date/locale": function() {
            define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "), function(C, y, b, w, m, l, k, h, f) {
                function d(q, x, v, z) {
                    return z.replace(/([a-z])\1*/ig, function(u) {
                        var p = u.charAt(0);
                        u = u.length;
                        var r = ["abbr", "wide", "narrow"];
                        switch (p) {
                        case "G":
                            var B = x[4 > u ? "eraAbbr" : "eraNames"][0 > q.getFullYear() ? 0 : 1];
                            break;
                        case "y":
                            B = q.getFullYear();
                            switch (u) {
                            case 1:
                                break;
                            case 2:
                                if (!v.fullYear) {
                                    B = String(B);
                                    B = B.substr(B.length - 2);
                                    break
                                }
                            default:
                                var D = !0
                            }
                            break;
                        case "Q":
                        case "q":
                            B = Math.ceil((q.getMonth() + 1) / 3);
                            D = !0;
                            break;
                        case "M":
                        case "L":
                            B = q.getMonth();
                            3 > u ? (B += 1,
                            D = !0) : (p = ["months", "L" == p ? "standAlone" : "format", r[u - 3]].join("-"),
                            B = x[p][B]);
                            break;
                        case "w":
                            B = e._getWeekOfYear(q, 0);
                            D = !0;
                            break;
                        case "d":
                            B = q.getDate();
                            D = !0;
                            break;
                        case "D":
                            B = e._getDayOfYear(q);
                            D = !0;
                            break;
                        case "e":
                        case "c":
                            if (B = q.getDay(),
                            2 > u) {
                                B = (B - w.getFirstDayOfWeek(v.locale) + 8) % 7;
                                break
                            }
                        case "E":
                            B = q.getDay();
                            3 > u ? (B += 1,
                            D = !0) : (p = ["days", "c" == p ? "standAlone" : "format", r[u - 3]].join("-"),
                            B = x[p][B]);
                            break;
                        case "a":
                            p = 12 > q.getHours() ? "am" : "pm";
                            B = v[p] || x["dayPeriods-format-wide-" + p];
                            break;
                        case "h":
                        case "H":
                        case "K":
                        case "k":
                            D = q.getHours();
                            switch (p) {
                            case "h":
                                B = D % 12 || 12;
                                break;
                            case "H":
                                B = D;
                                break;
                            case "K":
                                B = D % 12;
                                break;
                            case "k":
                                B = D || 24
                            }
                            D = !0;
                            break;
                        case "m":
                            B = q.getMinutes();
                            D = !0;
                            break;
                        case "s":
                            B = q.getSeconds();
                            D = !0;
                            break;
                        case "S":
                            B = Math.round(q.getMilliseconds() * Math.pow(10, u - 3));
                            D = !0;
                            break;
                        case "v":
                        case "z":
                            if (B = e._getZone(q, !0, v))
                                break;
                            u = 4;
                        case "Z":
                            p = e._getZone(q, !1, v);
                            p = [0 >= p ? "+" : "-", k.pad(Math.floor(Math.abs(p) / 60), 2), k.pad(Math.abs(p) % 60, 2)];
                            4 == u && (p.splice(0, 0, "GMT"),
                            p.splice(3, 0, ":"));
                            B = p.join("");
                            break;
                        default:
                            throw Error("dojo.date.locale.format: invalid pattern char: " + z);
                        }
                        D && (B = k.pad(B, u));
                        return B
                    })
                }
                function a(q, x, v, z) {
                    var u = function(B) {
                        return B
                    };
                    x = x || u;
                    v = v || u;
                    z = z || u;
                    var p = q.match(/(''|[^'])+/g)
                      , r = "'" == q.charAt(0);
                    y.forEach(p, function(B, D) {
                        B ? (p[D] = (r ? v : x)(B.replace(/''/g, "'")),
                        r = !r) : p[D] = ""
                    });
                    return z(p.join(""))
                }
                function c(q, x, v, z) {
                    z = l.escapeString(z);
                    v.strict || (z = z.replace(" a", " ?a"));
                    return z.replace(/([a-z])\1*/ig, function(u) {
                        var p = u.charAt(0);
                        var r = u.length
                          , B = ""
                          , D = "";
                        v.strict ? (1 < r && (B = "0{" + (r - 1) + "}"),
                        2 < r && (D = "0{" + (r - 2) + "}")) : (B = "0?",
                        D = "0{0,2}");
                        switch (p) {
                        case "y":
                            p = "\\d{2,4}";
                            break;
                        case "M":
                        case "L":
                            2 < r ? (p = x["months-" + ("L" == p ? "standAlone" : "format") + "-" + n[r - 3]].slice(0).join("|"),
                            v.strict || (p = p.replace(/\./g, ""),
                            p = "(?:" + p + ")\\.?")) : p = "1[0-2]|" + B + "[1-9]";
                            break;
                        case "D":
                            p = "[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|" + B + "[1-9][0-9]|" + D + "[1-9]";
                            break;
                        case "d":
                            p = "3[01]|[12]\\d|" + B + "[1-9]";
                            break;
                        case "w":
                            p = "[1-4][0-9]|5[0-3]|" + B + "[1-9]";
                            break;
                        case "E":
                        case "e":
                        case "c":
                            p = ".+?";
                            break;
                        case "h":
                            p = "1[0-2]|" + B + "[1-9]";
                            break;
                        case "k":
                            p = "1[01]|" + B + "\\d";
                            break;
                        case "H":
                            p = "1\\d|2[0-3]|" + B + "\\d";
                            break;
                        case "K":
                            p = "1\\d|2[0-4]|" + B + "[1-9]";
                            break;
                        case "m":
                        case "s":
                            p = "[0-5]\\d";
                            break;
                        case "S":
                            p = "\\d{" + r + "}";
                            break;
                        case "a":
                            r = v.am || x["dayPeriods-format-wide-am"];
                            B = v.pm || x["dayPeriods-format-wide-pm"];
                            p = r + "|" + B;
                            v.strict || (r != r.toLowerCase() && (p += "|" + r.toLowerCase()),
                            B != B.toLowerCase() && (p += "|" + B.toLowerCase()),
                            -1 != p.indexOf(".") && (p += "|" + p.replace(/\./g, "")));
                            p = p.replace(/\./g, "\\.");
                            break;
                        default:
                            p = ".*"
                        }
                        q && q.push(u);
                        return "(" + p + ")"
                    }).replace(/[\xa0 ]/g, "[\\s\\xa0]")
                }
                var e = {};
                C.setObject(f.id.replace(/\//g, "."), e);
                e._getZone = function(q, x, v) {
                    return x ? b.getTimezoneName(q) : q.getTimezoneOffset()
                }
                ;
                e.format = function(q, x) {
                    x = x || {};
                    var v = m.normalizeLocale(x.locale)
                      , z = x.formatLength || "short";
                    v = e._getGregorianBundle(v);
                    var u = [];
                    q = C.hitch(this, d, q, v, x);
                    if ("year" == x.selector)
                        return a(v["dateFormatItem-yyyy"] || "yyyy", q);
                    var p;
                    "date" != x.selector && (p = x.timePattern || v["timeFormat-" + z]) && u.push(a(p, q));
                    "time" != x.selector && (p = x.datePattern || v["dateFormat-" + z]) && u.push(a(p, q));
                    return 1 == u.length ? u[0] : v["dateTimeFormat-" + z].replace(/'/g, "").replace(/\{(\d+)\}/g, function(r, B) {
                        return u[B]
                    })
                }
                ;
                e.regexp = function(q) {
                    return e._parseInfo(q).regexp
                }
                ;
                e._parseInfo = function(q) {
                    q = q || {};
                    var x = m.normalizeLocale(q.locale);
                    x = e._getGregorianBundle(x);
                    var v = q.formatLength || "short"
                      , z = q.datePattern || x["dateFormat-" + v]
                      , u = q.timePattern || x["timeFormat-" + v];
                    v = "date" == q.selector ? z : "time" == q.selector ? u : x["dateTimeFormat-" + v].replace(/\{(\d+)\}/g, function(r, B) {
                        return [u, z][B]
                    });
                    var p = [];
                    return {
                        regexp: a(v, C.hitch(this, c, p, x, q)),
                        tokens: p,
                        bundle: x
                    }
                }
                ;
                e.parse = function(q, x) {
                    var v = /[\u200E\u200F\u202A\u202E]/g
                      , z = e._parseInfo(x)
                      , u = z.tokens
                      , p = z.bundle;
                    q = (new RegExp("^" + z.regexp.replace(v, "") + "$",z.strict ? "" : "i")).exec(q && q.replace(v, ""));
                    if (!q)
                        return null;
                    var r = ["abbr", "wide", "narrow"]
                      , B = [1970, 0, 1, 0, 0, 0, 0]
                      , D = "";
                    q = y.every(q, function(A, E) {
                        if (!E)
                            return !0;
                        var H = u[E - 1];
                        E = H.length;
                        H = H.charAt(0);
                        switch (H) {
                        case "y":
                            if (2 != E && x.strict)
                                B[0] = A;
                            else if (100 > A)
                                A = Number(A),
                                H = "" + (new Date).getFullYear(),
                                E = 100 * H.substring(0, 2),
                                H = Math.min(Number(H.substring(2, 4)) + 20, 99),
                                B[0] = A < H ? E + A : E - 100 + A;
                            else {
                                if (x.strict)
                                    return !1;
                                B[0] = A
                            }
                            break;
                        case "M":
                        case "L":
                            if (2 < E) {
                                if (E = p["months-" + ("L" == H ? "standAlone" : "format") + "-" + r[E - 3]].concat(),
                                x.strict || (A = A.replace(".", "").toLowerCase(),
                                E = y.map(E, function(O) {
                                    return O.replace(".", "").toLowerCase()
                                })),
                                A = y.indexOf(E, A),
                                -1 == A)
                                    return !1
                            } else
                                A--;
                            B[1] = A;
                            break;
                        case "E":
                        case "e":
                        case "c":
                            E = p["days-" + ("c" == H ? "standAlone" : "format") + "-" + r[E - 3]].concat();
                            x.strict || (A = A.toLowerCase(),
                            E = y.map(E, function(O) {
                                return O.toLowerCase()
                            }));
                            A = y.indexOf(E, A);
                            if (-1 == A)
                                return !1;
                            break;
                        case "D":
                            B[1] = 0;
                        case "d":
                            B[2] = A;
                            break;
                        case "a":
                            E = x.am || p["dayPeriods-format-wide-am"];
                            H = x.pm || p["dayPeriods-format-wide-pm"];
                            if (!x.strict) {
                                var J = /\./g;
                                A = A.replace(J, "").toLowerCase();
                                E = E.replace(J, "").toLowerCase();
                                H = H.replace(J, "").toLowerCase()
                            }
                            if (x.strict && A != E && A != H)
                                return !1;
                            D = A == H ? "p" : A == E ? "a" : "";
                            break;
                        case "K":
                            24 == A && (A = 0);
                        case "h":
                        case "H":
                        case "k":
                            if (23 < A)
                                return !1;
                            B[3] = A;
                            break;
                        case "m":
                            B[4] = A;
                            break;
                        case "s":
                            B[5] = A;
                            break;
                        case "S":
                            B[6] = A
                        }
                        return !0
                    });
                    v = +B[3];
                    "p" === D && 12 > v ? B[3] = v + 12 : "a" === D && 12 == v && (B[3] = 0);
                    v = new Date(B[0],B[1],B[2],B[3],B[4],B[5],B[6]);
                    x.strict && v.setFullYear(B[0]);
                    var G = u.join("");
                    z = -1 != G.indexOf("d");
                    G = -1 != G.indexOf("M");
                    if (!q || G && v.getMonth() > B[1] || z && v.getDate() > B[2])
                        return null;
                    if (G && v.getMonth() < B[1] || z && v.getDate() < B[2])
                        v = b.add(v, "hour", 1);
                    return v
                }
                ;
                var n = ["abbr", "wide", "narrow"]
                  , t = []
                  , g = {};
                e.addCustomFormats = function(q, x) {
                    t.push({
                        pkg: q,
                        name: x
                    });
                    g = {}
                }
                ;
                e._getGregorianBundle = function(q) {
                    if (g[q])
                        return g[q];
                    var x = {};
                    y.forEach(t, function(v) {
                        v = m.getLocalization(v.pkg, v.name, q);
                        x = C.mixin(x, v)
                    }, this);
                    return g[q] = x
                }
                ;
                e.addCustomFormats(f.id.replace(/\/date\/locale$/, ".cldr"), "gregorian");
                e.getNames = function(q, x, v, z) {
                    z = e._getGregorianBundle(z);
                    q = [q, v, x];
                    if ("standAlone" == v) {
                        v = q.join("-");
                        var u = z[v];
                        1 == u[0] && (u = void 0)
                    }
                    q[1] = "format";
                    return (u || z[q.join("-")]).concat()
                }
                ;
                e.isWeekend = function(q, x) {
                    x = w.getWeekend(x);
                    q = (q || new Date).getDay();
                    x.end < x.start && (x.end += 7,
                    q < x.start && (q += 7));
                    return q >= x.start && q <= x.end
                }
                ;
                e._getDayOfYear = function(q) {
                    return b.difference(new Date(q.getFullYear(),0,1,q.getHours()), q) + 1
                }
                ;
                e._getWeekOfYear = function(q, x) {
                    1 == arguments.length && (x = 0);
                    var v = (new Date(q.getFullYear(),0,1)).getDay()
                      , z = (v - x + 7) % 7;
                    z = Math.floor((e._getDayOfYear(q) + z - 1) / 7);
                    v == x && z++;
                    return z
                }
                ;
                return e
            })
        },
        "dojo/cldr/supplemental": function() {
            define(["../_base/lang", "../i18n"], function(C, y) {
                var b = {};
                C.setObject("dojo.cldr.supplemental", b);
                b.getFirstDayOfWeek = function(w) {
                    w = {
                        bd: 5,
                        mv: 5,
                        ae: 6,
                        af: 6,
                        bh: 6,
                        dj: 6,
                        dz: 6,
                        eg: 6,
                        iq: 6,
                        ir: 6,
                        jo: 6,
                        kw: 6,
                        ly: 6,
                        ma: 6,
                        om: 6,
                        qa: 6,
                        sa: 6,
                        sd: 6,
                        sy: 6,
                        ye: 6,
                        ag: 0,
                        ar: 0,
                        as: 0,
                        au: 0,
                        br: 0,
                        bs: 0,
                        bt: 0,
                        bw: 0,
                        by: 0,
                        bz: 0,
                        ca: 0,
                        cn: 0,
                        co: 0,
                        dm: 0,
                        "do": 0,
                        et: 0,
                        gt: 0,
                        gu: 0,
                        hk: 0,
                        hn: 0,
                        id: 0,
                        ie: 0,
                        il: 0,
                        "in": 0,
                        jm: 0,
                        jp: 0,
                        ke: 0,
                        kh: 0,
                        kr: 0,
                        la: 0,
                        mh: 0,
                        mm: 0,
                        mo: 0,
                        mt: 0,
                        mx: 0,
                        mz: 0,
                        ni: 0,
                        np: 0,
                        nz: 0,
                        pa: 0,
                        pe: 0,
                        ph: 0,
                        pk: 0,
                        pr: 0,
                        py: 0,
                        sg: 0,
                        sv: 0,
                        th: 0,
                        tn: 0,
                        tt: 0,
                        tw: 0,
                        um: 0,
                        us: 0,
                        ve: 0,
                        vi: 0,
                        ws: 0,
                        za: 0,
                        zw: 0
                    }[b._region(w)];
                    return void 0 === w ? 1 : w
                }
                ;
                b._region = function(w) {
                    w = y.normalizeLocale(w);
                    w = w.split("-");
                    var m = w[1];
                    m ? 4 == m.length && (m = w[2]) : m = {
                        aa: "et",
                        ab: "ge",
                        af: "za",
                        ak: "gh",
                        am: "et",
                        ar: "eg",
                        as: "in",
                        av: "ru",
                        ay: "bo",
                        az: "az",
                        ba: "ru",
                        be: "by",
                        bg: "bg",
                        bi: "vu",
                        bm: "ml",
                        bn: "bd",
                        bo: "cn",
                        br: "fr",
                        bs: "ba",
                        ca: "es",
                        ce: "ru",
                        ch: "gu",
                        co: "fr",
                        cr: "ca",
                        cs: "cz",
                        cv: "ru",
                        cy: "gb",
                        da: "dk",
                        de: "de",
                        dv: "mv",
                        dz: "bt",
                        ee: "gh",
                        el: "gr",
                        en: "us",
                        es: "es",
                        et: "ee",
                        eu: "es",
                        fa: "ir",
                        ff: "sn",
                        fi: "fi",
                        fj: "fj",
                        fo: "fo",
                        fr: "fr",
                        fy: "nl",
                        ga: "ie",
                        gd: "gb",
                        gl: "es",
                        gn: "py",
                        gu: "in",
                        gv: "gb",
                        ha: "ng",
                        he: "il",
                        hi: "in",
                        ho: "pg",
                        hr: "hr",
                        ht: "ht",
                        hu: "hu",
                        hy: "am",
                        ia: "fr",
                        id: "id",
                        ig: "ng",
                        ii: "cn",
                        ik: "us",
                        "in": "id",
                        is: "is",
                        it: "it",
                        iu: "ca",
                        iw: "il",
                        ja: "jp",
                        ji: "ua",
                        jv: "id",
                        jw: "id",
                        ka: "ge",
                        kg: "cd",
                        ki: "ke",
                        kj: "na",
                        kk: "kz",
                        kl: "gl",
                        km: "kh",
                        kn: "in",
                        ko: "kr",
                        ks: "in",
                        ku: "tr",
                        kv: "ru",
                        kw: "gb",
                        ky: "kg",
                        la: "va",
                        lb: "lu",
                        lg: "ug",
                        li: "nl",
                        ln: "cd",
                        lo: "la",
                        lt: "lt",
                        lu: "cd",
                        lv: "lv",
                        mg: "mg",
                        mh: "mh",
                        mi: "nz",
                        mk: "mk",
                        ml: "in",
                        mn: "mn",
                        mo: "ro",
                        mr: "in",
                        ms: "my",
                        mt: "mt",
                        my: "mm",
                        na: "nr",
                        nb: "no",
                        nd: "zw",
                        ne: "np",
                        ng: "na",
                        nl: "nl",
                        nn: "no",
                        no: "no",
                        nr: "za",
                        nv: "us",
                        ny: "mw",
                        oc: "fr",
                        om: "et",
                        or: "in",
                        os: "ge",
                        pa: "in",
                        pl: "pl",
                        ps: "af",
                        pt: "br",
                        qu: "pe",
                        rm: "ch",
                        rn: "bi",
                        ro: "ro",
                        ru: "ru",
                        rw: "rw",
                        sa: "in",
                        sd: "in",
                        se: "no",
                        sg: "cf",
                        si: "lk",
                        sk: "sk",
                        sl: "si",
                        sm: "ws",
                        sn: "zw",
                        so: "so",
                        sq: "al",
                        sr: "rs",
                        ss: "za",
                        st: "za",
                        su: "id",
                        sv: "se",
                        sw: "tz",
                        ta: "in",
                        te: "in",
                        tg: "tj",
                        th: "th",
                        ti: "et",
                        tk: "tm",
                        tl: "ph",
                        tn: "za",
                        to: "to",
                        tr: "tr",
                        ts: "za",
                        tt: "ru",
                        ty: "pf",
                        ug: "cn",
                        uk: "ua",
                        ur: "pk",
                        uz: "uz",
                        ve: "za",
                        vi: "vn",
                        wa: "be",
                        wo: "sn",
                        xh: "za",
                        yi: "il",
                        yo: "ng",
                        za: "cn",
                        zh: "cn",
                        zu: "za",
                        ace: "id",
                        ady: "ru",
                        agq: "cm",
                        alt: "ru",
                        amo: "ng",
                        asa: "tz",
                        ast: "es",
                        awa: "in",
                        bal: "pk",
                        ban: "id",
                        bas: "cm",
                        bax: "cm",
                        bbc: "id",
                        bem: "zm",
                        bez: "tz",
                        bfq: "in",
                        bft: "pk",
                        bfy: "in",
                        bhb: "in",
                        bho: "in",
                        bik: "ph",
                        bin: "ng",
                        bjj: "in",
                        bku: "ph",
                        bqv: "ci",
                        bra: "in",
                        brx: "in",
                        bss: "cm",
                        btv: "pk",
                        bua: "ru",
                        buc: "yt",
                        bug: "id",
                        bya: "id",
                        byn: "er",
                        cch: "ng",
                        ccp: "in",
                        ceb: "ph",
                        cgg: "ug",
                        chk: "fm",
                        chm: "ru",
                        chp: "ca",
                        chr: "us",
                        cja: "kh",
                        cjm: "vn",
                        ckb: "iq",
                        crk: "ca",
                        csb: "pl",
                        dar: "ru",
                        dav: "ke",
                        den: "ca",
                        dgr: "ca",
                        dje: "ne",
                        doi: "in",
                        dsb: "de",
                        dua: "cm",
                        dyo: "sn",
                        dyu: "bf",
                        ebu: "ke",
                        efi: "ng",
                        ewo: "cm",
                        fan: "gq",
                        fil: "ph",
                        fon: "bj",
                        fur: "it",
                        gaa: "gh",
                        gag: "md",
                        gbm: "in",
                        gcr: "gf",
                        gez: "et",
                        gil: "ki",
                        gon: "in",
                        gor: "id",
                        grt: "in",
                        gsw: "ch",
                        guz: "ke",
                        gwi: "ca",
                        haw: "us",
                        hil: "ph",
                        hne: "in",
                        hnn: "ph",
                        hoc: "in",
                        hoj: "in",
                        ibb: "ng",
                        ilo: "ph",
                        inh: "ru",
                        jgo: "cm",
                        jmc: "tz",
                        kaa: "uz",
                        kab: "dz",
                        kaj: "ng",
                        kam: "ke",
                        kbd: "ru",
                        kcg: "ng",
                        kde: "tz",
                        kdt: "th",
                        kea: "cv",
                        ken: "cm",
                        kfo: "ci",
                        kfr: "in",
                        kha: "in",
                        khb: "cn",
                        khq: "ml",
                        kht: "in",
                        kkj: "cm",
                        kln: "ke",
                        kmb: "ao",
                        koi: "ru",
                        kok: "in",
                        kos: "fm",
                        kpe: "lr",
                        krc: "ru",
                        kri: "sl",
                        krl: "ru",
                        kru: "in",
                        ksb: "tz",
                        ksf: "cm",
                        ksh: "de",
                        kum: "ru",
                        lag: "tz",
                        lah: "pk",
                        lbe: "ru",
                        lcp: "cn",
                        lep: "in",
                        lez: "ru",
                        lif: "np",
                        lis: "cn",
                        lki: "ir",
                        lmn: "in",
                        lol: "cd",
                        lua: "cd",
                        luo: "ke",
                        luy: "ke",
                        lwl: "th",
                        mad: "id",
                        mag: "in",
                        mai: "in",
                        mak: "id",
                        man: "gn",
                        mas: "ke",
                        mdf: "ru",
                        mdh: "ph",
                        mdr: "id",
                        men: "sl",
                        mer: "ke",
                        mfe: "mu",
                        mgh: "mz",
                        mgo: "cm",
                        min: "id",
                        mni: "in",
                        mnk: "gm",
                        mnw: "mm",
                        mos: "bf",
                        mua: "cm",
                        mwr: "in",
                        myv: "ru",
                        nap: "it",
                        naq: "na",
                        nds: "de",
                        "new": "np",
                        niu: "nu",
                        nmg: "cm",
                        nnh: "cm",
                        nod: "th",
                        nso: "za",
                        nus: "sd",
                        nym: "tz",
                        nyn: "ug",
                        pag: "ph",
                        pam: "ph",
                        pap: "bq",
                        pau: "pw",
                        pon: "fm",
                        prd: "ir",
                        raj: "in",
                        rcf: "re",
                        rej: "id",
                        rjs: "np",
                        rkt: "in",
                        rof: "tz",
                        rwk: "tz",
                        saf: "gh",
                        sah: "ru",
                        saq: "ke",
                        sas: "id",
                        sat: "in",
                        saz: "in",
                        sbp: "tz",
                        scn: "it",
                        sco: "gb",
                        sdh: "ir",
                        seh: "mz",
                        ses: "ml",
                        shi: "ma",
                        shn: "mm",
                        sid: "et",
                        sma: "se",
                        smj: "se",
                        smn: "fi",
                        sms: "fi",
                        snk: "ml",
                        srn: "sr",
                        srr: "sn",
                        ssy: "er",
                        suk: "tz",
                        sus: "gn",
                        swb: "yt",
                        swc: "cd",
                        syl: "bd",
                        syr: "sy",
                        tbw: "ph",
                        tcy: "in",
                        tdd: "cn",
                        tem: "sl",
                        teo: "ug",
                        tet: "tl",
                        tig: "er",
                        tiv: "ng",
                        tkl: "tk",
                        tmh: "ne",
                        tpi: "pg",
                        trv: "tw",
                        tsg: "ph",
                        tts: "th",
                        tum: "mw",
                        tvl: "tv",
                        twq: "ne",
                        tyv: "ru",
                        tzm: "ma",
                        udm: "ru",
                        uli: "fm",
                        umb: "ao",
                        unr: "in",
                        unx: "in",
                        vai: "lr",
                        vun: "tz",
                        wae: "ch",
                        wal: "et",
                        war: "ph",
                        xog: "ug",
                        xsr: "np",
                        yao: "mz",
                        yap: "fm",
                        yav: "cm",
                        zza: "tr"
                    }[w[0]];
                    return m
                }
                ;
                b.getWeekend = function(w) {
                    var m = b._region(w);
                    w = {
                        "in": 0,
                        af: 4,
                        dz: 4,
                        ir: 4,
                        om: 4,
                        sa: 4,
                        ye: 4,
                        ae: 5,
                        bh: 5,
                        eg: 5,
                        il: 5,
                        iq: 5,
                        jo: 5,
                        kw: 5,
                        ly: 5,
                        ma: 5,
                        qa: 5,
                        sd: 5,
                        sy: 5,
                        tn: 5
                    }[m];
                    m = {
                        af: 5,
                        dz: 5,
                        ir: 5,
                        om: 5,
                        sa: 5,
                        ye: 5,
                        ae: 6,
                        bh: 5,
                        eg: 6,
                        il: 6,
                        iq: 6,
                        jo: 6,
                        kw: 6,
                        ly: 6,
                        ma: 6,
                        qa: 6,
                        sd: 6,
                        sy: 6,
                        tn: 6
                    }[m];
                    void 0 === w && (w = 6);
                    void 0 === m && (m = 0);
                    return {
                        start: w,
                        end: m
                    }
                }
                ;
                return b
            })
        },
        "esri/_coremap": function() {
            define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B, D, G, A, E, H, J, O, V, aa, da, ea, Y, ia, qa, wa, K, Z, pa, L, R, ha, na, ta, xa) {
                function Aa(M, S) {
                    var fa = M.lods;
                    fa.sort(function(Da, Ra) {
                        return Da.scale > Ra.scale ? -1 : Da.scale < Ra.scale ? 1 : 0
                    });
                    var ra = [];
                    fa = h.filter(fa, function(Da) {
                        if (-1 === U(ra, Da.scale))
                            return ra.push(Da.scale),
                            !0
                    });
                    var va = S.lods = [], Ca;
                    h.forEach(fa, function(Da, Ra) {
                        Ca = va[Ra] = new L(Da);
                        Ca.level = Ra
                    });
                    S.tileInfo = new pa(ma(M, {
                        lods: va
                    }))
                }
                var ca, ja = wa.toMapPoint, X = wa.toScreenPoint, oa = m.connect, ka = m.disconnect, Ea = k.hitch, T = g.set, U = h.indexOf, ma = k.mixin, sa = 0, ya = u.defaults.map, Oa = ya.layerNamePrefix, Ua = ya.graphicsLayerNamePrefix, Xa = new RegExp("^" + Oa + "(\\d+)$"), Ma = new RegExp("^" + Ua + "(\\d+)$"), I = function() {}, Q = 0, ba = ta.isWebGLEnabled();
                w = w([B, H], {
                    declaredClass: "esri._CoreMap",
                    tables: null,
                    resizeDelay: 300,
                    invalidExtent: "Map does not have a valid extent.",
                    invalidGeometry: "Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",
                    unknownBasemap: 'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
                    invalidBasemap: 'Unable to add basemap: "${basemapName}".',
                    unknownLayerType: 'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',
                    visible: !0,
                    webglEnabled: ba,
                    _eventMap: {
                        "basemap-change": !0,
                        "extent-change": ["extent", "delta", "levelChange", "lod"],
                        "layer-add": ["layer"],
                        "layer-add-result": ["layer", "error"],
                        "layer-remove": ["layer"],
                        "layer-reorder": ["layer", "index"],
                        "layer-resume": ["layer"],
                        "layer-suspend": ["layer"],
                        "layers-add-result": ["layers"],
                        "layers-removed": !0,
                        "layers-reordered": ["layerIds"],
                        load: ["map"],
                        pan: ["extent", "delta"],
                        "pan-end": ["extent", "delta"],
                        "pan-start": ["extent", "screenPoint"],
                        reposition: ["x", "y"],
                        resize: ["extent", "width", "height"],
                        scale: ["matrix", "immediate"],
                        "time-extent-change": ["timeExtent"],
                        "before-unload": ["map"],
                        unload: ["map"],
                        "update-end": ["error"],
                        "update-start": !0,
                        zoom: ["extent", "zoomFactor", "anchor"],
                        "zoom-end": ["extent", "zoomFactor", "anchor", "level"],
                        "zoom-start": ["extent", "zoomFactor", "anchor", "level"],
                        click: !0,
                        "dbl-click": !0,
                        "key-down": !0,
                        "key-up": !0,
                        "mouse-down": !0,
                        "mouse-drag": !0,
                        "mouse-drag-end": !0,
                        "mouse-drag-start": !0,
                        "mouse-move": !0,
                        "mouse-out": !0,
                        "mouse-over": !0,
                        "mouse-up": !0,
                        "mouse-wheel": !0,
                        "basic-tap": !0,
                        "double-tap": !0,
                        "pinch-end": !0,
                        "pinch-move": !0,
                        "pinch-start": !0,
                        "processed-double-tap": !0,
                        "processed-tap": !0,
                        "swipe-end": !0,
                        "swipe-move": !0,
                        "swipe-start": !0,
                        tap: !0,
                        "two-finger-tap": !0
                    },
                    constructor: function(M, S) {
                        S = S || {};
                        this.registerConnectEvents();
                        ma(this, {
                            _internalLayerIds: [],
                            _layers: [],
                            _layerDivs: [],
                            _basemapPending: !1,
                            _connects: [],
                            _layerAddPromises: {},
                            _zoomAnimDiv: null,
                            _zoomAnim: null,
                            _layersDiv: null,
                            _firstLayerId: null,
                            _delta: null,
                            _cursor: null,
                            _ratioW: 1,
                            _ratioH: 1,
                            _params: null,
                            _minResolution: 0,
                            _maxResolution: 0,
                            cursor: null,
                            layerIds: [],
                            graphicsLayerIds: [],
                            graphics: null,
                            _labels: null,
                            loaded: !1,
                            __panning: !1,
                            __zooming: !1,
                            __container: null,
                            root: null,
                            __LOD: null,
                            __tileInfo: null,
                            __visibleRect: null,
                            __visibleDelta: null,
                            _rids: [],
                            _webglContextOwners: []
                        });
                        var fa = this.container = a.byId(M)
                          , ra = this.id = c.get(fa, "id") || x.getUniqueId(this.declaredClass);
                        e.add(fa, "map");
                        var va = t.getContentBox(fa);
                        M = e.add;
                        var Ca = n.create;
                        this.position = new da(0,0);
                        this._reposition();
                        var Da = this.width = 0 < va.w ? va.w : ya.width
                          , Ra = this.height = 0 < va.h ? va.h : ya.height
                          , Na = this.root = Ca("div", {
                            id: ra + "_root",
                            style: {
                                width: Da + "px",
                                height: Ra + "px",
                                direction: "ltr"
                            }
                        });
                        M(Na, "esriMapContainer");
                        va = this.__container = Ca("div", {
                            id: ra + "_container"
                        }, Na);
                        T(va, "position", "absolute");
                        M(va, "esriMapContainer");
                        fa.appendChild(Na);
                        S = this._params = ma({
                            slider: !0,
                            nav: !1,
                            zoom: -1,
                            minZoom: -1,
                            maxZoom: -1,
                            scale: -1,
                            minScale: 0,
                            maxScale: 0,
                            showInfoWindowOnClick: !0,
                            displayGraphicsOnPan: !0,
                            wrapAround180: !0,
                            fitExtent: !1,
                            optimizePanAnimation: !0
                        }, S);
                        this.setWebGLEnabled(null != S.webglEnabled ? S.webglEnabled : this.webglEnabled);
                        this.maxWebGLContexts = null != S.maxWebGLContexts ? S.maxWebGLContexts : -1;
                        this.wrapAround180 = S.wrapAround180;
                        this.optimizePanAnimation = S.optimizePanAnimation;
                        this.setBackgroundColor(S.backgroundColor);
                        r.isDefined(S.resizeDelay) && (this.resizeDelay = S.resizeDelay);
                        S.lods && (Aa({
                            rows: 512,
                            cols: 512,
                            dpi: 96,
                            format: "JPEG",
                            compressionQuality: 75,
                            origin: {
                                x: -180,
                                y: 90
                            },
                            spatialReference: {
                                wkid: 4326
                            },
                            lods: S.lods
                        }, S),
                        this.__tileInfo = S.tileInfo);
                        this.extent = S.extent;
                        this._extentUtil({
                            mapCenter: S.center,
                            targetLevel: S.zoom,
                            targetScale: S.scale
                        });
                        this.__visibleRect = new Y(0,0,Da,Ra);
                        this.__visibleDelta = new Y(0,0,Da,Ra);
                        ra = this._layersDiv = Ca("div", {
                            id: ra + "_layers"
                        });
                        M(ra, "esriMapLayers");
                        va.appendChild(ra);
                        this._zoomAnimDiv = Ca("div", {
                            style: {
                                position: "absolute"
                            }
                        });
                        S.infoWindow ? this.infoWindow = S.infoWindow : (M = this.infoWindow = new xa(S.popupOptions,Ca("div")),
                        M.startup(),
                        M._ootb = !0,
                        T(M.domNode, "zIndex", 40));
                        if (S.showLabels) {
                            var Ja = this;
                            C(["./layers/LabelLayer"], function(Pa) {
                                ca = Pa;
                                Ja._createLabelLayer()
                            });
                            this.on("load", function() {
                                Ja._createLabelLayer()
                            })
                        }
                        this.addPlugin(this._getAbsMid("./plugins/popupManager"), {
                            enabled: S.showInfoWindowOnClick
                        });
                        this._zoomStartHandler = Ea(this, this._zoomStartHandler);
                        this._zoomingHandler = Ea(this, this._zoomingHandler);
                        this._zoomEndHandler = Ea(this, this._zoomEndHandler);
                        this._panningHandler = Ea(this, this._panningHandler);
                        this._panEndHandler = Ea(this, this._panEndHandler);
                        this._endTranslate = Ea(this, this._endTranslate);
                        this._timedResize = Ea(this, this._timedResize);
                        this._execResize = Ea(this, this._execResize);
                        this._processLabelLayers = Ea(this, this._processLabelLayers);
                        this._updateLabelLayers = Ea(this, this._updateLabelLayers);
                        this.resize = Ea(this, this.resize);
                        d.addOnWindowUnload(this, this.destroy)
                    },
                    _getAbsMid: function(M) {
                        return C.toAbsMid ? C.toAbsMid(M) : y.id.replace(/\/[^\/]*$/ig, "/") + M
                    },
                    _cleanUp: function() {
                        var M = this.infoWindow;
                        M && (M._ootb && M.destroy ? M.destroy() : M.unsetMap(this),
                        delete this.infoWindow);
                        ka(this._tsTimeExtentChange_connect);
                        this.removePlugin("./plugins/popupManager");
                        n.destroy(this.root);
                        this.root = null
                    },
                    _addLayer: function(M, S, fa) {
                        if (M.id) {
                            var ra = M.id.match(M instanceof Z ? Ma : Xa);
                            ra && ra[1] && (ra = Number(ra[1]),
                            sa <= ra && (sa = ra + 1))
                        }
                        var va = M.id || (M instanceof Z ? Ua : Oa) + sa++;
                        M.id = va;
                        this._layers[va] = M;
                        M._isRefLayer = "top" === fa;
                        fa = !r.isDefined(fa) || 0 > fa || fa > S.length || "top" === fa ? S.length : fa;
                        var Ca;
                        if (!M._isRefLayer)
                            for (; (Ca = this.getLayer(S[fa - 1])) && Ca._isRefLayer; )
                                fa--;
                        if (ra = !this._firstLayerId && !this.loaded && !this._basemapPending && 0 === fa && (S === this.layerIds || S === this.graphicsLayerIds))
                            this._firstLayerId = va;
                        S.splice(fa, 0, va);
                        var Da = Ea(this, this._addLayerHandler)
                          , Ra = this;
                        fa = this._connects;
                        Ca = function() {
                            M.loaded ? Ra._onLoadFix ? (Ra._onLoadFix = !1,
                            setTimeout(function() {
                                Da(M)
                            }, 0)) : Da(M) : (Ra["_" + va + "_addtoken_load"] = oa(M, "onLoad", Ra, "_addLayerHandler"),
                            Ra["_" + va + "_addtoken_err"] = oa(M, "onError", Ra, function(Na) {
                                Da(M, Na, S)
                            }))
                        }
                        ;
                        this.loaded || ra || M.loaded && -1 === U(this.graphicsLayerIds, va) ? Ca() : fa.push(oa(this, "onLoad", Ca));
                        return M
                    },
                    _forgetLayer: function(M) {
                        M = M.id;
                        ka(this["_" + M + "_addtoken_load"]);
                        ka(this["_" + M + "_addtoken_err"]);
                        var S = this._layerAddPromises[M];
                        S && (delete this._layerAddPromises[M],
                        S.cancel())
                    },
                    _addLayerHandler: function(M, S, fa) {
                        S ? this._attachLayerToMap(M, S, fa) : M._prepareToAttach ? (this._layerAddPromises[M.id] = M._prepareToAttach(this)).always(k.hitch(this, function(ra) {
                            ra && "cancel" === ra.dojoType || this._attachLayerToMap(M, null, fa)
                        })) : M.declaredClass && (-1 < M.declaredClass.toLowerCase().indexOf("vectortilelayer") || -1 < M.declaredClass.toLowerCase().indexOf("rasterxlayer") && M.useWebGL) && !this.isWebGLContextAvailable() ? (S = Error("Too many WebGL contexts. Unable to add the layer: ", M.url),
                        this._attachLayerToMap(M, S, this.layerIds)) : this._attachLayerToMap(M, S, fa)
                    },
                    _attachLayerToMap: function(M, S, fa) {
                        var ra = this.id
                          , va = M.id
                          , Ca = U(M instanceof Z ? this.graphicsLayerIds : this.layerIds, va)
                          , Da = Ca
                          , Ra = !1
                          , Na = this._params;
                        this._forgetLayer(M);
                        if (S)
                            delete this._layers[va],
                            -1 !== Ca && (fa.splice(Ca, 1),
                            this.onLayerAddResult(M, S));
                        else {
                            -1 === Ca && (Ca = U(this._internalLayerIds, va),
                            Da = 20 + Ca,
                            Ra = !0);
                            if (va === this._firstLayerId) {
                                S = M.spatialReference;
                                fa = this.extent && this.extent.spatialReference;
                                !fa || fa.equals(S) || !M.tileInfo && M.url || (fa = null);
                                fa = this.spatialReference = fa || S;
                                this.wrapAround180 = this.wrapAround180 && fa && fa._isWrappable() ? !0 : !1;
                                M.tileInfo && (this.__tileInfo ? (S = this.__tileInfo.lods,
                                this.__tileInfo = ma({}, M.tileInfo),
                                this.__tileInfo.lods = S) : (Aa(ma({}, M.tileInfo), Na),
                                this.__tileInfo = Na.tileInfo));
                                if (this.wrapAround180) {
                                    S = this.__tileInfo;
                                    fa = fa._getInfo();
                                    if (!S || Math.abs(fa.origin[0] - S.origin.x) > fa.dx)
                                        this.wrapAround180 = !1;
                                    this.wrapAround180 && S && A._addFrameInfo(S, fa)
                                }
                                Na.units = M.units;
                                if ((S = this.__tileInfo && this.__tileInfo.lods) && S.length) {
                                    fa = Na.minScale;
                                    Ca = Na.maxScale;
                                    var Ja = -1, Pa = -1, eb = !1, bb = !1, gb;
                                    for (gb = 0; gb < S.length; gb++)
                                        0 < fa && !eb && fa >= S[gb].scale && (Ja = S[gb].level,
                                        eb = !0),
                                        0 < Ca && !bb && Ca >= S[gb].scale && (Pa = 0 < gb ? S[gb - 1].level : -1,
                                        bb = !0);
                                    -1 === Na.minZoom && (Na.minZoom = 0 === fa ? S[0].level : Ja);
                                    -1 === Na.maxZoom && (Na.maxZoom = 0 === Ca ? S[S.length - 1].level : Pa);
                                    for (gb = 0; gb < S.length; gb++)
                                        Na.minZoom === S[gb].level && (Na.minScale = S[gb].scale,
                                        this._minResolution = S[gb].resolution),
                                        Na.maxZoom === S[gb].level && (Na.maxScale = S[gb].scale,
                                        this._maxResolution = S[gb].resolution)
                                } else
                                    Na.minZoom = Na.maxZoom = Na.zoom = -1
                            }
                            M instanceof Z ? (this._gc || (this._gc = new Z._GraphicsContainer,
                            this._gc._setMap(this, this._layersDiv).id = ra + "_gc"),
                            this._attachGraphicsLayer(M).id = ra + "_" + va) : (Da = M._setMap(this, this._layersDiv, Da, this.__LOD),
                            Da.id = ra + "_" + va,
                            this._layerDivs[va] = Da,
                            this._reorderLayers(this.layerIds),
                            Ra || -1 === M.declaredClass.indexOf("VETiledLayer") || this._onBingLayerAdd(M));
                            va === this._firstLayerId && (this.graphics = new Z({
                                id: ra + "_graphics",
                                displayOnPan: Na.displayGraphicsOnPan
                            }),
                            this._addLayer(this.graphics, this._internalLayerIds, 20));
                            if (M === this.graphics) {
                                fa = this._layers[this._firstLayerId];
                                ra = Na.zoom;
                                Da = Na.scale;
                                S = Na.center;
                                fa = fa.initialExtent || fa.fullExtent;
                                this._firstLayerId = null;
                                this.extent && (this.extent = this._convertGeometry(this, this.extent));
                                !this.extent && fa && (S && (S = this._convertGeometry(fa, S)),
                                S && (fa = fa.centerAt(S),
                                S = null));
                                if (S = this.extent || fa && new ea(fa.toJson()))
                                    -1 < ra ? S = this.__getExtentForLevel(ra, null, S).extent : 0 < Da && (S = qa.getExtentForScale(this, Da, S));
                                if (!S) {
                                    console.log("Map: " + this.invalidExtent);
                                    return
                                }
                                Na = this._fixExtent(S, Na.fitExtent);
                                this.extent = Na.extent;
                                this.__LOD = Na.lod;
                                this.__setExtent(this.extent);
                                this.loaded = !0;
                                this.attr("data-loaded", "");
                                this.infoWindow.setMap(this);
                                this.onLoad(this)
                            }
                            Ra || (this.onLayerAdd(M),
                            this.onLayerAddResult(M));
                            ka(this[va + "_addLayerHandler_connect"])
                        }
                    },
                    _convertGeometry: function(M, S) {
                        M = M && M.spatialReference;
                        var fa = S && S.spatialReference;
                        M && fa && !M.equals(fa) && (M._canProject(fa) ? M.isWebMercator() ? S = K.geographicToWebMercator(S) : 4326 === M.wkid && (S = K.webMercatorToGeographic(S, !0)) : (console.log("Map: " + r.substitute({
                            geometry: fa.wkid || fa.wkt,
                            map: M.wkid || M.wkt
                        }, this.invalidGeometry)),
                        S = null));
                        return S
                    },
                    _attachGraphicsLayer: function(M) {
                        var S = M.id;
                        M = M._setMap(this, this._gc._surface);
                        this._layerDivs[S] = M;
                        this._reorderLayers(this.graphicsLayerIds);
                        return M
                    },
                    _detachGraphicsLayer: function(M) {
                        M.loaded && M.getMap() && M._unsetMap(this, this._gc._surface)
                    },
                    _reorderLayers: function(M) {
                        var S = this.onLayerReorder
                          , fa = n.place
                          , ra = this._layerDivs
                          , va = this._layers
                          , Ca = this._gc ? this._gc._surface.getEventSource() : null;
                        if (M === this.graphicsLayerIds)
                            h.forEach(M, function(Pa, eb) {
                                var bb = ra[Pa];
                                Pa = va[Pa];
                                bb && (this._gc._reorderLayer(Pa, bb, eb),
                                S(Pa, eb))
                            }, this);
                        else {
                            var Da = this.graphics, Ra = Da ? Da.id : null, Na = this._layersDiv, Ja;
                            h.forEach(M, function(Pa, eb) {
                                Ja = ra[Pa];
                                Pa !== Ra && Ja && (fa(Ja, Na, eb),
                                S(va[Pa], eb))
                            });
                            this._mapImageLyr && this._placeMapImageLyr();
                            Ca && (Ca = 9 > q("ie") ? Ca.parentNode : Ca,
                            fa(Ca, Ca.parentNode, "last"))
                        }
                        this.onLayersReordered([].concat(M))
                    },
                    _zoomStartHandler: function() {
                        this.__zoomStart(this._zoomAnimDiv.startingExtent, this._zoomAnimDiv.anchor)
                    },
                    _zoomingHandler: function(M) {
                        var S = parseFloat(M.left)
                          , fa = parseFloat(M.top);
                        M = new ea(S,fa - parseFloat(M.height),S + parseFloat(M.width),fa,this.spatialReference);
                        S = this.extent.getWidth() / M.getWidth();
                        this.__zoom(M, S, this._zoomAnimDiv.anchor)
                    },
                    _zoomEndHandler: function() {
                        var M = this._zoomAnimDiv
                          , S = M.extent
                          , fa = this.extent.getWidth() / S.getWidth()
                          , ra = M.anchor
                          , va = M.newLod
                          , Ca = M.levelChange;
                        M.extent = M.anchor = M.levelChange = M.startingExtent = M.newLod = this._delta = this._zoomAnim = null;
                        this.__zoomEnd(S, fa, ra, va, Ca)
                    },
                    _panningHandler: function(M) {
                        if (isNaN(parseFloat(M.left)) || isNaN(parseFloat(M.top))) {
                            var S = Math.round
                              , fa = this._panAnim.node;
                            M.left = -1 * (this._delta.x - S(this.width / 2)) + "px";
                            M.top = -1 * (this._delta.y - S(this.height / 2)) + "px";
                            g.set(fa, "left", M.left);
                            g.set(fa, "top", M.top)
                        }
                        M = new da(parseFloat(M.left),parseFloat(M.top));
                        S = this.toMap(M);
                        this.onPan(this.extent.offset(this.extent.xmin - S.x, this.extent.ymax - S.y), M)
                    },
                    _panEndHandler: function(M) {
                        this.__panning = !1;
                        var S = Math.round;
                        M = new da(-S(parseFloat(M.style.left)),-S(parseFloat(M.style.top)));
                        S = M.x;
                        var fa = M.y
                          , ra = this.__visibleRect
                          , va = this.__visibleDelta;
                        ra.x += -S;
                        ra.y += -fa;
                        va.x += -S;
                        va.y += -fa;
                        T(this._zoomAnimDiv, {
                            left: "0px",
                            top: "0px"
                        });
                        ra = this.extent;
                        va = this._ratioW;
                        var Ca = this._ratioH;
                        ra = new ea(ra.xmin + S / va,ra.ymin - fa / Ca,ra.xmax + S / va,ra.ymax - fa / Ca,this.spatialReference);
                        M.setX(-M.x);
                        M.setY(-M.y);
                        this._delta = this._panAnim = null;
                        this._updateExtent(ra);
                        this.onPanEnd(ra, M);
                        this._fireExtChg([ra, M, !1, this.__LOD])
                    },
                    _fixExtent: function(M, S) {
                        for (var fa = this._reshapeExtent(M), ra = 1.25; !0 === S && (fa.extent.getWidth() < M.getWidth() || fa.extent.getHeight() < M.getHeight()) && 0 < fa.lod.level && 3 >= ra; )
                            fa = this._reshapeExtent(M.expand(ra)),
                            ra += .25;
                        return fa
                    },
                    _getFrameWidth: function() {
                        var M = -1
                          , S = this.spatialReference._getInfo();
                        this.__LOD ? (S = this.__LOD._frameInfo) && (M = S[3]) : S && (M = Math.round(2 * S.valid[1] / (this.extent.getWidth() / this.width)));
                        return M
                    },
                    _fixAspectRatio: function(M) {
                        var S = M.getWidth()
                          , fa = M.getHeight()
                          , ra = S / fa
                          , va = this.width / this.height
                          , Ca = 0
                          , Da = 0;
                        this.width > this.height ? S > fa ? va > ra ? Ca = fa * va - S : Da = S / va - fa : Ca = fa * va - S : this.width < this.height ? S < fa ? va > ra ? Ca = fa * va - S : Da = S / va - fa : Da = S / va - fa : S < fa ? Ca = fa - S : S > fa && (Da = S / va - fa);
                        Ca && (M.xmin -= Ca / 2,
                        M.xmax += Ca / 2);
                        Da && (M.ymin -= Da / 2,
                        M.ymax += Da / 2);
                        return M
                    },
                    _reshapeExtent: function(M) {
                        M = this._fixAspectRatio(M);
                        return this._getAdjustedExtent(M)
                    },
                    _getAdjustedExtent: function(M) {
                        if (this.__tileInfo)
                            return A.getCandidateTileInfo(this, this.__tileInfo, M);
                        var S = qa.getScale(this, M)
                          , fa = this.getMinScale()
                          , ra = this.getMaxScale();
                        !fa || S <= fa ? !ra || S >= ra || (M = qa.getExtentForScale(this, ra, M)) : M = qa.getExtentForScale(this, fa, M);
                        return {
                            extent: M
                        }
                    },
                    _onBingLayerAdd: function(M) {
                        this["__" + M.id + "_vis_connect"] = m.connect(M, "onVisibilityChange", this, "_toggleBingLogo");
                        this._toggleBingLogo(M.visible)
                    },
                    _onBingLayerRemove: function(M) {
                        m.disconnect(this["__" + M.id + "_vis_connect"]);
                        delete this["__" + M.id + "_vis_connect"];
                        var S = h.some(this.layerIds, function(fa) {
                            return (M = this._layers[fa]) && M.visible && -1 !== M.declaredClass.indexOf("VETiledLayer")
                        }, this);
                        this._toggleBingLogo(S)
                    },
                    _toggleBingLogo: function(M) {
                        M && !this._bingLogo ? (M = {
                            left: this._mapParams && this._mapParams.nav ? "25px" : ""
                        },
                        6 === q("ie") && (M.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'" + C.toUrl("./images/map/bing-logo-lg.png") + "')"),
                        M = this._bingLogo = n.create("div", {
                            style: M
                        }, this.root),
                        e.add(M, "bingLogo-lg")) : !M && this._bingLogo && (n.destroy(this._bingLogo),
                        delete this._bingLogo)
                    },
                    __panStart: function(M, S) {
                        var fa = this._zoomAnim
                          , ra = this._panAnim;
                        if (fa && fa._active)
                            fa.stop(),
                            fa._fire("onEnd", [fa.node]);
                        else if (ra && ra._active) {
                            ra.stop();
                            this._panAnim = null;
                            S = ra.curve.getValue(ra._getStep());
                            M = Math.round(parseFloat(S.left));
                            S = Math.round(parseFloat(S.top));
                            fa = this.navigationManager._dragOrigin;
                            this.__pan(M, S);
                            fa && (fa.x -= M,
                            fa.y -= S);
                            return
                        }
                        this.__panning = !0;
                        this.onPanStart(this.extent, new da(M,S))
                    },
                    __pan: function(M, S) {
                        var fa = this.extent
                          , ra = this._ratioW
                          , va = this._ratioH;
                        this.onPan(new ea(fa.xmin - M / ra,fa.ymin + S / va,fa.xmax - M / ra,fa.ymax + S / va,this.spatialReference), new da(M,S))
                    },
                    __panEnd: function(M, S) {
                        var fa = this.__visibleRect
                          , ra = this.__visibleDelta;
                        fa.x += M;
                        fa.y += S;
                        ra.x += M;
                        ra.y += S;
                        fa = new da(M,S);
                        ra = this.extent;
                        var va = this._ratioW
                          , Ca = this._ratioH;
                        ra = new ea(ra.xmin - M / va,ra.ymin + S / Ca,ra.xmax - M / va,ra.ymax + S / Ca,this.spatialReference);
                        this.__panning = !1;
                        this._updateExtent(ra);
                        this.onPanEnd(ra, fa);
                        this._fireExtChg([ra, fa, !1, this.__LOD])
                    },
                    __zoomStart: function(M, S) {
                        this.__zooming = !0;
                        this.onZoomStart(M, 1, S, this.__LOD ? this.__LOD.level : null)
                    },
                    __zoom: function(M, S, fa) {
                        this.onZoom(M, S, fa)
                    },
                    __zoomEnd: function(M, S, fa, ra, va) {
                        T(this._layersDiv, {
                            left: "0px",
                            top: "0px"
                        });
                        this._delta = new da(0,0);
                        this.__visibleRect.x = this.__visibleRect.y = 0;
                        M = new ea(M);
                        this.__LOD = ra;
                        this._ratioW = this.width / M.getWidth();
                        this._ratioH = this.height / M.getHeight();
                        var Ca = this._delta;
                        this._delta = null;
                        this.__zooming = !1;
                        this._updateExtent(M, va);
                        this.onZoomEnd(M, S, fa, ra ? ra.level : null);
                        this._fireExtChg([M, Ca, va, ra])
                    },
                    _extentUtil: function(M, S, fa, ra, va) {
                        var Ca = new l
                          , Da = this.width
                          , Ra = this.height;
                        if (M) {
                            var Na = M.numLevels;
                            var Ja = M.targetLevel;
                            var Pa = r.isDefined(Ja);
                            var eb = M.factor;
                            var bb = M.mapAnchor;
                            var gb = M.screenAnchor;
                            var cb = M.mapCenter;
                            var kb = M.levelOrFactor;
                            var ub = M.targetScale;
                            var ob = r.isDefined(ub) && 0 < ub
                        }
                        if (S) {
                            var db = S.dx;
                            var jb = S.dy;
                            cb = S.mapCenter
                        }
                        k.isArray(cb) && (cb = new aa(cb));
                        var nb = this._panAnim;
                        S = (M = this._stopAnim()) ? M.divExtent : this.extent;
                        var Jb = this.__tileInfo
                          , Ab = this._params;
                        if (!this.loaded) {
                            if (fa)
                                S && (fa = this._convertGeometry(S, fa)),
                                fa && (this.extent = fa,
                                Ab.zoom = Ab.scale = -1,
                                Ab.center = null);
                            else if (cb || Pa || ob) {
                                if (cb)
                                    if (S) {
                                        if (cb = this._convertGeometry(S, cb))
                                            this.extent = S.centerAt(cb),
                                            Ab.center = null
                                    } else
                                        Ab.center = cb;
                                Pa && -1 < Ja ? (Ab.zoom = Ja,
                                Ab.scale = -1) : ob && (Ab.scale = ub,
                                Ab.zoom = -1)
                            }
                            Ca.resolve();
                            return Ca
                        }
                        if (cb && (cb = this._convertGeometry(this, cb),
                        !cb) || bb && (bb = this._convertGeometry(this, bb),
                        !bb) || fa && (fa = this._convertGeometry(this, fa),
                        !fa))
                            return Ca.reject(),
                            Ca;
                        nb && bb && gb && (bb = ja(this.extent, Da, Ra, gb));
                        M && bb && gb && (bb = ja(M.divExtent, Da, Ra, gb));
                        if (Pa)
                            if (Jb)
                                Na = this.getMinZoom(),
                                Pa = this.getMaxZoom(),
                                Ja < Na ? Ja = Na : Ja > Pa && (Ja = Pa),
                                Na = Ja - (M ? M.level : this.getLevel());
                            else {
                                Na = 0 < Ja ? -1 : 1;
                                var vb = kb ? Ja : null
                            }
                        if (!fa)
                            if (r.isDefined(Na))
                                Jb ? (Da = M ? M.level : this.getLevel(),
                                Da = this.__getExtentForLevel(Da + Na, cb, S).extent) : (Da = (M ? M.end : this.extent).expand(vb || (0 < Na ? .5 * Na : 2 * -Na)),
                                vb && cb && (Da = Da.centerAt(cb))),
                                Da && (cb ? fa = Da : (db = bb || S.getCenter(),
                                Ra = Da.getWidth(),
                                jb = Da.getHeight(),
                                Da = db.x >= S.xmin && db.x <= S.xmax ? (db.x - S.xmin) / S.getWidth() : .5,
                                fa = db.y >= S.ymin && db.y <= S.ymax ? (db.y - S.ymin) / S.getHeight() : .5,
                                Da = db.x - Da * Ra,
                                db = db.y - fa * jb,
                                fa = new ea(Da,db,Da + Ra,db + jb,this.spatialReference)));
                            else if (ob)
                                fa = qa.getExtentForScale(this, ub, S);
                            else if (r.isDefined(eb))
                                fa = S.expand(eb);
                            else if (db || jb)
                                M ? (fa = M.end,
                                bb = fa.getCenter(),
                                vb = X(fa, Da, Ra, bb),
                                vb.x += db,
                                vb.y += jb,
                                vb = ja(fa, Da, Ra, vb),
                                fa = fa.offset(vb.x - bb.x, vb.y - bb.y)) : (db = new da(Da / 2 + db,Ra / 2 + jb),
                                db = ja(S, Da, Ra, db),
                                Ra = S.getWidth(),
                                jb = S.getHeight(),
                                Da = db.x - Ra / 2,
                                db = db.y - jb / 2,
                                fa = new ea(Da,db,Da + Ra,db + jb,this.spatialReference));
                        fa || (cb ? (S = M ? M.end : S,
                        Ra = S.getWidth(),
                        jb = S.getHeight(),
                        Da = cb.x - Ra / 2,
                        db = cb.y - jb / 2,
                        fa = new ea(Da,db,Da + Ra,db + jb,this.spatialReference)) : M && (fa = M.end));
                        fa ? (this._extentDfd && -1 === this._extentDfd.fired && (this._extentDfd.then(null, I),
                        this._extentDfd.reject()),
                        this._extentDfd = Ca,
                        this.__setExtent(fa, null, gb, ra, M, va)) : Ca.reject();
                        return Ca
                    },
                    __setExtent: function(M, S, fa, ra, va, Ca) {
                        try {
                            if (this._firstLayerId)
                                this.extent = M;
                            else {
                                var Da = !0
                                  , Ra = this.spatialReference
                                  , Na = va ? va.divExtent : this.extent
                                  , Ja = this._fixExtent(M, ra || !1);
                                M = Ja.extent;
                                var Pa = M.getWidth()
                                  , eb = M.getHeight()
                                  , bb = Math.round;
                                if (Na) {
                                    var gb = bb(1E6 * Na.getWidth())
                                      , cb = bb(1E6 * Pa)
                                      , kb = bb(1E6 * Na.getHeight())
                                      , ub = bb(1E6 * eb);
                                    Da = gb !== cb || kb !== ub
                                }
                                var ob, db = va && va.rect, jb = va && va.divExtent;
                                if (ya.zoomDuration && Da && Na) {
                                    jb = jb || new ea(Na);
                                    db = db || {
                                        left: Na.xmin,
                                        top: Na.ymax,
                                        width: Na.getWidth(),
                                        height: Na.getHeight()
                                    };
                                    var nb = {
                                        left: M.xmin,
                                        top: M.ymax,
                                        width: Pa,
                                        height: eb
                                    };
                                    var Jb = new aa(M.xmin,M.ymax,Ra)
                                      , Ab = new aa(M.xmin,M.ymin,Ra)
                                      , vb = new aa(this.extent.xmin,this.extent.ymax,Ra)
                                      , Tb = new aa(this.extent.xmin,this.extent.ymin,Ra);
                                    (ob = ia.getLineIntersection(vb, Jb, Tb, Ab, Ra)) || va || (Da = !1)
                                }
                                this._ratioW = this.width / Pa;
                                this._ratioH = this.height / eb;
                                var zb = this._zoomAnimDiv;
                                if (Da)
                                    if (T(this._layersDiv, {
                                        left: "0px",
                                        top: "0px"
                                    }),
                                    S = new da(0,0),
                                    this.__visibleRect.x = this.__visibleRect.y = 0,
                                    db && nb) {
                                        this._delta = S;
                                        zb.id = "_zAD";
                                        zb.startingExtent = jb;
                                        zb.extent = M;
                                        zb.levelChange = Da;
                                        zb.newLod = Ja.lod;
                                        zb.anchor = fa ? fa : !ob && va ? va.anchor : X(this.extent, this.width, this.height, ob);
                                        var Db = this.extent.getWidth() / M.getWidth();
                                        ya.zoomAnimationThrottled && 1024 < (1 > Db ? 1 / Db : Db) ? (this.__zoomStart(jb, zb.anchor),
                                        this.__zoom(jb, 1, zb.anchor),
                                        this._fireOnScale(1, zb.anchor, !0),
                                        this.__zoomEnd(M, Db, zb.anchor, Ja.lod, Da)) : (this._zoomAnim = D.resize({
                                            node: zb,
                                            start: db,
                                            end: nb,
                                            duration: ya.zoomDuration,
                                            rate: ya.zoomRate,
                                            beforeBegin: va ? null : this._zoomStartHandler,
                                            onAnimate: this._zoomingHandler,
                                            onEnd: this._zoomEndHandler
                                        }).play(),
                                        this._fireOnScale(Db, zb.anchor, Ca))
                                    } else
                                        this._updateExtent(M, Da, Ca),
                                        this._fireExtChg([this.extent, S, Da, this.__LOD = Ja.lod]);
                                else if (!this.__panning)
                                    if (!1 === this.loaded || Ca)
                                        this._updateExtent(M, Da, Ca),
                                        this._fireExtChg([this.extent, S, Da, this.__LOD = Ja.lod]);
                                    else {
                                        this.__panning = !0;
                                        db = (new Y(0,0,this.width,this.height,this.spatialReference)).getCenter();
                                        db.x = bb(db.x);
                                        db.y = bb(db.y);
                                        var Kb = this._delta = this.toScreen(M.getCenter())
                                          , Qb = Math.abs(db.x - Kb.x)
                                          , Gb = Math.abs(db.y - Kb.y);
                                        this.optimizePanAnimation && (Qb > 2 * this.width || Gb > 2 * this.height) ? (this.__panStart(0, 0),
                                        this.__pan(0, 0),
                                        this.__visibleRect.x = this.__visibleRect.y = this.__visibleDelta.x = this.__visibleDelta.y = 0,
                                        this.__panning = !1,
                                        this._delta = null,
                                        this._updateExtent(M, !1, Ca),
                                        this.onPanEnd(this.extent, new da(0,0)),
                                        this._fireExtChg([this.extent, new da(0,0), !0, this.__LOD])) : (this.onPanStart(this.extent, new da(0,0)),
                                        this._panAnim = D.slideTo({
                                            node: zb,
                                            left: db.x - Kb.x,
                                            top: db.y - Kb.y,
                                            duration: ya.panDuration,
                                            rate: ya.panRate,
                                            onAnimate: this._panningHandler,
                                            onEnd: this._panEndHandler
                                        }),
                                        this._panAnim.play())
                                    }
                            }
                        } catch (Rb) {
                            console.log(Rb.stack),
                            console.error(Rb)
                        }
                    },
                    _fireOnScale: function(M, S, fa) {
                        if ("css-transforms" === this.navigationMode) {
                            var ra = this.__visibleDelta;
                            this.onScale(v.scaleAt(M, {
                                x: -1 * (this.width / 2 - (S.x - ra.x)),
                                y: -1 * (this.height / 2 - (S.y - ra.y))
                            }), fa)
                        }
                    },
                    _stopAnim: function() {
                        var M = this._zoomAnim
                          , S = this._panAnim;
                        if (M && M._active) {
                            M.stop();
                            S = M.curve.getValue(M._getStep());
                            var fa = parseFloat(S.left)
                              , ra = parseFloat(S.top);
                            M = M.node;
                            return {
                                anchor: M.anchor,
                                start: M.startingExtent,
                                end: M.extent,
                                level: M.newLod && M.newLod.level,
                                rect: S,
                                divExtent: new ea(fa,ra - parseFloat(S.height),fa + parseFloat(S.width),ra,this.spatialReference)
                            }
                        }
                        S && S._active && (S.stop(),
                        S._fire("onEnd", [S.node]))
                    },
                    __getExtentForLevel: function(M, S, fa) {
                        var ra = this.__tileInfo;
                        ra = ra && ra.lods;
                        M = r.isDefined(M) ? M : 0;
                        fa = fa || this.extent;
                        S = S || fa && fa.getCenter();
                        if (ra) {
                            if (S) {
                                fa = this.getMinZoom();
                                var va = this.getMaxZoom();
                                M > va && (M = va);
                                M < fa && (M = fa);
                                M = ra[M];
                                ra = this.width * M.resolution / 2;
                                fa = this.height * M.resolution / 2;
                                return {
                                    extent: new ea(S.x - ra,S.y - fa,S.x + ra,S.y + fa,S.spatialReference),
                                    lod: M
                                }
                            }
                        } else if (fa)
                            return {
                                extent: fa.expand(!M || 1 > M ? 1 : M).centerAt(S)
                            };
                        console.log("Map: " + this.invalidExtent)
                    },
                    _jobs: 0,
                    _incr: function() {
                        1 === ++this._jobs && (this.updating = !0,
                        this.attr("data-updating", ""),
                        this.onUpdateStart())
                    },
                    _decr: function() {
                        var M = --this._jobs;
                        M ? 0 > M && (this._jobs = 0) : (this.updating = !1,
                        this.attr("data-updating"),
                        this.onUpdateEnd())
                    },
                    _fireEvent: function(M, S) {
                        this[M] && this[M].apply(this, S)
                    },
                    _updateExtent: function(M, S, fa) {
                        this.extent = M;
                        M = this.spatialReference;
                        this._viewInfo = {
                            view: new V({
                                viewingMode: "map",
                                scale: this.getScale()
                            }),
                            sr: M,
                            version: S ? ++Q : Q
                        };
                        (S || fa) && this._setClipRect();
                        this._calcGeographicExtent()
                    },
                    _calcGeographicExtent: function() {
                        var M = this.spatialReference;
                        M && (M.isWebMercator() ? this.geographicExtent = K.webMercatorToGeographic(this._getAvailExtent(), !0) : 4326 === M.wkid && (this.geographicExtent = new ea(this._getAvailExtent().toJson())))
                    },
                    _fireExtChg: function(M) {
                        this.attr("data-zoom", this.getZoom());
                        this.attr("data-scale", this.getScale());
                        this._fireEvent("onExtentChange", M);
                        if (M = this._extentDfd)
                            delete this._extentDfd,
                            M.resolve()
                    },
                    attr: function(M, S) {
                        var fa = this.container;
                        fa && (null == S ? fa.removeAttribute(M) : fa.setAttribute(M, S));
                        return this
                    },
                    onUpdateStart: function() {},
                    onUpdateEnd: function() {},
                    onLoad: function() {
                        this._setClipRect();
                        this._calcGeographicExtent()
                    },
                    onBeforeUnload: function() {},
                    onUnload: function() {},
                    onExtentChange: function(M, S, fa) {},
                    onTimeExtentChange: function() {},
                    onWebGLEnabledChange: function() {},
                    onLayerAdd: function() {},
                    onLayerAddResult: function() {},
                    onLayersAddResult: function() {},
                    onLayerRemove: function() {},
                    onLayersRemoved: function() {},
                    onLayerReorder: function() {},
                    onLayersReordered: function() {},
                    onLayerSuspend: function() {},
                    onLayerResume: function() {},
                    onPanStart: function() {},
                    onPan: function() {},
                    onPanEnd: function() {},
                    onScale: function() {},
                    onZoomStart: function() {},
                    onZoom: function() {},
                    onZoomEnd: function() {},
                    onResize: function() {
                        this._setClipRect()
                    },
                    onReposition: function() {},
                    destroy: function() {
                        this._destroyed || (this.onBeforeUnload(this),
                        this.removeAllLayers(),
                        this.releaseAllWebGLContexts(),
                        this._cleanUp(),
                        clearTimeout(this._resizeTimerHandle),
                        this._gc && this._gc._cleanUp(),
                        this._destroyed = !0,
                        this.onUnload(this))
                    },
                    setCursor: function(M) {
                        T(this.__container, "cursor", this.cursor = M)
                    },
                    setMapCursor: function(M) {
                        this.setCursor(this._cursor = M)
                    },
                    resetMapCursor: function() {
                        this.setCursor(this._cursor)
                    },
                    setBackgroundColor: function(M) {
                        M && !M.declaredClass && (M = new J(M));
                        this.backgroundColor = M || null;
                        var S = "";
                        M && (S = 9 > q("ie") ? M.toHex() : "rgba(" + M.toRgba().join(",") + ")");
                        g.set(this.root, {
                            backgroundColor: S
                        })
                    },
                    setInfoWindow: function(M) {
                        var S = this.infoWindow;
                        S && S.unsetMap(this);
                        this.infoWindow = M;
                        this.loaded && M && M.setMap(this)
                    },
                    setInfoWindowOnClick: function(M) {
                        this._params.showInfoWindowOnClick = M;
                        this.popupManager && this.popupManager.set("enabled", M)
                    },
                    getInfoWindowAnchor: function(M) {
                        return this.infoWindow && this.infoWindow._getAnchor && this.infoWindow._getAnchor(M) || "upperright"
                    },
                    toScreen: function(M, S) {
                        return X(this.extent, this.width, this.height, M, S)
                    },
                    toMap: function(M) {
                        return ja(this.extent, this.width, this.height, M)
                    },
                    addLayer: function(M, S) {
                        M && !this.getLayer(M.id) && this._addLayer(M, M instanceof Z ? this.graphicsLayerIds : this.layerIds, S);
                        return M
                    },
                    addLayers: function(M) {
                        var S = [], fa = M.length, ra, va = M.length;
                        var Ca = m.connect(this, "onLayerAddResult", function(Da, Ra) {
                            -1 !== h.indexOf(M, Da) && (fa--,
                            S.push({
                                layer: Da,
                                success: !Ra,
                                error: Ra
                            }),
                            fa || (m.disconnect(Ca),
                            this.onLayersAddResult(S)))
                        });
                        for (ra = 0; ra < va; ra++)
                            this.addLayer(M[ra]);
                        return this
                    },
                    removeLayer: function(M, S) {
                        var fa = M.id
                          , ra = M instanceof Z ? this.graphicsLayerIds : this.layerIds
                          , va = U(ra, fa);
                        0 <= va && (this._forgetLayer(M),
                        ra.splice(va, 1),
                        this.loaded || this._firstLayerId !== fa || (this._firstLayerId = null),
                        M instanceof Z ? this._detachGraphicsLayer(M) : M.loaded && (M.getMap() && M._unsetMap(this, this._layersDiv),
                        -1 !== M.declaredClass.indexOf("VETiledLayer") && this._onBingLayerRemove(M)),
                        delete this._layers[fa],
                        delete this._layerDivs[fa],
                        S || this._reorderLayers(ra),
                        this.onLayerRemove(M))
                    },
                    removeAllLayers: function() {
                        var M = this.layerIds, S;
                        for (S = M.length - 1; 0 <= S; S--)
                            this.removeLayer(this._layers[M[S]], 1);
                        M = this.graphicsLayerIds;
                        for (S = M.length - 1; 0 <= S; S--)
                            this.removeLayer(this._layers[M[S]], 1);
                        this.onLayersRemoved()
                    },
                    reorderLayer: function(M, S) {
                        k.isString(M) && (b.deprecated(this.declaredClass + ": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).", null, "v2.0"),
                        M = this.getLayer(M));
                        var fa = M.id
                          , ra = M instanceof Z ? this.graphicsLayerIds : this.layerIds;
                        0 > S ? S = 0 : S >= ra.length && (S = ra.length - 1);
                        M = U(ra, fa);
                        -1 !== M && M !== S && (ra.splice(M, 1),
                        ra.splice(S, 0, fa),
                        this._reorderLayers(ra))
                    },
                    getLayer: function(M) {
                        return this._layers[M]
                    },
                    setWebGLEnabled: function(M) {
                        var S = this.webglEnabled;
                        this.webglEnabled = (M || !1) && ba;
                        if (S !== this.webglEnabled)
                            this.onWebGLEnabledChange()
                    },
                    isWebGLContextAvailable: function() {
                        return ta.isContextAvailable() && (-1 === this.maxWebGLContexts || 0 < this.maxWebGLContexts && this._webglContextOwners.length < this.maxWebGLContexts)
                    },
                    ownsWebGLContext: function(M) {
                        return -1 !== h.indexOf(this._webglContextOwners, M)
                    },
                    acquireWebGLContext: function(M) {
                        return -1 !== h.indexOf(this._webglContextOwners, M) ? !0 : this.isWebGLContextAvailable() ? (ta.acquireContext(M),
                        this._webglContextOwners.push(M),
                        !0) : !1
                    },
                    releaseWebGLContext: function(M) {
                        var S = h.indexOf(this._webglContextOwners, M);
                        -1 !== S && this._webglContextOwners.splice(S, 1);
                        ta.releaseContext(M)
                    },
                    releaseAllWebGLContexts: function() {
                        var M = this._webglContextOwners.slice(0);
                        h.forEach(M, function(S) {
                            this.releaseWebGLContext(S)
                        }, this)
                    },
                    syncHitTestForWebGL: function(M) {
                        var S, fa = M.screenPoint;
                        M = this.graphicsLayerIds.slice(0).reverse();
                        h.some(M, function(ra) {
                            ra = this.getLayer(ra);
                            ra.loaded && !ra.suspended && ra.hasWebGLSurface() && (S = ra._div.syncHitTest(fa.x, fa.y));
                            return !!S
                        }, this);
                        return S
                    },
                    setExtent: function(M, S) {
                        M = new ea(M.toJson());
                        var fa = M.getWidth()
                          , ra = M.getHeight();
                        return 0 === fa && 0 === ra ? this.centerAt(new aa({
                            x: M.xmin,
                            y: M.ymin,
                            spatialReference: M.spatialReference && M.spatialReference.toJson()
                        })) : this._extentUtil(null, null, M, S)
                    },
                    getTargetExtent: function(M) {
                        if (M)
                            return M = new ea(M.toJson()),
                            0 !== M.getWidth() && 0 !== M.getHeight() && (M = (M = this._convertGeometry(this, M)) && this._fixExtent(M).extent),
                            M
                    },
                    centerAt: function(M) {
                        return this._extentUtil(null, {
                            mapCenter: M
                        })
                    },
                    centerAndZoom: function(M, S) {
                        return this._extentUtil({
                            targetLevel: S,
                            mapCenter: M,
                            levelOrFactor: !0
                        })
                    },
                    getScale: function() {
                        return this.__LOD ? this.__LOD.scale : qa.getScale(this)
                    },
                    getResolution: function() {
                        return this.__LOD ? this.__LOD.resolution : this.extent ? this.extent.getWidth() / this.width : 0
                    },
                    getResolutionInMeters: function() {
                        return this.getResolution() * qa.getUnitValueForSR(this.spatialReference)
                    },
                    getResolutionForPopup: function() {
                        var M = this.getResolution()
                          , S = this.getResolutionInMeters()
                          , fa = S / 16;
                        return 10 >= fa ? 0 : M / S * fa
                    },
                    getMinResolution: function() {
                        return this._minResolution
                    },
                    getMaxResolution: function() {
                        return this._maxResolution
                    },
                    getMinScale: function() {
                        return this._params.minScale
                    },
                    getMaxScale: function() {
                        return this._params.maxScale
                    },
                    getViewInfo: function() {
                        return this._viewInfo
                    },
                    setScale: function(M) {
                        return this._extentUtil({
                            targetScale: M
                        })
                    },
                    getLayersVisibleAtScale: function(M) {
                        var S = [];
                        (M = M || this.getScale()) && h.forEach(this.layerIds.concat(this.graphicsLayerIds), function(fa) {
                            fa = this.getLayer(fa);
                            fa.isVisibleAtScale(M) && S.push(fa)
                        }, this);
                        return S
                    },
                    getNumLevels: function() {
                        var M = this.getMinZoom()
                          , S = this.getMaxZoom();
                        return M === S && 0 > M ? 0 : S - M + 1
                    },
                    getLevel: function() {
                        return this.__LOD ? this.__LOD.level : -1
                    },
                    setLevel: function(M) {
                        if (-1 < M)
                            return this._extentUtil({
                                targetLevel: M
                            })
                    },
                    getZoom: function() {
                        return this.getLevel()
                    },
                    setZoom: function(M) {
                        return this.setLevel(M)
                    },
                    getMinZoom: function() {
                        return this._params.minZoom
                    },
                    getMaxZoom: function() {
                        return this._params.maxZoom
                    },
                    setBasemap: function(M) {
                        if (k.isObject(M)) {
                            var S = M;
                            M = S.title
                        } else
                            S = p && p[M];
                        if (S) {
                            this._basemapDfd && !this._basemapDfd.isFulfilled() && this._basemapDfd.cancel();
                            var fa = []
                              , ra = 0;
                            h.forEach(S.baseMapLayers || S.layers, function(Ca) {
                                var Da = {
                                    id: Ca.id,
                                    displayLevels: Ca.displayLevels,
                                    opacity: r.isDefined(Ca.opacity) ? Ca.opacity : null,
                                    visible: r.isDefined(Ca.visibility) ? Ca.visibility : null
                                };
                                if (Da = this._createBaseLayerInstance(Ca, Da, M))
                                    fa.push(Da),
                                    Ca.isReference || ra++
                            }, this);
                            fa.length && ra ? (this._basemapDfd = O(fa).otherwise(Ea(this, function(Ca) {
                                this._basemapPending = !1;
                                Ca && "cancel" === Ca.dojoType && h.forEach(fa, function(Da) {
                                    Da.cancel()
                                });
                                throw Ca;
                            })).then(function(Ca) {
                                var Da = []
                                  , Ra = [];
                                h.forEach(Ca, function(Na) {
                                    Na && (Na.layerInfo && Da.push(Na.layerInfo),
                                    Na.layer && Ra.push(Na.layer))
                                });
                                return {
                                    basemapName: M,
                                    infos: Da,
                                    layers: Ra
                                }
                            }).then(Ea(this, this._waitForBaseLayers)).then(Ea(this, this._setBasemap)),
                            this._basemapPending = !this.loaded && !this._basemapDfd.isFulfilled()) : console.log("Map.setBasemap: " + r.substitute({
                                basemapName: M
                            }, this.invalidBasemap))
                        } else {
                            S = [];
                            for (var va in p)
                                S.push(va);
                            console.log("Map.setBasemap: " + r.substitute({
                                basemapName: M,
                                list: S.join(",")
                            }, this.unknownBasemap))
                        }
                    },
                    _createBaseLayerInstance: function(M, S, fa) {
                        var ra = new l;
                        if (M.type)
                            switch (M.type) {
                            case "OpenStreetMap":
                                ra.resolve({
                                    layerInfo: M,
                                    layer: new na(S)
                                });
                                break;
                            case "VectorTile":
                                C(["./layers/VectorTileLayer"], function(Ca) {
                                    va = E.normalize(M.url);
                                    ra.promise.isFulfilled() || ra.resolve({
                                        layerInfo: M,
                                        layer: new Ca(va,S)
                                    })
                                });
                                break;
                            default:
                                return console.log("Map.setBasemap: " + r.substitute({
                                    basemapName: fa,
                                    type: M.type
                                }, this.unknownLayerType)),
                                null
                            }
                        else {
                            var va = E.normalize(M.url);
                            ra.resolve({
                                layerInfo: M,
                                layer: new R(va,S)
                            })
                        }
                        return ra.promise
                    },
                    _waitForBaseLayers: function(M) {
                        var S = new l(G._dfdCanceller);
                        S.promise.otherwise(function(ra) {
                            if (ra && "cancel" === ra.dojoType) {
                                for (var va in S._layerEvents)
                                    ra = S._layerEvents[va],
                                    m.disconnect(ra[0]),
                                    m.disconnect(ra[1]);
                                delete S._layerEvents
                            }
                        });
                        if (!this.loaded)
                            return S.resolve(M),
                            S.promise;
                        var fa = function(ra) {
                            S._pendingLayers--;
                            ra = h.indexOf(M.layers, this);
                            -1 < ra && (ra = S._layerEvents[ra]) && (m.disconnect(ra[0]),
                            m.disconnect(ra[1]));
                            0 >= S._pendingLayers && (delete S._layerEvents,
                            S.isFulfilled() || S.resolve(M))
                        };
                        S._pendingLayers = 0;
                        S._layerEvents = {};
                        h.forEach(M.layers, function(ra, va) {
                            ra && S._pendingLayers++
                        });
                        h.forEach(M.layers, function(ra, va) {
                            ra && (ra.loaded ? fa(ra) : S._layerEvents[va] = [m.connect(ra, "onLoad", ra, fa), m.connect(ra, "onError", ra, fa)])
                        });
                        return S.promise
                    },
                    _setBasemap: function(M) {
                        var S = M.layers
                          , fa = M.infos
                          , ra = 0
                          , va = !0;
                        this._basemapPending = !1;
                        this.loaded && (h.forEach(S, function(Da, Ra) {
                            Da.loaded && (fa[Ra].isReference || ra++)
                        }),
                        va = ra);
                        if (va) {
                            if (this.basemapLayerIds) {
                                var Ca = {
                                    basemapName: this._basemap,
                                    infos: p && p[this._basemap] && p[this._basemap].baseMapLayers
                                };
                                Ca.basemapName || (h.forEach(this.basemapLayerIds, function(Da) {
                                    if (this.getLayer(Da)instanceof na)
                                        return Ca.basemapName = "osm",
                                        Ca.infos = p && p.osm && p.osm.baseMapLayers,
                                        !1
                                }, this),
                                Ca.basemapName || (Ca = null))
                            }
                            this._removeBasemap();
                            this._basemap = M.basemapName;
                            this.basemapLayerIds = this._addBasemapLayers(S, fa);
                            this.attr("data-basemap", this.getBasemap());
                            this.emit("basemap-change", {
                                current: M,
                                previous: Ca
                            })
                        }
                    },
                    _addBasemapLayers: function(M, S) {
                        var fa = []
                          , ra = []
                          , va = 0;
                        h.forEach(M, function(Ca, Da) {
                            S[Da].isReference ? fa.push(Ca) : (this.addLayer(Ca, va++),
                            ra.push(Ca.id))
                        }, this);
                        fa.length && h.forEach(fa, function(Ca) {
                            Ca.attr("data-reference", !0);
                            this.addLayer(Ca, "top");
                            ra.push(Ca.id)
                        }, this);
                        return ra
                    },
                    _removeBasemap: function() {
                        var M = this.basemapLayerIds, S;
                        M && M.length && h.forEach(M, function(fa) {
                            (S = this.getLayer(fa)) && this.removeLayer(S)
                        }, this)
                    },
                    getBasemap: function() {
                        return this._basemap || ""
                    },
                    translate: function(M, S) {
                        M = M || 0;
                        S = S || 0;
                        if (!this._txTimer) {
                            this._tx = this._ty = 0;
                            var fa = this.toScreen(this.extent.getCenter());
                            this.__panStart(fa.x, fa.y)
                        }
                        this._tx += M;
                        this._ty += S;
                        this.__pan(this._tx, this._ty);
                        clearTimeout(this._txTimer);
                        this._txTimer = setTimeout(this._endTranslate, 150)
                    },
                    _endTranslate: function() {
                        clearTimeout(this._txTimer);
                        this._txTimer = null;
                        var M = this._tx
                          , S = this._ty;
                        this._tx = this._ty = 0;
                        this.__panEnd(M, S)
                    },
                    setTimeExtent: function(M) {
                        M = (this.timeExtent = M) ? new M.constructor(M.toJson()) : null;
                        this.onTimeExtentChange(M)
                    },
                    setTimeSlider: function(M) {
                        this.timeSlider && (ka(this._tsTimeExtentChange_connect),
                        this.timeSlider = this._tsTimeExtentChange_connect = null);
                        M && (this.timeSlider = M,
                        this.setTimeExtent(M.getCurrentTimeExtent()),
                        this._tsTimeExtentChange_connect = oa(M, "onTimeExtentChange", this, "setTimeExtent"))
                    },
                    setVisibility: function(M) {
                        if (this.visible !== M) {
                            this.visible = M;
                            M || (this._display = this.container.style.display);
                            this.container.style.display = M ? this._display : "none";
                            if (this.autoResize) {
                                var S = M ? "resume" : "pause";
                                this._rszSignal[S]();
                                this._oriSignal[S]()
                            }
                            M && this.resize()
                        }
                        return this
                    },
                    resize: function(M) {
                        clearTimeout(this._resizeTimerHandle);
                        this._destroyed || (!0 === M ? this._execResize() : this._resizeTimerHandle = setTimeout(this._execResize, this.resizeDelay))
                    },
                    _timedResize: function() {
                        this._resizeTimerHandle || this._execResize()
                    },
                    _execResize: function() {
                        clearTimeout(this._resizeTimerHandle);
                        this._resizeTimerHandle = null;
                        this.reposition();
                        this._resize();
                        this.autoResize && this._startResizeTimer()
                    },
                    _resize: function() {
                        var M = this.width
                          , S = this.height
                          , fa = g.get(this.container, "display")
                          , ra = t.getContentBox(this.container);
                        if (!("none" === fa || 0 >= ra.w || 0 >= ra.h || M === ra.w && S === ra.h)) {
                            if (fa = this._zoomAnim || this._panAnim)
                                fa.stop(),
                                fa._fire("onEnd", [fa.node]);
                            T(this.root, {
                                width: (this.width = ra.w) + "px",
                                height: (this.height = ra.h) + "px"
                            });
                            ra = this.width;
                            fa = this.height;
                            this.attribution && this.attribution.domNode && g.set(this.attribution.domNode, "maxWidth", Math.floor(ra * this._mapParams.attributionWidth) + "px");
                            this.__visibleRect.update(this.__visibleRect.x, this.__visibleRect.y, ra, fa);
                            this.__visibleDelta.update(this.__visibleDelta.x, this.__visibleDelta.y, ra, fa);
                            var va = new Y(this.extent);
                            M = (new Y(va.x,va.y,ra / M * va.width,fa / S * va.height,this.spatialReference)).getExtent();
                            this.onResize(M, ra, fa);
                            this._extentUtil(null, null, M, null, !0)
                        }
                    },
                    reposition: function() {
                        var M = this.position
                          , S = M.x
                          , fa = M.y;
                        this._reposition();
                        M = this.position;
                        if (S !== M.x || fa !== M.y)
                            this.onReposition(M.x, M.y)
                    },
                    _reposition: function() {
                        var M = t.position(this.container, !0)
                          , S = t.getPadBorderExtents(this.container);
                        this.position.update(M.x + S.l, M.y + S.t)
                    },
                    _setClipRect: function() {
                        delete this._clip;
                        var M = 7 >= q("ie") || void 0 === q("ie") && 7 <= q("trident") ? "rect(auto,auto,auto,auto)" : "auto";
                        if (this.wrapAround180) {
                            var S = this.width
                              , fa = this.height
                              , ra = this._getFrameWidth()
                              , va = S - ra;
                            0 < va && (M = va / 2,
                            M = "rect(0px," + (M + ra) + "px," + fa + "px," + M + "px)",
                            fa = this.extent.getWidth(),
                            S = ra / S * fa,
                            this._clip = [(fa - S) / 2, S])
                        }
                        T(this.__container, "clip", M)
                    },
                    _getAvailExtent: function() {
                        var M = this.extent
                          , S = this._clip;
                        if (S) {
                            if (!M._clip) {
                                var fa = new Y(M);
                                fa.width = S[1];
                                fa.x += S[0];
                                M._clip = fa.getExtent()
                            }
                            return M._clip
                        }
                        return M
                    },
                    _fixedPan: function(M, S) {
                        return this._extentUtil(null, {
                            dx: M,
                            dy: S
                        })
                    },
                    panUp: function() {
                        return this._fixedPan(0, -.75 * this.height)
                    },
                    panUpperRight: function() {
                        return this._fixedPan(.75 * this.width, -.75 * this.height)
                    },
                    panRight: function() {
                        return this._fixedPan(.75 * this.width, 0)
                    },
                    panLowerRight: function() {
                        return this._fixedPan(.75 * this.width, .75 * this.height)
                    },
                    panDown: function() {
                        return this._fixedPan(0, .75 * this.height)
                    },
                    panLowerLeft: function() {
                        return this._fixedPan(-.75 * this.width, .75 * this.height)
                    },
                    panLeft: function() {
                        return this._fixedPan(-.75 * this.width, 0)
                    },
                    panUpperLeft: function() {
                        return this._fixedPan(-.75 * this.width, -.75 * this.height)
                    },
                    enableSnapping: function(M) {
                        M = M || {};
                        if ("esri.SnappingManager" === M.declaredClass)
                            this.snappingManager = M;
                        else {
                            var S = sa++
                              , fa = this;
                            this._rids && this._rids.push(S);
                            C(["./SnappingManager"], function(ra) {
                                var va = fa._rids ? h.indexOf(fa._rids, S) : -1;
                                -1 !== va && (fa._rids.splice(va, 1),
                                fa.snappingManager = new ra(k.mixin({
                                    map: fa
                                }, M)))
                            })
                        }
                        return this.snappingManager
                    },
                    disableSnapping: function() {
                        this.snappingManager && this.snappingManager.destroy();
                        this.snappingManager = null
                    },
                    _createLabelLayer: function() {
                        !this._labels && ca && this.loaded && (this._labels = new ca({
                            id: "_internal_LabelLayer"
                        }),
                        this._labels._setMap(this, this._gc._surface),
                        this._processLabelLayers(),
                        this.on("layers-reordered", this._processLabelLayers))
                    },
                    _processLabelLayers: function() {
                        null == this._labelProcessor && (this._labelProcessor = setTimeout(this._updateLabelLayers, 0))
                    },
                    _updateLabelLayers: function() {
                        this._labelProcessor = null;
                        this._labels && (this._labels.removeAllFeatureLayers(),
                        h.forEach(this.graphicsLayerIds, function(M) {
                            M = this.getLayer(M);
                            "function" === typeof M.applyEdits ? this._labels.addFeatureLayer(M) : "esri.layers.WFSLayer" === M.declaredClass && this._labels.addFeatureLayer(M)
                        }, this))
                    },
                    _getMapImageLyr: function() {
                        this.loaded && !this._mapImageLyr && (this._mapImageLyr = new ha,
                        this._mapImageLyr._setMap(this, this._layersDiv),
                        this._placeMapImageLyr());
                        return this._mapImageLyr
                    },
                    _placeMapImageLyr: function() {
                        for (var M = this.layerIds, S = this._layerDivs, fa = !1, ra, va, Ca = M.length - 1; 0 <= Ca; Ca--)
                            if (ra = M[Ca],
                            va = this.getLayer(ra),
                            ra = S[ra],
                            va && ra && !va._isReference) {
                                n.place(this._mapImageLyr._div, ra, "after");
                                fa = !0;
                                break
                            }
                        fa || n.place(this._mapImageLyr._div, this._layersDiv, "first")
                    }
                });
                q("extend-esri") && (z._CoreMap = w);
                return w
            })
        },
        "dojox/gfx/matrix": function() {
            define(["./_base", "dojo/_base/lang"], function(C, y) {
                var b = C.matrix = {}
                  , w = {};
                b._degToRad = function(m) {
                    return w[m] || (w[m] = Math.PI * m / 180)
                }
                ;
                b._radToDeg = function(m) {
                    return m / Math.PI * 180
                }
                ;
                b.Matrix2D = function(m) {
                    if (m)
                        if ("number" == typeof m)
                            this.xx = this.yy = m;
                        else if (m instanceof Array) {
                            if (0 < m.length) {
                                for (var l = b.normalize(m[0]), k = 1; k < m.length; ++k) {
                                    var h = l
                                      , f = b.normalize(m[k]);
                                    l = new b.Matrix2D;
                                    l.xx = h.xx * f.xx + h.xy * f.yx;
                                    l.xy = h.xx * f.xy + h.xy * f.yy;
                                    l.yx = h.yx * f.xx + h.yy * f.yx;
                                    l.yy = h.yx * f.xy + h.yy * f.yy;
                                    l.dx = h.xx * f.dx + h.xy * f.dy + h.dx;
                                    l.dy = h.yx * f.dx + h.yy * f.dy + h.dy
                                }
                                y.mixin(this, l)
                            }
                        } else
                            y.mixin(this, m)
                }
                ;
                y.extend(b.Matrix2D, {
                    xx: 1,
                    xy: 0,
                    yx: 0,
                    yy: 1,
                    dx: 0,
                    dy: 0
                });
                y.mixin(b, {
                    identity: new b.Matrix2D,
                    flipX: new b.Matrix2D({
                        xx: -1
                    }),
                    flipY: new b.Matrix2D({
                        yy: -1
                    }),
                    flipXY: new b.Matrix2D({
                        xx: -1,
                        yy: -1
                    }),
                    translate: function(m, l) {
                        return 1 < arguments.length ? new b.Matrix2D({
                            dx: m,
                            dy: l
                        }) : new b.Matrix2D({
                            dx: m.x,
                            dy: m.y
                        })
                    },
                    scale: function(m, l) {
                        return 1 < arguments.length ? new b.Matrix2D({
                            xx: m,
                            yy: l
                        }) : "number" == typeof m ? new b.Matrix2D({
                            xx: m,
                            yy: m
                        }) : new b.Matrix2D({
                            xx: m.x,
                            yy: m.y
                        })
                    },
                    rotate: function(m) {
                        var l = Math.cos(m);
                        m = Math.sin(m);
                        return new b.Matrix2D({
                            xx: l,
                            xy: -m,
                            yx: m,
                            yy: l
                        })
                    },
                    rotateg: function(m) {
                        return b.rotate(b._degToRad(m))
                    },
                    skewX: function(m) {
                        return new b.Matrix2D({
                            xy: Math.tan(m)
                        })
                    },
                    skewXg: function(m) {
                        return b.skewX(b._degToRad(m))
                    },
                    skewY: function(m) {
                        return new b.Matrix2D({
                            yx: Math.tan(m)
                        })
                    },
                    skewYg: function(m) {
                        return b.skewY(b._degToRad(m))
                    },
                    reflect: function(m, l) {
                        1 == arguments.length && (l = m.y,
                        m = m.x);
                        var k = m * m
                          , h = l * l
                          , f = k + h
                          , d = 2 * m * l / f;
                        return new b.Matrix2D({
                            xx: 2 * k / f - 1,
                            xy: d,
                            yx: d,
                            yy: 2 * h / f - 1
                        })
                    },
                    project: function(m, l) {
                        1 == arguments.length && (l = m.y,
                        m = m.x);
                        var k = m * m
                          , h = l * l
                          , f = k + h
                          , d = m * l / f;
                        return new b.Matrix2D({
                            xx: k / f,
                            xy: d,
                            yx: d,
                            yy: h / f
                        })
                    },
                    normalize: function(m) {
                        return m instanceof b.Matrix2D ? m : new b.Matrix2D(m)
                    },
                    isIdentity: function(m) {
                        return 1 == m.xx && 0 == m.xy && 0 == m.yx && 1 == m.yy && 0 == m.dx && 0 == m.dy
                    },
                    clone: function(m) {
                        var l = new b.Matrix2D, k;
                        for (k in m)
                            "number" == typeof m[k] && "number" == typeof l[k] && l[k] != m[k] && (l[k] = m[k]);
                        return l
                    },
                    invert: function(m) {
                        m = b.normalize(m);
                        var l = m.xx * m.yy - m.xy * m.yx;
                        return m = new b.Matrix2D({
                            xx: m.yy / l,
                            xy: -m.xy / l,
                            yx: -m.yx / l,
                            yy: m.xx / l,
                            dx: (m.xy * m.dy - m.yy * m.dx) / l,
                            dy: (m.yx * m.dx - m.xx * m.dy) / l
                        })
                    },
                    _multiplyPoint: function(m, l, k) {
                        return {
                            x: m.xx * l + m.xy * k + m.dx,
                            y: m.yx * l + m.yy * k + m.dy
                        }
                    },
                    multiplyPoint: function(m, l, k) {
                        m = b.normalize(m);
                        return "number" == typeof l && "number" == typeof k ? b._multiplyPoint(m, l, k) : b._multiplyPoint(m, l.x, l.y)
                    },
                    multiplyRectangle: function(m, l) {
                        var k = b.normalize(m);
                        l = l || {
                            x: 0,
                            y: 0,
                            width: 0,
                            height: 0
                        };
                        if (b.isIdentity(k))
                            return {
                                x: l.x,
                                y: l.y,
                                width: l.width,
                                height: l.height
                            };
                        m = b.multiplyPoint(k, l.x, l.y);
                        var h = b.multiplyPoint(k, l.x, l.y + l.height)
                          , f = b.multiplyPoint(k, l.x + l.width, l.y);
                        l = b.multiplyPoint(k, l.x + l.width, l.y + l.height);
                        k = Math.min(m.x, h.x, f.x, l.x);
                        var d = Math.min(m.y, h.y, f.y, l.y);
                        return {
                            x: k,
                            y: d,
                            width: Math.max(m.x, h.x, f.x, l.x) - k,
                            height: Math.max(m.y, h.y, f.y, l.y) - d
                        }
                    },
                    multiply: function(m) {
                        for (var l = b.normalize(m), k = 1; k < arguments.length; ++k) {
                            var h = l
                              , f = b.normalize(arguments[k]);
                            l = new b.Matrix2D;
                            l.xx = h.xx * f.xx + h.xy * f.yx;
                            l.xy = h.xx * f.xy + h.xy * f.yy;
                            l.yx = h.yx * f.xx + h.yy * f.yx;
                            l.yy = h.yx * f.xy + h.yy * f.yy;
                            l.dx = h.xx * f.dx + h.xy * f.dy + h.dx;
                            l.dy = h.yx * f.dx + h.yy * f.dy + h.dy
                        }
                        return l
                    },
                    _sandwich: function(m, l, k) {
                        return b.multiply(b.translate(l, k), m, b.translate(-l, -k))
                    },
                    scaleAt: function(m, l, k, h) {
                        switch (arguments.length) {
                        case 4:
                            return b._sandwich(b.scale(m, l), k, h);
                        case 3:
                            return "number" == typeof k ? b._sandwich(b.scale(m), l, k) : b._sandwich(b.scale(m, l), k.x, k.y)
                        }
                        return b._sandwich(b.scale(m), l.x, l.y)
                    },
                    rotateAt: function(m, l, k) {
                        return 2 < arguments.length ? b._sandwich(b.rotate(m), l, k) : b._sandwich(b.rotate(m), l.x, l.y)
                    },
                    rotategAt: function(m, l, k) {
                        return 2 < arguments.length ? b._sandwich(b.rotateg(m), l, k) : b._sandwich(b.rotateg(m), l.x, l.y)
                    },
                    skewXAt: function(m, l, k) {
                        return 2 < arguments.length ? b._sandwich(b.skewX(m), l, k) : b._sandwich(b.skewX(m), l.x, l.y)
                    },
                    skewXgAt: function(m, l, k) {
                        return 2 < arguments.length ? b._sandwich(b.skewXg(m), l, k) : b._sandwich(b.skewXg(m), l.x, l.y)
                    },
                    skewYAt: function(m, l, k) {
                        return 2 < arguments.length ? b._sandwich(b.skewY(m), l, k) : b._sandwich(b.skewY(m), l.x, l.y)
                    },
                    skewYgAt: function(m, l, k) {
                        return 2 < arguments.length ? b._sandwich(b.skewYg(m), l, k) : b._sandwich(b.skewYg(m), l.x, l.y)
                    }
                });
                C.Matrix2D = b.Matrix2D;
                return b
            })
        },
        "dojox/gfx/_base": function() {
            define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "), function(C, y, b, w, m, l, k, h, f) {
                var d = y.getObject("dojox.gfx", !0)
                  , a = d._base = {};
                d._hasClass = function(q, x) {
                    return (q = q.getAttribute("className")) && 0 <= (" " + q + " ").indexOf(" " + x + " ")
                }
                ;
                d._addClass = function(q, x) {
                    var v = q.getAttribute("className") || "";
                    (!v || 0 > (" " + v + " ").indexOf(" " + x + " ")) && q.setAttribute("className", v + (v ? " " : "") + x)
                }
                ;
                d._removeClass = function(q, x) {
                    var v = q.getAttribute("className");
                    v && q.setAttribute("className", v.replace(new RegExp("(^|\\s+)" + x + "(\\s+|$)"), "$1$2"))
                }
                ;
                a._getFontMeasurements = function() {
                    var q = {
                        "1em": 0,
                        "1ex": 0,
                        "100%": 0,
                        "12pt": 0,
                        "16px": 0,
                        "xx-small": 0,
                        "x-small": 0,
                        small: 0,
                        medium: 0,
                        large: 0,
                        "x-large": 0,
                        "xx-large": 0
                    }, x;
                    if (w("ie")) {
                        var v = m.doc.documentElement.style.fontSize || "";
                        v || (m.doc.documentElement.style.fontSize = "100%")
                    }
                    var z = h.create("div", {
                        style: {
                            position: "absolute",
                            left: "0",
                            top: "-100px",
                            width: "30px",
                            height: "1000em",
                            borderWidth: "0",
                            margin: "0",
                            padding: "0",
                            outline: "none",
                            lineHeight: "1",
                            overflow: "hidden"
                        }
                    }, m.body());
                    for (x in q)
                        z.style.fontSize = x,
                        q[x] = 16 * Math.round(12 * z.offsetHeight / 16) / 12 / 1E3;
                    w("ie") && (m.doc.documentElement.style.fontSize = v);
                    m.body().removeChild(z);
                    return q
                }
                ;
                var c = null;
                a._getCachedFontMeasurements = function(q) {
                    if (q || !c)
                        c = a._getFontMeasurements();
                    return c
                }
                ;
                var e = null
                  , n = {};
                a._getTextBox = function(q, x, v) {
                    var z = arguments.length, u;
                    e || (e = h.create("div", {
                        style: {
                            position: "absolute",
                            top: "-10000px",
                            left: "0",
                            visibility: "hidden"
                        }
                    }, m.body()));
                    var p = e;
                    p.className = "";
                    var r = p.style;
                    r.borderWidth = "0";
                    r.margin = "0";
                    r.padding = "0";
                    r.outline = "0";
                    if (1 < z && x)
                        for (u in x)
                            u in n || (r[u] = x[u]);
                    2 < z && v && (p.className = v);
                    p.innerHTML = q;
                    p.getBoundingClientRect ? (r = p.getBoundingClientRect(),
                    r = {
                        l: r.left,
                        t: r.top,
                        w: r.width || r.right - r.left,
                        h: r.height || r.bottom - r.top
                    }) : r = f.getMarginBox(p);
                    p.innerHTML = "";
                    return r
                }
                ;
                a._computeTextLocation = function(q, x, v, z) {
                    var u = {};
                    switch (q.align) {
                    case "end":
                        u.x = q.x - x;
                        break;
                    case "middle":
                        u.x = q.x - x / 2;
                        break;
                    default:
                        u.x = q.x
                    }
                    u.y = q.y - v * (z ? .75 : 1);
                    return u
                }
                ;
                a._computeTextBoundingBox = function(q) {
                    if (!d._base._isRendered(q))
                        return {
                            x: 0,
                            y: 0,
                            width: 0,
                            height: 0
                        };
                    var x = q.getShape();
                    var v = q.getFont() || d.defaultFont;
                    q = q.getTextWidth();
                    v = d.normalizedLength(v.size);
                    x = a._computeTextLocation(x, q, v, !0);
                    return {
                        x: x.x,
                        y: x.y,
                        width: q,
                        height: v
                    }
                }
                ;
                a._isRendered = function(q) {
                    for (q = q.parent; q && q.getParent; )
                        q = q.parent;
                    return null !== q
                }
                ;
                var t = 0;
                a._getUniqueId = function() {
                    do
                        var q = C._scopeName + "xUnique" + ++t;
                    while (k.byId(q));
                    return q
                }
                ;
                var g = w("pointer-events") ? "touchAction" : w("MSPointer") ? "msTouchAction" : null;
                a._fixMsTouchAction = g ? function(q) {
                    q.rawNode.style[g] = "none"
                }
                : function() {}
                ;
                y.mixin(d, {
                    defaultPath: {
                        type: "path",
                        path: ""
                    },
                    defaultPolyline: {
                        type: "polyline",
                        points: []
                    },
                    defaultRect: {
                        type: "rect",
                        x: 0,
                        y: 0,
                        width: 100,
                        height: 100,
                        r: 0
                    },
                    defaultEllipse: {
                        type: "ellipse",
                        cx: 0,
                        cy: 0,
                        rx: 200,
                        ry: 100
                    },
                    defaultCircle: {
                        type: "circle",
                        cx: 0,
                        cy: 0,
                        r: 100
                    },
                    defaultLine: {
                        type: "line",
                        x1: 0,
                        y1: 0,
                        x2: 100,
                        y2: 100
                    },
                    defaultImage: {
                        type: "image",
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0,
                        src: ""
                    },
                    defaultText: {
                        type: "text",
                        x: 0,
                        y: 0,
                        text: "",
                        align: "start",
                        decoration: "none",
                        rotated: !1,
                        kerning: !0
                    },
                    defaultTextPath: {
                        type: "textpath",
                        text: "",
                        align: "start",
                        decoration: "none",
                        rotated: !1,
                        kerning: !0
                    },
                    defaultStroke: {
                        type: "stroke",
                        color: "black",
                        style: "solid",
                        width: 1,
                        cap: "butt",
                        join: 4
                    },
                    defaultLinearGradient: {
                        type: "linear",
                        x1: 0,
                        y1: 0,
                        x2: 100,
                        y2: 100,
                        colors: [{
                            offset: 0,
                            color: "black"
                        }, {
                            offset: 1,
                            color: "white"
                        }]
                    },
                    defaultRadialGradient: {
                        type: "radial",
                        cx: 0,
                        cy: 0,
                        r: 100,
                        colors: [{
                            offset: 0,
                            color: "black"
                        }, {
                            offset: 1,
                            color: "white"
                        }]
                    },
                    defaultPattern: {
                        type: "pattern",
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0,
                        src: ""
                    },
                    defaultFont: {
                        type: "font",
                        style: "normal",
                        variant: "normal",
                        weight: "normal",
                        size: "10pt",
                        family: "serif"
                    },
                    getDefault: function() {
                        var q = {};
                        return function(x) {
                            var v = q[x];
                            if (v)
                                return new v;
                            v = q[x] = function() {}
                            ;
                            v.prototype = d["default" + x];
                            return new v
                        }
                    }(),
                    normalizeColor: function(q) {
                        return q instanceof b ? q : new b(q)
                    },
                    normalizeParameters: function(q, x) {
                        var v;
                        if (x) {
                            var z = {};
                            for (v in q)
                                v in x && !(v in z) && (q[v] = x[v])
                        }
                        return q
                    },
                    makeParameters: function(q, x) {
                        var v = null;
                        if (!x)
                            return y.delegate(q);
                        var z = {};
                        for (v in q)
                            v in z || (z[v] = y.clone(v in x ? x[v] : q[v]));
                        return z
                    },
                    formatNumber: function(q, x) {
                        var v = q.toString();
                        if (0 <= v.indexOf("e"))
                            v = q.toFixed(4);
                        else {
                            var z = v.indexOf(".");
                            0 <= z && 5 < v.length - z && (v = q.toFixed(4))
                        }
                        return 0 > q ? v : x ? " " + v : v
                    },
                    makeFontString: function(q) {
                        return q.style + " " + q.variant + " " + q.weight + " " + q.size + " " + q.family
                    },
                    splitFontString: function(q) {
                        var x = d.getDefault("Font");
                        q = q.split(/\s+/);
                        if (!(5 > q.length)) {
                            x.style = q[0];
                            x.variant = q[1];
                            x.weight = q[2];
                            var v = q[3].indexOf("/");
                            x.size = 0 > v ? q[3] : q[3].substring(0, v);
                            var z = 4;
                            0 > v && ("/" == q[4] ? z = 6 : "/" == q[4].charAt(0) && (z = 5));
                            z < q.length && (x.family = q.slice(z).join(" "))
                        }
                        return x
                    },
                    cm_in_pt: 72 / 2.54,
                    mm_in_pt: 7.2 / 2.54,
                    px_in_pt: function() {
                        return d._base._getCachedFontMeasurements()["12pt"] / 12
                    },
                    pt2px: function(q) {
                        return q * d.px_in_pt()
                    },
                    px2pt: function(q) {
                        return q / d.px_in_pt()
                    },
                    normalizedLength: function(q) {
                        if (0 === q.length)
                            return 0;
                        if (2 < q.length) {
                            var x = d.px_in_pt()
                              , v = parseFloat(q);
                            switch (q.slice(-2)) {
                            case "px":
                                return v;
                            case "pt":
                                return v * x;
                            case "in":
                                return 72 * v * x;
                            case "pc":
                                return 12 * v * x;
                            case "mm":
                                return v * d.mm_in_pt * x;
                            case "cm":
                                return v * d.cm_in_pt * x
                            }
                        }
                        return parseFloat(q)
                    },
                    pathVmlRegExp: /([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,
                    pathSvgRegExp: /([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
                    equalSources: function(q, x) {
                        return q && x && q === x
                    },
                    switchTo: function(q) {
                        var x = "string" == typeof q ? d[q] : q;
                        x && (l.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "), function(v) {
                            d[v] = x[v]
                        }),
                        "string" == typeof q ? d.renderer = q : l.some(["svg", "vml", "canvas", "canvasWithEvents", "silverlight"], function(v) {
                            return d.renderer = d[v] && d[v].Surface === d.Surface ? v : null
                        }))
                    }
                });
                return d
            })
        },
        "esri/basemaps": function() {
            define(["require", "dojo/has", "./kernel", "dojo/i18n!./nls/jsapi"], function(C, y, b, w) {
                C = {
                    streets: {
                        title: w.basemaps.streets,
                        thumbnailUrl: C.toUrl("./images/basemap/streets.jpg"),
                        itemId: "d8855ee4d3d74413babfb0f41203b168",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"
                        }]
                    },
                    satellite: {
                        title: w.basemaps.satellite,
                        thumbnailUrl: C.toUrl("./images/basemap/satellite.jpg"),
                        itemId: "86de95d4e0244cba80f0fa2c9403a7b2",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
                        }]
                    },
                    hybrid: {
                        title: w.basemaps.hybrid,
                        thumbnailUrl: C.toUrl("./images/basemap/hybrid.jpg"),
                        itemId: "413fd05bbd7342f5991d5ec96f4f8b18",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
                        }, {
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",
                            isReference: !0
                        }]
                    },
                    terrain: {
                        title: w.basemaps.terrain,
                        thumbnailUrl: C.toUrl("./images/basemap/terrain.jpg"),
                        itemId: "aab054ab883c4a4094c72e949566ad40",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"
                        }, {
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",
                            isReference: !0
                        }]
                    },
                    topo: {
                        title: w.basemaps.topo,
                        thumbnailUrl: C.toUrl("./images/basemap/topo.jpg"),
                        itemId: "6e03e8c26aad4b9c92a87c1063ddb0e3",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"
                        }]
                    },
                    gray: {
                        title: w.basemaps.gray,
                        thumbnailUrl: C.toUrl("./images/basemap/gray.jpg"),
                        itemId: "8b3b470883a744aeb60e5fff0a319ce7",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"
                        }, {
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
                            isReference: !0
                        }]
                    },
                    "dark-gray": {
                        title: w.basemaps["dark-gray"],
                        thumbnailUrl: C.toUrl("./images/basemap/dark-gray.jpg"),
                        itemId: "da65bacab5bd4defb576f839b6b28098",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"
                        }, {
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",
                            isReference: !0
                        }]
                    },
                    oceans: {
                        title: w.basemaps.oceans,
                        thumbnailUrl: C.toUrl("./images/basemap/oceans.jpg"),
                        itemId: "48b8cec7ebf04b5fbdcaf70d09daff21",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"
                        }, {
                            url: "https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",
                            isReference: !0
                        }]
                    },
                    "national-geographic": {
                        title: w.basemaps["national-geographic"],
                        thumbnailUrl: C.toUrl("./images/basemap/national-geographic.jpg"),
                        itemId: "509e2d6b034246d692a461724ae2d62c",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"
                        }]
                    },
                    osm: {
                        title: w.basemaps.osm,
                        thumbnailUrl: C.toUrl("./images/basemap/osm.jpg"),
                        itemId: "5d2bfa736f8448b3a1708e1f6be23eed",
                        baseMapLayers: [{
                            type: "OpenStreetMap"
                        }]
                    },
                    "dark-gray-vector": {
                        title: w.basemaps["dark-gray"],
                        thumbnailUrl: C.toUrl("./images/basemap/dark-gray.jpg"),
                        itemId: "c11ce4f7801740b2905eb03ddc963ac8",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "gray-vector": {
                        title: w.basemaps.gray,
                        thumbnailUrl: C.toUrl("./images/basemap/gray.jpg"),
                        itemId: "8a2cba3b0ebf4140b7c0dc5ee149549a",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "streets-vector": {
                        title: w.basemaps.streets,
                        thumbnailUrl: C.toUrl("./images/basemap/streets.jpg"),
                        itemId: "de26a3cf4cc9451298ea173c4b324736",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "topo-vector": {
                        title: w.basemaps.topo,
                        thumbnailUrl: C.toUrl("./images/basemap/topo.jpg"),
                        itemId: "7dc6cea0b1764a1f9af2e679f642f0f5",
                        baseMapLayers: [{
                            url: "https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"
                        }, {
                            url: "https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "streets-night-vector": {
                        title: w.basemaps["streets-night-vector"],
                        thumbnailUrl: C.toUrl("./images/basemap/streets-night.jpg"),
                        itemId: "86f556a2d1fd468181855a35e344567f",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "streets-relief-vector": {
                        title: w.basemaps["streets-relief-vector"],
                        thumbnailUrl: C.toUrl("./images/basemap/streets-relief.jpg"),
                        itemId: "b266e6d17fc345b498345613930fbd76",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    },
                    "streets-navigation-vector": {
                        title: w.basemaps["streets-navigation-vector"],
                        thumbnailUrl: C.toUrl("./images/basemap/streets-navigation.jpg"),
                        itemId: "63c47b7177f946b49902c24129b87252",
                        baseMapLayers: [{
                            url: "https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",
                            type: "VectorTile"
                        }]
                    }
                };
                y("extend-esri") && (b.basemaps = C);
                return C
            })
        },
        "esri/Evented": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "), function(C, y, b, w, m, l) {
                C = C([w], {
                    declaredClass: "esri.Evented",
                    registerConnectEvents: function() {
                        var k = this.constructor, h = this.constructor._meta.parents, f = [{}], d = {}, a, c = function(n, t) {
                            y.isArray(n) || (n = [n]);
                            for (var g = 0; g < n.length; g++) {
                                var q = n[g];
                                q._meta && q._meta.parents && c(q._meta.parents, t);
                                q.prototype._eventMap && t.push(y.mixin({}, q.prototype._eventMap))
                            }
                            return t
                        };
                        if (!k._onMap) {
                            c(h, f);
                            f.push(this._eventMap);
                            h = y.mixin.apply(this, f);
                            for (e in this)
                                /^on\w/.test(e) && y.isFunction(this[e]) && (f = this._hyphenLower(e).toLowerCase(),
                                h[f] || (d[f] = {
                                    method: e
                                }));
                            for (a in h) {
                                var e = this._onCamelCase(a);
                                d[a] = {
                                    method: e,
                                    argKeys: h[a]
                                }
                            }
                            k._onMap = d;
                            return k._onMap
                        }
                    },
                    on: function(k, h) {
                        if (-1 < k.indexOf(",")) {
                            for (var f = k.split(/\s*,\s*/), d = f.length, a = []; d--; )
                                a.push(this.on(f[d], h));
                            a.remove = function() {
                                for (var n = 0; n < a.length; n++)
                                    a[n].remove()
                            }
                            ;
                            return a
                        }
                        f = this.constructor._onMap || this.registerConnectEvents();
                        d = "string" == typeof k && k.toLowerCase();
                        var c = this._onCamelCase(d)
                          , e = f && f[d];
                        return (c = e && e.method || this[c] && y.isFunction(this[c]) && c) ? e && y.isArray(e.argKeys) ? (f = this._onArr2Obj(h, f[d].argKeys),
                        b.after(this, c, f, !0)) : b.after(this, c, function(n) {
                            n = n || {};
                            n.target || (n.target = this);
                            h.call(this, n)
                        }, !0) : this.inherited(arguments)
                    },
                    emit: function(k, h) {
                        var f, d, a = k.toLowerCase();
                        var c = this._onCamelCase(k);
                        var e = this.constructor._onMap || this.registerConnectEvents();
                        c = (d = e && e[a] && e[a].method || y.isFunction(this[c]) && c) && this[d];
                        d && e && e[a] && this._onObj2Arr(function() {
                            f = Array.prototype.slice.call(arguments)
                        }, e[a].argKeys)(h);
                        h = h || {};
                        h.target || (h.target = this);
                        if (c) {
                            var n = f && f.length ? f : [h];
                            n = c.apply(this, n)
                        }
                        this.inherited(arguments, [k, h]);
                        return n
                    },
                    _onObj2Arr: function(k, h) {
                        if (h) {
                            var f = this;
                            return function(d) {
                                var a, c = [], e = h.length;
                                for (a = 0; a < e; a++)
                                    c[a] = d[h[a]];
                                k.apply(f, c)
                            }
                        }
                        return k
                    },
                    _onArr2Obj: function(k, h) {
                        if (h) {
                            var f = this;
                            return function() {
                                var d, a = {}, c = arguments.length;
                                for (d = 0; d < c; d++)
                                    a[h[d]] = arguments[d];
                                a.target || (a.target = f);
                                k.call(f, a)
                            }
                        }
                        return k
                    },
                    _hyphenLower: function(k) {
                        return k.replace(/^on/, "").replace(/[A-Z](?=[a-z])/g, function(h, f) {
                            return (f ? "-" : "") + h.toLowerCase()
                        })
                    },
                    _onCamelCase: function(k) {
                        return "on" + k.substr(0, 1).toUpperCase() + k.substr(1).replace(/\-([a-z])/g, function(h, f) {
                            return f.toUpperCase()
                        })
                    }
                });
                m("extend-esri") && (l.Evented = C);
                return C
            })
        },
        "esri/fx": function() {
            define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "), function(C, y, b, w, m, l, k, h, f) {
                var d = {
                    animateRange: function(a) {
                        var c = a.range;
                        return new y.Animation(b.mixin({
                            curve: new y._Line(c.start,c.end)
                        }, a))
                    },
                    resize: function(a) {
                        var c = a.node = w.byId(a.node)
                          , e = a.start
                          , n = a.end;
                        e || (e = m.getMarginBox(c),
                        c = m.getPadBorderExtents(c),
                        e = a.start = {
                            left: e.l + c.l,
                            top: e.t + c.t,
                            width: e.w - c.w,
                            height: e.h - c.h
                        });
                        n || (n = a.anchor ? a.anchor : {
                            x: e.left,
                            y: e.top
                        },
                        c = a.size,
                        n = a.end = {
                            left: e.left - (c.width - e.width) * (n.x - e.left) / e.width,
                            top: e.top - (c.height - e.height) * (n.y - e.top) / e.height,
                            width: c.width,
                            height: c.height
                        });
                        return y.animateProperty(b.mixin({
                            properties: {
                                left: {
                                    start: e.left,
                                    end: n.left
                                },
                                top: {
                                    start: e.top,
                                    end: n.top
                                },
                                width: {
                                    start: e.width,
                                    end: n.width
                                },
                                height: {
                                    start: e.height,
                                    end: n.height
                                }
                            }
                        }, a))
                    },
                    slideTo: function(a) {
                        var c = a.node = w.byId(a.node)
                          , e = l.getComputedStyle
                          , n = null
                          , t = null
                          , g = function() {
                            return function() {
                                var q = "absolute" == c.style.position ? "absolute" : "relative";
                                n = "absolute" == q ? c.offsetTop : parseInt(e(c).top) || 0;
                                t = "absolute" == q ? c.offsetLeft : parseInt(e(c).left) || 0;
                                "absolute" != q && "relative" != q && (q = m.position(c, !0),
                                n = q.y,
                                t = q.x,
                                c.style.position = "absolute",
                                c.style.top = n + "px",
                                c.style.left = t + "px")
                            }
                        }();
                        g();
                        a = y.animateProperty(b.mixin({
                            properties: {
                                top: {
                                    start: n,
                                    end: a.top || 0
                                },
                                left: {
                                    start: t,
                                    end: a.left || 0
                                }
                            }
                        }, a));
                        C.connect(a, "beforeBegin", a, g);
                        return a
                    },
                    flash: function(a) {
                        a = b.mixin({
                            end: "#f00",
                            duration: 500,
                            count: 1
                        }, a);
                        a.duration /= 2 * a.count;
                        var c = w.byId(a.node)
                          , e = a.start;
                        e || (e = l.getComputedStyle(c).backgroundColor);
                        var n = a.end
                          , t = []
                          , g = a.count;
                        c = {
                            node: c,
                            duration: a.duration
                        };
                        for (a = 0; a < g; a++)
                            t.push(y.animateProperty(b.mixin({
                                properties: {
                                    backgroundColor: {
                                        start: e,
                                        end: n
                                    }
                                }
                            }, c))),
                            t.push(y.animateProperty(b.mixin({
                                properties: {
                                    backgroundColor: {
                                        start: n,
                                        end: e
                                    }
                                }
                            }, c)));
                        return k.chain(t)
                    }
                };
                h("extend-esri") && b.mixin(b.getObject("fx", !0, f), d);
                return d
            })
        },
        "dojo/fx": function() {
            define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "), function(C, y, b, w, m, l, k, h, f, d, a) {
                b.isAsync || d(0, function() {
                    a(["./fx/Toggler"])
                });
                b = b.fx = {};
                d = {
                    _fire: function(n, t) {
                        this[n] && this[n].apply(this, t || []);
                        return this
                    }
                };
                var c = function(n) {
                    this._index = -1;
                    this._animations = n || [];
                    this._current = this._onAnimateCtx = this._onEndCtx = null;
                    this.duration = 0;
                    w.forEach(this._animations, function(t) {
                        t && ("undefined" != typeof t.duration && (this.duration += t.duration),
                        t.delay && (this.duration += t.delay))
                    }, this)
                };
                c.prototype = new y;
                C.extend(c, {
                    _onAnimate: function() {
                        this._fire("onAnimate", arguments)
                    },
                    _onEnd: function() {
                        this._onAnimateCtx.remove();
                        this._onEndCtx.remove();
                        this._onAnimateCtx = this._onEndCtx = null;
                        this._index + 1 == this._animations.length ? this._fire("onEnd") : (this._current = this._animations[++this._index],
                        this._onAnimateCtx = m.after(this._current, "onAnimate", C.hitch(this, "_onAnimate"), !0),
                        this._onEndCtx = m.after(this._current, "onEnd", C.hitch(this, "_onEnd"), !0),
                        this._current.play(0, !0))
                    },
                    play: function(n, t) {
                        this._current || (this._current = this._animations[this._index = 0]);
                        if (!t && "playing" == this._current.status())
                            return this;
                        var g = m.after(this._current, "beforeBegin", C.hitch(this, function() {
                            this._fire("beforeBegin")
                        }), !0)
                          , q = m.after(this._current, "onBegin", C.hitch(this, function(v) {
                            this._fire("onBegin", arguments)
                        }), !0)
                          , x = m.after(this._current, "onPlay", C.hitch(this, function(v) {
                            this._fire("onPlay", arguments);
                            g.remove();
                            q.remove();
                            x.remove()
                        }));
                        this._onAnimateCtx && this._onAnimateCtx.remove();
                        this._onAnimateCtx = m.after(this._current, "onAnimate", C.hitch(this, "_onAnimate"), !0);
                        this._onEndCtx && this._onEndCtx.remove();
                        this._onEndCtx = m.after(this._current, "onEnd", C.hitch(this, "_onEnd"), !0);
                        this._current.play.apply(this._current, arguments);
                        return this
                    },
                    pause: function() {
                        if (this._current) {
                            var n = m.after(this._current, "onPause", C.hitch(this, function(t) {
                                this._fire("onPause", arguments);
                                n.remove()
                            }), !0);
                            this._current.pause()
                        }
                        return this
                    },
                    gotoPercent: function(n, t) {
                        this.pause();
                        var g = this.duration * n;
                        this._current = null;
                        w.some(this._animations, function(q, x) {
                            if (g <= q.duration)
                                return this._current = q,
                                this._index = x,
                                !0;
                            g -= q.duration;
                            return !1
                        }, this);
                        this._current && this._current.gotoPercent(g / this._current.duration);
                        t && this.play();
                        return this
                    },
                    stop: function(n) {
                        if (this._current) {
                            if (n) {
                                for (; this._index + 1 < this._animations.length; ++this._index)
                                    this._animations[this._index].stop(!0);
                                this._current = this._animations[this._index]
                            }
                            var t = m.after(this._current, "onStop", C.hitch(this, function(g) {
                                this._fire("onStop", arguments);
                                t.remove()
                            }), !0);
                            this._current.stop()
                        }
                        return this
                    },
                    status: function() {
                        return this._current ? this._current.status() : "stopped"
                    },
                    destroy: function() {
                        this.stop();
                        this._onAnimateCtx && this._onAnimateCtx.remove();
                        this._onEndCtx && this._onEndCtx.remove()
                    }
                });
                C.extend(c, d);
                b.chain = function(n) {
                    return new c(C.isArray(n) ? n : Array.prototype.slice.call(n, 0))
                }
                ;
                var e = function(n) {
                    this._animations = n || [];
                    this._connects = [];
                    this.duration = this._finished = 0;
                    w.forEach(n, function(g) {
                        var q = g.duration;
                        g.delay && (q += g.delay);
                        this.duration < q && (this.duration = q);
                        this._connects.push(m.after(g, "onEnd", C.hitch(this, "_onEnd"), !0))
                    }, this);
                    this._pseudoAnimation = new l.Animation({
                        curve: [0, 1],
                        duration: this.duration
                    });
                    var t = this;
                    w.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "), function(g) {
                        t._connects.push(m.after(t._pseudoAnimation, g, function() {
                            t._fire(g, arguments)
                        }, !0))
                    })
                };
                C.extend(e, {
                    _doAction: function(n, t) {
                        w.forEach(this._animations, function(g) {
                            g[n].apply(g, t)
                        });
                        return this
                    },
                    _onEnd: function() {
                        ++this._finished > this._animations.length && this._fire("onEnd")
                    },
                    _call: function(n, t) {
                        var g = this._pseudoAnimation;
                        g[n].apply(g, t)
                    },
                    play: function(n, t) {
                        this._finished = 0;
                        this._doAction("play", arguments);
                        this._call("play", arguments);
                        return this
                    },
                    pause: function() {
                        this._doAction("pause", arguments);
                        this._call("pause", arguments);
                        return this
                    },
                    gotoPercent: function(n, t) {
                        var g = this.duration * n;
                        w.forEach(this._animations, function(q) {
                            q.gotoPercent(q.duration < g ? 1 : g / q.duration, t)
                        });
                        this._call("gotoPercent", arguments);
                        return this
                    },
                    stop: function(n) {
                        this._doAction("stop", arguments);
                        this._call("stop", arguments);
                        return this
                    },
                    status: function() {
                        return this._pseudoAnimation.status()
                    },
                    destroy: function() {
                        this.stop();
                        w.forEach(this._connects, function(n) {
                            n.remove()
                        })
                    }
                });
                C.extend(e, d);
                b.combine = function(n) {
                    return new e(C.isArray(n) ? n : Array.prototype.slice.call(n, 0))
                }
                ;
                b.wipeIn = function(n) {
                    var t = n.node = k.byId(n.node), g = t.style, q;
                    n = l.animateProperty(C.mixin({
                        properties: {
                            height: {
                                start: function() {
                                    q = g.overflow;
                                    g.overflow = "hidden";
                                    if ("hidden" == g.visibility || "none" == g.display)
                                        return g.height = "1px",
                                        g.display = "",
                                        g.visibility = "",
                                        1;
                                    var v = h.get(t, "height");
                                    return Math.max(v, 1)
                                },
                                end: function() {
                                    return t.scrollHeight
                                }
                            }
                        }
                    }, n));
                    var x = function() {
                        g.height = "auto";
                        g.overflow = q
                    };
                    m.after(n, "onStop", x, !0);
                    m.after(n, "onEnd", x, !0);
                    return n
                }
                ;
                b.wipeOut = function(n) {
                    var t = (n.node = k.byId(n.node)).style, g;
                    n = l.animateProperty(C.mixin({
                        properties: {
                            height: {
                                end: 1
                            }
                        }
                    }, n));
                    m.after(n, "beforeBegin", function() {
                        g = t.overflow;
                        t.overflow = "hidden";
                        t.display = ""
                    }, !0);
                    var q = function() {
                        t.overflow = g;
                        t.height = "auto";
                        t.display = "none"
                    };
                    m.after(n, "onStop", q, !0);
                    m.after(n, "onEnd", q, !0);
                    return n
                }
                ;
                b.slideTo = function(n) {
                    var t = null
                      , g = null
                      , q = function(x) {
                        return function() {
                            var v = h.getComputedStyle(x)
                              , z = v.position;
                            t = "absolute" == z ? x.offsetTop : parseInt(v.top) || 0;
                            g = "absolute" == z ? x.offsetLeft : parseInt(v.left) || 0;
                            "absolute" != z && "relative" != z && (v = f.position(x, !0),
                            t = v.y,
                            g = v.x,
                            x.style.position = "absolute",
                            x.style.top = t + "px",
                            x.style.left = g + "px")
                        }
                    }(n.node = k.byId(n.node));
                    q();
                    n = l.animateProperty(C.mixin({
                        properties: {
                            top: n.top || 0,
                            left: n.left || 0
                        }
                    }, n));
                    m.after(n, "beforeBegin", q, !0);
                    return n
                }
                ;
                return b
            })
        },
        "esri/deferredUtils": function() {
            define(["dojo/_base/lang", "dojo/has", "./kernel"], function(C, y, b) {
                var w = {
                    _dfdCanceller: function(m) {
                        m.canceled = !0;
                        var l = m._pendingDfd;
                        if (!m.isFulfilled() && l && !l.isFulfilled()) {
                            l.cancel();
                            var k = l.results && l.results[1]
                        }
                        m._pendingDfd = null;
                        return k
                    },
                    _fixDfd: function(m) {
                        var l = m.then;
                        m.then = function(k, h, f) {
                            if (k) {
                                var d = k;
                                k = function(a) {
                                    return a && a._argsArray ? d.apply(null, a) : d(a)
                                }
                            }
                            return l.call(this, k, h, f)
                        }
                        ;
                        return m
                    },
                    _resDfd: function(m, l, k) {
                        var h = l.length;
                        1 === h ? k ? m.errback(l[0]) : m.callback(l[0]) : 1 < h ? (l._argsArray = !0,
                        m.callback(l)) : m.callback()
                    }
                };
                y("extend-esri") && C.mixin(b, w);
                return w
            })
        },
        "esri/tileUtils": function() {
            define(["dojo/_base/array", "dojo/has", "./kernel", "./geometry/Point", "./geometry/Extent"], function(C, y, b, w, m) {
                var l = {
                    _addFrameInfo: function(k, h) {
                        var f, d, a = 2 * h.origin[1], c = h.origin[0], e = k.origin.x, n = k.width, t;
                        C.forEach(k.lods, function(g) {
                            f = Math.round(a / g.resolution);
                            d = Math.ceil(f / n);
                            t = Math.floor((c - e) / (n * g.resolution));
                            g._frameInfo || (g._frameInfo = [d, t, t + d - 1, f])
                        })
                    },
                    getContainingTileCoords: function(k, h, f) {
                        var d = k.origin;
                        f = f.resolution;
                        return {
                            row: Math.floor((d.y - h.y) / (k.height * f)),
                            col: Math.floor((h.x - d.x) / (k.width * f))
                        }
                    },
                    getCandidateTileInfo: function(k, h, f) {
                        var d = k.width;
                        var a = k.height
                          , c = f.xmax - f.xmin
                          , e = f.ymax - f.ymin
                          , n = k.__tileInfo === h
                          , t = n ? k.getMinZoom() : -1;
                        n = n ? k.getMaxZoom() : -1;
                        var g = -1, q = h.lods, x = Math.abs, v;
                        n = -1 < n ? n : q.length - 1;
                        for (t = -1 < t ? t : 0; t <= n; t++)
                            if (v = q[t]) {
                                var z = c > e ? x(e - a * v.resolution) : x(c - d * v.resolution);
                                if (0 > g || z <= g) {
                                    var u = v;
                                    g = z
                                } else
                                    break
                            }
                        d = u;
                        u = d.resolution;
                        a = (f.xmin + f.xmax) / 2;
                        c = (f.ymin + f.ymax) / 2;
                        e = k.width / 2 * u;
                        u *= k.height / 2;
                        a = new m(a - e,c - u,a + e,c + u,f.spatialReference);
                        f = new w(a.xmin,a.ymax,f.spatialReference);
                        n = d.resolution;
                        e = h.width;
                        c = h.height;
                        h = h.origin;
                        k = k.__visibleDelta;
                        u = Math.floor;
                        q = e * n;
                        x = c * n;
                        n = u((h.y - f.y) / x);
                        g = u((f.x - h.x) / q);
                        t = h.y - n * x;
                        h = u(Math.abs((f.x - (h.x + g * q)) * e / q)) + k.x;
                        k = u(Math.abs((f.y - t) * c / x)) + k.y;
                        return {
                            tile: {
                                point: f,
                                coords: {
                                    row: n,
                                    col: g
                                },
                                offsets: {
                                    x: h,
                                    y: k
                                }
                            },
                            lod: d,
                            extent: a
                        }
                    },
                    getTileExtent: function(k, h, f, d) {
                        var a = k.origin;
                        h = k.lods[h].resolution;
                        var c = k.width
                          , e = k.height;
                        return new m(d * h * c + a.x,a.y - (f + 1) * h * e,(d + 1) * h * c + a.x,a.y - f * h * e,k.spatialReference)
                    }
                };
                y("extend-esri") && (b.TileUtils = l);
                return l
            })
        },
        "esri/geometry/Point": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "), function(C, y, b, w, m, l, k, h) {
                function f(n, t) {
                    89.99999 < t ? t = 89.99999 : -89.99999 > t && (t = -89.99999);
                    t *= .017453292519943;
                    return [111319.49079327169 * n, 3189068.5 * Math.log((1 + Math.sin(t)) / (1 - Math.sin(t)))]
                }
                function d(n, t, g) {
                    n = n / 6378137 * 57.29577951308232;
                    return g ? [n, 57.29577951308232 * (1.5707963267948966 - 2 * Math.atan(Math.exp(-1 * t / 6378137)))] : [n - 360 * Math.floor((n + 180) / 360), 57.29577951308232 * (1.5707963267948966 - 2 * Math.atan(Math.exp(-1 * t / 6378137)))]
                }
                function a() {}
                function c() {}
                function e(n) {
                    var t = n._json;
                    n._unquantizeFn ? (t = n._unquantizeFn({
                        x: t.x,
                        y: t.y
                    }),
                    n._xVal = t.x,
                    n._yVal = t.y,
                    n._unquantizeFn = null) : (n._xVal = t.x,
                    n._yVal = t.y);
                    n._json = null
                }
                l = {
                    type: "point",
                    x: 0,
                    y: 0
                };
                C = C(k, {
                    declaredClass: "esri.geometry.Point",
                    type: "point",
                    x: 0,
                    y: 0,
                    constructor: function(n, t, g) {
                        y.isArray(n) ? (this.x = n[0],
                        this.y = n[1],
                        this.spatialReference = t) : m.isObject(n) ? (m.mixin(this, n),
                        null != this.latitude && (this.y = this.latitude),
                        null != this.longitude && (this.x = this.longitude),
                        this.spatialReference && (this.spatialReference = h.createSpatialReference(this.spatialReference))) : (this.x = n,
                        this.y = t,
                        this.spatialReference = g);
                        this.verifySR()
                    },
                    offset: function(n, t) {
                        return new this.constructor(this.x + n,this.y + t,this.spatialReference)
                    },
                    setX: function(n) {
                        this.x = n;
                        this.clearCache();
                        return this
                    },
                    setY: function(n) {
                        this.y = n;
                        this.clearCache();
                        return this
                    },
                    setLongitude: function(n) {
                        var t = this.spatialReference;
                        t && (t._isWebMercator() ? this.setX(f(n, this.y)[0]) : 4326 === t.wkid && this.setX(n));
                        return this
                    },
                    setLatitude: function(n) {
                        var t = this.spatialReference;
                        t && (t._isWebMercator() ? this.setY(f(this.x, n)[1]) : 4326 === t.wkid && this.setY(n));
                        return this
                    },
                    getLongitude: function() {
                        var n = this.spatialReference;
                        if (n)
                            if (n._isWebMercator())
                                var t = d(this.x, this.y)[0];
                            else
                                4326 === n.wkid && (t = this.x);
                        return t
                    },
                    getLatitude: function() {
                        var n = this.spatialReference;
                        if (n)
                            if (n._isWebMercator())
                                var t = d(this.x, this.y)[1];
                            else
                                4326 === n.wkid && (t = this.y);
                        return t
                    },
                    update: function(n, t) {
                        this.x = n;
                        this.y = t;
                        this.clearCache();
                        return this
                    },
                    normalize: function() {
                        var n = this.x
                          , t = this.spatialReference;
                        if (t) {
                            var g = t._getInfo();
                            g && (n = this._normalizeX(n, g))
                        }
                        return new this.constructor(n,this.y,t)
                    },
                    _normalizeX: function(n, t) {
                        var g = t.valid[0]
                          , q = t.valid[1];
                        t = 2 * q;
                        n > q ? (g = Math.ceil(Math.abs(n - q) / t),
                        n -= g * t) : n < g && (g = Math.ceil(Math.abs(n - g) / t),
                        n += g * t);
                        return n
                    },
                    toJson: function() {
                        var n = {
                            x: this.x,
                            y: this.y
                        }
                          , t = this.spatialReference;
                        t && (n.spatialReference = t.toJson());
                        return n
                    }
                });
                a.prototype = C.prototype;
                c.prototype = new a;
                Object.defineProperty(c.prototype, "x", {
                    get: function() {
                        this._json && e(this);
                        return this._xVal
                    },
                    set: function(n) {
                        this._xVal = n
                    }
                });
                Object.defineProperty(c.prototype, "y", {
                    get: function() {
                        this._json && e(this);
                        return this._yVal
                    },
                    set: function(n) {
                        this._yVal = n
                    }
                });
                c.prototype.setupLazyUnquantization = function(n, t) {
                    this._unquantizeFn = n;
                    this._json = t
                }
                ;
                C.simpleConstructor = a;
                C.accessorConstructor = c;
                C.lngLatToXY = f;
                C.xyToLngLat = d;
                C.defaultProps = l;
                C.metersPerDegree = 6378137 * Math.PI / 180;
                b("extend-esri") && (y.setObject("geometry.Point", C, w),
                w.geometry.defaultPoint = l);
                return C
            })
        },
        "esri/SpatialReference": function() {
            define(["dojo/_base/declare", "dojo/_base/array", "dojo/has", "./kernel", "./lang"], function(C, y, b, w, m) {
                function l() {}
                var k = [-2.0037508342788905E7, 2.0037508342788905E7]
                  , h = [-2.0037508342787E7, 2.0037508342787E7];
                C = C(null, {
                    declaredClass: "esri.SpatialReference",
                    constructor: function(f) {
                        f && (m.isObject(f) ? m.mixin(this, f) : m.isString(f) ? this.wkt = f : this.wkid = f)
                    },
                    wkid: null,
                    wkt: null,
                    _info: {
                        102113: {
                            wkTemplate: 'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
                            valid: k,
                            origin: h,
                            dx: 1E-5
                        },
                        102100: {
                            wkTemplate: 'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
                            valid: k,
                            origin: h,
                            dx: 1E-5
                        },
                        3785: {
                            wkTemplate: 'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
                            valid: k,
                            origin: h,
                            dx: 1E-5
                        },
                        3857: {
                            wkTemplate: 'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
                            valid: k,
                            origin: h,
                            dx: 1E-5
                        },
                        4326: {
                            wkTemplate: 'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',
                            altTemplate: 'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
                            valid: [-180, 180],
                            origin: [-180, 180],
                            dx: 1E-5
                        }
                    },
                    _isWebMercator: function() {
                        return -1 !== y.indexOf([102113, 102100, 3857, 3785], this.wkid)
                    },
                    _isWrappable: function() {
                        return -1 !== y.indexOf([102113, 102100, 3857, 3785, 4326], this.wkid)
                    },
                    _getInfo: function() {
                        return this.wkid ? this._info[this.wkid] : null
                    },
                    _canProject: function(f) {
                        var d = !1;
                        f && (d = this.isWebMercator() && 4326 === f.wkid || f.isWebMercator() && 4326 === this.wkid);
                        return d
                    },
                    isWebMercator: function() {
                        return this._isWebMercator()
                    },
                    equals: function(f) {
                        var d = !1;
                        f && (this === f && (d = !0),
                        this.wkid || f.wkid ? d = this.wkid === f.wkid || this.isWebMercator() && f.isWebMercator() || this.wkid === f.latestWkid || f.wkid === this.latestWkid : this.wkt && f.wkt && (d = this.wkt.toUpperCase() === f.wkt.toUpperCase()));
                        return d
                    },
                    toJson: function() {
                        var f = null;
                        null != this.wkid ? f = {
                            wkid: this.wkid
                        } : null != this.wkt && (f = {
                            wkt: this.wkt
                        });
                        f && null != this.latestWkid && (f.latestWkid = this.latestWkid);
                        return f
                    }
                });
                l.prototype = C.prototype;
                C.simpleConstructor = l;
                b("extend-esri") && (w.SpatialReference = C);
                return C
            })
        },
        "esri/geometry/Geometry": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../SpatialReference"], function(C, y, b, w, m) {
                C = C(null, {
                    declaredClass: "esri.geometry.Geometry",
                    spatialReference: null,
                    type: null,
                    cache: void 0,
                    setSpatialReference: function(l) {
                        this.spatialReference = l;
                        return this
                    },
                    verifySR: function() {
                        this.spatialReference || this.setSpatialReference(new m(4326))
                    },
                    getExtent: function() {
                        return null
                    },
                    clearCache: function() {
                        this.cache = void 0
                    },
                    getCacheValue: function(l) {
                        return this.cache && this.cache[l]
                    },
                    setCacheValue: function(l, k) {
                        this.cache || (this.cache = {});
                        this.cache[l] = k
                    }
                });
                b("extend-esri") && y.setObject("geometry.Geometry", C, w);
                return C
            })
        },
        "esri/srUtils": function() {
            define(["./SpatialReference", "./ImageSpatialReference", "./kernel", "./sniff", "dojo/_base/lang"], function(C, y, b, w, m) {
                function l(h) {
                    var f = !1;
                    h && (h.ics || h.icsid) && (f = !0);
                    return f
                }
                var k = {
                    isICS: l,
                    createSpatialReference: function(h) {
                        var f = null;
                        h && (f = l(h) ? new y(h) : new C(h));
                        return f
                    }
                };
                w("extend-esri") && m.mixin(b, k);
                return k
            })
        },
        "esri/ImageSpatialReference": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "), function(C, y, b, w, m, l) {
                C = C(l, {
                    declaredClass: "esri.ImageSpatialReference",
                    constructor: function(k) {
                        k && y.isObject(k) && y.mixin(this, k)
                    },
                    icsid: null,
                    icsns: null,
                    ics: null,
                    _isWebMercator: function() {
                        return !1
                    },
                    _isWrappable: function() {
                        return !1
                    },
                    equals: function(k) {
                        var h = !1;
                        if (k)
                            if (this.icsid && k.icsid) {
                                if (h = this.icsid === k.icsid,
                                this.icsns || k.icsns)
                                    h = h && this.icsns === k.icsns
                            } else
                                this.ics && k.ics && (h = this.ics === k.ics);
                        return h
                    },
                    toJson: function(k) {
                        var h = null
                          , f = m.isDefined;
                        k = f(k) ? k : !0;
                        f(this.icsid) ? (h = {
                            icsid: this.icsid
                        },
                        f(this.icsns) && (h.icsns = this.icsns)) : f(this.ics) && (h = {
                            ics: this.ics
                        });
                        f(this.url) && f(h) && k && (h.url = this.url);
                        return h
                    }
                });
                b("extend-esri") && (w.ImageSpatialReference = C);
                return C
            })
        },
        "esri/geometry/Extent": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c) {
                function e() {}
                var n = {
                    type: "extent",
                    xmin: 0,
                    ymin: 0,
                    xmax: 0,
                    ymax: 0
                }
                  , t = C(h, {
                    declaredClass: "esri.geometry.Extent",
                    type: "extent",
                    xmin: 0,
                    ymin: 0,
                    xmax: 0,
                    ymax: 0,
                    constructor: function(g, q, x, v, z) {
                        l.isObject(g) ? (l.mixin(this, g),
                        this.spatialReference && (this.spatialReference = c.createSpatialReference(this.spatialReference))) : this.update(g, q, x, v, z);
                        this.verifySR()
                    },
                    getWidth: function() {
                        return Math.abs(this.xmax - this.xmin)
                    },
                    getHeight: function() {
                        return Math.abs(this.ymax - this.ymin)
                    },
                    getCenter: function() {
                        return new f((this.xmin + this.xmax) / 2,(this.ymin + this.ymax) / 2,this.spatialReference)
                    },
                    getTopLeft: function() {
                        return new f(this.xmin,this.ymax,this.spatialReference)
                    },
                    getTopRight: function() {
                        return new f(this.xmax,this.ymax,this.spatialReference)
                    },
                    getBottomLeft: function() {
                        return new f(this.xmin,this.ymin,this.spatialReference)
                    },
                    getBottomRight: function() {
                        return new f(this.xmax,this.ymin,this.spatialReference)
                    },
                    centerAt: function(g) {
                        var q = this.getCenter()
                          , x = g.x - q.x;
                        g = g.y - q.y;
                        return new t(this.xmin + x,this.ymin + g,this.xmax + x,this.ymax + g,this.spatialReference)
                    },
                    update: function(g, q, x, v, z) {
                        this.xmin = g;
                        this.ymin = q;
                        this.xmax = x;
                        this.ymax = v;
                        this.spatialReference = z;
                        this.clearCache();
                        return this
                    },
                    offset: function(g, q) {
                        return new t(this.xmin + g,this.ymin + q,this.xmax + g,this.ymax + q,this.spatialReference)
                    },
                    expand: function(g) {
                        var q = (1 - g) / 2;
                        g = this.getWidth() * q;
                        q *= this.getHeight();
                        return new t(this.xmin + g,this.ymin + q,this.xmax - g,this.ymax - q,this.spatialReference)
                    },
                    intersects: function(g) {
                        if (!g)
                            return !1;
                        var q = g.type
                          , x = this.spatialReference
                          , v = g.spatialReference;
                        x && v && !x.equals(v) && x._canProject(v) && (g = x.isWebMercator() ? d.geographicToWebMercator(g) : d.webMercatorToGeographic(g, !0));
                        switch (q) {
                        case "point":
                            return this.contains(g);
                        case "multipoint":
                            return this._intersectsMultipoint(g);
                        case "extent":
                            return this._intersectsExtent(g);
                        case "polygon":
                            return this._intersectsPolygon(g);
                        case "polyline":
                            return this._intersectsPolyline(g)
                        }
                    },
                    normalize: function() {
                        var g = this._normalize(!1, !0);
                        b.isArray(g) || (g = [g]);
                        return g
                    },
                    shiftCentralMeridian: function() {
                        return this._normalize(!0)
                    },
                    bisect: function() {
                        var g = this.spatialReference
                          , q = g && g._getInfo()
                          , x = []
                          , v = 0;
                        if (q && this._isOutOfBounds(q)) {
                            var z = this;
                            v = z.xmin;
                            var u = z.ymin
                              , p = z.ymax
                              , r = q.valid[0]
                              , B = q.valid[1];
                            z.getWidth() > 2 * B && (z = z.getCenter(),
                            z = new t(z.x - B,u,z.x + B,p,new k(g.toJson())));
                            v = z.xmin - v;
                            var D = this._normalizeX(z.xmin, q);
                            q = this._normalizeX(z.xmax, q);
                            D.frameId === q.frameId ? x.push(new t(D.x,u,q.x,p,new k(g.toJson()))) : x.push(new t(D.x,u,B,p,new k(g.toJson())), new t(r,u,q.x,p,new k(g.toJson())))
                        } else
                            x.push(this.getExtent());
                        return {
                            extents: x,
                            marginLeft: v
                        }
                    },
                    _intersectsMultipoint: function(g) {
                        var q = g.points.length, x;
                        for (x = 0; x < q; x++)
                            if (this.contains(g.getPoint(x)))
                                return !0;
                        return !1
                    },
                    _intersectsExtent: function(g) {
                        var q, x, v = !1;
                        if (this.xmin <= g.xmin) {
                            var z = g.xmin;
                            this.xmax < z ? v = !0 : q = Math.min(this.xmax, g.xmax) - z
                        } else
                            z = this.xmin,
                            g.xmax < z ? v = !0 : q = Math.min(this.xmax, g.xmax) - z;
                        if (this.ymin <= g.ymin) {
                            var u = g.ymin;
                            this.ymax < u ? v = !0 : x = Math.min(this.ymax, g.ymax) - u
                        } else
                            u = this.ymin,
                            g.ymax < u ? v = !0 : x = Math.min(this.ymax, g.ymax) - u;
                        return v ? null : new t(z,u,z + q,u + x,this.spatialReference)
                    },
                    _intersectsPolygon: function(g) {
                        var q = [this.xmin, this.ymax]
                          , x = [this.xmax, this.ymax]
                          , v = [this.xmin, this.ymin]
                          , z = [this.xmax, this.ymin]
                          , u = [q, x, v, z];
                        q = [[v, q], [q, x], [x, z], [z, v]];
                        v = g.rings;
                        z = v.length;
                        var p = new f(0,0,this.spatialReference);
                        var r = u.length;
                        for (x = 0; x < r; x++)
                            if (p.update(u[x][0], u[x][1]),
                            g.contains(p))
                                return !0;
                        p.setSpatialReference(g.spatialReference);
                        for (x = 0; x < z; x++)
                            if (u = v[x],
                            r = u.length) {
                                var B = u[0];
                                p.update(B[0], B[1]);
                                if (this.contains(p))
                                    return !0;
                                for (g = 1; g < r; g++) {
                                    var D = u[g];
                                    p.update(D[0], D[1]);
                                    if (this.contains(p) || this._intersectsLine([B, D], q))
                                        return !0;
                                    B = D
                                }
                            }
                        return !1
                    },
                    _intersectsPolyline: function(g) {
                        var q = [[[this.xmin, this.ymin], [this.xmin, this.ymax]], [[this.xmin, this.ymax], [this.xmax, this.ymax]], [[this.xmax, this.ymax], [this.xmax, this.ymin]], [[this.xmax, this.ymin], [this.xmin, this.ymin]]], x, v = g.paths, z = v.length, u, p = new f(0,0,g.spatialReference);
                        for (g = 0; g < z; g++) {
                            var r = v[g];
                            if (u = r.length) {
                                var B = r[0];
                                p.update(B[0], B[1]);
                                if (this.contains(p))
                                    return !0;
                                for (x = 1; x < u; x++) {
                                    var D = r[x];
                                    p.update(D[0], D[1]);
                                    if (this.contains(p) || this._intersectsLine([B, D], q))
                                        return !0;
                                    B = D
                                }
                            }
                        }
                        return !1
                    },
                    _intersectsLine: function(g, q) {
                        var x = a._getLineIntersection2, v, z = q.length;
                        for (v = 0; v < z; v++)
                            if (x(g, q[v]))
                                return !0;
                        return !1
                    },
                    contains: function(g) {
                        if (!g)
                            return !1;
                        var q = g.type;
                        if ("point" === q) {
                            var x = this.spatialReference
                              , v = g.spatialReference;
                            q = g.x;
                            g = g.y;
                            x && v && !x.equals(v) && x._canProject(v) && (g = x.isWebMercator() ? f.lngLatToXY(q, g) : f.xyToLngLat(q, g, !0),
                            q = g[0],
                            g = g[1]);
                            return q >= this.xmin && q <= this.xmax && g >= this.ymin && g <= this.ymax
                        }
                        return "extent" === q ? this._containsExtent(g) : !1
                    },
                    _containsExtent: function(g) {
                        var q = g.xmin
                          , x = g.ymin
                          , v = g.xmax
                          , z = g.ymax
                          , u = g.spatialReference;
                        g = new f(q,x,u);
                        q = new f(q,z,u);
                        z = new f(v,z,u);
                        x = new f(v,x,u);
                        return this.contains(g) && this.contains(q) && this.contains(z) && this.contains(x) ? !0 : !1
                    },
                    union: function(g) {
                        return new t(Math.min(this.xmin, g.xmin),Math.min(this.ymin, g.ymin),Math.max(this.xmax, g.xmax),Math.max(this.ymax, g.ymax),this.spatialReference)
                    },
                    getExtent: function() {
                        var g = this.spatialReference;
                        return new t(this.xmin,this.ymin,this.xmax,this.ymax,g && new k(g.toJson()))
                    },
                    _shiftCM: function(g) {
                        var q = this.getCacheValue("_shifted");
                        if (!q) {
                            q = new t(this.toJson());
                            var x = q.spatialReference;
                            if (g = g || x._getInfo()) {
                                var v = this._getCM(g);
                                if (v) {
                                    var z = x._isWebMercator() ? d.webMercatorToGeographic(v) : v;
                                    q.xmin -= v.x;
                                    q.xmax -= v.x;
                                    x._isWebMercator() || (z.x = this._normalizeX(z.x, g).x);
                                    q.setSpatialReference(new k(l.substitute({
                                        Central_Meridian: z.x
                                    }, 4326 === x.wkid ? g.altTemplate : g.wkTemplate)))
                                }
                            }
                            this.setCacheValue("_shifted", q)
                        }
                        return q
                    },
                    _getCM: function(g) {
                        var q;
                        this._isOutOfBounds(g) && (q = this.getCenter());
                        return q
                    },
                    _isOutOfBounds: function(g) {
                        var q = g.valid[0];
                        g = g.valid[1];
                        var x = this.xmin
                          , v = this.xmax;
                        return !(x >= q && x <= g && v >= q && v <= g)
                    },
                    _normalize: function(g, q, x) {
                        var v = new t(this.toJson())
                          , z = v.spatialReference;
                        if (z && (x = x || z._getInfo())) {
                            var u = y.map(this._getParts(x), function(p) {
                                return p.extent
                            });
                            return 2 < u.length ? g ? this._shiftCM(x) : v.update(x.valid[0], v.ymin, x.valid[1], v.ymax, z) : 2 === u.length ? g ? this._shiftCM(x) : q ? u : {
                                rings: y.map(u, function(p) {
                                    return [[p.xmin, p.ymin], [p.xmin, p.ymax], [p.xmax, p.ymax], [p.xmax, p.ymin], [p.xmin, p.ymin]]
                                }),
                                spatialReference: z
                            } : u[0] || v
                        }
                        return v
                    },
                    _getParts: function(g) {
                        var q = this.getCacheValue("_parts");
                        if (!q) {
                            q = [];
                            var x = this.xmin
                              , v = this.xmax
                              , z = this.ymin
                              , u = this.ymax
                              , p = this.spatialReference
                              , r = this.getWidth()
                              , B = x
                              , D = v
                              , G = 0
                              , A = 0;
                            g = g || p._getInfo();
                            var E = g.valid[0];
                            var H = g.valid[1];
                            A = this._normalizeX(x, g);
                            x = A.x;
                            G = A.frameId;
                            A = this._normalizeX(v, g);
                            v = A.x;
                            A = A.frameId;
                            g = x === v && 0 < r;
                            if (r > 2 * H) {
                                r = new t(B < D ? x : v,z,H,u,p);
                                x = new t(E,z,B < D ? v : x,u,p);
                                H = new t(0,z,H,u,p);
                                z = new t(E,z,0,u,p);
                                p = [];
                                E = [];
                                r.contains(H) && p.push(G);
                                r.contains(z) && E.push(G);
                                x.contains(H) && p.push(A);
                                x.contains(z) && E.push(A);
                                for (u = G + 1; u < A; u++)
                                    p.push(u),
                                    E.push(u);
                                q.push({
                                    extent: r,
                                    frameIds: [G]
                                }, {
                                    extent: x,
                                    frameIds: [A]
                                }, {
                                    extent: H,
                                    frameIds: p
                                }, {
                                    extent: z,
                                    frameIds: E
                                })
                            } else
                                x > v || g ? q.push({
                                    extent: new t(x,z,H,u,p),
                                    frameIds: [G]
                                }, {
                                    extent: new t(E,z,v,u,p),
                                    frameIds: [A]
                                }) : q.push({
                                    extent: new t(x,z,v,u,p),
                                    frameIds: [G]
                                });
                            this.setCacheValue("_parts", q)
                        }
                        return q
                    },
                    _normalizeX: function(g, q) {
                        var x = 0
                          , v = q.valid[0]
                          , z = q.valid[1];
                        q = 2 * z;
                        g > z ? (x = Math.ceil(Math.abs(g - z) / q),
                        g -= x * q) : g < v && (x = Math.ceil(Math.abs(g - v) / q),
                        g += x * q,
                        x = -x);
                        return {
                            x: g,
                            frameId: x
                        }
                    },
                    toJson: function() {
                        var g = {
                            xmin: this.xmin,
                            ymin: this.ymin,
                            xmax: this.xmax,
                            ymax: this.ymax
                        }
                          , q = this.spatialReference;
                        q && (g.spatialReference = q.toJson());
                        return g
                    }
                });
                e.prototype = t.prototype;
                t.simpleConstructor = e;
                t.defaultProps = n;
                w("extend-esri") && (b.setObject("geometry.Extent", t, m),
                m.geometry.defaultExtent = n);
                return t
            })
        },
        "esri/geometry/webMercatorUtils": function() {
            define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "), function(C, y, b, w, m, l) {
                function k(d, a, c, e) {
                    if ("point" === d.type) {
                        var n = a(d.x, d.y, e);
                        return new d.constructor(n[0],n[1],new m(c))
                    }
                    if ("extent" === d.type) {
                        n = a(d.xmin, d.ymin, e);
                        var t = a(d.xmax, d.ymax, e);
                        return new d.constructor(n[0],n[1],t[0],t[1],new m(c))
                    }
                    if ("polyline" === d.type || "polygon" === d.type) {
                        n = "polyline" === d.type;
                        var g = [], q;
                        C.forEach(n ? d.paths : d.rings, function(v) {
                            g.push(q = []);
                            C.forEach(v, function(z) {
                                q.push(a(z[0], z[1], e))
                            })
                        });
                        return n ? new d.constructor({
                            paths: g,
                            spatialReference: new m(c)
                        }) : new d.constructor({
                            rings: g,
                            spatialReference: new m(c)
                        })
                    }
                    if ("multipoint" === d.type) {
                        var x = [];
                        C.forEach(d.points, function(v) {
                            x.push(a(v[0], v[1], e))
                        });
                        return new d.constructor({
                            points: x,
                            spatialReference: new m(c)
                        })
                    }
                }
                function h(d, a) {
                    d = d && (null != d.wkid ? d : d.spatialReference);
                    a = a && (null != a.wkid ? a : a.spatialReference);
                    return d && a ? a.equals(d) ? !0 : a._canProject(d) : !1
                }
                var f = {
                    canProject: h,
                    project: function(d, a) {
                        var c = d && d.spatialReference;
                        a = a && (null != a.wkid ? a : a.spatialReference);
                        c && a ? c.equals(a) ? d = new d.constructor(d.toJson()) : h(c, a) ? a.isWebMercator() ? d = k(d, l.lngLatToXY, {
                            wkid: 102100
                        }) : 4326 === a.wkid && (d = k(d, l.xyToLngLat, {
                            wkid: 4326
                        })) : d = null : d = null;
                        return d
                    },
                    lngLatToXY: l.lngLatToXY,
                    xyToLngLat: l.xyToLngLat,
                    metersPerDegree: l.metersPerDegree,
                    geographicToWebMercator: function(d) {
                        return k(d, l.lngLatToXY, {
                            wkid: 102100
                        })
                    },
                    webMercatorToGeographic: function(d, a) {
                        return k(d, l.xyToLngLat, {
                            wkid: 4326
                        }, a)
                    }
                };
                b("extend-esri") && y.mixin(y.getObject("geometry", !0, w), f);
                return f
            })
        },
        "esri/geometry/mathUtils": function() {
            define(["dojo/_base/lang", "dojo/has", "../kernel", "./Point"], function(C, y, b, w) {
                function m(f, d, a) {
                    return f instanceof w ? new w(f.x + a * (d.x - f.x),f.y + a * (d.y - f.y)) : [f[0] + a * (d[0] - f[0]), f[1] + a * (d[1] - f[1])]
                }
                function l(f, d) {
                    return 1E-8 > Math.abs(f - d)
                }
                function k(f, d, a, c) {
                    var e = l(f[0], d[0]) ? 1E10 : (f[1] - d[1]) / (f[0] - d[0])
                      , n = l(a[0], c[0]) ? 1E10 : (a[1] - c[1]) / (a[0] - c[0])
                      , t = f[1] - e * f[0]
                      , g = a[1] - n * a[0];
                    if (l(e, n)) {
                        if (l(t, g)) {
                            if (l(f[0], d[0]))
                                if (Math.min(f[1], d[1]) < Math.max(a[1], c[1]) || Math.max(f[1], d[1]) > Math.min(a[1], c[1])) {
                                    f = (f[1] + d[1] + a[1] + c[1] - Math.min(f[1], d[1], a[1], c[1]) - Math.max(f[1], d[1], a[1], c[1])) / 2;
                                    var q = (f - t) / e
                                } else
                                    return null;
                            else if (Math.min(f[0], d[0]) < Math.max(a[0], c[0]) || Math.max(f[0], d[0]) > Math.min(a[0], c[0]))
                                q = (f[0] + d[0] + a[0] + c[0] - Math.min(f[0], d[0], a[0], c[0]) - Math.max(f[0], d[0], a[0], c[0])) / 2,
                                f = e * q + t;
                            else
                                return null;
                            return [q, f]
                        }
                        return null
                    }
                    l(e, 1E10) ? (q = f[0],
                    f = n * q + g) : l(n, 1E10) ? (q = a[0],
                    f = e * q + t) : (q = -(t - g) / (e - n),
                    f = f[1] === d[1] ? f[1] : a[1] === c[1] ? a[1] : e * q + t);
                    return [q, f]
                }
                var h = {
                    getLength: function(f, d) {
                        var a = d.x - f.x;
                        f = d.y - f.y;
                        return Math.sqrt(a * a + f * f)
                    },
                    _getLength: function(f, d) {
                        var a = d[0] - f[0];
                        f = d[1] - f[1];
                        return Math.sqrt(a * a + f * f)
                    },
                    getPointOnLine: m,
                    getMidpoint: function(f, d) {
                        return m(f, d, .5)
                    },
                    _equals: l,
                    _getLineIntersection: k,
                    getLineIntersection: function(f, d, a, c, e) {
                        (f = k([f.x, f.y], [d.x, d.y], [a.x, a.y], [c.x, c.y])) && (f = new w(f[0],f[1],e));
                        return f
                    },
                    _getLineIntersection2: function(f, d) {
                        var a = f[0]
                          , c = f[1]
                          , e = d[0]
                          , n = d[1];
                        d = a[0];
                        a = a[1];
                        f = c[0];
                        c = c[1];
                        var t = e[0]
                          , g = e[1];
                        e = n[0] - t;
                        t = d - t;
                        var q = f - d;
                        n = n[1] - g;
                        g = a - g;
                        var x = c - a
                          , v = n * q - e * x;
                        if (0 === v)
                            return !1;
                        e = (e * g - n * t) / v;
                        t = (q * g - x * t) / v;
                        return 0 <= e && 1 >= e && 0 <= t && 1 >= t ? [d + e * (f - d), a + e * (c - a)] : !1
                    },
                    _pointLineDistance: function(f, d) {
                        var a = d[0]
                          , c = d[1];
                        d = a[0];
                        var e = a[1];
                        a = f[0];
                        f = f[1];
                        var n = c[0] - d
                          , t = c[1] - e
                          , g = a - d
                          , q = f - e;
                        c = Math.sqrt;
                        var x = Math.pow
                          , v = c(x(n, 2) + x(t, 2));
                        g = (g * n + q * t) / (v * v);
                        e += g * t;
                        return c(x(a - (d + g * n), 2) + x(f - e, 2))
                    }
                };
                y("extend-esri") && C.mixin(C.getObject("geometry", !0, b), h);
                return h
            })
        },
        "esri/urlUtils": function() {
            define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                var a = {}
                  , c = h.defaults.io
                  , e = /^[a-z][a-z0-9\+\-\.]*:/i
                  , n = /^\s*http:/i
                  , t = /^\s*https:/i
                  , g = /:\d+$/
                  , q = /^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;
                a.isHTTP = function(v) {
                    var z = w.location.protocol;
                    return null == v ? "http:" === z || "https:" === z : v ? "https:" === z : "http:" === z
                }
                ;
                a.getProtocolForWebResource = function(v) {
                    return a.isHTTP() ? w.location.protocol : v ? "https:" : "http:"
                }
                ;
                a.urlToObject = function(v) {
                    var z = {}
                      , u = new b(v)
                      , p = v.indexOf("?");
                    null === u.query ? z = {
                        path: v,
                        query: null
                    } : (z.path = v.substring(0, p),
                    z.query = m.queryToObject(u.query));
                    u.fragment && (z.hash = u.fragment,
                    null === u.query && (z.path = z.path.substring(0, z.path.length - (u.fragment.length + 1))));
                    return z
                }
                ;
                a.getProxyUrl = function(v, z) {
                    var u = C.isString(v) ? 0 === C.trim(v).toLowerCase().indexOf("https:") : v
                      , p = c.proxyUrl
                      , r = d.io.proxyNotSet;
                    C.isString(v) && (v = a.getProxyRule(v)) && (p = v.proxyUrl);
                    if (!p)
                        throw console.log(r),
                        Error(r);
                    if (u && !1 !== z && 0 !== w.location.href.toLowerCase().indexOf("https:") && (z = p,
                    0 !== z.toLowerCase().indexOf("http") && (z = a.getAbsoluteUrl(z)),
                    z = z.replace(/^http:/i, "https:"),
                    a.canUseXhr(z))) {
                        p = z;
                        var B = 1
                    }
                    p = a.urlToObject(p);
                    p._xo = B;
                    return p
                }
                ;
                a.addProxy = function(v) {
                    var z = a.getProxyRule(v), u;
                    z ? u = a.urlToObject(z.proxyUrl) : c.alwaysUseProxy && (u = a.getProxyUrl());
                    u && (z = a.urlToObject(v),
                    v = u.path + "?" + z.path,
                    (u = m.objectToQuery(C.mixin(u.query || {}, z.query))) && (v += "?" + u));
                    return v
                }
                ;
                a.addProxyRule = function(v) {
                    var z = v.urlPrefix = a.urlToObject(v.urlPrefix).path.replace(/([^\/])$/, "$1/").replace(/^https?:\/\//ig, "").toLowerCase(), u = c.proxyRules, p, r = u.length, B = r;
                    for (p = 0; p < r; p++) {
                        var D = u[p].urlPrefix;
                        if (0 === z.indexOf(D)) {
                            if (z.length === D)
                                return -1;
                            B = p;
                            break
                        } else
                            0 === D.indexOf(z) && (B = p + 1)
                    }
                    u.splice(B, 0, v);
                    return B
                }
                ;
                a.getProxyRule = function(v) {
                    var z = c.proxyRules
                      , u = z.length
                      , p = a.urlToObject(v).path.replace(/([^\/])$/, "$1/").replace(/^https?:\/\//ig, "").toLowerCase();
                    for (v = 0; v < u; v++)
                        if (0 === p.indexOf(z[v].urlPrefix)) {
                            var r = z[v];
                            break
                        }
                    return r
                }
                ;
                a.hasSameOrigin = function(v, z, u) {
                    v = v.toLowerCase();
                    z = z.toLowerCase();
                    var p = w.location.href.toLowerCase();
                    v = 0 === v.indexOf("http") ? new b(v) : p = new b(p);
                    z = 0 === z.indexOf("http") ? new b(z) : C.isString(p) ? new b(p) : p;
                    return (u || v.scheme === z.scheme) && v.host === z.host && v.port === z.port
                }
                ;
                a.canUseXhr = function(v, z) {
                    var u = f("esri-phonegap") ? !0 : !1, p = a.hasSameOrigin, r = c.corsEnabledServers, B, D = -1;
                    !u && f("esri-cors") && r && r.length && (u = y.some(r, function(G, A) {
                        G = !G || "object" !== typeof G || G instanceof RegExp ? G : G.host;
                        if (G instanceof RegExp) {
                            if (G.test(v))
                                return D = A,
                                !0
                        } else if (G && (B = 0 !== G.trim().toLowerCase().indexOf("http"),
                        p(v, B ? "http://" + G : G) || B && p(v, "https://" + G)))
                            return D = A,
                            !0;
                        return !1
                    }));
                    return z ? D : u
                }
                ;
                a.getAbsoluteUrl = function(v) {
                    var z = a.getProtocolForWebResource();
                    return C.isString(v) && !e.test(v) ? 0 === v.indexOf("//") ? z + v : 0 === v.indexOf("/") ? z + "//" + w.location.host + v : l._appBaseUrl + v : v
                }
                ;
                a.fixUrl = function(v) {
                    v = C.trim(v);
                    v = a.getAbsoluteUrl(v);
                    v = a.normalizeSlashes(v);
                    v = v.replace(/^(https?:\/\/)(arcgis\.com)/i, "$1www.$2");
                    v = a.downgradeToHTTP(v);
                    return v = a.upgradeToHTTPS(v)
                }
                ;
                a.normalize = function(v) {
                    return a.fixUrl(v)
                }
                ;
                a.normalizeSlashes = function(v) {
                    if (/^https?:\/\//i.test(v)) {
                        var z = v.indexOf("?");
                        if (-1 < z) {
                            var u = v.slice(0, z);
                            var p = v.slice(z + 1)
                        } else
                            u = v;
                        v = u.replace(/\/{2,}/g, "/");
                        v = v.replace("/", "//");
                        p && (v += "?" + p)
                    }
                    return v
                }
                ;
                a.downgradeToHTTP = function(v) {
                    return a.isHTTP(!1) && t.test(v) && a.hasSameOrigin(w.location.href, v, !0) && !a.canUseXhr(v) ? v.replace(t, "http:") : v
                }
                ;
                a.upgradeToHTTPS = function(v) {
                    var z = c.httpsDomains
                      , u = a.isHTTP(!1)
                      , p = a.isHTTP(!0);
                    if (!n.test(v))
                        return v;
                    v = C.trim(v);
                    var r = v.indexOf("/", 7);
                    r = -1 === r ? v : v.slice(0, r);
                    r = r.toLowerCase().slice(7);
                    if (g.test(r))
                        if (k.endsWith(r, ":80"))
                            r = r.slice(0, -3),
                            v = v.replace(":80", "");
                        else
                            return v;
                    if (u && r === w.location.host && (!q.test(v) || !a.canUseXhr(v)))
                        return v;
                    u = !1;
                    if (p && r === w.location.host)
                        u = !0;
                    else if (z)
                        for (var B = 0; B < z.length; B++) {
                            var D = z[B];
                            if (r === D || k.endsWith(r, "." + D)) {
                                u = !0;
                                break
                            }
                        }
                    u || !p || c.alwaysUseProxy || a.getProxyRule(v) || (u = !0);
                    u && (v = v.replace(n, "https:"));
                    return v
                }
                ;
                h = d.widgets.popup;
                var x = [{
                    pattern: /^\s*(https?:\/\/([^\s]+))\s*$/i,
                    label: h.NLS_moreInfo
                }, {
                    pattern: /^\s*(tel:([^\s]+))\s*$/i,
                    label: "${hierPart}"
                }, {
                    pattern: /^\s*(mailto:([^\s]+))\s*$/i,
                    label: "${hierPart}"
                }, {
                    pattern: /^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,
                    appName: "App Studio Player",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,
                    appName: "Collector",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,
                    appName: "Explorer",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,
                    appName: "Navigator",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,
                    appName: "Survey123",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,
                    appName: "Trek2There",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,
                    appName: "Workforce",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(iform:\/\/([^\s]+))\s*$/i,
                    appName: "iForm",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(flow:\/\/([^\s]+))\s*$/i,
                    appName: "FlowFinity",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(lfmobile:\/\/([^\s]+))\s*$/i,
                    appName: "Laserfische",
                    label: h.NLS_openLinkInApp
                }, {
                    pattern: /^\s*(mspbi:\/\/([^\s]+))\s*$/i,
                    appName: "Microsoft Power BI",
                    label: h.NLS_openLinkInApp
                }];
                a.getURIInfo = function(v) {
                    var z;
                    y.some(x, function(u) {
                        u.pattern.test(v) && (z = u);
                        return !!z
                    });
                    return z
                }
                ;
                a.isKnownURI = function(v) {
                    return !!a.getURIInfo(v)
                }
                ;
                f("extend-esri") && (C.mixin(l, a),
                l._getProxyUrl = a.getProxyUrl,
                l._getProxiedUrl = a.addProxy,
                l._hasSameOrigin = a.hasSameOrigin,
                l._canDoXOXHR = a.canUseXhr,
                l._getAbsoluteUrl = a.getAbsoluteUrl,
                l.fixUrl = a.fixUrl);
                return a
            })
        },
        "esri/PluginTarget": function() {
            define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "), function(C, y, b, w, m, l) {
                function k() {
                    y.after(this.constructor._meta, "ctor", this._pluginsHandler, !0);
                    this._plugins = {}
                }
                k.prototype = {
                    addPlugin: function(h, f) {
                        var d = this
                          , a = this._plugins
                          , c = new m;
                        try {
                            C([h], function(e) {
                                h in a ? c.resolve({
                                    id: a[h].declaredId || h.replace(/\//g, ".")
                                }) : (a[h] = e,
                                l(e.add(d, f), function() {
                                    var n = {
                                        id: e.declaredId || h.replace(/\//g, ".")
                                    };
                                    d.emit("plugin-add", n);
                                    c.resolve(n)
                                }, function(n) {
                                    c.reject(n)
                                }))
                            })
                        } catch (e) {
                            c.reject(e)
                        }
                        return c.promise
                    },
                    removePlugin: function(h) {
                        if (h in this._plugins) {
                            var f = this._plugins[h];
                            f.remove(this);
                            delete this._plugins[h];
                            this.emit("plugin-remove", {
                                id: f.declaredId || h.replace(/\//g, ".")
                            })
                        }
                    },
                    _pluginsHandler: function() {
                        var h = this;
                        b.some(arguments, function(f) {
                            if (f && f.plugins && f.plugins instanceof Array) {
                                f = f.plugins;
                                var d;
                                for (d = 0; d < f.length; d++) {
                                    var a = f[d];
                                    var c = a instanceof Object ? a.id : a;
                                    h.addPlugin(c, a.options)
                                }
                                return !0
                            }
                        })
                    }
                };
                return k
            })
        },
        "esri/Color": function() {
            define(["dojo/_base/declare", "dojo/_base/Color", "dojo/has", "./kernel"], function(C, y, b, w) {
                var m = C([y], {
                    declaredClass: "esri.Color"
                });
                m.toJsonColor = function(k) {
                    return k && [k.r, k.g, k.b, 1 < k.a ? k.a : Math.round(255 * k.a)]
                }
                ;
                m.toDojoColor = function(k) {
                    return k && new m([k[0], k[1], k[2], k[3] / 255])
                }
                ;
                var l = "named blendColors fromRgb fromHex fromArray fromString".split(" ");
                for (C = 0; C < l.length; C++)
                    m[l[C]] = y[l[C]];
                b("extend-esri") && (w.Color = m);
                return m
            })
        },
        "esri/promiseList": function() {
            define(["dojo/_base/array", "dojo/Deferred", "dojo/when"], function(C, y, b) {
                var w = C.forEach;
                return function(m) {
                    function l(n, t) {
                        a[t] = n;
                        c.progress([n, t]);
                        0 === --e && c.resolve(a)
                    }
                    var k, h;
                    m instanceof Array ? h = m : m && "object" === typeof m && (k = m);
                    var f = [];
                    if (k) {
                        h = [];
                        for (var d in k)
                            Object.hasOwnProperty.call(k, d) && (f.push(d),
                            h.push(k[d]));
                        var a = {}
                    } else
                        h && (a = []);
                    if (!h || !h.length)
                        return (new y).resolve(a);
                    var c = new y;
                    c.promise.always(function() {
                        a = f = null
                    });
                    var e = h.length;
                    w(h, function(n, t) {
                        k || f.push(t);
                        b(n, function(g) {
                            c.isFulfilled() || l(g, f[t])
                        }, function(g) {
                            c.isFulfilled() || l(g, f[t])
                        })
                    });
                    return c.promise
                }
            })
        },
        "esri/arcade/Dictionary": function() {
            define(["require", "exports", "./ImmutableArray", "./languageUtils", "../geometry/Geometry"], function(C, y, b, w, m) {
                function l(h, f) {
                    void 0 === f && (f = !1);
                    var d = null;
                    if (null !== h)
                        if (w.isNumber(h))
                            d = w.toNumber(h);
                        else if (w.isBoolean(h))
                            d = w.toBoolean(h);
                        else if (w.isString(h))
                            d = w.toString(h);
                        else if (w.isDate(h))
                            d = w.toDate(h);
                        else if (w.isArray(h)) {
                            d = [];
                            for (var a = 0; a < h.length; a++)
                                d.push(l(h[a], f))
                        } else {
                            if (0 === Object.keys(h).length)
                                return null;
                            d = new k;
                            d.immutable = !1;
                            a = 0;
                            for (var c = Object.keys(h); a < c.length; a++) {
                                var e = c[a]
                                  , n = h[e];
                                void 0 !== n && d.setField(e, l(n, f))
                            }
                            d.immutable = f
                        }
                    return d
                }
                var k = function() {
                    function h(f) {
                        this.declaredClass = "esri.arcade.Dictionary";
                        this.attributes = null;
                        this.plain = !1;
                        this.immutable = !0;
                        this.attributes = f instanceof h ? f.attributes : void 0 === f ? {} : null === f ? {} : f
                    }
                    h.prototype.field = function(f) {
                        var d = f.toLowerCase()
                          , a = this.attributes[f];
                        if (void 0 !== a)
                            return a;
                        for (var c in this.attributes)
                            if (c.toLowerCase() === d)
                                return this.attributes[c];
                        throw Error("Field not Found : " + f);
                    }
                    ;
                    h.prototype.setField = function(f, d) {
                        if (this.immutable)
                            throw Error("Dictionary is Immutable");
                        var a = f.toLowerCase();
                        if (void 0 === this.attributes[f])
                            for (var c in this.attributes)
                                if (c.toLowerCase() === a) {
                                    this.attributes[c] = d;
                                    return
                                }
                        this.attributes[f] = d
                    }
                    ;
                    h.prototype.hasField = function(f) {
                        var d = f.toLowerCase();
                        if (void 0 !== this.attributes[f])
                            return !0;
                        for (var a in this.attributes)
                            if (a.toLowerCase() === d)
                                return !0;
                        return !1
                    }
                    ;
                    h.prototype.keys = function() {
                        var f = [], d;
                        for (d in this.attributes)
                            f.push(d);
                        return f = f.sort()
                    }
                    ;
                    h.prototype.castToText = function() {
                        var f = "", d;
                        for (d in this.attributes) {
                            "" !== f && (f += ",");
                            var a = this.attributes[d];
                            null == a ? f += JSON.stringify(d) + ":null" : w.isBoolean(a) || w.isNumber(a) || w.isString(a) ? f += JSON.stringify(d) + ":" + JSON.stringify(a) : a instanceof m ? f += JSON.stringify(d) + ":" + w.toStringExplicit(a) : a instanceof b ? f += JSON.stringify(d) + ":" + w.toStringExplicit(a) : a instanceof Array ? f += JSON.stringify(d) + ":" + w.toStringExplicit(a) : a instanceof Date ? f += JSON.stringify(d) + ":" + JSON.stringify(a) : null !== a && "object" === typeof a && void 0 !== a.castToText && (f += JSON.stringify(d) + ":" + a.castToText())
                        }
                        return "{" + f + "}"
                    }
                    ;
                    h.convertObjectToArcadeDictionary = function(f, d) {
                        void 0 === d && (d = !0);
                        var a = new h;
                        a.immutable = !1;
                        for (var c in f) {
                            var e = f[c];
                            void 0 !== e && a.setField(c.toString(), l(e))
                        }
                        a.immutable = d;
                        return a
                    }
                    ;
                    return h
                }();
                return k
            })
        },
        "esri/arcade/ImmutableArray": function() {
            define(["require", "exports"], function(C, y) {
                return function() {
                    function b(w) {
                        void 0 === w && (w = []);
                        this._elements = w
                    }
                    b.prototype.length = function() {
                        return this._elements.length
                    }
                    ;
                    b.prototype.get = function(w) {
                        return this._elements[w]
                    }
                    ;
                    b.prototype.toArray = function() {
                        for (var w = [], m = 0; m < this.length(); m++)
                            w.push(this.get(m));
                        return w
                    }
                    ;
                    return b
                }()
            })
        },
        "esri/arcade/languageUtils": function() {
            define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline dojo/number".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n) {
                function t(K, Z, pa) {
                    return "" === Z || null === Z || void 0 === Z || Z === pa || Z === pa ? K : K = K.split(Z).join(pa)
                }
                function g(K) {
                    return K instanceof ia || K instanceof b || K instanceof qa
                }
                function q(K) {
                    return x(K) || z(K) || r(K) || v(K) || null === K || K === y.voidOperation || "number" === typeof K ? !0 : !1
                }
                function x(K) {
                    return "string" === typeof K || K instanceof String
                }
                function v(K) {
                    return "boolean" === typeof K
                }
                function z(K) {
                    return "number" === typeof K
                }
                function u(K) {
                    return K instanceof Array
                }
                function p(K) {
                    return K instanceof w
                }
                function r(K) {
                    return K instanceof Date
                }
                function B(K, Z) {
                    if (!1 === isNaN(K)) {
                        if (void 0 === Z || null === Z || "" === Z)
                            return K.toString();
                        Z = t(Z, "\u2030", "");
                        Z = t(Z, "\u00a4", "");
                        return n.format(K, {
                            pattern: Z
                        })
                    }
                    return K.toString()
                }
                function D(K, Z) {
                    K = y.MomentLibrary.Moment(K);
                    return void 0 === Z || null === Z || "" === Z ? K.format() : K.format(G(Z))
                }
                function G(K) {
                    return K.replace(/(LTS)|L|l/g, function(Z) {
                        return "[" + Z + "]"
                    })
                }
                function A(K, Z, pa) {
                    switch (pa) {
                    case "\x3e":
                        return K > Z;
                    case "\x3c":
                        return K < Z;
                    case "\x3e\x3d":
                        return K >= Z;
                    case "\x3c\x3d":
                        return K <= Z
                    }
                    return !1
                }
                function E(K, Z) {
                    if (K === Z || null === K && Z === y.voidOperation || null === Z && K === y.voidOperation)
                        return !0;
                    if (r(K) && r(Z))
                        return K.getTime() === Z.getTime();
                    if (K instanceof m || K instanceof l)
                        return K.equalityTest(Z);
                    if (K instanceof a && Z instanceof a) {
                        var pa = K.getCacheValue("_arcadeCacheId")
                          , L = Z.getCacheValue("_arcadeCacheId");
                        if (void 0 !== pa && null !== pa)
                            return pa === L
                    }
                    return void 0 !== K && void 0 !== Z && null !== K && null !== Z && "object" === typeof K && "object" === typeof Z && (K._arcadeCacheId === Z._arcadeCacheId && void 0 !== K._arcadeCacheId && null !== K._arcadeCacheId || K._underlyingGraphic === Z._underlyingGraphic && void 0 !== K._underlyingGraphic && null !== K._underlyingGraphic) ? !0 : !1
                }
                function H(K, Z) {
                    if (x(K))
                        return K;
                    if (null === K)
                        return "";
                    if (z(K))
                        return B(K, Z);
                    if (v(K))
                        return K.toString();
                    if (r(K))
                        return D(K, Z);
                    if (K instanceof f)
                        return JSON.stringify(K.toJson());
                    if (u(K)) {
                        Z = [];
                        for (var pa = 0; pa < K.length; pa++)
                            Z[pa] = O(K[pa]);
                        return "[" + Z.join(",") + "]"
                    }
                    if (K instanceof w) {
                        Z = [];
                        for (pa = 0; pa < K.length(); pa++)
                            Z[pa] = O(K.get(pa));
                        return "[" + Z.join(",") + "]"
                    }
                    return null !== K && "object" === typeof K && void 0 !== K.castToText ? K.castToText() : g(K) ? "object, Function" : ""
                }
                function J(K, Z) {
                    if (x(K))
                        return K;
                    if (null === K)
                        return "";
                    if (z(K))
                        return B(K, Z);
                    if (v(K))
                        return K.toString();
                    if (r(K))
                        return D(K, Z);
                    if (K instanceof f)
                        return K instanceof h ? '{"xmin":' + K.xmin.toString() + ',"ymin":' + K.ymin.toString() + "," + (K.hasZ ? '"zmin":' + K.zmin.toString() + "," : "") + (K.hasM ? '"mmin":' + K.mmin.toString() + "," : "") + '"xmax":' + K.xmax.toString() + ',"ymax":' + K.ymax.toString() + "," + (K.hasZ ? '"zmax":' + K.zmax.toString() + "," : "") + (K.hasM ? '"mmax":' + K.mmax.toString() + "," : "") + '"spatialReference":' + da(K.spatialReference) + "}" : da(K.toJson(), function(L, R) {
                            return L.key === R.key ? 0 : "spatialReference" === L.key ? 1 : "spatialReference" === R.key || L.key < R.key ? -1 : L.key > R.key ? 1 : 0
                        });
                    if (u(K)) {
                        Z = [];
                        for (var pa = 0; pa < K.length; pa++)
                            Z[pa] = O(K[pa]);
                        return "[" + Z.join(",") + "]"
                    }
                    if (K instanceof w) {
                        Z = [];
                        for (pa = 0; pa < K.length(); pa++)
                            Z[pa] = O(K.get(pa));
                        return "[" + Z.join(",") + "]"
                    }
                    return null !== K && "object" === typeof K && void 0 !== K.castToText ? K.castToText() : g(K) ? "object, Function" : ""
                }
                function O(K) {
                    return null === K ? "null" : v(K) || z(K) || x(K) ? JSON.stringify(K) : K instanceof f || K instanceof w || K instanceof Array ? J(K) : K instanceof Date ? JSON.stringify(D(K, "")) : null !== K && "object" === typeof K && void 0 !== K.castToText ? K.castToText() : "null"
                }
                function V(K, Z) {
                    return z(K) ? K : null === K || "" === K ? 0 : r(K) ? NaN : v(K) ? K ? 1 : 0 : u(K) || "" === K || void 0 === K ? NaN : void 0 !== Z && x(K) ? (Z = t(Z, "\u2030", ""),
                    Z = t(Z, "\u00a4", ""),
                    n.parse(K, {
                        pattern: Z
                    })) : K === y.voidOperation ? 0 : Number(K)
                }
                function aa(K, Z) {
                    var pa;
                    Z.fields.some(function(L) {
                        L.name.toLowerCase() === K.toLowerCase() && (pa = L.domain);
                        return !!pa
                    });
                    return pa
                }
                function da(K, Z) {
                    Z || (Z = {});
                    "function" === typeof Z && (Z = {
                        cmp: Z
                    });
                    var pa = "boolean" === typeof Z.cycles ? Z.cycles : !1
                      , L = Z.cmp && function(ha) {
                        return function(na) {
                            return function(ta, xa) {
                                return ha({
                                    key: ta,
                                    value: na[ta]
                                }, {
                                    key: xa,
                                    value: na[xa]
                                })
                            }
                        }
                    }(Z.cmp)
                      , R = [];
                    return function ta(na) {
                        na && na.toJson && "function" === typeof na.toJson && (na = na.toJson());
                        if (void 0 !== na) {
                            if ("number" === typeof na)
                                return isFinite(na) ? "" + na : "null";
                            if ("object" !== typeof na)
                                return JSON.stringify(na);
                            var xa;
                            if (Array.isArray(na)) {
                                var Aa = "[";
                                for (xa = 0; xa < na.length; xa++)
                                    xa && (Aa += ","),
                                    Aa += ta(na[xa]) || "null";
                                return Aa + "]"
                            }
                            if (null === na)
                                return "null";
                            if (-1 !== R.indexOf(na)) {
                                if (pa)
                                    return JSON.stringify("__cycle__");
                                throw new TypeError("Converting circular structure to JSON");
                            }
                            var ca = R.push(na) - 1
                              , ja = Object.keys(na).sort(L && L(na));
                            Aa = "";
                            for (xa = 0; xa < ja.length; xa++) {
                                var X = ja[xa]
                                  , oa = ta(na[X]);
                                oa && (Aa && (Aa += ","),
                                Aa += JSON.stringify(X) + ":" + oa)
                            }
                            R.splice(ca, 1);
                            return "{" + Aa + "}"
                        }
                    }(K)
                }
                function ea(K, Z) {
                    if (Z instanceof a)
                        K.push([Z.x, Z.y]);
                    else
                        throw Error("Invalid Argument");
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.binaryOperator = y.MomentLibrary = y.tick = y.toStringArray = y.autoCastArrayOfPointsToMultiPoint = y.autoCastArrayOfPointsToPolyline = y.autoCastArrayOfPointsToPolygon = y.autoCastFeatureToGeometry = y.stableStringify = y.getDomain = y.getDomainCode = y.getDomainValue = y.fixNullGeometry = y.fixSpatialReference = y.toBoolean = y.toDateM = y.toDate = y.toNumber = y.toStringExplicit = y.toNumberArray = y.toString = y.equalityTest = y.greaterThanLessThan = y.standardiseDateFormat = y.formatDate = y.formatNumber = y.generateUUID = y.pcCheck = y.isDate = y.isImmutableArray = y.isFeatureSetCollection = y.isFeatureSet = y.isArray = y.isInteger = y.isNumber = y.isBoolean = y.isString = y.defaultUndefined = y.isSimpleType = y.isFunctionParameter = y.multiReplace = y.continueResult = y.breakResult = y.voidOperation = y.SizzleFunction = y.ReturnResult = y.ImplicitResult = y.NativeFunction = y.SizzleFunctionE = y.NativeFunctionE = y.ImplicitResultE = y.ReturnResultE = void 0;
                C = function() {
                    return function(K) {
                        this.value = K
                    }
                }();
                y.ReturnResultE = C;
                var Y = function() {
                    return function(K) {
                        this.value = K
                    }
                }();
                y.ImplicitResultE = Y;
                var ia = function() {
                    return function(K) {
                        this.fn = K
                    }
                }();
                y.NativeFunctionE = ia;
                var qa = function() {
                    return function(K) {
                        this.fn = K
                    }
                }();
                y.SizzleFunctionE = qa;
                y.NativeFunction = ia;
                y.ImplicitResult = Y;
                y.ReturnResult = C;
                y.SizzleFunction = qa;
                y.voidOperation = {
                    type: "VOID"
                };
                y.breakResult = {
                    type: "BREAK"
                };
                y.continueResult = {
                    type: "CONTINUE"
                };
                y.multiReplace = t;
                y.isFunctionParameter = g;
                y.isSimpleType = q;
                y.defaultUndefined = function(K, Z) {
                    return void 0 === K ? Z : K
                }
                ;
                y.isString = x;
                y.isBoolean = v;
                y.isNumber = z;
                y.isInteger = function(K) {
                    return "number" === typeof K && isFinite(K) && Math.floor(K) === K
                }
                ;
                y.isArray = u;
                y.isFeatureSet = function(K) {
                    return !0 === (K && K.declaredRootClass && "esri.arcade.featureset.support.FeatureSet" === K.declaredRootClass)
                }
                ;
                y.isFeatureSetCollection = function(K) {
                    return !0 === (K && K.declaredRootClass && "esri.arcade.featureSetCollection" === K.declaredRootClass)
                }
                ;
                y.isImmutableArray = p;
                y.isDate = r;
                y.pcCheck = function(K, Z, pa) {
                    if (K.length < Z || K.length > pa)
                        throw Error("Function called with wrong number of Parameters");
                }
                ;
                y.generateUUID = function() {
                    var K = (new Date).getTime();
                    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(Z) {
                        var pa = (K + 16 * Math.random()) % 16 | 0;
                        K = Math.floor(K / 16);
                        return ("x" === Z ? pa : pa & 3 | 8).toString(16)
                    })
                }
                ;
                y.formatNumber = B;
                y.formatDate = D;
                y.standardiseDateFormat = G;
                y.greaterThanLessThan = function(K, Z, pa) {
                    if (null === K) {
                        if (null === Z || Z === y.voidOperation)
                            return A(null, null, pa);
                        if (z(Z))
                            return A(0, Z, pa);
                        if (x(Z) || v(Z))
                            return A(0, V(Z), pa);
                        if (r(Z))
                            return A(0, Z.getTime(), pa)
                    }
                    if (K === y.voidOperation) {
                        if (null === Z || Z === y.voidOperation)
                            return A(null, null, pa);
                        if (z(Z))
                            return A(0, Z, pa);
                        if (x(Z) || v(Z))
                            return A(0, V(Z), pa);
                        if (r(Z))
                            return A(0, Z.getTime(), pa)
                    } else if (z(K)) {
                        if (z(Z))
                            return A(K, Z, pa);
                        if (v(Z))
                            return A(K, V(Z), pa);
                        if (null === Z || Z === y.voidOperation)
                            return A(K, 0, pa);
                        if (x(Z))
                            return A(K, V(Z), pa);
                        if (r(Z))
                            return A(K, Z.getTime(), pa)
                    } else if (x(K)) {
                        if (x(Z))
                            return A(H(K), H(Z), pa);
                        if (r(Z))
                            return A(V(K), Z.getTime(), pa);
                        if (z(Z))
                            return A(V(K), Z, pa);
                        if (null === Z || Z === y.voidOperation)
                            return A(V(K), 0, pa);
                        if (v(Z))
                            return A(V(K), V(Z), pa)
                    } else if (r(K)) {
                        if (r(Z))
                            return A(K, Z, pa);
                        if (null === Z || Z === y.voidOperation)
                            return A(K.getTime(), 0, pa);
                        if (z(Z))
                            return A(K.getTime(), Z, pa);
                        if (v(Z) || x(Z))
                            return A(K.getTime(), V(Z), pa)
                    } else if (v(K)) {
                        if (v(Z))
                            return A(K, Z, pa);
                        if (z(Z))
                            return A(V(K), V(Z), pa);
                        if (r(Z))
                            return A(V(K), Z.getTime(), pa);
                        if (null === Z || Z === y.voidOperation)
                            return A(V(K), 0, pa);
                        if (x(Z))
                            return A(V(K), V(Z), pa)
                    }
                    return !E(K, Z) || "\x3c\x3d" !== pa && "\x3e\x3d" !== pa ? !1 : !0
                }
                ;
                y.equalityTest = E;
                y.toString = H;
                y.toNumberArray = function(K) {
                    var Z = [];
                    if (!1 === u(K))
                        return null;
                    if (K instanceof w) {
                        for (var pa = 0; pa < K.length(); pa++)
                            Z[pa] = V(K.get(pa));
                        return Z
                    }
                    for (pa = 0; pa < K.length; pa++)
                        Z[pa] = V(K[pa]);
                    return Z
                }
                ;
                y.toStringExplicit = J;
                y.toNumber = V;
                y.toDate = function(K, Z) {
                    return r(K) ? K : x(K) && (K = y.MomentLibrary.Moment(K, [void 0 === Z || null === Z || "" === Z ? y.MomentLibrary.Moment.ISO_8601 : Z]),
                    K.isValid()) ? K.toDate() : null
                }
                ;
                y.toDateM = function(K, Z) {
                    return r(K) ? y.MomentLibrary.Moment(K) : x(K) && (K = y.MomentLibrary.Moment(K, [void 0 === Z || null === Z || "" === Z ? y.MomentLibrary.Moment.ISO_8601 : Z]),
                    K.isValid()) ? K : null
                }
                ;
                y.toBoolean = function(K) {
                    return v(K) ? K : x(K) ? (K = K.toLowerCase(),
                    "true" === K ? !0 : !1) : z(K) ? 0 === K || isNaN(K) ? !1 : !0 : !1
                }
                ;
                y.fixSpatialReference = function(K, Z) {
                    if (null === K || void 0 === K)
                        return null;
                    if (null === K.spatialReference || void 0 === K.spatialReference)
                        K.spatialReference = Z;
                    return K
                }
                ;
                y.fixNullGeometry = function(K) {
                    if (null === K)
                        return null;
                    if (K instanceof a)
                        return "NaN" === K.x || null === K.x || isNaN(K.x) ? null : K;
                    if (K instanceof c) {
                        if (0 === K.rings.length)
                            return null;
                        for (var Z = 0, pa = K.rings; Z < pa.length; Z++) {
                            var L = pa[Z];
                            if (0 < L.length)
                                return K
                        }
                        return null
                    }
                    if (K instanceof e) {
                        if (0 === K.paths.length)
                            return null;
                        Z = 0;
                        for (pa = K.paths; Z < pa.length; Z++)
                            if (L = pa[Z],
                            0 < L.length)
                                return K;
                        return null
                    }
                    return K instanceof d ? 0 === K.points.length ? null : K : K instanceof h ? "NaN" === K.xmin || null === K.xmin || isNaN(K.xmin) ? null : K : null
                }
                ;
                y.getDomainValue = function(K, Z) {
                    if (!K || !K.domain)
                        return Z;
                    var pa = null;
                    if ("string" === K.field.type || "esriFieldTypeString" === K.field.type)
                        Z = H(Z);
                    else {
                        if (null === Z || void 0 === Z)
                            return null;
                        if ("" === Z)
                            return Z;
                        Z = V(Z)
                    }
                    for (var L = 0; L < K.domain.codedValues.length; L++) {
                        var R = K.domain.codedValues[L];
                        R.code === Z && (pa = R)
                    }
                    return null === pa ? Z : pa.name
                }
                ;
                y.getDomainCode = function(K, Z) {
                    if (!K || !K.domain)
                        return Z;
                    var pa = null;
                    Z = H(Z);
                    for (var L = 0; L < K.domain.codedValues.length; L++) {
                        var R = K.domain.codedValues[L];
                        R.name === Z && (pa = R)
                    }
                    return null === pa ? Z : pa.code
                }
                ;
                y.getDomain = function(K, Z, pa, L) {
                    void 0 === pa && (pa = null);
                    if (!Z || !Z.fields)
                        return null;
                    for (var R = null, ha = 0; ha < Z.fields.length; ha++) {
                        var na = Z.fields[ha];
                        na.name.toLowerCase() === K.toString().toLowerCase() && (R = na)
                    }
                    if (null === R)
                        throw Error("Field not found");
                    var ta, xa;
                    L || (L = pa && Z.typeIdField && pa._field(Z.typeIdField));
                    null != L && Z.types.some(function(Aa) {
                        return Aa.id === L ? ((ta = Aa.domains && Aa.domains[R.name]) && "inherited" === ta.type && (ta = aa(R.name, Z),
                        xa = !0),
                        !0) : !1
                    });
                    xa || ta || (ta = aa(K, Z));
                    return {
                        field: R,
                        domain: ta
                    }
                }
                ;
                y.stableStringify = da;
                y.autoCastFeatureToGeometry = function(K) {
                    if (null === K)
                        return null;
                    for (var Z = [], pa = 0; pa < K.length; pa++) {
                        var L = K[pa];
                        L && (L.declaredClass && "esri.arcade.Feature" === L.declaredClass || "FeatureSetReader" === L.type) ? Z.push(L.geometry()) : Z.push(L)
                    }
                    return Z
                }
                ;
                y.autoCastArrayOfPointsToPolygon = function(K, Z) {
                    if (u(K) || p(K)) {
                        var pa = !1
                          , L = !1
                          , R = [];
                        if (u(K)) {
                            for (var ha = 0; ha < K.length; ha++) {
                                var na = K[ha];
                                ea(R, na)
                            }
                            0 < R.length && (Z = K[0].spatialReference,
                            pa = K[0].hasZ,
                            L = K[0].hasM)
                        } else if (K instanceof l)
                            R = K._elements,
                            0 < R.length && (pa = K._hasZ,
                            L = K._hasM,
                            Z = K.get(0).spatialReference);
                        else if (p(K)) {
                            ha = 0;
                            for (var ta = K.toArray(); ha < ta.length; ha++)
                                na = ta[ha],
                                ea(R, na);
                            0 < R.length && (Z = K.get(0).spatialReference,
                            pa = !0 === K.get(0).hasZ,
                            L = !0 === K.get(0).hasM)
                        } else
                            throw Error("Invalid Argument");
                        if (0 === R.length)
                            return null;
                        !1 === (new c({
                            rings: [],
                            spatialReference: {
                                wkid: 4326
                            }
                        })).isClockwise(R) && (R = R.slice(0).reverse());
                        return new c({
                            rings: [R],
                            spatialReference: Z,
                            hasZ: pa,
                            hasM: L
                        })
                    }
                    return K
                }
                ;
                y.autoCastArrayOfPointsToPolyline = function(K, Z) {
                    if (u(K) || p(K)) {
                        var pa = !1
                          , L = !1
                          , R = [];
                        if (u(K)) {
                            for (var ha = 0; ha < K.length; ha++) {
                                var na = K[ha];
                                ea(R, na)
                            }
                            0 < R.length && (Z = K[0].spatialReference,
                            pa = !0 === K[0].hasZ,
                            L = !0 === K[0].hasM)
                        } else if (K instanceof l)
                            R = K._elements,
                            0 < R.length && (pa = K._hasZ,
                            L = K._hasM,
                            Z = K.get(0).spatialReference);
                        else if (p(K)) {
                            ha = 0;
                            for (var ta = K.toArray(); ha < ta.length; ha++)
                                na = ta[ha],
                                ea(R, na);
                            0 < R.length && (Z = K.get(0).spatialReference,
                            pa = !0 === K.get(0).hasZ,
                            L = !0 === K.get(0).hasM)
                        }
                        return 0 === R.length ? null : new e({
                            paths: [R],
                            spatialReference: Z,
                            hasZ: pa,
                            hasM: L
                        })
                    }
                    return K
                }
                ;
                y.autoCastArrayOfPointsToMultiPoint = function(K, Z) {
                    if (u(K) || p(K)) {
                        var pa = !1
                          , L = !1
                          , R = [];
                        if (u(K)) {
                            for (var ha = 0; ha < K.length; ha++) {
                                var na = K[ha];
                                ea(R, na)
                            }
                            0 < R.length && (Z = K[0].spatialReference,
                            pa = !0 === K[0].hasZ,
                            L = !0 === K[0].hasM)
                        } else if (K instanceof l)
                            R = K._elements,
                            0 < R.length && (pa = K._hasZ,
                            L = K._hasM,
                            Z = K.get(0).spatialReference);
                        else if (p(K)) {
                            ha = 0;
                            for (var ta = K.toArray(); ha < ta.length; ha++)
                                na = ta[ha],
                                ea(R, na);
                            0 < R.length && (Z = K.get(0).spatialReference,
                            pa = !0 === K.get(0).hasZ,
                            L = !0 === K.get(0).hasM)
                        }
                        return 0 === R.length ? null : new d({
                            points: R,
                            spatialReference: Z,
                            hasZ: pa,
                            hasM: L
                        })
                    }
                    return K
                }
                ;
                y.toStringArray = function(K, Z) {
                    void 0 === Z && (Z = !1);
                    var pa = [];
                    if (null === K)
                        return pa;
                    if (!0 === u(K)) {
                        for (var L = 0; L < K.length; L++) {
                            var R = H(K[L]);
                            "" === R && !0 !== Z || pa.push(R)
                        }
                        return pa
                    }
                    if (K instanceof w) {
                        for (L = 0; L < K.length(); L++)
                            R = H(K.get(L)),
                            "" === R && !0 !== Z || pa.push(R);
                        return pa
                    }
                    return q(K) ? (R = H(K),
                    "" === R && !0 !== Z || pa.push(R),
                    pa) : []
                }
                ;
                var wa = 0;
                y.tick = function(K) {
                    wa++;
                    return 0 === wa % 100 ? (wa = 0,
                    k.create(function(Z) {
                        setTimeout(function() {
                            Z(K)
                        }, 0)
                    })) : K
                }
                ;
                y.MomentLibrary = {
                    Moment: null
                };
                y.binaryOperator = function(K, Z, pa) {
                    switch (pa) {
                    case "\x26":
                        return K & Z;
                    case "|":
                        return K | Z;
                    case "^":
                        return K ^ Z;
                    case "\x3c\x3c":
                        return K << Z;
                    case "\x3e\x3e":
                        return K >> Z;
                    case "\x3e\x3e\x3e":
                        return K >>> Z
                    }
                }
            })
        },
        "esri/arcade/FunctionWrapper": function() {
            define(["require", "exports"], function(C, y) {
                return function() {
                    return function(b, w) {
                        this.context = this.definition = null;
                        this.definition = b;
                        this.context = w
                    }
                }()
            })
        },
        "esri/arcade/ImmutablePathArray": function() {
            var C = this && this.__extends || function() {
                var y = function(b, w) {
                    y = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(m, l) {
                        m.__proto__ = l
                    }
                    || function(m, l) {
                        for (var k in l)
                            l.hasOwnProperty(k) && (m[k] = l[k])
                    }
                    ;
                    return y(b, w)
                };
                return function(b, w) {
                    function m() {
                        this.constructor = b
                    }
                    y(b, w);
                    b.prototype = null === w ? Object.create(w) : (m.prototype = w.prototype,
                    new m)
                }
            }();
            define(["require", "exports", "./ImmutableArray", "./ImmutablePointArray"], function(y, b, w, m) {
                return function(l) {
                    function k(h, f, d, a, c) {
                        h = l.call(this, h) || this;
                        h._lazyPath = [];
                        h._hasZ = !1;
                        h._hasM = !1;
                        h._hasZ = d;
                        h._hasM = a;
                        h._spRef = f;
                        h._cacheId = c;
                        return h
                    }
                    C(k, l);
                    k.prototype.get = function(h) {
                        if (void 0 === this._lazyPath[h]) {
                            var f = this._elements[h];
                            if (void 0 === f)
                                return;
                            this._lazyPath[h] = new m(f,this._spRef,this._hasZ,this._hasM,this._cacheId,h)
                        }
                        return this._lazyPath[h]
                    }
                    ;
                    k.prototype.equalityTest = function(h) {
                        return h === this ? !0 : null === h || !1 === h instanceof k ? !1 : h.getUniqueHash() === this.getUniqueHash()
                    }
                    ;
                    k.prototype.getUniqueHash = function() {
                        return this._cacheId.toString()
                    }
                    ;
                    return k
                }(w)
            })
        },
        "esri/arcade/ImmutablePointArray": function() {
            var C = this && this.__extends || function() {
                var y = function(b, w) {
                    y = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(m, l) {
                        m.__proto__ = l
                    }
                    || function(m, l) {
                        for (var k in l)
                            l.hasOwnProperty(k) && (m[k] = l[k])
                    }
                    ;
                    return y(b, w)
                };
                return function(b, w) {
                    function m() {
                        this.constructor = b
                    }
                    y(b, w);
                    b.prototype = null === w ? Object.create(w) : (m.prototype = w.prototype,
                    new m)
                }
            }();
            define(["require", "exports", "./ImmutableArray", "../geometry/Point"], function(y, b, w, m) {
                return function(l) {
                    function k(h, f, d, a, c, e) {
                        h = l.call(this, h) || this;
                        h._lazyPt = [];
                        h._hasZ = !1;
                        h._hasM = !1;
                        h._spRef = f;
                        h._hasZ = d;
                        h._hasM = a;
                        h._cacheId = c;
                        h._partId = e;
                        return h
                    }
                    C(k, l);
                    k.prototype.get = function(h) {
                        if (void 0 === this._lazyPt[h]) {
                            var f = this._elements[h];
                            if (void 0 === f)
                                return;
                            var d = this._hasZ
                              , a = this._hasM
                              , c = null;
                            c = d && !a ? new m(f[0],f[1],f[2],void 0,this._spRef) : a && !d ? new m(f[0],f[1],void 0,f[2],this._spRef) : d && a ? new m(f[0],f[1],f[2],f[3],this._spRef) : new m(f[0],f[1],this._spRef);
                            c.setCacheValue("_arcadeCacheId", this._cacheId.toString() + "-" + this._partId.toString() + "-" + h.toString());
                            this._lazyPt[h] = c
                        }
                        return this._lazyPt[h]
                    }
                    ;
                    k.prototype.equalityTest = function(h) {
                        return h === this ? !0 : null === h || !1 === h instanceof k ? !1 : h.getUniqueHash() === this.getUniqueHash()
                    }
                    ;
                    k.prototype.getUniqueHash = function() {
                        return this._cacheId.toString() + "-" + this._partId.toString()
                    }
                    ;
                    return k
                }(w)
            })
        },
        "esri/arcade/polyfill/promiseUtils": function() {
            define(["require", "exports", "dojo/Deferred", "dojo/promise/all"], function(C, y, b, w) {
                function m(f, d) {
                    var a = new b(d);
                    f(function(c) {
                        return h(c).then(a.resolve)
                    }, a.reject);
                    return a.promise
                }
                function l(f) {
                    if (f) {
                        if ("function" !== typeof f.forEach) {
                            var d = Object.keys(f)
                              , a = d.map(function(e) {
                                return f[e]
                            });
                            return l(a).then(function(e) {
                                var n = {};
                                d.forEach(function(t, g) {
                                    return n[t] = e[g]
                                });
                                return n
                            })
                        }
                        var c = null;
                        return m(function(e, n) {
                            var t = []
                              , g = f.length;
                            0 === g && e(t);
                            f.forEach(function(q) {
                                var x = {
                                    promise: q
                                };
                                t.push(x);
                                q.then(function(v) {
                                    x.value = v
                                }).catch(function(v) {
                                    x.error = v
                                }).then(function() {
                                    --g;
                                    0 === g && (c ? n(Error("AbortError")) : e(t))
                                })
                            })
                        }, function(e) {
                            c = e || "Invocation cancellation";
                            f.forEach(function(n) {
                                return n.cancel(e)
                            })
                        })
                    }
                }
                function k(f) {
                    void 0 === f && (f = void 0);
                    var d = new b;
                    d.resolve(f);
                    return d.promise
                }
                function h(f) {
                    return f && "function" === typeof f.then ? f : k(f)
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.createResolver = y.when = y.isPromiseLike = y.wrapCallback = y.timeout = y.after = y.resolve = y.reject = y.first = y.eachAlwaysValues = y.eachAlways = y.createDeferred = y.create = y.filter = y.all = void 0;
                y.all = function(f) {
                    return w(f)
                }
                ;
                y.filter = function(f, d) {
                    var a = f.slice();
                    return w(f.map(function(c, e) {
                        return d(c, e)
                    })).then(function(c) {
                        return a.filter(function(e, n) {
                            return c[n]
                        })
                    })
                }
                ;
                y.create = m;
                y.createDeferred = function(f) {
                    var d = null;
                    f = m(function(a, c) {
                        d = {
                            resolve: a,
                            reject: c
                        }
                    }, f);
                    d.promise = f;
                    d.cancel = function() {
                        d.reject(Error("AbortError"))
                    }
                    ;
                    return d
                }
                ;
                y.eachAlways = l;
                y.eachAlwaysValues = function(f) {
                    return l(f).then(function(d) {
                        return d.filter(function(a) {
                            return !!a.value
                        }).map(function(a) {
                            return a.value
                        })
                    })
                }
                ;
                y.first = function(f) {
                    return f && f.length ? m(function(d, a) {
                        for (var c = 0; c < f.length; c++)
                            f[c].then(d, a)
                    }) : k()
                }
                ;
                y.reject = function(f) {
                    var d = new b;
                    d.reject(f);
                    return d.promise
                }
                ;
                y.resolve = k;
                y.after = function(f, d) {
                    void 0 === d && (d = void 0);
                    var a = 0;
                    return m(function(c) {
                        a = setTimeout(function() {
                            c(d)
                        }, f)
                    }, function() {
                        a && (clearTimeout(a),
                        a = 0)
                    })
                }
                ;
                y.timeout = function(f, d, a) {
                    var c = 0
                      , e = new b(f.cancel);
                    f.then(function(n) {
                        e.isFulfilled() || (e.resolve(n),
                        c && (clearTimeout(c),
                        c = 0))
                    });
                    f.catch(function(n) {
                        e.isFulfilled() || (e.reject(n),
                        c && (clearTimeout(c),
                        c = 0))
                    });
                    c = setTimeout(function() {
                        e.reject(a || Error("promiseUtils:timeout"))
                    }, d);
                    return e.promise
                }
                ;
                y.wrapCallback = function(f) {
                    var d = !1;
                    return m(function() {
                        f(function(a) {
                            d || k(a)
                        })
                    }, function() {
                        return d = !0
                    })
                }
                ;
                y.isPromiseLike = function(f) {
                    return f && "function" === typeof f.then
                }
                ;
                y.when = h;
                y.createResolver = function(f) {
                    var d, a;
                    f = m(function(e, n) {
                        d = e;
                        a = n
                    }, f);
                    var c = function(e) {
                        d(e)
                    };
                    c.resolve = function(e) {
                        return d(e)
                    }
                    ;
                    c.reject = function(e) {
                        return a(e)
                    }
                    ;
                    c.promise = f;
                    return c
                }
            })
        },
        "esri/geometry/Multipoint": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                function a() {}
                function c() {}
                l = {
                    type: "multipoint",
                    points: null
                };
                C = C(k, {
                    declaredClass: "esri.geometry.Multipoint",
                    type: "multipoint",
                    points: null,
                    constructor: function(e) {
                        this.points = [];
                        e && (e.points ? m.mixin(this, e) : this.spatialReference = e,
                        this.spatialReference && (this.spatialReference = d.createSpatialReference(this.spatialReference)));
                        this.verifySR()
                    },
                    addPoint: function(e) {
                        this.clearCache();
                        y.isArray(e) ? this.points.push(e) : this.points.push([e.x, e.y]);
                        return this
                    },
                    removePoint: function(e) {
                        if (this._validateInputs(e))
                            return this.clearCache(),
                            new h(this.points.splice(e, 1)[0],this.spatialReference)
                    },
                    getExtent: function() {
                        var e = this.getCacheValue("_extent");
                        if (e)
                            return new f(e);
                        e = this.points;
                        var n = e.length;
                        if (n) {
                            var t = e[0], g, q, x = g = t[0], v = q = t[1], z = Math.min, u = Math.max, p = this.spatialReference, r;
                            for (r = 0; r < n; r++) {
                                t = e[r];
                                var B = t[0];
                                t = t[1];
                                x = z(x, B);
                                v = z(v, t);
                                g = u(g, B);
                                q = u(q, t)
                            }
                            e = {
                                xmin: x,
                                ymin: v,
                                xmax: g,
                                ymax: q,
                                spatialReference: p ? p.toJson() : null
                            };
                            this.setCacheValue("_extent", e);
                            return new f(e)
                        }
                    },
                    _validateInputs: function(e) {
                        return null === e || 0 > e || e >= this.points.length ? !1 : !0
                    },
                    getPoint: function(e) {
                        if (this._validateInputs(e))
                            return e = this.points[e],
                            new h(e[0],e[1],this.spatialReference)
                    },
                    setPoint: function(e, n) {
                        if (this._validateInputs(e))
                            return this.clearCache(),
                            this.points[e] = [n.x, n.y],
                            this
                    },
                    toJson: function() {
                        var e = {
                            points: m.clone2DArray(this.points)
                        }
                          , n = this.spatialReference;
                        n && (e.spatialReference = n.toJson());
                        return e
                    }
                });
                a.prototype = C.prototype;
                c.prototype = new a;
                Object.defineProperty(c.prototype, "points", {
                    get: function() {
                        this._unquantizeFn && (this._pointsVal = this._unquantizeFn({
                            points: m.clone2DArray(this._pointsVal)
                        }).points,
                        this._unquantizeFn = null);
                        return this._pointsVal
                    },
                    set: function(e) {
                        this._pointsVal = e
                    }
                });
                c.prototype.setupLazyUnquantization = function(e, n) {
                    this._unquantizeFn = e;
                    this._pointsVal = n.points
                }
                ;
                C.simpleConstructor = a;
                C.accessorConstructor = c;
                C.defaultProps = l;
                b("extend-esri") && (y.setObject("geometry.Multipoint", C, w),
                w.geometry.defaultMultipoint = l);
                return C
            })
        },
        "esri/geometry/Polygon": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c) {
                function e() {}
                function n() {}
                k = {
                    type: "polygon",
                    rings: null
                };
                var t = C(h, {
                    declaredClass: "esri.geometry.Polygon",
                    type: "polygon",
                    rings: null,
                    constructor: function(g) {
                        this.rings = [];
                        this._ring = 0;
                        g && (b.isArray(g) ? this.rings = b.isArray(g[0][0]) ? g : [g] : g.rings ? l.mixin(this, g) : this.spatialReference = g,
                        this.spatialReference && (this.spatialReference = c.createSpatialReference(this.spatialReference)));
                        this.verifySR()
                    },
                    addRing: function(g) {
                        this.clearCache();
                        this._ring = this.rings.length;
                        this.rings[this._ring] = [];
                        b.isArray(g[0]) ? y.forEach(g, this._addPointArr, this) : y.forEach(g, this._addPoint, this);
                        return this
                    },
                    _addPointArr: function(g) {
                        this.rings[this._ring].push(g)
                    },
                    _addPoint: function(g) {
                        this.rings[this._ring].push([g.x, g.y])
                    },
                    _insertPoints: function(g, q) {
                        this.clearCache();
                        this._ring = q;
                        this.rings[this._ring] || (this.rings[this._ring] = []);
                        y.forEach(g, this._addPoint, this)
                    },
                    _validateInputs: function(g, q) {
                        return null !== g && void 0 !== g && (0 > g || g >= this.rings.length) || null !== q && void 0 !== g && (0 > q || q >= this.rings[g].length) ? !1 : !0
                    },
                    getPoint: function(g, q) {
                        if (this._validateInputs(g, q))
                            return new f(this.rings[g][q],this.spatialReference)
                    },
                    setPoint: function(g, q, x) {
                        if (this._validateInputs(g, q))
                            return this.clearCache(),
                            this.rings[g][q] = [x.x, x.y],
                            this
                    },
                    insertPoint: function(g, q, x) {
                        if (this._validateInputs(g) && null != q && 0 <= q && q <= this.rings[g].length)
                            return this.clearCache(),
                            this.rings[g].splice(q, 0, [x.x, x.y]),
                            this
                    },
                    removeRing: function(g) {
                        if (this._validateInputs(g, null)) {
                            this.clearCache();
                            g = this.rings.splice(g, 1)[0];
                            var q, x = g.length, v = this.spatialReference;
                            for (q = 0; q < x; q++)
                                g[q] = new f(g[q],v);
                            return g
                        }
                    },
                    removePoint: function(g, q) {
                        if (this._validateInputs(g, q))
                            return this.clearCache(),
                            new f(this.rings[g].splice(q, 1)[0],this.spatialReference)
                    },
                    getExtent: function() {
                        var g = this.getCacheValue("_extent");
                        var q = this.getCacheValue("_partwise");
                        if (g)
                            return g = new d(g),
                            g._partwise = q,
                            g;
                        g = this.rings;
                        var x = g.length;
                        if (x && g[0].length) {
                            var v, z, u, p, r = v = g[0][0][0], B = z = g[0][0][1], D = Math.min, G = Math.max, A = this.spatialReference;
                            q = [];
                            var E, H;
                            for (u = 0; u < x; u++) {
                                var J = g[u];
                                var O = E = J[0] && J[0][0];
                                var V = H = J[0] && J[0][1];
                                var aa = J.length;
                                for (p = 0; p < aa; p++) {
                                    var da = J[p];
                                    var ea = da[0];
                                    da = da[1];
                                    r = D(r, ea);
                                    B = D(B, da);
                                    v = G(v, ea);
                                    z = G(z, da);
                                    O = D(O, ea);
                                    V = D(V, da);
                                    E = G(E, ea);
                                    H = G(H, da)
                                }
                                q.push(new d({
                                    xmin: O,
                                    ymin: V,
                                    xmax: E,
                                    ymax: H,
                                    spatialReference: A ? A.toJson() : null
                                }))
                            }
                            g = {
                                xmin: r,
                                ymin: B,
                                xmax: v,
                                ymax: z,
                                spatialReference: A ? A.toJson() : null
                            };
                            q = 1 < q.length ? q : null;
                            this.setCacheValue("_extent", g);
                            this.setCacheValue("_partwise", q);
                            g = new d(g);
                            g._partwise = q;
                            return g
                        }
                    },
                    contains: function(g) {
                        var q = this.rings, x = !1, v, z, u, p = q.length;
                        var r = this.spatialReference;
                        var B = g.spatialReference;
                        var D = g.x;
                        g = g.y;
                        r && B && !r.equals(B) && r._canProject(B) && (g = r.isWebMercator() ? f.lngLatToXY(D, g) : f.xyToLngLat(D, g, !0),
                        D = g[0],
                        g = g[1]);
                        for (u = 0; u < p; u++) {
                            r = q[u];
                            var G = r.length;
                            for (z = v = 0; z < G; z++) {
                                v++;
                                v === G && (v = 0);
                                B = r[z];
                                var A = r[v];
                                (B[1] < g && A[1] >= g || A[1] < g && B[1] >= g) && B[0] + (g - B[1]) / (A[1] - B[1]) * (A[0] - B[0]) < D && (x = !x)
                            }
                        }
                        return x
                    },
                    getCentroid: function() {
                        var g = this.getCacheValue("_centroid");
                        if (void 0 !== g)
                            return g;
                        g = this.rings;
                        var q, x, v = [], z, u, p = Infinity, r = -Infinity, B = Infinity, D = -Infinity;
                        y.forEach(g, function(E) {
                            G = q = x = 0;
                            y.forEach(E, function(H, J) {
                                J < E.length - 1 && (z = E[J + 1],
                                u = H[0] * z[1] - z[0] * H[1],
                                G += (H[0] + z[0]) * u,
                                q += (H[1] + z[1]) * u,
                                x += u,
                                H[0] < p && (p = H[0]),
                                H[0] > r && (r = H[0]),
                                H[1] < B && (B = H[1]),
                                H[1] > D && (D = H[1]))
                            });
                            0 < x && (x *= -1);
                            x && v.push([G, q, x / 2])
                        });
                        v.sort(function(E, H) {
                            return E[2] - H[2]
                        });
                        var G = q = void 0;
                        if (v[0]) {
                            var A = 6 * v[0][2];
                            G = v[0][0] / A;
                            q = v[0][1] / A;
                            if (G < p || G > r || q < B || q > D)
                                G = q = void 0
                        }
                        if (void 0 === G || void 0 === q)
                            if (g = g[0] && g[0].length ? this._getLineCentroid(g[0]) : null)
                                G = g.x,
                                q = g.y;
                        g = isNaN(G) || isNaN(q) ? null : new f(G,q,this.spatialReference);
                        this.setCacheValue("_centroid", g);
                        return g
                    },
                    _getLineCentroid: function(g) {
                        var q = 0, x = 0, v = 0, z = {
                            x: 0,
                            y: 0
                        }, u = {
                            x: 0,
                            y: 0
                        }, p, r = g.length, B;
                        for (p = 0; p < r - 1; p++) {
                            var D = g[p];
                            var G = g[p + 1];
                            if (D && G) {
                                z.x = D[0];
                                z.y = D[1];
                                u.x = G[0];
                                u.y = G[1];
                                var A = a.getLength(z, u);
                                0 < A && (q += A,
                                D = a.getMidpoint(D, G),
                                x += A * D[0],
                                v += A * D[1])
                            }
                        }
                        0 < q ? B = {
                            x: x / q,
                            y: v / q
                        } : g[0] && (B = {
                            x: g[0][0],
                            y: g[0][1]
                        });
                        return B
                    },
                    isClockwise: function(g) {
                        var q = 0, x, v = g.length, z = b.isArray(g[0]) ? function(u, p) {
                            return u[0] * p[1] - p[0] * u[1]
                        }
                        : function(u, p) {
                            return u.x * p.y - p.x * u.y
                        }
                        ;
                        for (x = 0; x < v; x++)
                            q += z(g[x], g[(x + 1) % v]);
                        return 0 >= q / 2
                    },
                    isSelfIntersecting: function(g) {
                        g = g || this;
                        var q, x, v, z, u, p = g.rings.length;
                        for (v = 0; v < p; v++) {
                            for (q = 0; q < g.rings[v].length - 1; q++) {
                                var r = [[g.rings[v][q][0], g.rings[v][q][1]], [g.rings[v][q + 1][0], g.rings[v][q + 1][1]]];
                                for (x = v + 1; x < p; x++)
                                    for (z = 0; z < g.rings[x].length - 1; z++) {
                                        var B = [[g.rings[x][z][0], g.rings[x][z][1]], [g.rings[x][z + 1][0], g.rings[x][z + 1][1]]];
                                        if ((u = a._getLineIntersection2(r, B)) && !(u[0] === r[0][0] && u[1] === r[0][1] || u[0] === B[0][0] && u[1] === B[0][1] || u[0] === r[1][0] && u[1] === r[1][1] || u[0] === B[1][0] && u[1] === B[1][1]))
                                            return !0
                                    }
                            }
                            z = g.rings[v].length;
                            if (!(4 >= z))
                                for (q = 0; q < z - 3; q++) {
                                    var D = z - 1;
                                    0 === q && (D = z - 2);
                                    r = [[g.rings[v][q][0], g.rings[v][q][1]], [g.rings[v][q + 1][0], g.rings[v][q + 1][1]]];
                                    for (x = q + 2; x < D; x++)
                                        if (B = [[g.rings[v][x][0], g.rings[v][x][1]], [g.rings[v][x + 1][0], g.rings[v][x + 1][1]]],
                                        (u = a._getLineIntersection2(r, B)) && !(u[0] === r[0][0] && u[1] === r[0][1] || u[0] === B[0][0] && u[1] === B[0][1] || u[0] === r[1][0] && u[1] === r[1][1] || u[0] === B[1][0] && u[1] === B[1][1]))
                                            return !0
                                }
                        }
                        return !1
                    },
                    toJson: function() {
                        var g = {
                            rings: l.clone3DArray(this.rings)
                        }
                          , q = this.spatialReference;
                        q && (g.spatialReference = q.toJson());
                        return g
                    }
                });
                e.prototype = t.prototype;
                n.prototype = new e;
                Object.defineProperty(n.prototype, "rings", {
                    get: function() {
                        this._unquantizeFn && (this._ringsVal = this._unquantizeFn({
                            rings: l.clone3DArray(this._ringsVal)
                        }).rings,
                        this._unquantizeFn = null);
                        return this._ringsVal
                    },
                    set: function(g) {
                        this._ringsVal = g
                    }
                });
                n.prototype.setupLazyUnquantization = function(g, q) {
                    this._unquantizeFn = g;
                    this._ringsVal = q.rings
                }
                ;
                t.simpleConstructor = e;
                t.accessorConstructor = n;
                t.defaultProps = k;
                t.createEllipse = function(g) {
                    var q = g.center.x, x = g.center.y, v = g.longAxis, z = g.shortAxis, u = g.numberOfPoints, p = g.map, r;
                    g = [];
                    var B = 2 * Math.PI / u;
                    for (r = 0; r < u; r++) {
                        var D = Math.cos(r * B);
                        var G = Math.sin(r * B);
                        D = p.toMap({
                            x: v * D + q,
                            y: z * G + x
                        });
                        g.push(D)
                    }
                    g.push(g[0]);
                    q = new t(p.spatialReference);
                    q.addRing(g);
                    return q
                }
                ;
                t.createCircle = function(g) {
                    return t.createEllipse({
                        center: g.center,
                        longAxis: g.r,
                        shortAxis: g.r,
                        numberOfPoints: g.numberOfPoints,
                        map: g.map
                    })
                }
                ;
                t.fromExtent = function(g) {
                    var q = g.normalize();
                    g = g.spatialReference;
                    return new t({
                        rings: y.map(q, function(x) {
                            return [[x.xmin, x.ymin], [x.xmin, x.ymax], [x.xmax, x.ymax], [x.xmax, x.ymin], [x.xmin, x.ymin]]
                        }),
                        spatialReference: g ? g.toJson() : null
                    })
                }
                ;
                w("extend-esri") && (b.setObject("geometry.Polygon", t, m),
                m.geometry.defaultPolygon = k,
                m.geometry.createEllipse = t.createEllipse,
                m.geometry.createCircle = t.createCircle,
                m.geometry.isClockwise = t.prototype.isClockwise,
                m.geometry.polygonSelfIntersecting = t.prototype.isSelfIntersecting);
                return t
            })
        },
        "esri/geometry/Polyline": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a) {
                function c() {}
                function e() {}
                k = {
                    type: "polyline",
                    paths: null
                };
                C = C(h, {
                    declaredClass: "esri.geometry.Polyline",
                    type: "polyline",
                    paths: null,
                    constructor: function(n) {
                        this.paths = [];
                        this._path = 0;
                        n && (b.isArray(n) ? this.paths = b.isArray(n[0][0]) ? n : [n] : n.paths ? l.mixin(this, n) : this.spatialReference = n,
                        this.spatialReference && (this.spatialReference = a.createSpatialReference(this.spatialReference)));
                        this.verifySR()
                    },
                    addPath: function(n) {
                        this.clearCache();
                        this._path = this.paths.length;
                        this.paths[this._path] = [];
                        b.isArray(n[0]) ? y.forEach(n, this._addPointArr, this) : y.forEach(n, this._addPoint, this);
                        return this
                    },
                    _addPointArr: function(n) {
                        this.paths[this._path].push(n)
                    },
                    _addPoint: function(n) {
                        this.paths[this._path].push([n.x, n.y])
                    },
                    _insertPoints: function(n, t) {
                        this.clearCache();
                        this._path = t;
                        this.paths[this._path] || (this.paths[this._path] = []);
                        y.forEach(n, this._addPoint, this)
                    },
                    _validateInputs: function(n, t) {
                        return null !== n && void 0 !== n && (0 > n || n >= this.paths.length) || null !== t && void 0 !== n && (0 > t || t >= this.paths[n].length) ? !1 : !0
                    },
                    getPoint: function(n, t) {
                        if (this._validateInputs(n, t))
                            return new f(this.paths[n][t],this.spatialReference)
                    },
                    setPoint: function(n, t, g) {
                        if (this._validateInputs(n, t))
                            return this.clearCache(),
                            this.paths[n][t] = [g.x, g.y],
                            this
                    },
                    insertPoint: function(n, t, g) {
                        if (this._validateInputs(n) && null != t && 0 <= t && t <= this.paths[n].length)
                            return this.clearCache(),
                            this.paths[n].splice(t, 0, [g.x, g.y]),
                            this
                    },
                    removePath: function(n) {
                        if (this._validateInputs(n, null)) {
                            this.clearCache();
                            n = this.paths.splice(n, 1)[0];
                            var t, g = n.length, q = this.spatialReference;
                            for (t = 0; t < g; t++)
                                n[t] = new f(n[t],q);
                            return n
                        }
                    },
                    removePoint: function(n, t) {
                        if (this._validateInputs(n, t))
                            return this.clearCache(),
                            new f(this.paths[n].splice(t, 1)[0],this.spatialReference)
                    },
                    getExtent: function() {
                        var n = this.getCacheValue("_extent");
                        var t = this.getCacheValue("_partwise");
                        if (n)
                            return n = new d(n),
                            n._partwise = t,
                            n;
                        n = this.paths;
                        var g = n.length;
                        if (g && n[0].length) {
                            var q, x, v, z, u = q = n[0][0][0], p = x = n[0][0][1], r = Math.min, B = Math.max, D = this.spatialReference;
                            t = [];
                            var G, A;
                            for (v = 0; v < g; v++) {
                                var E = n[v];
                                var H = G = E[0] && E[0][0];
                                var J = A = E[0] && E[0][1];
                                var O = E.length;
                                for (z = 0; z < O; z++) {
                                    var V = E[z];
                                    var aa = V[0];
                                    V = V[1];
                                    u = r(u, aa);
                                    p = r(p, V);
                                    q = B(q, aa);
                                    x = B(x, V);
                                    H = r(H, aa);
                                    J = r(J, V);
                                    G = B(G, aa);
                                    A = B(A, V)
                                }
                                t.push(new d({
                                    xmin: H,
                                    ymin: J,
                                    xmax: G,
                                    ymax: A,
                                    spatialReference: D ? D.toJson() : null
                                }))
                            }
                            n = {
                                xmin: u,
                                ymin: p,
                                xmax: q,
                                ymax: x,
                                spatialReference: D ? D.toJson() : null
                            };
                            t = 1 < t.length ? t : null;
                            this.setCacheValue("_extent", n);
                            this.setCacheValue("_partwise", t);
                            n = new d(n);
                            n._partwise = t;
                            return n
                        }
                    },
                    toJson: function() {
                        var n = {
                            paths: l.clone3DArray(this.paths)
                        }
                          , t = this.spatialReference;
                        t && (n.spatialReference = t.toJson());
                        return n
                    }
                });
                c.prototype = C.prototype;
                e.prototype = new c;
                Object.defineProperty(e.prototype, "paths", {
                    get: function() {
                        this._unquantizeFn && (this._pathsVal = this._unquantizeFn({
                            paths: l.clone3DArray(this._pathsVal)
                        }).paths,
                        this._unquantizeFn = null);
                        return this._pathsVal
                    },
                    set: function(n) {
                        this._pathsVal = n
                    }
                });
                e.prototype.setupLazyUnquantization = function(n, t) {
                    this._unquantizeFn = n;
                    this._pathsVal = t.paths
                }
                ;
                C.simpleConstructor = c;
                C.accessorConstructor = e;
                C.defaultProps = k;
                w("extend-esri") && (b.setObject("geometry.Polyline", C, m),
                m.geometry.defaultPolyline = k);
                return C
            })
        },
        "esri/geometry/ScreenPoint": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "./Point"], function(C, y, b, w, m) {
                C = C(m, {
                    declaredClass: "esri.geometry.ScreenPoint",
                    verifySR: function() {}
                });
                b("extend-esri") && y.setObject("geometry.ScreenPoint", C, w);
                return C
            })
        },
        "esri/geometry/Rect": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "), function(C, y, b, w, m, l, k, h, f) {
                function d(c) {
                    return new h(parseFloat(c.x),parseFloat(c.y) - parseFloat(c.height),parseFloat(c.x) + parseFloat(c.width),parseFloat(c.y),c.spatialReference)
                }
                var a = C(l, {
                    declaredClass: "esri.geometry.Rect",
                    type: "rect",
                    x: 0,
                    y: 0,
                    width: 100,
                    height: 100,
                    constructor: function(c, e, n, t, g) {
                        m.isObject(c) && "extent" === c.type && (e = c.ymax,
                        n = c.getWidth(),
                        t = c.getHeight(),
                        g = c.spatialReference,
                        c = c.xmin);
                        m.isObject(c) ? (m.mixin(this, c),
                        this.spatialReference && (this.spatialReference = f.createSpatialReference(this.spatialReference))) : (this.x = c,
                        this.y = e,
                        this.width = n,
                        this.height = t,
                        this.spatialReference = g);
                        this.verifySR()
                    },
                    getCenter: function() {
                        return new k(this.x + this.width / 2,this.y + this.height / 2,this.spatialReference)
                    },
                    offset: function(c, e) {
                        return new a(this.x + c,this.y + e,this.width,this.height,this.spatialReference)
                    },
                    intersects: function(c) {
                        return c.x + c.width <= this.x || c.y + c.height <= this.y || c.y >= this.y + this.height || c.x >= this.x + this.width ? !1 : !0
                    },
                    getExtent: function() {
                        return d(this)
                    },
                    update: function(c, e, n, t, g) {
                        this.x = c;
                        this.y = e;
                        this.width = n;
                        this.height = t;
                        this.spatialReference = g;
                        this.clearCache();
                        return this
                    }
                });
                b("extend-esri") && (y.setObject("geometry.Rect", a, w),
                w.geometry._rectToExtent = d,
                w.geometry._extentToRect = function(c) {
                    return new a(c)
                }
                );
                return a
            })
        },
        "esri/geometry/scaleUtils": function() {
            define(["dojo/_base/lang", "dojo/has", "../kernel", "../config", "../WKIDUnitConversion"], function(C, y, b, w, m) {
                function l(c, e, n) {
                    return c && e ? c.getWidth() / e * (n || h) * 39.37 * f.screenDPI : 0
                }
                function k(c, e, n, t, g) {
                    return c.expand(t * e / (39.37 * ((g ? n : d.values[d[n]]) || h) * f.screenDPI) / c.getWidth())
                }
                var h = 6370997 * Math.PI / 180
                  , f = w.defaults
                  , d = m
                  , a = {
                    getUnitValueForSR: function(c) {
                        return this.getUnitValue(c) || h
                    },
                    getUnitValue: function(c) {
                        if (c)
                            if ("object" === typeof c) {
                                var e = c.wkid;
                                var n = c.wkt
                            } else
                                "number" === typeof c ? e = c : "string" === typeof c && (n = c);
                        if (e)
                            var t = d.values[d[e]];
                        else
                            n && -1 !== n.search(/^PROJCS/i) && (c = /UNIT\[([^\]]+)\]\]$/i.exec(n)) && c[1] && (t = parseFloat(c[1].split(",")[1]));
                        return t
                    },
                    getScale: function(c, e, n) {
                        if (1 < arguments.length && null != e && !e.declaredClass) {
                            var t = c;
                            var g = e;
                            e = null;
                            var q = a.getUnitValue(n)
                        } else
                            t = e || c.extent,
                            g = c.width,
                            q = a.getUnitValue(t && t.spatialReference);
                        return l(t, g, q)
                    },
                    getExtentForScale: function(c, e, n) {
                        return k(n || c.extent, c.width, a.getUnitValue(c.spatialReference), e, !0)
                    }
                };
                y("extend-esri") && (C.mixin(C.getObject("geometry", !0, b), a),
                b.geometry._getScale = l,
                b.geometry._getExtentForScale = k);
                return a
            })
        },
        "esri/WKIDUnitConversion": function() {
            define(["dojo/has", "./kernel"], function(C, y) {
                var b, w = {
                    values: [1, .3048, .3048006096012192, .3047972654, .9143917962, .201166195164, .9143984146160287, .3047994715386762, 20.11676512155263, 20.11678249437587, .9143985307444408, .91439523, .3047997101815088, 20.116756, 5E4, 15E4],
                    units: "Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
                    2066: 5,
                    2136: 12,
                    2155: 2,
                    2157: 0,
                    2158: 0,
                    2159: 12,
                    2160: 12,
                    2204: 2,
                    2219: 0,
                    2220: 0,
                    2254: 2,
                    2255: 2,
                    2256: 1,
                    2265: 1,
                    2266: 1,
                    2267: 2,
                    2268: 2,
                    2269: 1,
                    2270: 1,
                    2271: 2,
                    2272: 2,
                    2273: 1,
                    2294: 0,
                    2295: 0,
                    2314: 3,
                    2899: 2,
                    2900: 2,
                    2901: 1,
                    2909: 1,
                    2910: 1,
                    2911: 2,
                    2912: 2,
                    2913: 1,
                    2914: 1,
                    2992: 1,
                    2993: 0,
                    2994: 1,
                    3080: 1,
                    3089: 2,
                    3090: 0,
                    3091: 2,
                    3102: 2,
                    3141: 0,
                    3142: 0,
                    3167: 13,
                    3359: 2,
                    3360: 0,
                    3361: 1,
                    3362: 0,
                    3363: 2,
                    3364: 0,
                    3365: 2,
                    3366: 3,
                    3404: 2,
                    3405: 0,
                    3406: 0,
                    3407: 3,
                    3439: 0,
                    3440: 0,
                    3479: 1,
                    3480: 0,
                    3481: 1,
                    3482: 0,
                    3483: 1,
                    3484: 0,
                    3485: 2,
                    3486: 0,
                    3487: 2,
                    3488: 0,
                    3489: 0,
                    3490: 2,
                    3491: 0,
                    3492: 2,
                    3493: 0,
                    3494: 2,
                    3495: 0,
                    3496: 2,
                    3497: 0,
                    3498: 2,
                    3499: 0,
                    3500: 2,
                    3501: 0,
                    3502: 2,
                    3503: 0,
                    3504: 2,
                    3505: 0,
                    3506: 2,
                    3507: 0,
                    3508: 2,
                    3509: 0,
                    3510: 2,
                    3511: 0,
                    3512: 2,
                    3513: 0,
                    3514: 0,
                    3515: 2,
                    3516: 0,
                    3517: 2,
                    3518: 0,
                    3519: 2,
                    3520: 0,
                    3521: 2,
                    3522: 0,
                    3523: 2,
                    3524: 0,
                    3525: 2,
                    3526: 0,
                    3527: 2,
                    3528: 0,
                    3529: 2,
                    3530: 0,
                    3531: 2,
                    3532: 0,
                    3533: 2,
                    3534: 0,
                    3535: 2,
                    3536: 0,
                    3537: 2,
                    3538: 0,
                    3539: 2,
                    3540: 0,
                    3541: 2,
                    3542: 0,
                    3543: 2,
                    3544: 0,
                    3545: 2,
                    3546: 0,
                    3547: 2,
                    3548: 0,
                    3549: 2,
                    3550: 0,
                    3551: 2,
                    3552: 0,
                    3553: 2,
                    3582: 2,
                    3583: 0,
                    3584: 2,
                    3585: 0,
                    3586: 2,
                    3587: 0,
                    3588: 1,
                    3589: 0,
                    3590: 1,
                    3591: 0,
                    3592: 0,
                    3593: 1,
                    3598: 2,
                    3599: 0,
                    3600: 2,
                    3605: 1,
                    3606: 0,
                    3607: 0,
                    3608: 2,
                    3609: 0,
                    3610: 2,
                    3611: 0,
                    3612: 2,
                    3613: 0,
                    3614: 2,
                    3615: 0,
                    3616: 2,
                    3617: 0,
                    3618: 2,
                    3619: 0,
                    3620: 2,
                    3621: 0,
                    3622: 2,
                    3623: 0,
                    3624: 2,
                    3625: 0,
                    3626: 2,
                    3627: 0,
                    3628: 2,
                    3629: 0,
                    3630: 2,
                    3631: 0,
                    3632: 2,
                    3633: 0,
                    3634: 1,
                    3635: 0,
                    3636: 1,
                    3640: 2,
                    3641: 0,
                    3642: 2,
                    3643: 0,
                    3644: 1,
                    3645: 0,
                    3646: 1,
                    3647: 0,
                    3648: 1,
                    3649: 0,
                    3650: 2,
                    3651: 0,
                    3652: 2,
                    3653: 0,
                    3654: 2,
                    3655: 0,
                    3656: 1,
                    3657: 0,
                    3658: 2,
                    3659: 0,
                    3660: 2,
                    3661: 0,
                    3662: 2,
                    3663: 0,
                    3664: 2,
                    3668: 2,
                    3669: 0,
                    3670: 2,
                    3671: 0,
                    3672: 2,
                    3673: 0,
                    3674: 2,
                    3675: 0,
                    3676: 1,
                    3677: 2,
                    3678: 0,
                    3679: 1,
                    3680: 2,
                    3681: 0,
                    3682: 1,
                    3683: 2,
                    3684: 0,
                    3685: 0,
                    3686: 2,
                    3687: 0,
                    3688: 2,
                    3689: 0,
                    3690: 2,
                    3691: 0,
                    3692: 2,
                    3696: 2,
                    3697: 0,
                    3698: 2,
                    3699: 0,
                    3700: 2,
                    3793: 0,
                    3794: 0,
                    3812: 0,
                    3854: 0,
                    3857: 0,
                    3920: 0,
                    3978: 0,
                    3979: 0,
                    3991: 2,
                    3992: 2,
                    4026: 0,
                    4037: 0,
                    4038: 0,
                    4071: 0,
                    4082: 0,
                    4083: 0,
                    4087: 0,
                    4088: 0,
                    4217: 2,
                    4414: 0,
                    4415: 0,
                    4417: 0,
                    4434: 0,
                    4437: 0,
                    4438: 2,
                    4439: 2,
                    4462: 0,
                    4467: 0,
                    4471: 0,
                    4474: 0,
                    4559: 0,
                    4647: 0,
                    4822: 0,
                    4826: 0,
                    4839: 0,
                    5018: 0,
                    5048: 0,
                    5167: 0,
                    5168: 0,
                    5221: 0,
                    5223: 0,
                    5234: 0,
                    5235: 0,
                    5243: 0,
                    5247: 0,
                    5266: 0,
                    5316: 0,
                    5320: 0,
                    5321: 0,
                    5325: 0,
                    5337: 0,
                    5361: 0,
                    5362: 0,
                    5367: 0,
                    5382: 0,
                    5383: 0,
                    5396: 0,
                    5456: 0,
                    5457: 0,
                    5469: 0,
                    5472: 4,
                    5490: 0,
                    5513: 0,
                    5514: 0,
                    5523: 0,
                    5559: 0,
                    5588: 1,
                    5589: 3,
                    5596: 0,
                    5627: 0,
                    5629: 0,
                    5641: 0,
                    5643: 0,
                    5644: 0,
                    5646: 2,
                    5654: 2,
                    5655: 2,
                    5659: 0,
                    5700: 0,
                    5825: 0,
                    5836: 0,
                    5837: 0,
                    5839: 0,
                    5842: 0,
                    5844: 0,
                    5858: 0,
                    5879: 0,
                    5880: 0,
                    5887: 0,
                    5890: 0,
                    6128: 1,
                    6129: 1,
                    6141: 1,
                    6204: 0,
                    6210: 0,
                    6211: 0,
                    6307: 0,
                    6312: 0,
                    6316: 0,
                    6362: 0,
                    6391: 1,
                    6405: 1,
                    6406: 0,
                    6407: 1,
                    6408: 0,
                    6409: 1,
                    6410: 0,
                    6411: 2,
                    6412: 0,
                    6413: 2,
                    6414: 0,
                    6415: 0,
                    6416: 2,
                    6417: 0,
                    6418: 2,
                    6419: 0,
                    6420: 2,
                    6421: 0,
                    6422: 2,
                    6423: 0,
                    6424: 2,
                    6425: 0,
                    6426: 2,
                    6427: 0,
                    6428: 2,
                    6429: 0,
                    6430: 2,
                    6431: 0,
                    6432: 2,
                    6433: 0,
                    6434: 2,
                    6435: 0,
                    6436: 2,
                    6437: 0,
                    6438: 2,
                    6439: 0,
                    6440: 0,
                    6441: 2,
                    6442: 0,
                    6443: 2,
                    6444: 0,
                    6445: 2,
                    6446: 0,
                    6447: 2,
                    6448: 0,
                    6449: 2,
                    6450: 0,
                    6451: 2,
                    6452: 0,
                    6453: 2,
                    6454: 0,
                    6455: 2,
                    6456: 0,
                    6457: 2,
                    6458: 0,
                    6459: 2,
                    6460: 0,
                    6461: 2,
                    6462: 0,
                    6463: 2,
                    6464: 0,
                    6465: 2,
                    6466: 0,
                    6467: 2,
                    6468: 0,
                    6469: 2,
                    6470: 0,
                    6471: 2,
                    6472: 0,
                    6473: 2,
                    6474: 0,
                    6475: 2,
                    6476: 0,
                    6477: 2,
                    6478: 0,
                    6479: 2,
                    6484: 2,
                    6485: 0,
                    6486: 2,
                    6487: 0,
                    6488: 2,
                    6489: 0,
                    6490: 2,
                    6491: 0,
                    6492: 2,
                    6493: 0,
                    6494: 1,
                    6495: 0,
                    6496: 1,
                    6497: 0,
                    6498: 0,
                    6499: 1,
                    6500: 0,
                    6501: 2,
                    6502: 0,
                    6503: 2,
                    6504: 0,
                    6505: 2,
                    6506: 0,
                    6507: 2,
                    6508: 0,
                    6509: 0,
                    6510: 2,
                    6515: 1,
                    6516: 0,
                    6518: 0,
                    6519: 2,
                    6520: 0,
                    6521: 2,
                    6522: 0,
                    6523: 2,
                    6524: 0,
                    6525: 2,
                    6526: 0,
                    6527: 2,
                    6528: 0,
                    6529: 2,
                    6530: 0,
                    6531: 2,
                    6532: 0,
                    6533: 2,
                    6534: 0,
                    6535: 2,
                    6536: 0,
                    6537: 2,
                    6538: 0,
                    6539: 2,
                    6540: 0,
                    6541: 2,
                    6542: 0,
                    6543: 2,
                    6544: 0,
                    6545: 1,
                    6546: 0,
                    6547: 1,
                    6548: 0,
                    6549: 2,
                    6550: 0,
                    6551: 2,
                    6552: 0,
                    6553: 2,
                    6554: 0,
                    6555: 2,
                    6556: 0,
                    6557: 1,
                    6558: 0,
                    6559: 1,
                    6560: 0,
                    6561: 1,
                    6562: 0,
                    6563: 2,
                    6564: 0,
                    6565: 2,
                    6566: 0,
                    6567: 0,
                    6568: 2,
                    6569: 0,
                    6570: 1,
                    6571: 0,
                    6572: 2,
                    6573: 0,
                    6574: 2,
                    6575: 0,
                    6576: 2,
                    6577: 0,
                    6578: 2,
                    6582: 2,
                    6583: 0,
                    6584: 2,
                    6585: 0,
                    6586: 2,
                    6587: 0,
                    6588: 2,
                    6589: 0,
                    6590: 2,
                    6591: 0,
                    6592: 0,
                    6593: 2,
                    6594: 0,
                    6595: 2,
                    6596: 0,
                    6597: 2,
                    6598: 0,
                    6599: 2,
                    6600: 0,
                    6601: 2,
                    6602: 0,
                    6603: 2,
                    6605: 2,
                    6606: 0,
                    6607: 2,
                    6608: 0,
                    6609: 2,
                    6610: 0,
                    6611: 0,
                    6612: 2,
                    6613: 0,
                    6614: 2,
                    6615: 0,
                    6616: 2,
                    6617: 0,
                    6618: 2,
                    6633: 2,
                    6646: 0,
                    6703: 0,
                    6784: 0,
                    6785: 1,
                    6786: 0,
                    6787: 1,
                    6788: 0,
                    6789: 1,
                    6790: 0,
                    6791: 1,
                    6792: 0,
                    6793: 1,
                    6794: 0,
                    6795: 1,
                    6796: 0,
                    6797: 1,
                    6798: 0,
                    6799: 1,
                    6800: 0,
                    6801: 1,
                    6802: 0,
                    6803: 1,
                    6804: 0,
                    6805: 1,
                    6806: 0,
                    6807: 1,
                    6808: 0,
                    6809: 1,
                    6810: 0,
                    6811: 1,
                    6812: 0,
                    6813: 1,
                    6814: 0,
                    6815: 1,
                    6816: 0,
                    6817: 1,
                    6818: 0,
                    6819: 1,
                    6820: 0,
                    6821: 1,
                    6822: 0,
                    6823: 1,
                    6824: 0,
                    6825: 1,
                    6826: 0,
                    6827: 1,
                    6828: 0,
                    6829: 1,
                    6830: 0,
                    6831: 1,
                    6832: 0,
                    6833: 1,
                    6834: 0,
                    6835: 1,
                    6836: 0,
                    6837: 1,
                    6838: 0,
                    6839: 1,
                    6840: 0,
                    6841: 1,
                    6842: 0,
                    6843: 1,
                    6844: 0,
                    6845: 1,
                    6846: 0,
                    6847: 1,
                    6848: 0,
                    6849: 1,
                    6850: 0,
                    6851: 1,
                    6852: 0,
                    6853: 1,
                    6854: 0,
                    6855: 1,
                    6856: 0,
                    6857: 1,
                    6858: 0,
                    6859: 1,
                    6860: 0,
                    6861: 1,
                    6862: 0,
                    6863: 1,
                    6867: 0,
                    6868: 1,
                    6870: 0,
                    6875: 0,
                    6876: 0,
                    6879: 0,
                    6880: 2,
                    6884: 0,
                    6885: 1,
                    6886: 0,
                    6887: 1,
                    6915: 0,
                    6922: 0,
                    6923: 2,
                    6924: 0,
                    6925: 2,
                    6962: 0,
                    6984: 0,
                    6991: 0,
                    7128: 2,
                    7131: 0,
                    7132: 2,
                    7142: 0,
                    7257: 0,
                    7258: 2,
                    7259: 0,
                    7260: 2,
                    7261: 0,
                    7262: 2,
                    7263: 0,
                    7264: 2,
                    7265: 0,
                    7266: 2,
                    7267: 0,
                    7268: 2,
                    7269: 0,
                    7270: 2,
                    7271: 0,
                    7272: 2,
                    7273: 0,
                    7274: 2,
                    7275: 0,
                    7276: 2,
                    7277: 0,
                    7278: 2,
                    7279: 0,
                    7280: 2,
                    7281: 0,
                    7282: 2,
                    7283: 0,
                    7284: 2,
                    7285: 0,
                    7286: 2,
                    7287: 0,
                    7288: 2,
                    7289: 0,
                    7290: 2,
                    7291: 0,
                    7292: 2,
                    7293: 0,
                    7294: 2,
                    7295: 0,
                    7296: 2,
                    7297: 0,
                    7298: 2,
                    7299: 0,
                    7300: 2,
                    7301: 0,
                    7302: 2,
                    7303: 0,
                    7304: 2,
                    7305: 0,
                    7306: 2,
                    7307: 0,
                    7308: 2,
                    7309: 0,
                    7310: 2,
                    7311: 0,
                    7312: 2,
                    7313: 0,
                    7314: 2,
                    7315: 0,
                    7316: 2,
                    7317: 0,
                    7318: 2,
                    7319: 0,
                    7320: 2,
                    7321: 0,
                    7322: 2,
                    7323: 0,
                    7324: 2,
                    7325: 0,
                    7326: 2,
                    7327: 0,
                    7328: 2,
                    7329: 0,
                    7330: 2,
                    7331: 0,
                    7332: 2,
                    7333: 0,
                    7334: 2,
                    7335: 0,
                    7336: 2,
                    7337: 0,
                    7338: 2,
                    7339: 0,
                    7340: 2,
                    7341: 0,
                    7342: 2,
                    7343: 0,
                    7344: 2,
                    7345: 0,
                    7346: 2,
                    7347: 0,
                    7348: 2,
                    7349: 0,
                    7350: 2,
                    7351: 0,
                    7352: 2,
                    7353: 0,
                    7354: 2,
                    7355: 0,
                    7356: 2,
                    7357: 0,
                    7358: 2,
                    7359: 0,
                    7360: 2,
                    7361: 0,
                    7362: 2,
                    7363: 0,
                    7364: 2,
                    7365: 0,
                    7366: 2,
                    7367: 0,
                    7368: 2,
                    7369: 0,
                    7370: 2,
                    7877: 0,
                    7878: 0,
                    7882: 0,
                    7883: 0,
                    7887: 0,
                    7899: 0,
                    7991: 0,
                    7992: 0,
                    8035: 2,
                    8036: 2,
                    8058: 0,
                    8059: 0,
                    8082: 0,
                    8083: 0,
                    8088: 0,
                    8090: 0,
                    8091: 2,
                    8092: 0,
                    8093: 2,
                    8095: 0,
                    8096: 2,
                    8097: 0,
                    8098: 2,
                    8099: 0,
                    8100: 2,
                    8101: 0,
                    8102: 2,
                    8103: 0,
                    8104: 2,
                    8105: 0,
                    8106: 2,
                    8107: 0,
                    8108: 2,
                    8109: 0,
                    8110: 2,
                    8111: 0,
                    8112: 2,
                    8113: 0,
                    8114: 2,
                    8115: 0,
                    8116: 2,
                    8117: 0,
                    8118: 2,
                    8119: 0,
                    8120: 2,
                    8121: 0,
                    8122: 2,
                    8123: 0,
                    8124: 2,
                    8125: 0,
                    8126: 2,
                    8127: 0,
                    8128: 2,
                    8129: 0,
                    8130: 2,
                    8131: 0,
                    8132: 2,
                    8133: 0,
                    8134: 2,
                    8135: 0,
                    8136: 2,
                    8137: 0,
                    8138: 2,
                    8139: 0,
                    8140: 2,
                    8141: 0,
                    8142: 2,
                    8143: 0,
                    8144: 2,
                    8145: 0,
                    8146: 2,
                    8147: 0,
                    8148: 2,
                    8149: 0,
                    8150: 2,
                    8151: 0,
                    8152: 2,
                    8153: 0,
                    8154: 2,
                    8155: 0,
                    8156: 2,
                    8157: 0,
                    8158: 2,
                    8159: 0,
                    8160: 2,
                    8161: 0,
                    8162: 2,
                    8163: 0,
                    8164: 2,
                    8165: 0,
                    8166: 2,
                    8167: 0,
                    8168: 2,
                    8169: 0,
                    8170: 2,
                    8171: 0,
                    8172: 2,
                    8173: 0,
                    8177: 2,
                    8179: 0,
                    8180: 2,
                    8181: 0,
                    8182: 2,
                    8184: 0,
                    8185: 2,
                    8187: 0,
                    8189: 2,
                    8191: 0,
                    8193: 2,
                    8196: 0,
                    8197: 2,
                    8198: 0,
                    8200: 2,
                    8201: 0,
                    8202: 2,
                    8203: 0,
                    8204: 2,
                    8205: 0,
                    8206: 2,
                    8207: 0,
                    8208: 2,
                    8209: 0,
                    8210: 2,
                    8212: 0,
                    8213: 2,
                    8214: 0,
                    8216: 2,
                    8218: 0,
                    8220: 2,
                    8222: 0,
                    8224: 2,
                    8225: 0,
                    8226: 2,
                    8311: 0,
                    8312: 1,
                    8313: 0,
                    8314: 1,
                    8315: 0,
                    8316: 1,
                    8317: 0,
                    8318: 1,
                    8319: 0,
                    8320: 1,
                    8321: 0,
                    8322: 1,
                    8323: 0,
                    8324: 1,
                    8325: 0,
                    8326: 1,
                    8327: 0,
                    8328: 1,
                    8329: 0,
                    8330: 1,
                    8331: 0,
                    8332: 1,
                    8333: 0,
                    8334: 1,
                    8335: 0,
                    8336: 1,
                    8337: 0,
                    8338: 1,
                    8339: 0,
                    8340: 1,
                    8341: 0,
                    8342: 1,
                    8343: 0,
                    8344: 1,
                    8345: 0,
                    8346: 1,
                    8347: 0,
                    8348: 1,
                    8352: 0,
                    8353: 0,
                    8379: 0,
                    8380: 2,
                    8381: 0,
                    8382: 2,
                    8383: 0,
                    8384: 2,
                    8385: 0,
                    8387: 2,
                    8391: 0,
                    8395: 0,
                    8433: 0,
                    8441: 0,
                    8455: 0,
                    8456: 0,
                    8531: 2,
                    8682: 0,
                    8686: 0,
                    8687: 0,
                    8692: 0,
                    8693: 0,
                    8826: 0,
                    8903: 0,
                    8950: 0,
                    8951: 0,
                    9039: 0,
                    9040: 0,
                    9141: 0,
                    9149: 0,
                    9150: 0,
                    9191: 0,
                    9221: 0,
                    9222: 0,
                    9249: 0,
                    9250: 0,
                    9252: 0,
                    9254: 0,
                    9265: 0,
                    9284: 0,
                    9285: 0,
                    9300: 0,
                    9354: 0,
                    9367: 0,
                    9373: 0,
                    9377: 0,
                    9387: 0,
                    9391: 0,
                    9456: 0,
                    9473: 0,
                    9498: 0,
                    9674: 0,
                    9678: 0,
                    9680: 0,
                    20499: 0,
                    20538: 0,
                    20539: 0,
                    20790: 0,
                    20791: 0,
                    21291: 0,
                    21292: 0,
                    21500: 0,
                    21817: 0,
                    21818: 0,
                    22032: 0,
                    22033: 0,
                    22091: 0,
                    22092: 0,
                    22332: 0,
                    22391: 0,
                    22392: 0,
                    22700: 0,
                    22770: 0,
                    22780: 0,
                    22832: 0,
                    23090: 0,
                    23095: 0,
                    23239: 0,
                    23240: 0,
                    23433: 0,
                    23700: 0,
                    24047: 0,
                    24048: 0,
                    24100: 3,
                    24200: 0,
                    24305: 0,
                    24306: 0,
                    24382: 10,
                    24383: 0,
                    24500: 0,
                    24547: 0,
                    24548: 0,
                    24571: 9,
                    24600: 0,
                    25E3: 0,
                    25231: 0,
                    25884: 0,
                    25932: 0,
                    26237: 0,
                    26331: 0,
                    26332: 0,
                    26432: 0,
                    26591: 0,
                    26592: 0,
                    26632: 0,
                    26692: 0,
                    27120: 0,
                    27200: 0,
                    27291: 6,
                    27292: 6,
                    27429: 0,
                    27492: 0,
                    27493: 0,
                    27500: 0,
                    27700: 0,
                    28232: 0,
                    28600: 0,
                    28991: 0,
                    28992: 0,
                    29100: 0,
                    29101: 0,
                    29220: 0,
                    29221: 0,
                    29333: 0,
                    29635: 0,
                    29636: 0,
                    29701: 0,
                    29738: 0,
                    29739: 0,
                    29849: 0,
                    29850: 0,
                    29871: 8,
                    29872: 7,
                    29873: 0,
                    29874: 0,
                    30200: 5,
                    30339: 0,
                    30340: 0,
                    30591: 0,
                    30592: 0,
                    30791: 0,
                    30792: 0,
                    30800: 0,
                    31028: 0,
                    31121: 0,
                    31154: 0,
                    31170: 0,
                    31171: 0,
                    31370: 0,
                    31528: 0,
                    31529: 0,
                    31600: 0,
                    31700: 0,
                    31838: 0,
                    31839: 0,
                    31900: 0,
                    31901: 0,
                    32061: 0,
                    32062: 0,
                    32098: 0,
                    32099: 2,
                    32100: 0,
                    32104: 0,
                    32161: 0,
                    32766: 0,
                    53048: 0,
                    53049: 0,
                    54090: 0,
                    54091: 0,
                    65061: 2,
                    65062: 2,
                    65161: 0,
                    65163: 0,
                    102041: 2,
                    102064: 11,
                    102068: 14,
                    102069: 15,
                    102118: 2,
                    102119: 1,
                    102120: 2,
                    102121: 2,
                    102217: 2,
                    102218: 0,
                    102219: 2,
                    102220: 2,
                    102378: 1,
                    102379: 1,
                    102380: 0,
                    102381: 1,
                    102589: 2,
                    102599: 2,
                    102600: 2,
                    102604: 2,
                    102647: 0,
                    102704: 2,
                    102705: 2,
                    102706: 0,
                    102761: 2,
                    102762: 0,
                    102763: 2,
                    102764: 0,
                    102765: 0,
                    102766: 2,
                    102962: 0,
                    102963: 0,
                    102970: 1,
                    102974: 2,
                    102993: 0,
                    102994: 0,
                    102995: 2,
                    102996: 2,
                    103015: 0,
                    103016: 2,
                    103017: 0,
                    103018: 2,
                    103025: 0,
                    103026: 0,
                    103027: 2,
                    103028: 2,
                    103035: 0,
                    103036: 0,
                    103037: 2,
                    103038: 2,
                    103039: 0,
                    103040: 0,
                    103041: 2,
                    103042: 2,
                    103043: 0,
                    103044: 0,
                    103045: 2,
                    103046: 2,
                    103047: 0,
                    103048: 0,
                    103049: 2,
                    103050: 2,
                    103051: 0,
                    103052: 2,
                    103053: 0,
                    103054: 2,
                    103055: 0,
                    103056: 2,
                    103057: 0,
                    103058: 0,
                    103059: 2,
                    103060: 2,
                    103061: 0,
                    103062: 0,
                    103063: 2,
                    103064: 2,
                    103069: 2,
                    103070: 0,
                    103071: 0,
                    103072: 2,
                    103073: 2,
                    103086: 0,
                    103087: 0,
                    103088: 2,
                    103089: 2,
                    103094: 1,
                    103095: 0,
                    103096: 2,
                    103103: 0,
                    103104: 2,
                    103105: 0,
                    103106: 2,
                    103121: 0,
                    103122: 2,
                    103123: 0,
                    103124: 0,
                    103125: 1,
                    103126: 1,
                    103127: 0,
                    103128: 0,
                    103129: 2,
                    103130: 2,
                    103131: 0,
                    103132: 0,
                    103133: 2,
                    103134: 2,
                    103135: 0,
                    103136: 0,
                    103137: 1,
                    103138: 1,
                    103139: 0,
                    103140: 2,
                    103141: 0,
                    103142: 2,
                    103143: 0,
                    103144: 2,
                    103145: 0,
                    103146: 1,
                    103147: 0,
                    103148: 0,
                    103149: 2,
                    103150: 2,
                    103151: 0,
                    103152: 2,
                    103172: 0,
                    103173: 2,
                    103174: 0,
                    103175: 0,
                    103176: 2,
                    103177: 2,
                    103178: 0,
                    103179: 0,
                    103180: 2,
                    103181: 2,
                    103182: 0,
                    103183: 0,
                    103184: 2,
                    103185: 2,
                    103228: 0,
                    103229: 0,
                    103230: 2,
                    103231: 2,
                    103250: 0,
                    103251: 2,
                    103252: 0,
                    103253: 2,
                    103260: 0,
                    103261: 0,
                    103262: 2,
                    103263: 2,
                    103270: 0,
                    103271: 0,
                    103272: 2,
                    103273: 2,
                    103274: 0,
                    103275: 0,
                    103276: 2,
                    103277: 2,
                    103278: 0,
                    103279: 0,
                    103280: 2,
                    103281: 2,
                    103282: 0,
                    103283: 0,
                    103284: 2,
                    103285: 2,
                    103286: 0,
                    103287: 2,
                    103288: 0,
                    103289: 2,
                    103290: 0,
                    103291: 2,
                    103292: 0,
                    103293: 0,
                    103294: 2,
                    103295: 2,
                    103296: 0,
                    103297: 0,
                    103298: 2,
                    103299: 2,
                    103376: 2,
                    103377: 0,
                    103378: 0,
                    103379: 2,
                    103380: 2,
                    103393: 0,
                    103394: 0,
                    103395: 2,
                    103396: 2,
                    103472: 0,
                    103473: 1,
                    103474: 0,
                    103475: 2,
                    103482: 0,
                    103483: 2,
                    103484: 0,
                    103485: 2,
                    103500: 0,
                    103501: 2,
                    103502: 0,
                    103503: 0,
                    103504: 1,
                    103505: 1,
                    103506: 0,
                    103507: 0,
                    103508: 2,
                    103509: 2,
                    103510: 0,
                    103511: 0,
                    103512: 2,
                    103513: 2,
                    103514: 0,
                    103515: 2,
                    103516: 0,
                    103517: 2,
                    103518: 0,
                    103519: 2,
                    103520: 0,
                    103521: 1,
                    103522: 0,
                    103523: 0,
                    103524: 2,
                    103525: 2,
                    103526: 0,
                    103527: 2,
                    103561: 2,
                    103562: 2,
                    103563: 0,
                    103564: 0,
                    103565: 2,
                    103566: 2,
                    103567: 0,
                    103568: 0,
                    103569: 2,
                    103570: 2,
                    103584: 0,
                    103585: 2,
                    103586: 0,
                    103587: 2,
                    103588: 1,
                    103589: 0,
                    103590: 2,
                    103591: 1,
                    103592: 0,
                    103593: 2,
                    103594: 1,
                    103695: 2
                };
                for (b = 2E3; 2045 >= b; b++)
                    w[b] = 0;
                for (b = 2056; 2065 >= b; b++)
                    w[b] = 0;
                for (b = 2067; 2135 >= b; b++)
                    w[b] = 0;
                for (b = 2137; 2154 >= b; b++)
                    w[b] = 0;
                for (b = 2161; 2170 >= b; b++)
                    w[b] = 0;
                for (b = 2172; 2193 >= b; b++)
                    w[b] = 0;
                for (b = 2195; 2198 >= b; b++)
                    w[b] = 0;
                for (b = 2200; 2203 >= b; b++)
                    w[b] = 0;
                for (b = 2205; 2217 >= b; b++)
                    w[b] = 0;
                for (b = 2222; 2224 >= b; b++)
                    w[b] = 1;
                for (b = 2225; 2250 >= b; b++)
                    w[b] = 2;
                for (b = 2251; 2253 >= b; b++)
                    w[b] = 1;
                for (b = 2257; 2264 >= b; b++)
                    w[b] = 2;
                for (b = 2274; 2279 >= b; b++)
                    w[b] = 2;
                for (b = 2280; 2282 >= b; b++)
                    w[b] = 1;
                for (b = 2283; 2289 >= b; b++)
                    w[b] = 2;
                for (b = 2290; 2292 >= b; b++)
                    w[b] = 0;
                for (b = 2308; 2313 >= b; b++)
                    w[b] = 0;
                for (b = 2315; 2491 >= b; b++)
                    w[b] = 0;
                for (b = 2494; 2866 >= b; b++)
                    w[b] = 0;
                for (b = 2867; 2869 >= b; b++)
                    w[b] = 1;
                for (b = 2870; 2888 >= b; b++)
                    w[b] = 2;
                for (b = 2891; 2895 >= b; b++)
                    w[b] = 2;
                for (b = 2896; 2898 >= b; b++)
                    w[b] = 1;
                for (b = 2902; 2908 >= b; b++)
                    w[b] = 2;
                for (b = 2915; 2920 >= b; b++)
                    w[b] = 2;
                for (b = 2921; 2923 >= b; b++)
                    w[b] = 1;
                for (b = 2924; 2930 >= b; b++)
                    w[b] = 2;
                for (b = 2931; 2962 >= b; b++)
                    w[b] = 0;
                for (b = 2964; 2968 >= b; b++)
                    w[b] = 2;
                for (b = 2969; 2973 >= b; b++)
                    w[b] = 0;
                for (b = 2975; 2991 >= b; b++)
                    w[b] = 0;
                for (b = 2995; 3051 >= b; b++)
                    w[b] = 0;
                for (b = 3054; 3079 >= b; b++)
                    w[b] = 0;
                for (b = 3081; 3088 >= b; b++)
                    w[b] = 0;
                for (b = 3092; 3101 >= b; b++)
                    w[b] = 0;
                for (b = 3106; 3138 >= b; b++)
                    w[b] = 0;
                for (b = 3146; 3151 >= b; b++)
                    w[b] = 0;
                for (b = 3153; 3166 >= b; b++)
                    w[b] = 0;
                for (b = 3168; 3172 >= b; b++)
                    w[b] = 0;
                for (b = 3174; 3203 >= b; b++)
                    w[b] = 0;
                for (b = 3294; 3358 >= b; b++)
                    w[b] = 0;
                for (b = 3367; 3403 >= b; b++)
                    w[b] = 0;
                for (b = 3408; 3416 >= b; b++)
                    w[b] = 0;
                for (b = 3417; 3438 >= b; b++)
                    w[b] = 2;
                for (b = 3441; 3446 >= b; b++)
                    w[b] = 2;
                for (b = 3447; 3450 >= b; b++)
                    w[b] = 0;
                for (b = 3451; 3459 >= b; b++)
                    w[b] = 2;
                for (b = 3460; 3478 >= b; b++)
                    w[b] = 0;
                for (b = 3554; 3559 >= b; b++)
                    w[b] = 0;
                for (b = 3560; 3570 >= b; b++)
                    w[b] = 2;
                for (b = 3571; 3581 >= b; b++)
                    w[b] = 0;
                for (b = 3594; 3597 >= b; b++)
                    w[b] = 0;
                for (b = 3601; 3604 >= b; b++)
                    w[b] = 0;
                for (b = 3637; 3639 >= b; b++)
                    w[b] = 0;
                for (b = 3665; 3667 >= b; b++)
                    w[b] = 0;
                for (b = 3693; 3695 >= b; b++)
                    w[b] = 0;
                for (b = 3701; 3727 >= b; b++)
                    w[b] = 0;
                for (b = 3728; 3739 >= b; b++)
                    w[b] = 2;
                for (b = 3740; 3751 >= b; b++)
                    w[b] = 0;
                for (b = 3753; 3760 >= b; b++)
                    w[b] = 2;
                for (b = 3761; 3773 >= b; b++)
                    w[b] = 0;
                for (b = 3775; 3777 >= b; b++)
                    w[b] = 0;
                for (b = 3779; 3781 >= b; b++)
                    w[b] = 0;
                for (b = 3783; 3785 >= b; b++)
                    w[b] = 0;
                for (b = 3788; 3791 >= b; b++)
                    w[b] = 0;
                for (b = 3797; 3802 >= b; b++)
                    w[b] = 0;
                for (b = 3814; 3816 >= b; b++)
                    w[b] = 0;
                for (b = 3825; 3829 >= b; b++)
                    w[b] = 0;
                for (b = 3832; 3841 >= b; b++)
                    w[b] = 0;
                for (b = 3844; 3852 >= b; b++)
                    w[b] = 0;
                for (b = 3873; 3885 >= b; b++)
                    w[b] = 0;
                for (b = 3890; 3893 >= b; b++)
                    w[b] = 0;
                for (b = 3907; 3912 >= b; b++)
                    w[b] = 0;
                for (b = 3942; 3950 >= b; b++)
                    w[b] = 0;
                for (b = 3968; 3970 >= b; b++)
                    w[b] = 0;
                for (b = 3973; 3976 >= b; b++)
                    w[b] = 0;
                for (b = 3986; 3989 >= b; b++)
                    w[b] = 0;
                for (b = 3994; 3997 >= b; b++)
                    w[b] = 0;
                for (b = 4048; 4051 >= b; b++)
                    w[b] = 0;
                for (b = 4056; 4063 >= b; b++)
                    w[b] = 0;
                for (b = 4093; 4096 >= b; b++)
                    w[b] = 0;
                for (b = 4390; 4398 >= b; b++)
                    w[b] = 0;
                for (b = 4399; 4413 >= b; b++)
                    w[b] = 2;
                for (b = 4418; 4433 >= b; b++)
                    w[b] = 2;
                for (b = 4455; 4457 >= b; b++)
                    w[b] = 2;
                for (b = 4484; 4489 >= b; b++)
                    w[b] = 0;
                for (b = 4491; 4554 >= b; b++)
                    w[b] = 0;
                for (b = 4568; 4589 >= b; b++)
                    w[b] = 0;
                for (b = 4652; 4656 >= b; b++)
                    w[b] = 0;
                for (b = 4766; 4800 >= b; b++)
                    w[b] = 0;
                for (b = 5014; 5016 >= b; b++)
                    w[b] = 0;
                for (b = 5069; 5072 >= b; b++)
                    w[b] = 0;
                for (b = 5105; 5130 >= b; b++)
                    w[b] = 0;
                for (b = 5173; 5188 >= b; b++)
                    w[b] = 0;
                for (b = 5253; 5259 >= b; b++)
                    w[b] = 0;
                for (b = 5269; 5275 >= b; b++)
                    w[b] = 0;
                for (b = 5292; 5311 >= b; b++)
                    w[b] = 0;
                for (b = 5329; 5331 >= b; b++)
                    w[b] = 0;
                for (b = 5343; 5349 >= b; b++)
                    w[b] = 0;
                for (b = 5355; 5357 >= b; b++)
                    w[b] = 0;
                for (b = 5387; 5389 >= b; b++)
                    w[b] = 0;
                for (b = 5459; 5463 >= b; b++)
                    w[b] = 0;
                for (b = 5479; 5482 >= b; b++)
                    w[b] = 0;
                for (b = 5518; 5520 >= b; b++)
                    w[b] = 0;
                for (b = 5530; 5539 >= b; b++)
                    w[b] = 0;
                for (b = 5550; 5552 >= b; b++)
                    w[b] = 0;
                for (b = 5562; 5583 >= b; b++)
                    w[b] = 0;
                for (b = 5623; 5625 >= b; b++)
                    w[b] = 2;
                for (b = 5631; 5639 >= b; b++)
                    w[b] = 0;
                for (b = 5649; 5653 >= b; b++)
                    w[b] = 0;
                for (b = 5663; 5680 >= b; b++)
                    w[b] = 0;
                for (b = 5682; 5685 >= b; b++)
                    w[b] = 0;
                for (b = 5875; 5877 >= b; b++)
                    w[b] = 0;
                for (b = 5896; 5899 >= b; b++)
                    w[b] = 0;
                for (b = 5921; 5940 >= b; b++)
                    w[b] = 0;
                for (b = 6050; 6125 >= b; b++)
                    w[b] = 0;
                for (b = 6244; 6275 >= b; b++)
                    w[b] = 0;
                for (b = 6328; 6348 >= b; b++)
                    w[b] = 0;
                for (b = 6350; 6356 >= b; b++)
                    w[b] = 0;
                for (b = 6366; 6372 >= b; b++)
                    w[b] = 0;
                for (b = 6381; 6387 >= b; b++)
                    w[b] = 0;
                for (b = 6393; 6404 >= b; b++)
                    w[b] = 0;
                for (b = 6480; 6483 >= b; b++)
                    w[b] = 0;
                for (b = 6511; 6514 >= b; b++)
                    w[b] = 0;
                for (b = 6579; 6581 >= b; b++)
                    w[b] = 0;
                for (b = 6619; 6624 >= b; b++)
                    w[b] = 0;
                for (b = 6625; 6627 >= b; b++)
                    w[b] = 2;
                for (b = 6628; 6632 >= b; b++)
                    w[b] = 0;
                for (b = 6634; 6637 >= b; b++)
                    w[b] = 0;
                for (b = 6669; 6692 >= b; b++)
                    w[b] = 0;
                for (b = 6707; 6709 >= b; b++)
                    w[b] = 0;
                for (b = 6720; 6723 >= b; b++)
                    w[b] = 0;
                for (b = 6732; 6738 >= b; b++)
                    w[b] = 0;
                for (b = 6931; 6933 >= b; b++)
                    w[b] = 0;
                for (b = 6956; 6959 >= b; b++)
                    w[b] = 0;
                for (b = 7005; 7007 >= b; b++)
                    w[b] = 0;
                for (b = 7057; 7070 >= b; b++)
                    w[b] = 2;
                for (b = 7074; 7082 >= b; b++)
                    w[b] = 0;
                for (b = 7109; 7118 >= b; b++)
                    w[b] = 0;
                for (b = 7119; 7127 >= b; b++)
                    w[b] = 1;
                for (b = 7374; 7376 >= b; b++)
                    w[b] = 0;
                for (b = 7528; 7586 >= b; b++)
                    w[b] = 0;
                for (b = 7587; 7645 >= b; b++)
                    w[b] = 2;
                for (b = 7692; 7696 >= b; b++)
                    w[b] = 0;
                for (b = 7755; 7787 >= b; b++)
                    w[b] = 0;
                for (b = 7791; 7795 >= b; b++)
                    w[b] = 0;
                for (b = 7799; 7801 >= b; b++)
                    w[b] = 0;
                for (b = 7803; 7805 >= b; b++)
                    w[b] = 0;
                for (b = 7825; 7831 >= b; b++)
                    w[b] = 0;
                for (b = 7845; 7859 >= b; b++)
                    w[b] = 0;
                for (b = 8013; 8032 >= b; b++)
                    w[b] = 0;
                for (b = 8065; 8068 >= b; b++)
                    w[b] = 1;
                for (b = 8518; 8529 >= b; b++)
                    w[b] = 2;
                for (b = 8533; 8536 >= b; b++)
                    w[b] = 2;
                for (b = 8538; 8540 >= b; b++)
                    w[b] = 2;
                for (b = 8677; 8679 >= b; b++)
                    w[b] = 0;
                for (b = 8836; 8840 >= b; b++)
                    w[b] = 0;
                for (b = 8857; 8859 >= b; b++)
                    w[b] = 0;
                for (b = 8908; 8910 >= b; b++)
                    w[b] = 0;
                for (b = 9154; 9159 >= b; b++)
                    w[b] = 0;
                for (b = 9205; 9218 >= b; b++)
                    w[b] = 0;
                for (b = 9271; 9273 >= b; b++)
                    w[b] = 0;
                for (b = 9295; 9297 >= b; b++)
                    w[b] = 0;
                for (b = 9356; 9360 >= b; b++)
                    w[b] = 0;
                for (b = 9404; 9407 >= b; b++)
                    w[b] = 0;
                for (b = 9476; 9482 >= b; b++)
                    w[b] = 0;
                for (b = 9487; 9494 >= b; b++)
                    w[b] = 0;
                for (b = 9697; 9699 >= b; b++)
                    w[b] = 0;
                for (b = 20002; 20032 >= b; b++)
                    w[b] = 0;
                for (b = 20062; 20092 >= b; b++)
                    w[b] = 0;
                for (b = 20135; 20138 >= b; b++)
                    w[b] = 0;
                for (b = 20248; 20258 >= b; b++)
                    w[b] = 0;
                for (b = 20348; 20358 >= b; b++)
                    w[b] = 0;
                for (b = 20436; 20440 >= b; b++)
                    w[b] = 0;
                for (b = 20822; 20824 >= b; b++)
                    w[b] = 0;
                for (b = 20934; 20936 >= b; b++)
                    w[b] = 0;
                for (b = 21035; 21037 >= b; b++)
                    w[b] = 0;
                for (b = 21095; 21097 >= b; b++)
                    w[b] = 0;
                for (b = 21148; 21150 >= b; b++)
                    w[b] = 0;
                for (b = 21413; 21423 >= b; b++)
                    w[b] = 0;
                for (b = 21453; 21463 >= b; b++)
                    w[b] = 0;
                for (b = 21473; 21483 >= b; b++)
                    w[b] = 0;
                for (b = 21780; 21782 >= b; b++)
                    w[b] = 0;
                for (b = 21891; 21894 >= b; b++)
                    w[b] = 0;
                for (b = 21896; 21899 >= b; b++)
                    w[b] = 0;
                for (b = 22171; 22177 >= b; b++)
                    w[b] = 0;
                for (b = 22181; 22187 >= b; b++)
                    w[b] = 0;
                for (b = 22191; 22197 >= b; b++)
                    w[b] = 0;
                for (b = 22234; 22236 >= b; b++)
                    w[b] = 0;
                for (b = 22521; 22525 >= b; b++)
                    w[b] = 0;
                for (b = 22991; 22994 >= b; b++)
                    w[b] = 0;
                for (b = 23028; 23038 >= b; b++)
                    w[b] = 0;
                for (b = 23830; 23853 >= b; b++)
                    w[b] = 0;
                for (b = 23866; 23872 >= b; b++)
                    w[b] = 0;
                for (b = 23877; 23884 >= b; b++)
                    w[b] = 0;
                for (b = 23886; 23894 >= b; b++)
                    w[b] = 0;
                for (b = 23946; 23948 >= b; b++)
                    w[b] = 0;
                for (b = 24311; 24313 >= b; b++)
                    w[b] = 0;
                for (b = 24342; 24347 >= b; b++)
                    w[b] = 0;
                for (b = 24370; 24374 >= b; b++)
                    w[b] = 10;
                for (b = 24375; 24381 >= b; b++)
                    w[b] = 0;
                for (b = 24718; 24721 >= b; b++)
                    w[b] = 0;
                for (b = 24817; 24821 >= b; b++)
                    w[b] = 0;
                for (b = 24877; 24882 >= b; b++)
                    w[b] = 0;
                for (b = 24891; 24893 >= b; b++)
                    w[b] = 0;
                for (b = 25391; 25395 >= b; b++)
                    w[b] = 0;
                for (b = 25828; 25838 >= b; b++)
                    w[b] = 0;
                for (b = 26191; 26195 >= b; b++)
                    w[b] = 0;
                for (b = 26391; 26393 >= b; b++)
                    w[b] = 0;
                for (b = 26701; 26722 >= b; b++)
                    w[b] = 0;
                for (b = 26729; 26799 >= b; b++)
                    w[b] = 2;
                for (b = 26801; 26803 >= b; b++)
                    w[b] = 2;
                for (b = 26811; 26813 >= b; b++)
                    w[b] = 2;
                for (b = 26847; 26870 >= b; b++)
                    w[b] = 2;
                for (b = 26891; 26899 >= b; b++)
                    w[b] = 0;
                for (b = 26901; 26923 >= b; b++)
                    w[b] = 0;
                for (b = 26929; 26946 >= b; b++)
                    w[b] = 0;
                for (b = 26948; 26998 >= b; b++)
                    w[b] = 0;
                for (b = 27037; 27040 >= b; b++)
                    w[b] = 0;
                for (b = 27205; 27232 >= b; b++)
                    w[b] = 0;
                for (b = 27258; 27260 >= b; b++)
                    w[b] = 0;
                for (b = 27391; 27398 >= b; b++)
                    w[b] = 0;
                for (b = 27561; 27564 >= b; b++)
                    w[b] = 0;
                for (b = 27571; 27574 >= b; b++)
                    w[b] = 0;
                for (b = 27581; 27584 >= b; b++)
                    w[b] = 0;
                for (b = 27591; 27594 >= b; b++)
                    w[b] = 0;
                for (b = 28191; 28193 >= b; b++)
                    w[b] = 0;
                for (b = 28348; 28358 >= b; b++)
                    w[b] = 0;
                for (b = 28402; 28432 >= b; b++)
                    w[b] = 0;
                for (b = 28462; 28492 >= b; b++)
                    w[b] = 0;
                for (b = 29118; 29122 >= b; b++)
                    w[b] = 0;
                for (b = 29168; 29172 >= b; b++)
                    w[b] = 0;
                for (b = 29177; 29185 >= b; b++)
                    w[b] = 0;
                for (b = 29187; 29195 >= b; b++)
                    w[b] = 0;
                for (b = 29900; 29903 >= b; b++)
                    w[b] = 0;
                for (b = 30161; 30179 >= b; b++)
                    w[b] = 0;
                for (b = 30491; 30494 >= b; b++)
                    w[b] = 0;
                for (b = 30729; 30732 >= b; b++)
                    w[b] = 0;
                for (b = 31251; 31259 >= b; b++)
                    w[b] = 0;
                for (b = 31265; 31268 >= b; b++)
                    w[b] = 0;
                for (b = 31275; 31279 >= b; b++)
                    w[b] = 0;
                for (b = 31281; 31297 >= b; b++)
                    w[b] = 0;
                for (b = 31461; 31469 >= b; b++)
                    w[b] = 0;
                for (b = 31491; 31495 >= b; b++)
                    w[b] = 0;
                for (b = 31917; 31922 >= b; b++)
                    w[b] = 0;
                for (b = 31965; 32E3 >= b; b++)
                    w[b] = 0;
                for (b = 32001; 32003 >= b; b++)
                    w[b] = 2;
                for (b = 32005; 32031 >= b; b++)
                    w[b] = 2;
                for (b = 32033; 32060 >= b; b++)
                    w[b] = 2;
                for (b = 32064; 32067 >= b; b++)
                    w[b] = 2;
                for (b = 32074; 32077 >= b; b++)
                    w[b] = 2;
                for (b = 32081; 32086 >= b; b++)
                    w[b] = 0;
                for (b = 32107; 32130 >= b; b++)
                    w[b] = 0;
                for (b = 32133; 32158 >= b; b++)
                    w[b] = 0;
                for (b = 32164; 32167 >= b; b++)
                    w[b] = 2;
                for (b = 32180; 32199 >= b; b++)
                    w[b] = 0;
                for (b = 32201; 32260 >= b; b++)
                    w[b] = 0;
                for (b = 32301; 32360 >= b; b++)
                    w[b] = 0;
                for (b = 32601; 32662 >= b; b++)
                    w[b] = 0;
                for (b = 32664; 32667 >= b; b++)
                    w[b] = 2;
                for (b = 32701; 32761 >= b; b++)
                    w[b] = 0;
                for (b = 53001; 53004 >= b; b++)
                    w[b] = 0;
                for (b = 53008; 53019 >= b; b++)
                    w[b] = 0;
                for (b = 53021; 53032 >= b; b++)
                    w[b] = 0;
                for (b = 53034; 53037 >= b; b++)
                    w[b] = 0;
                for (b = 53042; 53046 >= b; b++)
                    w[b] = 0;
                for (b = 53074; 53080 >= b; b++)
                    w[b] = 0;
                for (b = 54001; 54004 >= b; b++)
                    w[b] = 0;
                for (b = 54008; 54019 >= b; b++)
                    w[b] = 0;
                for (b = 54021; 54032 >= b; b++)
                    w[b] = 0;
                for (b = 54034; 54037 >= b; b++)
                    w[b] = 0;
                for (b = 54042; 54046 >= b; b++)
                    w[b] = 0;
                for (b = 54048; 54053 >= b; b++)
                    w[b] = 0;
                for (b = 54074; 54080 >= b; b++)
                    w[b] = 0;
                for (b = 54098; 54101 >= b; b++)
                    w[b] = 0;
                for (b = 102001; 102040 >= b; b++)
                    w[b] = 0;
                for (b = 102042; 102063 >= b; b++)
                    w[b] = 0;
                for (b = 102065; 102067 >= b; b++)
                    w[b] = 0;
                for (b = 102070; 102117 >= b; b++)
                    w[b] = 0;
                for (b = 102122; 102216 >= b; b++)
                    w[b] = 0;
                for (b = 102221; 102377 >= b; b++)
                    w[b] = 0;
                for (b = 102382; 102388 >= b; b++)
                    w[b] = 0;
                for (b = 102389; 102398 >= b; b++)
                    w[b] = 2;
                for (b = 102399; 102444 >= b; b++)
                    w[b] = 0;
                for (b = 102445; 102447 >= b; b++)
                    w[b] = 2;
                for (b = 102448; 102458 >= b; b++)
                    w[b] = 0;
                for (b = 102459; 102468 >= b; b++)
                    w[b] = 2;
                for (b = 102469; 102499 >= b; b++)
                    w[b] = 0;
                for (b = 102500; 102519 >= b; b++)
                    w[b] = 1;
                for (b = 102520; 102524 >= b; b++)
                    w[b] = 0;
                for (b = 102525; 102529 >= b; b++)
                    w[b] = 2;
                for (b = 102530; 102588 >= b; b++)
                    w[b] = 0;
                for (b = 102590; 102598 >= b; b++)
                    w[b] = 0;
                for (b = 102601; 102603 >= b; b++)
                    w[b] = 0;
                for (b = 102605; 102628 >= b; b++)
                    w[b] = 0;
                for (b = 102629; 102646 >= b; b++)
                    w[b] = 2;
                for (b = 102648; 102700 >= b; b++)
                    w[b] = 2;
                for (b = 102701; 102703 >= b; b++)
                    w[b] = 0;
                for (b = 102707; 102730 >= b; b++)
                    w[b] = 2;
                for (b = 102733; 102758 >= b; b++)
                    w[b] = 2;
                for (b = 102767; 102900 >= b; b++)
                    w[b] = 0;
                for (b = 102965; 102969 >= b; b++)
                    w[b] = 0;
                for (b = 102971; 102973 >= b; b++)
                    w[b] = 0;
                for (b = 102975; 102989 >= b; b++)
                    w[b] = 0;
                for (b = 102990; 102992 >= b; b++)
                    w[b] = 1;
                for (b = 102997; 103002 >= b; b++)
                    w[b] = 0;
                for (b = 103003; 103008 >= b; b++)
                    w[b] = 2;
                for (b = 103009; 103011 >= b; b++)
                    w[b] = 0;
                for (b = 103012; 103014 >= b; b++)
                    w[b] = 2;
                for (b = 103019; 103021 >= b; b++)
                    w[b] = 0;
                for (b = 103022; 103024 >= b; b++)
                    w[b] = 2;
                for (b = 103029; 103031 >= b; b++)
                    w[b] = 0;
                for (b = 103032; 103034 >= b; b++)
                    w[b] = 2;
                for (b = 103065; 103068 >= b; b++)
                    w[b] = 0;
                for (b = 103074; 103076 >= b; b++)
                    w[b] = 0;
                for (b = 103077; 103079 >= b; b++)
                    w[b] = 1;
                for (b = 103080; 103082 >= b; b++)
                    w[b] = 0;
                for (b = 103083; 103085 >= b; b++)
                    w[b] = 2;
                for (b = 103090; 103093 >= b; b++)
                    w[b] = 0;
                for (b = 103097; 103099 >= b; b++)
                    w[b] = 0;
                for (b = 103100; 103102 >= b; b++)
                    w[b] = 2;
                for (b = 103107; 103109 >= b; b++)
                    w[b] = 0;
                for (b = 103110; 103112 >= b; b++)
                    w[b] = 2;
                for (b = 103113; 103116 >= b; b++)
                    w[b] = 0;
                for (b = 103117; 103120 >= b; b++)
                    w[b] = 2;
                for (b = 103153; 103157 >= b; b++)
                    w[b] = 0;
                for (b = 103158; 103162 >= b; b++)
                    w[b] = 2;
                for (b = 103163; 103165 >= b; b++)
                    w[b] = 0;
                for (b = 103166; 103168 >= b; b++)
                    w[b] = 1;
                for (b = 103169; 103171 >= b; b++)
                    w[b] = 2;
                for (b = 103186; 103188 >= b; b++)
                    w[b] = 0;
                for (b = 103189; 103191 >= b; b++)
                    w[b] = 2;
                for (b = 103192; 103195 >= b; b++)
                    w[b] = 0;
                for (b = 103196; 103199 >= b; b++)
                    w[b] = 2;
                for (b = 103200; 103224 >= b; b++)
                    w[b] = 0;
                for (b = 103225; 103227 >= b; b++)
                    w[b] = 1;
                for (b = 103232; 103237 >= b; b++)
                    w[b] = 0;
                for (b = 103238; 103243 >= b; b++)
                    w[b] = 2;
                for (b = 103244; 103246 >= b; b++)
                    w[b] = 0;
                for (b = 103247; 103249 >= b; b++)
                    w[b] = 2;
                for (b = 103254; 103256 >= b; b++)
                    w[b] = 0;
                for (b = 103257; 103259 >= b; b++)
                    w[b] = 2;
                for (b = 103264; 103266 >= b; b++)
                    w[b] = 0;
                for (b = 103267; 103269 >= b; b++)
                    w[b] = 2;
                for (b = 103300; 103375 >= b; b++)
                    w[b] = 0;
                for (b = 103381; 103383 >= b; b++)
                    w[b] = 0;
                for (b = 103384; 103386 >= b; b++)
                    w[b] = 1;
                for (b = 103387; 103389 >= b; b++)
                    w[b] = 0;
                for (b = 103390; 103392 >= b; b++)
                    w[b] = 2;
                for (b = 103397; 103399 >= b; b++)
                    w[b] = 0;
                for (b = 103400; 103471 >= b; b++)
                    w[b] = 2;
                for (b = 103476; 103478 >= b; b++)
                    w[b] = 0;
                for (b = 103479; 103481 >= b; b++)
                    w[b] = 2;
                for (b = 103486; 103488 >= b; b++)
                    w[b] = 0;
                for (b = 103489; 103491 >= b; b++)
                    w[b] = 2;
                for (b = 103492; 103495 >= b; b++)
                    w[b] = 0;
                for (b = 103496; 103499 >= b; b++)
                    w[b] = 2;
                for (b = 103528; 103543 >= b; b++)
                    w[b] = 0;
                for (b = 103544; 103548 >= b; b++)
                    w[b] = 2;
                for (b = 103549; 103551 >= b; b++)
                    w[b] = 0;
                for (b = 103552; 103554 >= b; b++)
                    w[b] = 1;
                for (b = 103555; 103557 >= b; b++)
                    w[b] = 2;
                for (b = 103558; 103560 >= b; b++)
                    w[b] = 0;
                for (b = 103571; 103573 >= b; b++)
                    w[b] = 0;
                for (b = 103574; 103576 >= b; b++)
                    w[b] = 2;
                for (b = 103577; 103580 >= b; b++)
                    w[b] = 0;
                for (b = 103581; 103583 >= b; b++)
                    w[b] = 2;
                for (b = 103595; 103694 >= b; b++)
                    w[b] = 0;
                for (b = 103696; 103699 >= b; b++)
                    w[b] = 0;
                for (b = 103700; 103793 >= b; b++)
                    w[b] = 2;
                for (b = 103794; 103872 >= b; b++)
                    w[b] = 0;
                for (b = 103900; 103971 >= b; b++)
                    w[b] = 2;
                C("extend-esri") && (y.WKIDUnitConversion = w);
                return w
            })
        },
        "esri/geometry/screenUtils": function() {
            define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                var a = function() {
                    return 9 > b("ie") ? function(e, n, t, g, q, x, v, z, u) {
                        var p = [], r = Math.round, B, D = v.length, G;
                        for (B = 0; B < D; B++) {
                            var A = v[B];
                            var E = z ? z(A[0][0], A[0][1], u) : A[0];
                            if (1 < (G = A.length)) {
                                var H = r((E[0] - e) * t + q);
                                var J = r((n - E[1]) * g + x);
                                E = z ? z(A[1][0], A[1][1], u) : A[1];
                                var O = r((E[0] - e) * t + q);
                                E = r((n - E[1]) * g + x);
                                p.push("M", H + "," + J, "L", O + "," + E);
                                for (O = 2; O < G; O++)
                                    E = z ? z(A[O][0], A[O][1], u) : A[O],
                                    H = r((E[0] - e) * t + q),
                                    J = r((n - E[1]) * g + x),
                                    p.push(H + "," + J)
                            } else
                                H = r((E[0] - e) * t + q),
                                J = r((n - E[1]) * g + x),
                                p.push("M", H + "," + J)
                        }
                        return p
                    }
                    : function(e, n, t, g, q, x, v, z, u, p) {
                        var r = [], B, D, G = Math.round;
                        var A = 0;
                        for (B = v ? v.length : 0; A < B; A++) {
                            var E = v[A];
                            r.push("M");
                            var H = 0;
                            for (D = E ? E.length : 0; H < D; H++) {
                                var J = z ? z(E[H][0], E[H][1], u) : E[H];
                                r.push(G((J[0] - e) * t + q) + "," + G((n - J[1]) * g + x))
                            }
                            p || r.push("Z")
                        }
                        return r
                    }
                }()
                  , c = {
                    toScreenPoint: function(e, n, t, g, q) {
                        var x = e.spatialReference
                          , v = g.spatialReference
                          , z = g.x;
                        g = g.y;
                        x && v && !x.equals(v) && x._canProject(v) && (x = x.isWebMercator() ? m.lngLatToXY(z, g) : m.xyToLngLat(z, g, !0),
                        z = x[0],
                        g = x[1]);
                        z = (z - e.xmin) * (n / e.getWidth());
                        g = (e.ymax - g) * (t / e.getHeight());
                        q || (z = Math.round(z),
                        g = Math.round(g));
                        return new l(z,g)
                    },
                    toScreenGeometry: function(e, n, t, g) {
                        var q = e.xmin
                          , x = e.ymax
                          , v = n / e.getWidth()
                          , z = t / e.getHeight()
                          , u = C.forEach
                          , p = Math.round;
                        if (g instanceof m)
                            return new m(p((g.x - q) * v),p((x - g.y) * z));
                        if (g instanceof f) {
                            e = new f;
                            var r = e.points;
                            u(g.points, function(E, H) {
                                r[H] = [p((E[0] - q) * v), p((x - E[1]) * z)]
                            });
                            return e
                        }
                        if (g instanceof d)
                            return new d(p((g.xmin - q) * v),p((x - g.ymin) * z),p((g.xmax - q) * v),p((x - g.ymax) * v));
                        if (g instanceof k) {
                            e = new k;
                            var B = e.paths, D;
                            u(g.paths, function(E, H) {
                                D = B[H] = [];
                                u(E, function(J, O) {
                                    D[O] = [p((J[0] - q) * v), p((x - J[1]) * z)]
                                })
                            });
                            return e
                        }
                        if (g instanceof h) {
                            e = new h;
                            var G = e.rings, A;
                            u(g.rings, function(E, H) {
                                A = G[H] = [];
                                u(E, function(J, O) {
                                    A[O] = [p((J[0] - q) * v), p((x - J[1]) * z)]
                                })
                            });
                            return e
                        }
                    },
                    _toScreenPath: function(e, n, t, g, q, x) {
                        var v = g instanceof k
                          , z = e.spatialReference
                          , u = g.spatialReference;
                        if (z && u && !z.equals(u) && z._canProject(u))
                            if (z.isWebMercator())
                                var p = m.lngLatToXY;
                            else {
                                p = m.xyToLngLat;
                                var r = !0
                            }
                        return a(e.xmin, e.ymax, n / e.getWidth(), t / e.getHeight(), q, x, v ? g.paths : g.rings, p, r, v)
                    },
                    toMapPoint: function(e, n, t, g) {
                        return new m(e.xmin + g.x / (n / e.getWidth()),e.ymax - g.y / (t / e.getHeight()),e.spatialReference)
                    },
                    toMapGeometry: function(e, n, t, g) {
                        var q = e.xmin
                          , x = e.ymax
                          , v = e.spatialReference
                          , z = n / e.getWidth()
                          , u = t / e.getHeight()
                          , p = C.forEach;
                        if (g instanceof m)
                            return new m(q + g.x / z,x - g.y / u,v);
                        if (g instanceof f) {
                            e = new f(v);
                            var r = e.points;
                            p(g.points, function(E, H) {
                                r[H] = [q + E[0] / z, x - E[1] / u]
                            });
                            return e
                        }
                        if (g instanceof d)
                            return new d(q + g.xmin / z,x - g.ymin / u,q + g.xmax / z,x - g.ymax / u,v);
                        if (g instanceof k) {
                            e = new k(v);
                            var B = e.paths, D;
                            p(g.paths, function(E, H) {
                                D = B[H] = [];
                                p(E, function(J, O) {
                                    D[O] = [q + J[0] / z, x - J[1] / u]
                                })
                            });
                            return e
                        }
                        if (g instanceof h) {
                            e = new h(v);
                            var G = e.rings, A;
                            p(g.rings, function(E, H) {
                                A = G[H] = [];
                                p(E, function(J, O) {
                                    A[O] = [q + J[0] / z, x - J[1] / u]
                                })
                            });
                            return e
                        }
                    }
                };
                b("extend-esri") && y.mixin(y.getObject("geometry", !0, w), c);
                return c
            })
        },
        "esri/layers/GraphicsLayer": function() {
            define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B, D, G, A, E, H, J, O) {
                var V = -1 !== c.renderer.toLowerCase().indexOf("svg")
                  , aa = -1 !== c.renderer.toLowerCase().indexOf("canvas")
                  , da = aa ? "canvas-2d" : c.renderer
                  , ea = 9 > z("ie");
                k = 10 === z("ie");
                var Y = void 0 === z("ie") && 7 == z("trident")
                  , ia = k || Y
                  , qa = z("esri-touch")
                  , wa = !!z("chrome")
                  , K = g.isWebGLEnabled()
                  , Z = V && z("esri-will-change")
                  , pa = K || aa;
                g = y(null, {
                    declaredClass: "esri.layers._GraphicsContainer",
                    _setMap: function(L, R) {
                        var ha = this._connects = [];
                        this._map = L;
                        this._useWillChange = this._useGlobalTransform = "css-transforms" === L.navigationMode && Z;
                        if (pa) {
                            var na = f.create("div", {
                                style: {
                                    position: "absolute",
                                    overflow: "visible"
                                }
                            }, R);
                            this._surface = {
                                getEventSource: function() {
                                    return na
                                }
                            };
                            aa && (ha.push(w.connect(na, "onmousedown", this, this._canvasDownHandler)),
                            ha.push(w.connect(na, "onmouseup", this, this._canvasUpHandler)),
                            ha.push(w.connect(na, "onclick", this, this._canvasClickHandler)));
                            K && (this._webglSurface = new q({
                                map: L,
                                node: na
                            }))
                        } else
                            na = (this._surface = c.createSurface(R, L.width, L.height)).getEventSource(),
                            this._useWillChange && d.set(na, "will-change", "transform"),
                            d.set(na = ea ? na.parentNode : na, {
                                overflow: "visible",
                                position: "absolute"
                            });
                        ha.push(w.connect(L, "onResize", this, "_onResizeHandler"));
                        this._useGlobalTransform && (ha.push(w.connect(L, "onPan", this, "_onPanHandler")),
                        ha.push(w.connect(L, "onPanEnd", this, "_onPanEndHandler")),
                        ha.push(w.connect(L, "onExtentChange", this, "_onExtentChangeHandler")));
                        return na
                    },
                    _reorderLayer: function(L, R, ha) {
                        R = R.getEventSource();
                        pa && "svg" === L.surfaceType && (R = R.parentNode);
                        f.place(R, this._surface.getEventSource(), ha)
                    },
                    _onPanHandler: function(L, R) {
                        var ha = this._map.__visibleRect;
                        L = ha.x + R.x;
                        R = ha.y + R.y;
                        this._panDx = L;
                        this._panDy = R;
                        pa || d.set(this._surface.getEventSource(), x._css.names.transform, x._css.translate(L, R))
                    },
                    _onPanEndHandler: function(L, R) {
                        R = this._map.__visibleRect;
                        L = R.x;
                        R = R.y;
                        this._panDx = L;
                        this._panDy = R;
                        pa || d.set(this._surface.getEventSource(), x._css.names.transform, x._css.translate(L, R))
                    },
                    _onExtentChangeHandler: function(L, R, ha, na) {
                        ha && (this._panDy = this._panDx = 0,
                        pa || d.set(this._surface.getEventSource(), x._css.names.transform, x._css.translate(0, 0)))
                    },
                    _getTransform: function() {
                        return {
                            dx: this._panDx || 0,
                            dy: this._panDy || 0
                        }
                    },
                    _onResizeHandler: function(L, R, ha) {
                        L = this._surface.getEventSource();
                        var na = this._map, ta;
                        ea && d.set(L = L.parentNode, {
                            width: R + "px",
                            height: ha + "px",
                            clip: "rect(0px " + R + "px " + ha + "px 0px)"
                        });
                        h.set(L, "width", R);
                        h.set(L, "height", ha);
                        this._surface.declaredClass || l.forEach(L.childNodes, function(xa) {
                            h.set(xa, "width", R);
                            h.set(xa, "height", ha)
                        });
                        na.loaded && (na.graphics.suspended || (na.graphics._resized = !0),
                        l.forEach(na.graphicsLayerIds, function(xa) {
                            ta = na.getLayer(xa);
                            ta.suspended || (ta._resized = !0,
                            ta._childLayer && (ta._childLayer._resized = !0));
                            ta._updateSVGFilters(null, null, R, ha)
                        }),
                        na.graphics._updateSVGFilters(null, null, R, ha),
                        na._labels && na._labels._updateSVGFilters(null, null, R, ha))
                    },
                    _cleanUp: function() {
                        l.forEach(this._connects, w.disconnect, w);
                        this._map = this._surface = null
                    },
                    _processEvent: function(L) {
                        var R = this._map;
                        L.screenPoint = new A(L.pageX - R.position.x,L.pageY - R.position.y);
                        L.mapPoint = R.toMap(L.screenPoint)
                    },
                    _canvasDownHandler: function(L) {
                        this._processEvent(L);
                        this._downPt = L.screenPoint.x + "," + L.screenPoint.y
                    },
                    _canvasUpHandler: function(L) {
                        this._processEvent(L);
                        this._upPt = L.screenPoint.x + "," + L.screenPoint.y
                    },
                    _tolerance: 15,
                    _isPrimaryMatch: function(L, R, ha, na) {
                        if (!L.visible || !R)
                            return !1;
                        var ta = R.getTransformedBoundingBox();
                        if (ta) {
                            var xa = new E(ta[0].x,ta[0].y,ta[2].x,ta[2].y);
                            delete xa.spatialReference;
                            return qa ? xa.intersects(ha) : xa.contains(na)
                        }
                        return l.some(R.children || [], function(Aa) {
                            ta = Aa.getTransformedBoundingBox();
                            xa = new E(ta[0].x,ta[0].y,ta[2].x,ta[2].y);
                            delete xa.spatialReference;
                            return qa ? xa.intersects(ha) : xa.contains(na)
                        })
                    },
                    _canvasClickHandler: function(L) {
                        if (this._downPt && this._upPt && this._downPt === this._upPt) {
                            this._processEvent(L);
                            var R = this._map
                              , ha = l.map(R.graphicsLayerIds, function(ka) {
                                return R.getLayer(ka)
                            });
                            ha.push(R.graphics);
                            ha.reverse();
                            ha = l.filter(ha, function(ka) {
                                return ka.loaded && !ka.hasWebGLSurface() && ka._mouseEvents && !ka.suspended && (!v.isDefined(ka.opacity) || 0 < ka.opacity)
                            });
                            var na = L.screenPoint
                              , ta = this._tolerance
                              , xa = na.x - ta
                              , Aa = na.y + ta
                              , ca = na.x + ta;
                            ta = na.y - ta;
                            var ja = new E(xa,ta,ca,Aa);
                            xa = R.toMap(new A(xa,Aa));
                            ca = R.toMap(new A(ca,ta));
                            Aa = xa.spatialReference._getInfo();
                            var X = new E(E.prototype._normalizeX(xa.x, Aa).x,xa.y,E.prototype._normalizeX(ca.x, Aa).x,ca.y,xa.spatialReference), oa;
                            delete ja.spatialReference;
                            l.some(ha, function(ka) {
                                ka = l.filter(ka.graphics, function(T) {
                                    return this._isPrimaryMatch(T, T.getDojoShape(), ja, na) || !(!T._bgShape || !this._isPrimaryMatch(T, T._bgShape, ja, na))
                                }, this);
                                ka.reverse();
                                if (0 < ka.length) {
                                    var Ea;
                                    l.some(ka, function(T) {
                                        return T.geometry && X.intersects(T.geometry) ? (Ea = T,
                                        !0) : !1
                                    });
                                    if (Ea)
                                        return oa = Ea,
                                        !0
                                }
                                return !1
                            }, this);
                            oa && (ha = oa.getLayer()) && (L.graphic = oa,
                            ha.onClick(L))
                        }
                    }
                });
                t = y(t, {
                    declaredClass: "esri.layers._GraphicsLayer",
                    managedSuspension: !0,
                    surfaceType: da,
                    webglEnabled: K,
                    renderer: null,
                    _eventMap: {
                        "graphic-add": ["graphic"],
                        "graphic-remove": ["graphic"],
                        "renderer-change": ["renderer"]
                    },
                    _suspendGraphics: !1,
                    constructor: function(L, R) {
                        L = L || {};
                        if (m.isString(L) || m.isObject(L) && (L.layerDefinition || L.query))
                            L = R;
                        this._params = m.mixin({
                            displayOnPan: !0,
                            drawMode: !0,
                            styling: !0
                        }, L);
                        R = this._params.dataAttributes;
                        "string" === typeof R && (R = [R]);
                        this.styling = V ? this._params.styling : !0;
                        this.dataAttributes = R;
                        this.infoTemplate = L && L.infoTemplate;
                        this.graphics = [];
                        this._draw = m.hitch(this, this._draw);
                        this._refresh = m.hitch(this, this._refresh);
                        this._acquireSVGMarker = m.hitch(this, this._acquireSVGMarker);
                        this._evalSurfaceType = m.hitch(this, this._evalSurfaceType);
                        this._setSurfaceType = m.hitch(this, this._setSurfaceType);
                        this.setWebGLEnabled(null != this._params.webglEnabled ? this._params.webglEnabled : this.webglEnabled);
                        this.registerConnectEvents()
                    },
                    getNode: function() {
                        return this._div && this._div.getEventSource()
                    },
                    setDrawMode: function(L) {
                        this._params.drawMode = L
                    },
                    suspendGraphics: function(L) {
                        this._suspendGraphics = L;
                        l.forEach(this.graphics, function(R) {
                            R._suspended = L
                        })
                    },
                    setWebGLEnabled: function(L) {
                        var R = this.webglEnabled;
                        this.webglEnabled = (L || !1) && K;
                        R !== this.webglEnabled && (this._evalSurfaceType(),
                        this.onWebGLEnabledChange())
                    },
                    hasWebGLSurface: function() {
                        return "webgl" === this.surfaceType
                    },
                    _getSurfaceType: function(L) {
                        return L && "webgl" === L.surfaceType ? "webgl" : da
                    },
                    _evalSurfaceType: function(L) {
                        K && (L ? this._setSurfaceType() : null == this._evalSurfaceTimerHandle && (this._evalSurfaceTimerHandle = setTimeout(this._setSurfaceType, 0)))
                    },
                    _hasPendingSurfaceEval: function() {
                        return !!this._evalSurfaceTimerHandle
                    },
                    _setSurfaceType: function() {
                        clearTimeout(this._evalSurfaceTimerHandle);
                        this._evalSurfaceTimerHandle = null;
                        var L = this._canUseWebGLSurface() ? "webgl" : da;
                        this.surfaceType !== L ? (this.surfaceType = L,
                        this._handleSurfaceChange(),
                        this.onSurfaceChange()) : this._pendingRedraw && this._redraw()
                    },
                    _handleSurfaceChange: function() {
                        this._cancelWebGLDepsLoad();
                        this._webglDepsPromise = this._prepareToAttach(this._map);
                        this._webglDepsPromise.always(m.hitch(this, function(L) {
                            this._webglDepsPromise = null;
                            L && "cancel" === L.dojoType || this._evalSurface()
                        }))
                    },
                    _cancelWebGLDepsLoad: function() {
                        this._webglDepsPromise && !this._webglDepsPromise.isFulfilled() && this._webglDepsPromise.cancel();
                        this._webglDepsPromise = null
                    },
                    _evalSurface: function() {
                        var L = this._map
                          , R = this._div;
                        L && R && this._getSurfaceType(R) !== this.surfaceType && (L._detachGraphicsLayer(this),
                        L._attachGraphicsLayer(this))
                    },
                    _canUseWebGLSurface: function(L) {
                        L = L || this._map;
                        return this.webglEnabled && (!L || L.webglEnabled && (L.ownsWebGLContext(this) || L.isWebGLContextAvailable())) && this._params.drawMode && this._isWebGLCompatible()
                    },
                    _isWebGLCompatible: function() {
                        return !1
                    },
                    _prepareToAttach: function(L) {
                        var R = new b;
                        !this.webglDeps && this._canUseWebGLSurface(L) ? C(["./support/webglDeps"], m.hitch(this, function(ha) {
                            this.webglDeps = ha;
                            R.isFulfilled() || R.resolve()
                        })) : R.resolve();
                        return R.promise
                    },
                    _setMap: function(L, R) {
                        this.inherited(arguments);
                        this._map = L;
                        this._evalSurfaceType(!0);
                        this._webglChangeMapHandle = L.on("webgl-enabled-change", m.hitch(this, function() {
                            this._evalSurfaceType()
                        }));
                        this._wrap = L.wrapAround180;
                        this._srInfo = L.spatialReference._getInfo();
                        this._svgFilters = {};
                        this._lineMarkers = {};
                        if (this.hasWebGLSurface())
                            L.acquireWebGLContext(this),
                            this._div = L._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer, L.width, L.height, this);
                        else {
                            if ("svg" === this.surfaceType)
                                if (pa) {
                                    R = c.createSurface(R.getEventSource(), L.width, L.height);
                                    var ha = R.getEventSource();
                                    d.set(ha, {
                                        position: "absolute",
                                        overflow: "visible",
                                        pointerEvents: "none"
                                    });
                                    L._gc._useWillChange && d.set(ha, "will-change", "transform");
                                    this._div = R.createGroup();
                                    d.set(this._div.getEventSource(), "pointer-events", "auto")
                                } else
                                    this._div = R.createGroup();
                            else
                                R = c.createSurface(R.getEventSource(), L.width, L.height),
                                d.set(R.rawNode, "position", "absolute"),
                                this._div = R.createGroup(),
                                this._renderProto = this._div.constructor.prototype._render,
                                this._div._render = m.hitch(this, this._canvasRender);
                            this._bgGroup = this._div.createGroup()
                        }
                        this._div.getEventSource().id = this.id + "_layer";
                        this._initOpacity();
                        return this._div
                    },
                    _unsetMap: function(L, R) {
                        L.releaseWebGLContext(this);
                        "webgl" === this._div.surfaceType ? L._gc._webglSurface.destroyRenderer(this._div) : (l.forEach(this.graphics, function(ha) {
                            ha._shape = null
                        }),
                        "svg" === this.surfaceType ? pa ? (R = this._div.parent,
                        this._div.clear(),
                        R.remove(this._div),
                        f.destroy(this._div.getEventSource()),
                        f.destroy(R.getEventSource())) : (this._div.clear(),
                        R.remove(this._div),
                        f.destroy(this._div.getEventSource())) : (R = this._div.getParent(),
                        R._parent = {},
                        f.destroy(R.rawNode),
                        R.destroy()));
                        this._map = this._div = this._svgFilters = this._lineMarkers = null;
                        this._pendingRedraw = !1;
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        clearTimeout(this._evalSurfaceTimerHandle);
                        this._evalSurfaceTimerHandle = null;
                        this._webglChangeMapHandle && this._webglChangeMapHandle.remove();
                        this._cancelWebGLDepsLoad();
                        this._disableDrawConnectors();
                        this.inherited(arguments)
                    },
                    _initOpacity: function() {
                        var L = this.opacity;
                        v.isDefined(L) && 1 > L && this.setOpacity(L, !0)
                    },
                    _onZoomStartHandler: function() {
                        this.hasWebGLSurface() || p.hide(this._div.getEventSource())
                    },
                    _onExtentChangeHandler: function(L, R, ha, na) {
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        ha ? (L = this._map.__visibleRect,
                        R = this._div,
                        this._evalSDRenderer(),
                        this._refresh(!0),
                        this._params._child || this._updateTransform(R, L.x, L.y, !0),
                        this._renderProto && R.surface.pendingRender ? this._dirty = !0 : this.suspended || p.show(R.getEventSource())) : this._resized && (this._resized = !1,
                        this._refresh(!1));
                        if (0 < this.graphics.length)
                            this.onUpdate()
                    },
                    _canvasRender: function() {
                        var L = this._div;
                        this._dirty && (delete this._dirty,
                        this.suspended || p.show(L.getEventSource()));
                        return this._renderProto.apply(L, arguments)
                    },
                    _refresh: function(L) {
                        if (!this.hasWebGLSurface()) {
                            var R = this.graphics, ha = R.length, na, ta = this._draw;
                            for (na = 0; na < ha; na++)
                                ta(R[na], L)
                        }
                    },
                    refresh: function() {
                        this._refresh(!0)
                    },
                    _redraw: function() {
                        this._pendingRedraw = !1;
                        this.hasWebGLSurface() ? this._div && this._div.redraw() : this._refresh(!0)
                    },
                    redraw: function() {
                        this._hasPendingSurfaceEval() ? this._pendingRedraw = !0 : this._redraw()
                    },
                    hasLocalNavigationTransform: function() {
                        return !(this._map && this._map._gc._useGlobalTransform)
                    },
                    getNavigationTransform: function() {
                        var L = {
                            dx: 0,
                            dy: 0
                        };
                        this._map && (this.hasLocalNavigationTransform() ? this._div && !this.hasWebGLSurface() && (L = this._div.getTransform()) : L = this._map._gc._getTransform());
                        return L
                    },
                    _onPanHandler: function(L, R) {
                        this._panDx = R.x;
                        this._panDy = R.y;
                        L = this._map.__visibleRect;
                        this._updateTransform(this._div, L.x + R.x, L.y + R.y);
                        Y && this._updateSVGMarkers()
                    },
                    _onPanEndUpdateHandler: function(L, R) {
                        L = this._map.__visibleRect;
                        this._params._child || R.x === this._panDx && R.y === this._panDy ? (this._updateSVGFilters(-L.x, -L.y),
                        this._updateSVGMarkers()) : this._updateTransform(this._div, L.x, L.y, !0);
                        this._refresh(!1);
                        if (this.graphics.length)
                            this.onUpdate()
                    },
                    _onPanStartHandler: function() {
                        p.hide(this._div.getEventSource())
                    },
                    _onPanEndHandler: function() {
                        var L = this._map.__visibleRect
                          , R = this._div;
                        this._updateTransform(R, L.x, L.y, !0);
                        this._refresh(!1);
                        this._renderProto && R.surface.pendingRender ? this._dirty = !0 : p.show(R.getEventSource());
                        if (this.graphics.length)
                            this.onUpdate()
                    },
                    _updateTransform: function(L, R, ha, na) {
                        this.hasWebGLSurface() || (this.hasLocalNavigationTransform() ? L.setTransform(e.translate({
                            x: R,
                            y: ha
                        })) : pa && d.set(this._div.parent.getEventSource(), x._css.names.transform, x._css.translate(R, ha)),
                        na && (this._updateSVGFilters(-R, -ha),
                        this._updateSVGMarkers()))
                    },
                    onSuspend: function() {
                        this.inherited(arguments);
                        p.hide(this._div.getEventSource());
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        this._disableDrawConnectors()
                    },
                    onResume: function(L) {
                        this.inherited(arguments);
                        L.firstOccurrence && this._evalSDRenderer();
                        this._enableDrawConnectors();
                        this._wakeTimer = this._wakeTimer || setTimeout(m.hitch(this, function() {
                            this.suspended || this._map.__zooming || this._onExtentChangeHandler(null, null, !0)
                        }), 0)
                    },
                    _enableDrawConnectors: function() {
                        var L = this._map
                          , R = w.connect;
                        this._disableDrawConnectors();
                        this._params.displayOnPan ? (this._params._child || (this._onPanHandler_connect = R(L, "onPan", this, "_onPanHandler")),
                        this._onPanEndHandler_connect = R(L, "onPanEnd", this, "_onPanEndUpdateHandler")) : (this._onPanStartHandler_connect = R(L, "onPanStart", this, "_onPanStartHandler"),
                        this._onPanEndHandler_connect = R(L, "onPanEnd", this, "_onPanEndHandler"));
                        this._onZoomStartHandler_connect = R(L, "onZoomStart", this, "_onZoomStartHandler");
                        this._onExtentChangeHandler_connect = R(L, "onExtentChange", this, "_onExtentChangeHandler")
                    },
                    _disableDrawConnectors: function() {
                        var L = w.disconnect;
                        L(this._onExtentChangeHandler_connect);
                        L(this._onZoomStartHandler_connect);
                        L(this._onPanHandler_connect);
                        L(this._onPanStartHandler_connect);
                        L(this._onPanEndHandler_connect);
                        this._onExtentChangeHandler_connect = this._onZoomStartHandler_connect = this._onPanHandler_connect = this._onPanStartHandler_connect = this._onPanEndHandler_connect = null
                    },
                    _updateExtent: function(L) {
                        var R = L.geometry;
                        if (!R)
                            L._extent = null;
                        else if (!(L._extent = R.getExtent())) {
                            if ("esri.geometry.Point" === R.declaredClass) {
                                var ha = R.x;
                                var na = R.y
                            } else if ("esri.geometry.Multipoint" === R.declaredClass)
                                ha = R.points[0][0],
                                na = R.points[0][1];
                            else {
                                L._extent = null;
                                return
                            }
                            L._extent = new E(ha,na,ha,na,R.spatialReference)
                        }
                    },
                    _intersects: function(L, R, ha) {
                        var na = L.spatialReference
                          , ta = R.spatialReference
                          , xa = na && ta && !na.equals(ta) && na._canProject(ta) && 4326 === ta.wkid;
                        if (this._wrap && !ha) {
                            ha = [];
                            na = L._getFrameWidth();
                            var Aa = this._srInfo, ca = L._clip ? L._getAvailExtent() : L.extent, ja, X = [];
                            var oa = R._partwise;
                            xa && (ca = L.geographicExtent,
                            Aa = ta._getInfo());
                            L = ca._getParts(Aa);
                            if (oa && oa.length)
                                for (R = [],
                                ta = 0,
                                xa = oa.length; ta < xa; ta++)
                                    R = R.concat(oa[ta]._getParts(Aa));
                            else
                                R = R._getParts(Aa);
                            ta = 0;
                            for (xa = R.length; ta < xa; ta++) {
                                var ka = R[ta];
                                Aa = 0;
                                for (ca = L.length; Aa < ca; Aa++) {
                                    var Ea = L[Aa];
                                    if (Ea.extent.intersects(ka.extent))
                                        for (oa = 0,
                                        ja = ka.frameIds.length; oa < ja; oa++)
                                            ha.push((Ea.frameIds[0] - ka.frameIds[oa]) * na)
                                }
                            }
                            ta = 0;
                            for (xa = ha.length; ta < xa; ta++)
                                oa = ha[ta],
                                l.indexOf(ha, oa) === ta && X.push(oa);
                            return X.length ? X : null
                        }
                        return (xa ? L.geographicExtent : L.extent).intersects(R) ? [0] : null
                    },
                    _defaultMarker: {
                        type: "simplemarkersymbol",
                        style: "square",
                        size: 1,
                        xoffset: 0,
                        yoffset: 0,
                        angle: 0
                    },
                    _draw: function(L, R) {
                        if (!this.hasWebGLSurface() && this._params.drawMode && this._map && !this.suspended && !this._map.__zooming && !this._resized)
                            try {
                                var ha = L._extent, na, ta, xa = !V || this.styling, Aa = V && this.dataAttributes, ca = L.getDojoShape(), ja;
                                if (!L._suspended && L.visible && ha && (na = this._intersects(this._map, ha, L.geometry._originOnly)) && (ta = xa ? this._getSymbol(L) : this._defaultMarker)) {
                                    if (L._offsets && L._offsets.join(",") === na.join(",") ? ja = !0 : L._offsets = na,
                                    !ca || R || !ja) {
                                        var X = L.geometry.type;
                                        R = {
                                            graphic: L
                                        };
                                        var oa = L._bgShape
                                          , ka = xa && !L.symbol ? this._getRenderer(L) : null
                                          , Ea = ka && ka.backgroundFillSymbol;
                                        if ("point" === X)
                                            this._isInvalidShape(ta, ca) && this._removeShape(L),
                                            L._shape = this._drawPoint(this._div, L.geometry, ta, L.getDojoShape(), na, ka, L),
                                            xa && this._symbolizePoint(L.getDojoShape(), ta, ka, L);
                                        else if ("multipoint" === X)
                                            this._drawMarkers(L, ta, na, ka),
                                            xa && this._symbolizeMarkers(L, ta, ka);
                                        else {
                                            var T;
                                            X = ta;
                                            var U;
                                            xa && (X = (T = "simplemarkersymbol" === ta.type || "picturemarkersymbol" === ta.type || "textsymbol" === ta.type ? ta : null) ? Ea : ta);
                                            if (xa && X && -1 < X.type.indexOf("fillsymbol")) {
                                                var ma = this._bgGroup;
                                                var sa = !(!ma || !T)
                                            }
                                            oa && !sa && this._removeBgShape(L);
                                            if (X) {
                                                !sa && (this._isInvalidShape(X, L._shape) || L._shape && L._shape._isCentroidMarker) && this._removeShape(L, !1);
                                                if (U = this._drawShape(L, na, ma || this._div, sa ? oa : L.getDojoShape()))
                                                    U._isCentroidMarker = !1;
                                                xa && this._symbolizeShape(U, X, ka, X === Ea, L);
                                                L[sa ? "_bgShape" : "_shape"] = U
                                            }
                                            if (T) {
                                                (this._isInvalidShape(T, L._shape) || L._shape && !L._shape._isCentroidMarker) && this._removeShape(L, !1);
                                                var ya = L.geometry.getCentroid();
                                                if (U = ya && this._drawPoint(this._div, ya, T, L._shape, na, ka, L))
                                                    U._isCentroidMarker = !0,
                                                    this._symbolizePoint(U, T, ka, L);
                                                L._shape = U
                                            }
                                        }
                                        aa || (L._bgShape && this._initNode(L, L._bgShape, L._bgShape !== oa, R, Aa),
                                        L._shape && this._initNode(L, L._shape, L._shape !== ca, R, Aa));
                                        L._applyDataAttrs();
                                        R.node = L.getNode();
                                        this.onGraphicDraw(R)
                                    }
                                } else
                                    ca && this._removeShape(L)
                            } catch (Oa) {
                                this._errorHandler(Oa, L)
                            }
                    },
                    _initNode: function(L, R, ha, na, ta) {
                        if (R = R && R.getNode())
                            R.e_graphic = L,
                            this._addDataAttrs(L, ta, R),
                            ha && (na.node = R,
                            this.onGraphicNodeAdd(na))
                    },
                    _removeShape: function(L, R, ha) {
                        var na = L.getDojoShape()
                          , ta = na && na.getNode();
                        na && !ha && (na.removeShape(),
                        na.destroy());
                        L._shape = L._offsets = null;
                        !1 !== R && this._removeBgShape(L, ha);
                        if (ta && (ta.e_graphic = null,
                        !aa))
                            this.onGraphicNodeRemove({
                                graphic: L,
                                node: ta
                            })
                    },
                    _removeBgShape: function(L, R) {
                        var ha = L._bgShape
                          , na = ha && ha.getNode();
                        ha && !R && (ha.removeShape(),
                        ha.destroy());
                        L._bgShape = null;
                        if (na && (na.e_graphic = null,
                        !aa))
                            this.onGraphicNodeRemove({
                                graphic: L,
                                node: na
                            })
                    },
                    _addDataAttrs: function(L, R, ha) {
                        var na = L.attributes, ta, xa = R ? R.length : 0, Aa = this._getRenderer(L);
                        if (ha && na) {
                            for (ta = 0; ta < xa; ta++)
                                (ha = R[ta]) && L.attr("data-" + ha, na[ha]);
                            !this.styling && Aa && (Aa.getBreakIndex ? (R = Aa.getBreakIndex(L),
                            L.attr("data-class-break", -1 !== R ? R : null)) : Aa.getUniqueValueInfo && (R = Aa.getUniqueValueInfo(L),
                            L.attr("data-unique-value", R ? R.value : null)))
                        }
                    },
                    _drawShape: function(L, R, ha, na) {
                        L = L.geometry;
                        var ta = L.type
                          , xa = this._map
                          , Aa = xa.extent
                          , ca = xa.width
                          , ja = xa.height;
                        xa = xa.__visibleRect;
                        var X = [], oa;
                        var ka = "extent" === ta;
                        if ("rect" === ta || ka)
                            X = {
                                x: 0,
                                y: 0,
                                spatialReference: L.spatialReference
                            },
                            X.x = ka ? L.xmin : L.x,
                            X.y = ka ? L.ymax : L.y,
                            ta = J.toScreenPoint(Aa, ca, ja, X),
                            X.x = ka ? L.xmax : L.x + L.width,
                            X.y = ka ? L.ymin : L.y + L.height,
                            L = J.toScreenPoint(Aa, ca, ja, X),
                            R = {
                                x: ta.x - xa.x + R[0],
                                y: ta.y - xa.y,
                                width: Math.abs(L.x - ta.x),
                                height: Math.abs(L.y - ta.y)
                            },
                            0 === R.width && (R.width = 1),
                            0 === R.height && (R.height = 1),
                            na = this._drawRect(ha, na, R);
                        else if ("polyline" === ta || "polygon" === ta) {
                            ka = 0;
                            for (oa = R.length; ka < oa; ka++)
                                X = X.concat(J._toScreenPath(Aa, ca, ja, L, -xa.x + R[ka], -xa.y));
                            na = this._drawPath(ha, na, X);
                            this._rendererLimits && ("polyline" === ta ? this._clipPolyline(na, L) : this._clipPolygon(na, L))
                        }
                        return na
                    },
                    _drawRect: function(L, R, ha) {
                        return R ? R.setShape(ha) : L.createRect(ha)
                    },
                    _drawImage: function(L, R, ha) {
                        return R ? R.setShape(ha) : L.createImage(ha)
                    },
                    _drawCircle: function(L, R, ha) {
                        return R ? R.setShape(ha) : L.createCircle(ha)
                    },
                    _drawPath: function() {
                        return ea ? function(L, R, ha, na) {
                            ha = na ? ha : ha.join(" ");
                            if (R)
                                return R.setShape(ha);
                            R = L.createObject(na ? c.Path : c.EsriPath, ha);
                            L._overrideSize(R.getEventSource());
                            return R
                        }
                        : function(L, R, ha, na) {
                            ha = na ? ha : ha.join(" ");
                            return R ? R.setShape(ha) : L.createPath(ha)
                        }
                    }(),
                    _drawText: function(L, R, ha) {
                        return R ? R.setShape(ha) : L.createText(ha)
                    },
                    _evalSDRenderer: function(L) {
                        var R = this._map, ha = this.renderer, na, ta = this._rndForScale;
                        R && R.loaded && ha && ha.getRendererInfo && (na = "zoom" === ha.rangeType ? ha.getRendererInfoByZoom(R.getZoom()) : ha.getRendererInfoByScale(R.getScale()));
                        this._rndForScale = na && na.renderer;
                        L || this._rndForScale == ta || this.emit("renderer-change", {
                            renderer: this._rndForScale
                        })
                    },
                    _getRenderer: function(L) {
                        var R = this._rndForScale || this.renderer;
                        L && R && R.getObservationRenderer && (R = R.getObservationRenderer(L));
                        return R
                    },
                    _getSymbol: function(L) {
                        var R = this._getRenderer();
                        return L.symbol || R && R.getSymbol(L)
                    },
                    _getVariable: function(L, R, ha) {
                        if (L)
                            var na = (L = L.getVisualVariablesForType(R, ha)) && L[0];
                        return na
                    },
                    _applyOpacity: function(L, R, ha, na) {
                        R = R.getOpacity(na, {
                            opacityInfo: ha
                        });
                        null != R && (L = new u(L),
                        L.a = R);
                        return L
                    },
                    _symbolizeShape: function(L, R, ha, na, ta) {
                        var xa = R.getStroke()
                          , Aa = R.getFill()
                          , ca = R.type
                          , ja = -1 !== ca.indexOf("linesymbol")
                          , X = -1 !== ca.indexOf("fillsymbol") ? null : this._getVariable(ha, "sizeInfo", !1)
                          , oa = this._getVariable(ha, "colorInfo", !1)
                          , ka = this._getVariable(ha, "opacityInfo", !1)
                          , Ea = ja ? "none" !== R.style : R.outline && "none" !== R.outline.style
                          , T = ja ? null : this._getVariable(ha, "sizeInfo", "outline");
                        X = (X = na ? T : T || X) ? ha.getSize(ta, {
                            sizeInfo: X,
                            resolution: this._map.getResolutionInMeters(),
                            scale: this._map.getScale()
                        }) : null;
                        na && (oa = ka = null);
                        if ((oa || ka) && "picturefillsymbol" !== ca)
                            if (ja) {
                                var U = xa && xa.color;
                                oa && (U = ha.getColor(ta, {
                                    colorInfo: oa
                                }) || U);
                                U && ka && (U = this._applyOpacity(U, ha, ka, ta))
                            } else if (Aa && Aa.toCss) {
                                var ma = Aa;
                                oa && (ma = ha.getColor(ta, {
                                    colorInfo: oa
                                }) || ma);
                                ma && ka && (ma = this._applyOpacity(ma, ha, ka, ta))
                            }
                        L.setStroke(!Ea || null == X && !U ? xa : m.mixin({}, xa, null != X ? {
                            width: X
                        } : null, U && {
                            color: U
                        })).setFill(ma || Aa);
                        ja && D.applyLineMarker(L, R, U, this._acquireSVGMarker)
                    },
                    _smsToPath: function() {
                        return ea ? function(L, R, ha, na, ta, xa, Aa, ca, ja) {
                            switch (R) {
                            case L.STYLE_SQUARE:
                                return ["M", ta + "," + Aa, "L", xa + "," + Aa, xa + "," + ca, ta + "," + ca, "X", "E"];
                            case L.STYLE_CROSS:
                                return ["M", ha + "," + Aa, "L", ha + "," + ca, "M", ta + "," + na, "L", xa + "," + na, "E"];
                            case L.STYLE_X:
                                return ["M", ta + "," + Aa, "L", xa + "," + ca, "M", ta + "," + ca, "L", xa + "," + Aa, "E"];
                            case L.STYLE_DIAMOND:
                                return ["M", ha + "," + Aa, "L", xa + "," + na, ha + "," + ca, ta + "," + na, "X", "E"];
                            case L.STYLE_TARGET:
                                return ["M", ta + "," + Aa, "L", xa + "," + Aa, xa + "," + ca, ta + "," + ca, ta + "," + Aa, "M", ta - ja + "," + na, "L", ta + "," + na, "M", ha + "," + (Aa - ja), "L", ha + "," + Aa, "M", xa + ja + "," + na, "L", xa + "," + na, "M", ha + "," + (ca + ja), "L", ha + "," + ca, "E"]
                            }
                        }
                        : function(L, R, ha, na, ta, xa, Aa, ca, ja) {
                            switch (R) {
                            case L.STYLE_SQUARE:
                                return ["M", ta + "," + Aa, xa + "," + Aa, xa + "," + ca, ta + "," + ca, "Z"];
                            case L.STYLE_TRIANGLE:
                                return ["M", ha + "," + Aa, xa + "," + ca, ta + "," + ca, "Z"];
                            case L.STYLE_CROSS:
                                return ["M", ha + "," + Aa, ha + "," + ca, "M", ta + "," + na, xa + "," + na];
                            case L.STYLE_X:
                                return ["M", ta + "," + Aa, xa + "," + ca, "M", ta + "," + ca, xa + "," + Aa];
                            case L.STYLE_DIAMOND:
                                return ["M", ha + "," + Aa, xa + "," + na, ha + "," + ca, ta + "," + na, "Z"];
                            case L.STYLE_TARGET:
                                return L = ["M", ta + "," + Aa, xa + "," + Aa, xa + "," + ca, ta + "," + ca, ta + "," + Aa],
                                ja && L.push("M", ta - ja + "," + na, ta + "," + na, "M", ha + "," + (Aa - ja), ha + "," + Aa, "M", xa + ja + "," + na, xa + "," + na, "M", ha + "," + (ca + ja), ha + "," + ca),
                                L
                            }
                        }
                    }(),
                    _pathStyles: {
                        square: 1,
                        cross: 1,
                        x: 1,
                        diamond: 1,
                        target: 1
                    },
                    _typeMaps: {
                        picturemarkersymbol: "image",
                        picturefillsymbol: "path",
                        simplefillsymbol: "path",
                        simplelinesymbol: "path",
                        cartographiclinesymbol: "path",
                        textsymbol: "text"
                    },
                    _isInvalidShape: function(L, R) {
                        R = R && R.shape && R.shape.type;
                        var ha = L && L.type;
                        L = L && L.style;
                        "rect" === R && (R = "path");
                        ha && (L = this._typeMaps[ha] || L);
                        this._pathStyles[L] && (L = "path");
                        return "shieldlabelsymbol" === ha ? !0 : !(!R || !L || R === L)
                    },
                    _reArialFont: /\s*(^|,)\s*arial\s*(,|$)\s*/i,
                    _fallbackFont: "Arial",
                    _drawPoint: function(L, R, ha, na, ta, xa, Aa) {
                        var ca = ha.type
                          , ja = this._map
                          , X = ja.__visibleRect
                          , oa = J.toScreenPoint(ja.extent, ja.width, ja.height, R).offset(-X.x + ta[0], -X.y);
                        X = oa.x;
                        var ka = oa.y;
                        R = [];
                        var Ea = this._getVariable(xa, "rotationInfo", !1);
                        Ea = Ea ? xa.getRotationAngle(Aa, {
                            rotationInfo: Ea
                        }) : null;
                        var T = this._getVariable(xa, "sizeInfo", !1);
                        ja = null != Aa.size ? Aa.size : T && xa.getSize(Aa, {
                            sizeInfo: T,
                            shape: ha.style,
                            resolution: ja.getResolutionInMeters(),
                            scale: ja.getScale()
                        });
                        Ea && R.push(e.rotategAt(Ea, oa));
                        if (0 !== ha.xoffset || 0 !== ha.yoffset) {
                            var U = e.translate(ha.xoffset, -ha.yoffset);
                            R.push(U)
                        }
                        0 !== ha.angle && R.push(e.rotategAt(ha.angle, oa));
                        if ("simplemarkersymbol" === ca) {
                            var ma = ha.style;
                            xa = Math.round;
                            null != ja ? U && (null != U.dx && (U.dx = U.dx / ha.size * ja),
                            null != U.dy && (U.dy = U.dy / ha.size * ja)) : ja = ha.size;
                            switch (ma) {
                            case B.STYLE_SQUARE:
                            case B.STYLE_TRIANGLE:
                            case B.STYLE_CROSS:
                            case B.STYLE_X:
                            case B.STYLE_DIAMOND:
                                ha = isNaN(ja) ? 16 : ja / 2;
                                ma = this._drawPath(L, na, this._smsToPath(B, ma, X, ka, xa(X - ha), xa(X + ha), xa(ka - ha), xa(ka + ha)));
                                break;
                            case B.STYLE_TARGET:
                                Aa = ha._targetWidth / 2;
                                U = ha._targetHeight / 2;
                                ma = this._drawPath(L, na, this._smsToPath(B, ma, X, ka, xa(X - Aa), xa(X + Aa), xa(ka - U), xa(ka + U), ha._spikeSize));
                                break;
                            case B.STYLE_PATH:
                                ma = this._drawPath(L, na, ha.path, !0);
                                ha = ma.getBoundingBox();
                                L = this._getScaleMatrix(ha, ja);
                                1 === L.xx && 1 === L.yy || R.push(e.scaleAt(L.xx, L.yy, oa));
                                R.push(e.translate(-(ha.x + ha.width / 2) + X, -(ha.y + ha.height / 2) + ka));
                                break;
                            default:
                                ha = isNaN(ja) ? 16 : ja / 2,
                                ma = this._drawCircle(L, na, {
                                    cx: X,
                                    cy: ka,
                                    r: ha
                                })
                            }
                        } else if ("shieldlabelsymbol" === ca)
                            ma = ha.width,
                            oa = ha.height,
                            na = L.createGroup(),
                            ma = L.createImage({
                                x: X - ma / 2,
                                y: ka - oa / 2,
                                width: ma,
                                height: oa,
                                src: ha.url
                            }),
                            na.add(ma),
                            null != ha.font && (ka += .2 * ha.getHeight(),
                            L = L.createText({
                                type: "text",
                                text: ha.text,
                                x: X,
                                y: ka,
                                align: "middle",
                                decoration: ha.decoration,
                                rotated: ha.rotated,
                                kerning: ha.kerning
                            }),
                            L.setFont(ha.font),
                            L.setFill(ha.color),
                            na.add(L)),
                            ma = na;
                        else if ("picturemarkersymbol" === ca) {
                            if (null == ja ? (ma = ha.width,
                            oa = ha.height) : (oa = ja,
                            ma = ha.width / ha.height * oa,
                            U && (null != U.dx && (U.dx = U.dx / ha.width * ma),
                            null != U.dy && (U.dy = U.dy / ha.height * oa))),
                            ma = this._drawImage(L, na, {
                                x: X - ma / 2,
                                y: ka - oa / 2,
                                width: ma,
                                height: oa,
                                src: ha.url
                            }),
                            V && (L = ma.getNode()))
                                ha = (ha = this._getVariable(xa, "opacityInfo", !1)) ? xa.getOpacity(Aa, {
                                    opacityInfo: ha
                                }) : null,
                                null != ha ? L.setAttribute("opacity", ha) : L.setAttribute("opacity", 1)
                        } else if ("textsymbol" === ca) {
                            if (xa = ha.font) {
                                ma = null != ja;
                                Aa = xa.family && !this._reArialFont.test(xa.family);
                                if (ma || Aa || aa)
                                    xa = new xa.constructor(xa.toJson());
                                ma && xa.setSize(ja);
                                aa && (xa.size += "px");
                                Aa && xa.setFamily(xa.family + "," + this._fallbackFont)
                            }
                            ma = this._drawText(L, na, {
                                type: "text",
                                text: ha.text,
                                x: X,
                                y: ka,
                                align: ha.getSVGAlign(),
                                decoration: ha.decoration || xa && xa.decoration,
                                rotated: ha.rotated,
                                kerning: ha.kerning
                            });
                            xa && ma.setFont(xa);
                            V && (L = ma.getNode(),
                            X = ha.getSVGBaseline(),
                            ka = ha.getSVGBaselineShift(),
                            L && (L.setAttribute("dominant-baseline", X),
                            ka && L.setAttribute("baseline-shift", ka),
                            this._applyHalo(ma, ha.haloColor, ha.haloSize)))
                        }
                        ma.setTransform(e.multiply(R));
                        ma._wrapOffsets = ta;
                        return ma
                    },
                    _acquireSVGMarker: function(L, R, ha, na) {
                        L = this._getSVGMarkerId(R, na);
                        var ta = this._getSVGMarker(L);
                        ta || (ta = D.createSVGMarker(R, L, ha, na),
                        this._div.getParent().defNode.appendChild(ta),
                        this._lineMarkers[L] = ta);
                        return ta
                    },
                    _getSVGMarkerId: function(L, R) {
                        return "marker_" + this._map.id + "_" + L.r + "_" + L.g + "_" + L.b + "_" + R
                    },
                    _getSVGMarker: function(L) {
                        return this._lineMarkers[L]
                    },
                    _updateSVGMarkers: function() {
                        if (V && ia) {
                            var L = this._lineMarkers, R;
                            for (R in L) {
                                var ha = L[R];
                                ha.setAttribute("id", R + "_temp");
                                ha.setAttribute("id", R)
                            }
                        }
                    },
                    _applyHalo: function(L, R, ha) {
                        var na = R && ha ? this._getHaloId(R, ha) : null;
                        L.setFilter(R && ha ? z("webkit") || z("ff") ? this._getDilateFilter(R, ha, na) : this._getOffsetFilter(R, ha, na) : null)
                    },
                    _getDilateFilter: function(L, R, ha) {
                        var na = this._getSVGFilter(ha);
                        na || (na = this._createSVGFilter({
                            id: ha
                        }, [n.feMorphology({
                            operator: "dilate",
                            radius: R,
                            result: "dilated"
                        }), n.feFlood({
                            "flood-color": L.toCss(!0)
                        }), n.feComposite({
                            in2: "dilated",
                            operator: "in",
                            result: "composite"
                        }), n.feMerge("composite", "SourceGraphic")]));
                        return na
                    },
                    _getOffsetFilter: function(L, R, ha) {
                        var na = this._getSVGFilter(ha);
                        if (!na) {
                            L = L.toCss(!0);
                            na = this._offsetPrimitives;
                            var ta, xa = na.length, Aa = [], ca = [];
                            for (ta = 0; ta < xa; ta++) {
                                var ja = na[ta]
                                  , X = "offset" + ja.dir
                                  , oa = "composite" + ja.dir;
                                ca.push(oa);
                                Aa.push(n.feOffset({
                                    dx: ja.dx * R,
                                    dy: ja.dy * R,
                                    "in": "SourceAlpha",
                                    result: X
                                }), n.feFlood({
                                    "flood-color": L
                                }), n.feComposite({
                                    in2: X,
                                    operator: "in",
                                    result: oa
                                }))
                            }
                            ca.push("SourceGraphic");
                            Aa.push(n.feMerge.apply(n.feMerge, ca));
                            na = this._createSVGFilter({
                                id: ha
                            }, Aa)
                        }
                        return na
                    },
                    _offsetPrimitives: [{
                        dir: "L",
                        dx: -1,
                        dy: 0
                    }, {
                        dir: "TL",
                        dx: -1,
                        dy: -1
                    }, {
                        dir: "T",
                        dx: 0,
                        dy: -1
                    }, {
                        dir: "TR",
                        dx: 1,
                        dy: -1
                    }, {
                        dir: "R",
                        dx: 1,
                        dy: 0
                    }, {
                        dir: "BR",
                        dx: 1,
                        dy: 1
                    }, {
                        dir: "B",
                        dx: 0,
                        dy: 1
                    }, {
                        dir: "BL",
                        dx: -1,
                        dy: 1
                    }],
                    _getHaloId: function(L, R) {
                        return "halo_" + this._map.id + "_" + this.id + "_" + L.r + "_" + L.g + "_" + L.b + "_" + L.a + "_" + R
                    },
                    _getSVGFilter: function(L) {
                        return this._svgFilters[L]
                    },
                    _createSVGFilter: function(L, R) {
                        R = n.createFilter(L, R);
                        var ha = this._map
                          , na = ha.__visibleRect;
                        R.x = -na.x;
                        R.y = -na.y;
                        R.width = ha.width;
                        R.height = ha.height;
                        return this._svgFilters[L.id] = R
                    },
                    _updateSVGFilters: function(L, R, ha, na) {
                        var ta = this._svgFilters, xa, Aa, ca;
                        for (Aa in ta)
                            if (xa = ta[Aa]) {
                                if (ca = a.byId(Aa))
                                    null != L && ca.setAttribute("x", L),
                                    null != R && ca.setAttribute("y", R),
                                    null != ha && ca.setAttribute("width", ha),
                                    null != na && ca.setAttribute("height", na);
                                null != L && (xa.x = L);
                                null != R && (xa.y = R);
                                null != ha && (xa.width = ha);
                                null != na && (xa.height = na)
                            }
                    },
                    _getScaleMatrix: function(L, R) {
                        var ha = L.width / L.height
                          , na = 1
                          , ta = 1;
                        isNaN(R) || (1 < ha ? (na = R / L.width,
                        ta = R / ha / L.height) : (ta = R / L.height,
                        na = R * ha / L.width));
                        return {
                            xx: na,
                            yy: ta
                        }
                    },
                    _symbolizePoint: function(L, R, ha, na) {
                        var ta = R.type
                          , xa = R.style;
                        if ("shieldlabelsymbol" !== ta && "picturemarkersymbol" !== ta) {
                            var Aa = R.getStroke();
                            R = R.getFill();
                            xa = xa === B.STYLE_X || xa === B.STYLE_CROSS;
                            var ca = Aa && Aa.color
                              , ja = xa ? ca : R;
                            if (ha) {
                                var X = this._getVariable(ha, "colorInfo", !1)
                                  , oa = this._getVariable(ha, "opacityInfo", !1);
                                X && (ja = ha.getColor(na, {
                                    colorInfo: X
                                }) || ja);
                                ja && oa && (ja = this._applyOpacity(ja, ha, oa, na));
                                ja && (xa ? ja !== ca && (Aa = Aa ? m.mixin({}, Aa) : {},
                                Aa.color = ja) : ja !== R && (R = ja))
                            }
                            "textsymbol" === ta ? L.setFill(R) : "simplemarkersymbol" === ta && L.setFill(R).setStroke(Aa)
                        }
                    },
                    _drawMarkers: function(L, R, ha, na) {
                        var ta = L.geometry, xa = ta.points, Aa = L.getDojoShape() || this._div.createGroup(), ca, ja = xa.length, X = [], oa = 0, ka, Ea = ha ? ha.length : 0;
                        Aa.children[0] && this._isInvalidShape(R, Aa.children[0]) && Aa.clear();
                        for (ca = 0; ca < ja; ca++) {
                            var T = xa[ca];
                            for (ka = 0; ka < Ea; ka++)
                                X[0] = ha[ka],
                                this._drawPoint(Aa, {
                                    x: T[0],
                                    y: T[1],
                                    spatialReference: ta.spatialReference
                                }, R, Aa.children[oa++], X, na, L)
                        }
                        R = Aa.children.length;
                        if (ja * ha.length < R)
                            for (ca = R - 1; ca >= ja * ha.length; ca--)
                                Aa.children[ca].removeShape();
                        L._shape = Aa
                    },
                    _symbolizeMarkers: function(L, R, ha) {
                        var na = L.getDojoShape().children, ta, xa = na.length;
                        for (ta = 0; ta < xa; ta++)
                            this._symbolizePoint(na[ta], R, ha, L)
                    },
                    _errorHandler: function(L, R) {
                        R && (L.message = "Unable to draw graphic (geometry:" + (R.geometry ? R.geometry.declaredClass : null) + ", symbol:" + (R.symbol ? R.symbol.declaredClass : null) + "): " + L.message);
                        this.inherited(arguments)
                    },
                    _rendererLimits: function() {
                        if (ea) {
                            var L = 1E5;
                            var R = -1E5;
                            var ha = 1E5
                        } else
                            z("chrome") && 6 > z("chrome") && (L = 8150,
                            R = -1E4,
                            ha = 1E4);
                        if (L)
                            return {
                                clipLimit: L,
                                rangeMin: R,
                                rangeMax: ha,
                                clipBBox: [-L, -L, L, L],
                                clipSegments: [[[-L, -L], [L, -L]], [[L, -L], [L, L]], [[L, L], [-L, L]], [[-L, L], [-L, -L]]]
                            }
                    }(),
                    _clipPolyline: function(L, R) {
                        R = this._getCorners(L, R);
                        var ha = R.br
                          , na = this._rendererLimits
                          , ta = na.rangeMin
                          , xa = na.rangeMax
                          , Aa = na.clipBBox
                          , ca = na.clipSegments;
                        na = this._isPointWithinRange;
                        var ja = this._isPointWithinBBox
                          , X = this._getClipperIntersection
                          , oa = this._getPlaneIndex;
                        if (!na(R.tl, ta, xa) || !na(ha, ta, xa)) {
                            ea && this._createSegments(L);
                            var ka = [];
                            l.forEach(L.segments, function(Ea) {
                                Ea = Ea.args;
                                var T = Ea.length, U = [], ma;
                                for (ma = 0; ma < T; ma += 2) {
                                    var sa = [Ea[ma], Ea[ma + 1]]
                                      , ya = [Ea[ma + 2], Ea[ma + 3]]
                                      , Oa = ja(sa, Aa)
                                      , Ua = ja(ya, Aa);
                                    if (Oa ^ Ua) {
                                        if (Ua = X([sa, ya], ca))
                                            Oa ? (ma ? U.push(Ua[1]) : U.push(sa, Ua[1]),
                                            ka.push(U),
                                            U = []) : U.push(Ua[1], ya)
                                    } else
                                        Oa ? ma ? U.push(ya) : U.push(sa, ya) : (Ua = oa(sa, Aa),
                                        Oa = oa(ya, Aa),
                                        -1 !== Ua && -1 !== Oa && Ua !== Oa && (sa = X([sa, ya], ca, !0),
                                        0 < sa.length && (sa[Ua] || (Ua = sa[Ua[0]] ? Ua[0] : Ua[1]),
                                        sa[Oa] || (Oa = sa[Oa[0]] ? Oa[0] : Oa[1]),
                                        ya = sa[Ua],
                                        sa = sa[Oa],
                                        ya && U.push(ya),
                                        sa && (U.push(sa),
                                        ka.push(U),
                                        U = []))))
                                }
                                ka.push(U)
                            });
                            L.setShape(this._getPathStringFromPaths(ka))
                        }
                    },
                    _clipPolygon: function(L, R) {
                        R = this._getCorners(L, R);
                        var ha = R.br
                          , na = this._rendererLimits
                          , ta = na.clipLimit
                          , xa = na.rangeMin
                          , Aa = na.rangeMax
                          , ca = na.clipBBox
                          , ja = na.clipSegments;
                        na = this._isPointWithinRange;
                        var X = this._isPointWithinBBox
                          , oa = this._getClipperIntersection
                          , ka = this._getPlaneIndex
                          , Ea = H._pointLineDistance;
                        na(R.tl, xa, Aa) && na(ha, xa, Aa) || (ea && this._createSegments(L),
                        R = l.filter(L.segments, function(T) {
                            return T.args && T.args.length
                        }),
                        R = l.map(R, function(T) {
                            var U = T.args
                              , ma = U.length
                              , sa = [];
                            T = [];
                            var ya;
                            for (ya = 0; ya < ma; ya += 2) {
                                var Oa = [U[ya], U[ya + 1]]
                                  , Ua = [U[ya + 2], U[ya + 3]];
                                if (ya === ma - 2) {
                                    sa.push(Oa);
                                    break
                                }
                                var Xa = X(Oa, ca)
                                  , Ma = X(Ua, ca);
                                sa.push(Oa);
                                if (Xa ^ Ma) {
                                    if (Ma = oa([Oa, Ua], ja))
                                        Oa = Ma[1],
                                        Oa[Xa ? "inOut" : "outIn"] = !0,
                                        sa.push(Oa),
                                        T.push([Xa ? "INOUT" : "OUTIN", sa.length - 1, Ma[0]])
                                } else if (!Xa) {
                                    Xa = ka(Oa, ca);
                                    var I = ka(Ua, ca);
                                    -1 !== Xa && -1 !== I && Xa !== I && (Ma = oa([Oa, Ua], ja, !0),
                                    0 < Ma.length ? (Ma[Xa] || (Xa = Ma[Xa[0]] ? Xa[0] : Xa[1]),
                                    Ma[I] || (I = Ma[I[0]] ? I[0] : I[1]),
                                    Oa = Ma[Xa],
                                    Ua = Ma[I],
                                    Oa && (Oa.outIn = !0,
                                    sa.push(Oa),
                                    T.push(["OUTIN", sa.length - 1, Xa])),
                                    Ua && (Ua.inOut = !0,
                                    sa.push(Ua),
                                    T.push(["INOUT", sa.length - 1, I]))) : m.isArray(Xa) && m.isArray(I) && (Ma = Xa.concat(I),
                                    Ma.sort(),
                                    "0123" === Ma.join("") && (Ma = [],
                                    3 === Xa[0] + Xa[1] ? Ma.push([ta, -ta], [-ta, ta]) : Ma.push([-ta, -ta], [ta, ta]),
                                    Xa = Ea(Ma[0], [Oa, Ua]),
                                    Oa = Ea(Ma[1], [Oa, Ua]),
                                    sa.push(Xa < Oa ? Ma[0] : Ma[1]))))
                                }
                            }
                            var Q = ca[0]
                              , ba = ca[1]
                              , M = ca[2]
                              , S = ca[3];
                            l.forEach(sa, function(va) {
                                va[0] < Q && (va[1] >= ba && va[1] <= S ? va[0] = Q : (va[0] = Q,
                                va[1] = va[1] < ba ? ba : S))
                            });
                            l.forEach(sa, function(va) {
                                va[1] < ba && (va[0] >= Q && va[0] <= M ? va[1] = ba : (va[1] = ba,
                                va[0] = va[0] < Q ? Q : M))
                            });
                            l.forEach(sa, function(va) {
                                va[0] > M && (va[1] >= ba && va[1] <= S ? va[0] = M : (va[0] = M,
                                va[1] = va[1] < ba ? ba : S))
                            });
                            l.forEach(sa, function(va) {
                                va[1] > S && (va[0] >= Q && va[0] <= M ? va[1] = S : (va[1] = S,
                                va[0] = va[0] < Q ? Q : M))
                            });
                            U = 0;
                            ma = T.length;
                            if (0 < ma) {
                                do {
                                    Ua = T[U];
                                    ya = T[(U + 1) % ma];
                                    if (Ua[2] === ya[2] && "INOUT" === Ua[0] && "OUTIN" === ya[0])
                                        if (Oa = Ua[1],
                                        ya = ya[1],
                                        Oa < ya)
                                            for (Oa += 1; Oa < ya; Oa++)
                                                sa[Oa][2] = !0;
                                        else if (Oa > ya) {
                                            for (Oa += 1; Oa < sa.length; Oa++)
                                                sa[Oa][2] = !0;
                                            for (Oa = 0; Oa < ya; Oa++)
                                                sa[Oa][2] = !0
                                        }
                                    U = (U + 1) % ma
                                } while (0 !== U)
                            }
                            ma = sa[0];
                            U = sa[sa.length - 1];
                            ma[2] && (U[2] = !0,
                            l.some(T, function(va) {
                                return 1 === va[1] ? (sa.splice(sa.length - 1, 0, m.clone(sa[1])),
                                !0) : !1
                            }));
                            sa = l.filter(sa, function(va) {
                                return va[2] ? !1 : !0
                            });
                            for (U = 0; U < sa.length - 1; U++)
                                ma = sa[U],
                                (ya = sa[U + 1]) && ma[0] === ya[0] && ma[1] === ya[1] && (ya.outIn ? ma.outIn = !0 : ya.inOut && (ma.inOut = !0),
                                sa.splice(U + 1, 1));
                            ma = Math.abs;
                            T = [];
                            for (U = 0; U < sa.length - 1; U++) {
                                Ua = sa[U];
                                Oa = Ua[0];
                                Ua = Ua[1];
                                Xa = ma(Oa) === ta;
                                Ma = ma(Ua) === ta;
                                ya = sa[U + 1];
                                I = ya[0];
                                ya = ya[1];
                                var fa = ma(I) === ta
                                  , ra = ma(ya) === ta;
                                Xa && ra ? T.push([U + 1, [Oa, ya]]) : Ma && fa && T.push([U + 1, [I, Ua]])
                            }
                            for (U = T.length - 1; 0 <= U; U--)
                                ya = T[U],
                                Oa = sa[ya[0] - 1],
                                ma = sa[ya[0]],
                                Oa.outIn || Oa.inOut || ma.outIn || ma.inOut || sa.splice(ya[0], 0, ya[1]);
                            ma = sa[0];
                            U = sa[sa.length - 1];
                            ma[0] === U[0] && ma[1] === U[1] || sa.push(ma);
                            return sa
                        }),
                        L.setShape(this._getPathStringFromPaths(R)))
                    },
                    _getCorners: function(L, R) {
                        if (ea) {
                            L = this._map;
                            var ha = R.getExtent()
                              , na = ha.spatialReference;
                            R = L.toScreen(new G(ha.xmin,ha.ymax,na));
                            L = L.toScreen(new G(ha.xmax,ha.ymin,na));
                            return {
                                tl: R,
                                br: L
                            }
                        }
                        L = L.getTransformedBoundingBox();
                        return {
                            tl: L[0],
                            br: L[2]
                        }
                    },
                    _createSegments: function(L) {
                        L.shape.path = L.vmlPath;
                        L.segmented = !1;
                        L._confirmSegmented();
                        var R = L.segments;
                        1 < R.length && (L.segments = l.filter(R, function(ha, na, ta) {
                            na = ta[na + 1];
                            return "M" === ha.action && na && "L" === na.action ? (ha.args = ha.args.concat(na.args),
                            !0) : !1
                        }))
                    },
                    _getPathStringFromPaths: function(L) {
                        ea ? (L = l.map(L, function(R) {
                            return "m " + l.map(R, function(ha, na) {
                                return (1 === na ? "l " : "") + ha.join(",")
                            }).join(" ")
                        }),
                        L.push("e")) : L = l.map(L, function(R) {
                            return "M " + l.map(R, function(ha) {
                                return ha.join(",")
                            }).join(" ")
                        });
                        return L.join(" ")
                    },
                    _isPointWithinBBox: function(L, R) {
                        var ha = R[1]
                          , na = R[2]
                          , ta = R[3]
                          , xa = L[0];
                        L = L[1];
                        return xa > R[0] && xa < na && L > ha && L < ta ? !0 : !1
                    },
                    _isPointWithinRange: function(L, R, ha) {
                        var na = L.x;
                        L = L.y;
                        return na < R || L < R || na > ha || L > ha ? !1 : !0
                    },
                    _getClipperIntersection: function(L, R, ha) {
                        var na, ta = H._getLineIntersection2, xa = Math.round, Aa = {
                            length: 0
                        };
                        for (na = 0; 4 > na; na++) {
                            var ca = ta(L, R[na]);
                            if (ca)
                                if (ca[0] = xa(ca[0]),
                                ca[1] = xa(ca[1]),
                                ha)
                                    Aa[na] = ca,
                                    Aa.length++;
                                else
                                    return [na, ca]
                        }
                        return ha ? Aa : null
                    },
                    _getPlaneIndex: function(L, R) {
                        var ha = L[0];
                        L = L[1];
                        var na = R[0]
                          , ta = R[1]
                          , xa = R[2];
                        R = R[3];
                        return ha <= na ? L >= ta && L <= R ? 3 : L < ta ? [0, 3] : [2, 3] : L <= ta ? ha >= na && ha <= xa ? 0 : ha < na ? [3, 0] : [1, 0] : ha >= xa ? L >= ta && L <= R ? 1 : L < ta ? [0, 1] : [2, 1] : L >= R ? ha >= na && ha <= xa ? 2 : ha < na ? [3, 2] : [1, 2] : -1
                    },
                    onGraphicAdd: function() {},
                    onGraphicRemove: function() {},
                    onGraphicNodeAdd: function() {},
                    onGraphicNodeRemove: function() {},
                    onGraphicDraw: function() {},
                    onGraphicsClear: function() {},
                    onRendererChange: function() {},
                    onOpacityChange: function() {},
                    onInfoTemplateChange: function() {},
                    onSurfaceChange: function() {},
                    onWebGLEnabledChange: function() {},
                    setInfoTemplate: function(L) {
                        this.infoTemplate = L;
                        this._evalSurfaceType();
                        this.onInfoTemplateChange()
                    },
                    add: function(L, R) {
                        if (L._graphicsLayer === this)
                            return L;
                        L._suspended = this._suspendGraphics;
                        R || this.graphics.push(L);
                        L._graphicsLayer = this;
                        L._sourceLayer || (L._layer && "esri.layers.GraphicsLayer" !== L._layer.declaredClass ? L._sourceLayer = L._layer : "esri.layers.GraphicsLayer" !== this.declaredClass && (L._sourceLayer = this));
                        L._layer = this;
                        this.hasWebGLSurface() || (this._updateExtent(L),
                        this._draw(L));
                        if (!R)
                            this.onGraphicAdd(L);
                        return L
                    },
                    remove: function(L, R, ha) {
                        if (!R && !ha) {
                            R = this.graphics;
                            var na;
                            if (-1 === (na = l.indexOf(R, L)))
                                return null;
                            if (!wa || 64 <= wa)
                                R.splice(na, 1);
                            else {
                                var ta = R.length;
                                if (ta) {
                                    for (; na < ta; )
                                        R[na] = R[na + 1],
                                        na++;
                                    R.length--
                                }
                            }
                        }
                        this.hasWebGLSurface() || L.getDojoShape() && this._removeShape(L, null, ha);
                        L._shape = L._graphicsLayer = null;
                        this.onGraphicRemove(L);
                        return L
                    },
                    clear: function(L, R) {
                        L = this.graphics;
                        var ha, na = !ea;
                        for (ha = L.length - 1; 0 <= ha; ha--)
                            this.remove(L[ha], null, na);
                        this.graphics = [];
                        this.hasWebGLSurface() || this._destroyAllNodes();
                        if (!R)
                            this.onGraphicsClear()
                    },
                    _destroyAllNodes: function() {
                        if (!ea && this._div) {
                            var L;
                            this._childLayer && (L = this._childLayer.getNode()) && L.parentNode && L.parentNode.removeChild(L);
                            this._bgGroup.clear();
                            this._div.clear();
                            this._bgGroup = this._div.createGroup();
                            L && this._div.getEventSource().appendChild(L);
                            this._initOpacity()
                        }
                    },
                    clearNodes: function() {
                        if (!this.hasWebGLSurface()) {
                            var L = this.graphics, R = L.length, ha;
                            for (ha = 0; ha < R; ha++)
                                this._removeShape(L[ha], !0, !0);
                            this._destroyAllNodes()
                        }
                    },
                    _graphicVisibilityChanged: function(L) {},
                    _setIEOpacity: function(L, R) {
                        var ha = L && L.getNode();
                        if (ha) {
                            var na = L.strokeStyle
                              , ta = ha.stroke;
                            na && ta && (ta.opacity = na.color.a * R);
                            L = L.fillStyle;
                            na = ha.fill;
                            L && na && ("tile" === na.type ? d.set(ha, "opacity", R) : na.opacity = L.a * R)
                        }
                    },
                    setOpacity: function(L, R) {
                        if (R || this.opacity != L) {
                            var ha = this._div;
                            ha && !this.hasWebGLSurface() && (ea ? (l.forEach(this.graphics, function(na) {
                                this._setIEOpacity(na._shape, L);
                                this._setIEOpacity(na._bgShape, L)
                            }, this),
                            ha._esriIeOpacity = L,
                            this._bgGroup._esriIeOpacity = L) : "canvas-2d" === this.surfaceType ? d.set(ha.getEventSource(), "opacity", L) : ha.getEventSource().setAttribute("opacity", L));
                            this.opacity = L;
                            if (!R)
                                this.onOpacityChange(L)
                        }
                    },
                    setRenderer: function(L) {
                        this.renderer = L;
                        this._evalSDRenderer(!0);
                        this._evalSurfaceType();
                        this.emit("renderer-change", {
                            renderer: this._rndForScale || L
                        })
                    }
                });
                y = y([t, O], {
                    declaredClass: "esri.layers.GraphicsLayer",
                    constructor: function() {
                        this._processEvent = m.hitch(this, this._processEvent);
                        this._initLayer()
                    },
                    _initLayer: function() {
                        this.loaded = !0;
                        this.onLoad(this)
                    },
                    _setMap: function() {
                        var L = this.inherited("_setMap", arguments);
                        this.enableMouseEvents();
                        return L
                    },
                    _unsetMap: function() {
                        this.disableMouseEvents();
                        this.inherited("_unsetMap", arguments)
                    },
                    _processEvent: function(L) {
                        var R = this._map, ha = L.target, na;
                        L.screenPoint = new A(L.pageX - R.position.x,L.pageY - R.position.y);
                        for (L.mapPoint = R.toMap(L.screenPoint); ha && !(na = ha.e_graphic); )
                            ha = ha.parentNode;
                        if (na)
                            return L.graphic = na,
                            L
                    },
                    _onMouseOverHandler: function(L) {
                        if (this._processEvent(L))
                            this.onMouseOver(L)
                    },
                    _onMouseMoveHandler: function(L) {
                        if (this._processEvent(L))
                            this.onMouseMove(L)
                    },
                    _onMouseDragHandler: function(L) {
                        if (this._processEvent(L))
                            this.onMouseDrag(L)
                    },
                    _onMouseOutHandler: function(L) {
                        if (this._processEvent(L))
                            this.onMouseOut(L)
                    },
                    _onMouseDownHandler: function(L) {
                        this._downGr = this._downPt = null;
                        this._processEvent(L) && (w.disconnect(this._onmousemove_connect),
                        w.disconnect(this._onmousedrag_connect),
                        this._onmousedrag_connect = w.connect(this._div.getEventSource(), "onmousemove", this, "_onMouseDragHandler"),
                        this._downGr = L.graphic,
                        this._downPt = L.screenPoint.x + "," + L.screenPoint.y,
                        this.onMouseDown(L))
                    },
                    _onMouseUpHandler: function(L) {
                        this._upGr = this._upPt = null;
                        this._processEvent(L) && (w.disconnect(this._onmousedrag_connect),
                        w.disconnect(this._onmousemove_connect),
                        this._onmousemove_connect = w.connect(this._div.getEventSource(), "onmousemove", this, "_onMouseMoveHandler"),
                        this._upGr = L.graphic,
                        this._upPt = L.screenPoint.x + "," + L.screenPoint.y,
                        this.onMouseUp(L))
                    },
                    _onClickHandler: function(L) {
                        if (this._processEvent(L)) {
                            var R = this._downGr
                              , ha = this._upGr;
                            R && ha && R === ha && this._downPt === this._upPt && (ea && (x._ieGraphic = L.graphic),
                            this.onClick(L))
                        }
                    },
                    _onDblClickHandler: function(L) {
                        if (this._processEvent(L))
                            this.onDblClick(L)
                    },
                    onMouseOver: function() {},
                    onMouseMove: function() {},
                    onMouseDrag: function() {},
                    onMouseOut: function() {},
                    onMouseDown: function() {},
                    onMouseUp: function() {},
                    onClick: function() {},
                    onDblClick: function() {},
                    enableMouseEvents: function() {
                        if (!this._mouseEvents) {
                            var L = w.connect
                              , R = this._div.getEventSource();
                            aa || (this._onmouseover_connect = L(R, "onmouseover", this, "_onMouseOverHandler"),
                            this._onmousemove_connect = L(R, "onmousemove", this, "_onMouseMoveHandler"),
                            this._onmouseout_connect = L(R, "onmouseout", this, "_onMouseOutHandler"),
                            this._onmousedown_connect = L(R, "onmousedown", this, "_onMouseDownHandler"),
                            this._onmouseup_connect = L(R, "onmouseup", this, "_onMouseUpHandler"),
                            this._onclick_connect = L(R, "onclick", this, "_onClickHandler"),
                            this._ondblclick_connect = L(R, "ondblclick", this, "_onDblClickHandler"));
                            this._mouseEvents = !0
                        }
                    },
                    disableMouseEvents: function() {
                        if (this._mouseEvents) {
                            var L = w.disconnect;
                            L(this._onmouseover_connect);
                            L(this._onmousemove_connect);
                            L(this._onmousedrag_connect);
                            L(this._onmouseout_connect);
                            L(this._onmousedown_connect);
                            L(this._onmouseup_connect);
                            L(this._onclick_connect);
                            L(this._ondblclick_connect);
                            this._mouseEvents = !1
                        }
                    }
                });
                y._GraphicsContainer = g;
                y._GraphicsLayer = t;
                z("extend-esri") && (m.setObject("layers.GraphicsLayer", y, x),
                m.setObject("layers._GraphicsContainer", g, x),
                m.setObject("layers._GraphicsLayer", t, x));
                return y
            })
        },
        "dojox/gfx": function() {
            define(["dojo/_base/lang", "./gfx/_base", "./gfx/renderer!"], function(C, y, b) {
                y.switchTo(b);
                return y
            })
        },
        "dojox/gfx/renderer": function() {
            define(["./_base", "dojo/_base/lang", "dojo/_base/sniff", "dojo/_base/window", "dojo/_base/config"], function(C, y, b, w, m) {
                var l = null;
                b.add("vml", function(k, h, f) {
                    f.innerHTML = '\x3cv:shape adj\x3d"1"/\x3e';
                    k = "adj"in f.firstChild;
                    f.innerHTML = "";
                    return k
                });
                return {
                    load: function(k, h, f) {
                        function d() {
                            h(["dojox/gfx/" + a], function(n) {
                                C.renderer = a;
                                l = n;
                                f(n)
                            })
                        }
                        if (l && "force" != k)
                            f(l);
                        else {
                            var a = m.forceGfxRenderer;
                            k = !a && (y.isString(m.gfxRenderer) ? m.gfxRenderer : "svg,vml,canvas,silverlight").split(",");
                            for (var c, e; !a && k.length; )
                                switch (k.shift()) {
                                case "svg":
                                    "SVGAngle"in w.global && (a = "svg");
                                    break;
                                case "vml":
                                    b("vml") && (a = "vml");
                                    break;
                                case "silverlight":
                                    try {
                                        b("ie") ? (c = new ActiveXObject("AgControl.AgControl"),
                                        c.IsVersionSupported("1.0")) && (e = !0) : navigator.plugins["Silverlight Plug-In"] && (e = !0)
                                    } catch (n) {
                                        e = !1
                                    } finally {
                                        c = null
                                    }
                                    e && (a = "silverlight");
                                    break;
                                case "canvas":
                                    w.global.CanvasRenderingContext2D && (a = "canvas")
                                }
                            "canvas" === a && !1 !== m.canvasEvents && (a = "canvasWithEvents");
                            m.isDebug && console.log("gfx renderer \x3d " + a);
                            "svg" == a && "undefined" != typeof window.svgweb ? window.svgweb.addOnLoad(d) : d()
                        }
                    }
                }
            })
        },
        "esri/layers/gfxSniff": function() {
            define(["dojo/has", "dojox/gfx"], function(C, y) {
                C.add("esri-svg", function() {
                    if (y.renderer == null) {
                       return;
                    }
                    return -1 !== y.renderer.toLowerCase().indexOf("svg")
                });
                return C
            })
        },
        "esri/layers/layer": function() {
            define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t) {
                var g = C([h], {
                    declaredClass: "esri.layers.Layer",
                    _eventMap: {
                        error: ["error"],
                        load: ["layer"],
                        "opacity-change": ["opacity"],
                        "update-end": ["error"],
                        "visibility-change": ["visible"]
                    },
                    constructor: function(q, x) {
                        this._attrs = {};
                        q && w.isString(q) ? this._url = e.urlToObject(this.url = e.normalize(q)) : (this.url = this._url = null,
                        (x = x || q) && (x.layerDefinition || x.query) && (x = null));
                        this.spatialReference = new n(4326);
                        this.initialExtent = new t(-180,-90,180,90,new n(4326));
                        this._map = this._div = null;
                        this.normalization = !0;
                        x && (x.id && (this.id = x.id),
                        this.arcgisProps = x.arcgisProps,
                        this.parentLayer = x.parentLayer,
                        !1 === x.visible && (this.visible = !1),
                        d.isDefined(x.opacity) && (this.opacity = x.opacity),
                        d.isDefined(x.minScale) && this.setMinScale(x.minScale),
                        d.isDefined(x.maxScale) && this.setMaxScale(x.maxScale),
                        this.attributionDataUrl = x.attributionDataUrl || "",
                        this.hasAttributionData = !!this.attributionDataUrl,
                        d.isDefined(x.showAttribution) && (this.showAttribution = x.showAttribution),
                        this.className = x.className,
                        this.refreshInterval = x.refreshInterval || 0);
                        this._errorHandler = w.hitch(this, this._errorHandler);
                        this._scheduledRefresh = w.hitch(this, this._scheduledRefresh);
                        this.refresh = w.hitch(this, this.refresh);
                        if (this.managedSuspension) {
                            var v = this._setMap;
                            this._setMap = function(z) {
                                var u = v.apply(this, arguments);
                                this._fireAttach(z);
                                this.evaluateSuspension();
                                if (this.suspended && !z.loaded)
                                    var p = b.connect(z, "onLoad", this, function() {
                                        b.disconnect(p);
                                        p = null;
                                        this.evaluateSuspension()
                                    });
                                return u
                            }
                        }
                        this.registerConnectEvents()
                    },
                    id: null,
                    visible: !0,
                    opacity: 1,
                    loaded: !1,
                    loadError: null,
                    minScale: 0,
                    maxScale: 0,
                    visibleAtMapScale: !1,
                    suspended: !0,
                    attached: !1,
                    attributionDataUrl: "",
                    hasAttributionData: !1,
                    showAttribution: !0,
                    refreshInterval: 0,
                    _errorHandler: function(q) {
                        this.loaded || (this.loadError = q);
                        this.onError(q)
                    },
                    _setMap: function(q, x, v, z) {
                        this._map = q;
                        this._lyrZEHandle = b.connect(q, "onZoomEnd", this, this._processMapScale);
                        if (q.loaded)
                            this.visibleAtMapScale = this._isMapAtVisibleScale();
                        else
                            var u = b.connect(q, "onLoad", this, function() {
                                b.disconnect(u);
                                u = null;
                                this._processMapScale()
                            })
                    },
                    _unsetMap: function(q, x) {
                        b.disconnect(this._lyrZEHandle);
                        this._map = this._lyrZEHandle = null;
                        this._resumedOnce = void 0;
                        this.suspended = !0;
                        this._fireDetach(q)
                    },
                    _fireAttach: function(q) {
                        this.attached = !0;
                        this.onAttach({
                            map: q
                        })
                    },
                    _fireDetach: function(q) {
                        this.attached = !1;
                        this.onDetach({
                            map: q
                        })
                    },
                    _cleanUp: function() {
                        this._map = this._div = null
                    },
                    _fireUpdateStart: function() {
                        this.updating || (this.updating = !0,
                        this.attr("data-updating", ""),
                        this.onUpdateStart(),
                        this._map && this._map._incr())
                    },
                    _fireUpdateEnd: function(q, x) {
                        this.updating && (this.updating = !1,
                        this.attr("data-updating"),
                        this._refreshRT(),
                        this.onUpdateEnd(q, x),
                        this._map && this._map._decr())
                    },
                    _getToken: function() {
                        var q = this._url
                          , x = this.credential;
                        return q && q.query && q.query.token || x && x.token || void 0
                    },
                    _findCredential: function() {
                        this.credential = f.id && this._url && f.id.findCredential(this._url.path)
                    },
                    _useSSL: function() {
                        var q = this._url
                          , x = /^http:/i;
                        this.url && (this.url = this.url.replace(x, "https:"));
                        q && q.path && (q.path = q.path.replace(x, "https:"))
                    },
                    refresh: function(q) {},
                    show: function() {
                        this.setVisibility(!0)
                    },
                    hide: function() {
                        this.setVisibility(!1)
                    },
                    setMinScale: function(q) {
                        this.setScaleRange(q)
                    },
                    setMaxScale: function(q) {
                        this.setScaleRange(null, q)
                    },
                    setScaleRange: function(q, x) {
                        var v = d.isDefined(q)
                          , z = d.isDefined(x);
                        this.loaded || (this._hasMin = this._hasMin || v,
                        this._hasMax = this._hasMax || z);
                        var u = this.minScale
                          , p = this.maxScale;
                        this.minScale = (v ? q : this.minScale) || 0;
                        this.maxScale = (z ? x : this.maxScale) || 0;
                        if (u !== this.minScale || p !== this.maxScale)
                            this.onScaleRangeChange(),
                            this._processMapScale()
                    },
                    suspend: function() {
                        this._suspended = !0;
                        this.evaluateSuspension()
                    },
                    resume: function() {
                        this._suspended = !1;
                        this.evaluateSuspension()
                    },
                    canResume: function() {
                        return this.loaded && this._map && this._map.loaded && this.visible && this.visibleAtMapScale && !this._suspended
                    },
                    evaluateSuspension: function() {
                        this.canResume() ? this.suspended && this._resume() : this.suspended || this._suspend()
                    },
                    _suspend: function() {
                        this.suspended = !0;
                        this.attr("data-suspended", "");
                        this.onSuspend();
                        if (this._map)
                            this._map.onLayerSuspend(this)
                    },
                    _resume: function() {
                        this.suspended = !1;
                        this.attr("data-suspended");
                        var q = void 0 === this._resumedOnce, x = this.className, v = this._attrs, z = this.getNode(), u;
                        if (q) {
                            this._resumedOnce = !0;
                            if (x && z) {
                                var p = z.getAttribute("class") || "";
                                (new RegExp("(^|\\s)" + x + "(\\s|$)","i")).test(p) || z.setAttribute("class", p + ((p ? " " : "") + x))
                            }
                            if (v && z)
                                for (u in v)
                                    v.hasOwnProperty(u) && z.setAttribute(u, v[u])
                        }
                        this._refreshRT();
                        this.onResume({
                            firstOccurrence: q
                        });
                        if (this._map)
                            this._map.onLayerResume(this)
                    },
                    _processMapScale: function() {
                        var q = this.visibleAtMapScale;
                        this.visibleAtMapScale = this._isMapAtVisibleScale();
                        q !== this.visibleAtMapScale && (this.onScaleVisibilityChange(),
                        this.evaluateSuspension())
                    },
                    isVisibleAtScale: function(q) {
                        return q ? g.prototype._isMapAtVisibleScale.apply(this, arguments) : !1
                    },
                    _isMapAtVisibleScale: function(q, x) {
                        if (!(q || this._map && this._map.loaded))
                            return !1;
                        var v = this._map;
                        q = q || v.getScale();
                        var z = this.minScale, u = this.maxScale, p = !z, r = !u, B;
                        x && (B = v.width > v.height ? v.width : v.height);
                        p || (q <= z ? p = !0 : x && (p = Math.abs(z - q) / z < 1 / B));
                        r || (q >= u ? r = !0 : x && (r = Math.abs(u - q) / u < 1 / B));
                        return p && r
                    },
                    getAttributionData: function() {
                        var q = this.attributionDataUrl
                          , x = new m(c._dfdCanceller);
                        this.hasAttributionData && q ? (x._pendingDfd = a({
                            url: q,
                            content: {
                                f: "json"
                            },
                            handleAs: "json",
                            callbackParamName: "callback"
                        }),
                        x._pendingDfd.then(function(v) {
                            x.callback(v)
                        }, function(v) {
                            x.errback(v)
                        })) : (q = Error("Layer does not have attribution data"),
                        q.log = !!y.isDebug,
                        x.errback(q));
                        return x
                    },
                    getResourceInfo: function() {
                        var q = this.resourceInfo;
                        return w.isString(q) ? l.fromJson(q) : w.clone(q)
                    },
                    getMap: function() {
                        return this._map
                    },
                    getNode: function() {
                        return this._div
                    },
                    attr: function(q, x) {
                        var v = this.getNode();
                        if ("data-reference" === q && 11 > k("ie"))
                            return this;
                        v && (null == x ? v.removeAttribute(q) : v.setAttribute(q, x));
                        this._attrs && (null == x ? delete this._attrs[q] : this._attrs[q] = x);
                        return this
                    },
                    setRefreshInterval: function(q) {
                        var x = this.refreshInterval;
                        this.refreshInterval = q;
                        this._toggleRT(!1);
                        q && this._toggleRT(!0);
                        if (x !== q)
                            this.onRefreshIntervalChange();
                        return this
                    },
                    _toggleRT: function(q) {
                        q && this.refreshInterval ? (clearInterval(this._refreshTimer),
                        this._refreshTimer = setInterval(this._scheduledRefresh, 6E4 * this.refreshInterval)) : this._refreshTimer && (clearInterval(this._refreshTimer),
                        this._refreshTimer = null)
                    },
                    _refreshRT: function() {
                        this._toggleRT(!1);
                        this._toggleRT(!0)
                    },
                    _scheduledRefresh: function() {
                        this.onRefreshTick();
                        !this._map || this.suspended || this.updating || this.refresh({
                            scheduled: !0
                        })
                    },
                    _refreshTS: null,
                    _reCheckTS: /[\?&]_ts=/ig,
                    _reReplaceTS: /([\?&]_ts=)[0-9]+/ig,
                    addTimestampToURL: function(q) {
                        var x = this._refreshTS;
                        x && (q = this._reCheckTS.test(q) ? q.replace(this._reReplaceTS, "$$$1" + x) : q + ((-1 === q.indexOf("?") ? "?" : "\x26") + "_ts\x3d" + x));
                        return q
                    },
                    setNormalization: function(q) {
                        this.normalization = q
                    },
                    setVisibility: function(q) {
                        this.visible !== q && (this.visible = q,
                        this.onVisibilityChange(this.visible),
                        this.evaluateSuspension());
                        this.attr("data-hidden", q ? null : "")
                    },
                    onLoad: function() {},
                    onAttach: function(q) {},
                    onDetach: function(q) {},
                    onVisibilityChange: function() {},
                    onScaleRangeChange: function() {},
                    onScaleVisibilityChange: function() {},
                    onSuspend: function() {},
                    onResume: function() {},
                    onUpdate: function() {},
                    onUpdateStart: function() {},
                    onUpdateEnd: function() {},
                    onRefreshIntervalChange: function() {},
                    onRefreshTick: function() {},
                    onError: function() {}
                });
                k("extend-esri") && w.setObject("layers.Layer", g, f);
                return g
            })
        },
        "esri/request": function() {
            define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x) {
                function v(ea) {
                    ea = new l(ea);
                    return (ea.host + (ea.port ? ":" + ea.port : "")).toLowerCase()
                }
                function z(ea) {
                    return this._xhr ? this._xhr.getResponseHeader(ea) : null
                }
                function u(ea, Y) {
                    var ia = c.objectToQuery(ea.content);
                    ia && (ea.url += (-1 === ea.url.indexOf("?") ? "?" : "\x26") + ia);
                    if (2E3 < ea.url.length) {
                        if ("data:" !== ea.url.toLowerCase().slice(0, 5))
                            return ea = new w,
                            ea.reject(m.mixin(Error(), {
                                message: "When using responseType 'image', URL length cannot exceed 2000 characters."
                            })),
                            ea;
                        if (3E6 < ea.url.length)
                            return ea = new w,
                            ea.reject(m.mixin(Error(), {
                                message: "When using responseType 'image', data URL length cannot exceed 3000000 characters."
                            })),
                            ea
                    }
                    var qa = new Image;
                    Y.allowImageDataAccess && (qa.crossOrigin = ea.withCredentials ? "use-credentials" : "anonymous");
                    var wa = !1
                      , K = new w(function(Z) {
                        wa = !0;
                        qa.onload = qa.onerror = qa.onabort = null;
                        qa.src = ""
                    }
                    );
                    Y = function(Z) {
                        qa.onload = qa.onerror = qa.onabort = null;
                        wa || K.reject(Error("Unable to load the resource"))
                    }
                    ;
                    qa.onload = function() {
                        qa.onload = qa.onerror = qa.onabort = null;
                        wa || K.resolve(this)
                    }
                    ;
                    qa.onerror = Y;
                    qa.onabort = Y;
                    qa.alt = "";
                    qa.src = ea.url;
                    return K
                }
                function p(ea, Y, ia, qa) {
                    var wa = !1
                      , K = !1
                      , Z = !1;
                    if (g.isDefined(Y))
                        if (m.isObject(Y)) {
                            wa = !!Y.useProxy;
                            K = !!Y.usePost;
                            Z = !!Y.returnProgress;
                            var pa = Y.crossOrigin
                        } else
                            wa = !!Y;
                    ea = m.mixin({}, ea);
                    delete ea._credential;
                    ea._ssl && (ea.url = ea.url.replace(/^http:/i, "https:"));
                    10 > t("ie") && !aa.test(ea.url) && (ea.url = encodeURI(ea.url));
                    var L = ea.content
                      , R = ea.url
                      , ha = ia && ea.form
                      , na = J;
                    pa = g.isDefined(pa) ? pa : na.useCors;
                    ea.load = function(Ja) {
                        if (Ja) {
                            if (Ja.error) {
                                var Pa = m.mixin(Error(), Ja.error);
                                Pa.log = !!b.isDebug
                            } else
                                "error" === Ja.status && (Pa = m.mixin(Error(), Ja),
                                Pa.log = !!b.isDebug);
                            Pa && (ea.failOk = !Pa.log,
                            g.isDefined(Pa.httpCode) || (Pa.httpCode = Pa.code))
                        }
                        return Pa || Ja
                    }
                    ;
                    ea.error = function(Ja, Pa) {
                        Pa && Pa.xhr && Pa.xhr.abort();
                        Ja instanceof Error || (Ja = m.mixin(Error(), Ja));
                        Ja.log = !!b.isDebug;
                        ea.failOk = !Ja.log;
                        na.errorHandler(Ja, Pa);
                        return Ja
                    }
                    ;
                    ea._token && (ea.content = ea.content || {},
                    ea.content.token = ea._token);
                    var ta = 0;
                    if (L && R) {
                        var xa = c.objectToQuery(L);
                        ta = xa.length + R.length + 1;
                        t("esri-url-encodes-apostrophe") && (ta = xa.replace(/'/g, "%27").length + R.length + 1)
                    }
                    ea.timeout = g.isDefined(ea.timeout) ? ea.timeout : na.timeout;
                    ea.handleAs = ea.handleAs || "json";
                    try {
                        var Aa = pa && q.canUseXhr(ea.url) && !/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(ea.url)
                          , ca = q.hasSameOrigin(ea.url, window.location.href) || Aa
                          , ja = K || ia || ta > na.postLength ? !0 : !1
                          , X = ca || -1 === ea.handleAs.indexOf("json") || !ea.callbackParamName || ia ? !1 : !0
                          , oa = q.getProxyRule(ea.url) || na.alwaysUseProxy || wa || !("image" === ea.handleAs && !Y.allowImageDataAccess || X && !ja || ca) ? !0 : !1;
                        ia && !t("esri-file-upload") && !oa && Aa && (oa = !0);
                        if (oa) {
                            var ka = q.getProxyUrl(R, pa);
                            var Ea = ka.path;
                            ka._xo && (Aa = !0);
                            !ja && Ea.length + 1 + ta > na.postLength && (ja = !0);
                            ea.url = Ea + "?" + R;
                            if (ja)
                                ea.content = m.mixin(ka.query || {}, L);
                            else {
                                var T = c.objectToQuery(m.mixin(ka.query || {}, L));
                                T && (ea.url += "?" + T);
                                ea.content = null
                            }
                        }
                        if (!X || ja || oa) {
                            var U = ea.headers;
                            !Aa || U && U.hasOwnProperty("X-Requested-With") || (U = ea.headers = U || {},
                            U["X-Requested-With"] = null);
                            if (ia) {
                                var ma = ea.callbackParamName || "callback.html", sa = ea.callbackElementName || "textarea", ya, Oa, Ua = ha.elements ? ha.elements.length : 0;
                                if (L = ea.content)
                                    for (ya in L.token && -1 < R.toLowerCase().indexOf("/sharing/servers/") && (R += (-1 === R.indexOf("?") ? "?" : "\x26") + "token\x3d" + L.token,
                                    ea.url = oa ? Ea + "?" + R : R,
                                    delete L.token),
                                    L) {
                                        var Xa = L[ya];
                                        if (g.isDefined(Xa)) {
                                            var Ma = null;
                                            for (Oa = 0; Oa < Ua; Oa++) {
                                                var I = ha.elements[Oa];
                                                if (I.name === ya) {
                                                    Ma = I;
                                                    break
                                                }
                                            }
                                            Ma ? Ma.value = Xa : qa ? ha.append(ya, Xa) : ha.appendChild(a.create("input", {
                                                type: "hidden",
                                                name: ya,
                                                value: Xa
                                            }))
                                        }
                                    }
                                if (t("esri-file-upload")) {
                                    y.forEach(ha.elements, function(Ja) {
                                        Ja.name === ma && ha.removeChild(Ja)
                                    });
                                    var Q = qa ? ha : new FormData(ha);
                                    if (11 <= t("safari") && "entries"in Q && "delete"in Q) {
                                        qa = [];
                                        for (var ba = Q.entries(), M = ba.next(); !M.done; ) {
                                            var S = M.value;
                                            S[1]instanceof File && "" === S[1].name && qa.push(S[0]);
                                            M = ba.next()
                                        }
                                        qa.forEach(function(Ja) {
                                            Q.delete(Ja)
                                        })
                                    }
                                    ea.contentType = !1;
                                    ea.postData = Q;
                                    delete ea.form
                                } else {
                                    ha.enctype = "multipart/form-data";
                                    9 > t("ie") && (ha.encoding = "multipart/form-data");
                                    ha.method = "post";
                                    y.some(ha.elements, function(Ja) {
                                        return Ja.name === ma
                                    }) || ha.appendChild(a.create("input", {
                                        type: "hidden",
                                        name: ma,
                                        value: sa
                                    }));
                                    if (-1 !== R.toLowerCase().indexOf("addattachment") || -1 !== R.toLowerCase().indexOf("updateattachment"))
                                        R += (-1 === R.indexOf("?") ? "?" : "\x26") + ma + "\x3d" + sa,
                                        ea.url = oa ? Ea + "?" + R : R;
                                    delete ea.content
                                }
                            }
                            if (Aa && !ea.hasOwnProperty("withCredentials") && "with-credentials" === J.useCors) {
                                R = oa ? Ea : R;
                                var fa = q.canUseXhr(R, !0)
                                  , ra = -1 < fa ? J.corsEnabledServers[fa] : null;
                                if (ra && ra.hasOwnProperty("withCredentials"))
                                    ra.withCredentials && (ea.withCredentials = !0);
                                else if (e.id) {
                                    var va = e.id.findServerInfo(R);
                                    va && va.webTierAuth && (ea.withCredentials = !0)
                                }
                            }
                            ea = H ? H(ea) : ea;
                            if ("image" === ea.handleAs)
                                return u(ea, Y);
                            if (ja) {
                                if (ia && !t("esri-file-upload")) {
                                    var Ca = new w(function() {
                                        Da.cancel()
                                    }
                                    );
                                    var Da = d.post(ea.url, ea).then(function(Ja) {
                                        Ca.resolve(Ja)
                                    }).otherwise(function(Ja) {
                                        Ca.reject(Ja)
                                    });
                                    Ca.addCallback(function(Ja) {
                                        return ea.load(Ja)
                                    });
                                    Ca.addErrback(function(Ja) {
                                        return ea.error(Ja)
                                    });
                                    return Ca
                                }
                                !oa && t("safari") && (ea.url += (-1 === ea.url.indexOf("?") ? "?" : "\x26") + "_ts\x3d" + (new Date).getTime() + V++);
                                if (Z) {
                                    ea.uploadProgress = !0;
                                    ea.data = ea.postData;
                                    ea.query = ea.content;
                                    Ca = new w(function() {
                                        Ra.cancel()
                                    }
                                    );
                                    var Ra = h.post(ea.url, ea).then(function(Ja) {
                                        Ca.resolve(Ja)
                                    }, function(Ja) {
                                        Ca.reject(Ja)
                                    }, function(Ja) {
                                        Ca.progress({
                                            transferType: Ja.transferType,
                                            loaded: Ja.loaded,
                                            total: Ja.total
                                        })
                                    });
                                    Ca.addCallback(function(Ja) {
                                        return ea.load(Ja)
                                    });
                                    Ca.addErrback(function(Ja) {
                                        return ea.error(Ja)
                                    });
                                    return Ca
                                }
                                return k.post(ea)
                            }
                            return k.get(ea)
                        }
                        ea = H ? H(ea) : ea;
                        ea.jsonp = ea.callbackParamName;
                        ea.query = ea.content;
                        Ca = new w(function() {
                            Na.cancel()
                        }
                        );
                        var Na = f.get(ea.url, ea).then(function(Ja) {
                            Ca.resolve(Ja)
                        }).otherwise(function(Ja) {
                            Ca.reject(Ja)
                        });
                        Ca.addCallback(function(Ja) {
                            return ea.load(Ja)
                        });
                        Ca.addErrback(function(Ja) {
                            return ea.error(Ja)
                        });
                        return Ca
                    } catch (Ja) {
                        return Ca = new w,
                        Ca.errback(ea.error(Ja)),
                        Ca
                    }
                }
                function r(ea) {
                    var Y = J.corsStatus
                      , ia = q.canUseXhr(ea, !0);
                    -1 < ia && J.corsEnabledServers.splice(ia, 1);
                    var qa = new w;
                    qa.reject({
                        log: !!b.isDebug
                    });
                    Y[v(ea)] = qa.promise;
                    return ia
                }
                function B(ea) {
                    var Y = J.corsStatus;
                    try {
                        var ia = v(ea);
                        if (J.corsDetection && J.useCors && t("esri-cors") && ea && -1 !== ea.toLowerCase().indexOf("/rest/services") && !q.hasSameOrigin(ea, window.location.href) && !q.canUseXhr(ea)) {
                            if (Y[ia] && !Y[ia].isCanceled())
                                return Y[ia];
                            var qa = new w(x._dfdCanceller);
                            Y[ia] = qa.promise;
                            var wa = k.get({
                                url: ea.substring(0, ea.toLowerCase().indexOf("/rest/") + 6) + "info",
                                content: {
                                    f: "json"
                                },
                                failOk: !0,
                                handleAs: "json",
                                headers: {
                                    "X-Requested-With": null
                                },
                                timeout: 1E3 * J.corsDetectionTimeout
                            });
                            qa._pendingDfd = wa;
                            wa.then(function(K) {
                                K ? (q.canUseXhr(ea) || J.corsEnabledServers.push(ia),
                                qa.resolve()) : qa.reject()
                            }, function(K) {
                                qa.reject(K)
                            });
                            return qa.promise
                        }
                    } catch (K) {
                        console.log("esri._detectCors: an unknown error occurred while detecting CORS support")
                    }
                    return da
                }
                function D(ea) {
                    H = ea
                }
                function G(ea, Y, ia, qa) {
                    function wa(ca) {
                        ca._pendingDfd = p(ia, qa, na, ha);
                        if (!ca._pendingDfd) {
                            ca.ioArgs = ca._pendingDfd && ca._pendingDfd.ioArgs;
                            var ja = Error("Deferred object is missing");
                            ja.log = !!b.isDebug;
                            ca.errback(ja);
                            ca._pendingDfd = null;
                            return ca
                        }
                        ca._pendingDfd.addCallback(function(X) {
                            if (!X)
                                return X;
                            var oa = ca._pendingDfd && ca._pendingDfd.ioArgs && ca._pendingDfd.ioArgs.xhr;
                            if (!oa)
                                return X;
                            if (oa = oa.getResponseHeader("Content-Type"))
                                if (oa = oa.toLowerCase(),
                                -1 === oa.indexOf("text/plain") && -1 === oa.indexOf("application/json"))
                                    return X;
                            if (X instanceof ArrayBuffer && 750 >= X.byteLength)
                                oa = new Blob([X]);
                            else if (X instanceof Blob && 750 >= X.size)
                                oa = X;
                            else
                                return X;
                            var ka = new w
                              , Ea = new FileReader;
                            Ea.readAsText(oa);
                            Ea.onloadend = function() {
                                if (!Ea.error)
                                    try {
                                        var T = JSON.parse(Ea.result);
                                        if (T.error)
                                            var U = T.error
                                    } catch (ma) {}
                                U ? (U = m.mixin(Error(), U),
                                U.log = !!b.isDebug,
                                null == U.httpCode && (U.httpCode = U.code),
                                ka.reject(U)) : ka.resolve(X)
                            }
                            ;
                            return ka.promise
                        }).addCallback(function(X) {
                            ca.ioArgs = ca._pendingDfd && ca._pendingDfd.ioArgs;
                            qa.returnFullResponse && (X = {
                                data: X,
                                _xhr: ca.ioArgs && ca.ioArgs.xhr,
                                getHeader: z
                            });
                            ca.callback(X);
                            ca._pendingDfd = null
                        }).addErrback(function(X) {
                            if (X) {
                                var oa = X.code;
                                var ka = X.subcode;
                                var Ea = (Ea = X.messageCode) && Ea.toUpperCase()
                            }
                            if (X && 403 == oa && (4 == ka || X.message && -1 < X.message.toLowerCase().indexOf("ssl") && -1 === X.message.toLowerCase().indexOf("permission"))) {
                                if (!ia._ssl) {
                                    ia._ssl = ia._sslFromServer = !0;
                                    G(ca, !0, ia, qa);
                                    return
                                }
                            } else if (X && 415 == X.status) {
                                if (r(ia.url),
                                !ia._err415) {
                                    ia._err415 = 1;
                                    G(ca, !0, ia, qa);
                                    return
                                }
                            } else if (e.id && -1 !== y.indexOf(e.id._errorCodes, oa) && !e.id._isPublic(ia.url) && !Z && (403 != oa || -1 === y.indexOf(O, Ea) && (!g.isDefined(ka) || 2 == ka && ia._token))) {
                                ca._pendingDfd = e.id.getCredential(ia.url, {
                                    token: ia._token,
                                    error: X
                                });
                                ca._pendingDfd.addCallback(function(T) {
                                    ia._token = T.token;
                                    ia._credential = T;
                                    ia._ssl = ia._sslFromServer || T.ssl;
                                    G(ca, !0, ia, qa)
                                }).addErrback(function(T) {
                                    ca.errback(T);
                                    ca._pendingDfd = null
                                });
                                return
                            }
                            ca.ioArgs = ca._pendingDfd && ca._pendingDfd.ioArgs;
                            ca.isFulfilled() || ca.errback(X);
                            ca._pendingDfd = null
                        }).then(null, null, function(X) {
                            ca.progress(X)
                        })
                    }
                    var K = ia.form
                      , Z = qa.disableIdentityLookup
                      , pa = qa._preLookup
                      , L = !1;
                    if (t("esri-workers") && !1 !== J.useWorkers)
                        if (!0 === qa.useWorkers || !0 === J.useWorkers)
                            L = !0;
                        else if (qa.workerOptions) {
                            var R = qa.workerOptions;
                            if (R.callback || R.worker && R.worker.worker instanceof Worker)
                                L = !0
                        }
                    var ha = K && t("esri-file-upload") && K instanceof FormData
                      , na = K && (K.elements ? y.some(K.elements, function(ca) {
                        return "file" === ca.type
                    }) : ha)
                      , ta = -1 !== ia.url.toLowerCase().indexOf("token\x3d") || ia.content && ia.content.token || na && y.some(K.elements, function(ca) {
                        return "token" === ca.name
                    }) ? 1 : 0;
                    if (!Y) {
                        ea.addCallback(function(ca) {
                            if ((/\/sharing\/rest\/accounts\/self/i.test(ia.url) || /\/sharing\/rest\/portals\/self/i.test(ia.url)) && !ta && !ia._token && ca && ca.user && ca.user.username) {
                                J.webTierAuthServers.push(v(ia.url));
                                ca = J.corsEnabledServers;
                                var ja = q.canUseXhr(ia.url, !0)
                                  , X = {
                                    host: v(ia.url),
                                    withCredentials: !0
                                };
                                if (-1 === ja)
                                    ca.push(X);
                                else {
                                    var oa = ca[ja];
                                    oa instanceof RegExp ? (X.host = oa,
                                    ca.splice(ja, 1, X)) : "object" === typeof oa ? oa.withCredentials = !0 : ca.splice(ja, 1, X)
                                }
                            }
                            if (ca = ia._credential)
                                if (ja = (ja = e.id.findServerInfo(ca.server)) && ja.owningSystemUrl)
                                    ja = ja.replace(/\/?$/, "/sharing"),
                                    (ca = e.id.findCredential(ja, ca.userId)) && -1 === e.id._getIdenticalSvcIdx(ja, ca) && ca.resources.splice(0, 0, ja)
                        });
                        ea.addBoth(function(ca) {
                            delete ia._credential;
                            !ca || t("ie") && ca.nodeType || (ca._ssl = ia._ssl)
                        });
                        var xa = ia.load
                          , Aa = ia.error;
                        xa && ea.addCallback(function(ca) {
                            var ja = ea._pendingDfd;
                            ja = ja && ja.ioArgs;
                            return xa.call(ja && ja.args, ca, ja)
                        });
                        Aa && ea.addErrback(function(ca) {
                            var ja = ea._pendingDfd;
                            ja = ja && ja.ioArgs;
                            return Aa.call(ja && ja.args, ca, ja)
                        })
                    }
                    !e.id || ta || ia._token || e.id._isPublic(ia.url) || Z && !pa || !(Y = e.id.findCredential(ia.url)) || (ia._token = Y.token,
                    ia._ssl = Y.ssl);
                    L ? qa.workerOptions && qa.workerOptions.worker ? (E || (E = k),
                    k = qa.workerOptions.worker,
                    wa(ea)) : C(["./workers/RequestClient"], function(ca) {
                        E || (E = k);
                        if (qa.workerOptions) {
                            var ja = qa.workerOptions;
                            k = ca.getClient(ja.callback, ja.cbFunction)
                        } else
                            k = ca.getClient();
                        wa(ea)
                    }) : (E && (k = E,
                    E = null),
                    wa(ea));
                    return ea
                }
                function A(ea, Y) {
                    ea.url = q.fixUrl(ea.url);
                    Y = Y || {};
                    var ia = new w(x._dfdCanceller)
                      , qa = B(ea.url);
                    ia._pendingDfd = qa;
                    qa.always(function(wa) {
                        wa && "cancel" === wa.dojoType ? ia.reject(wa) : G(ia, !1, ea, Y)
                    });
                    return ia
                }
                var E = null, H, J = n.defaults.io, O = ["COM_0056", "COM_0057", "SB_0008"], V = 0, aa = /%[0-9A-F]{2}/i, da = function() {
                    var ea = new w;
                    ea.resolve();
                    return ea.promise
                }();
                A._makeRequest = p;
                A._processRequest = G;
                A._disableCors = r;
                A._detectCors = B;
                A.setRequestPreCallback = D;
                t("extend-esri") && (e.request = A,
                e._makeRequest = p,
                e._processRequest = G,
                e._disableCors = r,
                e._detectCors = B,
                e.setRequestPreCallback = D);
                return A
            })
        },
        "esri/core/request/script": function() {
            define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "), function(C, y, b, w, m, l) {
                function k() {
                    var q = document.createElement("iframe");
                    q.name = "esri_core_jsonp_iframe";
                    q.style.display = "none";
                    q.setAttribute("sandbox", "allow-scripts");
                    if (!l("ff") && "srcdoc"in q) {
                        var x = C.toUrl("dojo/dojo.js")
                          , v = m.replace("../../../dojo/dojo.js", x);
                        x = x.slice(0, -7);
                        v = v.replace("../../../dojo/", x);
                        q.srcdoc = v
                    } else
                        v = C.toUrl("./iframe.html"),
                        "http:" === window.location.protocol && 0 === v.indexOf("https:") && (v = v.replace("https:", "http:")),
                        q.src = v;
                    document.body.appendChild(q);
                    return q
                }
                function h() {
                    var q = new MessageChannel;
                    q.port1.addEventListener("message", f);
                    q.port1.start();
                    return q
                }
                function f(q) {
                    var x = q.data;
                    if ("ready" === x) {
                        x = 0;
                        for (var v = t; x < v.length; x++)
                            q = v[x],
                            a(q, e);
                        t = null
                    } else if (q = g[x.id])
                        delete g[x.id],
                        x.isError ? q.dfd.reject(Error(x.message)) : q.dfd.resolve(x.response)
                }
                function d(q, x) {
                    q.addEventListener("load", function() {
                        q.contentWindow.postMessage("init", "*", [x.port2])
                    })
                }
                function a(q, x) {
                    g[q.message.id] = q;
                    x.port1.postMessage(q.message)
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                var c, e, n = 0, t = [], g = {};
                y.get = function(q, x) {
                    if (!l("esri-script-sandbox"))
                        return w.get(q, x);
                    var v = null;
                    x && (v = {
                        jsonp: x.jsonp,
                        preventCache: x.preventCache,
                        query: x.query,
                        timeout: x.timeout
                    });
                    x = new b(function() {
                        if (t) {
                            var u = t.indexOf(z);
                            -1 < u && t.splice(u, 1)
                        } else
                            z.message.id in g && delete g[z.message.id]
                    }
                    );
                    var z = {
                        dfd: x,
                        message: {
                            id: "id" + (++n + Math.random()),
                            url: q,
                            options: v
                        }
                    };
                    c || (c = k(),
                    e = h(),
                    d(c, e));
                    t ? t.push(z) : a(z, e);
                    return x.promise
                }
            })
        },
        "esri/core/sniff": function() {
            define(["../sniff"], function(C) {
                return C
            })
        },
        "dojo/request/iframe": function() {
            define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c) {
                function e(u) {
                    return !this.isFulfilled()
                }
                function n(u) {
                    return !!this._finished
                }
                function t(u, p) {
                    if (!p)
                        try {
                            var r = u.options
                              , B = q.doc(q._frame)
                              , D = r.handleAs;
                            if ("html" !== D) {
                                if ("xml" === D)
                                    if ("html" === B.documentElement.tagName.toLowerCase()) {
                                        h("a", B.documentElement).orphan();
                                        var G = B.documentElement.innerText || B.documentElement.textContent;
                                        G = G.replace(/>\s+</g, "\x3e\x3c");
                                        u.text = l.trim(G)
                                    } else
                                        u.data = B;
                                else
                                    u.text = B.getElementsByTagName("textarea")[0].value;
                                m(u)
                            } else
                                u.data = B
                        } catch (A) {
                            p = A
                        }
                    p ? this.reject(p) : this._finished ? this.resolve(u) : this.reject(Error("Invalid dojo/request/iframe request state"))
                }
                function g(u) {
                    this._callNext()
                }
                function q(u, p, r) {
                    var B = w.parseArgs(u, w.deepCreate(z, p), !0);
                    u = B.url;
                    p = B.options;
                    if ("GET" !== p.method && "POST" !== p.method)
                        throw Error(p.method + " not supported by dojo/request/iframe");
                    q._frame || (q._frame = q.create(q._iframeName, v + "();"));
                    u = w.deferred(B, null, e, n, t, g);
                    u._callNext = function() {
                        this._calledNext || (this._calledNext = !0,
                        q._currentDfd = null,
                        q._fireNextRequest())
                    }
                    ;
                    u._legacy = r;
                    q._dfdQueue.push(u);
                    q._fireNextRequest();
                    b(u);
                    return r ? u : u.promise
                }
                var x = C.id.replace(/[\/\.\-]/g, "_")
                  , v = x + "_onload";
                c.global[v] || (c.global[v] = function() {
                    var u = q._currentDfd;
                    if (u) {
                        var p = d.byId(u.response.options.form) || u._tmpForm;
                        if (p) {
                            for (var r = u._contentToClean, B = 0; B < r.length; B++)
                                for (var D = r[B], G = 0; G < p.childNodes.length; G++) {
                                    var A = p.childNodes[G];
                                    if (A.name === D) {
                                        a.destroy(A);
                                        break
                                    }
                                }
                            u._originalAction && p.setAttribute("action", u._originalAction);
                            u._originalMethod && (p.setAttribute("method", u._originalMethod),
                            p.method = u._originalMethod);
                            u._originalTarget && (p.setAttribute("target", u._originalTarget),
                            p.target = u._originalTarget)
                        }
                        u._tmpForm && (a.destroy(u._tmpForm),
                        delete u._tmpForm);
                        u._finished = !0
                    } else
                        q._fireNextRequest()
                }
                );
                var z = {
                    method: "POST"
                };
                q.create = function(u, p, r) {
                    if (c.global[u])
                        return c.global[u];
                    if (c.global.frames[u])
                        return c.global.frames[u];
                    r || (f("config-useXDomain") && !f("config-dojoBlankHtmlUrl") && console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
                    r = f("config-dojoBlankHtmlUrl") || y.toUrl("dojo/resources/blank.html"));
                    p = a.place('\x3ciframe id\x3d"' + u + '" name\x3d"' + u + '" src\x3d"' + r + '" onload\x3d"' + p + '" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e', c.body());
                    return c.global[u] = p
                }
                ;
                q.doc = function(u) {
                    if (u.contentDocument)
                        return u.contentDocument;
                    var p = u.name;
                    if (p) {
                        var r = c.doc.getElementsByTagName("iframe");
                        if (u.document && r[p].contentWindow && r[p].contentWindow.document)
                            return r[p].contentWindow.document;
                        if (c.doc.frames[p] && c.doc.frames[p].document)
                            return c.doc.frames[p].document
                    }
                    return null
                }
                ;
                q.setSrc = function(u, p, r) {
                    u = c.global.frames[u.name];
                    u.contentWindow && (u = u.contentWindow);
                    try {
                        r ? u.location.replace(p) : u.location = p
                    } catch (B) {
                        console.log("dojo/request/iframe.setSrc: ", B)
                    }
                }
                ;
                q._iframeName = x + "_IoIframe";
                q._notifyStart = function() {}
                ;
                q._dfdQueue = [];
                q._currentDfd = null;
                q._fireNextRequest = function() {
                    try {
                        if (!q._currentDfd && q._dfdQueue.length) {
                            do
                                var u = q._currentDfd = q._dfdQueue.shift();
                            while (u && (u.canceled || u.isCanceled && u.isCanceled()) && q._dfdQueue.length);
                            if (!u || u.canceled || u.isCanceled && u.isCanceled())
                                q._currentDfd = null;
                            else {
                                var p = u.response
                                  , r = p.options
                                  , B = u._contentToClean = []
                                  , D = d.byId(r.form)
                                  , G = w.notify
                                  , A = r.data || null;
                                if (!u._legacy && "POST" === r.method && !D)
                                    D = u._tmpForm = a.create("form", {
                                        name: x + "_form",
                                        style: {
                                            position: "absolute",
                                            top: "-1000px",
                                            left: "-1000px"
                                        }
                                    }, c.body());
                                else if ("GET" === r.method && D && -1 < p.url.indexOf("?")) {
                                    var E = p.url.slice(p.url.indexOf("?") + 1);
                                    A = l.mixin(k.queryToObject(E), A)
                                }
                                if (D) {
                                    if (!u._legacy) {
                                        var H = D;
                                        do
                                            H = H.parentNode;
                                        while (H && H !== c.doc.documentElement);
                                        H || (D.style.position = "absolute",
                                        D.style.left = "-1000px",
                                        D.style.top = "-1000px",
                                        c.body().appendChild(D));
                                        D.name || (D.name = x + "_form")
                                    }
                                    if (A) {
                                        H = function(Y, ia) {
                                            a.create("input", {
                                                type: "hidden",
                                                name: Y,
                                                value: ia
                                            }, D);
                                            B.push(Y)
                                        }
                                        ;
                                        for (var J in A) {
                                            var O = A[J];
                                            if (l.isArray(O) && 1 < O.length)
                                                for (E = 0; E < O.length; E++)
                                                    H(J, O[E]);
                                            else {
                                                var V = h("input[name\x3d'" + J + "']", D);
                                                -1 == V.indexOf() ? H(J, O) : V.val(O)
                                            }
                                        }
                                    }
                                    var aa = D.getAttributeNode("action")
                                      , da = D.getAttributeNode("method")
                                      , ea = D.getAttributeNode("target");
                                    p.url && (u._originalAction = aa ? aa.value : null,
                                    aa ? aa.value = p.url : D.setAttribute("action", p.url));
                                    u._legacy ? da && da.value || (da ? da.value = r.method : D.setAttribute("method", r.method)) : (u._originalMethod = da ? da.value : null,
                                    da ? da.value = r.method : D.setAttribute("method", r.method));
                                    u._originalTarget = ea ? ea.value : null;
                                    ea ? ea.value = q._iframeName : D.setAttribute("target", q._iframeName);
                                    D.target = q._iframeName;
                                    G && G.emit("send", p, u.promise.cancel);
                                    q._notifyStart(p);
                                    D.submit()
                                } else
                                    r = "",
                                    p.options.data && (r = p.options.data,
                                    "string" !== typeof r && (r = k.objectToQuery(r))),
                                    H = p.url + (-1 < p.url.indexOf("?") ? "\x26" : "?") + r,
                                    G && G.emit("send", p, u.promise.cancel),
                                    q._notifyStart(p),
                                    q.setSrc(q._frame, H, !0)
                            }
                        }
                    } catch (Y) {
                        u.reject(Y)
                    }
                }
                ;
                w.addCommonMethods(q, ["GET", "POST"]);
                return q
            })
        },
        "dojo/NodeList-manipulate": function() {
            define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "), function(C, y, b, w, m) {
                function l(f) {
                    for (; f.childNodes[0] && 1 == f.childNodes[0].nodeType; )
                        f = f.childNodes[0];
                    return f
                }
                function k(f, d) {
                    "string" == typeof f ? (f = w.toDom(f, d && d.ownerDocument),
                    11 == f.nodeType && (f = f.childNodes[0])) : 1 == f.nodeType && f.parentNode && (f = f.cloneNode(!1));
                    return f
                }
                var h = C.NodeList;
                y.extend(h, {
                    _placeMultiple: function(f, d) {
                        f = "string" == typeof f || f.nodeType ? C(f) : f;
                        for (var a = [], c = 0; c < f.length; c++)
                            for (var e = f[c], n = this.length, t = n - 1, g; g = this[t]; t--)
                                0 < c && (g = this._cloneNode(g),
                                a.unshift(g)),
                                t == n - 1 ? w.place(g, e, d) : e.parentNode.insertBefore(g, e),
                                e = g;
                        a.length && (a.unshift(0),
                        a.unshift(this.length - 1),
                        Array.prototype.splice.apply(this, a));
                        return this
                    },
                    innerHTML: function(f) {
                        return arguments.length ? this.addContent(f, "only") : this[0].innerHTML
                    },
                    text: function(f) {
                        if (arguments.length) {
                            for (var d = 0, a; a = this[d]; d++)
                                1 == a.nodeType && m.set(a, "textContent", f);
                            return this
                        }
                        var c = "";
                        for (d = 0; a = this[d]; d++)
                            c += m.get(a, "textContent");
                        return c
                    },
                    val: function(f) {
                        if (arguments.length) {
                            for (var d = y.isArray(f), a = 0, c; c = this[a]; a++) {
                                var e = c.nodeName.toUpperCase()
                                  , n = c.type
                                  , t = d ? f[a] : f;
                                if ("SELECT" == e)
                                    for (e = c.options,
                                    n = 0; n < e.length; n++) {
                                        var g = e[n];
                                        g.selected = c.multiple ? -1 != b.indexOf(f, g.value) : g.value == t
                                    }
                                else
                                    "checkbox" == n || "radio" == n ? c.checked = c.value == t : c.value = t
                            }
                            return this
                        }
                        if ((c = this[0]) && 1 == c.nodeType) {
                            f = c.value || "";
                            if ("SELECT" == c.nodeName.toUpperCase() && c.multiple) {
                                f = [];
                                e = c.options;
                                for (n = 0; n < e.length; n++)
                                    g = e[n],
                                    g.selected && f.push(g.value);
                                f.length || (f = null)
                            }
                            return f
                        }
                    },
                    append: function(f) {
                        return this.addContent(f, "last")
                    },
                    appendTo: function(f) {
                        return this._placeMultiple(f, "last")
                    },
                    prepend: function(f) {
                        return this.addContent(f, "first")
                    },
                    prependTo: function(f) {
                        return this._placeMultiple(f, "first")
                    },
                    after: function(f) {
                        return this.addContent(f, "after")
                    },
                    insertAfter: function(f) {
                        return this._placeMultiple(f, "after")
                    },
                    before: function(f) {
                        return this.addContent(f, "before")
                    },
                    insertBefore: function(f) {
                        return this._placeMultiple(f, "before")
                    },
                    remove: h.prototype.orphan,
                    wrap: function(f) {
                        if (this[0]) {
                            f = k(f, this[0]);
                            for (var d = 0, a; a = this[d]; d++) {
                                var c = this._cloneNode(f);
                                a.parentNode && a.parentNode.replaceChild(c, a);
                                l(c).appendChild(a)
                            }
                        }
                        return this
                    },
                    wrapAll: function(f) {
                        if (this[0]) {
                            f = k(f, this[0]);
                            this[0].parentNode.replaceChild(f, this[0]);
                            f = l(f);
                            for (var d = 0, a; a = this[d]; d++)
                                f.appendChild(a)
                        }
                        return this
                    },
                    wrapInner: function(f) {
                        if (this[0]) {
                            f = k(f, this[0]);
                            for (var d = 0; d < this.length; d++) {
                                var a = this._cloneNode(f);
                                this._wrap(y._toArray(this[d].childNodes), null, this._NodeListCtor).wrapAll(a)
                            }
                        }
                        return this
                    },
                    replaceWith: function(f) {
                        f = this._normalize(f, this[0]);
                        for (var d = 0, a; a = this[d]; d++)
                            this._place(f, a, "before", 0 < d),
                            a.parentNode.removeChild(a);
                        return this
                    },
                    replaceAll: function(f) {
                        f = C(f);
                        for (var d = this._normalize(this, this[0]), a = 0, c; c = f[a]; a++)
                            this._place(d, c, "before", 0 < a),
                            c.parentNode.removeChild(c);
                        return this
                    },
                    clone: function() {
                        for (var f = [], d = 0; d < this.length; d++)
                            f.push(this._cloneNode(this[d]));
                        return this._wrap(f, this, this._NodeListCtor)
                    }
                });
                h.prototype.html || (h.prototype.html = h.prototype.innerHTML);
                return h
            })
        },
        "esri/layers/support/webglUtils": function() {
            define(["dojo/_base/lang", "dojo/_base/array", "dojo/has", "../../kernel"], function(C, y, b, w) {
                var m = !1
                  , l = b("esri-webgl-max-contexts");
                l = null != l ? l : b("esri-mobile") ? 8 : 16;
                var k = {
                    isWebGLSupported: function() {
                        return !!m
                    },
                    isWebGLEnabled: function() {
                        return this.isWebGLSupported() && !!b("esri-featurelayer-webgl")
                    },
                    createCanvas: function(h, f) {
                        var d = document.createElement("canvas");
                        d.style.width = h + "px";
                        d.style.height = f + "px";
                        return d
                    },
                    createWebGLContext: function(h) {
                        var f;
                        y.some(["webgl", "experimental-webgl", "webkit-3d", "moz-webgl"], function(d) {
                            try {
                                f = h.getContext ? h.getContext(d) : null
                            } catch (a) {
                                f = null
                            }
                            return !!f
                        });
                        return f
                    },
                    _contextOwners: [],
                    isContextAvailable: function() {
                        return -1 === l || 0 < l && k._contextOwners.length < l
                    },
                    acquireContext: function(h) {
                        return -1 !== y.indexOf(k._contextOwners, h) ? !0 : k.isContextAvailable() ? (k._contextOwners.push(h),
                        !0) : !1
                    },
                    releaseContext: function(h) {
                        h = y.indexOf(k._contextOwners, h);
                        -1 !== h && k._contextOwners.splice(h, 1)
                    }
                };
                m = k.createWebGLContext(k.createCanvas());
                b("extend-esri") && C.setObject("layers.support.webglUtils", k, w);
                return k
            })
        },
        "esri/layers/support/WebGLSurface": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/_base/array", "dojo/has", "../../kernel"], function(C, y, b, w, m) {
                C = C(null, {
                    map: null,
                    node: null,
                    renderers: null,
                    constructor: function(l) {
                        y.mixin(this, l);
                        this.renderers = []
                    },
                    destroy: function() {
                        b.forEach(this.renderers, function(l) {
                            l.destroy()
                        });
                        this.renderers = null
                    },
                    getEventSource: function() {
                        return this.node
                    },
                    createRenderer: function(l, k, h, f) {
                        l = new l({
                            surface: this,
                            width: k,
                            height: h,
                            map: this.map,
                            layer: f
                        });
                        this.renderers.push(l);
                        return l
                    },
                    destroyRenderer: function(l) {
                        var k = b.indexOf(this.renderers, l);
                        -1 < k && (l.destroy(),
                        this.renderers.splice(k, 1))
                    },
                    _createNode: function() {
                        var l = document.createElement("div");
                        l.style.pointerEvents = "auto";
                        l.style.position = "absolute";
                        return l
                    }
                });
                w("extend-esri") && y.setObject("layers.support.WebGLSurface", C, m);
                return C
            })
        },
        "esri/domUtils": function() {
            define(["./kernel", "dojo/_base/connect", "dojo/_base/lang", "dojo/dom-style", "dojo/has"], function(C, y, b, w, m) {
                var l = {
                    show: function(k) {
                        if (k = l.getNode(k))
                            k.style.display = "block"
                    },
                    getNode: function(k) {
                        return k && k.domNode || k
                    },
                    hide: function(k) {
                        if (k = l.getNode(k))
                            k.style.display = "none"
                    },
                    toggle: function(k) {
                        if (k = l.getNode(k))
                            k.style.display = "none" === k.style.display ? "block" : "none"
                    },
                    documentBox: 8 >= m("ie") ? {
                        w: document.documentElement.clientWidth,
                        h: document.documentElement.clientHeight
                    } : {
                        w: window.innerWidth,
                        h: window.innerHeight
                    },
                    setScrollable: function(k) {
                        if (k = this.getNode(k)) {
                            var h = 0
                              , f = 0
                              , d = 0
                              , a = 0
                              , c = 0
                              , e = 0;
                            return [y.connect(k, "ontouchstart", function(n) {
                                h = n.touches[0].screenX;
                                f = n.touches[0].screenY;
                                d = k.scrollWidth;
                                a = k.scrollHeight;
                                c = k.clientWidth;
                                e = k.clientHeight
                            }), y.connect(k, "ontouchmove", function(n) {
                                n.preventDefault();
                                var t = k.firstChild;
                                t instanceof Text && (t = k.childNodes[1]);
                                var g = t._currentX || 0
                                  , q = t._currentY || 0;
                                g += n.touches[0].screenX - h;
                                0 < g ? g = 0 : 0 > g && Math.abs(g) + c > d && (g = -1 * (d - c));
                                t._currentX = g;
                                q += n.touches[0].screenY - f;
                                0 < q ? q = 0 : 0 > q && Math.abs(q) + e > a && (q = -1 * (a - e));
                                t._currentY = q;
                                w.set(t, {
                                    "-webkit-transition-property": "-webkit-transform",
                                    "-webkit-transform": "translate(" + g + "px, " + q + "px)"
                                });
                                h = n.touches[0].screenX;
                                f = n.touches[0].screenY
                            })]
                        }
                    }
                };
                m("extend-esri") && b.mixin(C, l);
                return l
            })
        },
        "esri/symbols/MarkerSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "), function(C, y, b, w, m, l) {
                C = C(l, {
                    declaredClass: "esri.symbol.MarkerSymbol",
                    angle: 0,
                    xoffset: 0,
                    yoffset: 0,
                    size: 12,
                    constructor: function(k) {
                        k && y.isObject(k) && (this.size = "auto" === this.size ? this.size : w.pt2px(this.size),
                        this.xoffset = w.pt2px(this.xoffset),
                        this.yoffset = w.pt2px(this.yoffset),
                        this.angle && (this.angle *= -1))
                    },
                    setAngle: function(k) {
                        this.angle = k;
                        return this
                    },
                    setSize: function(k) {
                        this.size = k;
                        return this
                    },
                    setOffset: function(k, h) {
                        this.xoffset = k;
                        this.yoffset = h;
                        return this
                    },
                    toJson: function() {
                        var k = w.px2pt(this.size);
                        k = isNaN(k) ? void 0 : k;
                        var h = w.px2pt(this.xoffset);
                        h = isNaN(h) ? void 0 : h;
                        var f = w.px2pt(this.yoffset);
                        f = isNaN(f) ? void 0 : f;
                        return y.mixin(this.inherited("toJson", arguments), {
                            size: "auto" === this.size ? this.size : k,
                            angle: this.angle && -1 * this.angle,
                            xoffset: h,
                            yoffset: f
                        })
                    }
                });
                b("extend-esri") && y.setObject("symbol.MarkerSymbol", C, m);
                return C
            })
        },
        "esri/symbols/Symbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "), function(C, y, b, w, m, l) {
                C = C(null, {
                    declaredClass: "esri.symbol.Symbol",
                    color: new l([0, 0, 0, 1]),
                    type: null,
                    constructor: function(k) {
                        k && y.isObject(k) && (y.mixin(this, k),
                        this.color && m.isDefined(this.color[0]) && (this.color = l.toDojoColor(this.color)),
                        (k = this.type) && 0 === k.indexOf("esri") && (this.type = {
                            esriSMS: "simplemarkersymbol",
                            esriPMS: "picturemarkersymbol",
                            esriSLS: "simplelinesymbol",
                            esriCLS: "cartographiclinesymbol",
                            esriSFS: "simplefillsymbol",
                            esriPFS: "picturefillsymbol",
                            esriTS: "textsymbol",
                            esriSHD: "shieldlabelsymbol"
                        }[k]))
                    },
                    setColor: function(k) {
                        this.color = k;
                        return this
                    },
                    toJson: function() {
                        return {
                            color: l.toJsonColor(this.color)
                        }
                    }
                });
                b("extend-esri") && y.setObject("symbol.Symbol", C, w);
                return C
            })
        },
        "esri/symbols/SimpleMarkerSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "), function(C, y, b, w, m, l, k, h, f) {
                var d = {
                    STYLE_CIRCLE: "circle",
                    STYLE_SQUARE: "square",
                    STYLE_TRIANGLE: "triangle",
                    STYLE_CROSS: "cross",
                    STYLE_X: "x",
                    STYLE_DIAMOND: "diamond",
                    STYLE_PATH: "path",
                    STYLE_TARGET: "target"
                }
                  , a = {
                    style: d.STYLE_CIRCLE,
                    color: [255, 255, 255, .25],
                    size: 12,
                    angle: 0,
                    xoffset: 0,
                    yoffset: 0
                };
                C = C(h, {
                    declaredClass: "esri.symbol.SimpleMarkerSymbol",
                    type: "simplemarkersymbol",
                    _styles: {
                        circle: "esriSMSCircle",
                        square: "esriSMSSquare",
                        triangle: "esriSMSTriangle",
                        cross: "esriSMSCross",
                        x: "esriSMSX",
                        diamond: "esriSMSDiamond",
                        path: "esriSMSPath"
                    },
                    constructor: function(c, e, n, t) {
                        c ? y.isString(c) ? (this.style = c,
                        e && (this.size = e),
                        n && (this.outline = n),
                        t && (this.color = t)) : (this.style = k.valueOf(this._styles, this.style),
                        c.outline && (this.outline = new f(c.outline))) : (y.mixin(this, a),
                        this.size = m.pt2px(this.size),
                        this.outline = new f(this.outline),
                        this.color = new b(this.color));
                        this.style || (this.style = d.STYLE_CIRCLE)
                    },
                    setStyle: function(c) {
                        this.style = c;
                        return this
                    },
                    setPath: function(c) {
                        this.path = c;
                        this.setStyle(d.STYLE_PATH);
                        return this
                    },
                    setOutline: function(c) {
                        this.outline = c;
                        return this
                    },
                    getStroke: function() {
                        return this.outline && this.outline.getStroke()
                    },
                    getFill: function() {
                        return this.color
                    },
                    _setDim: function(c, e, n) {
                        this._targetWidth = c;
                        this._targetHeight = e;
                        this._spikeSize = n
                    },
                    getShapeDescriptors: function() {
                        var c, e = this.style, n = (this.size || m.pt2px(a.size)) / 2, t = 0 - n, g = 0 + n, q = 0 - n, x = 0 + n;
                        switch (e) {
                        case d.STYLE_CIRCLE:
                            var v = {
                                type: "circle",
                                cx: 0,
                                cy: 0,
                                r: n
                            };
                            var z = this.getFill();
                            if (c = this.getStroke())
                                c.style = c.style || "Solid";
                            break;
                        case d.STYLE_CROSS:
                            v = {
                                type: "path",
                                path: "M " + t + ",0 L " + g + ",0 M 0," + q + " L 0," + x + " E"
                            };
                            z = null;
                            c = this.getStroke();
                            break;
                        case d.STYLE_DIAMOND:
                            v = {
                                type: "path",
                                path: "M " + t + ",0 L 0," + q + " L " + g + ",0 L 0," + x + " L " + t + ",0 Z"
                            };
                            z = this.getFill();
                            c = this.getStroke();
                            break;
                        case d.STYLE_SQUARE:
                            v = {
                                type: "path",
                                path: "M " + t + "," + x + " L " + t + "," + q + " L " + g + "," + q + " L " + g + "," + x + " L " + t + "," + x + " Z"
                            };
                            z = this.getFill();
                            c = this.getStroke();
                            break;
                        case d.STYLE_TRIANGLE:
                            v = {
                                type: "path",
                                path: "M " + t + "," + x + " L 0," + q + " L " + g + "," + x + " L " + t + "," + x + " Z"
                            };
                            z = this.getFill();
                            c = this.getStroke();
                            break;
                        case d.STYLE_X:
                            v = {
                                type: "path",
                                path: "M " + t + "," + x + " L " + g + "," + q + " M " + t + "," + q + " L " + g + "," + x + " E"
                            };
                            z = null;
                            c = this.getStroke();
                            break;
                        case d.STYLE_PATH:
                            v = {
                                type: "path",
                                path: this.path || ""
                            },
                            z = this.getFill(),
                            c = this.getStroke()
                        }
                        return {
                            defaultShape: v,
                            fill: z,
                            stroke: c
                        }
                    },
                    toJson: function() {
                        var c = this.style
                          , e = this.outline
                          , n = y.mixin(this.inherited("toJson", arguments), {
                            type: "esriSMS",
                            style: this._styles[c] || "esriSMSCircle"
                        });
                        e && (n.outline = e.toJson());
                        "x" === c || "cross" === c ? delete n.color : "target" === c && (n.style = "esriSMSSquare",
                        delete n.color,
                        0 < this._targetHeight && 0 < this._targetWidth && (n.size = m.px2pt(Math.max(this._targetHeight, this._targetWidth))));
                        n.path = this.path;
                        return k.fixJson(n)
                    }
                });
                y.mixin(C, d);
                C.defaultProps = a;
                w("extend-esri") && (y.setObject("symbol.SimpleMarkerSymbol", C, l),
                l.symbol.defaultSimpleMarkerSymbol = a);
                return C
            })
        },
        "esri/symbols/SimpleLineSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = {
                    STYLE_SOLID: "solid",
                    STYLE_DASH: "dash",
                    STYLE_DOT: "dot",
                    STYLE_DASHDOT: "dashdot",
                    STYLE_DASHDOTDOT: "longdashdotdot",
                    STYLE_NULL: "none",
                    STYLE_SHORTDASH: "shortdash",
                    STYLE_SHORTDOT: "shortdot",
                    STYLE_SHORTDASHDOT: "shortdashdot",
                    STYLE_SHORTDASHDOTDOT: "shortdashdotdot",
                    STYLE_LONGDASH: "longdash",
                    STYLE_LONGDASHDOT: "longdashdot"
                }
                  , d = {
                    color: [0, 0, 0, 1],
                    style: f.STYLE_SOLID,
                    width: 1
                };
                C = C(h, {
                    declaredClass: "esri.symbol.SimpleLineSymbol",
                    type: "simplelinesymbol",
                    marker: null,
                    _styles: {
                        solid: "esriSLSSolid",
                        dash: "esriSLSDash",
                        dot: "esriSLSDot",
                        dashdot: "esriSLSDashDot",
                        longdashdotdot: "esriSLSDashDotDot",
                        none: "esriSLSNull",
                        insideframe: "esriSLSInsideFrame",
                        shortdash: "esriSLSShortDash",
                        shortdot: "esriSLSShortDot",
                        shortdashdot: "esriSLSShortDashDot",
                        shortdashdotdot: "esriSLSShortDashDotDot",
                        longdash: "esriSLSLongDash",
                        longdashdot: "esriSLSLongDashDot"
                    },
                    constructor: function(a, c, e) {
                        a ? y.isString(a) ? (this.style = a,
                        c && (this.color = c),
                        e && (this.width = e)) : (this.style = k.valueOf(this._styles, a.style) || f.STYLE_SOLID,
                        this.marker = a.marker) : (y.mixin(this, d),
                        this.color = new b(this.color),
                        this.width = m.pt2px(this.width))
                    },
                    setStyle: function(a) {
                        this.style = a;
                        return this
                    },
                    setMarker: function(a) {
                        this.marker = a
                    },
                    getStroke: function() {
                        return this.style === f.STYLE_NULL || 0 === this.width ? null : {
                            color: this.color,
                            style: this.style,
                            width: this.width
                        }
                    },
                    getFill: function() {
                        return null
                    },
                    getShapeDescriptors: function() {
                        return {
                            defaultShape: {
                                type: "path",
                                path: "M -15,0 L 15,0 E"
                            },
                            fill: null,
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function() {
                        return k.fixJson(y.mixin(this.inherited("toJson", arguments), {
                            type: "esriSLS",
                            style: this._styles[this.style],
                            marker: this.marker ? y.clone(this.marker) : void 0
                        }))
                    }
                });
                y.mixin(C, f);
                C.defaultProps = d;
                w("extend-esri") && (y.setObject("symbol.SimpleLineSymbol", C, l),
                l.symbol.defaultSimpleLineSymbol = d);
                return C
            })
        },
        "esri/symbols/LineSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "), function(C, y, b, w, m, l) {
                C = C(l, {
                    declaredClass: "esri.symbol.LineSymbol",
                    constructor: function(k) {
                        y.isObject(k) ? this.width = w.pt2px(this.width) : this.width = 12
                    },
                    setWidth: function(k) {
                        this.width = k;
                        return this
                    },
                    toJson: function() {
                        var k = w.px2pt(this.width);
                        k = isNaN(k) ? void 0 : k;
                        return y.mixin(this.inherited("toJson", arguments), {
                            width: k
                        })
                    }
                });
                b("extend-esri") && y.setObject("symbol.LineSymbol", C, m);
                return C
            })
        },
        "esri/symbols/utils": function() {
            define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "), function(C, y, b, w, m, l) {
                function k(e) {
                    e.removeAttribute("marker-start");
                    e.removeAttribute("marker-end");
                    e.removeAttribute("opacity")
                }
                function h(e, n) {
                    for (var t in n)
                        e.setAttribute(t, n[t])
                }
                function f(e, n, t) {
                    n = "url(#" + n.getAttribute("id") + ")";
                    e.rawNode.setAttribute("marker-" + t, n)
                }
                var d = -1 !== w.renderer.toLowerCase().indexOf("svg")
                  , a = 9 === b("ie")
                  , c = {
                    marker: {
                        markerWidth: "6",
                        markerHeight: "6",
                        markerUnits: "strokeWidth",
                        orient: "auto"
                    },
                    spear: {
                        marker: {
                            end: {
                                viewBox: "0 0 25.4 23.43",
                                refX: "20",
                                refY: "12.76"
                            },
                            start: {
                                viewBox: "-25.4 0 25.4 23.43",
                                refX: "-20",
                                refY: "12.76"
                            }
                        },
                        path: {
                            common: {
                                d: "M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z",
                                "stroke-width": "0",
                                "fill-opacity": "1"
                            },
                            start: {
                                transform: "matrix(-1, 0, 0, 1, 0, 0)"
                            }
                        }
                    }
                };
                w = {
                    applyLineMarker: function(e, n, t, g) {
                        if (d && !a) {
                            var q = e && e.rawNode
                              , x = n.marker;
                            t = t || n.color;
                            q && "none" !== n.style && t && x && "arrow" === x.style && x.placement ? q.getTotalLength && 0 === q.getTotalLength() ? k(q) : (n = -1 !== x.placement.indexOf("begin"),
                            x = -1 !== x.placement.indexOf("end"),
                            n || x ? (q.removeAttribute("stroke-opacity"),
                            q.setAttribute("opacity", t.a),
                            n ? (n = g(e, t, "spear", "start"),
                            f(e, n, "start")) : q.removeAttribute("marker-start"),
                            x ? (t = g(e, t, "spear", "end"),
                            f(e, t, "end")) : q.removeAttribute("marker-end")) : k(q)) : q && k(q)
                        }
                    },
                    createSVGMarker: function(e, n, t, g) {
                        t = c[t];
                        var q = y.doc.createElementNS("http://www.w3.org/2000/svg", "marker");
                        q.setAttribute("id", n);
                        h(q, c.marker);
                        h(q, t.marker[g]);
                        n = y.doc.createElementNS("http://www.w3.org/2000/svg", "path");
                        n.setAttribute("fill", e.toCss());
                        h(n, t.path.common);
                        h(n, t.path[g]);
                        q.appendChild(n);
                        return q
                    },
                    create2DColorRamp: function(e) {
                        var n = e.surface.createGroup()
                          , t = e.colors
                          , g = e.numClasses;
                        e = (e.size || 75) / g;
                        for (var q = 0; q < g; q++)
                            for (var x = q * e, v = 0; v < g; v++) {
                                var z = t[q][v];
                                n.createRect({
                                    x: v * e,
                                    y: x,
                                    width: e,
                                    height: e
                                }).setFill(z).setStroke(null)
                            }
                        return n
                    },
                    setSymbolFillColor: function(e, n) {
                        if (e)
                            switch (n = n ? new l(n) : null,
                            e.type) {
                            case "simplemarkersymbol":
                                "cross" === e.style || "x" === e.style ? e.outline && e.outline.setColor(n) : e.setColor(n);
                                break;
                            case "simplelinesymbol":
                            case "cartographiclinesymbol":
                            case "simplefillsymbol":
                            case "shieldlabelsymbol":
                            case "textsymbol":
                                e.setColor(n)
                            }
                    }
                };
                b("extend-esri") && C.setObject("renderer.utils", w, m);
                return w
            })
        },
        "esri/layers/TileInfo": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "), function(C, y, b, w, m, l, k, h, f) {
                C = C(null, {
                    declaredClass: "esri.layers.TileInfo",
                    constructor: function(d) {
                        y.mixin(this, d);
                        this.width = this.cols;
                        this.height = this.rows;
                        this._levelToLOD = {};
                        d = this.spatialReference;
                        var a = this.origin;
                        d && (d = this.spatialReference = new k(d.toJson ? d.toJson() : d));
                        a && (this.origin = new h(a.toJson ? a.toJson() : a),
                        !a.spatialReference && d && this.origin.setSpatialReference(new k(d.toJson())));
                        this.lods = b.map(this.lods, function(n) {
                            return new f(n)
                        });
                        b.forEach(this.lods, function(n) {
                            this._levelToLOD[n.level] = n
                        }, this);
                        d = !1;
                        a = this.spatialReference;
                        var c = this.origin;
                        if (a && c) {
                            var e = a._getInfo();
                            e && (d = a._isWrappable() && Math.abs(e.origin[0] - c.x) <= e.dx)
                        }
                        this.isWrappable = d;
                        this._initializeUpsampleLevels()
                    },
                    toJson: function() {
                        return l.fixJson({
                            rows: this.rows,
                            cols: this.cols,
                            dpi: this.dpi,
                            format: this.format,
                            compressionQuality: this.compressionQuality,
                            origin: this.origin && this.origin.toJson(),
                            spatialReference: this.spatialReference && this.spatialReference.toJson(),
                            lods: this.lods && b.map(this.lods, function(d) {
                                return d.toJson()
                            })
                        })
                    },
                    lodAt: function(d) {
                        return this._levelToLOD && this._levelToLOD[d] || null
                    },
                    updateTileInfo: function(d) {
                        var a = this.lodAt(d.level)
                          , c = a.resolution * this.width;
                        a = a.resolution * this.height;
                        d.id = d.level + "/" + d.row + "/" + d.col;
                        d.extent || (d.extent = [0, 0, 0, 0]);
                        d.extent[0] = this.origin.x + d.col * c;
                        d.extent[1] = this.origin.y - (d.row + 1) * a;
                        d.extent[2] = d.extent[0] + c;
                        d.extent[3] = d.extent[1] + a
                    },
                    upsampleTile: function(d) {
                        var a = this._upsampleLevels[d.level];
                        if (!a || -1 === a.parentLevel)
                            return !1;
                        d.level = a.parentLevel;
                        d.row = Math.floor(d.row / a.factor + .001);
                        d.col = Math.floor(d.col / a.factor + .001);
                        this.updateTileInfo(d);
                        return !0
                    },
                    _initializeUpsampleLevels: function() {
                        var d = this.lods;
                        this._upsampleLevels = [];
                        for (var a = null, c = 0; c < d.length; c++) {
                            var e = d[c];
                            this._upsampleLevels[e.level] = {
                                parentLevel: a ? a.level : -1,
                                factor: a ? a.resolution / e.resolution : 0
                            };
                            a = e
                        }
                    }
                });
                w("extend-esri") && y.setObject("layers.TileInfo", C, m);
                return C
            })
        },
        "esri/layers/LOD": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function(C, y, b, w, m) {
                C = C(null, {
                    declaredClass: "esri.layers.LOD",
                    constructor: function(l) {
                        y.mixin(this, l)
                    },
                    toJson: function() {
                        return m.fixJson({
                            level: this.level,
                            levelValue: this.levelValue,
                            resolution: this.resolution,
                            scale: this.scale
                        })
                    }
                });
                b("extend-esri") && y.setObject("layers.LOD", C, w);
                return C
            })
        },
        "esri/layers/ArcGISTiledMapServiceLayer": function() {
            define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t) {
                y = y([a, c], {
                    declaredClass: "esri.layers.ArcGISTiledMapServiceLayer",
                    _agolAttrs: "Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
                    _isReference: !1,
                    _referenceLayers: "Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),
                    constructor: function(g, q) {
                        q && (q.roundrobin && (C.deprecated(this.declaredClass + " : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),
                        q.tileServers = q.roundrobin),
                        this._setTileServers(q.tileServers),
                        this._loadCallback = q.loadCallback);
                        this._params = b.mixin({}, this._url.query);
                        this._initLayer = b.hitch(this, this._initLayer);
                        (g = q && q.resourceInfo) ? this._initLayer(g) : (this._load = b.hitch(this, this._load),
                        this._load())
                    },
                    _TILE_FORMATS: {
                        PNG: "png",
                        PNG8: "png",
                        PNG24: "png",
                        PNG32: "png",
                        JPG: "jpg",
                        JPEG: "jpg",
                        GIF: "gif"
                    },
                    _setTileServers: function(g) {
                        if (g && 0 < g.length) {
                            this.tileServers = g;
                            var q, x = g.length;
                            for (q = 0; q < x; q++)
                                g[q] = f.urlToObject(g[q]).path
                        }
                    },
                    _initLayer: function(g, q) {
                        this.inherited(arguments);
                        this.resourceInfo = m.toJson(g);
                        this.tileInfo = new e(g.tileInfo);
                        !1 !== this.resampling && (g.capabilities && -1 < g.capabilities.indexOf("Tilemap") ? (this.resampling = !0,
                        this.tileMap = new t(this)) : this.resampling = !!g.resampling);
                        !this.spatialReference && this.tileInfo.spatialReference && (this.spatialReference = new d(this.tileInfo.spatialReference.toJson()));
                        this.isPNG32 = "PNG24" === this.tileInfo.format || "PNG32" === this.tileInfo.format;
                        g.timeInfo && (this.timeInfo = new n(g.timeInfo));
                        g.mensurationCapabilities && (this.mensurationCapabilities = g.mensurationCapabilities);
                        var x = this._url.path
                          , v = this._loadCallback
                          , z = f.getProtocolForWebResource(!0)
                          , u = x.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);
                        u = u && u[2];
                        if (!this.tileServers)
                            if (g.tileServers)
                                this._setTileServers(g.tileServers);
                            else {
                                var p = -1 !== x.search(/^https?:\/\/server\.arcgisonline\.com/i)
                                  , r = -1 !== x.search(/^https?:\/\/services\.arcgisonline\.com/i);
                                (p || r) && this._setTileServers([x, x.replace(p ? /server\.arcgisonline/i : /services\.arcgisonline/i, p ? "services.arcgisonline" : "server.arcgisonline")])
                            }
                        if (u) {
                            u = u.toLowerCase();
                            for (x = 0; x < this._agolAttrs.length; x++)
                                if (p = this._agolAttrs[x],
                                p.toLowerCase() === u) {
                                    this.hasAttributionData = !0;
                                    this.attributionDataUrl = this.attributionDataUrl || z + "//static.arcgis.com/attribution/" + p;
                                    break
                                }
                            for (x = 0; x < this._referenceLayers.length; x++)
                                if (p = this._referenceLayers[x],
                                p.toLowerCase() === u) {
                                    this._isReference = !0;
                                    break
                                }
                        }
                        this.loaded = !0;
                        this.onLoad(this);
                        v && (delete this._loadCallback,
                        v(this))
                    },
                    getTileUrl: function(g, q, x) {
                        var v = this.tileServers
                          , z = this._getToken()
                          , u = this._url.query;
                        g = (v ? v[q % v.length] : this._url.path) + "/tile/" + g + "/" + q + "/" + x;
                        g = f.upgradeToHTTPS(g);
                        this.resampling && !this.tileMap && (g += "?blankTile\x3dfalse");
                        u && (g = this.resampling && !this.tileMap ? g + ("\x26" + k.objectToQuery(u)) : g + ("?" + k.objectToQuery(u)));
                        !z || u && u.token || (g += (-1 === g.indexOf("?") ? "?" : "\x26") + "token\x3d" + z);
                        g = this.addTimestampToURL(g);
                        return f.addProxy(g)
                    }
                });
                l("extend-esri") && b.setObject("layers.ArcGISTiledMapServiceLayer", y, h);
                return y
            })
        },
        "esri/layers/TiledMapServiceLayer": function() {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u) {
                C = C(u, {
                    declaredClass: "esri.layers.TiledMapServiceLayer",
                    constructor: function(p, r) {
                        y.connect(this, "onLoad", this, "_initTiledLayer");
                        this._lowestLevel = (this._displayLevels = r ? r.displayLevels : null) ? this._displayLevels[0] : 0;
                        this.resampling = r ? r.resampling : void 0;
                        this._resamplingTolerance = r ? r.resamplingTolerance : null;
                        this.exclusionAreas = r ? r.exclusionAreas : null;
                        p = b.hitch;
                        this._addImage = p(this, this._addImage);
                        this._tileLoadHandler = p(this, this._tileLoadHandler);
                        this._tileErrorHandler = p(this, this._tileErrorHandler);
                        this._popTile = p(this, this._popTile);
                        this._cleanUpRemovedImages = p(this, this._cleanUpRemovedImages);
                        this._fireOnUpdateEvent = p(this, this._fireOnUpdateEvent);
                        this._transitionEnd = p(this, this._transitionEnd);
                        this._tileMapCallback = p(this, this._tileMapCallback)
                    },
                    opacity: 1,
                    isPNG32: !1,
                    _multiple: 1,
                    isResampling: !1,
                    _initTiledLayer: function() {
                        var p = this.tileInfo
                          , r = p.lods;
                        this.resampling = null != this.resampling ? this.resampling : !1;
                        this._tileW = p.width;
                        this._tileH = p.height;
                        var B = this.scales = []
                          , D = this._displayLevels
                          , G = -Infinity
                          , A = Infinity
                          , E = this.fullExtent
                          , H = new x(E.xmin,E.ymax);
                        E = new x(E.xmax,E.ymin);
                        var J = q.getContainingTileCoords, O, V = r.length;
                        for (O = 0; O < V; O++) {
                            var aa = r[O];
                            var da = J(p, H, aa);
                            aa.startTileRow = 0 > da.row ? 0 : da.row;
                            aa.startTileCol = 0 > da.col ? 0 : da.col;
                            da = J(p, E, aa);
                            aa.endTileRow = da.row;
                            aa.endTileCol = da.col;
                            D && -1 === w.indexOf(D, aa.level) || (B[O] = aa.scale,
                            G = aa.scale > G ? aa.scale : G,
                            A = aa.scale < A ? aa.scale : A)
                        }
                        -Infinity === G || this._hasMin || this.setMinScale(G);
                        Infinity === A || this._hasMax || this.setMaxScale(A);
                        this.setExclusionAreas(this.exclusionAreas);
                        this._patchIE = 6 <= t("ie") && 7 > t("ie") && (this.isPNG32 || "Mixed" === p.format)
                    },
                    isVisibleAtScale: function(p) {
                        return p ? u.prototype._isMapAtVisibleScale.call(this, p, !0) : !1
                    },
                    _isMapAtVisibleScale: function(p) {
                        var r = this.inherited(arguments, [p, !0]);
                        if (r) {
                            var B = this._map;
                            r = this.scales;
                            var D = B.getScale()
                              , G = !1
                              , A = B.width > B.height ? B.width : B.height;
                            for (B = 0; B < r.length; B++)
                                if (Math.abs(r[B] - D) / r[B] < 1 / A) {
                                    G = !0;
                                    break
                                }
                            r = G
                        }
                        return r
                    },
                    _setMap: function(p, r, B, D) {
                        this.inherited(arguments);
                        this._map = p;
                        var G = this._div = l.create("div", null, r)
                          , A = p.__visibleDelta
                          , E = y.connect
                          , H = e._css.names
                          , J = {
                            position: "absolute",
                            width: p.width + "px",
                            height: p.height + "px",
                            overflow: "visible"
                        }
                          , O = n.defaults.map.zoomDuration;
                        "css-transforms" === p.navigationMode ? (J[H.transform] = e._css.translate(-A.x, -A.y),
                        f.set(G, J),
                        delete J[H.transform],
                        J[H.transition] = H.transformName + " " + O + "ms ease",
                        f.set(this._active = l.create("div", null, G), J),
                        this._active._remove = 0,
                        this._passives = []) : (J.left = -A.x + "px",
                        J.top = -A.y + "px",
                        f.set(G, J));
                        this._onResizeHandler_connect = E(p, "onResize", this, "_onResizeHandler");
                        this._opacityChangeHandler_connect = E(this, "onOpacityChange", this, "_opacityChangeHandler");
                        A = this.tileInfo;
                        E = A.spatialReference;
                        H = E._getInfo();
                        (this._wrap = p.wrapAround180 && E._isWrappable() && Math.abs(H.origin[0] - A.origin.x) <= H.dx) && q._addFrameInfo(A, H);
                        this.setExclusionAreas(this.exclusionAreas);
                        this.evaluateSuspension();
                        if (this.suspended && !p.loaded)
                            var V = y.connect(p, "onLoad", this, function() {
                                y.disconnect(V);
                                V = null;
                                this.setExclusionAreas(this.exclusionAreas);
                                this.evaluateSuspension()
                            });
                        return G
                    },
                    _unsetMap: function(p, r) {
                        this.suspended || this._suspendImpl();
                        l.destroy(this._div);
                        this._map = this._div = null;
                        var B = y.disconnect;
                        B(this._onResizeHandler_connect);
                        B(this._opacityChangeHandler_connect);
                        this.inherited(arguments)
                    },
                    onSuspend: function() {
                        this.inherited(arguments);
                        this._suspendImpl()
                    },
                    _suspendImpl: function() {
                        g.hide(this._div);
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        this._disableDrawConnectors();
                        var p = this._tiles, r = this._tileIds, B = this._loadingList, D, G, A = y.disconnect, E = l.destroy;
                        B && 0 < B.count && (B.forEach(function(J) {
                            if (D = p[J])
                                A(D._onload_connect),
                                A(D._onerror_connect),
                                A(D._onabort_connect),
                                D._onload_connect = D._onerror_connect = D._onabort_connect = null
                        }),
                        B.clear(),
                        this._fireUpdateEnd());
                        this._removeList.clear();
                        for (B = r.length - 1; 0 <= B; B--)
                            (D = (G = r[B]) && p[G]) && E(D);
                        if ("css-transforms" === this._map.navigationMode) {
                            r = this._active;
                            G = this._passives;
                            this._noDom = 0;
                            for (B = G.length - 1; 0 <= B; B--) {
                                var H = G[B];
                                H._endHandle && A(H._endHandle);
                                H._matrix = H._multiply = H._endHandle = null;
                                H._marked = H._remove = 0;
                                G.splice(B, 1);
                                E(H)
                            }
                            r._matrix = r._multiply = null;
                            r._marked = r._remove = 0
                        }
                        this._tileIds = this._tiles = this._tileBounds = this._ct = this._loadingList = this._removeList = this._standby = null
                    },
                    onResume: function() {
                        this.inherited(arguments);
                        this._tileIds = [];
                        this._tiles = [];
                        this._tileBounds = [];
                        this._ct = null;
                        this._removeList = new a;
                        this._loadingList = new a;
                        g.show(this._div);
                        this._enableDrawConnectors();
                        this._wakeTimer = this._wakeTimer || setTimeout(b.hitch(this, function() {
                            this.suspended || this._onExtentChangeHandler(this._map.extent, null, !0, this._map.__LOD)
                        }), 0)
                    },
                    _enableDrawConnectors: function() {
                        var p = this._map
                          , r = y.connect;
                        if ("css-transforms" === p.navigationMode) {
                            if (this._onScaleHandler_connect = r(p, "onScale", this, this._onScaleHandler),
                            t("esri-mobile")) {
                                this._standby = [];
                                var B = this
                                  , D = function() {
                                    B._noDom = 1
                                };
                                this._onPanStartHandler_connect = r(p, "onPanStart", D);
                                this._onZoomStartHandler_connect = r(p, "onZoomStart", D)
                            }
                        } else
                            this._onZoomHandler_connect = r(p, "onZoom", this, "_onZoomHandler");
                        this._onPanHandler_connect = r(p, "onPan", this, "_onPanHandler");
                        this._onExtentChangeHandler_connect = r(p, "onExtentChange", this, "_onExtentChangeHandler")
                    },
                    _disableDrawConnectors: function() {
                        var p = y.disconnect;
                        p(this._onPanHandler_connect);
                        p(this._onZoomHandler_connect);
                        p(this._onScaleHandler_connect);
                        p(this._onExtentChangeHandler_connect);
                        p(this._onPanStartHandler_connect);
                        p(this._onZoomStartHandler_connect);
                        this._onPanHandler_connect = this._onZoomHandler_connect = this._onScaleHandler_connect = this._onExtentChangeHandler_connect = this._onPanStartHandler_connect = this._onZoomStartHandler_connect = null
                    },
                    _onResizeHandler: function(p, r, B) {
                        p = {
                            width: r + "px",
                            height: B + "px"
                        };
                        r = f.set;
                        r(this._div, p);
                        if ("css-transforms" === this._map.navigationMode)
                            for (this._active && r(this._active, p),
                            B = this._passives.length - 1; 0 <= B; B--)
                                r(this._passives[B], p)
                    },
                    _onExtentChangeHandler: function(p, r, B, D) {
                        r = this._map;
                        var G = this._standby;
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        if (!r._isPanningOrZooming()) {
                            if ("css-transforms" === r.navigationMode) {
                                if (B)
                                    for (D = this._passives.length - 1; 0 <= D; D--) {
                                        var A = this._passives[D];
                                        f.set(A, e._css.names.transition, "none");
                                        A._marked ? (this._passives.splice(D, 1),
                                        A.parentNode && A.parentNode.removeChild(A),
                                        l.destroy(A)) : 0 < A.childNodes.length && (A._multiply = A._multiply ? c.multiply(A._matrix, A._multiply) : A._matrix)
                                    }
                                this._noDom = 0;
                                if (G && G.length)
                                    for (D = G.length - 1; 0 <= D; D--)
                                        A = G[D],
                                        f.set(A, "visibility", "inherit"),
                                        this._popTile(A),
                                        G.splice(D, 1)
                            }
                            this._fireUpdateStart();
                            this._rrIndex = 0;
                            D = q.getCandidateTileInfo(r, this.tileInfo, p);
                            p = r.__visibleDelta;
                            if (!this._ct || D.lod.level !== this._ct.lod.level || B) {
                                A = D && this._ct && D.lod.level !== this._ct.lod.level;
                                this._ct = D;
                                var E = this._tiles
                                  , H = this._tileIds
                                  , J = this._tileBounds
                                  , O = this._removeList
                                  , V = H.length;
                                this._cleanUpRemovedImages();
                                for (D = 0; D < V; D++) {
                                    G = H[D];
                                    var aa = E[G];
                                    J[G] = H[D] = null;
                                    "css-transforms" === r.navigationMode && A && aa.parentNode && r.fadeOnZoom && (aa._fadeOut = A,
                                    aa.parentNode._remove++);
                                    O.add(aa)
                                }
                                B && (this._tileIds = [],
                                this._tiles = [],
                                this._tileBounds = [])
                            }
                            D = p.x;
                            B = p.y;
                            "css-transforms" === r.navigationMode ? (G = {},
                            G[e._css.names.transform] = e._css.translate(D, B),
                            f.set(this._div, G)) : f.set(this._div, {
                                left: D + "px",
                                top: B + "px"
                            });
                            this.__coords_dx = D;
                            this.__coords_dy = B;
                            this._updateImages(new v(0,0,p.width,p.height));
                            0 === this._loadingList.count ? (this._cleanUpRemovedImages(),
                            this.onUpdate(),
                            this._fireUpdateEnd()) : this._fireOnUpdate = !0;
                            B = this._tileW;
                            E = this._tileH;
                            p = new v(-p.x,-p.y,p.width,p.height);
                            for (D = this._tileIds.length - 1; 0 <= D; D--)
                                (G = this._tileIds[D]) ? (A = this._tiles[G],
                                H = h.getMarginBox(A),
                                H = new v(H.l,H.t,B,E),
                                "css-transforms" === r.navigationMode && (H.x = A._left,
                                H.y = A._top),
                                p.intersects(H) ? this._tileBounds[G] = H : (this._loadingList.contains(G) && this._popTile(A),
                                l.destroy(A),
                                this._tileIds.splice(D, 1),
                                delete this._tileBounds[G],
                                delete this._tiles[G])) : (this._tileIds.splice(D, 1),
                                delete this._tileBounds[G],
                                delete this._tiles[G])
                        }
                    },
                    _onPanHandler: function(p, r) {
                        p = this._map;
                        r = p.__visibleDelta.offset(r.x, r.y);
                        this.__coords_dx = this.__coords_dy = 0;
                        "css-transforms" === p.navigationMode ? (p = {},
                        p[e._css.names.transform] = e._css.translate(r.x, r.y),
                        f.set(this._div, p),
                        t("esri-mobile") || this._updateImages({
                            x: -r.x,
                            y: -r.y,
                            width: r.width,
                            height: r.height
                        })) : (f.set(this._div, {
                            left: r.x + "px",
                            top: r.y + "px"
                        }),
                        this._updateImages({
                            x: -r.x,
                            y: -r.y,
                            width: r.width,
                            height: r.height
                        }));
                        0 < this._loadingList.count && (this._fireUpdateStart(),
                        this._fireOnUpdate = !0)
                    },
                    _onScaleHandler: function(p, r) {
                        var B, D = {}, G = e._css.names, A = this._map, E = n.defaults.map.zoomDuration;
                        for (B = this._passives.length - 1; 0 <= B; B--) {
                            var H = this._passives[B];
                            0 === H.childNodes.length ? (this._passives.splice(B, 1),
                            l.destroy(H)) : ("none" === H.style[G.transition] && f.set(H, G.transition, G.transformName + " " + E + "ms ease"),
                            f.set(H, G.transition, r ? "none" : G.transformName + " " + E + "ms ease"),
                            H._matrix = p,
                            D[G.transform] = e._css.matrix(H._multiply ? c.multiply(p, H._multiply) : p),
                            f.set(H, D))
                        }
                        this._active && 0 === this._active.childNodes.length || (f.set(this._active, G.transition, r ? "none" : G.transformName + " " + E + "ms ease"),
                        this._active._matrix = p,
                        D[G.transform] = e._css.matrix(this._active._matrix),
                        f.set(this._active, D),
                        this._passives.push(this._active),
                        D = {
                            position: "absolute",
                            width: A.width + "px",
                            height: A.height + "px",
                            overflow: "visible"
                        },
                        D[G.transition] = G.transformName + " " + E + "ms ease",
                        f.set(this._active = l.create("div", null, this._div), D),
                        this._active._remove = 0,
                        A.fadeOnZoom && l.place(this._active, this._div, "first"))
                    },
                    _onZoomHandler: function(p, r, B) {
                        p = h.getMarginBox(this._div);
                        B = B.offset(-p.l, -p.t);
                        this._previousScale && 1 !== r || (this._previousScale = 1);
                        var D, G = this._tileW * r, A = this._tileH * r, E = this._tileBounds, H = this._tiles, J = this._previousScale, O = this._multiple, V = f.set, aa, da;
                        if ((p = t("ie")) && 8 > p)
                            w.forEach(this._tileIds, function(wa) {
                                da = "";
                                D = E[wa];
                                aa = H[wa].style.margin.split(" ");
                                w.forEach(aa, function(K) {
                                    "" !== da && (da += " ");
                                    K = parseFloat(K);
                                    da += K / J * r + "px"
                                });
                                V(H[wa], {
                                    left: D.x - (G - D.width) * (B.x - D.x) / D.width + "px",
                                    top: D.y - (A - D.height) * (B.y - D.y) / D.height + "px",
                                    margin: 1 !== O && -1 === da.indexOf("NaN") ? da : "",
                                    zoom: r
                                })
                            });
                        else {
                            var ea = G * O, Y = A * O, ia, qa;
                            w.forEach(this._tileIds, function(wa) {
                                da = "";
                                D = E[wa];
                                ia = D.x - (G - D.width) * (B.x - D.x) / D.width;
                                qa = D.y - (A - D.height) * (B.y - D.y) / D.height;
                                aa = H[wa].style.margin.split(" ");
                                w.forEach(aa, function(K) {
                                    "" !== da && (da += " ");
                                    K = parseFloat(K);
                                    da += K / J * r + "px"
                                });
                                V(H[wa], {
                                    left: ia + "px",
                                    top: qa + "px",
                                    margin: 1 !== O && -1 === da.indexOf("NaN") ? da : "",
                                    width: ea + "px",
                                    height: Y + "px"
                                })
                            })
                        }
                        this._previousScale = r
                    },
                    _updateImages: function(p) {
                        if (this._ct) {
                            var r = this._tileW
                              , B = this._tileH
                              , D = this._ct;
                            var G = D.lod;
                            D = D.tile;
                            var A = D.offsets
                              , E = D.coords
                              , H = E.row;
                            E = E.col;
                            var J = G.level
                              , O = this.opacity
                              , V = this._tileIds
                              , aa = this._loadingList
                              , da = this._addImage
                              , ea = this._map.id
                              , Y = this.id
                              , ia = p.x
                              , qa = p.y
                              , wa = G.startTileRow
                              , K = G.endTileRow
                              , Z = G.startTileCol
                              , pa = G.endTileCol
                              , L = w.indexOf
                              , R = A.x - this.__coords_dx
                              , ha = A.y - this.__coords_dy;
                            var na = r - R + -p.x;
                            var ta = B - ha + -p.y;
                            var xa = Math.ceil;
                            na = 0 < na ? na % r : r - Math.abs(na) % r;
                            ta = 0 < ta ? ta % B : B - Math.abs(ta) % B;
                            ia = 0 < ia ? Math.floor((ia + R) / r) : xa((ia - (r - R)) / r);
                            qa = 0 < qa ? Math.floor((qa + ha) / B) : xa((qa - (B - ha)) / B);
                            ha = ia + xa((p.width - na) / r);
                            p = qa + xa((p.height - ta) / B);
                            if (this._wrap) {
                                var Aa = G._frameInfo;
                                var ca = Aa[0];
                                var ja = Aa[1];
                                Aa = Aa[2]
                            }
                            for (ta = ia; ta <= ha; ta++)
                                for (ia = qa; ia <= p; ia++)
                                    xa = H + ia,
                                    na = E + ta,
                                    this._wrap && (na < ja ? (na %= ca,
                                    na = na < ja ? na + ca : na) : na > Aa && (na %= ca)),
                                    !this._isExcluded(J, xa, na) && xa >= wa && xa <= K && na >= Z && na <= pa && (G = ea + "_" + Y + "_tile_" + J + "_" + ia + "_" + ta,
                                    -1 === L(V, G) && (aa.add(G),
                                    V.push(G),
                                    da(J, ia, xa, ta, na, G, r, B, O, D, A)))
                        }
                    },
                    _cleanUpRemovedImages: function() {
                        var p = this._removeList, r = l.destroy, B, D = e._css.names;
                        p.forEach(function(A) {
                            A._fadeOut || (A.style.filter = "",
                            A.style.zoom = 1,
                            r(A))
                        });
                        if ("css-transforms" === this._map.navigationMode)
                            for (B = this._passives.length - 1; 0 <= B; B--) {
                                var G = this._passives[B];
                                0 === G.childNodes.length ? (this._passives.splice(B, 1),
                                r(G)) : this._map.fadeOnZoom && !G._marked && G._remove === G.childNodes.length && (G._marked = 1,
                                2048 > e._css.getScaleFromMatrix(f.get(G, D.transform)) ? (f.set(G, D.transition, "opacity 0.65s"),
                                f.set(G, "opacity", 0),
                                y.disconnect(G._endHandle),
                                G._endHandle = y.connect(G, D.endEvent, this._transitionEnd)) : this._transitionEnd({
                                    propertyName: "opacity",
                                    target: G
                                }))
                            }
                        p.clear()
                    },
                    _transitionEnd: function(p) {
                        var r = p.target;
                        "opacity" === p.propertyName && (y.disconnect(r._endHandle),
                        r._endHandle = null,
                        p = w.indexOf(this._passives, r),
                        -1 < p && this._passives.splice(p, 1),
                        r.parentNode && r.parentNode.removeChild(r),
                        l.destroy(r))
                    },
                    _addImage: function(p, r, B, D, G, A, E, H, J, O, V) {
                        if (this._patchIE)
                            O = this._tiles[A] = l.create("div"),
                            O.id = A,
                            k.add(O, "layerTile"),
                            f.set(O, {
                                left: E * D - V.x + "px",
                                top: H * r - V.y + "px",
                                width: E + "px",
                                height: H + "px",
                                filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'" + this.getTileUrl(p, B, G) + "', sizingMethod\x3d'scale')"
                            }),
                            1 > J && f.set(O, "opacity", J),
                            p = O.appendChild(l.create("div")),
                            f.set(p, {
                                opacity: 0,
                                width: E + "px",
                                height: H + "px"
                            }),
                            this._div.appendChild(O),
                            O = null,
                            this._loadingList.remove(A),
                            this._fireOnUpdateEvent();
                        else {
                            O = this._tiles[A] = l.create("img");
                            var aa = y.connect;
                            O.id = A;
                            O._uid = p + "_" + B + "_" + G;
                            O.alt = "";
                            k.add(O, "layerTile");
                            D = E * D - V.x;
                            V = H * r - V.y;
                            r = this._map;
                            var da = e._css.names;
                            E = {
                                width: E + "px",
                                height: H + "px",
                                visibility: "hidden"
                            };
                            "css-transforms" === r.navigationMode ? (E[da.transform] = e._css.translate(D, V),
                            f.set(O, E),
                            O._left = D,
                            O._top = V) : (E.left = D + "px",
                            E.top = V + "px",
                            f.set(O, E));
                            1 > J && f.set(O, "opacity", J);
                            O._onload_connect = aa(O, "onload", this, "_tileLoadHandler");
                            O._onerror_connect = aa(O, "onerror", b.hitch(this, "_tileErrorHandler", B, G));
                            O._onabort_connect = aa(O, "onabort", this, "_tileAbortHandler");
                            if (this.tileMap)
                                this.tileMap.getTile(p, B, G, A, this._tileMapCallback);
                            else if (A = this.getTileUrl(p, B, G, O))
                                this._failedRequests && this._failedRequests[A] ? (f.set(O, this._failedRequests[A].css),
                                O.src = this._failedRequests[A].src,
                                this._multiple = parseInt(this._failedRequests[A].css.width) / this._tileW,
                                this.isResampling = 1 !== this._multiple) : (this._multiple = 1,
                                this.isResampling = !1,
                                O.src = A);
                            "css-transforms" === r.navigationMode ? this._active.appendChild(O) : this._div.appendChild(O);
                            O = null
                        }
                    },
                    _tileMapCallback: function(p, r) {
                        if (!this.suspended) {
                            var B = this._tiles[r.id] || d.byId(r.id);
                            var D = r.level + "_" + r.row + "_" + r.col;
                            B && B._uid === D ? (this._multiple = 2 * (r.level - p.level) || 1,
                            this.isResampling = 1 !== this._multiple,
                            r = this.tileMap.style(p, r),
                            f.set(B, r),
                            B.src = this.getTileUrl(p.level, p.row, p.col)) : this._popTile(r)
                        }
                    },
                    getTileUrl: function(p, r, B) {},
                    refresh: function() {
                        this.suspended || (this._refreshTS = Date.now(),
                        this._onExtentChangeHandler(this._map.extent, null, !0, this._map.__LOD))
                    },
                    _popTile: function(p) {
                        var r = y.disconnect;
                        r(p._onload_connect);
                        r(p._onerror_connect);
                        r(p._onabort_connect);
                        p._onload_connect = p._onerror_connect = p._onabort_connect = null;
                        this._loadingList.remove(p.id);
                        this._fireOnUpdateEvent()
                    },
                    _tileLoadHandler: function(p) {
                        p = p.currentTarget;
                        this._noDom ? this._standby.push(p) : (f.set(p, "visibility", "inherit"),
                        this._popTile(p))
                    },
                    _tileAbortHandler: function(p) {
                        p = p.currentTarget;
                        this.onError(Error("Unable to load tile: " + p.src));
                        f.set(p, "visibility", "hidden");
                        this._popTile(p)
                    },
                    _tileErrorHandler: function(p, r, B) {
                        B = B.currentTarget;
                        var D = !0;
                        if (this.tileMap || !this.resampling)
                            D = !1;
                        else {
                            var G = new m(B.src);
                            G = G.path.split("/");
                            G = parseInt(G[G.length - 3]);
                            var A = this._ct.lod.level - G + 1;
                            this._multiple = Math.pow(2, A);
                            if (G === this._lowestLevel || 0 === this._resamplingTolerance || this._resamplingTolerance && Math.log(this._multiple) / Math.LN2 > this._resamplingTolerance)
                                D = !1
                        }
                        D ? (this.isResampling = !0,
                        this._resample(B, p, r)) : (this.onError(Error("Unable to load tile: " + B.src)),
                        f.set(B, "visibility", "hidden"),
                        this._popTile(B))
                    },
                    _resample: function(p, r, B) {
                        var D = (new m(p.src)).path.split("/")
                          , G = this._multiple
                          , A = parseInt(D[D.length - 3]) - 1
                          , E = parseInt(r / G)
                          , H = parseInt(B / G);
                        D = B % G;
                        var J = r % G;
                        E = this.getTileUrl(A, E, H);
                        r = this.getTileUrl(A + Math.log(G) / Math.LN2, r, B);
                        G = {
                            width: this._tileW * G + "px",
                            height: this._tileH * G + "px",
                            margin: "-" + this._tileW * J + "px 0 0 -" + (this._tileH * D + "px")
                        };
                        this._failedRequests || (this._failedRequests = {});
                        this._failedRequests[r] = {
                            src: E,
                            css: G
                        };
                        f.set(p, G);
                        t("chrome") && p.setAttribute("src", null);
                        p.src = E
                    },
                    _fireOnUpdateEvent: function() {
                        0 === this._loadingList.count && (this._cleanUpRemovedImages(),
                        this._fireOnUpdate && (this._fireOnUpdate = !1,
                        this.onUpdate(),
                        this._fireUpdateEnd()))
                    },
                    setOpacity: function(p) {
                        if (this.opacity != p)
                            this.onOpacityChange(this.opacity = p)
                    },
                    onOpacityChange: function() {},
                    _opacityChangeHandler: function(p) {
                        var r = f.set, B, D;
                        if ("css-transforms" === this._map.navigationMode) {
                            if (this._active) {
                                var G = this._active.childNodes;
                                for (B = G.length - 1; 0 <= B; B--)
                                    r(G[B], "opacity", p)
                            }
                            for (B = this._passives.length - 1; 0 <= B; B--)
                                for (G = this._passives[B].childNodes,
                                D = G.length - 1; 0 <= D; D--)
                                    r(G[D], "opacity", p)
                        } else
                            for (G = this._div.childNodes,
                            B = G.length - 1; 0 <= B; B--)
                                r(G[B], "opacity", p)
                    },
                    setExclusionAreas: function(p) {
                        this.exclusionAreas = p;
                        if (this.loaded && this._map && this._map.loaded) {
                            var r = this._map.spatialReference, B = this.tileInfo, D = B.origin, G = B.lods, A = G[0].level, E = G[G.length - 1].level, H, J, O;
                            if (this.exclusionAreas && this.exclusionAreas.length) {
                                this._exclusionsPerZoom = [];
                                var V = 0;
                                for (H = p.length; V < H; V++) {
                                    var aa = p[V];
                                    if ((O = aa.geometry) && "extent" === O.type && O.xmin <= O.xmax && O.ymin <= O.ymax) {
                                        if (!r.equals(O.spatialReference))
                                            if (r._canProject(O.spatialReference)) {
                                                if (r.isWebMercator()) {
                                                    var da = x.lngLatToXY(O.xmin, O.ymin);
                                                    O = x.lngLatToXY(O.xmax, O.ymax)
                                                } else
                                                    da = x.xyToLngLat(O.xmin, O.ymin, !0),
                                                    O = x.xyToLngLat(O.xmax, O.ymax, !0);
                                                O = new z(da[0],da[1],O[0],O[1],r)
                                            } else
                                                continue;
                                        var ea = -1;
                                        if (aa.minZoom && -1 !== aa.minZoom)
                                            ea = aa.minZoom;
                                        else if (aa.minScale && -1 !== aa.minScale) {
                                            var Y = 0;
                                            for (J = G.length; Y < J; Y++)
                                                if (G[Y].scale <= aa.minScale) {
                                                    ea = G[Y].level;
                                                    break
                                                }
                                        }
                                        ea = Math.max(ea, A);
                                        da = -1;
                                        if (aa.maxZoom && -1 !== aa.maxZoom)
                                            da = aa.maxZoom;
                                        else if (aa.maxScale && -1 !== aa.maxScale)
                                            for (Y = 0,
                                            J = G.length; Y < J; Y++)
                                                if (G[Y].scale < aa.maxScale) {
                                                    da = G[Y - 1].level;
                                                    break
                                                } else if (G[Y].scale === aa.maxScale) {
                                                    da = G[Y].level;
                                                    break
                                                }
                                        da = -1 === da ? E : Math.min(da, E);
                                        for (aa = ea; aa <= da; aa++) {
                                            Y = 0;
                                            for (J = G.length; Y < J; Y++)
                                                if (G[Y].level === aa) {
                                                    var ia = G[Y];
                                                    break
                                                }
                                            ia && (this._exclusionsPerZoom[aa] || (this._exclusionsPerZoom[aa] = []),
                                            Y = 1 / ia.resolution / B.rows,
                                            J = 1 / ia.resolution / B.cols,
                                            this._exclusionsPerZoom[aa].push({
                                                rowFrom: Math.floor((D.y - O.ymax) * Y),
                                                rowTo: Math.ceil((D.y - O.ymin) * Y),
                                                colFrom: Math.floor((O.xmin - D.x) * J),
                                                colTo: Math.ceil((O.xmax - D.x) * J)
                                            }))
                                        }
                                    }
                                }
                            } else
                                this._exclusionsPerZoom = null;
                            this.suspended || this._onExtentChangeHandler(this._map.extent, null, !0, this._map.__LOD)
                        }
                    },
                    _isExcluded: function(p, r, B) {
                        var D;
                        if (!this._exclusionsPerZoom)
                            return !1;
                        var G = this._exclusionsPerZoom[p];
                        if (!G)
                            return !1;
                        var A = 0;
                        for (D = G.length; A < D; A++)
                            if (p = G[A],
                            r >= p.rowFrom && r < p.rowTo && B >= p.colFrom && B < p.colTo)
                                return !0;
                        return !1
                    }
                });
                t("extend-esri") && b.setObject("layers.TiledMapServiceLayer", C, e);
                return C
            })
        },
        "dojox/collections/ArrayList": function() {
            define(["dojo/_base/kernel", "dojo/_base/array", "./_base"], function(C, y, b) {
                b.ArrayList = function(w) {
                    var m = [];
                    w && (m = m.concat(w));
                    this.count = m.length;
                    this.add = function(l) {
                        m.push(l);
                        this.count = m.length
                    }
                    ;
                    this.addRange = function(l) {
                        if (l.getIterator)
                            for (l = l.getIterator(); !l.atEnd(); )
                                this.add(l.get());
                        else
                            for (var k = 0; k < l.length; k++)
                                m.push(l[k]);
                        this.count = m.length
                    }
                    ;
                    this.clear = function() {
                        m.splice(0, m.length);
                        this.count = 0
                    }
                    ;
                    this.clone = function() {
                        return new b.ArrayList(m)
                    }
                    ;
                    this.contains = function(l) {
                        for (var k = 0; k < m.length; k++)
                            if (m[k] == l)
                                return !0;
                        return !1
                    }
                    ;
                    this.forEach = function(l, k) {
                        C.forEach(m, l, k)
                    }
                    ;
                    this.getIterator = function() {
                        return new b.Iterator(m)
                    }
                    ;
                    this.indexOf = function(l) {
                        for (var k = 0; k < m.length; k++)
                            if (m[k] == l)
                                return k;
                        return -1
                    }
                    ;
                    this.insert = function(l, k) {
                        m.splice(l, 0, k);
                        this.count = m.length
                    }
                    ;
                    this.item = function(l) {
                        return m[l]
                    }
                    ;
                    this.remove = function(l) {
                        l = this.indexOf(l);
                        0 <= l && m.splice(l, 1);
                        this.count = m.length
                    }
                    ;
                    this.removeAt = function(l) {
                        m.splice(l, 1);
                        this.count = m.length
                    }
                    ;
                    this.reverse = function() {
                        m.reverse()
                    }
                    ;
                    this.sort = function(l) {
                        l ? m.sort(l) : m.sort()
                    }
                    ;
                    this.setByIndex = function(l, k) {
                        m[l] = k;
                        this.count = m.length
                    }
                    ;
                    this.toArray = function() {
                        return [].concat(m)
                    }
                    ;
                    this.toString = function(l) {
                        return m.join(l || ",")
                    }
                }
                ;
                return b.ArrayList
            })
        },
        "dojox/collections/_base": function() {
            define(["dojo/_base/kernel", "dojo/_base/lang", "dojo/_base/array"], function(C, y, b) {
                C = y.getObject("dojox.collections", !0);
                C.DictionaryEntry = function(w, m) {
                    this.key = w;
                    this.value = m;
                    this.valueOf = function() {
                        return this.value
                    }
                    ;
                    this.toString = function() {
                        return String(this.value)
                    }
                }
                ;
                C.Iterator = function(w) {
                    var m = 0;
                    this.element = w[m] || null;
                    this.atEnd = function() {
                        return m >= w.length
                    }
                    ;
                    this.get = function() {
                        return this.atEnd() ? null : this.element = w[m++]
                    }
                    ;
                    this.map = function(l, k) {
                        return b.map(w, l, k)
                    }
                    ;
                    this.reset = function() {
                        m = 0;
                        this.element = w[m]
                    }
                }
                ;
                C.DictionaryIterator = function(w) {
                    var m = [], l = {}, k;
                    for (k in w)
                        l[k] || m.push(w[k]);
                    var h = 0;
                    this.element = m[h] || null;
                    this.atEnd = function() {
                        return h >= m.length
                    }
                    ;
                    this.get = function() {
                        return this.atEnd() ? null : this.element = m[h++]
                    }
                    ;
                    this.map = function(f, d) {
                        return b.map(m, f, d)
                    }
                    ;
                    this.reset = function() {
                        h = 0;
                        this.element = m[h]
                    }
                }
                ;
                return C
            })
        },
        "esri/layers/ArcGISMapServiceLayer": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                C = C(null, {
                    declaredClass: "esri.layers.ArcGISMapServiceLayer",
                    infoTemplates: null,
                    constructor: function(a, c) {
                        this.layerInfos = [];
                        c && (this.infoTemplates = c.infoTemplates || null);
                        a = this._params = {};
                        if (c = this._url.query ? this._url.query.token : null)
                            a.token = c
                    },
                    setInfoTemplates: function(a) {
                        this.infoTemplates = a
                    },
                    _load: function() {
                        k({
                            url: this._url.path,
                            content: y.mixin({
                                f: "json"
                            }, this._params),
                            callbackParamName: "callback",
                            load: this._initLayer,
                            error: this._errorHandler
                        })
                    },
                    spatialReference: null,
                    initialExtent: null,
                    fullExtent: null,
                    description: null,
                    units: null,
                    _initLayer: function(a, c) {
                        try {
                            this._findCredential();
                            (this.credential && this.credential.ssl || a && a._ssl) && this._useSSL();
                            this.description = a.description;
                            this.copyright = a.copyrightText;
                            this.spatialReference = a.spatialReference && new h(a.spatialReference);
                            this.initialExtent = a.initialExtent && new f(a.initialExtent);
                            this.fullExtent = a.fullExtent && new f(a.fullExtent);
                            this.units = a.units;
                            this.maxRecordCount = a.maxRecordCount;
                            this.maxImageHeight = a.maxImageHeight;
                            this.maxImageWidth = a.maxImageWidth;
                            this.supportsDynamicLayers = a.supportsDynamicLayers;
                            var e = this.layerInfos = []
                              , n = a.layers
                              , t = this._defaultVisibleLayers = [];
                            b.forEach(n, function(g, q) {
                                e[q] = new d(g);
                                g.defaultVisibility && t.push(g.id)
                            });
                            this.visibleLayers || (this.visibleLayers = t);
                            this.version = a.currentVersion;
                            this.cimVersion = a.cimVersion;
                            this.version || (this.version = "capabilities"in a || "tables"in a ? 10 : "supportedImageFormatTypes"in a ? 9.31 : 9.3);
                            this.capabilities = a.capabilities;
                            l.isDefined(a.minScale) && !this._hasMin && this.setMinScale(a.minScale);
                            l.isDefined(a.maxScale) && !this._hasMax && this.setMaxScale(a.maxScale)
                        } catch (g) {
                            this._errorHandler(g)
                        }
                    }
                });
                w("extend-esri") && y.setObject("layers.ArcGISMapServiceLayer", C, m);
                return C
            })
        },
        "esri/layers/LayerInfo": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function(C, y, b, w, m) {
                C = C(null, {
                    declaredClass: "esri.layers.LayerInfo",
                    constructor: function(l) {
                        y.mixin(this, l)
                    },
                    toJson: function() {
                        return m.fixJson({
                            defaultVisibility: this.defaultVisibility,
                            id: this.id,
                            maxScale: this.maxScale,
                            minScale: this.minScale,
                            name: this.name,
                            parentLayerId: this.parentLayerId,
                            subLayerIds: this.subLayerIds
                        })
                    }
                });
                b("extend-esri") && y.setObject("layers.LayerInfo", C, w);
                return C
            })
        },
        "esri/layers/TimeInfo": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "), function(C, y, b, w, m, l, k) {
                C = C(null, {
                    declaredClass: "esri.layers.TimeInfo",
                    constructor: function(h) {
                        null !== h && (y.mixin(this, h),
                        h.exportOptions && (this.exportOptions = new k(h.exportOptions)),
                        this.timeExtent = null,
                        h.timeExtent && 2 === h.timeExtent.length && (this.timeExtent = new m(h.timeExtent)),
                        this.timeReference = new l(h.timeReference))
                    }
                });
                y.mixin(C, {
                    UNIT_CENTURIES: "esriTimeUnitsCenturies",
                    UNIT_DAYS: "esriTimeUnitsDays",
                    UNIT_DECADES: "esriTimeUnitsDecades",
                    UNIT_HOURS: "esriTimeUnitsHours",
                    UNIT_MILLISECONDS: "esriTimeUnitsMilliseconds",
                    UNIT_MINUTES: "esriTimeUnitsMinutes",
                    UNIT_MONTHS: "esriTimeUnitsMonths",
                    UNIT_SECONDS: "esriTimeUnitsSeconds",
                    UNIT_UNKNOWN: "esriTimeUnitsUnknown",
                    UNIT_WEEKS: "esriTimeUnitsWeeks",
                    UNIT_YEARS: "esriTimeUnitsYears"
                });
                b("extend-esri") && y.setObject("layers.TimeInfo", C, w);
                return C
            })
        },
        "esri/TimeExtent": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "./kernel"], function(C, y, b, w) {
                var m = C(null, {
                    declaredClass: "esri.TimeExtent",
                    constructor: function(l) {
                        if (1 < arguments.length)
                            this._create(arguments[0], arguments[1]);
                        else if (l)
                            if (y.isArray(l)) {
                                var k = l[0]
                                  , h = l[1];
                                this.startTime = null === k || "null" === k ? null : new Date(k);
                                this.endTime = null === h || "null" === h ? null : new Date(h)
                            } else
                                l instanceof Date && this._create(l, null)
                    },
                    offset: function(l, k) {
                        var h = new m
                          , f = this.startTime
                          , d = this.endTime;
                        f && (h.startTime = this._getOffsettedDate(f, l, k));
                        d && (h.endTime = this._getOffsettedDate(d, l, k));
                        return h
                    },
                    intersection: function(l) {
                        return this._intersection(this, l)
                    },
                    toJson: function() {
                        var l = []
                          , k = this.startTime;
                        l.push(k ? k.getTime() : "null");
                        k = this.endTime;
                        l.push(k ? k.getTime() : "null");
                        return l
                    },
                    _create: function(l, k) {
                        this.startTime = l ? new Date(l.getTime()) : null;
                        this.endTime = k ? new Date(k.getTime()) : null
                    },
                    _refData: {
                        esriTimeUnitsMilliseconds: {
                            getter: "getUTCMilliseconds",
                            setter: "setUTCMilliseconds",
                            multiplier: 1
                        },
                        esriTimeUnitsSeconds: {
                            getter: "getUTCSeconds",
                            setter: "setUTCSeconds",
                            multiplier: 1
                        },
                        esriTimeUnitsMinutes: {
                            getter: "getUTCMinutes",
                            setter: "setUTCMinutes",
                            multiplier: 1
                        },
                        esriTimeUnitsHours: {
                            getter: "getUTCHours",
                            setter: "setUTCHours",
                            multiplier: 1
                        },
                        esriTimeUnitsDays: {
                            getter: "getUTCDate",
                            setter: "setUTCDate",
                            multiplier: 1
                        },
                        esriTimeUnitsWeeks: {
                            getter: "getUTCDate",
                            setter: "setUTCDate",
                            multiplier: 7
                        },
                        esriTimeUnitsMonths: {
                            getter: "getUTCMonth",
                            setter: "setUTCMonth",
                            multiplier: 1
                        },
                        esriTimeUnitsYears: {
                            getter: "getUTCFullYear",
                            setter: "setUTCFullYear",
                            multiplier: 1
                        },
                        esriTimeUnitsDecades: {
                            getter: "getUTCFullYear",
                            setter: "setUTCFullYear",
                            multiplier: 10
                        },
                        esriTimeUnitsCenturies: {
                            getter: "getUTCFullYear",
                            setter: "setUTCFullYear",
                            multiplier: 100
                        }
                    },
                    _intersection: function(l, k) {
                        if (l && k) {
                            var h = l.startTime;
                            l = l.endTime;
                            var f = k.startTime;
                            k = k.endTime;
                            h = h ? h.getTime() : -Infinity;
                            f = f ? f.getTime() : -Infinity;
                            l = l ? l.getTime() : Infinity;
                            k = k ? k.getTime() : Infinity;
                            var d, a;
                            f >= h && f <= l ? d = f : h >= f && h <= k && (d = h);
                            l >= f && l <= k ? a = l : k >= h && k <= l && (a = k);
                            if (isNaN(d) || isNaN(a))
                                return null;
                            h = new m;
                            h.startTime = -Infinity === d ? null : new Date(d);
                            h.endTime = Infinity === a ? null : new Date(a);
                            return h
                        }
                        return null
                    },
                    _getOffsettedDate: function(l, k, h) {
                        var f = this._refData;
                        l = new Date(l.getTime());
                        k && h && (f = f[h],
                        l[f.setter](l[f.getter]() + k * f.multiplier));
                        return l
                    }
                });
                b("extend-esri") && (w.TimeExtent = m);
                return m
            })
        },
        "esri/layers/TimeReference": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function(C, y, b, w) {
                C = C(null, {
                    declaredClass: "esri.layers.TimeReference",
                    constructor: function(m) {
                        m && y.mixin(this, m)
                    }
                });
                b("extend-esri") && y.setObject("layers.TimeReference", C, w);
                return C
            })
        },
        "esri/layers/LayerTimeOptions": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function(C, y, b, w, m) {
                C = C(null, {
                    declaredClass: "esri.layers.LayerTimeOptions",
                    constructor: function(l) {
                        l && y.mixin(this, l)
                    },
                    toJson: function() {
                        return m.fixJson({
                            timeDataCumulative: this.timeDataCumulative,
                            timeOffset: this.timeOffset,
                            timeOffsetUnits: this.timeOffsetUnits,
                            useTime: this.useTime
                        })
                    }
                });
                b("extend-esri") && y.setObject("layers.LayerTimeOptions", C, w);
                return C
            })
        },
        "esri/layers/TileMap": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "), function(C, y, b, w, m, l, k) {
                return C(null, {
                    declaredClass: "esri.layers.TileMap",
                    constructor: function(h) {
                        this.layer = h;
                        this._tileMaps = {}
                    },
                    getTile: function(h, f, d, a, c) {
                        h = {
                            id: a,
                            level: h,
                            row: f,
                            col: d
                        };
                        f = this._getResamplingBudget();
                        0 < f ? this._process({
                            tile: h,
                            requestedTile: h,
                            callback: c,
                            resamplingBudget: f
                        }) : (c || this.callback).call(this, h, h)
                    },
                    statusOf: function(h, f, d) {
                        var a = this._getResamplingBudget();
                        h = {
                            level: h,
                            row: f,
                            col: d
                        };
                        if (0 === a)
                            return 1;
                        for (; 0 <= a; ) {
                            f = this._tileToTileMap(h);
                            if (!this._tileMaps[f.uid])
                                return -1;
                            f = this._tileMaps[f.uid];
                            if (!f.promise.isFulfilled())
                                return -1;
                            if (this._isTileAvailable(h, f))
                                return 1;
                            h = this._parentTile(h);
                            if (!h)
                                break;
                            a--
                        }
                        return 0
                    },
                    style: function(h, f) {
                        if (h.level !== f.level || h.row !== f.row || h.col !== f.col) {
                            var d = this.layer.tileInfo
                              , a = d.lods
                              , c = d.cols;
                            d = d.rows;
                            for (var e, n, t = a.length - 1; !e || !n; )
                                e || a[t].level !== h.level || (e = a[t]),
                                n || a[t].level !== f.level || (n = a[t]),
                                t--;
                            a = Math.round(e.resolution / n.resolution);
                            h = f.col % a * -1 * c;
                            f = f.row % a * -1 * d;
                            a = {
                                width: c * a + "px",
                                height: d * a + "px",
                                margin: f + "px 0 0 " + h + "px",
                                "will-change": "transform"
                            };
                            h = 0 === h ? 0 : -1 * h;
                            f = 0 === f ? 0 : -1 * f;
                            a.clip = "rect(" + f + "px," + (h + c) + "px," + (f + d) + "px," + h + "px)";
                            return a
                        }
                    },
                    _process: function(h) {
                        var f = h.tile
                          , d = this._tileToTileMap(f)
                          , a = this._parentTile(f);
                        this._getTileMap(d).then(y.hitch(this, function(c) {
                            d = c;
                            this._isTileAvailable(f, d) ? (h.callback || this.callback).call(this, f, h.requestedTile) : 0 < h.resamplingBudget && a ? (h.resamplingBudget--,
                            h.tile = a,
                            this._process(h)) : (h.callback || this.callback).call(this, h.requestedTile, h.requestedTile)
                        }), y.hitch(this, function() {
                            (h.callback || this.callback).call(this, h.requestedTile, h.requestedTile)
                        }))
                    },
                    _getTileMap: function(h) {
                        var f, d, a = null;
                        if (this._tileMaps[h.uid]) {
                            h = this._tileMaps[h.uid];
                            var c = h.promise
                        } else {
                            this._tileMaps[h.uid] = h;
                            var e = new w;
                            l({
                                url: this._getTileMapUrl(h.level, h.row, h.col),
                                handleAs: "json",
                                content: {
                                    f: "json"
                                },
                                callbackParamName: "callback",
                                timeout: 3E3,
                                load: function(n) {
                                    y.mixin(h, n);
                                    if (h.data && 0 < h.data.length) {
                                        d = h.data.length;
                                        if (1 === d)
                                            a = h.data[0];
                                        else
                                            for (a = h.data[0],
                                            f = 1; f < d; f++)
                                                if (h.data[f] !== a) {
                                                    a = null;
                                                    break
                                                }
                                        null !== a && (delete h.data,
                                        h.value = a);
                                        null == h.valid && (h.valid = !0)
                                    }
                                    e.resolve(h)
                                },
                                error: function(n) {
                                    n && 422 === n.code ? (y.mixin(h, {
                                        location: {
                                            top: h.row,
                                            left: h.col,
                                            width: 8,
                                            height: 8
                                        },
                                        valid: !0,
                                        value: 0
                                    }),
                                    e.resolve(h)) : e.reject()
                                }
                            });
                            c = h.promise = e.promise
                        }
                        return c
                    },
                    _parentTile: function(h) {
                        var f = this.layer.tileInfo.lods, d, a, c = null;
                        b.some(f, function(e, n) {
                            return h.level === e.level ? (d = e,
                            a = n,
                            !0) : !1
                        });
                        0 < a && (f = f[a - 1],
                        c = {
                            id: h.id,
                            level: f.level,
                            row: Math.floor(h.row * d.resolution / f.resolution + .01),
                            col: Math.floor(h.col * d.resolution / f.resolution + .01)
                        });
                        return c
                    },
                    _tileToTileMap: function(h) {
                        var f = 8 * Math.floor(h.row / 8)
                          , d = 8 * Math.floor(h.col / 8);
                        return {
                            uid: h.level + "_" + f + "_" + d,
                            level: h.level,
                            row: f,
                            col: d
                        }
                    },
                    _isTileAvailable: function(h, f) {
                        if (f.valid)
                            if (void 0 !== f.value)
                                h = f.value;
                            else {
                                var d = f.location.left;
                                var a = f.location.top;
                                h = (h.row - a) * f.location.width + (h.col - d);
                                h = h < f.data.length ? f.data[h] : 0
                            }
                        else
                            h = 0;
                        return h
                    },
                    _getTileMapUrl: function(h, f, d) {
                        var a = this.layer
                          , c = a.tileServers
                          , e = a._getToken()
                          , n = a._url.query;
                        h = (c ? c[f % c.length] : a._url.path) + "/tilemap/" + h + "/" + f + "/" + d + "/8/8";
                        n && (h += "?" + m.objectToQuery(n));
                        !e || n && n.token || (h += (-1 === h.indexOf("?") ? "?" : "\x26") + "token\x3d" + e);
                        return h = a.addTimestampToURL(h)
                    },
                    _getResamplingBudget: function() {
                        var h = this.layer
                          , f = 0;
                        h.resampling && (f = h._resamplingTolerance,
                        null === f || void 0 === f) && (f = h.tileInfo.lods.length);
                        return f
                    }
                })
            })
        },
        "esri/layers/MapImageLayer": function() {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                var n = C([e], {
                    declaredClass: "esri.layers.MapImageLayer",
                    "-chains-": {
                        constructor: "manual"
                    },
                    constructor: function(t) {
                        this.inherited(arguments, [null, t]);
                        this._mapImages = [];
                        var g = b.hitch;
                        this._panStart = g(this, this._panStart);
                        this._pan = g(this, this._pan);
                        this._extentChange = g(this, this._extentChange);
                        this._zoom = g(this, this._zoom);
                        this._zoomStart = g(this, this._zoomStart);
                        this._scale = g(this, this._scale);
                        this._resize = g(this, this._resize);
                        y.connect(this, "onSuspend", this, this._onSuspend);
                        y.connect(this, "onResume", this, this._onResume);
                        this.loaded = !0;
                        this.onLoad(this)
                    },
                    opacity: 1,
                    addImage: function(t) {
                        var g = this._mapImages.push(t);
                        --g;
                        t._idx = g;
                        t._layer = this;
                        this._div && this._createImage(t, g)
                    },
                    removeImage: function(t) {
                        if (t) {
                            var g = t._idx
                              , q = this._mapImages;
                            if (q[g] === t) {
                                delete q[g];
                                if (g = t._node)
                                    this._clearEvents(g),
                                    g.e_idx = g.e_bl = g.e_tr = g.e_l = g.e_t = g.e_w = g.e_h = null,
                                    g.parentNode && (g.parentNode.removeChild(g),
                                    m.destroy(g));
                                t._node = t._idx = t._layer = null
                            }
                        }
                    },
                    removeAllImages: function() {
                        var t = this._mapImages, g, q = t.length;
                        for (g = 0; g < q; g++) {
                            var x = t[g];
                            x && this.removeImage(x)
                        }
                        this._mapImages = []
                    },
                    getImages: function() {
                        var t = this._mapImages, g = [], q, x = t.length;
                        for (q = 0; q < x; q++)
                            t[q] && g.push(t[q]);
                        return g
                    },
                    setOpacity: function(t) {
                        this.opacity != t && (this._opacityChanged(this.opacity = t),
                        this.onOpacityChange())
                    },
                    onOpacityChange: function() {},
                    _opacityChanged: function(t) {
                        var g = this._div;
                        if (g)
                            if (!f("ie") || 8 < f("ie"))
                                l.set(g, "opacity", t);
                            else {
                                var q = g.childNodes;
                                var x = q.length;
                                for (g = 0; g < x; g++)
                                    l.set(q[g], "opacity", t)
                            }
                    },
                    _createImage: function(t, g) {
                        var q = m.create("img");
                        l.set(q, {
                            position: "absolute"
                        });
                        1 > t.opacity ? l.set(q, "opacity", t.opacity) : 8 >= f("ie") && l.set(q, "opacity", this.opacity);
                        !t.rotation || 9 > f("ie") || l.set(q, k._css.names.transform, k._css.rotate(360 - t.rotation));
                        t._node = q;
                        q.e_idx = g;
                        q.e_layer = this;
                        q.e_load = y.connect(q, "onload", n.prototype._imageLoaded);
                        q.e_error = y.connect(q, "onerror", n.prototype._imageError);
                        q.e_abort = y.connect(q, "onabort", n.prototype._imageError);
                        q.src = t.href
                    },
                    _imageLoaded: function(t, g) {
                        t = g || t.target || t.currentTarget;
                        g = t.e_layer;
                        var q = g._mapImages[t.e_idx]
                          , x = g._map;
                        x && (x.__zooming || x.__panning || !g._sr) ? g._standby.push(t) : (g._clearEvents(t),
                        q && q._node === t && x && g._attach(q))
                    },
                    _imageError: function(t) {
                        t = t.target || t.currentTarget;
                        var g = t.e_layer
                          , q = g._mapImages[t.e_idx];
                        g._clearEvents(t);
                        q && (q._node = null)
                    },
                    _clearEvents: function(t) {
                        var g = y.disconnect;
                        g(t.e_load);
                        g(t.e_error);
                        g(t.e_abort);
                        t.e_load = t.e_error = t.e_abort = t.e_layer = null
                    },
                    _attach: function(t) {
                        var g = t.extent
                          , q = g.spatialReference
                          , x = this._sr
                          , v = this._div
                          , z = t._node
                          , u = new a({
                            x: g.xmin,
                            y: g.ymin,
                            spatialReference: q
                        });
                        g = new a({
                            x: g.xmax,
                            y: g.ymax,
                            spatialReference: q
                        });
                        x.equals(q) || (x.isWebMercator() && 4326 === q.wkid ? (u = c.geographicToWebMercator(u),
                        g = c.geographicToWebMercator(g)) : q.isWebMercator() && 4326 === x.wkid && (u = c.webMercatorToGeographic(u),
                        g = c.webMercatorToGeographic(g)));
                        z.e_bl = u;
                        z.e_tr = g;
                        t.visible && (this._setPos(z, v._left, v._top),
                        (this._active || v).appendChild(z))
                    },
                    _setPos: function(t, g, q) {
                        var x = t.e_bl
                          , v = t.e_tr
                          , z = this._map;
                        x = z.toScreen(x);
                        v = z.toScreen(v);
                        g = x.x - g;
                        q = v.y - q;
                        var u = Math.abs(v.x - x.x);
                        x = Math.abs(x.y - v.y);
                        v = {
                            width: u + "px",
                            height: x + "px"
                        };
                        var p = this._mapImages[t.e_idx];
                        "css-transforms" === z.navigationMode ? v[k._css.names.transform] = k._css.translate(g, q) + (p.rotation ? " " + k._css.rotate(360 - p.rotation) : "") : (v.left = g + "px",
                        v.top = q + "px");
                        l.set(t, v);
                        t.e_l = g;
                        t.e_t = q;
                        t.e_w = u;
                        t.e_h = x
                    },
                    managedSuspension: !0,
                    _setMap: function(t, g) {
                        this.inherited(arguments);
                        var q = this._div = m.create("div", null, g)
                          , x = k._css.names
                          , v = {
                            position: "absolute"
                        }
                          , z = t.__visibleDelta;
                        if (!f("ie") || 8 < f("ie"))
                            v.opacity = this.opacity;
                        "css-transforms" === t.navigationMode ? (v[x.transform] = k._css.translate(z.x, z.y),
                        l.set(q, v),
                        q._left = z.x,
                        q._top = z.y,
                        v = {
                            position: "absolute",
                            width: t.width + "px",
                            height: t.height + "px",
                            overflow: "visible"
                        },
                        this._active = m.create("div", null, q),
                        l.set(this._active, v),
                        this._passive = m.create("div", null, q),
                        l.set(this._passive, v)) : (q._left = 0,
                        q._top = 0,
                        l.set(q, v));
                        this._standby = [];
                        x = this._mapImages;
                        z = x.length;
                        for (v = 0; v < z; v++) {
                            var u = x[v];
                            u._node || this._createImage(u, u._idx)
                        }
                        d.hide(q);
                        return q
                    },
                    _unsetMap: function(t, g) {
                        this._disconnect();
                        var q = this._div;
                        if (q) {
                            var x = this._mapImages, v, z = x.length;
                            for (v = 0; v < z; v++) {
                                var u = x[v];
                                if (u) {
                                    var p = u._node;
                                    p && (this._clearEvents(p),
                                    p.e_idx = p.e_bl = p.e_tr = p.e_l = p.e_t = p.e_w = p.e_h = null);
                                    u._node = null
                                }
                            }
                            g.removeChild(q);
                            m.destroy(q)
                        }
                        this._map = this._div = this._sr = this._active = this._passive = this._standby = null;
                        this.inherited(arguments)
                    },
                    _onSuspend: function() {
                        this._disconnect();
                        d.hide(this._div)
                    },
                    _onResume: function(t) {
                        t.firstOccurrence && (this._sr = this._map.spatialReference,
                        this._processStandbyList());
                        t = this._map;
                        var g = this._div
                          , q = t.__visibleDelta;
                        "css-transforms" === t.navigationMode && (g._left = q.x,
                        g._top = q.y,
                        l.set(g, k._css.names.transform, k._css.translate(g._left, g._top)));
                        this._redraw("css-transforms" === t.navigationMode);
                        this._connect(t);
                        d.show(g)
                    },
                    _connect: function(t) {
                        if (!this._connections) {
                            var g = y.connect
                              , q = "css-transforms" === t.navigationMode;
                            this._connections = [g(t, "onPanStart", this._panStart), g(t, "onPan", this._pan), g(t, "onExtentChange", this._extentChange), q && g(t, "onZoomStart", this._zoomStart), q ? g(t, "onScale", this._scale) : g(t, "onZoom", this._zoom), q && g(t, "onResize", this._resize)];
                            q && this._resize(t.extent, t.width, t.height)
                        }
                    },
                    _disconnect: function() {
                        this._connections && (w.forEach(this._connections, y.disconnect),
                        this._connections = null)
                    },
                    _panStart: function() {
                        this._panL = this._div._left;
                        this._panT = this._div._top
                    },
                    _pan: function(t, g) {
                        t = this._div;
                        t._left = this._panL + g.x;
                        t._top = this._panT + g.y;
                        "css-transforms" === this._map.navigationMode ? l.set(t, k._css.names.transform, k._css.translate(t._left, t._top)) : l.set(t, {
                            left: t._left + "px",
                            top: t._top + "px"
                        })
                    },
                    _extentChange: function(t, g, q) {
                        q ? this._redraw("css-transforms" === this._map.navigationMode) : g && this._pan(t, g);
                        this._processStandbyList()
                    },
                    _processStandbyList: function() {
                        var t, g = this._standby;
                        if (g && g.length)
                            for (t = g.length - 1; 0 <= t; t--)
                                this._imageLoaded(null, g[t]),
                                g.splice(t, 1)
                    },
                    _redraw: function(t) {
                        if (t) {
                            t = this._passive;
                            var g = k._css.names;
                            l.set(t, g.transition, "none");
                            this._moveImages(t, this._active);
                            l.set(t, g.transform, "none")
                        }
                        t = this._active || this._div;
                        g = this._div._left;
                        var q = this._div._top, x, v = t.childNodes.length;
                        for (x = 0; x < v; x++) {
                            var z = t.childNodes[x];
                            this._setPos(z, g, q)
                        }
                    },
                    _zoom: function(t, g, q) {
                        t = this._div;
                        var x = t._left, v = t._top, z, u = t.childNodes.length;
                        for (z = 0; z < u; z++) {
                            var p = t.childNodes[z];
                            var r = p.e_w * g
                              , B = p.e_h * g
                              , D = (q.x - x - p.e_l) * (r - p.e_w) / p.e_w
                              , G = (q.y - v - p.e_t) * (B - p.e_h) / p.e_h;
                            D = isNaN(D) ? 0 : D;
                            G = isNaN(G) ? 0 : G;
                            l.set(p, {
                                left: p.e_l - D + "px",
                                top: p.e_t - G + "px",
                                width: r + "px",
                                height: B + "px"
                            })
                        }
                    },
                    _zoomStart: function() {
                        this._moveImages(this._active, this._passive)
                    },
                    _moveImages: function(t, g) {
                        t = t.childNodes;
                        var q = t.length;
                        if (0 < q)
                            for (--q; 0 <= q; q--)
                                g.appendChild(t[q])
                    },
                    _scale: function(t, g) {
                        var q = k._css.names
                          , x = this._passive;
                        l.set(x, q.transition, g ? "none" : q.transformName + " " + h.defaults.map.zoomDuration + "ms ease");
                        ({})[q.transform] = k._css.matrix(t);
                        l.set(x, q.transform, k._css.matrix(t))
                    },
                    _resize: function(t, g, q) {
                        l.set(this._active, {
                            width: g + "px",
                            height: q + "px"
                        });
                        l.set(this._passive, {
                            width: g + "px",
                            height: q + "px"
                        })
                    }
                });
                f("extend-esri") && b.setObject("layers.MapImageLayer", n, k);
                return n
            })
        },
        "esri/layers/OpenStreetMapLayer": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "), function(C, y, b, w, m, l, k, h, f) {
                C = C(h, {
                    declaredClass: "esri.layers.OpenStreetMapLayer",
                    constructor: function(d) {
                        this.spatialReference = new l({
                            wkid: 102100
                        });
                        this.tileInfo = new f({
                            rows: 256,
                            cols: 256,
                            dpi: 96,
                            format: "PNG8",
                            compressionQuality: 0,
                            origin: {
                                x: -2.0037508342787E7,
                                y: 2.0037508342787E7
                            },
                            spatialReference: {
                                wkid: 102100
                            },
                            lods: [{
                                level: 0,
                                scale: 5.91657527591555E8,
                                resolution: 156543.033928
                            }, {
                                level: 1,
                                scale: 2.95828763795777E8,
                                resolution: 78271.5169639999
                            }, {
                                level: 2,
                                scale: 1.47914381897889E8,
                                resolution: 39135.7584820001
                            }, {
                                level: 3,
                                scale: 7.3957190948944E7,
                                resolution: 19567.8792409999
                            }, {
                                level: 4,
                                scale: 3.6978595474472E7,
                                resolution: 9783.93962049996
                            }, {
                                level: 5,
                                scale: 1.8489297737236E7,
                                resolution: 4891.96981024998
                            }, {
                                level: 6,
                                scale: 9244648.868618,
                                resolution: 2445.98490512499
                            }, {
                                level: 7,
                                scale: 4622324.434309,
                                resolution: 1222.99245256249
                            }, {
                                level: 8,
                                scale: 2311162.217155,
                                resolution: 611.49622628138
                            }, {
                                level: 9,
                                scale: 1155581.108577,
                                resolution: 305.748113140558
                            }, {
                                level: 10,
                                scale: 577790.554289,
                                resolution: 152.874056570411
                            }, {
                                level: 11,
                                scale: 288895.277144,
                                resolution: 76.4370282850732
                            }, {
                                level: 12,
                                scale: 144447.638572,
                                resolution: 38.2185141425366
                            }, {
                                level: 13,
                                scale: 72223.819286,
                                resolution: 19.1092570712683
                            }, {
                                level: 14,
                                scale: 36111.909643,
                                resolution: 9.55462853563415
                            }, {
                                level: 15,
                                scale: 18055.954822,
                                resolution: 4.77731426794937
                            }, {
                                level: 16,
                                scale: 9027.977411,
                                resolution: 2.38865713397468
                            }, {
                                level: 17,
                                scale: 4513.988705,
                                resolution: 1.19432856685505
                            }, {
                                level: 18,
                                scale: 2256.994353,
                                resolution: .597164283559817
                            }, {
                                level: 19,
                                scale: 1128.497176,
                                resolution: .298582141647617
                            }]
                        });
                        this.fullExtent = new k({
                            xmin: -2.003750834E7,
                            ymin: -2.003750834E7,
                            xmax: 2.003750834E7,
                            ymax: 2.003750834E7,
                            spatialReference: {
                                wkid: 102100
                            }
                        });
                        this.initialExtent = new k({
                            xmin: -2.003750834E7,
                            ymin: -2.003750834E7,
                            xmax: 2.003750834E7,
                            ymax: 2.003750834E7,
                            spatialReference: {
                                wkid: 102100
                            }
                        });
                        this.tileServers = d && d.tileServers || ["//a.tile.openstreetmap.org", "//b.tile.openstreetmap.org", "//c.tile.openstreetmap.org"];
                        this.serversLength = this.tileServers.length;
                        this._displayLevels = d ? d.displayLevels : null;
                        this.copyright = d && d.copyright || "Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";
                        this.loaded = !0;
                        this.onLoad(this);
                        (d = d && d.loadCallback) && d(this)
                    },
                    getTileUrl: function(d, a, c) {
                        d = this.tileServers[a % this.serversLength] + "/" + d + "/" + c + "/" + a + ".png";
                        d = m.normalize(d);
                        d = this.addTimestampToURL(d);
                        return m.addProxy(d)
                    }
                });
                b("extend-esri") && y.setObject("layers.OpenStreetMapLayer", C, w);
                return C
            })
        },
        "esri/dijit/Popup": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom dojo/has!extend-esri?./PopupTemplate dojo/has!extend-esri?./PopupRenderer".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B, D, G) {
                C = C([B, D, h], {
                    declaredClass: "esri.dijit.Popup",
                    offsetX: 3,
                    offsetY: 3,
                    zoomFactor: 4,
                    marginLeft: 25,
                    marginTop: 25,
                    highlight: !0,
                    pagingControls: !0,
                    pagingInfo: !0,
                    keepHighlightOnHide: !1,
                    popupWindow: !0,
                    titleInBody: !0,
                    anchor: "auto",
                    visibleWhenEmpty: !0,
                    hideDelay: 1E3,
                    location: null,
                    constructor: function(A, E) {
                        this.initialize();
                        y.mixin(this, A);
                        this.domNode = d.byId(E);
                        E = this._nls = y.mixin({}, G.widgets.popup);
                        A = this.domNode;
                        c.add(A, "esriPopup");
                        (this._isRTL = !n.isBodyLtr()) && t.set(A, "direction", "rtl");
                        a.set(A, "innerHTML", "\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'" + E.NLS_searching + "...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'" + E.NLS_prevFeature + "'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'" + E.NLS_nextFeature + "'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'" + E.NLS_maximize + "'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'" + E.NLS_close + "'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'" + E.NLS_zoomTo + "' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e" + E.NLS_zoomTo + "\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
                        this._sizers = m.query(".sizer", A);
                        E = m.query(".titlePane", A)[0];
                        this._title = m.query(".title", E)[0];
                        this._prevFeatureButton = m.query(".prev", E)[0];
                        this._nextFeatureButton = m.query(".next", E)[0];
                        this._maxButton = m.query(".maximize", E)[0];
                        this._spinner = m.query(".spinner", E)[0];
                        this._contentPane = m.query(".contentPane", A)[0];
                        this._positioner = m.query(".esriPopupWrapper", A)[0];
                        this._pointer = m.query(".pointer", A)[0];
                        this._outerPointer = m.query(".outerPointer", A)[0];
                        this._actionList = m.query(".actionsPane .actionList", A)[0];
                        this._contentUpdateHandles = {};
                        this._eventConnections = [w.connect(m.query(".close", E)[0], "onclick", this, this.hide), w.connect(this._prevFeatureButton, "onclick", this, this.selectPrevious), w.connect(this._nextFeatureButton, "onclick", this, this.selectNext), w.connect(this._maxButton, "onclick", this, this._toggleSize), w.connect(m.query(".zoomTo", this._actionList)[0], "onclick", this, this._zoomToFeature), w.connect(this, "onClearFeatures", this, this._featuresCleared), w.connect(this, "onSelectionChange", this, this._featureSelected), w.connect(this, "onDfdComplete", this, this._updateUI)];
                        l("esri-touch") && (A = v.setScrollable(this._contentPane),
                        this._eventConnections.push(A[0], A[1]));
                        this._toggleVisibility(!1)
                    },
                    onMaximize: function() {},
                    onRestore: function() {},
                    setMap: function(A) {
                        this.inherited(arguments);
                        e.place(this.domNode, A.root);
                        this.highlight && this.enableHighlight(A);
                        this._maxHeight = t.get(this._contentPane, "maxHeight")
                    },
                    unsetMap: function() {
                        this.disableHighlight(this.map);
                        this.inherited(arguments)
                    },
                    setTitle: function(A) {
                        this.popupWindow && (x.isDefined(A) && "" !== A || (A = "\x26nbsp;"),
                        this.destroyDijits(this._title),
                        this.place(A, this._title),
                        this.isShowing && (this.startupDijits(this._title),
                        this.reposition()))
                    },
                    setContent: function(A) {
                        this.popupWindow && (x.isDefined(A) && "" !== A || (A = "\x26nbsp;"),
                        this._destroyContent(),
                        this.place(A, this._contentPane),
                        this.isShowing && (this._startupContent(),
                        this.reposition()))
                    },
                    show: function(A, E) {
                        if (this.popupWindow)
                            if (this._delayHide = !1,
                            A) {
                                var H = this.map;
                                A.spatialReference ? (this.location = A,
                                A = H.toScreen(A)) : this.location = H.toMap(A);
                                var J = H._getFrameWidth();
                                if (-1 !== J && (A.x %= J,
                                0 > A.x && (A.x += J),
                                H.width > J))
                                    for (H = (H.width - J) / 2; A.x < H; )
                                        A.x += J;
                                this._maximized ? this.restore() : this._setPosition(A);
                                E && E.closestFirst && this.showClosestFirst(this.location);
                                this.isShowing || (this._toggleVisibility(!0),
                                this._followMap(),
                                this.startupDijits(this._title),
                                this._startupContent(),
                                this.reposition(),
                                this.showHighlight(),
                                this.onShow())
                            } else
                                this._toggleVisibility(!0)
                    },
                    hide: function() {
                        this.isShowing && (this._toggleVisibility(!1),
                        this._unfollowMap(),
                        this.keepHighlightOnHide || this.hideHighlight(),
                        this.onHide())
                    },
                    resize: function(A, E) {
                        this.popupWindow && (this._sizers.style({
                            width: A + "px"
                        }),
                        t.set(this._contentPane, "maxHeight", E + "px"),
                        this._maxHeight = E,
                        this.isShowing && this.reposition())
                    },
                    reposition: function() {
                        this.popupWindow && this.map && this.location && !this._maximized && this.isShowing && this._setPosition(this.map.toScreen(this.location))
                    },
                    addActions: function(A) {
                        return b.map(A, function(E) {
                            var H = e.create("a", {
                                href: "javascript:void(0);",
                                className: "action " + E.className,
                                title: E.title,
                                innerHTML: E.title
                            }, this._actionList);
                            w.connect(H, "onclick", E.callback);
                            return {
                                action: E,
                                node: H
                            }
                        }, this)
                    },
                    removeActions: function(A) {
                        b.forEach(A, function(E) {
                            e.destroy(E.node)
                        })
                    },
                    getCurrentAnchor: function() {
                        return this._anchor
                    },
                    maximize: function() {
                        var A = this.map;
                        if (A && !this._maximized && this.popupWindow) {
                            this._maximized = !0;
                            var E = this._maxButton;
                            c.remove(E, "maximize");
                            c.add(E, "restore");
                            a.set(E, "title", this._nls.NLS_restore);
                            E = this.marginLeft;
                            var H = this.marginTop
                              , J = A.width - 2 * E;
                            A = A.height - 2 * H;
                            t.set(this.domNode, {
                                left: this._isRTL ? null : E + "px",
                                right: this._isRTL ? E + "px" : null,
                                top: H + "px",
                                bottom: null
                            });
                            t.set(this._positioner, {
                                left: null,
                                right: null,
                                top: null,
                                bottom: null
                            });
                            this._savedWidth = t.get(this._sizers[0], "width");
                            this._savedHeight = t.get(this._contentPane, "maxHeight");
                            this._sizers.style({
                                width: J + "px"
                            });
                            t.set(this._contentPane, {
                                maxHeight: A - 65 + "px",
                                height: A - 65 + "px"
                            });
                            this._showPointer("");
                            this._unfollowMap();
                            c.add(this.domNode, "esriPopupMaximized");
                            this.onMaximize()
                        }
                    },
                    restore: function() {
                        if (this.map && this._maximized && this.popupWindow) {
                            this._maximized = !1;
                            var A = this._maxButton;
                            c.remove(A, "restore");
                            c.add(A, "maximize");
                            a.set(A, "title", this._nls.NLS_maximize);
                            t.set(this._contentPane, "height", null);
                            this.resize(this._savedWidth, this._savedHeight);
                            this._savedWidth = this._savedHeight = null;
                            this.show(this.location);
                            this._followMap();
                            c.remove(this.domNode, "esriPopupMaximized");
                            this.onRestore()
                        }
                    },
                    startup: function() {},
                    destroy: function() {
                        this.map && this.unsetMap();
                        this.cleanup();
                        this.isShowing && this.hide();
                        this.destroyDijits(this._title);
                        this._destroyContent();
                        b.forEach(this._eventConnections, w.disconnect);
                        e.destroy(this.domNode);
                        this._sizers = this._contentPane = this._actionList = this._positioner = this._pointer = this._outerPointer = this._title = this._prevFeatureButton = this._nextFeatureButton = this._spinner = this._eventConnections = this._pagerScope = this._targetLocation = this._nls = this._maxButton = null
                    },
                    selectNext: function() {
                        this.select(this.selectedIndex + 1)
                    },
                    selectPrevious: function() {
                        this.select(this.selectedIndex - 1)
                    },
                    setFeatures: function(A, E) {
                        this._transientAnchor = E && E.anchor;
                        this.inherited(arguments);
                        this._updateUI()
                    },
                    clearFeatures: function(A) {
                        A || (this._transientAnchor = null);
                        this.inherited(arguments)
                    },
                    postscript: null,
                    _highlightSetter: function(A) {
                        var E = this.highlight
                          , H = this.map;
                        this.highlight = A;
                        if (H && A !== E)
                            if (A) {
                                if (this.enableHighlight(H),
                                A = this.features && this.features[this.selectedIndex])
                                    this.updateHighlight(H, A),
                                    this.showHighlight()
                            } else
                                this.disableHighlight(H)
                    },
                    _pagingControlsSetter: function(A) {
                        var E = this.pagingControls
                          , H = this.map;
                        this.pagingControls = A;
                        H && A !== E && this._updatePagingControls()
                    },
                    _pagingInfoSetter: function(A) {
                        var E = this.pagingInfo
                          , H = this.map;
                        this.pagingInfo = A;
                        H && A !== E && this.features && this.features.length && this._updatePagingInfo()
                    },
                    _popupWindowSetter: function(A) {
                        var E = this.popupWindow
                          , H = this.map;
                        this.popupWindow = A;
                        H && A !== E && (A ? (this._updateUI(),
                        this._updateWindow()) : (this.hide(),
                        this.showHighlight()))
                    },
                    _anchorSetter: function(A) {
                        var E = this.anchor;
                        this.anchor = A;
                        this.map && A !== E && this.reposition()
                    },
                    _startupContent: function() {
                        var A = this._contentPane;
                        this.startupDijits(A);
                        b.forEach(this._getPopupRendererDijits(A), function(E) {
                            if (!this._contentUpdateHandles[E.id]) {
                                var H = E.on("content-update", y.hitch(this, function() {
                                    this.reposition()
                                }));
                                this._contentUpdateHandles[E.id] = H
                            }
                        }, this)
                    },
                    _destroyContent: function() {
                        var A = this._contentPane;
                        b.forEach(this._getPopupRendererDijits(A), function(E) {
                            var H = this._contentUpdateHandles[E.id];
                            H && (H.remove(),
                            delete this._contentUpdateHandles[E.id])
                        }, this);
                        this.destroyDijits(A)
                    },
                    _getPopupRendererDijits: function(A) {
                        A = this.getDijits(A);
                        return A = b.filter(A, function(E) {
                            return E && E.set && /_PopupRenderer/.test(E.declaredClass)
                        })
                    },
                    _featuresCleared: function() {
                        this.setTitle("\x26nbsp;");
                        this.setContent("\x26nbsp;");
                        this._setPagerCallbacks(this);
                        this._updateUI();
                        this.hideHighlight()
                    },
                    _featureSelected: function() {
                        this._updateUI();
                        this._updateWindow()
                    },
                    _updateWindow: function() {
                        var A = this.selectedIndex;
                        if (0 <= A) {
                            var E = this.features[A].getContent();
                            if (!this.titleInBody && E && y.isString(E.id)) {
                                var H = g.byId(E.id);
                                H && H.set && /_PopupRenderer/.test(H.declaredClass) && H.set("showTitle", !1)
                            }
                            this.setContent(E);
                            this.updateHighlight(this.map, this.features[A]);
                            this.showHighlight()
                        }
                    },
                    _toggleVisibility: function(A) {
                        this._setVisibility(A);
                        this.isShowing = A
                    },
                    _setVisibility: function(A) {
                        c.toggle(this.domNode, "esriPopupVisible", A);
                        c.toggle(this.domNode, "esriPopupHidden", !A)
                    },
                    _waitAndHide: function(A) {
                        var E = this;
                        this._delayHide = !0;
                        setTimeout(function() {
                            E._delayHide && (E._delayHide = !1,
                            E.hide())
                        }, A)
                    },
                    _followMap: function() {
                        this._unfollowMap();
                        var A = this.map;
                        this._handles = [w.connect(A, "onPanStart", this, this._onPanStart), w.connect(A, "onPan", this, this._onPan), w.connect(A, "onZoomStart", this, this._onZoomStart), w.connect(A, "onExtentChange", this, this._onExtentChange)]
                    },
                    _unfollowMap: function() {
                        var A = this._handles;
                        A && (b.forEach(A, w.disconnect),
                        this._handles = null)
                    },
                    _onPanStart: function() {
                        var A = this.domNode.style;
                        this._panOrigin = {
                            left: A.left,
                            top: A.top,
                            right: A.right,
                            bottom: A.bottom
                        }
                    },
                    _onPan: function(A, E) {
                        var H = this._panOrigin;
                        A = E.x;
                        E = E.y;
                        var J = H.left
                          , O = H.top
                          , V = H.right;
                        H = H.bottom;
                        J && (J = parseFloat(J) + A + "px");
                        O && (O = parseFloat(O) + E + "px");
                        V && (V = parseFloat(V) - A + "px");
                        H && (H = parseFloat(H) - E + "px");
                        t.set(this.domNode, {
                            left: J,
                            top: O,
                            right: V,
                            bottom: H
                        })
                    },
                    _onZoomStart: function() {
                        this._setVisibility(!1)
                    },
                    _onExtentChange: function(A, E, H) {
                        H && (this._setVisibility(!0),
                        this.show(this._targetLocation || this.location));
                        this._targetLocation = null
                    },
                    _toggleSize: function() {
                        this._maximized ? this.restore() : this.maximize()
                    },
                    _getTargetAnchor: function() {
                        return this._transientAnchor || this.anchor
                    },
                    _setPosition: function(A) {
                        var E = A.x
                          , H = A.y;
                        A = this.offsetX || 0;
                        var J = this.offsetY || 0
                          , O = 0
                          , V = 0
                          , aa = this.map
                          , da = aa.position.x
                          , ea = aa.position.y
                          , Y = aa.width
                          , ia = aa.height;
                        aa = "Left";
                        var qa = "bottom"
                          , wa = "right"
                          , K = "top"
                          , Z = n.getContentBox(this._positioner)
                          , pa = Z.w / 2
                          , L = Z.h / 2
                          , R = t.get(this._sizers[0], "height") + this._maxHeight + t.get(this._sizers[2], "height")
                          , ha = R / 2
                          , na = 0
                          , ta = 0
                          , xa = Y
                          , Aa = ia
                          , ca = E
                          , ja = H
                          , X = this._getTargetAnchor().toLowerCase();
                        if ("auto" === X) {
                            if (X = k.getBox)
                                X = X(),
                                na = Math.max(X.l, da),
                                xa = Math.min(X.l + X.w, da + Y),
                                ta = Math.max(X.t, ea),
                                Aa = Math.min(X.t + X.h, ea + ia),
                                ca += da,
                                ja += ea;
                            da = ja - ta >= R;
                            ea = Aa - ja >= R;
                            Y = xa - ca >= Z.w;
                            Z = ca - na >= Z.w;
                            ja - ta > ha && Aa - ja >= ha && (Y ? (qa = "",
                            aa = "Left",
                            K = "",
                            wa = "right") : Z && (qa = "",
                            aa = "Right",
                            K = "",
                            wa = "left"));
                            aa && qa && ca - na > pa && xa - ca >= pa && (da ? (aa = "",
                            qa = "bottom",
                            wa = "",
                            K = "top") : ea && (aa = "",
                            qa = "top",
                            wa = "",
                            K = "bottom"));
                            aa && qa && (Y && da ? (aa = "Left",
                            qa = "bottom",
                            wa = "right",
                            K = "top") : Y && ea ? (aa = "Left",
                            qa = "top",
                            wa = "right",
                            K = "bottom") : Z && ea ? (aa = "Right",
                            qa = "top",
                            wa = "left",
                            K = "bottom") : Z && da && (aa = "Right",
                            qa = "bottom",
                            wa = "left",
                            K = "top"));
                            this._anchor = K && wa ? K + "-" + wa : K || wa
                        } else
                            qa = aa = "",
                            -1 !== X.indexOf("top") ? qa = "bottom" : -1 !== X.indexOf("bottom") && (qa = "top"),
                            -1 !== X.indexOf("left") ? aa = "Right" : -1 !== X.indexOf("right") && (aa = "Left"),
                            this._anchor = this._getTargetAnchor();
                        wa = qa + aa;
                        switch (wa) {
                        case "top":
                        case "bottom":
                            V = 14;
                            break;
                        case "Left":
                        case "Right":
                            O = 13;
                            break;
                        case "topLeft":
                        case "topRight":
                        case "bottomLeft":
                        case "bottomRight":
                            V = 14,
                            O = -16
                        }
                        t.set(this.domNode, {
                            left: E + "px",
                            top: H + "px",
                            right: null,
                            bottom: null
                        });
                        E = {
                            left: null,
                            right: null,
                            top: null,
                            bottom: null
                        };
                        aa ? E[aa.toLowerCase()] = O + A + "px" : E.left = -pa + "px";
                        qa ? E[qa] = V + J + "px" : E.top = -L + "px";
                        t.set(this._positioner, E);
                        this._showPointer(wa)
                    },
                    _showPointer: function(A) {
                        c.remove(this._pointer, "top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));
                        c.remove(this._outerPointer, ["right", "left", "hidden"]);
                        "Right" === A || "Left" === A ? (A = A.toLowerCase(),
                        c.add(this._outerPointer, A)) : c.add(this._pointer, A)
                    },
                    _setPagerCallbacks: function(A, E, H) {
                        if (this.pagingControls && (A !== this || this._pagerScope && this._pagerScope !== this) && A !== this._pagerScope) {
                            this._pagerScope = A;
                            A === this && (E = this.selectPrevious,
                            H = this.selectNext);
                            var J = this._eventConnections;
                            w.disconnect(J[1]);
                            w.disconnect(J[2]);
                            E && (J[1] = w.connect(this._prevFeatureButton, "onclick", A, E));
                            H && (J[2] = w.connect(this._nextFeatureButton, "onclick", A, H))
                        }
                    },
                    _getLocation: function(A) {
                        var E = A && A.geometry;
                        if (E)
                            switch (E.type) {
                            case "point":
                                var H = E;
                                if (A.isAggregate()) {
                                    A = A.getChildGraphics();
                                    var J = A[0];
                                    A = (J = J.geometry && J.geometry.spatialReference) && new p({
                                        points: b.map(A, function(O) {
                                            O = O.geometry;
                                            return [O.x, O.y]
                                        }),
                                        spatialReference: J.toJson()
                                    });
                                    J = r.getDenormalizedExtent(A)
                                }
                                break;
                            case "multipoint":
                                H = E.getPoint(0);
                                J = r.getDenormalizedExtent(E);
                                break;
                            case "polyline":
                            case "polygon":
                                H = E.getPoint(0, 0),
                                J = r.getDenormalizedExtent(E)
                            }
                        return [H, J]
                    },
                    _zoomToFeature: function(A) {
                        A.preventDefault();
                        var E = this.features
                          , H = this.selectedIndex;
                        A = this.map;
                        if (E)
                            if (H = this._getLocation(E[H]),
                            E = H[0],
                            H = H[1],
                            E || (E = this.location),
                            H && H.intersects(this.location) || (this.location = E),
                            H && H.getWidth() && H.getHeight())
                                A.setExtent(H, !0);
                            else {
                                var J = A.getNumLevels();
                                H = A.getLevel();
                                var O = A.getMaxZoom()
                                  , V = this.zoomFactor || 1;
                                0 < J ? H !== O && (J = H + V,
                                J > O && (J = O),
                                A.navigationManager._wheelZoom({
                                    value: J - H,
                                    mapPoint: E
                                }, !0)) : A.navigationManager._wheelZoom({
                                    value: 1 / Math.pow(2, V) * 2,
                                    mapPoint: E
                                }, !0)
                            }
                    },
                    _updatePagingControls: function() {
                        var A = this._prevFeatureButton
                          , E = this._nextFeatureButton
                          , H = this.selectedIndex
                          , J = this.features ? this.features.length : 0;
                        this.pagingControls && 1 < J ? (0 === H ? c.add(A, "hidden") : c.remove(A, "hidden"),
                        H === J - 1 ? c.add(E, "hidden") : c.remove(E, "hidden")) : (c.add(A, "hidden"),
                        c.add(E, "hidden"))
                    },
                    _updatePagingInfo: function() {
                        var A = this.features ? this.features.length : 0
                          , E = this._nls
                          , H = "\x26nbsp;";
                        this.pagingInfo && 1 < A && E.NLS_pagingInfo && (H = x.substitute({
                            index: this.selectedIndex + 1,
                            total: A
                        }, E.NLS_pagingInfo));
                        A && (E = this.getSelectedFeature(),
                        A = E.getInfoTemplate(),
                        E = E.getTitle(),
                        A && !/esri\.InfoTemplate/.test(A.declaredClass) && this.titleInBody || !E || (H = E + ("\x26nbsp;" === H ? "" : " " + H)));
                        this.setTitle(H)
                    },
                    _updateUI: function() {
                        if (this.popupWindow) {
                            var A = this.features
                              , E = this.deferreds
                              , H = A ? A.length : 0
                              , J = this._spinner
                              , O = this._actionList
                              , V = this._nls;
                            this._updatePagingControls();
                            this._updatePagingInfo();
                            H ? c.remove(O, "hidden") : c.add(O, "hidden");
                            E && E.length ? A ? c.remove(J, "hidden") : this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e" + V.NLS_searching + "...\x3c/div\x3e") : c.add(J, "hidden");
                            H || E && E.length ? this._delayHide = !1 : (this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e" + V.NLS_noInfo + ".\x3c/div\x3e"),
                            this.visibleWhenEmpty || this._waitAndHide(this.hideDelay))
                        }
                    }
                });
                l("extend-esri") && y.setObject("dijit.Popup", C, q);
                return C
            })
        },
        "esri/geometry/normalizeUtils": function() {
            define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c) {
                function e(D, G) {
                    return Math.ceil((D - G) / (2 * G))
                }
                function n(D, G) {
                    var A = D.paths || D.rings, E, H, J = A.length;
                    for (E = 0; E < J; E++) {
                        var O = A[E].length;
                        for (H = 0; H < O; H++) {
                            var V = D.getPoint(E, H);
                            D.setPoint(E, H, V.offset(G, 0))
                        }
                    }
                    return D
                }
                function t(D, G) {
                    if (!(D instanceof f || D instanceof d))
                        throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),
                        Error("_straightLineDensify: the input geometry is neither polyline nor polygon");
                    var A = D instanceof f, E = [], H;
                    C.forEach(A ? D.paths : D.rings, function(J) {
                        E.push(H = []);
                        H.push([J[0][0], J[0][1]]);
                        var O, V;
                        for (O = 0; O < J.length - 1; O++) {
                            var aa = J[O][0];
                            var da = J[O][1];
                            var ea = J[O + 1][0];
                            var Y = J[O + 1][1];
                            var ia = Math.sqrt((ea - aa) * (ea - aa) + (Y - da) * (Y - da));
                            var qa = (Y - da) / ia;
                            var wa = (ea - aa) / ia;
                            var K = ia / G;
                            if (1 < K) {
                                for (V = 1; V <= K - 1; V++) {
                                    var Z = V * G;
                                    var pa = wa * Z + aa;
                                    Z = qa * Z + da;
                                    H.push([pa, Z])
                                }
                                V = (ia + Math.floor(K - 1) * G) / 2;
                                pa = wa * V + aa;
                                Z = qa * V + da;
                                H.push([pa, Z])
                            }
                            H.push([ea, Y])
                        }
                    });
                    return A ? new f({
                        paths: E,
                        spatialReference: D.spatialReference
                    }) : new d({
                        rings: E,
                        spatialReference: D.spatialReference
                    })
                }
                function g(D, G, A) {
                    G && (D = t(D, 1E6),
                    D = a.webMercatorToGeographic(D, !0));
                    A && (D = n(D, A));
                    return D
                }
                function q(D, G, A) {
                    var E = D.x || D[0];
                    if (E > G) {
                        var H = e(E, G);
                        D.x ? D = D.offset(-2 * H * G, 0) : D[0] = E + -2 * H * G
                    } else
                        E < A && (H = e(E, A),
                        D.x ? D = D.offset(-2 * H * A, 0) : D[0] = E + -2 * H * A);
                    return D
                }
                function x(D, G) {
                    var A = -1;
                    C.forEach(G.cutIndexes, function(E, H) {
                        var J = G.geometries[H];
                        C.forEach(J.rings || J.paths, function(O, V) {
                            C.some(O, function(aa) {
                                if (!(180 > aa[0])) {
                                    aa = 0;
                                    var da, ea = O.length;
                                    for (da = 0; da < ea; da++) {
                                        var Y = O[da][0];
                                        aa = Y > aa ? Y : aa
                                    }
                                    aa = Number(aa.toFixed(9));
                                    aa = -360 * e(aa, 180);
                                    ea = O.length;
                                    for (da = 0; da < ea; da++)
                                        Y = J.getPoint(V, da),
                                        J.setPoint(V, da, Y.offset(aa, 0))
                                }
                                return !0
                            })
                        });
                        E === A ? J.rings ? C.forEach(J.rings, function(O) {
                            D[E] = D[E].addRing(O)
                        }) : C.forEach(J.paths, function(O) {
                            D[E] = D[E].addPath(O)
                        }) : (A = E,
                        D[E] = J)
                    });
                    return D
                }
                function v(D, G, A, E) {
                    var H = new b;
                    H.addCallbacks(A, E);
                    G = G || l.defaults.geometryService;
                    var J = [], O = [], V, aa, da, ea, Y, ia, qa, wa, K = 0;
                    C.forEach(D, function(R) {
                        if (R)
                            if (V || (V = R.spatialReference,
                            aa = V._getInfo(),
                            ea = (da = V._isWebMercator()) ? 2.0037508342788905E7 : 180,
                            Y = da ? -2.0037508342788905E7 : -180,
                            ia = da ? 102100 : 4326,
                            qa = new f({
                                paths: [[[ea, Y], [ea, ea]]],
                                spatialReference: {
                                    wkid: ia
                                }
                            }),
                            wa = new f({
                                paths: [[[Y, Y], [Y, ea]]],
                                spatialReference: {
                                    wkid: ia
                                }
                            })),
                            aa) {
                                var ha = c.fromJson(R.toJson())
                                  , na = R.getExtent();
                                "point" === R.type ? J.push(q(ha, ea, Y)) : "multipoint" === R.type ? (ha.points = C.map(ha.points, function(ta) {
                                    return q(ta, ea, Y)
                                }),
                                J.push(ha)) : "extent" === R.type ? (ha = na._normalize(null, null, aa),
                                J.push(ha.rings ? new d(ha) : ha)) : na ? (R = 2 * e(na.xmin, Y) * ea,
                                ha = 0 === R ? ha : n(ha, R),
                                na = na.offset(R, 0),
                                na.intersects(qa) && na.xmax !== ea ? (K = na.xmax > K ? na.xmax : K,
                                ha = g(ha, da),
                                O.push(ha),
                                J.push("cut")) : na.intersects(wa) && na.xmin !== Y ? (K = 2 * na.xmax * ea > K ? 2 * na.xmax * ea : K,
                                ha = g(ha, da, 360),
                                O.push(ha),
                                J.push("cut")) : J.push(ha)) : J.push(ha)
                            } else
                                J.push(R);
                        else
                            J.push(R)
                    });
                    A = new f;
                    E = e(K, ea);
                    for (var Z = -90, pa = E; 0 < E; ) {
                        var L = -180 + 360 * E;
                        A.addPath([[L, Z], [L, -1 * Z]]);
                        Z *= -1;
                        E--
                    }
                    0 < O.length && 0 < pa ? G ? G.cut(O, A, function(R) {
                        O = x(O, R);
                        var ha = [];
                        C.forEach(J, function(na, ta) {
                            "cut" === na && (na = O.shift(),
                            D[ta].rings && 1 < D[ta].rings.length && na.rings.length >= D[ta].rings.length ? (J[ta] = "simplify",
                            ha.push(na)) : J[ta] = !0 === da ? a.geographicToWebMercator(na) : na)
                        });
                        0 < ha.length ? G.simplify(ha, function(na) {
                            C.forEach(J, function(ta, xa) {
                                "simplify" === ta && (J[xa] = !0 === da ? a.geographicToWebMercator(na.shift()) : na.shift())
                            });
                            H.callback(J)
                        }, function(na) {
                            H.errback(na)
                        }) : H.callback(J)
                    }, function(R) {
                        H.errback(R)
                    }) : H.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")) : (C.forEach(J, function(R, ha) {
                        "cut" === R && (R = O.shift(),
                        J[ha] = !0 === da ? a.geographicToWebMercator(R) : R)
                    }),
                    H.callback(J));
                    return H
                }
                function z(D, G, A, E) {
                    var H = !1, J;
                    y.isObject(D) && D && (y.isArray(D) ? D.length && ((J = D[0] && D[0].declaredClass) && -1 !== J.indexOf("Graphic") ? (D = C.map(D, function(O) {
                        return O.geometry
                    }),
                    H = D.length ? !0 : !1) : J && -1 !== J.indexOf("esri.geometry.") && (H = !0)) : (J = D.declaredClass) && -1 !== J.indexOf("FeatureSet") ? (D = C.map(D.features || [], function(O) {
                        return O.geometry
                    }),
                    H = D.length ? !0 : !1) : J && -1 !== J.indexOf("esri.geometry.") && (H = !0));
                    H && G.push({
                        index: A,
                        property: E,
                        value: D
                    })
                }
                function u(D, G) {
                    var A = [];
                    C.forEach(G, function(E) {
                        var H = E.i
                          , J = D[H];
                        E = E.p;
                        var O;
                        if (y.isObject(J) && J)
                            if (E)
                                if ("*" === E[0])
                                    for (O in J)
                                        J.hasOwnProperty(O) && z(J[O], A, H, O);
                                else
                                    C.forEach(E, function(V) {
                                        z(y.getObject(V, !1, J), A, H, V)
                                    });
                            else
                                z(J, A, H)
                    });
                    return A
                }
                function p(D, G) {
                    var A = 0
                      , E = {};
                    C.forEach(G, function(H) {
                        var J = H.index
                          , O = H.property
                          , V = H.value
                          , aa = V.length || 1
                          , da = D.slice(A, A + aa);
                        y.isArray(V) || (da = da[0]);
                        A += aa;
                        delete H.value;
                        O ? (E[J] = E[J] || {},
                        E[J][O] = da) : E[J] = da
                    });
                    return E
                }
                function r(D) {
                    for (var G = [], A = 0, E = 0, H = Math.min, J = Math.max, O = 0; O < D.length; O++) {
                        for (var V = D[O], aa = null, da = 0; da < V.length; da++)
                            aa = V[da],
                            G.push(aa),
                            0 === da ? E = A = aa[0] : (A = H(A, aa[0]),
                            E = J(E, aa[0]));
                        aa && G.push([(A + E) / 2, 0])
                    }
                    return G
                }
                var B = {
                    normalizeCentralMeridian: v,
                    _foldCutResults: x,
                    _prepareGeometryForCut: g,
                    _offsetMagnitude: e,
                    _pointNormalization: q,
                    _updatePolyGeometry: n,
                    _straightLineDensify: t,
                    _createWrappers: function(D) {
                        var G = y.isObject(D) ? D.prototype : y.getObject(D + ".prototype");
                        C.forEach(G.__msigns, function(A) {
                            var E = G[A.n];
                            G[A.n] = function() {
                                var H = this, J = [], O, V = new b(k._dfdCanceller);
                                A.f && k._fixDfd(V);
                                for (O = 0; O < A.c; O++)
                                    J[O] = arguments[O];
                                var aa = {
                                    dfd: V
                                };
                                J.push(aa);
                                var da = [], ea;
                                if (H.normalization && !H._isTable) {
                                    var Y = u(J, A.a);
                                    C.forEach(Y, function(ia) {
                                        da = da.concat(ia.value)
                                    });
                                    da.length && (ea = v(da))
                                }
                                ea ? (V._pendingDfd = ea,
                                ea.addCallbacks(function(ia) {
                                    V.canceled || (aa.assembly = p(ia, Y),
                                    V._pendingDfd = E.apply(H, J))
                                }, function(ia) {
                                    var qa = H.declaredClass;
                                    qa && -1 !== qa.indexOf("FeatureLayer") ? H._resolve([ia], null, J[A.e], V, !0) : H._errorHandler(ia, J[A.e], V)
                                })) : V._pendingDfd = E.apply(H, J);
                                return V
                            }
                        })
                    },
                    _disassemble: u,
                    _addToBucket: z,
                    _reassemble: p,
                    getDenormalizedExtent: function(D) {
                        if (!D)
                            return null;
                        var G = D.getExtent();
                        if (!G)
                            return null;
                        var A = D.spatialReference && D.spatialReference._getInfo();
                        if (!A)
                            return G;
                        var E = A.valid[0];
                        A = A.valid[1];
                        var H = 2 * A
                          , J = G.getWidth()
                          , O = G.xmax
                          , V = G.xmin;
                        if ("extent" === D.type || 0 === J || J <= A || J > H || O < E || V > A)
                            return G;
                        switch (D.type) {
                        case "polygon":
                            if (1 < D.rings.length)
                                var aa = r(D.rings);
                            else
                                return G;
                            break;
                        case "polyline":
                            if (1 < D.paths.length)
                                aa = r(D.paths);
                            else
                                return G;
                            break;
                        case "multipoint":
                            aa = D.points
                        }
                        D = Math.min;
                        E = Math.max;
                        H = new h(G.toJson());
                        for (var da = 0; da < aa.length; da++) {
                            var ea = aa[da][0];
                            0 > ea ? (ea += A,
                            V = E(ea, V)) : (ea -= A,
                            O = D(ea, O))
                        }
                        H.xmin = O;
                        H.xmax = V;
                        return H.getWidth() < J ? (H.xmin -= A,
                        H.xmax -= A,
                        H) : G
                    }
                };
                w("extend-esri") && y.mixin(y.getObject("geometry", !0, m), B);
                return B
            })
        },
        "esri/geometry/jsonUtils": function() {
            define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "), function(C, y, b, w, m, l, k, h, f) {
                function d(n, t, g) {
                    var q = n.rings || n.paths, x, v;
                    var z = 0;
                    for (x = q.length; z < x; z++) {
                        var u = q[z];
                        var p = 0;
                        for (v = u.length; p < v; p++) {
                            var r = u[p];
                            if (0 < p)
                                B += r[0],
                                D += r[1];
                            else {
                                var B = r[0];
                                var D = r[1]
                            }
                            r[0] = t(B);
                            r[1] = g(D)
                        }
                    }
                    return n
                }
                var a = {
                    esriGeometryPoint: function(n, t, g) {
                        n.x = t(n.x);
                        n.y = g(n.y);
                        return n
                    },
                    esriGeometryPolyline: d,
                    esriGeometryPolygon: d,
                    esriGeometryEnvelope: function(n, t, g) {
                        n.xmin = t(n.xmin);
                        n.ymin = g(n.ymin);
                        n.xmax = t(n.xmax);
                        n.ymax = g(n.ymax);
                        return n
                    },
                    esriGeometryMultipoint: function(n, t, g) {
                        var q = n.points, x;
                        var v = 0;
                        for (x = q.length; v < x; v++) {
                            var z = q[v];
                            if (0 < v)
                                u += z[0],
                                p += z[1];
                            else {
                                var u = z[0];
                                var p = z[1]
                            }
                            z[0] = t(u);
                            z[1] = g(p)
                        }
                        return n
                    }
                }
                  , c = {
                    esriGeometryPoint: function(n, t, g) {
                        n.x = t(n.x);
                        n.y = g(n.y);
                        return n
                    }
                }
                  , e = {
                    createInstance: function(n, t) {
                        n = new n;
                        t && w.mixin(n, t);
                        return n
                    },
                    fromJson: function(n) {
                        if (void 0 !== n.x && void 0 !== n.y)
                            return new m(n);
                        if (void 0 !== n.paths)
                            return new l(n);
                        if (void 0 !== n.rings)
                            return new k(n);
                        if (void 0 !== n.points)
                            return new h(n);
                        if (void 0 !== n.xmin && void 0 !== n.ymin && void 0 !== n.xmax && void 0 !== n.ymax)
                            return new f(n)
                    },
                    getJsonType: function(n) {
                        return n instanceof m ? "esriGeometryPoint" : n instanceof l ? "esriGeometryPolyline" : n instanceof k ? "esriGeometryPolygon" : n instanceof f ? "esriGeometryEnvelope" : n instanceof h ? "esriGeometryMultipoint" : null
                    },
                    getGeometryType: function(n) {
                        return "esriGeometryPoint" === n ? m : "esriGeometryPolyline" === n ? l : "esriGeometryPolygon" === n ? k : "esriGeometryEnvelope" === n ? f : "esriGeometryMultipoint" === n ? h : null
                    },
                    supportsLazyUnquantization: function(n) {
                        return "esriGeometryPoint" === n || "esriGeometryPolyline" === n || "esriGeometryPolygon" === n || "esriGeometryMultipoint" === n
                    },
                    unquantizeFunction: function(n, t) {
                        if (n && t) {
                            var g = t.translate[0]
                              , q = t.translate[1]
                              , x = t.scale[0]
                              , v = t.scale[1]
                              , z = function(r) {
                                return r * x + g
                            }
                              , u = function(r) {
                                return q - r * v
                            }
                              , p = a[n];
                            return function(r) {
                                return r ? p(r, z, u) : null
                            }
                        }
                    },
                    unquantize: function(n, t, g) {
                        if (t = e.unquantizeFunction(t, g)) {
                            var q = n.length;
                            for (g = 0; g < q; g++)
                                t(n[g].geometry)
                        }
                    },
                    quantizeFunction: function(n, t) {
                        if (n && "esriGeometryPoint" === n && t) {
                            var g = t.translate[0]
                              , q = t.translate[1]
                              , x = t.scale[0]
                              , v = t.scale[1]
                              , z = function(r) {
                                return Math.round((r - g) / x)
                            }
                              , u = function(r) {
                                return Math.round((q - r) / v)
                            }
                              , p = c[n];
                            return function(r) {
                                return r ? p(r, z, u) : null
                            }
                        }
                    },
                    quantize: function(n, t, g) {
                        if (t = e.quantizeFunction(t, g)) {
                            var q = n.length;
                            for (g = 0; g < q; g++)
                                t(n[g].geometry)
                        }
                    }
                };
                y("extend-esri") && C.mixin(C.getObject("geometry", !0, b), e);
                return e
            })
        },
        "esri/InfoWindowBase": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "), function(C, y, b, w, m, l, k, h, f, d, a) {
                C = C(null, {
                    declaredClass: "esri.InfoWindowBase",
                    constructor: function() {
                        var c = y.hitch;
                        this.__set_title = c(this, this.__set_title);
                        this.__err_title = c(this, this.__err_title);
                        this.__set_content = c(this, this.__set_content);
                        this.__err_content = c(this, this.__err_content)
                    },
                    setMap: function(c) {
                        this.map = c
                    },
                    unsetMap: function(c) {
                        delete this.map
                    },
                    setTitle: function() {},
                    setContent: function() {},
                    show: function() {},
                    hide: function() {},
                    resize: function() {},
                    onShow: function() {},
                    onHide: function() {},
                    place: function(c, e) {
                        d.isDefined(c) ? y.isObject(c) ? l.place(c, e, "only") : e.innerHTML = c : e.innerHTML = ""
                    },
                    startupDijits: function(c) {
                        this._processDijits(c)
                    },
                    destroyDijits: function(c) {
                        this._processDijits(c, !0)
                    },
                    getDijits: function(c) {
                        var e = [];
                        c && 1 === c.children.length && (c = c.children[0]) && (e = (e = h.byNode(c)) ? [e] : h.findWidgets(c));
                        return e
                    },
                    _processDijits: function(c, e) {
                        c = this.getDijits(c);
                        b.forEach(c, function(n) {
                            if (e) {
                                if (n._started && !n._destroyed)
                                    try {
                                        n.destroyRecursive ? n.destroyRecursive() : n.destroy && n.destroy()
                                    } catch (t) {
                                        console.debug("An error occurred when destroying a widget embedded within InfoWindow: " + t.message)
                                    }
                            } else if (!n._started)
                                try {
                                    n.startup()
                                } catch (t) {
                                    console.debug("An error occurred when starting a widget embedded within InfoWindow: " + t.message)
                                }
                        })
                    },
                    __registerMapListeners: function() {
                        this.__unregisterMapListeners();
                        var c = this.map;
                        this.__handles = [w.connect(c, "onPan", this, this.__onMapPan), w.connect(c, "onZoomStart", this, this.__onMapZmStart), w.connect(c, "onExtentChange", this, this.__onMapExtChg)]
                    },
                    __unregisterMapListeners: function() {
                        var c = this.__handles;
                        c && (b.forEach(c, w.disconnect, w),
                        this.__handles = null)
                    },
                    __onMapPan: function(c, e) {
                        this.move(e, !0)
                    },
                    __onMapZmStart: function() {
                        this.__mcoords = this.mapCoords || this.map.toMap(new a(this.coords));
                        this.hide(null, !0)
                    },
                    __onMapExtChg: function(c, e, n) {
                        c = this.map;
                        var t = this.mapCoords;
                        t ? this.show(t, null, !0) : (e = n ? c.toScreen(this.__mcoords) : this.coords.offset(e && e.x || 0, e && e.y || 0),
                        this.show(e, null, !0))
                    },
                    __setValue: function(c, e) {
                        this[c].innerHTML = "";
                        var n = "_dfd" + c
                          , t = this[n];
                        t && -1 === t.fired && (t.cancel(),
                        this[n] = null);
                        d.isDefined(e) && (e instanceof m ? (this[n] = e,
                        e.addCallbacks(this["__set" + c], this["__err" + c])) : this.__render(c, e))
                    },
                    __set_title: function(c) {
                        this._dfd_title = null;
                        this.__render("_title", c)
                    },
                    __err_title: function(c) {
                        this._dfd_title = null
                    },
                    __set_content: function(c) {
                        this._dfd_content = null;
                        this.__render("_content", c)
                    },
                    __err_content: function(c) {
                        this._dfd_content = null
                    },
                    __render: function(c, e) {
                        var n = this[c];
                        this.place(e, n);
                        this.isShowing && (this.startupDijits(n),
                        "_title" === c && this._adjustContentArea && this._adjustContentArea())
                    }
                });
                k("extend-esri") && (f.InfoWindowBase = C);
                return C
            })
        },
        "esri/PopupBase": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented dojo/has!extend-esri?./PopupInfo".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x) {
                function v(z) {
                    return "sizeInfo" === z.type
                }
                C = C(x, {
                    declaredClass: "esri.PopupBase",
                    _featureLayers: {},
                    _updateEndHandles: [],
                    _mapLevelChangeHandle: null,
                    _evtMap: {
                        "set-features": !0,
                        "clear-features": !0,
                        "selection-change": !0,
                        "dfd-complete": !0
                    },
                    onSetFeatures: function() {},
                    onClearFeatures: function() {},
                    onSelectionChange: function() {},
                    onDfdComplete: function() {},
                    initialize: function() {
                        this.count = 0;
                        this.selectedIndex = -1;
                        this.on("clear-features", y.hitch(this, this._resetUpdateEndListeners));
                        this.on("dfd-complete", y.hitch(this, this._processFeatures));
                        this.on("set-features", y.hitch(this, this._processFeatures));
                        this.on("selection-change", y.hitch(this, this._checkFeatureResolution))
                    },
                    cleanup: function() {
                        this.features = this.deferreds = null;
                        this._resetUpdateEndListeners();
                        this._untrackMapLevelChange()
                    },
                    setFeatures: function(z) {
                        if (z && z.length) {
                            this.clearFeatures(!0);
                            var u, p;
                            z[0]instanceof m ? p = z : u = z;
                            u ? this._updateFeatures(null, u) : (this.deferreds = p,
                            p = p.slice(0),
                            b.forEach(p, function(r) {
                                r.addBoth(y.hitch(this, this._updateFeatures, r))
                            }, this))
                        }
                    },
                    clearFeatures: function(z) {
                        this.features = this.deferreds = this._marked = null;
                        this.count = 0;
                        var u = this.selectedIndex;
                        this.selectedIndex = -1;
                        if (-1 < u)
                            this.onSelectionChange();
                        this.onClearFeatures({
                            isIntermediate: !!z
                        })
                    },
                    getSelectedFeature: function() {
                        var z = this.features;
                        if (z)
                            return z[this.selectedIndex]
                    },
                    select: function(z) {
                        0 > z || z >= this.count || (this.selectedIndex = z,
                        this.onSelectionChange())
                    },
                    enableHighlight: function(z) {
                        this._highlighted = z.graphics.add(new h(new f(0,0,z.spatialReference)));
                        this._highlighted.attr("data-popup-highlight", "");
                        this._highlighted.hide();
                        this._trackMapLevelChange(z);
                        this.markerSymbol || (z = this.markerSymbol = new e,
                        z.setStyle(e.STYLE_TARGET),
                        z._setDim(16, 16, 0),
                        z.setOutline(new t(n.STYLE_SOLID,new w([0, 255, 255]),2,t.CAP_ROUND,t.JOIN_ROUND)),
                        z.setColor(new w([0, 0, 0, 0])));
                        this.lineSymbol || (this.lineSymbol = new n(n.STYLE_SOLID,new w([0, 255, 255]),2));
                        this.fillSymbol || (this.fillSymbol = new g(g.STYLE_NULL,new n(n.STYLE_SOLID,new w([0, 255, 255]),2),new w([0, 0, 0, 0])));
                        this.clusterFillSymbol || (this.clusterFillSymbol = new g(g.STYLE_SOLID,new n(n.STYLE_SOLID,new w([0, 255, 255]),1.33),null))
                    },
                    disableHighlight: function(z) {
                        var u = this._highlighted;
                        u && (u.hide(),
                        z.graphics.remove(u),
                        delete this._highlighted);
                        this._untrackMapLevelChange();
                        this.markerSymbol = this.lineSymbol = this.fillSymbol = null
                    },
                    showHighlight: function() {
                        var z = this.features && this.features[this.selectedIndex];
                        this._highlighted && z && z.geometry && this._highlighted.show()
                    },
                    hideHighlight: function() {
                        this._highlighted && this._highlighted.hide()
                    },
                    updateHighlight: function(z, u) {
                        var p = u.geometry
                          , r = this._highlighted;
                        if (p && r) {
                            r.hide();
                            !r._graphicsLayer && z && z.graphics.add(r);
                            r.setGeometry(d.fromJson(p.toJson()));
                            switch (p.type) {
                            case "point":
                            case "multipoint":
                                var B = u.getLayer()
                                  , D = u.symbol || B && B._getSymbol(u);
                                if (B && D) {
                                    var G;
                                    p = D.xoffset || 0;
                                    var A = D.yoffset || 0
                                      , E = D.angle || 0;
                                    switch (D.type) {
                                    case "simplemarkersymbol":
                                        var H = G = D.size || 0;
                                        break;
                                    case "picturemarkersymbol":
                                        H = D.width || 0;
                                        G = D.height || 0;
                                        break;
                                    case "textsymbol":
                                        H = G = D.font && D.font.size || 0
                                    }
                                    var J = u.symbol ? null : B._getRenderer(u);
                                    (B = this._getSizeInfo(J)) ? z = u = J.getSize(u, {
                                        sizeInfo: B,
                                        shape: D.style,
                                        resolution: z && z.getResolutionInMeters && z.getResolutionInMeters()
                                    }) : null != u.size ? z = u = u.size : (z = H,
                                    u = G);
                                    J = this.markerSymbol;
                                    z && u && (p && (p = p / H * z),
                                    A && (A = A / G * u),
                                    J._setDim(z + 4, u + 4, 0));
                                    J.setOffset(p, A);
                                    J.setAngle(E)
                                }
                                break;
                            case "polyline":
                                J = this.lineSymbol;
                                break;
                            case "polygon":
                                J = this.fillSymbol
                            }
                            r.setSymbol(J)
                        } else
                            r && r.hide()
                    },
                    showClosestFirst: function(z) {
                        var u = this.features;
                        if (u && u.length) {
                            if (1 < u.length) {
                                var p, r = Infinity, B = -1, D, G = a.getLength, A = z.spatialReference;
                                z = z.normalize();
                                for (p = u.length - 1; 0 <= p; p--)
                                    if (D = u[p].geometry) {
                                        var E = D.spatialReference;
                                        var H = 0;
                                        try {
                                            var J = "point" === D.type ? D : D.getExtent().getCenter();
                                            J = J.normalize();
                                            A && E && !A.equals(E) && A._canProject(E) && (J = A.isWebMercator() ? c.geographicToWebMercator(J) : c.webMercatorToGeographic(J));
                                            H = G(z, J)
                                        } catch (O) {}
                                        0 < H && H < r && (r = H,
                                        B = p)
                                    }
                                0 < B && (u.splice(0, 0, u.splice(B, 1)[0]),
                                this.select(0))
                            }
                        } else
                            this.deferreds && (this._marked = z)
                    },
                    _trackMapLevelChange: function(z) {
                        this._untrackMapLevelChange();
                        this._mapLevelChangeHandle = z.on("extent-change", y.hitch(this, function(u) {
                            u.levelChange && this._checkFeatureResolution()
                        }))
                    },
                    _untrackMapLevelChange: function() {
                        this._mapLevelChangeHandle && (this._mapLevelChangeHandle.remove(),
                        this._mapLevelChangeHandle = null)
                    },
                    _unbind: function(z) {
                        z = b.indexOf(this.deferreds, z);
                        if (-1 !== z)
                            return this.deferreds.splice(z, 1),
                            this.deferreds.length ? 1 : (this.deferreds = null,
                            2)
                    },
                    _fireComplete: function(z) {
                        var u = this._marked;
                        u && (this._marked = null,
                        this.showClosestFirst(u));
                        this.onDfdComplete(z)
                    },
                    _updateFeatures: function(z, u) {
                        if (z) {
                            if (this.deferreds && (z = this._unbind(z)))
                                if (u && u instanceof Error) {
                                    if (this._fireComplete(u),
                                    2 === z)
                                        this.onSetFeatures()
                                } else if (u && u.length)
                                    if (this.features) {
                                        if (u = b.filter(u, function(p) {
                                            return -1 === b.indexOf(this.features, p)
                                        }, this),
                                        this.features = this.features.concat(u),
                                        this.count = this.features.length,
                                        this._fireComplete(),
                                        2 === z)
                                            this.onSetFeatures()
                                    } else {
                                        this.features = u;
                                        this.count = u.length;
                                        this.selectedIndex = 0;
                                        this._fireComplete();
                                        if (2 === z)
                                            this.onSetFeatures();
                                        this.select(0)
                                    }
                                else if (this._fireComplete(),
                                2 === z)
                                    this.onSetFeatures()
                        } else
                            this.features = u,
                            this.count = u.length,
                            this.selectedIndex = 0,
                            this.onSetFeatures(),
                            this.select(0)
                    },
                    _getSizeInfo: function(z) {
                        return z ? z.sizeInfo || b.filter(z.visualVariables, v)[0] : null
                    },
                    _resetUpdateEndListeners: function() {
                        this._featureLayers = {};
                        b.forEach(this._updateEndHandles, function(z) {
                            z.remove()
                        });
                        this._updateEndHandles = []
                    },
                    _processFeatures: function() {
                        b.forEach(this.features, function(z) {
                            (z = z.getLayer()) && !this._featureLayers[z.id] && (1 === z.currentMode || 0 === z.currentMode && 6 === z.mode) && z.objectIdField && z.hasXYFootprint && z.queryFeatures && (this._featureLayers[z.id] = z,
                            z = z.on("update-end", y.hitch(this, this._fLyrUpdateEndHandler)),
                            this._updateEndHandles.push(z))
                        }, this)
                    },
                    _fLyrUpdateEndHandler: function(z) {
                        if (!z.error) {
                            var u = this
                              , p = z.target
                              , r = p.getSelectedFeatures()
                              , B = 0 === p.currentMode && 6 === p.mode
                              , D = {}
                              , G = [];
                            b.forEach(this.features, function(A) {
                                if (A.getLayer() === p) {
                                    var E = A.attributes[p.objectIdField];
                                    D[E] = A;
                                    G.push(E)
                                }
                            });
                            G.length && (z = new q,
                            z.objectIds = G,
                            p.queryFeatures(z, function(A) {
                                b.forEach(A.features, function(E) {
                                    var H = D[E.attributes[p.objectIdField]]
                                      , J = !1;
                                    H.geometry !== E.geometry || p.hasWebGLSurface() ? (H.setGeometry(E.geometry),
                                    J = !0) : B && r && -1 !== b.indexOf(r, E) && (J = !0);
                                    J && this._highlighted && H === this.getSelectedFeature() && this._highlighted.setGeometry(E.geometry)
                                }, u)
                            }))
                        }
                    },
                    _checkFeatureResolution: function() {
                        var z = this.getSelectedFeature()
                          , u = this.map;
                        if (z && u) {
                            var p = z.getLayer();
                            if (p) {
                                var r = z.getResolution();
                                2 === p.currentMode && z.geometry && r && r > u.getResolution() && (u = u.getResolutionForPopup(),
                                (p = this._refetchFeature(z, u, p)) && p.then(y.hitch(this, this._updateFeatureResolution, z, u)))
                            }
                        }
                    },
                    _refetchFeature: function(z, u, p) {
                        if (z = this._createQueryForCustomResolution(z, u, p))
                            return p.queryFeatures(z).then(function(r) {
                                return r && r.features[0]
                            })
                    },
                    _createQueryForCustomResolution: function(z, u, p) {
                        p = p.objectIdField;
                        var r = z.attributes;
                        r = r && p && r[p];
                        if (null == r)
                            return null;
                        var B = new q;
                        B.objectIds = [r];
                        B.maxAllowableOffset = u;
                        B.outFields = [p];
                        B.outSpatialReference = z.geometry.spatialReference;
                        return B
                    },
                    _updateFeatureResolution: function(z, u, p) {
                        z.getResolution() !== u && (z.setResolution(u),
                        z.setGeometry(p.geometry),
                        this._highlighted && z === this.getSelectedFeature() && this._highlighted.setGeometry(z.geometry))
                    }
                });
                l("extend-esri") && (k.PopupBase = C);
                return C
            })
        },
        "esri/graphic": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "), function(C, y, b, w, m, l, k, h, f) {
                function d() {}
                C = C(null, {
                    declaredClass: "esri.Graphic",
                    constructor: function(a, c, e, n) {
                        this._construct();
                        a && !a.declaredClass ? (this.geometry = a.geometry ? h.fromJson(a.geometry) : null,
                        this.symbol = a.symbol ? f.fromJson(a.symbol) : null,
                        this.attributes = a.attributes || null,
                        this.infoTemplate = a.infoTemplate ? new k(a.infoTemplate) : null) : (this.geometry = a,
                        this.symbol = c,
                        this.attributes = e,
                        this.infoTemplate = n)
                    },
                    _geomVersion: 0,
                    _resolution: null,
                    _shape: null,
                    _bgShape: null,
                    _dataAttrs: null,
                    _layer: null,
                    _sourceLayer: null,
                    _graphicsLayer: null,
                    _parentGraphic: null,
                    _suspended: !1,
                    size: null,
                    visible: !0,
                    _aggregationSourceLayer: null,
                    _aggregationInfo: null,
                    _computedAttributes: null,
                    _computedVersion: null,
                    _computedGeomVersion: null,
                    _isSnapTarget: !0,
                    getParentGraphic: function() {
                        return this._parentGraphic
                    },
                    setParentGraphic: function(a) {
                        this._parentGraphic = a
                    },
                    setSize: function(a) {
                        this.size = a;
                        return this
                    },
                    getAggregationSourceLayer: function() {
                        return this._aggregationSourceLayer
                    },
                    setAggregationSourceLayer: function(a) {
                        this._aggregationSourceLayer = a;
                        return this
                    },
                    isAggregate: function() {
                        return !!this._aggregationInfo
                    },
                    getAggregationInfo: function() {
                        return this._aggregationInfo
                    },
                    setAggregationInfo: function(a) {
                        this._aggregationInfo = a;
                        return this
                    },
                    getChildGraphics: function() {
                        var a = this.getAggregationSourceLayer();
                        return a ? a.getChildGraphics(this) : []
                    },
                    getDojoShape: function() {
                        return this._shape
                    },
                    getShapes: function() {
                        var a = [];
                        this._shape && a.push(this._shape);
                        this._bgShape && a.push(this._bgShape);
                        return a
                    },
                    getNode: function() {
                        var a = this._shape && this._shape.getNode();
                        return a && a.nodeType ? a : null
                    },
                    getNodes: function() {
                        var a = this.getShapes(), c, e, n = a.length, t = [];
                        for (e = 0; e < n; e++)
                            (c = a[e] && a[e].getNode()) && c.nodeType && t.push(c);
                        return t
                    },
                    getLayer: function() {
                        return this._layer
                    },
                    getSourceLayer: function() {
                        return this._sourceLayer || this._layer
                    },
                    clone: function() {
                        var a = new this.constructor(this.toJson());
                        a.visible = this.visible;
                        a._layer = this._layer;
                        a._sourceLayer = this._sourceLayer;
                        a._aggregationSourceLayer = this._aggregationSourceLayer;
                        a._aggregationInfo = this._aggregationInfo;
                        a._resolution = this._resolution;
                        return a
                    },
                    draw: function() {
                        var a = this._graphicsLayer;
                        a && a._draw(this, !0);
                        return this
                    },
                    setGeometry: function(a) {
                        this.geometry = a;
                        this._geomVersion++;
                        var c = this._graphicsLayer;
                        c && (c._updateExtent(this),
                        this.draw(),
                        a && "polyline" === a.type && c._updateSVGMarkers());
                        return this
                    },
                    setResolution: function(a) {
                        this._resolution = a;
                        return this
                    },
                    getResolution: function() {
                        return this._resolution
                    },
                    setSymbol: function(a, c) {
                        var e = this._graphicsLayer
                          , n = this._shape;
                        this.symbol = a;
                        e && (c && n && e._removeShape(this),
                        this.draw());
                        return this
                    },
                    setAttributes: function(a) {
                        this.attributes = a;
                        this.clearCache();
                        return this
                    },
                    setInfoTemplate: function(a) {
                        this.infoTemplate = a;
                        return this
                    },
                    getInfoTemplate: function() {
                        return this._getEffInfoTemplate()
                    },
                    _getEffInfoTemplate: function() {
                        var a = this.getLayer();
                        return this.infoTemplate || a && a.infoTemplate
                    },
                    getTitle: function() {
                        var a = this.getInfoTemplate()
                          , c = a && a.title;
                        if (y.isFunction(c))
                            c = c.call(a, this);
                        else if (y.isString(c)) {
                            var e = (a = this.getLayer()) && a._getDateOpts;
                            c = l.substitute(this.attributes, c, {
                                first: !0,
                                dateFormat: e && e.call(a)
                            })
                        }
                        return c
                    },
                    getContent: function() {
                        var a = this.getInfoTemplate()
                          , c = a && a.content;
                        if (y.isFunction(c))
                            c = c.call(a, this);
                        else if (y.isString(c)) {
                            var e = (a = this.getLayer()) && a._getDateOpts;
                            c = l.substitute(this.attributes, c, {
                                dateFormat: e && e.call(a)
                            })
                        }
                        return c
                    },
                    attr: function(a, c) {
                        null == c || this._dataAttrs || (this._dataAttrs = {});
                        this._dataAttrs && (this._dataAttrs[a] = c,
                        this._setDataAttr(a, c));
                        return this
                    },
                    _isSuspended: function() {
                        return this._suspended
                    },
                    _suspend: function() {
                        this._suspended = !0;
                        this.draw()
                    },
                    _resume: function() {
                        this._suspended = !1;
                        this.draw()
                    },
                    show: function() {
                        this.visible = !0;
                        this.attr("data-hidden");
                        var a;
                        if (this.getShapes().length) {
                            var c = this.getNodes();
                            var e = c.length;
                            for (a = 0; a < e; a++)
                                m.show(c[a])
                        } else
                            this.draw();
                        (c = this._graphicsLayer) && c._graphicVisibilityChanged(this);
                        return this
                    },
                    hide: function() {
                        this.visible = !1;
                        this.attr("data-hidden", "");
                        var a = this._graphicsLayer, c, e;
                        if (a) {
                            if ("canvas-2d" === a.surfaceType)
                                a._removeShape(this);
                            else {
                                var n = this.getNodes();
                                if (e = n.length)
                                    for (c = 0; c < e; c++)
                                        m.hide(n[c])
                            }
                            a._graphicVisibilityChanged(this)
                        }
                        return this
                    },
                    toJson: function() {
                        var a = {};
                        this.geometry && (a.geometry = this.geometry.toJson());
                        this.attributes && (a.attributes = y.mixin({}, this.attributes));
                        this.symbol && (a.symbol = this.symbol.toJson());
                        this.infoTemplate && (a.infoTemplate = this.infoTemplate.toJson());
                        return a
                    },
                    _setDataAttr: function(a, c) {
                        var e = this.getNodes(), n, t = e.length;
                        for (n = 0; n < t; n++)
                            this._setDOMDataAttr(e[n], a, c)
                    },
                    _setDOMDataAttr: function(a, c, e) {
                        null == e ? a.removeAttribute(c) : a.setAttribute(c, e)
                    },
                    _applyDataAttrs: function() {
                        var a = this._dataAttrs;
                        if (a) {
                            var c = this.getNodes(), e, n = c.length;
                            for (e = 0; e < n; e++)
                                for (var t in a)
                                    this._setDOMDataAttr(c[e], t, a[t])
                        }
                    },
                    _getViewInfo: function(a) {
                        return (a = (a = a || this.getLayer()) && a.getMap()) && a.getViewInfo()
                    },
                    evaluateExpression: function(a, c) {
                        return this._getDataValue(a._attributeDef, a._attributeCache, null, null, a, c)
                    },
                    _getDataValue: function(a, c, e, n, t, g) {
                        var q = c.id
                          , x = this.attributes
                          , v = a.field
                          , z = c.isNumeric
                          , u = null;
                        if (q) {
                            var p = this._computedAttributes
                              , r = this._computedVersion
                              , B = this._computedGeomVersion;
                            n = this._getViewInfo(n);
                            var D = !(!t || !t.async)
                              , G = g && g.skipCache || D
                              , A = !g || !1 !== g.strictReturnType
                              , E = c.dependsOnView || c.isJSFunc
                              , H = c.dependsOnGeometry;
                            p || (p = this._computedAttributes = {});
                            E && !r && (r = this._computedVersion = {});
                            H && !B && (B = this._computedGeomVersion = {});
                            var J = E && r[q] !== n.version || H && B[q] !== this._geomVersion;
                            u = p[q];
                            if (void 0 === u || J || G)
                                u = null,
                                c.hasExpr ? u = t ? t.evaluate(g && g.context) : e.executeFunction(c.compiledFunc, e.createExecContext(this, n)) : c.isJSFunc ? u = v(this, a) : x && (u = x[v],
                                z && this._isValidNumber(u) && (c = a.normalizationType || "field",
                                e = u,
                                u = null,
                                t = a.normalizationTotal,
                                a = x[a.normalizationField],
                                "log" === c && 0 !== e ? u = Math.log(e) * Math.LOG10E : "percent-of-total" === c && this._isValidNumber(t) && 0 !== t ? u = e / t * 100 : "field" === c && this._isValidNumber(a) && 0 !== a && (u = e / a))),
                                A && (D ? z && (this._construct(),
                                u = u.then(this._sanitizeNumericValue)) : u = this._sanitizeValue(u, z)),
                                G || (p[q] = u,
                                E && (r[q] = n.version),
                                H && (B[q] = this._geomVersion))
                        } else
                            x && (u = this._sanitizeValue(x[v], z));
                        return u
                    },
                    _sanitizeValue: function(a, c) {
                        c && !this._isValidNumber(a) && (a = null);
                        return a
                    },
                    _sanitizeNumericValue: function(a) {
                        return this._sanitizeValue(a, !0)
                    },
                    _construct: function() {
                        this._constructed || (this._sanitizeNumericValue = y.hitch(this, this._sanitizeNumericValue),
                        this._constructed = !0)
                    },
                    _isValidNumber: function(a) {
                        return "number" === typeof a && !isNaN(a) && Infinity !== a && -Infinity !== a
                    },
                    clearCache: function(a) {
                        if (null != a) {
                            var c = this._computedAttributes
                              , e = this._computedVersion
                              , n = this._computedGeomVersion;
                            c && (c[a] = void 0);
                            e && (e[a] = void 0);
                            n && (n[a] = void 0)
                        } else
                            this._computedAttributes = this._computedVersion = this._computedGeomVersion = null
                    }
                });
                C.prototype.getShape = C.prototype.getDojoShape;
                d.prototype = C.prototype;
                C.simpleConstructor = d;
                b("extend-esri") && (w.Graphic = C);
                return C
            })
        },
        "esri/InfoTemplate": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "./kernel", "./lang"], function(C, y, b, w, m) {
                C = C(null, {
                    declaredClass: "esri.InfoTemplate",
                    constructor: function(l, k) {
                        l && y.isObject(l) && !y.isFunction(l) ? y.mixin(this, l) : (this.title = l || "${*}",
                        this.content = k || "${*}")
                    },
                    setTitle: function(l) {
                        this.title = l;
                        return this
                    },
                    setContent: function(l) {
                        this.content = l;
                        return this
                    },
                    toJson: function() {
                        return m.fixJson({
                            title: this.title,
                            content: this.content
                        })
                    }
                });
                b("extend-esri") && (w.InfoTemplate = C);
                return C
            })
        },
        "esri/symbols/jsonUtils": function() {
            define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "), function(C, y, b, w, m, l, k, h, f, d, a) {
                var c = {
                    createDefaultSymbol: function(e) {
                        switch (e) {
                        case "esriGeometryPoint":
                        case "esriGeometryMultipoint":
                            var n = c.createDefaultMarkerSymbol();
                            break;
                        case "esriGeometryPolyline":
                            n = c.createDefaultLineSymbol();
                            break;
                        case "esriGeometryPolygon":
                        case "esriGeometryEnvelope":
                        case "esriGeometryMultiPatch":
                            n = c.createDefaultFillSymbol()
                        }
                        return n
                    },
                    createDefaultMarkerSymbol: function() {
                        return new m
                    },
                    createDefaultLineSymbol: function() {
                        return new k
                    },
                    createDefaultFillSymbol: function() {
                        return new f
                    },
                    getFirstSupportedSymbol: function(e) {
                        var n;
                        y.some(e, function(t) {
                            t && -1 < c.supportedSymbolTypes.indexOf(t.type) && (n = t);
                            return !!n
                        });
                        return n
                    },
                    isPointSymbol: function(e) {
                        return e ? -1 < c.supportedPointSymbolTypes.indexOf(e.type) : !1
                    },
                    supportedPointSymbolTypes: ["esriSMS", "esriPMS", "esriTS"],
                    supportedSymbolTypes: "esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),
                    fromJson: function(e, n) {
                        var t = null;
                        switch (e.type) {
                        case "esriSMS":
                            t = new m(e);
                            break;
                        case "esriPMS":
                            t = new l(e);
                            break;
                        case "esriTS":
                            t = new a(e);
                            break;
                        case "esriSLS":
                            t = void 0 !== e.cap ? new h(e) : new k(e);
                            break;
                        case "esriCLS":
                            t = new h(e);
                            break;
                        case "esriSFS":
                            t = new f(e);
                            break;
                        case "esriPFS":
                            t = new d(e);
                            break;
                        default:
                            t = (e = n && n.geometryType) ? c.createDefaultSymbol(e) : null
                        }
                        return t
                    },
                    getShapeDescriptors: function(e) {
                        return e && e.getShapeDescriptors ? e.getShapeDescriptors() : {
                            defaultShape: null,
                            fill: null,
                            stroke: null
                        }
                    }
                };
                b("extend-esri") && C.mixin(C.getObject("symbol", !0, w), c);
                return c
            })
        },
        "esri/symbols/PictureMarkerSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = {
                    url: "",
                    width: 12,
                    height: 12,
                    angle: 0,
                    xoffset: 0,
                    yoffset: 0
                };
                C = C(h, {
                    declaredClass: "esri.symbol.PictureMarkerSymbol",
                    type: "picturemarkersymbol",
                    constructor: function(d, a, c) {
                        d ? y.isString(d) ? (this.url = d,
                        a && (this.width = a),
                        c && (this.height = c)) : (this.width = w.pt2px(null == d.width ? f.width : d.width),
                        this.height = w.pt2px(null == d.height ? f.height : d.height),
                        a = d.imageData,
                        9 > b("ie") || !a || (c = this.url,
                        this.url = "data:" + (d.contentType || "image") + ";base64," + a,
                        this.imageData = c)) : (y.mixin(this, f),
                        this.width = w.pt2px(this.width),
                        this.height = w.pt2px(this.height))
                    },
                    getStroke: function() {
                        return null
                    },
                    getFill: function() {
                        return null
                    },
                    setWidth: function(d) {
                        this.width = d;
                        return this
                    },
                    setHeight: function(d) {
                        this.height = d;
                        return this
                    },
                    setUrl: function(d) {
                        d !== this.url && (delete this.imageData,
                        delete this.contentType);
                        this.url = d;
                        return this
                    },
                    getShapeDescriptors: function() {
                        return {
                            defaultShape: {
                                type: "image",
                                x: -Math.round(this.width / 2),
                                y: -Math.round(this.height / 2),
                                width: this.width,
                                height: this.height,
                                src: this.url || ""
                            },
                            fill: null,
                            stroke: null
                        }
                    },
                    toJson: function() {
                        var d = this.url
                          , a = this.imageData;
                        if (0 === d.indexOf("data:")) {
                            var c = d;
                            d = a;
                            a = c.indexOf(";base64,") + 8;
                            a = c.substr(a)
                        }
                        !y.isString(d) || 0 !== d.indexOf("/") && 0 !== d.indexOf("//") && 0 !== d.indexOf("./") && 0 !== d.indexOf("../") || (d = k.getAbsoluteUrl(d));
                        c = w.px2pt(this.width);
                        c = isNaN(c) ? void 0 : c;
                        var e = w.px2pt(this.height);
                        e = isNaN(e) ? void 0 : e;
                        d = l.fixJson(y.mixin(this.inherited("toJson", arguments), {
                            type: "esriPMS",
                            url: d,
                            imageData: a,
                            contentType: this.contentType,
                            width: c,
                            height: e
                        }));
                        delete d.color;
                        delete d.size;
                        d.imageData || delete d.imageData;
                        return d
                    }
                });
                C.defaultProps = f;
                b("extend-esri") && (y.setObject("symbol.PictureMarkerSymbol", C, m),
                m.symbol.defaultPictureMarkerSymbol = f);
                return C
            })
        },
        "esri/symbols/CartographicLineSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = {
                    STYLE_SOLID: "solid",
                    STYLE_DASH: "dash",
                    STYLE_DOT: "dot",
                    STYLE_DASHDOT: "dashdot",
                    STYLE_DASHDOTDOT: "longdashdotdot",
                    STYLE_NULL: "none",
                    STYLE_INSIDE_FRAME: "insideframe",
                    STYLE_SHORTDASH: "shortdash",
                    STYLE_SHORTDOT: "shortdot",
                    STYLE_SHORTDASHDOT: "shortdashdot",
                    STYLE_SHORTDASHDOTDOT: "shortdashdotdot",
                    STYLE_LONGDASH: "longdash",
                    STYLE_LONGDASHDOT: "longdashdot",
                    CAP_BUTT: "butt",
                    CAP_ROUND: "round",
                    CAP_SQUARE: "square",
                    JOIN_MITER: "miter",
                    JOIN_ROUND: "round",
                    JOIN_BEVEL: "bevel"
                }
                  , d = {
                    color: [0, 0, 0, 1],
                    style: f.STYLE_SOLID,
                    width: 1,
                    cap: f.CAP_BUTT,
                    join: f.JOIN_MITER,
                    miterLimit: 10
                };
                C = C(h, {
                    declaredClass: "esri.symbol.CartographicLineSymbol",
                    type: "cartographiclinesymbol",
                    _caps: {
                        butt: "esriLCSButt",
                        round: "esriLCSRound",
                        square: "esriLCSSquare"
                    },
                    _joins: {
                        miter: "esriLJSMiter",
                        round: "esriLJSRound",
                        bevel: "esriLJSBevel"
                    },
                    constructor: function(a, c, e, n, t, g) {
                        a ? y.isString(a) ? (this.style = a,
                        c && (this.color = c),
                        void 0 !== e && (this.width = e),
                        n && (this.cap = n),
                        t && (this.join = t),
                        void 0 !== g && (this.miterLimit = g)) : (this.cap = k.valueOf(this._caps, a.cap),
                        this.join = k.valueOf(this._joins, a.join),
                        this.width = m.pt2px(a.width),
                        this.miterLimit = m.pt2px(a.miterLimit)) : (y.mixin(this, d),
                        this.color = new b(this.color),
                        this.width = m.pt2px(this.width),
                        this.miterLimit = m.pt2px(this.miterLimit))
                    },
                    setCap: function(a) {
                        this.cap = a;
                        return this
                    },
                    setJoin: function(a) {
                        this.join = a;
                        return this
                    },
                    setMiterLimit: function(a) {
                        this.miterLimit = a;
                        return this
                    },
                    getStroke: function() {
                        return y.mixin(this.inherited("getStroke", arguments), {
                            cap: this.cap,
                            join: this.join === f.JOIN_MITER ? this.miterLimit : this.join
                        })
                    },
                    getFill: function() {
                        return null
                    },
                    getShapeDescriptors: function() {
                        return {
                            defaultShape: {
                                type: "path",
                                path: "M -15,0 L 15,0 E"
                            },
                            fill: null,
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function() {
                        var a = m.px2pt(this.miterLimit);
                        a = isNaN(a) ? void 0 : a;
                        return k.fixJson(y.mixin(this.inherited("toJson", arguments), {
                            type: "esriCLS",
                            cap: this._caps[this.cap],
                            join: this._joins[this.join],
                            miterLimit: a
                        }))
                    }
                });
                y.mixin(C, f);
                C.defaultProps = d;
                w("extend-esri") && (y.setObject("symbol.CartographicLineSymbol", C, l),
                l.symbol.defaultCartographicLineSymbol = d);
                return C
            })
        },
        "esri/symbols/SimpleFillSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                var a = {
                    STYLE_SOLID: "solid",
                    STYLE_NULL: "none",
                    STYLE_HORIZONTAL: "horizontal",
                    STYLE_VERTICAL: "vertical",
                    STYLE_FORWARD_DIAGONAL: "forwarddiagonal",
                    STYLE_BACKWARD_DIAGONAL: "backwarddiagonal",
                    STYLE_CROSS: "cross",
                    STYLE_DIAGONAL_CROSS: "diagonalcross",
                    STYLE_FORWARDDIAGONAL: "forwarddiagonal",
                    STYLE_BACKWARDDIAGONAL: "backwarddiagonal",
                    STYLE_DIAGONALCROSS: "diagonalcross"
                }
                  , c = {
                    style: a.STYLE_SOLID,
                    color: [0, 0, 0, .25]
                };
                C = C(h, {
                    declaredClass: "esri.symbol.SimpleFillSymbol",
                    type: "simplefillsymbol",
                    _styles: {
                        solid: "esriSFSSolid",
                        none: "esriSFSNull",
                        horizontal: "esriSFSHorizontal",
                        vertical: "esriSFSVertical",
                        forwarddiagonal: "esriSFSForwardDiagonal",
                        backwarddiagonal: "esriSFSBackwardDiagonal",
                        cross: "esriSFSCross",
                        diagonalcross: "esriSFSDiagonalCross"
                    },
                    constructor: function(e, n, t) {
                        e ? y.isString(e) ? (this.style = e,
                        void 0 !== n && (this.outline = n),
                        void 0 !== t && (this.color = t)) : this.style = k.valueOf(this._styles, e.style) : (y.mixin(this, c),
                        this.outline = new f(this.outline),
                        this.color = new b(this.color))
                    },
                    setStyle: function(e) {
                        this.style = e;
                        return this
                    },
                    getStroke: function() {
                        return this.outline && this.outline.getStroke()
                    },
                    getFill: function() {
                        var e = this.style;
                        return e === a.STYLE_NULL ? null : e === a.STYLE_SOLID ? this.color : y.mixin({}, m.defaultPattern, {
                            src: d.toUrl("../images/symbol/sfs/" + e + ".png"),
                            width: 10,
                            height: 10
                        })
                    },
                    getShapeDescriptors: function() {
                        return {
                            defaultShape: {
                                type: "path",
                                path: "M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"
                            },
                            fill: this.getFill(),
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function() {
                        return k.fixJson(y.mixin(this.inherited("toJson", arguments), {
                            type: "esriSFS",
                            style: this._styles[this.style]
                        }))
                    }
                });
                y.mixin(C, a);
                C.defaultProps = c;
                w("extend-esri") && (y.setObject("symbol.SimpleFillSymbol", C, l),
                l.symbol.defaultSimpleFillSymbol = c);
                return C
            })
        },
        "esri/symbols/FillSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "), function(C, y, b, w, m, l) {
                C = C(m, {
                    declaredClass: "esri.symbol.FillSymbol",
                    constructor: function(k) {
                        k && y.isObject(k) && k.outline && (this.outline = new l(k.outline))
                    },
                    setOutline: function(k) {
                        this.outline = k;
                        return this
                    },
                    toJson: function() {
                        var k = this.inherited("toJson", arguments);
                        this.outline && (k.outline = this.outline.toJson());
                        return k
                    }
                });
                b("extend-esri") && y.setObject("symbol.FillSymbol", C, w);
                return C
            })
        },
        "esri/symbols/PictureFillSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = {
                    xoffset: 0,
                    yoffset: 0,
                    width: 12,
                    height: 12
                };
                C = C(h, {
                    declaredClass: "esri.symbol.PictureFillSymbol",
                    type: "picturefillsymbol",
                    xscale: 1,
                    yscale: 1,
                    xoffset: 0,
                    yoffset: 0,
                    constructor: function(d, a, c, e) {
                        d ? y.isString(d) ? (this.url = d,
                        void 0 !== a && (this.outline = a),
                        void 0 !== c && (this.width = c),
                        void 0 !== e && (this.height = e)) : (this.xoffset = w.pt2px(d.xoffset),
                        this.yoffset = w.pt2px(d.yoffset),
                        this.width = w.pt2px(d.width),
                        this.height = w.pt2px(d.height),
                        a = d.imageData,
                        9 > b("ie") || !a || (c = this.url,
                        this.url = "data:" + (d.contentType || "image") + ";base64," + a,
                        this.imageData = c)) : (y.mixin(this, f),
                        this.width = w.pt2px(this.width),
                        this.height = w.pt2px(this.height))
                    },
                    setWidth: function(d) {
                        this.width = d;
                        return this
                    },
                    setHeight: function(d) {
                        this.height = d;
                        return this
                    },
                    setOffset: function(d, a) {
                        this.xoffset = d;
                        this.yoffset = a;
                        return this
                    },
                    setUrl: function(d) {
                        d !== this.url && (delete this.imageData,
                        delete this.contentType);
                        this.url = d;
                        return this
                    },
                    setXScale: function(d) {
                        this.xscale = d;
                        return this
                    },
                    setYScale: function(d) {
                        this.yscale = d;
                        return this
                    },
                    getStroke: function() {
                        return this.outline && this.outline.getStroke()
                    },
                    getFill: function() {
                        return y.mixin({}, w.defaultPattern, {
                            src: this.url,
                            width: this.width * this.xscale,
                            height: this.height * this.yscale,
                            x: this.xoffset,
                            y: this.yoffset
                        })
                    },
                    getShapeDescriptors: function() {
                        return {
                            defaultShape: {
                                type: "path",
                                path: "M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"
                            },
                            fill: this.getFill(),
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function() {
                        var d = this.url
                          , a = this.imageData;
                        if (0 === d.indexOf("data:")) {
                            var c = d;
                            d = a;
                            a = c.indexOf(";base64,") + 8;
                            a = c.substr(a)
                        }
                        !y.isString(d) || 0 !== d.indexOf("/") && 0 !== d.indexOf("//") && 0 !== d.indexOf("./") && 0 !== d.indexOf("../") || (d = k.getAbsoluteUrl(d));
                        c = w.px2pt(this.width);
                        c = isNaN(c) ? void 0 : c;
                        var e = w.px2pt(this.height);
                        e = isNaN(e) ? void 0 : e;
                        var n = w.px2pt(this.xoffset);
                        n = isNaN(n) ? void 0 : n;
                        var t = w.px2pt(this.yoffset);
                        t = isNaN(t) ? void 0 : t;
                        d = l.fixJson(y.mixin(this.inherited("toJson", arguments), {
                            type: "esriPFS",
                            url: d,
                            imageData: a,
                            contentType: this.contentType,
                            width: c,
                            height: e,
                            xoffset: n,
                            yoffset: t,
                            xscale: this.xscale,
                            yscale: this.yscale
                        }));
                        d.imageData || delete d.imageData;
                        return d
                    }
                });
                C.defaultProps = f;
                b("extend-esri") && (y.setObject("symbol.PictureFillSymbol", C, m),
                m.symbol.defaultPictureFillSymbol = f);
                return C
            })
        },
        "esri/symbols/TextSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "), function(C, y, b, w, m, l, k, h, f) {
                var d = {
                    type: "textsymbol",
                    x: 0,
                    y: 0,
                    text: "",
                    rotated: !1,
                    kerning: !0,
                    color: [0, 0, 0, 1],
                    font: w.defaultFont,
                    angle: 0,
                    xoffset: 0,
                    yoffset: 0,
                    horizontalAlignment: "center"
                }
                  , a = {
                    start: "left",
                    middle: "center",
                    end: "right"
                }
                  , c = {
                    left: "start",
                    center: "middle",
                    right: "end",
                    justify: "start"
                }
                  , e = {
                    top: "text-before-edge",
                    middle: "central",
                    baseline: "alphabetic",
                    bottom: "text-after-edge"
                }
                  , n = document.createElement("canvas");
                C = C(h, {
                    declaredClass: "esri.symbol.TextSymbol",
                    angle: 0,
                    xoffset: 0,
                    yoffset: 0,
                    constructor: function(t, g, q) {
                        y.mixin(this, d);
                        this.font = new f(this.font);
                        this.color = new k(this.color);
                        t && (y.isObject(t) ? (y.mixin(this, t),
                        this.color && l.isDefined(this.color[0]) && (this.color = k.toDojoColor(this.color)),
                        this.type = "textsymbol",
                        this.font = new f(this.font),
                        this.xoffset = w.pt2px(this.xoffset),
                        this.yoffset = w.pt2px(this.yoffset),
                        this.angle && (this.angle *= -1),
                        this.haloSize && (this.haloSize = w.pt2px(this.haloSize)),
                        this.haloColor && (this.haloColor = k.toDojoColor(this.haloColor))) : (this.text = t,
                        g && (this.font = g),
                        q && (this.color = q)));
                        this.setAlign(this.align || this.getSVGAlign())
                    },
                    setFont: function(t) {
                        this.font = t;
                        return this
                    },
                    setSize: function(t) {
                        this.font.size = t;
                        return this
                    },
                    setAngle: function(t) {
                        this.angle = t;
                        return this
                    },
                    setOffset: function(t, g) {
                        this.xoffset = t;
                        this.yoffset = g;
                        return this
                    },
                    setHaloColor: function(t) {
                        this.haloColor = t;
                        return this
                    },
                    setHaloSize: function(t) {
                        this.haloSize = t;
                        return this
                    },
                    setAlign: function(t) {
                        this.align = t;
                        this.setHorizontalAlignment(t && a[t.toLowerCase()] || "center");
                        return this
                    },
                    setHorizontalAlignment: function(t) {
                        this.horizontalAlignment = t;
                        return this
                    },
                    getSVGAlign: function() {
                        var t = this.horizontalAlignment;
                        return t = t && c[t.toLowerCase()] || "middle"
                    },
                    setVerticalAlignment: function(t) {
                        this.verticalAlignment = t;
                        return this
                    },
                    getSVGBaseline: function() {
                        var t = this.verticalAlignment;
                        return t && e[t.toLowerCase()] || "alphabetic"
                    },
                    getSVGBaselineShift: function() {
                        return "bottom" === this.verticalAlignment ? "super" : null
                    },
                    setDecoration: function(t) {
                        this.decoration = t;
                        this.font || this.setFont(new f);
                        this.font.setDecoration(t);
                        return this
                    },
                    setRotated: function(t) {
                        this.rotated = t;
                        return this
                    },
                    setKerning: function(t) {
                        this.kerning = t;
                        return this
                    },
                    setText: function(t) {
                        this.text = t;
                        return this
                    },
                    getStroke: function() {
                        return null
                    },
                    getFill: function() {
                        return this.color
                    },
                    getWidth: function() {
                        var t = n && n.getContext && n.getContext("2d");
                        if (t) {
                            var g = this.font;
                            t.font = (g.style ? g.style : w.defaultFont.style) + " " + (g.weight ? g.weight : w.defaultFont.weight) + " " + (g.size ? g.size : w.defaultFont.size) + "px " + (g.family ? g.family : w.defaultFont.family);
                            return t.measureText(this.text).width
                        }
                        t = this.getHeight();
                        g = 0;
                        var q;
                        for (q = 0; q < this.text.length; q++) {
                            var x = this.text.charAt(q);
                            g = x == x.toUpperCase() ? g + .7 * t : g + .5 * t
                        }
                        return g
                    },
                    getHeight: function() {
                        return w.normalizedLength(this.font.size)
                    },
                    getShapeDescriptors: function() {
                        var t = this.font;
                        if (t) {
                            var g = {};
                            t.size && (g.size = t.size);
                            t.style && (g.style = t.style);
                            t.variant && (g.variant = t.variant);
                            t.decoration && (g.decoration = t.decoration);
                            t.weight && (g.weight = t.weight);
                            t.family && (g.family = t.family)
                        }
                        return {
                            defaultShape: {
                                type: "text",
                                text: this.text,
                                x: 0,
                                y: this.getHeight() / 4,
                                align: "middle",
                                decoration: this.decoration || t && t.decoration,
                                rotated: this.rotated,
                                kerning: this.kerning
                            },
                            font: g,
                            fill: this.getFill(),
                            stroke: this.getStroke()
                        }
                    },
                    toJson: function() {
                        var t = w.px2pt(this.xoffset)
                          , g = w.px2pt(this.yoffset)
                          , q = w.px2pt(this.haloSize);
                        t = isNaN(t) ? void 0 : t;
                        g = isNaN(g) ? void 0 : g;
                        q = isNaN(q) ? void 0 : q;
                        return l.fixJson(y.mixin(this.inherited("toJson", arguments), {
                            type: "esriTS",
                            backgroundColor: this.backgroundColor,
                            borderLineColor: this.borderLineColor,
                            borderLineSize: this.borderLineSize,
                            haloSize: q,
                            haloColor: this.haloColor && k.toJsonColor(this.haloColor),
                            verticalAlignment: this.verticalAlignment,
                            horizontalAlignment: this.horizontalAlignment,
                            rightToLeft: this.rightToLeft,
                            width: this.width,
                            angle: this.angle && -1 * this.angle,
                            xoffset: t,
                            yoffset: g,
                            text: this.text,
                            rotated: this.rotated,
                            kerning: this.kerning,
                            font: this.font.toJson()
                        }))
                    }
                });
                y.mixin(C, {
                    ALIGN_START: "start",
                    ALIGN_MIDDLE: "middle",
                    ALIGN_END: "end",
                    DECORATION_NONE: "none",
                    DECORATION_UNDERLINE: "underline",
                    DECORATION_OVERLINE: "overline",
                    DECORATION_LINETHROUGH: "line-through"
                });
                C.defaultProps = d;
                b("extend-esri") && (y.setObject("symbol.TextSymbol", C, m),
                m.symbol.defaultTextSymbol = d);
                return C
            })
        },
        "esri/symbols/Font": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "), function(C, y, b, w, m, l) {
                C = C(null, {
                    declaredClass: "esri.symbol.Font",
                    constructor: function(k, h, f, d, a) {
                        k ? y.isObject(k) ? y.mixin(this, k) : (this.size = k,
                        parseFloat(this.size) == this.size && (this.size += "px"),
                        void 0 !== h && (this.style = h),
                        void 0 !== f && (this.variant = f),
                        void 0 !== d && (this.weight = d),
                        void 0 !== a && (this.family = a)) : y.mixin(this, w.defaultFont);
                        parseFloat(this.size) == this.size && (this.size += "pt");
                        9 > b("ie") && this.size && y.isString(this.size) && -1 < this.size.indexOf("em") && (this.size = w.pt2px(12 * parseFloat(this.size)) + "px");
                        this.size = this._convert2PxSize(this.size)
                    },
                    setSize: function(k) {
                        this.size = this._convert2PxSize(k);
                        return this
                    },
                    _convert2PxSize: function(k) {
                        var h;
                        parseFloat(k) == k ? h = k : y.isString(k) && (-1 < k.indexOf("pt") ? h = w.pt2px(parseFloat(k)) : -1 < k.indexOf("px") ? h = parseFloat(k) : -1 < k.indexOf("em") ? h = w.pt2px(12 * parseFloat(k)) : -1 < k.indexOf("%") && (h = w.pt2px(.12 * parseFloat(k))));
                        return h
                    },
                    setStyle: function(k) {
                        this.style = k;
                        return this
                    },
                    setVariant: function(k) {
                        this.variant = k;
                        return this
                    },
                    setWeight: function(k) {
                        this.weight = k;
                        return this
                    },
                    setFamily: function(k) {
                        this.family = k;
                        return this
                    },
                    setDecoration: function(k) {
                        this.decoration = k;
                        return this
                    },
                    toJson: function() {
                        return l.fixJson({
                            size: w.px2pt(this.size),
                            style: this.style,
                            decoration: this.decoration,
                            weight: this.weight,
                            family: this.family
                        })
                    }
                });
                y.mixin(C, {
                    STYLE_NORMAL: "normal",
                    STYLE_ITALIC: "italic",
                    STYLE_OBLIQUE: "oblique",
                    VARIANT_NORMAL: "normal",
                    VARIANT_SMALLCAPS: "small-caps",
                    WEIGHT_NORMAL: "normal",
                    WEIGHT_BOLD: "bold",
                    WEIGHT_BOLDER: "bolder",
                    WEIGHT_LIGHTER: "lighter"
                });
                b("extend-esri") && y.setObject("symbol.Font", C, m);
                return C
            })
        },
        "esri/tasks/query": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship dojo/has!extend-esri?./QueryTask dojo/has!extend-esri?./RelationshipQuery dojo/has!extend-esri?./StatisticDefinition".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = C(null, {
                    declaredClass: "esri.tasks.Query",
                    constructor: function() {
                        this.spatialRelationship = f.SPATIAL_REL_INTERSECTS
                    },
                    text: null,
                    where: "",
                    geometry: null,
                    groupByFieldsForStatistics: null,
                    objectIds: null,
                    returnGeometry: !1,
                    returnCentroid: null,
                    returnDistinctValues: !1,
                    returnExceededLimitFeatures: null,
                    maxRecordCountFactor: null,
                    orderByFields: null,
                    outSpatialReference: null,
                    outFields: null,
                    outStatistics: null,
                    timeExtent: null,
                    relationParam: null,
                    pixelSize: null,
                    distance: null,
                    units: null,
                    resultOffset: null,
                    resultRecordCount: null,
                    resultType: null,
                    cacheHint: null,
                    sqlFormat: null,
                    quantizationParameters: null,
                    _units: {
                        meters: "esriSRUnit_Meter",
                        kilometers: "esriSRUnit_Kilometer",
                        feet: "esriSRUnit_Foot",
                        miles: "esriSRUnit_StatuteMile",
                        "nautical-miles": "esriSRUnit_NauticalMile",
                        "us-nautical-miles": "esriSRUnit_USNauticalMile"
                    },
                    toJson: function(d) {
                        var a = {
                            text: this.text,
                            where: this.where,
                            returnGeometry: this.returnGeometry,
                            spatialRel: this.spatialRelationship,
                            maxAllowableOffset: this.maxAllowableOffset,
                            geometryPrecision: this.geometryPrecision,
                            sqlFormat: this.sqlFormat
                        }
                          , c = d && d.geometry || this.geometry
                          , e = this.objectIds
                          , n = this.outFields
                          , t = this.outSpatialReference
                          , g = this.groupByFieldsForStatistics
                          , q = this.orderByFields
                          , x = this.outStatistics;
                        d = this.distance;
                        c && (a.geometry = c,
                        a.geometryType = k.getJsonType(c),
                        a.inSR = c.spatialReference.wkid || w.toJson(c.spatialReference.toJson()));
                        e && (a.objectIds = e.join(","));
                        n && (a.outFields = n.join(","));
                        null != this.returnCentroid && (a.returnCentroid = this.returnCentroid);
                        this.returnDistinctValues && (a.returnDistinctValues = !0);
                        null != this.returnExceededLimitFeatures && (a.returnExceededLimitFeatures = this.returnExceededLimitFeatures);
                        null != this.maxRecordCountFactor && (a.maxRecordCountFactor = this.maxRecordCountFactor);
                        g && (a.groupByFieldsForStatistics = g.join(","));
                        q && (a.orderByFields = q.join(","));
                        if (x) {
                            var v = [];
                            b.forEach(x, function(z) {
                                v.push(z.toJson())
                            });
                            a.outStatistics = w.toJson(v)
                        }
                        t ? a.outSR = t.wkid || w.toJson(t.toJson()) : c && (a.outSR = c.spatialReference.wkid || w.toJson(c.spatialReference.toJson()));
                        c = this.timeExtent;
                        a.time = c ? c.toJson().join(",") : null;
                        (c = this.relationParam) && this.spatialRelationship === f.SPATIAL_REL_RELATION && (a.relationParam = c);
                        d && (a.distance = this.distance,
                        this.hasOwnProperty("units") ? a.units = this._units[this.units] || this._units.meters : (console.warn("esri/tasks/query::no distance unit provided, defaulting to meters"),
                        a.units = this._units.meters));
                        this.hasOwnProperty("start") && (a.resultOffset = this.start,
                        a.resultRecordCount = 10,
                        "" === a.where && (a.where = "1\x3d1"));
                        this.hasOwnProperty("num") && (a.resultRecordCount = this.num);
                        a.resultType = this.resultType;
                        null != this.cacheHint && (a.cacheHint = this.cacheHint);
                        a.pixelSize = this.pixelSize ? w.toJson(this.pixelSize.toJson()) : null;
                        a.multipatchOption = this.multipatchOption;
                        this.quantizationParameters && (a.quantizationParameters = w.toJson(this.quantizationParameters));
                        a._ts = this._ts;
                        return a
                    }
                });
                y.mixin(f, h);
                m("extend-esri") && y.setObject("tasks.Query", f, l);
                return f
            })
        },
        "esri/tasks/SpatialRelationship": function() {
            define(["dojo/_base/lang", "dojo/has", "../kernel"], function(C, y, b) {
                var w = {
                    SPATIAL_REL_INTERSECTS: "esriSpatialRelIntersects",
                    SPATIAL_REL_CONTAINS: "esriSpatialRelContains",
                    SPATIAL_REL_CROSSES: "esriSpatialRelCrosses",
                    SPATIAL_REL_ENVELOPEINTERSECTS: "esriSpatialRelEnvelopeIntersects",
                    SPATIAL_REL_INDEXINTERSECTS: "esriSpatialRelIndexIntersects",
                    SPATIAL_REL_OVERLAPS: "esriSpatialRelOverlaps",
                    SPATIAL_REL_TOUCHES: "esriSpatialRelTouches",
                    SPATIAL_REL_WITHIN: "esriSpatialRelWithin",
                    SPATIAL_REL_RELATION: "esriSpatialRelRelation"
                };
                y("extend-esri") && C.setObject("tasks._SpatialRelationship", w, b);
                return w
            })
        },
        "esri/plugins/popupManager": function() {
            define(["../PopupManager"], function(C) {
                return {
                    add: function(y, b) {
                        y.popupManager || (y.popupManager = new C(b),
                        y.popupManager.setMap(y))
                    },
                    remove: function(y) {
                        var b = y.popupManager;
                        b && (b.unsetMap(),
                        y.popupManager = void 0)
                    }
                }
            })
        },
        "esri/PopupManager": function() {
            define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t) {
                var g;
                h = h(n, {
                    declaredClass: "esri.PopupManager",
                    enabled: !1,
                    map: null,
                    _mapClickHandle: null,
                    _featureLayersCache: {},
                    constructor: function(q) {
                        this._mapClickHandler = d.hitch(this, this._mapClickHandler)
                    },
                    setMap: function(q) {
                        if (this.map)
                            if (q !== this.map)
                                this.unsetMap();
                            else
                                return;
                        this.map = q;
                        this._setupClickHandler()
                    },
                    unsetMap: function() {
                        this.map && (this.map = null);
                        this._mapClickHandle && (this._mapClickHandle.remove(),
                        this._mapClickHandle = null)
                    },
                    getMapLayer: function(q) {
                        var x;
                        if (q && (x = q.getLayer()) && (q = x.id,
                        this._featureLayersCache[q])) {
                            var v = q.lastIndexOf("_");
                            -1 < v && (q = q.substring(0, v),
                            x = this.map.getLayer(q))
                        }
                        return x
                    },
                    _enabledSetter: function(q) {
                        this.enabled = q;
                        this._setupClickHandler()
                    },
                    _setupClickHandler: function() {
                        this._mapClickHandle && (this._mapClickHandle.remove(),
                        this._mapClickHandle = null);
                        this.enabled && this.map && (this._mapClickHandle = this.map.on("click", this._mapClickHandler))
                    },
                    _mapClickHandler: function(q) {
                        var x = this.map.infoWindow
                          , v = q.graphic;
                        x && this.map.loaded && (x.clearFeatures && x.setFeatures ? this._showPopup(q) : v && v.getInfoTemplate() && this._showInfoWindow(v, q.mapPoint))
                    },
                    _showPopup: function(q) {
                        var x = this.map
                          , v = x.infoWindow
                          , z = this
                          , u = []
                          , p = [x.graphics].concat(k.map(x.graphicsLayerIds, x.getLayer, x));
                        k.forEach(p, function(D) {
                            var G = D.getFeatureReduction && D.getFeatureReduction();
                            D && D.loaded && D.infoTemplate && !D.suspended && (!G || !z._isReductionEnabled(D) || G.infoTemplate && !G.disablePopup) && u.push(D)
                        });
                        var r = [];
                        k.forEach(x.layerIds, function(D) {
                            (D = x.getLayer(D)) && D.loaded && !D.suspended && (z._isImageServiceLayer(D) && D.infoTemplate ? u.push(D) : "esri.layers.WMSLayer" === D.declaredClass && D.getFeatureInfoURL ? u.push(D) : "esri.layers.ArcGISDynamicMapServiceLayer" !== D.declaredClass && "esri.layers.ArcGISTiledMapServiceLayer" !== D.declaredClass || !D.infoTemplates || r.push(D))
                        });
                        var B = x.getResolutionForPopup();
                        this._getSubLayerFeatureLayers(r, B).then(function(D) {
                            u = u.concat(D);
                            D = q.graphic && q.graphic.getParentGraphic() || q.graphic;
                            var G = null;
                            D && D.getInfoTemplate() && !z._isImageServiceLayer(D.getLayer()) && (G = D);
                            if (u.length || G) {
                                var A = z._calculateClickTolerance(u)
                                  , E = q.screenPoint;
                                D = x.toMap(new y(E.x - A,E.y + A));
                                A = x.toMap(new y(E.x + A,E.y - A));
                                var H = new C(D.x,D.y,A.x,A.y,x.spatialReference);
                                if (H = H.intersects(x.extent)) {
                                    var J = new m
                                      , O = !!G
                                      , V = !0;
                                    D = k.map(u, function(aa) {
                                        J.timeExtent = aa.useMapTime ? x.timeExtent : null;
                                        var da = z._isReductionEnabled(aa);
                                        aa = da ? aa.getFeatureReductionLayer() : aa;
                                        var ea = z._featureLayersCache[aa.id];
                                        if (z._isImageServiceLayer(aa)) {
                                            J.geometry = q.mapPoint;
                                            V = !1;
                                            var Y = {
                                                rasterAttributeTableFieldPrefix: "Raster.",
                                                returnDomainValues: !0
                                            };
                                            z._isTiledImageServiceLayer(aa) ? Y = aa.fetchPopupFromTiles(J) : (Y = aa.queryVisibleRasters(J, Y),
                                            Y.addCallback(function() {
                                                var qa = aa.getVisibleRasters();
                                                O = O || 0 < qa.length;
                                                return qa
                                            }))
                                        } else if ("esri.layers.WMSLayer" === aa.declaredClass) {
                                            Y = new f;
                                            var ia = aa._getPopupGraphic(x, q.screenPoint);
                                            ia ? (Y.resolve([ia]),
                                            O = !0) : Y.resolve([])
                                        } else
                                            ea || "function" === typeof aa.queryFeatures && (0 === aa.currentMode || 1 === aa.currentMode) ? (J.geometry = H,
                                            Y = aa.queryFeatures(J),
                                            Y.addCallback(function(qa) {
                                                var wa = [];
                                                k.forEach(qa.features, function(K) {
                                                    K.visible && (wa.push(K),
                                                    ea && K.setResolution(B))
                                                });
                                                O = O || 0 < wa.length;
                                                return wa
                                            })) : (Y = new f,
                                            ia = k.filter(aa.graphics, function(qa) {
                                                return qa && qa.visible && H.intersects(qa.geometry)
                                            }),
                                            da && z._isParentLayer(aa, G) && (da = z._findGraphicById(ia, G, "cluster_id")) && (G = da),
                                            O = O || 0 < ia.length,
                                            Y.resolve(ia));
                                        return Y
                                    });
                                    G && (A = new f,
                                    A.resolve([G]),
                                    D.unshift(A));
                                    k.some(D, function(aa) {
                                        return !aa.isFulfilled()
                                    }) || O ? (v.setFeatures(D),
                                    v.show(q.mapPoint, {
                                        closestFirst: V
                                    })) : (v.hide(),
                                    v.clearFeatures())
                                }
                            }
                        })
                    },
                    _getSubLayerFeatureLayers: function(q, x, v) {
                        x = x || null;
                        var z = v || new f
                          , u = [];
                        v = q.length;
                        var p = this.map.getScale()
                          , r = !1
                          , B = this
                          , D = 0;
                        a: for (; D < v; D++) {
                            var G = q[D]
                              , A = G.dynamicLayerInfos || G.layerInfos;
                            if (A) {
                                var E = null;
                                G._params && (G._params.layers || G._params.dynamicLayers) && (E = G.visibleLayers);
                                E = w._getVisibleLayers(A, E);
                                for (var H = w._getLayersForScale(p, A), J = A.length, O = 0; O < J; O++) {
                                    var V = A[O]
                                      , aa = V.id
                                      , da = G.infoTemplates[aa];
                                    if (!V.subLayerIds && da && da.infoTemplate && -1 < k.indexOf(E, aa) && -1 < k.indexOf(H, aa)) {
                                        if (!g) {
                                            r = !0;
                                            break a
                                        }
                                        var ea = G.id + "_" + aa
                                          , Y = this._featureLayersCache[ea];
                                        Y && Y.loadError || (Y || ((Y = da.layerUrl) || (Y = V.source ? this._getLayerUrl(G.url, "/dynamicLayer") : this._getLayerUrl(G.url, aa)),
                                        Y = new g(Y,{
                                            parentLayer: G,
                                            id: ea,
                                            drawMode: !1,
                                            mode: g.MODE_SELECTION,
                                            outFields: this._getOutFields(da.infoTemplate),
                                            resourceInfo: da.resourceInfo,
                                            source: V.source
                                        }),
                                        this._featureLayersCache[ea] = Y),
                                        Y.setDefinitionExpression(G.layerDefinitions && G.layerDefinitions[aa]),
                                        Y.setGDBVersion(G.gdbVersion),
                                        Y.setInfoTemplate(da.infoTemplate),
                                        Y.setMaxAllowableOffset(x),
                                        Y.setUseMapTime(!!G.useMapTime),
                                        G.layerDrawingOptions && G.layerDrawingOptions[aa] && G.layerDrawingOptions[aa].renderer && Y.setRenderer(G.layerDrawingOptions[aa].renderer),
                                        u.push(Y))
                                    }
                                }
                            }
                        }
                        if (r) {
                            var ia = new f;
                            t(["./layers/FeatureLayer"], function(wa) {
                                g = wa;
                                ia.resolve()
                            });
                            ia.then(function() {
                                B._getSubLayerFeatureLayers(q, x, z)
                            })
                        } else {
                            var qa = [];
                            k.forEach(u, function(wa) {
                                if (!wa.loaded) {
                                    var K = new f;
                                    c.once(wa, "load, error", function() {
                                        K.resolve()
                                    });
                                    qa.push(K.promise)
                                }
                            });
                            qa.length ? e(qa).then(function() {
                                u = k.filter(u, function(wa) {
                                    return !wa.loadError && wa.isVisibleAtScale(p)
                                });
                                z.resolve(u)
                            }) : (u = k.filter(u, function(wa) {
                                return wa.isVisibleAtScale(p)
                            }),
                            z.resolve(u))
                        }
                        return z.promise
                    },
                    _getLayerUrl: function(q, x) {
                        var v = q.indexOf("?");
                        return -1 === v ? q + "/" + x : q.substring(0, v) + "/" + x + q.substring(v)
                    },
                    _getOutFields: function(q) {
                        var x = q.info && q.info.fieldInfos;
                        if (x && x.length && "esri.dijit.PopupTemplate" === q.declaredClass) {
                            var v = [];
                            k.forEach(x, function(z) {
                                var u = z.fieldName && z.fieldName.toLowerCase();
                                u && "shape" !== u && 0 !== u.indexOf("relationships/") && v.push(z.fieldName)
                            })
                        } else
                            v = ["*"];
                        return v
                    },
                    _calculateClickTolerance: function(q) {
                        var x = a("esri-touch") ? 9 : 6, v, z;
                        k.forEach(q, function(u) {
                            if (v = u.renderer)
                                "esri.renderer.SimpleRenderer" === v.declaredClass ? ((z = v.symbol) && z.xoffset && (x = Math.max(x, Math.abs(z.xoffset))),
                                z && z.yoffset && (x = Math.max(x, Math.abs(z.yoffset)))) : "esri.renderer.UniqueValueRenderer" !== v.declaredClass && "esri.renderer.ClassBreaksRenderer" !== v.declaredClass || k.forEach(v.infos, function(p) {
                                    (z = p.symbol) && z.xoffset && (x = Math.max(x, Math.abs(z.xoffset)));
                                    z && z.yoffset && (x = Math.max(x, Math.abs(z.yoffset)))
                                })
                        });
                        return x
                    },
                    _showInfoWindow: function(q, x) {
                        var v = this.map.infoWindow
                          , z = q.geometry;
                        x = z && "point" === z.type ? z : x;
                        z = q.getContent();
                        v.setTitle(q.getTitle());
                        z && d.isString(z.id) && (q = l.byId(z.id)) && q.set && /_PopupRenderer/.test(q.declaredClass) && q.set("showTitle", !1);
                        v.setContent(z);
                        v.show(x)
                    },
                    _findGraphicById: function(q, x, v) {
                        var z, u = (x = x.attributes) && x[v];
                        k.some(q, function(p) {
                            var r = p.attributes;
                            r && r[v] === u && (z = p);
                            return !!z
                        });
                        return z
                    },
                    _isParentLayer: function(q, x) {
                        x = x && x.getLayer();
                        return q && x === q
                    },
                    _isReductionEnabled: function(q) {
                        return q && q.isFeatureReductionActive && q.isFeatureReductionActive()
                    },
                    _isImageServiceLayer: function(q) {
                        return "esri.layers.ArcGISImageServiceLayer" === q.declaredClass || "esri.layers.ArcGISImageServiceVectorLayer" === q.declaredClass || "esri.layers.RasterXLayer" === q.declaredClass
                    },
                    _isTiledImageServiceLayer: function(q) {
                        return "esri.layers.RasterXLayer" === q.declaredClass
                    }
                });
                a("extend-esri") && (b.PopupManager = h);
                return h
            })
        },
        "esri/layerUtils": function() {
            define(["dojo/_base/lang", "dojo/_base/array", "dojo/_base/json", "dojo/has", "./kernel"], function(C, y, b, w, m) {
                var l = {
                    _serializeLayerDefinitions: function(k, h) {
                        var f = []
                          , d = /[:;]/;
                        if (k && (y.forEach(k, function(c, e) {
                            c && (f.push([e, c]),
                            !h && d.test(c) && (h = !0))
                        }),
                        0 < f.length)) {
                            if (h) {
                                var a = {};
                                y.forEach(f, function(c) {
                                    a[c[0]] = c[1]
                                });
                                a = b.toJson(a)
                            } else
                                a = [],
                                y.forEach(f, function(c) {
                                    a.push(c[0] + ":" + c[1])
                                }),
                                a = a.join(";");
                            return a
                        }
                        return null
                    },
                    _serializeTimeOptions: function(k, h) {
                        if (k) {
                            var f = [];
                            y.forEach(k, function(d, a) {
                                d && (d = d.toJson(),
                                h && -1 !== y.indexOf(h, a) && (d.useTime = !1),
                                f.push('"' + a + '":' + b.toJson(d)))
                            });
                            if (f.length)
                                return "{" + f.join(",") + "}"
                        }
                    },
                    _getVisibleLayers: function(k, h) {
                        var f = [], d;
                        if (!k)
                            return f;
                        if (h)
                            for (f = h.concat(),
                            d = 0; d < k.length; d++) {
                                h = k[d];
                                var a = y.indexOf(k, h.id);
                                h.subLayerIds && -1 < a && (f.splice(a, 1),
                                f = f.concat(h.subLayerIds))
                            }
                        else
                            f = this._getDefaultVisibleLayers(k);
                        return f
                    },
                    _getDefaultVisibleLayers: function(k) {
                        var h = [], f;
                        if (!k)
                            return h;
                        for (f = 0; f < k.length; f++)
                            0 <= k[f].parentLayerId && -1 === y.indexOf(h, k[f].parentLayerId) && y.some(k, function(d) {
                                return d.id === k[f].parentLayerId
                            }) || k[f].defaultVisibility && h.push(k[f].id);
                        return h
                    },
                    _getLayersForScale: function(k, h) {
                        var f = [];
                        if (0 < k && h) {
                            var d;
                            for (d = 0; d < h.length; d++)
                                if (!(0 <= h[d].parentLayerId && -1 === y.indexOf(f, h[d].parentLayerId) && y.some(h, function(n) {
                                    return n.id === h[d].parentLayerId
                                })) && 0 <= h[d].id) {
                                    var a = !0
                                      , c = h[d].maxScale
                                      , e = h[d].minScale;
                                    if (0 < c || 0 < e)
                                        0 < c && 0 < e ? a = c <= k && k <= e : 0 < c ? a = c <= k : 0 < e && (a = k <= e);
                                    a && f.push(h[d].id)
                                }
                        }
                        return f
                    }
                };
                w("extend-esri") && C.mixin(m, l);
                return l
            })
        },
        "esri/MapNavigationManager": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r) {
                var B = w.connect
                  , D = w.disconnect
                  , G = n("chrome")
                  , A = n("safari")
                  , E = [k.NUMPAD_PLUS, 61, 187, k.NUMPAD_MINUS, 173, 189, k.UP_ARROW, k.NUMPAD_8, k.RIGHT_ARROW, k.NUMPAD_6, k.DOWN_ARROW, k.NUMPAD_2, k.LEFT_ARROW, k.NUMPAD_4, k.PAGE_UP, k.NUMPAD_9, k.PAGE_DOWN, k.NUMPAD_3, k.END, k.NUMPAD_1, k.HOME, k.NUMPAD_7];
                C = C(null, {
                    declaredClass: "esri.MapNavigationManager",
                    eventModel: "",
                    constructor: function(H, J) {
                        this.map = H;
                        y.mixin(this, J);
                        J = H.__container;
                        n("esri-pointer") ? (this.pointerEvents = new c(J,{
                            map: H
                        }),
                        this.eventModel = "pointer") : n("esri-touch") ? (n("ios") || (this.mouseEvents = new d(J,{
                            map: H
                        })),
                        this.touchEvents = new a(J,{
                            map: H,
                            mouseEvents: this.mouseEvents
                        }),
                        this.eventModel = "touch") : (this.mouseEvents = new d(J,{
                            map: H
                        }),
                        this.eventModel = "mouse");
                        this._zoomRect = new q(null,new r(e.defaults.map.zoomSymbol));
                        this._keyDx = this._keyDy = 0;
                        this._adjustPinch = y.hitch(this, this._adjustPinch);
                        this._adjustPinchEnd = y.hitch(this, this._adjustPinchEnd)
                    },
                    _panInit: function(H) {
                        var J = this.mouseEvents;
                        l.isLeft(H) && this.map.isPan && !H.shiftKey && (this._dragOrigin = new v(0,0),
                        y.mixin(this._dragOrigin, H.screenPoint),
                        D(this._panStartHandle),
                        D(this._panHandle),
                        D(this._panEndHandle),
                        this._panStartHandle = B(J, "onMouseDragStart", this, this._panStart),
                        this._panHandle = B(J, "onMouseDrag", this, this._pan),
                        this._panEndHandle = B(J, "onMouseUp", this, this._panEnd),
                        G || A) && (H.preventDefault(),
                        h.curNode && h.curNode.blur())
                    },
                    _panStart: function(H) {
                        this.map.setCursor("move");
                        this.map.__panStart(H.screenPoint.x, H.screenPoint.y)
                    },
                    _pan: function(H) {
                        this.map.__pan(H.screenPoint.x - this._dragOrigin.x, H.screenPoint.y - this._dragOrigin.y)
                    },
                    _panEnd: function(H) {
                        D(this._panStartHandle);
                        D(this._panHandle);
                        D(this._panEndHandle);
                        this._panStartHandle = this._panHandle = this._panEndHandle = null;
                        var J = this.map;
                        J.__panning && (J.__panEnd(H.screenPoint.x - this._dragOrigin.x, H.screenPoint.y - this._dragOrigin.y),
                        J.resetMapCursor())
                    },
                    _zoomInit: function(H) {
                        var J = this.map
                          , O = this.pointerEvents || this.mouseEvents;
                        (l.isLeft(H) || H.pointerType) && J.isRubberBandZoom && H.shiftKey && (J.setCursor("crosshair"),
                        this._dragOrigin = y.mixin({}, H.screenPoint),
                        this._zoomDir = H.ctrlKey || H.metaKey ? -1 : 1,
                        this.pointerEvents ? (this._zoomHandle = B(O, "onSwipeMove", this, this._zoom),
                        this._zoomEndHandle = B(O, "onSwipeEnd", this, this._zoomEnd)) : (this._zoomHandle = B(O, "onMouseDrag", this, this._zoom),
                        this._zoomEndHandle = B(O, "onMouseUp", this, this._zoomEnd)),
                        G && H.preventDefault())
                    },
                    _zoom: function(H) {
                        var J = this.map
                          , O = this._normalizeRect(H).offset(J.__visibleRect.x, J.__visibleRect.y);
                        H = J.graphics;
                        var V = this._zoomRect;
                        V.geometry || J.setCursor("crosshair");
                        V.geometry && H.remove(V, !0);
                        var aa = J.toMap(new v(O.x,O.y));
                        O = J.toMap(new v(O.x + O.width,O.y + O.height));
                        O = new u(aa.x,aa.y,O.x - aa.x,aa.y - O.y,J.spatialReference);
                        O._originOnly = !0;
                        V.setGeometry(O);
                        H.add(V, !0)
                    },
                    _zoomEnd: function(H) {
                        var J = this._zoomRect
                          , O = this.map
                          , V = O.extent
                          , aa = O.spatialReference;
                        D(this._zoomHandle);
                        D(this._zoomEndHandle);
                        this._zoomHandle = this._zoomEndHandle = null;
                        if (O._canZoom(this._zoomDir) && J.getDojoShape()) {
                            O.graphics.remove(J);
                            J.geometry = null;
                            H = this._normalizeRect(H);
                            H.x += O.__visibleRect.x;
                            H.y += O.__visibleRect.y;
                            if (-1 === this._zoomDir) {
                                var da = V.getWidth();
                                H = (da * O.width / H.width - da) / 2;
                                aa = new z(V.xmin - H,V.ymin - H,V.xmax + H,V.ymax + H,aa)
                            } else
                                V = O.toMap({
                                    x: H.x,
                                    y: H.y + H.height
                                }),
                                H = O.toMap({
                                    x: H.x + H.width,
                                    y: H.y
                                }),
                                aa = new z(V.x,V.y,H.x,H.y,aa);
                            O._extentUtil(null, null, aa)
                        }
                        J.getDojoShape() && O.graphics.remove(J, !0);
                        this._zoomDir = 0;
                        O.resetMapCursor()
                    },
                    _wheelZoom: function(H, J) {
                        var O = this.map;
                        if (!J) {
                            if (O.smartNavigation && !H.shiftKey && !O._isPanningOrZooming()) {
                                O.disableScrollWheelZoom();
                                this._setScrollWheelPan(!0);
                                this._wheelPan(H);
                                return
                            }
                            J = H.timeStamp;
                            if (!t.isDefined(J) || 0 >= J)
                                J = (new Date).getTime();
                            if (100 > (this._mwts ? J - this._mwts : J))
                                return;
                            this._mwts = J
                        }
                        O._canZoom(H.value) && O._extentUtil({
                            numLevels: H.value,
                            mapAnchor: H.mapPoint,
                            screenAnchor: H.screenPoint
                        })
                    },
                    _wheelPan: function(H) {
                        var J = this.map;
                        if (H.shiftKey && !J._isPanningOrZooming())
                            this._setScrollWheelPan(!1),
                            J.enableScrollWheelZoom(),
                            this._wheelZoom(H);
                        else {
                            var O = 0
                              , V = 0;
                            n("ff") ? H.axis === H.HORIZONTAL_AXIS ? O = -H.detail : V = -H.detail : (O = H.wheelDeltaX,
                            V = H.wheelDeltaY);
                            J.translate(O, V)
                        }
                    },
                    _setScrollWheelPan: function(H) {
                        this.map.isScrollWheelPan = H;
                        this.mouseEvents && this.mouseEvents.enableMouseWheel(H);
                        D(this._mwMacHandle);
                        this._mwMacHandle = null;
                        H && (this._mwMacHandle = B(this.mouseEvents || this.pointerEvents, "onMouseWheel", this, this._wheelPan))
                    },
                    _recenter: function(H) {
                        H.shiftKey && !this.map._isPanningOrZooming() && this.map.centerAt(H.mapPoint)
                    },
                    _recenterZoom: function(H) {
                        H.shiftKey && !this.map._isPanningOrZooming() && (H.value = H.ctrlKey || H.metaKey ? -1 : 1,
                        this._wheelZoom(H, !0))
                    },
                    _dblClickZoom: function(H) {
                        this.map._isPanningOrZooming() || (H.value = 1,
                        this._wheelZoom(H, !0))
                    },
                    _twoFingerTap: function(H) {
                        this.map._isPanningOrZooming() || (H.value = -1,
                        this._wheelZoom(H, !0))
                    },
                    _keyDown: function(H) {
                        var J = H.keyCode
                          , O = this.map;
                        if (-1 !== b.indexOf(E, J)) {
                            if (J === k.NUMPAD_PLUS || 61 === J || 187 === J)
                                O._extentUtil({
                                    numLevels: 1
                                });
                            else if (J === k.NUMPAD_MINUS || 173 === J || 189 === J)
                                O._extentUtil({
                                    numLevels: -1
                                });
                            else {
                                O.__panning || O.__panStart(0, 0);
                                switch (J) {
                                case k.UP_ARROW:
                                case k.NUMPAD_8:
                                    this._keyDy += 10;
                                    break;
                                case k.RIGHT_ARROW:
                                case k.NUMPAD_6:
                                    this._keyDx -= 10;
                                    break;
                                case k.DOWN_ARROW:
                                case k.NUMPAD_2:
                                    this._keyDy -= 10;
                                    break;
                                case k.LEFT_ARROW:
                                case k.NUMPAD_4:
                                    this._keyDx += 10;
                                    break;
                                case k.PAGE_UP:
                                case k.NUMPAD_9:
                                    this._keyDx -= 10;
                                    this._keyDy += 10;
                                    break;
                                case k.PAGE_DOWN:
                                case k.NUMPAD_3:
                                    this._keyDx -= 10;
                                    this._keyDy -= 10;
                                    break;
                                case k.END:
                                case k.NUMPAD_1:
                                    this._keyDx += 10;
                                    this._keyDy -= 10;
                                    break;
                                case k.HOME:
                                case k.NUMPAD_7:
                                    this._keyDx += 10;
                                    this._keyDy += 10;
                                    break;
                                default:
                                    return
                                }
                                O.__pan(this._keyDx, this._keyDy)
                            }
                            m.stop(H)
                        }
                    },
                    _keyEnd: function(H) {
                        var J = this.map;
                        J.__panning && H.keyCode !== k.SHIFT && (J.__panEnd(this._keyDx, this._keyDy),
                        this._keyDx = this._keyDy = 0)
                    },
                    _swipeInit: function(H) {
                        var J = this.map;
                        J = J._zoomAnim || J._panAnim;
                        if (H.shiftKey)
                            return !1;
                        J && J._active && (J.stop(),
                        J._fire("onEnd", [J.node]));
                        this._dragOrigin = new v(0,0);
                        y.mixin(this._dragOrigin, H.screenPoint);
                        D(this._swipeHandle);
                        D(this._swipeEndHandle);
                        this._swipeHandle = B(this.touchEvents || this.pointerEvents, "onSwipeMove", this, this._swipe);
                        this._swipeEndHandle = B(this.touchEvents || this.pointerEvents, "onSwipeEnd", this, this._swipeEnd)
                    },
                    _swipe: function(H) {
                        var J = this.map;
                        J.__panning ? (this._panX = H.screenPoint.x,
                        this._panY = H.screenPoint.y,
                        J.__pan(H.screenPoint.x - this._dragOrigin.x, H.screenPoint.y - this._dragOrigin.y)) : (J.setCursor("move"),
                        J.__panStart(H.screenPoint.x, H.screenPoint.y))
                    },
                    _swipeEnd: function(H) {
                        D(this._swipeHandle);
                        D(this._swipeEndHandle);
                        this._swipeHandle = this._swipeEndHandle = null;
                        var J = this.map;
                        J.__panning && (J.resetMapCursor(),
                        J.__panEnd(H.screenPoint.x - this._dragOrigin.x, H.screenPoint.y - this._dragOrigin.y))
                    },
                    _pinchInit: function(H) {
                        var J = this.map
                          , O = J._zoomAnim || J._panAnim;
                        O && O._active ? (O.stop(),
                        O._fire("onEnd", [O.node])) : J.__panning && (H.screenPoint = new v(this._panX,this._panY),
                        H.mapPoint = J.toMap(H.screenPoint),
                        this._swipeEnd(H));
                        D(this._pinchHandle);
                        D(this._pinchEndHandle);
                        this._pinchHandle = B(this.touchEvents || this.pointerEvents, "onPinchMove", this, this._pinch);
                        this._pinchEndHandle = B(this.touchEvents || this.pointerEvents, "onPinchEnd", this, this._pinchEnd)
                    },
                    _pinch: function(H) {
                        var J = this.map;
                        if (H.screenPoints) {
                            this.currLength = p.getLength(H.screenPoints[0], H.screenPoints[1]);
                            if (J.__zooming) {
                                var O = this.currLength / this._length;
                                this._zoomStartExtent = this.__scaleExtent(J.extent, O, this._dragOrigin);
                                J.__zoom(this._zoomStartExtent, O, this._dragOrigin)
                            } else
                                this._dragOrigin = new v((H.screenPoints[0].x + H.screenPoints[1].x) / 2,(H.screenPoints[0].y + H.screenPoints[1].y) / 2),
                                this._length = this.currLength,
                                J.__zoomStart(J.extent, this._dragOrigin);
                            this._pinchScale = O;
                            J._fireOnScale(this.currLength / this._length, this._dragOrigin, !0)
                        }
                    },
                    _pinchEnd: function(H) {
                        H = this.map;
                        D(this._pinchHandle);
                        D(this._pinchEndHandle);
                        this._pinchHandle = this._pinchEndHandle = null;
                        this._pinchScale = 0;
                        if (H.__zooming && null === H._zoomAnim) {
                            var J = this.currLength / this._length
                              , O = H.extent.getWidth();
                            this._zoomAnimAnchor = H.toMap(this._dragOrigin);
                            this._zoomStartExtent = this.__scaleExtent(H.extent, 1 / J, this._zoomAnimAnchor);
                            if (H.__tileInfo) {
                                var V = x.getCandidateTileInfo(H, H.__tileInfo, this._zoomStartExtent)
                                  , aa = H.__getExtentForLevel(V.lod.level, this._zoomAnimAnchor)
                                  , da = H.getMinZoom()
                                  , ea = H.getMaxZoom()
                                  , Y = aa.extent;
                                aa = aa.lod;
                                var ia = O / Y.getWidth()
                                  , qa = V.lod.level;
                                1 > J ? ia > J && qa-- : ia < J && qa++;
                                qa < da ? qa = da : qa > ea && (qa = ea);
                                qa !== V.lod.level && (aa = H.__getExtentForLevel(qa, this._zoomAnimAnchor),
                                Y = aa.extent,
                                aa = aa.lod);
                                this._zoomEndExtent = Y;
                                this._zoomEndLod = aa;
                                H._zoomAnim = g.animateRange({
                                    range: {
                                        start: O / this._zoomStartExtent.getWidth(),
                                        end: ia
                                    },
                                    duration: e.defaults.map.zoomDuration,
                                    rate: e.defaults.map.zoomRate,
                                    onAnimate: this._adjustPinch,
                                    onEnd: this._adjustPinchEnd
                                });
                                H._zoomAnim.play();
                                H._fireOnScale(H.extent.getWidth() / this._zoomEndExtent.getWidth(), this._dragOrigin)
                            } else
                                this._zoomEndExtent = this._zoomStartExtent,
                                H._fireOnScale(H.extent.getWidth() / this._zoomEndExtent.getWidth(), this._dragOrigin),
                                this._adjustPinchEnd()
                        }
                    },
                    _adjustPinch: function(H) {
                        var J = this.__scaleExtent(this.map.extent, H, this._zoomAnimAnchor);
                        this.map.__zoom(J, H, this._dragOrigin)
                    },
                    _adjustPinchEnd: function() {
                        var H = this.map
                          , J = H.extent.getWidth() / this._zoomEndExtent.getWidth()
                          , O = this.__scaleExtent(H.extent, 1 / J, this._zoomAnimAnchor)
                          , V = this._dragOrigin
                          , aa = this._zoomEndLod;
                        this._zoomStartExtent = this._zoomEndExtent = this._zoomEndLod = this._dragOrigin = H._zoomAnim = this._zoomAnimAnchor = null;
                        H.__zoomEnd(O, J, V, aa, !0)
                    },
                    __scaleExtent: function(H, J, O) {
                        O = O || H.getCenter();
                        J = H.expand(J);
                        var V = H.xmin - (J.getWidth() - H.getWidth()) * (O.x - H.xmin) / H.getWidth();
                        O = H.ymax - (J.getHeight() - H.getHeight()) * (O.y - H.ymax) / H.getHeight();
                        return new z(V,O - J.getHeight(),V + J.getWidth(),O,H.spatialReference)
                    },
                    _normalizeRect: function(H) {
                        H = H.screenPoint;
                        var J = this._dragOrigin.x
                          , O = this._dragOrigin.y;
                        H = new u((H.x < J ? H.x : J) - this.map.__visibleRect.x,(H.y < O ? H.y : O) - this.map.__visibleRect.y,Math.abs(H.x - J),Math.abs(H.y - O));
                        delete H.spatialReference;
                        0 === H.width && (H.width = 1);
                        0 === H.height && (H.height = 1);
                        return H
                    },
                    setImmediateClick: function(H) {
                        switch (this.eventModel) {
                        case "mouse":
                            this.mouseEvents.setImmediateClick(H);
                            break;
                        case "touch":
                            this.touchEvents.setImmediateTap(H);
                            this.mouseEvents && this.mouseEvents.setImmediateClick(H);
                            break;
                        case "pointer":
                            this.pointerEvents.setImmediateTap(H)
                        }
                    },
                    enablePan: function() {
                        this.disablePan();
                        switch (this.eventModel) {
                        case "mouse":
                            this._panInitHandle = B(this.mouseEvents, "onMouseDown", this, this._panInit);
                            break;
                        case "touch":
                            this._panInitHandle = B(this.mouseEvents, "onMouseDown", this, this._panInit);
                            this._swipeInitHandle = B(this.touchEvents, "onSwipeStart", this, this._swipeInit);
                            break;
                        case "pointer":
                            this._swipeInitHandle = B(this.pointerEvents, "onSwipeStart", this, this._swipeInit)
                        }
                    },
                    disablePan: function() {
                        D(this._panInitHandle);
                        this._panInitHandle = null;
                        D(this._swipeInitHandle);
                        this._swipeInitHandle = null
                    },
                    enableRubberBandZoom: function() {
                        this.disableRubberBandZoom();
                        this._zoomInitHandle = this.pointerEvents ? B(this.pointerEvents, "onSwipeStart", this, this._zoomInit) : B(this.mouseEvents, "onMouseDown", this, this._zoomInit)
                    },
                    disableRubberBandZoom: function() {
                        D(this._zoomInitHandle);
                        this._zoomInitHandle = null
                    },
                    enablePinchZoom: function() {
                        this.disablePinchZoom();
                        if ("touch" === this.eventModel || "pointer" === this.eventModel)
                            this._pinchInitHandle = B(this.touchEvents || this.pointerEvents, "onPinchStart", this, this._pinchInit)
                    },
                    disablePinchZoom: function() {
                        D(this._pinchInitHandle);
                        this._pinchInitHandle = null
                    },
                    enableScrollWheelZoom: function() {
                        this.disableScrollWheelZoom();
                        this._wheelHandle = B(this.mouseEvents || this.pointerEvents, "onMouseWheel", this, this._wheelZoom)
                    },
                    disableScrollWheelZoom: function() {
                        D(this._wheelHandle);
                        this._wheelHandle = null
                    },
                    enableScrollWheelPan: function() {
                        var H = this.map;
                        H && H.loaded && H.smartNavigation && (this.disableScrollWheelPan(),
                        this._setScrollWheelPan(!0))
                    },
                    disableScrollWheelPan: function() {
                        var H = this.map;
                        H && H.loaded && H.smartNavigation && this._setScrollWheelPan(!1)
                    },
                    enableDoubleClickZoom: function() {
                        this.disableDoubleClickZoom();
                        switch (this.eventModel) {
                        case "mouse":
                            this._dblClickHandle = B(this.mouseEvents, "onDblClick", this, this._dblClickZoom);
                            break;
                        case "touch":
                            this._dblClickHandle = B(this.mouseEvents, "onDblClick", this, this._dblClickZoom);
                            this._dblTapHandle = B(this.touchEvents, "onDoubleTap", this, this._dblClickZoom);
                            this._zoomOutHandle = B(this.touchEvents, "onTwoFingerTap", this, this._twoFingerTap);
                            break;
                        case "pointer":
                            this._dblTapHandle = B(this.pointerEvents, "onDoubleTap", this, this._dblClickZoom),
                            this._zoomOutHandle = B(this.pointerEvents, "onTwoFingerTap", this, this._twoFingerTap)
                        }
                    },
                    disableDoubleClickZoom: function() {
                        D(this._dblClickHandle);
                        D(this._zoomOutHandle);
                        this._dblTapHandle && D(this._dblTapHandle);
                        this._dblClickHandle = this._zoomOutHandle = this._dblTapHandle = null
                    },
                    enableShiftDoubleClickZoom: function() {
                        this.disableShiftDoubleClickZoom();
                        this._sDblClickHandle = B(this.pointerEvents || this.mouseEvents, "onDblClick", this, this._recenterZoom)
                    },
                    disableShiftDoubleClickZoom: function() {
                        D(this._sDblClickHandle);
                        this._sDblClickHandle = null
                    },
                    enableClickRecenter: function() {
                        this.disableClickRecenter();
                        this._recenterHandle = B(this.pointerEvents || this.mouseEvents, "onClick", this, this._recenter)
                    },
                    disableClickRecenter: function() {
                        D(this._recenterHandle);
                        this._recenterHandle = null
                    },
                    enableKeyboardNavigation: function() {
                        this.disableKeyboardNavigation();
                        this._keyHandle = B(this.pointerEvents || this.mouseEvents, "onKeyDown", this, this._keyDown);
                        this._keyEndHandle = B(this.pointerEvents || this.mouseEvents, "onKeyUp", this, this._keyEnd)
                    },
                    disableKeyboardNavigation: function() {
                        D(this._keyHandle);
                        D(this._keyEndHandle);
                        this._keyHandle = this._keyEndHandle = null
                    },
                    enableScrollWheel: function() {
                        var H = this.map;
                        H && (H.smartNavigation ? this.enableScrollWheelPan() : H.enableScrollWheelZoom())
                    },
                    disableScrollWheel: function() {
                        var H = this.map;
                        H && (H.disableScrollWheelZoom(),
                        H.smartNavigation && this.disableScrollWheelPan())
                    },
                    enableNavigation: function() {
                        var H = this.map;
                        H && H.loaded && (H._evalNavigationFeature("DoubleClickZoom"),
                        H._evalNavigationFeature("ClickRecenter"),
                        H._evalNavigationFeature("Pan"),
                        H._evalNavigationFeature("RubberBandZoom"),
                        H._evalNavigationFeature("PinchZoom"),
                        H._evalNavigationFeature("KeyboardNavigation"),
                        H._evalNavigationFeature("ScrollWheel"))
                    },
                    disableNavigation: function() {
                        var H = this.map;
                        H && H.loaded && (H._evalNavigationFeature("DoubleClickZoom"),
                        H._evalNavigationFeature("ClickRecenter"),
                        H._evalNavigationFeature("Pan"),
                        H._evalNavigationFeature("RubberBandZoom"),
                        H._evalNavigationFeature("PinchZoom"),
                        H._evalNavigationFeature("KeyboardNavigation"),
                        H._evalNavigationFeature("ScrollWheel"))
                    },
                    destroy: function() {
                        this.touchEvents && this.touchEvents.destroy();
                        this.mouseEvents && this.mouseEvents.destroy();
                        this.pointerEvents && this.pointerEvents.destroy();
                        var H, J = [this._panInitHandle, this._panStartHandle, this._panHandle, this._panEndHandle, this._zoomInitHandle, this._zoomHandle, this._zoomEndHandle, this._wheelHandle, this._mwMacHandle, this._dblClickHandle, this._zoomOutHandle, this._recenterHandle, this._sDblClickHandle, this._dblTapHandle, this._keyHandle, this._keyEndHandle, this._swipeInitHandle, this._swipeHandle, this._swipeEndHandle, this._pinchInitHandle, this._pinchHandle, this._pinchEndHandle];
                        for (H = 0; H < J.length; H++)
                            D(J[H]);
                        this.map = this.touchEvents = this.mouseEvents = this.eventModel = this.pointerEvents = this._zoomRect = this._dragOrigin = this._panInitHandle = this._panStartHandle = this._panHandle = this._panEndHandle = this._zoomInitHandle = this._zoomHandle = this._zoomEndHandle = this._wheelHandle = this._mwMacHandle = this._dblClickHandle = this._zoomOutHandle = this._recenterHandle = this._sDblClickHandle = this._dblTapHandle = this._keyHandle = this._keyEndHandle = this._swipeInitHandle = this._swipeHandle = this._swipeEndHandle = this._pinchInitHandle = this._pinchHandle = this._pinchEndHandle = null
                    }
                });
                n("extend-esri") && (f.MapNavigationManager = C);
                return C
            })
        },
        "esri/MouseEvents": function() {
            define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                var a = m.connect
                  , c = m.disconnect;
                C = C([h], {
                    declaredClass: "esri.MouseEvents",
                    doubleClickDuration: 300,
                    minWheelValue: 1,
                    maxWheelValue: 1,
                    mozWheelDivisor: -1 !== w("mac") ? 1 : 3,
                    wheelDivisor: 2 > w("chrome") ? 360 : 120,
                    preventPageScroll: !0,
                    map: null,
                    constructor: function(e, n) {
                        this.node = e;
                        b.mixin(this, n);
                        n = function(t) {
                            l.stop(t);
                            return !1
                        }
                        ;
                        w("mozilla") && y.style(e, "MozUserSelect", "none");
                        this._handles = [a(e, "onselectstart", n), a(e, "ondragstart", n), a(e, "onmouseenter", this, this._onMouseEnterHandler), a(e, "onmouseleave", this, this._onMouseLeaveHandler), a(e, "onmousedown", this, this._onMouseDownHandler), a(e, "onclick", this, this._onClickHandler), a(e, "ondblclick", this, this._onDblClickHandler)];
                        this._onMouseMoveHandler_connect = a(e, "onmousemove", this, this._onMouseMoveHandler);
                        this._onMouseUpHandler_connect = a(e, "onmouseup", this, this._onMouseUpHandler);
                        this._fireClickEvent = b.hitch(this, this._fireClickEvent);
                        this._initialDuration = this.doubleClickDuration;
                        this.preventPageScroll = (e = this.map) ? e.isScrollWheelZoom || e.isScrollWheelPan : this.preventPageScroll;
                        this.enableMouseWheel(!1)
                    },
                    _fire: function(e, n) {
                        if (!this._preventClick || "onClick" !== e && "onDblClick" !== e) {
                            if (this[e])
                                this[e](n);
                            if (this.map && this.map[e])
                                this.map[e](n)
                        }
                    },
                    _processEvent: function(e) {
                        e = l.fix(e, e.target);
                        var n = this.map
                          , t = n && n.position;
                        t && ("DOMMouseScroll" === e.type && 3 > w("ff") ? e.screenPoint = new d(window.scrollX + e.screenX - t.x,window.scrollY + e.screenY - t.y) : e.screenPoint = new d(e.pageX - t.x,e.pageY - t.y),
                        e.mapPoint = n.extent ? n.toMap(e.screenPoint) : new f);
                        e.numPoints = 0;
                        return e
                    },
                    _onMouseEnterHandler: function(e) {
                        c(this._onKeyDown_connect);
                        c(this._onKeyUp_connect);
                        this._onKeyDown_connect = a(document, "onkeydown", this, this._onKeyDownHandler);
                        this._onKeyUp_connect = a(document, "onkeyup", this, this._onKeyUpHandler);
                        this._fire("onMouseOver", this._processEvent(e))
                    },
                    _onMouseLeaveHandler: function(e) {
                        c(this._onKeyDown_connect);
                        c(this._onKeyUp_connect);
                        this._onKeyDown_connect = this._onKeyUp_connect = null;
                        this._fire("onMouseOut", this._processEvent(e))
                    },
                    _onMouseMoveHandler: function(e) {
                        this._dragEnd ? this._dragEnd = !1 : this._fire("onMouseMove", this._processEvent(e))
                    },
                    _onMouseDownHandler: function(e) {
                        c(this._onMouseMoveHandler_connect);
                        this._onMouseMoveHandler_connect = null;
                        this.node.setCapture && this.node.setCapture(!1);
                        c(this._onMouseDragHandler_connect);
                        this._onMouseDragHandler_connect = a(document, "onmousemove", this, this._onMouseDragHandler);
                        this._startX = e.pageX;
                        this._startY = e.pageY;
                        this._fire("onMouseDown", this._processEvent(e))
                    },
                    _onMouseUpHandler: function(e) {
                        var n = this.node;
                        n.releaseCapture && n.releaseCapture();
                        c(this._onMouseDragHandler_connect);
                        this._onMouseDragHandler_connect = null;
                        c(this._onMouseMoveHandler_connect);
                        this._onMouseMoveHandler_connect = a(n, "onmousemove", this, this._onMouseMoveHandler);
                        this._fire("onMouseUp", this._processEvent(e))
                    },
                    _onMouseDragHandler: function(e) {
                        c(this._onMouseDragHandler_connect);
                        this._onMouseDragHandler_connect = a(document, "onmousemove", this, this._onMouseDraggingHandler);
                        c(this._onMouseUpHandler_connect);
                        this._onMouseUpHandler_connect = a(document, "onmouseup", this, this._onDragMouseUpHandler);
                        this._docLeaveConnect = a(document, "onmouseout", this, this._onDocMouseOut);
                        this._fire("onMouseDragStart", this._processEvent(e))
                    },
                    _onMouseDraggingHandler: function(e) {
                        l.stop(e);
                        this._fire("onMouseDrag", this._processEvent(e))
                    },
                    _onDragMouseUpHandler: function(e) {
                        var n = this.node;
                        n.releaseCapture && n.releaseCapture();
                        this._dragEnd = !0;
                        c(this._docLeaveConnect);
                        c(this._onMouseDragHandler_connect);
                        c(this._onMouseUpHandler_connect);
                        this._docLeaveConnect = this._onMouseDragHandler_connect = null;
                        this._onMouseMoveHandler_connect = a(n, "onmousemove", this, this._onMouseMoveHandler);
                        this._onMouseUpHandler_connect = a(n, "onmouseup", this, this._onMouseUpHandler);
                        e = this._processEvent(e);
                        this._fire("onMouseDragEnd", e);
                        this._fire("onMouseUp", e)
                    },
                    _onDocMouseOut: function(e) {
                        var n = 9 > w("ie") ? e.toElement : e.relatedTarget
                          , t = n && n.nodeName.toLowerCase();
                        (!n || (w("chrome") || w("safari")) && "html" === t) && this._onDragMouseUpHandler(e)
                    },
                    _onClickHandler: function(e) {
                        e = this._processEvent(e);
                        if (e.pageX === this._startX && e.pageY === this._startY) {
                            clearTimeout(this._clickTimer);
                            var n = {}, t = "movementX"in e, g;
                            for (g in e)
                                "mozInputSource" === g || "mozPressure" === g || t && ("webkitMovementX" === g || "webkitMovementY" === g) || (n[g] = e[g]);
                            this._clickEvent = n;
                            this._clickTimer = setTimeout(this._fireClickEvent, this.doubleClickDuration)
                        }
                    },
                    _fireClickEvent: function() {
                        clearTimeout(this._clickTimer);
                        9 > w("ie") && (this._clickEvent.graphic = k._ieGraphic,
                        delete k._ieGraphic);
                        this._fire("onClick", this._clickEvent)
                    },
                    _onDblClickHandler: function(e) {
                        clearTimeout(this._clickTimer);
                        this._fire("onDblClick", this._processEvent(e))
                    },
                    _onMouseWheelHandler: function(e) {
                        var n = this.map;
                        (n ? n.isScrollWheelZoom || n.isScrollWheelPan : this.preventPageScroll) && l.stop(e);
                        n = w("ff") || w("mozilla") ? -e.detail / this.mozWheelDivisor : e.wheelDelta / this.wheelDivisor;
                        var t = Math.abs(n);
                        t = t <= this.minWheelValue ? this.minWheelValue : this.maxWheelValue;
                        e.value = 0 > n ? -t : t;
                        this._fire("onMouseWheel", this._processEvent(e))
                    },
                    _onKeyDownHandler: function(e) {
                        this._fire("onKeyDown", e)
                    },
                    _onKeyUpHandler: function(e) {
                        this._fire("onKeyUp", e)
                    },
                    enableMouseWheel: function(e) {
                        c(this._scrollHandle);
                        this._scrollHandle = a(this.node, w("ff") || w("mozilla") ? e ? "MozMousePixelScroll" : "DOMMouseScroll" : "onmousewheel", this, this._onMouseWheelHandler)
                    },
                    setImmediateClick: function(e) {
                        this.doubleClickDuration = e ? 0 : this._initialDuration
                    },
                    preventClickEvents: function(e) {
                        this._preventClick = e
                    },
                    destroy: function() {
                        var e = this._handles.concat([this._onMouseMoveHandler_connect, this._onMouseUpHandler_connect, this._onMouseDragHandler_connect, this._scrollHandle, this._onKeyDown_connect, this._onKeyUp_connect, this._docLeaveConnect]), n;
                        for (n = 0; n < e.length; n++)
                            c(e[n]);
                        clearTimeout(this._clickTimer);
                        this.node = this.map = this._handles = this._clickEvent = this._onMouseMoveHandler_connect = this._onMouseUpHandler_connect = this._onMouseDragHandler_connect = this._scrollHandle = this._onKeyDown_connect = this._onKeyUp_connect = this._docLeaveConnect = null
                    }
                });
                w("extend-esri") && (k.MouseEvents = C);
                return C
            })
        },
        "esri/TouchEvents": function() {
            define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "), function(C, y, b, w, m, l, k, h, f) {
                C = C([k], {
                    declaredClass: "esri.TouchEvents",
                    tapRadius: 8,
                    doubleTapRadius: 10,
                    tapStartTolerance: 50,
                    doubleTapDuration: 300,
                    map: null,
                    constructor: function(d, a) {
                        this.node = d;
                        b.mixin(this, a);
                        y.setSelectable(d, !1);
                        this._touchStart = b.hitch(this, this._touchStart);
                        this._touchMove = b.hitch(this, this._touchMove);
                        this._touchEnd = b.hitch(this, this._touchEnd);
                        this._touchCancel = b.hitch(this, this._touchCancel);
                        this._fireClickEvent = b.hitch(this, this._fireClickEvent);
                        d.addEventListener("touchstart", this._touchStart, !1);
                        d.addEventListener("touchmove", this._touchMove, !1);
                        d.addEventListener("touchend", this._touchEnd, !1);
                        d.addEventListener("touchcancel", this._touchCancel, !1);
                        this.map && w("ios") && (this._mouseOver = b.hitch(this, this._mouseOver),
                        this._mouseOut = b.hitch(this, this._mouseOut),
                        this._mouseDown = b.hitch(this, this._mouseDown),
                        this._mouseUp = b.hitch(this, this._mouseUp),
                        this._mouseClick = b.hitch(this, this._mouseClick),
                        d.addEventListener("mouseover", this._mouseOver, !1),
                        d.addEventListener("mouseout", this._mouseOut, !1),
                        d.addEventListener("mousedown", this._mouseDown, !1),
                        d.addEventListener("mouseup", this._mouseUp, !1),
                        d.addEventListener("click", this._mouseClick, !1));
                        this._numTouches = 0;
                        this._nodeTouches = [];
                        this._touches = {};
                        this._touchIds = [];
                        this._taps = [];
                        this._immediate = !1
                    },
                    _touchStart: function(d) {
                        var a = this._touches, c, e = d.changedTouches.length, n, t, g = (new Date).getTime();
                        this._touchStartTS = g;
                        if (!(w("android") && w("safari") && 1 === d.targetTouches.length && d.touches.length === d.targetTouches.length && d.targetTouches.length === d.changedTouches.length && 0 === d.changedTouches[0].identifier && a[d.changedTouches[0].identifier])) {
                            this._addTouch(d);
                            for (c = 0; c < e; c++) {
                                var q = d.changedTouches[c];
                                var x = a[q.identifier] = {};
                                x.startX = q.pageX;
                                x.startY = q.pageY;
                                x.startTS = g;
                                -1 === this._touchIds.indexOf(q.identifier) && this._touchIds.push(q.identifier)
                            }
                            this._swipeActive && (n = this._nodeTouches[0]);
                            this._pinchActive && (t = this._nodeTouches[1]);
                            1 === this._numTouches ? this._swipeActive ? (this._swipeActive = !1,
                            this._fire("onSwipeEnd", this._processTouchEvent(d, n))) : this._pinchActive && (this._pinchActive = !1,
                            this._fire("onPinchEnd", this._processTouchEvent(d, [n, t]))) : 2 === this._numTouches ? this._swipeActive && (n && (x = a[this._touchIds[0]],
                            x.startX = n.pageX,
                            x.startY = n.pageY,
                            x.moved = !1),
                            this._swipeActive = !1,
                            this._fire("onSwipeEnd", this._processTouchEvent(d, n))) : this._swipeActive ? (this._swipeActive = !1,
                            this._fire("onSwipeEnd", this._processTouchEvent(d, n))) : this._pinchActive && (this._pinchActive = !1,
                            this._fire("onPinchEnd", this._processTouchEvent(d, [n, t])))
                        }
                    },
                    _touchMove: function(d) {
                        d.preventDefault();
                        this._updateTouch(d);
                        var a = this._touches, c, e = d.changedTouches.length, n;
                        if (!(w("android") && w("safari") && 1 === d.targetTouches.length && d.touches.length === d.targetTouches.length && d.targetTouches.length === d.changedTouches.length && 0 === d.changedTouches[0].identifier && a[d.changedTouches[0].identifier] && 1 < this._touchIds.length)) {
                            for (c = 0; c < e; c++) {
                                var t = d.changedTouches[c];
                                if (n = a[t.identifier]) {
                                    var g = Math.abs(t.pageX - n.startX);
                                    t = Math.abs(t.pageY - n.startY);
                                    !n.moved && (g >= this.tapRadius || t >= this.tapRadius) && (n.moved = n.absMoved = !0);
                                    var q = q ? q : n.moved
                                }
                            }
                            1 === this._numTouches ? (a = d.changedTouches[0],
                            this._swipeActive ? this._fire("onSwipeMove", this._processTouchEvent(d, a)) : q && (this._swipeActive = !0,
                            this._fire("onSwipeStart", this._processTouchEvent(d, a)))) : 2 === this._numTouches && (c = this._nodeTouches[0],
                            e = this._nodeTouches[1],
                            this._pinchActive ? this._fire("onPinchMove", this._processTouchEvent(d, [c, e])) : q && (q = a[c.identifier],
                            n = a[e.identifier],
                            a = Math.abs(q.startX - n.startX),
                            q = Math.abs(q.startY - n.startY),
                            n = Math.abs(c.pageX - e.pageX),
                            g = Math.abs(c.pageY - e.pageY),
                            Math.abs(Math.sqrt(n * n + g * g) - Math.sqrt(a * a + q * q)) >= 2 * this.tapRadius && (this._pinchActive = !0,
                            this._fire("onPinchStart", this._processTouchEvent(d, [c, e])))))
                        }
                    },
                    _touchEnd: function(d) {
                        this._removeTouch(d);
                        var a = this._touches, c = d.changedTouches, e, n = c.length, t, g, q = (new Date).getTime(), x = this._touchIds;
                        for (e = 0; e < n; e++)
                            if (g = a[c[e].identifier])
                                g.absMoved && (t = !0),
                                g.pageX = c[e].pageX,
                                g.pageY = c[e].pageY,
                                g.endTS = q;
                        if (0 === this._numTouches)
                            if (this._touches = {},
                            this._touchIds = [],
                            this._swipeActive)
                                this._swipeActive = !1,
                                this._fire("onSwipeEnd", this._processTouchEvent(d, c[0]));
                            else if (this._pinchActive)
                                this._pinchActive = !1,
                                this._fire("onPinchEnd", this._processTouchEvent(d, c));
                            else {
                                if (!t) {
                                    n = Infinity;
                                    t = -Infinity;
                                    q = Infinity;
                                    var v = -Infinity
                                      , z = this.tapStartTolerance
                                      , u = []
                                      , p = !0;
                                    for (e = 0; e < x.length; e++)
                                        g = a[x[e]],
                                        u.push(g),
                                        g.startTS < n && (n = g.startTS),
                                        g.startTS > t && (t = g.startTS),
                                        g.endTS < q && (q = g.endTS),
                                        g.endTS > v && (v = g.endTS),
                                        delete a[x[e]];
                                    1 === u.length && c[0] && (a = Math.abs(c[0].pageY - u[0].startY),
                                    Math.abs(c[0].pageX - u[0].startX) >= this.tapRadius || a >= this.tapRadius) && (p = !1);
                                    p && Math.abs(t - n) <= z && Math.abs(v - q) <= z && this._basicTap(d, u)
                                }
                            }
                        else
                            1 === this._numTouches && this._pinchActive && (e = this._nodeTouches[0],
                            g = a[e.identifier],
                            g.startX = e.pageX,
                            g.startY = e.pageY,
                            this._pinchActive = g.moved = !1,
                            this._fire("onPinchEnd", this._processTouchEvent(d, [c[0], e])))
                    },
                    _touchCancel: function(d) {
                        this._numTouches && this._touchEnd(d)
                    },
                    _basicTap: function(d, a) {
                        var c = (new Date).getTime()
                          , e = this;
                        d = this._processTouchEvent(d, a);
                        this._taps.push({
                            touchInfos: a,
                            ts: c,
                            event: d
                        });
                        2 < this._taps.length && this._taps.shift();
                        this._fire("onBasicTap", d);
                        clearTimeout(this._tapTimer);
                        this._immediate ? this._analyzeTap(!0) : this._tapTimer = setTimeout(function() {
                            var n = e;
                            e = null;
                            clearTimeout(n._tapTimer);
                            n._analyzeTap()
                        }, 2 === this._taps.length ? this.doubleTapDuration / 2 : this.doubleTapDuration)
                    },
                    _analyzeTap: function(d) {
                        var a = this._taps
                          , c = a[0]
                          , e = a[1]
                          , n = c.touchInfos
                          , t = e && e.touchInfos;
                        a.length && (d || (this._taps = []),
                        c && e ? n.length === t.length ? e.ts - c.ts <= this.doubleTapDuration ? (1 === n.length ? (d = Math.abs(n[0].startX - t[0].startX),
                        n = Math.abs(n[0].startY - t[0].startY),
                        n = d <= this.doubleTapRadius && n <= this.doubleTapRadius) : n = !0,
                        n ? this._processedDoubleTap(a) : this._processedTap(e)) : this._processedTap(e) : this._processedTap(e) : this._processedTap(c || e))
                    },
                    _processedTap: function(d) {
                        var a = d.event;
                        this._fire("onProcessedTap", a);
                        1 === d.touchInfos.length ? this._fire("onTap", this._fixEvent(a)) : 2 === d.touchInfos.length && this._fire("onTwoFingerTap", a)
                    },
                    _processedDoubleTap: function(d) {
                        var a = 1 === d[1].touchInfos.length;
                        if (a) {
                            var c = [this._fixEvent(d[0].event), this._fixEvent(d[1].event)];
                            c[1].relatedEvents = c
                        }
                        d = [d[0].event, d[1].event];
                        d[1].relatedEvents = d;
                        this._fire("onProcessedDoubleTap", d[1]);
                        a && (this._fire("onDoubleTap", c[1]),
                        this._fire("onDblClick", c[1]))
                    },
                    _addTouch: function(d) {
                        var a = d.changedTouches, c = this._nodeTouches, e;
                        this._numTouches += a.length;
                        for (d = 0; d < a.length; d++) {
                            var n = c.length;
                            var t = !1;
                            for (e = 0; e < n && !(t = c[e].identifier === a[d].identifier); e++)
                                ;
                            t ? this._numTouches-- : c.push(a[d])
                        }
                        for (d = c.length - 1; 0 <= d; d--)
                            m.isDescendant(c[d].target, document.body) || (c.splice(d, 1),
                            this._numTouches--);
                        0 > this._numTouches && (this._numTouches = 0)
                    },
                    _removeTouch: function(d) {
                        var a = []
                          , c = []
                          , e = d.changedTouches
                          , n = this._nodeTouches;
                        this._numTouches -= e.length;
                        0 > this._numTouches && (this._numTouches = 0);
                        for (d = 0; d < e.length; d++)
                            a.push(e[d].identifier);
                        for (d = n.length - 1; 0 <= d; d--)
                            -1 !== a.indexOf(n[d].identifier) && c.push(n.splice(d, 1)[0]);
                        return c
                    },
                    _updateTouch: function(d) {
                        var a = []
                          , c = d.changedTouches
                          , e = this._nodeTouches;
                        for (d = 0; d < c.length; d++)
                            a.push(c[d].identifier);
                        for (d = 0; d < e.length; d++) {
                            var n = a.indexOf(e[d].identifier);
                            -1 !== n && e.splice(d, 1, c[n])
                        }
                    },
                    _mouseOver: function(d) {
                        this._fire("onMouseOver", this._processMouseEvent(d))
                    },
                    _mouseOut: function(d) {
                        this._fire("onMouseOut", this._processMouseEvent(d))
                    },
                    _mouseDown: function(d) {
                        this._fire("onMouseDown", this._processMouseEvent(d))
                    },
                    _mouseUp: function(d) {
                        this._fire("onMouseUp", this._processMouseEvent(d))
                    },
                    _mouseClick: function(d) {
                        clearTimeout(this._clickTimer);
                        300 < (new Date).getTime() - this._touchStartTS ? this._fire("onClick", this._processMouseEvent(d)) : (this._clickEvent = d,
                        this._clickTimer = setTimeout(this._fireClickEvent, this.doubleTapDuration))
                    },
                    _fireClickEvent: function() {
                        clearTimeout(this._clickTimer);
                        this._fire("onClick", this._processMouseEvent(this._clickEvent))
                    },
                    _fire: function(d, a) {
                        "onDblClick" === d && clearTimeout(this._clickTimer);
                        if ("onDblClick" === d && this.mouseEvents) {
                            this.mouseEvents.preventClickEvents(!0);
                            var c = this;
                            setTimeout(function() {
                                c.mouseEvents.preventClickEvents(!1)
                            }, 350)
                        }
                        if (this[d])
                            this[d](a);
                        if (this.map && this.map[d])
                            this.map[d](a)
                    },
                    _fixEvent: function(d) {
                        var a = {}, c;
                        for (c in d)
                            a[c] = d[c];
                        this.map && (a.screenPoint = a.screenPoints[0],
                        a.mapPoint = a.mapPoints[0]);
                        return a
                    },
                    _processTouchEvent: function(d, a) {
                        var c = this.map
                          , e = c && c.position
                          , n = 0;
                        if (e && a)
                            if (b.isArray(a)) {
                                var t;
                                d.screenPoints = [];
                                d.mapPoints = [];
                                for (t = 0; t < a.length; t++)
                                    if (a[t]) {
                                        var g = new f(a[t].pageX - e.x,a[t].pageY - e.y);
                                        d.screenPoints.push(g);
                                        d.mapPoints.push(c.extent ? c.toMap(g) : new h)
                                    } else
                                        n++
                            } else
                                d.screenPoint = new f(a.pageX - e.x,a.pageY - e.y),
                                d.mapPoint = c.extent ? c.toMap(d.screenPoint) : new h;
                        d.numPoints = a ? b.isArray(a) ? a.length - n : 1 : 0;
                        return d
                    },
                    _processMouseEvent: function(d) {
                        var a = this.map
                          , c = a && a.position;
                        c && (d.screenPoint = new f(d.pageX - c.x,d.pageY - c.y),
                        d.mapPoint = a.extent ? a.toMap(d.screenPoint) : new h);
                        return d
                    },
                    setImmediateTap: function(d) {
                        this._immediate = d
                    },
                    destroy: function() {
                        var d = this.node;
                        d.removeEventListener("touchstart", this._touchStart, !1);
                        d.removeEventListener("touchmove", this._touchMove, !1);
                        d.removeEventListener("touchend", this._touchEnd, !1);
                        d.removeEventListener("touchcancel", this._touchCancel, !1);
                        this.map && (d.removeEventListener("mouseover", this._mouseOver, !1),
                        d.removeEventListener("mouseout", this._mouseOut, !1),
                        d.removeEventListener("mousedown", this._mouseDown, !1),
                        d.removeEventListener("mouseup", this._mouseUp, !1),
                        d.removeEventListener("click", this._mouseClick, !1));
                        y.setSelectable(d, !0);
                        clearTimeout(this._tapTimer);
                        clearTimeout(this._clickTimer);
                        this.node = this.map = this._numTouches = this._nodeTouches = this._touches = this._touchIds = this._taps = null
                    }
                });
                w("extend-esri") && (l.TouchEvents = C);
                return C
            })
        },
        "esri/PointerEvents": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "), function(C, y, b, w, m, l, k, h) {
                C = C([l], {
                    declaredClass: "esri.PointerEvents",
                    tapRadius: 8,
                    clickRadius: 2,
                    doubleTapRadius: 10,
                    tapStartTolerance: 50,
                    doubleTapDuration: 300,
                    minWheelValue: 1,
                    maxWheelValue: 1,
                    mozWheelDivisor: -1 !== w("mac") ? 1 : 3,
                    wheelDivisor: 120,
                    preventPageScroll: !0,
                    _dragging: !1,
                    constructor: function(f, d) {
                        this.node = f;
                        y.mixin(this, d);
                        void 0 !== f.style.msTouchAction ? f.style.msTouchAction = "none" : void 0 !== f.style.touchAction && (f.style.touchAction = "none");
                        d = navigator.msPointerEnabled;
                        var a = function(c) {
                            c.preventDefault()
                        };
                        f.addEventListener("selectstart", a, !1);
                        f.addEventListener("dragstart", a, !1);
                        this._pointerDown = y.hitch(this, this._pointerDown);
                        this._pointerMove = y.hitch(this, this._pointerMove);
                        this._pointerUp = y.hitch(this, this._pointerUp);
                        this._pointerCancel = y.hitch(this, this._pointerCancel);
                        f.addEventListener(d ? "MSPointerDown" : "pointerdown", this._pointerDown, !1);
                        f.addEventListener(d ? "MSPointerMove" : "pointermove", this._pointerMove, !1);
                        f.addEventListener(d ? "MSPointerUp" : "pointerup", this._pointerUp, !1);
                        f.addEventListener(d ? "MSPointerCancel" : "pointercancel", this._pointerCancel, !1);
                        this.map && (this._mouseOver = y.hitch(this, this._mouseOver),
                        this._mouseOut = y.hitch(this, this._mouseOut),
                        this._mouseLeave = y.hitch(this, this._mouseLeave),
                        this._mouseDown = y.hitch(this, this._mouseDown),
                        this._mouseUp = y.hitch(this, this._mouseUp),
                        this._mouseClick = y.hitch(this, this._mouseClick),
                        this._mouseWheel = y.hitch(this, this._mouseWheel),
                        this._mouseMove = y.hitch(this, this._mouseMove),
                        this._mouseEnter = y.hitch(this, this._mouseEnter),
                        this._onKeyDown = y.hitch(this, this._onKeyDown),
                        this._onKeyUp = y.hitch(this, this._onKeyUp),
                        f.addEventListener("mouseover", this._mouseOver, !1),
                        f.addEventListener("mouseout", this._mouseOut, !1),
                        f.addEventListener("mouseleave", this._mouseLeave, !1),
                        f.addEventListener("mousedown", this._mouseDown, !1),
                        f.addEventListener("mouseup", this._mouseUp, !1),
                        f.addEventListener("click", this._mouseClick, !1),
                        f.addEventListener("mousewheel", this._mouseWheel, !1),
                        f.addEventListener("mousemove", this._mouseMove, !1),
                        f.addEventListener("mouseenter", this._mouseEnter, !1));
                        this._numTouches = 0;
                        this._touches = {};
                        this._touchIds = [];
                        this._taps = [];
                        this._immediate = !1
                    },
                    _pointerDown: function(f) {
                        if (-1 < b.indexOf(this._touchIds, f.pointerId))
                            this._pointerUp(f);
                        else {
                            var d = this._touches
                              , a = f.target
                              , c = f.pointerId
                              , e = this._touchIds
                              , n = (new Date).getTime();
                            var t = d[c] = {};
                            t.pointerId = c;
                            t.startX = t.pageX = f.pageX;
                            t.startY = t.pageY = f.pageY;
                            t.startTS = n;
                            e.push(c);
                            this._numTouches++;
                            a.setPointerCapture ? a.setPointerCapture(c) : a.msSetPointerCapture && a.msSetPointerCapture(c);
                            a = d[e[0]];
                            d = d[e[1]];
                            1 !== this._numTouches && (2 === this._numTouches ? this._swipeActive && (a && (a.startX = a.pageX,
                            a.startY = a.pageY,
                            a.moved = !1),
                            this._swipeActive = !1,
                            this._fire("onSwipeEnd", this._processTouchEvent(f, a))) : this._swipeActive ? (this._swipeActive = !1,
                            this._fire("onSwipeEnd", this._processTouchEvent(f, a))) : this._pinchActive && (this._pinchActive = !1,
                            this._fire("onPinchEnd", this._processTouchEvent(f, [a, d]))))
                        }
                    },
                    _pointerMove: function(f) {
                        var d = this._touches, a = this._touchIds, c;
                        if ((c = d[f.pointerId]) && (c.pageX !== f.pageX || c.pageY !== f.pageY)) {
                            c.pageX = f.pageX;
                            c.pageY = f.pageY;
                            var e = Math.abs(c.pageX - c.startX);
                            var n = Math.abs(c.pageY - c.startY);
                            !c.moved && (e >= this.tapRadius || n >= this.tapRadius) && (c.moved = c.absMoved = !0);
                            if (1 === this._numTouches)
                                this._swipeActive ? this._fire("onSwipeMove", this._processTouchEvent(f, f)) : c.moved && (this._swipeActive = !0,
                                this._fire("onSwipeStart", this._processTouchEvent(f, f)));
                            else if (2 === this._numTouches)
                                if (c = d[a[0]],
                                d = d[a[1]],
                                this._pinchActive)
                                    this._fire("onPinchMove", this._processTouchEvent(f, [c, d]));
                                else if (c.moved || d.moved) {
                                    a = Math.abs(c.startX - d.startX);
                                    e = Math.abs(c.startY - d.startY);
                                    n = Math.abs(c.pageX - d.pageX);
                                    var t = Math.abs(c.pageY - d.pageY);
                                    Math.abs(Math.sqrt(n * n + t * t) - Math.sqrt(a * a + e * e)) >= 2 * this.tapRadius && (this._pinchActive = !0,
                                    this._fire("onPinchStart", this._processTouchEvent(f, [c, d])))
                                }
                        }
                    },
                    _pointerUp: function(f) {
                        var d = this._touches, a, c = this.node, e = f.target, n = f.pointerId, t = this._touchIds, g = t.slice(0), q = b.map(g, function(u) {
                            return d[u]
                        }), x = (new Date).getTime();
                        if (a = d[n])
                            if (a.pageX = f.pageX,
                            a.pageY = f.pageY,
                            a.endTS = x,
                            this._numTouches--,
                            e.releasePointerCapture ? e.releasePointerCapture(n) : e.msReleasePointerCapture && e.msReleasePointerCapture(n),
                            0 === this._numTouches)
                                if (this._touches = {},
                                this._touchIds = [],
                                this._swipeActive)
                                    this._swipeActive = !1,
                                    this._fire("onSwipeEnd", this._processTouchEvent(f, f));
                                else if (this._pinchActive)
                                    this._pinchActive = !1,
                                    this._fire("onPinchEnd", this._processTouchEvent(f, f));
                                else {
                                    if (!a.absMoved) {
                                        e = Infinity;
                                        n = -Infinity;
                                        t = Infinity;
                                        x = -Infinity;
                                        var v = this.tapStartTolerance, z;
                                        for (z = 0; z < g.length; z++)
                                            a = q[z],
                                            a.startTS < e && (e = a.startTS),
                                            a.startTS > n && (n = a.startTS),
                                            a.endTS < t && (t = a.endTS),
                                            a.endTS > x && (x = a.endTS);
                                        Math.abs(n - e) <= v && Math.abs(x - t) <= v && this._basicTap(f, q)
                                    }
                                }
                            else
                                1 === this._numTouches && this._pinchActive && (t.splice(b.indexOf(t, f.pointerId), 1),
                                delete d[f.pointerId],
                                a = d[t[0]],
                                a.startX = a.pageX,
                                a.startY = a.pageY,
                                a.moved = !1,
                                document.msElementsFromPoint && (g = document.msElementsFromPoint(a.pageX, a.pageY),
                                b.some(g, function(u) {
                                    return u === c
                                }) || (this._touches = {},
                                this._touchIds = [],
                                this._numTouches = 0)),
                                this._pinchActive = !1,
                                this._fire("onPinchEnd", this._processTouchEvent(f, [f, a])))
                    },
                    _pointerCancel: function(f) {
                        this._numTouches && this._pointerUp(f)
                    },
                    _basicTap: function(f, d) {
                        var a = (new Date).getTime()
                          , c = this
                          , e = this._immediate;
                        f = this._processTouchEvent(f, d);
                        this._taps.push({
                            touchInfos: d,
                            ts: a,
                            event: f
                        });
                        2 < this._taps.length && this._taps.shift();
                        this._fire("onBasicTap", f);
                        clearTimeout(this._tapTimer);
                        f = 2 === this._taps.length ? this.doubleTapDuration / 2 : this.doubleTapDuration;
                        this._tapTimer = setTimeout(function() {
                            var n = c;
                            c = null;
                            clearTimeout(n._tapTimer);
                            n._analyzeTap(e)
                        }, e ? 0 : f)
                    },
                    _analyzeTap: function(f) {
                        var d = this._taps
                          , a = d[0]
                          , c = d[1]
                          , e = a.touchInfos
                          , n = c && c.touchInfos;
                        d.length && (f || (this._taps = []),
                        a && c ? e.length === n.length ? c.ts - a.ts <= this.doubleTapDuration ? (1 === e.length ? (f = Math.abs(e[0].startX - n[0].startX),
                        e = Math.abs(e[0].startY - n[0].startY),
                        e = f <= this.doubleTapRadius && e <= this.doubleTapRadius) : e = !0,
                        e ? this._processedDoubleTap(d) : this._processedTap(c)) : this._processedTap(c) : this._processedTap(c) : this._processedTap(a || c))
                    },
                    _processedTap: function(f) {
                        var d = f.event;
                        this._fire("onProcessedTap", d);
                        1 === f.touchInfos.length ? this._fire("onTap", this._fixEvent(d)) : 2 === f.touchInfos.length && this._fire("onTwoFingerTap", d)
                    },
                    _processedDoubleTap: function(f) {
                        var d = 1 === f[1].touchInfos.length;
                        if (d) {
                            var a = [this._fixEvent(f[0].event), this._fixEvent(f[1].event)];
                            a[1].relatedEvents = a
                        }
                        f = [f[0].event, f[1].event];
                        f[1].relatedEvents = f;
                        this._fire("onProcessedDoubleTap", f[1]);
                        d && (this._fire("onDoubleTap", a[1]),
                        this._fire("onDblClick", a[1]))
                    },
                    _mouseOver: function(f) {
                        this._fire("onMouseOver", this._processMouseEvent(f))
                    },
                    _mouseMove: function(f) {
                        this._dragging ? this._fire("onMouseDrag", this._processMouseEvent(f)) : this._fire("onMouseMove", this._processMouseEvent(f))
                    },
                    _mouseOut: function(f) {
                        this._fire("onMouseOut", this._processMouseEvent(f))
                    },
                    _mouseLeave: function(f) {
                        document.removeEventListener("keydown", this._onKeyDown, !1);
                        document.removeEventListener("keyup", this._onKeyUp, !1);
                        this._fire("onMouseOut", this._processMouseEvent(f))
                    },
                    _mouseDown: function(f) {
                        this._downX = f.pageX;
                        this._downY = f.pageY;
                        this._fire("onMouseDown", this._processMouseEvent(f));
                        0 === f.button && (this._dragging = !0,
                        this._fire("onMouseDragStart", this._processMouseEvent(f)))
                    },
                    _mouseUp: function(f) {
                        this._dragging && (this._dragging = !1,
                        this._fire("onMouseDragEnd", this._processMouseEvent(f)));
                        this._fire("onMouseUp", this._processMouseEvent(f))
                    },
                    _mouseClick: function(f) {
                        Math.abs(f.pageX - this._downX) <= this.clickRadius && Math.abs(f.pageY - this._downY) <= this.clickRadius && this._fire("onClick", this._processMouseEvent(f))
                    },
                    _mouseWheel: function(f) {
                        var d = this.map;
                        (d ? d.isScrollWheelZoom || d.isScrollWheelPan : this.preventPageScroll) && f.preventDefault();
                        d = f.wheelDelta ? f.wheelDelta / this.wheelDivisor : -f.detail / this.mozWheelDivisor;
                        var a = Math.abs(d);
                        a = a <= this.minWheelValue ? this.minWheelValue : this.maxWheelValue;
                        f.value = 0 > d ? -a : a;
                        this._fire("onMouseWheel", this._processMouseEvent(f))
                    },
                    _mouseEnter: function(f) {
                        document.removeEventListener("keydown", this._onKeyDown, !1);
                        document.removeEventListener("keyup", this._onKeyUp, !1);
                        document.addEventListener("keydown", this._onKeyDown, !1);
                        document.addEventListener("keyup", this._onKeyUp, !1);
                        this._fire("onMouseEnter", this._processMouseEvent(f))
                    },
                    _onKeyDown: function(f) {
                        this._fire("onKeyDown", f)
                    },
                    _onKeyUp: function(f) {
                        this._fire("onKeyUp", f)
                    },
                    _fire: function(f, d) {
                        if (this[f])
                            this[f](d);
                        if (this.map && this.map[f])
                            this.map[f](d)
                    },
                    _fixEvent: function(f) {
                        var d = {}, a;
                        for (a in f)
                            d[a] = f[a];
                        d.preventDefault = function() {
                            f.preventDefault()
                        }
                        ;
                        d.stopPropagation = function() {
                            f.stopPropagation()
                        }
                        ;
                        this.map && (d.screenPoint = d.screenPoints[0],
                        d.mapPoint = d.mapPoints[0]);
                        return d
                    },
                    _processTouchEvent: function(f, d) {
                        var a = this.map
                          , c = a && a.position
                          , e = 0;
                        if (c && d)
                            if (y.isArray(d)) {
                                var n;
                                f.screenPoints = [];
                                f.mapPoints = [];
                                for (n = 0; n < d.length; n++)
                                    if (d[n]) {
                                        var t = new h(d[n].pageX - c.x,d[n].pageY - c.y);
                                        f.screenPoints.push(t);
                                        f.mapPoints.push(a.extent ? a.toMap(t) : new k)
                                    } else
                                        e++
                            } else
                                f.screenPoint = new h(d.pageX - c.x,d.pageY - c.y),
                                f.mapPoint = a.extent ? a.toMap(f.screenPoint) : new k;
                        f.numPoints = d ? y.isArray(d) ? d.length - e : 1 : 0;
                        return f
                    },
                    _processMouseEvent: function(f) {
                        var d = this.map
                          , a = d && d.position;
                        a && (f.screenPoint = new h(f.pageX - a.x,f.pageY - a.y),
                        f.mapPoint = d.extent ? d.toMap(f.screenPoint) : new k);
                        return f
                    },
                    setImmediateTap: function(f) {
                        this._immediate = f
                    },
                    destroy: function() {
                        var f = this.node;
                        f.removeEventListener("MSPointerDown", this._pointerDown, !1);
                        f.removeEventListener("MSPointerMove", this._pointerMove, !1);
                        f.removeEventListener("MSPointerUp", this._pointerUp, !1);
                        f.removeEventListener("MSPointerCancel", this._pointerCancel, !1);
                        this.map && (f.removeEventListener("mouseover", this._mouseOver, !1),
                        f.removeEventListener("mousemove", this._mouseMove, !1),
                        f.removeEventListener("mouseout", this._mouseOut, !1),
                        f.removeEventListener("mouseleave", this._mouseLeave, !1),
                        f.removeEventListener("mousedown", this._mouseDown, !1),
                        f.removeEventListener("mouseup", this._mouseUp, !1),
                        f.removeEventListener("click", this._mouseClick, !1),
                        f.removeEventListener("mouseenter", this._mouseEnter, !1));
                        clearTimeout(this._tapTimer);
                        this.node = this.map = this._numTouches = this._touches = this._touchIds = this._taps = null
                    }
                });
                w("extend-esri") && (m.PointerEvents = C);
                return C
            })
        },
        "esri/geometry": function() {
            define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q) {
                return {
                    units: C,
                    SpatialReference: y,
                    Geometry: b,
                    Point: w,
                    ScreenPoint: m,
                    Multipoint: l,
                    Polyline: k,
                    Polygon: h,
                    Extent: f,
                    Rect: d,
                    geodesicUtils: a,
                    jsonUtils: c,
                    mathUtils: e,
                    normalizeUtils: n,
                    scaleUtils: t,
                    screenUtils: g,
                    webMercatorUtils: q
                }
            })
        },
        "esri/units": function() {
            define(["dojo/has", "./kernel"], function(C, y) {
                var b = {
                    CENTIMETERS: "esriCentimeters",
                    DECIMAL_DEGREES: "esriDecimalDegrees",
                    DEGREE_MINUTE_SECONDS: "esriDegreeMinuteSeconds",
                    DECIMETERS: "esriDecimeters",
                    FEET: "esriFeet",
                    FEET_US: "esriFeetUS",
                    INCHES: "esriInches",
                    KILOMETERS: "esriKilometers",
                    METERS: "esriMeters",
                    MILES: "esriMiles",
                    MILES_US: "esriMilesUS",
                    MILLIMETERS: "esriMillimeters",
                    NAUTICAL_MILES: "esriNauticalMiles",
                    POINTS: "esriPoints",
                    UNKNOWN: "esriUnknownUnits",
                    YARDS: "esriYards",
                    YARDS_US: "esriYardsUS",
                    ACRES: "esriAcres",
                    ACRES_US: "esriAcresUS",
                    ARES: "esriAres",
                    SQUARE_KILOMETERS: "esriSquareKilometers",
                    SQUARE_MILES: "esriSquareMiles",
                    SQUARE_MILES_US: "esriSquareMilesUS",
                    SQUARE_FEET: "esriSquareFeet",
                    SQUARE_FEET_US: "esriSquareFeetUS",
                    SQUARE_METERS: "esriSquareMeters",
                    HECTARES: "esriHectares",
                    SQUARE_YARDS: "esriSquareYards",
                    SQUARE_YARDS_US: "esriSquareYardsUS",
                    SQUARE_INCHES: "esriSquareInches",
                    SQUARE_MILLIMETERS: "esriSquareMillimeters",
                    SQUARE_CENTIMETERS: "esriSquareCentimeters",
                    SQUARE_DECIMETERS: "esriSquareDecimeters",
                    SQUARE_NAUTICAL_MILES: "esriSquareNauticalMiles",
                    METERS_PER_SECOND: "esriMetersPerSecond",
                    KILOMETERS_PER_HOUR: "esriKilometersPerHour",
                    KNOTS: "esriKnots",
                    FEET_PER_SECOND: "esriFeetPerSecond",
                    MILES_PER_HOUR: "esriMilesPerHour",
                    RADIANS: "esriDURadians"
                };
                C("extend-esri") && (y.Units = b);
                return b
            })
        },
        "esri/geometry/geodesicUtils": function() {
            define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "), function(C, y, b, w, m, l, k, h) {
                function f(x) {
                    return !!(x && x.wkid && q[x.wkid])
                }
                function d(x) {
                    return f(x) ? q[x.wkid] : q[4326]
                }
                function a(x) {
                    var v = x.spatialReference
                      , z = d(v)
                      , u = z.a;
                    z = z.eSq;
                    var p = Math.sqrt(z)
                      , r = Math.sin(x.y * g);
                    return new l(u * x.x * g,0 < z ? u * (1 - z) * (r / (1 - z * r * r) - 1 / (2 * p) * Math.log((1 - p * r) / (1 + p * r))) * .5 : u * r,v)
                }
                function c(x, v, z, u, p) {
                    var r = d(p)
                      , B = r.a
                      , D = r.b;
                    r = r.f;
                    var G = Math.sin(z);
                    z = Math.cos(z);
                    var A = (1 - r) * Math.tan(x);
                    x = 1 / Math.sqrt(1 + A * A);
                    var E = A * x
                      , H = Math.atan2(A, z);
                    A = x * G;
                    var J = A * A
                      , O = 1 - J;
                    B = O * (B * B - D * D) / (D * D);
                    var V = 1 + B / 16384 * (4096 + B * (-768 + B * (320 - 175 * B)))
                      , aa = B / 1024 * (256 + B * (-128 + B * (74 - 47 * B)));
                    B = u / (D * V);
                    for (var da = 2 * Math.PI, ea, Y, ia, qa; 1E-12 < Math.abs(B - da); )
                        ia = Math.cos(2 * H + B),
                        ea = Math.sin(B),
                        Y = Math.cos(B),
                        qa = aa * ea * (ia + aa / 4 * (Y * (-1 + 2 * ia * ia) - aa / 6 * ia * (-3 + 4 * ea * ea) * (-3 + 4 * ia * ia))),
                        da = B,
                        B = u / (D * V) + qa;
                    u = E * ea - x * Y * z;
                    D = r / 16 * O * (4 + r * (4 - 3 * O));
                    return new l((v + (Math.atan2(ea * G, x * Y - E * ea * z) - (1 - D) * r * A * (B + D * ea * (ia + D * Y * (-1 + 2 * ia * ia))))) / g,Math.atan2(E * Y + x * ea * z, (1 - r) * Math.sqrt(J + u * u)) / g,p)
                }
                function e(x, v, z, u, p) {
                    var r = d(p)
                      , B = r.a;
                    p = r.b;
                    var D = r.f
                      , G = u - v
                      , A = Math.atan((1 - D) * Math.tan(x))
                      , E = Math.atan((1 - D) * Math.tan(z))
                      , H = Math.sin(A);
                    A = Math.cos(A);
                    var J = Math.sin(E);
                    E = Math.cos(E);
                    var O = G
                      , V = 1E3;
                    do {
                        var aa = Math.sin(O);
                        var da = Math.cos(O);
                        var ea = Math.sqrt(E * aa * E * aa + (A * J - H * E * da) * (A * J - H * E * da));
                        if (0 === ea)
                            return 0;
                        da = H * J + A * E * da;
                        var Y = Math.atan2(ea, da);
                        var ia = A * E * aa / ea;
                        var qa = 1 - ia * ia;
                        aa = da - 2 * H * J / qa;
                        isNaN(aa) && (aa = 0);
                        var wa = D / 16 * qa * (4 + D * (4 - 3 * qa));
                        var K = O;
                        O = G + (1 - wa) * D * ia * (Y + wa * ea * (aa + wa * da * (-1 + 2 * aa * aa)))
                    } while (1E-12 < Math.abs(O - K) && 0 < --V);
                    if (0 === V)
                        return p = u - v,
                        {
                            azimuth: Math.atan2(Math.sin(p) * Math.cos(z), Math.cos(x) * Math.sin(z) - Math.sin(x) * Math.cos(z) * Math.cos(p)),
                            geodesicDistance: Math.acos(Math.sin(x) * Math.sin(z) + Math.cos(x) * Math.cos(z) * Math.cos(u - v)) * r.radius
                        };
                    x = qa * (B * B - p * p) / (p * p);
                    v = x / 1024 * (256 + x * (-128 + x * (74 - 47 * x)));
                    return {
                        azimuth: Math.atan2(E * Math.sin(O), A * J - H * E * Math.cos(O)),
                        geodesicDistance: p * (1 + x / 16384 * (4096 + x * (-768 + x * (320 - 175 * x)))) * (Y - v * ea * (aa + v / 4 * (da * (-1 + 2 * aa * aa) - v / 6 * aa * (-3 + 4 * ea * ea) * (-3 + 4 * aa * aa)))),
                        reverseAzimuth: Math.atan2(A * Math.sin(O), A * J * Math.cos(O) - H * E)
                    }
                }
                function n(x, v) {
                    if (!(x instanceof k || x instanceof h))
                        throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"),
                        Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
                    var z = x.spatialReference
                      , u = d(z).radius / 1E4;
                    v < u && (v = u);
                    u = x instanceof k;
                    var p = [], r;
                    C.forEach(u ? x.paths : x.rings, function(B) {
                        p.push(r = []);
                        r.push([B[0][0], B[0][1]]);
                        var D, G;
                        var A = B[0][0] * g;
                        var E = B[0][1] * g;
                        for (D = 0; D < B.length - 1; D++) {
                            var H = B[D + 1][0] * g;
                            var J = B[D + 1][1] * g;
                            if (A !== H || E !== J) {
                                J = e(E, A, J, H, z);
                                H = J.azimuth;
                                J = J.geodesicDistance;
                                var O = J / v;
                                if (1 < O) {
                                    for (G = 1; G <= O - 1; G++) {
                                        var V = c(E, A, H, G * v, z);
                                        r.push([V.x, V.y])
                                    }
                                    G = c(E, A, H, (J + Math.floor(O - 1) * v) / 2, z);
                                    r.push([G.x, G.y])
                                }
                                E = c(E, A, H, J, z);
                                r.push([E.x, E.y]);
                                A = E.x * g;
                                E = E.y * g
                            }
                        }
                    });
                    return u ? new k({
                        paths: p,
                        spatialReference: z
                    }) : new h({
                        rings: p,
                        spatialReference: z
                    })
                }
                var t = {
                    esriMeters: 1,
                    esriKilometers: 1E3,
                    esriYards: .9144,
                    esriFeet: .3048,
                    esriMiles: 1609.344,
                    esriNauticalMiles: 1852,
                    esriInches: .0254,
                    esriDecimeters: .1,
                    esriCentimeters: .01,
                    esriMillimeters: .001,
                    esriSquareMeters: 1,
                    esriSquareKilometers: 1E6,
                    esriSquareYards: .83612736,
                    esriSquareFeet: .09290304,
                    esriSquareMiles: 2589988.110336,
                    esriAcres: 4046.8564224,
                    esriHectares: 1E4,
                    esriAres: 100,
                    esriSquareInches: 6.4516E-4,
                    esriSquareMillimeters: 1E-6,
                    esriSquareCentimeters: 1E-4,
                    esriSquareDecimeters: .01
                }
                  , g = Math.PI / 180
                  , q = {
                    4326: {
                        a: 6378137,
                        b: 6356752.31424518,
                        f: 1 / 298.257223563,
                        eSq: .006694379990197414,
                        radius: 6371008.771415059
                    },
                    104900: {
                        a: 2439700,
                        b: 2439700,
                        f: 0,
                        eSq: 0,
                        radius: 2439700
                    },
                    104901: {
                        a: 6051E3,
                        b: 6051E3,
                        f: 0,
                        eSq: 0,
                        radius: 6051E3
                    },
                    104902: {
                        a: 6051800,
                        b: 6051800,
                        f: 0,
                        eSq: 0,
                        radius: 6051800
                    },
                    104903: {
                        a: 1737400,
                        b: 1737400,
                        f: 0,
                        eSq: 0,
                        radius: 1737400
                    },
                    104904: {
                        a: 3393400,
                        b: 3375730,
                        f: 1 / 192.04301075,
                        eSq: .01038722,
                        radius: 3387510
                    },
                    104905: {
                        a: 3396190,
                        b: 3376200,
                        f: 1 / 169.89444722,
                        eSq: .01173737,
                        radius: 3389526.6666666665
                    },
                    104906: {
                        a: 6200,
                        b: 6200,
                        f: 0,
                        eSq: 0,
                        radius: 6200
                    },
                    104907: {
                        a: 11100,
                        b: 11100,
                        f: 0,
                        eSq: 0,
                        radius: 11100
                    },
                    104912: {
                        a: 2409300,
                        b: 2409300,
                        f: 0,
                        eSq: 0,
                        radius: 2409300
                    },
                    104915: {
                        a: 1562090,
                        b: 1562090,
                        f: 0,
                        eSq: 0,
                        radius: 1562090
                    },
                    104916: {
                        a: 2632345,
                        b: 2632345,
                        f: 0,
                        eSq: 0,
                        radius: 2632345
                    },
                    104918: {
                        a: 1821460,
                        b: 1821460,
                        f: 0,
                        eSq: 0,
                        radius: 1821460
                    },
                    104929: {
                        a: 249400,
                        b: 249400,
                        f: 0,
                        eSq: 0,
                        radius: 249400
                    },
                    104943: {
                        a: 2575E3,
                        b: 2575E3,
                        f: 0,
                        eSq: 0,
                        radius: 2575E3
                    },
                    104971: {
                        a: 3396190,
                        b: 3396190,
                        f: 0,
                        eSq: 0,
                        radius: 3396190
                    },
                    104972: {
                        a: 47E4,
                        b: 47E4,
                        f: 0,
                        eSq: 0,
                        radius: 47E4
                    },
                    104973: {
                        a: 255E3,
                        b: 255E3,
                        f: 0,
                        eSq: 0,
                        radius: 255E3
                    },
                    104974: {
                        a: 2439400,
                        b: 2439400,
                        f: 0,
                        eSq: 0,
                        radius: 2439400
                    }
                };
                m = {
                    isSupported: f,
                    getSpheroidInfo: d,
                    geodesicDensify: n,
                    geodesicLengths: function(x, v) {
                        var z = [];
                        C.forEach(x, function(u, p) {
                            var r = 0
                              , B = u.spatialReference;
                            C.forEach(u.paths, function(D, G) {
                                G = 0;
                                var A;
                                for (A = 1; A < D.length; A++) {
                                    var E = D[A - 1][0] * g;
                                    var H = D[A][0] * g;
                                    var J = D[A - 1][1] * g;
                                    var O = D[A][1] * g;
                                    if (J !== O || E !== H)
                                        E = e(J, E, O, H, B),
                                        G += E.geodesicDistance
                                }
                                r += G
                            });
                            r /= t[v];
                            z.push(r)
                        });
                        return z
                    },
                    geodesicAreas: function(x, v) {
                        var z = []
                          , u = [];
                        C.forEach(x, function(p, r) {
                            r = .0015696101447650193 * d(p.spatialReference).radius;
                            z.push(n(p, r))
                        });
                        C.forEach(z, function(p, r) {
                            var B = 0
                              , D = p.spatialReference;
                            C.forEach(p.rings, function(G, A) {
                                A = a(new l(G[0][0],G[0][1],D));
                                var E = a(new l(G[G.length - 1][0],G[G.length - 1][1],D)), H = E.x * A.y - A.x * E.y, J;
                                for (J = 0; J < G.length - 1; J++)
                                    A = a(new l(G[J + 1][0],G[J + 1][1],D)),
                                    E = a(new l(G[J][0],G[J][1],D)),
                                    H += E.x * A.y - A.x * E.y;
                                B += H
                            });
                            B /= t[v];
                            u.push(B / -2)
                        });
                        return u
                    },
                    _unitsDictionary: t,
                    _toEqualAreaPoint: a,
                    _directGeodeticSolver: c,
                    _inverseGeodeticSolver: e
                };
                b("extend-esri") && y.mixin(y.getObject("geometry", !0, w), m);
                return m
            })
        },
        "esri/symbol": function() {
            define("./symbols/Symbol ./symbols/MarkerSymbol ./symbols/SimpleMarkerSymbol ./symbols/PictureMarkerSymbol ./symbols/LineSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/FillSymbol ./symbols/SimpleFillSymbol ./symbols/PictureFillSymbol ./symbols/Font ./symbols/TextSymbol ./symbols/jsonUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                return {
                    Symbol: C,
                    MarkerSymbol: y,
                    SimpleMarkerSymbol: b,
                    PictureMarkerSymbol: w,
                    LineSymbol: m,
                    SimpleLineSymbol: l,
                    CartographicLineSymbol: k,
                    FillSymbol: h,
                    SimpleFillSymbol: f,
                    PictureFillSymbol: d,
                    Font: a,
                    TextSymbol: c,
                    jsonUtils: e
                }
            })
        },
        "esri/renderer": function() {
            define("./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/ClassBreaksRenderer ./renderers/TemporalRenderer ./renderers/SymbolAger ./renderers/TimeClassBreaksAger ./renderers/TimeRampAger ./renderers/StretchRenderer ./renderers/jsonUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                return {
                    Renderer: C,
                    SimpleRenderer: y,
                    UniqueValueRenderer: b,
                    ClassBreaksRenderer: w,
                    TemporalRenderer: m,
                    SymbolAger: l,
                    TimeClassBreaksAger: k,
                    TimeRampAger: h,
                    StretchRenderer: f,
                    jsonUtils: d
                }
            })
        },
        "esri/renderers/Renderer": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                var a = Math.PI;
                C = C(null, {
                    declaredClass: "esri.renderer.Renderer",
                    constructor: function(c) {
                        this._cache = {};
                        if (c && !c.declaredClass) {
                            this.rotationInfo = c.rotationInfo;
                            if (!this.rotationInfo) {
                                var e = c.rotationType
                                  , n = c.rotationExpression;
                                if (e || n)
                                    this.rotationInfo = {
                                        type: e,
                                        expression: n
                                    }
                            }
                            this.setRotationInfo(this.rotationInfo);
                            this.setSizeInfo(this._readSizeInfo(c.sizeInfo));
                            this.setColorInfo(this._readColorInfo(c.colorInfo));
                            this.setOpacityInfo(this._readOpacityInfo(c.transparencyInfo));
                            this.setVisualVariables(this._readVariables(c.visualVariables));
                            this.setAuthoringInfo(c.authoringInfo)
                        }
                        this.getSymbol = y.hitch(this, this.getSymbol)
                    },
                    getSymbol: function(c) {},
                    _readSizeInfo: function(c) {
                        if (c) {
                            var e = c.minSize
                              , n = c.maxSize;
                            e && (c.minSize = "number" === typeof e ? m.pt2px(e) : this._readSizeInfo(e));
                            n && (c.maxSize = "number" === typeof n ? m.pt2px(n) : this._readSizeInfo(n));
                            c.stops && b.forEach(c.stops, function(t) {
                                t.size && "number" === typeof t.size && (t.size = m.pt2px(t.size))
                            })
                        }
                        return c
                    },
                    _readColorInfo: function(c) {
                        c && (b.forEach(c.colors, function(e, n) {
                            y.isArray(e) && (c.colors[n] = k.toDojoColor(e))
                        }),
                        b.forEach(c.stops, function(e, n) {
                            e.color && y.isArray(e.color) && (c.stops[n].color = k.toDojoColor(e.color))
                        }));
                        return c
                    },
                    _readOpacityInfo: function(c) {
                        if (c) {
                            var e = y.mixin({}, c);
                            e.transparencyValues && (e.opacityValues = b.map(e.transparencyValues, function(n) {
                                return 1 - n / 100
                            }),
                            delete e.transparencyValues);
                            e.stops && (e.stops = b.map(e.stops, function(n) {
                                n = y.mixin({}, n);
                                n.opacity = 1 - n.transparency / 100;
                                delete n.transparency;
                                return n
                            }))
                        }
                        return e
                    },
                    _readVariables: function(c) {
                        c && (c = b.map(c, function(e) {
                            "sizeInfo" === e.type ? e = this._readSizeInfo(e) : "colorInfo" === e.type ? e = this._readColorInfo(e) : "transparencyInfo" === e.type && (e = this._readOpacityInfo(e),
                            e.type = "opacityInfo");
                            return e
                        }, this));
                        return c
                    },
                    setAuthoringInfo: function(c) {
                        this.authoringInfo = c
                    },
                    setRotationInfo: function(c) {
                        if (c = this.rotationInfo = "string" === typeof c ? {
                            field: c
                        } : c) {
                            if (c.expression && !y.isFunction(c.expression) && !c.field) {
                                var e = c.expression.match(this.rotationRE);
                                e && e[1] && (c.field = e[1])
                            }
                            c.rotationType = c.type
                        }
                        this._cache.rotationInfo = this._processRotationInfo(c);
                        return this
                    },
                    rotationRE: /^\[([^\]]+)\]$/i,
                    _processRotationInfo: function(c) {
                        c && !c.rotationType && (c.rotationType = "geographic");
                        return this._createCache(c)
                    },
                    getRotationAngle: function(c, e) {
                        var n = this._getVarInfo(e && e.rotationInfo, "rotationInfo");
                        e = n.variable;
                        n = this._cache[n.cacheKey];
                        var t = "arithmetic" === this._getRotationType(e)
                          , g = n && n.hasExpr
                          , q = null;
                        if (e.field || g)
                            q = this._getDataValue(c, e, null, n),
                            null != q && (q = (q + (t ? -90 : 0)) * (t ? -1 : 1));
                        return q
                    },
                    _getRotationType: function(c) {
                        return c && ("rotationInfo" === c.type ? c.rotationType : c.type)
                    },
                    _getDataValue: function(c, e, n, t, g) {
                        t || (t = this._getVarInfo(e, n),
                        e = t.variable,
                        t = this._cache[t.cacheKey],
                        "sizeInfo" === n && (t = t.root));
                        return c._getDataValue(e, t, f, g)
                    },
                    setVisualVariables: function(c) {
                        var e = this._cache;
                        b.forEach(this.visualVariables, function(n, t) {
                            e.hasOwnProperty(t) && (e[t] = null)
                        }, this);
                        this.visualVariables = c;
                        b.some(c, function(n) {
                            return !!n.target
                        }) && c.sort(function(n, t) {
                            return n.target === t.target ? 0 : n.target ? 1 : -1
                        });
                        b.forEach(c, function(n, t) {
                            "colorInfo" === n.type ? e[t] = this._processColorInfo(n) : "opacityInfo" === n.type ? e[t] = this._processOpacityInfo(n) : "sizeInfo" === n.type ? e[t] = this._processSizeInfo(n) : "rotationInfo" === n.type && (e[t] = this._processRotationInfo(n))
                        }, this);
                        return this
                    },
                    getVisualVariableValues: function(c) {
                        var e = this.visualVariables, n;
                        e && (n = b.map(e, function(t) {
                            switch (t.type) {
                            case "sizeInfo":
                                var g = this.getSize(c, {
                                    sizeInfo: t
                                });
                                break;
                            case "colorInfo":
                                g = this.getColor(c, {
                                    colorInfo: t
                                });
                                break;
                            case "opacityInfo":
                                g = this.getOpacity(c, {
                                    opacityInfo: t
                                });
                                break;
                            case "rotationInfo":
                                g = this.getRotationAngle(c, {
                                    rotationInfo: t
                                })
                            }
                            return {
                                variable: t,
                                value: g
                            }
                        }, this));
                        return n
                    },
                    getFieldsUsedInExpressions: function() {
                        var c = [];
                        b.forEach(this._getCacheObjects(), function(e) {
                            e.syntaxTree && (c = c.concat(f.extractFieldNames(e.syntaxTree)))
                        });
                        c.sort();
                        return b.filter(c, function(e, n) {
                            return 0 === n || c[n - 1] !== e
                        })
                    },
                    hasGeometryOperations: function() {
                        return b.some(this._getCacheObjects(), function(c) {
                            return c.syntaxTree ? f.hasGeometryOperations(c.syntaxTree) : !1
                        })
                    },
                    initializeArcadeEngine: function() {
                        var c = [];
                        b.forEach(this._getCacheObjects(), function(e) {
                            e.syntaxTree && c.push(e.syntaxTree)
                        });
                        return d.initialize(c)
                    },
                    hasVisualVariables: function(c, e) {
                        return c ? !!this.getVisualVariablesForType(c, e) : !!(this.getVisualVariablesForType("sizeInfo", e) || this.getVisualVariablesForType("colorInfo", e) || this.getVisualVariablesForType("opacityInfo", e) || this.getVisualVariablesForType("rotationInfo", e))
                    },
                    getVisualVariablesForType: function(c, e) {
                        var n = this.visualVariables;
                        if (!e && this[c]) {
                            "rotationInfo" === c && (this[c].rotationType = this[c].type);
                            var t = [this[c]]
                        } else
                            n && (t = b.filter(n, function(g) {
                                return g.type === c && ("string" === typeof e ? g.target === e : !1 === e ? !g.target : !0)
                            })) && 0 === t.length && (t = void 0);
                        return t
                    },
                    setSizeInfo: function(c) {
                        this.sizeInfo = this.proportionalSymbolInfo = c;
                        this._cache.sizeInfo = this._processSizeInfo(c);
                        return this
                    },
                    _processSizeInfo: function(c) {
                        return c && {
                            root: this._createCache(c),
                            minSize: this._createCache(c.minSize),
                            maxSize: this._createCache(c.maxSize)
                        }
                    },
                    _convertExpressionToArcade: function(c) {
                        c && c.expression && (c.valueExpression = "$view.scale")
                    },
                    _getVarInfo: function(c, e) {
                        if (c && c.type === e) {
                            var n = b.indexOf(this.visualVariables, c);
                            c = this.visualVariables[n]
                        } else
                            n = e,
                            c = this[e];
                        return {
                            variable: c,
                            cacheKey: n
                        }
                    },
                    setProportionalSymbolInfo: function(c) {
                        this.setSizeInfo(c);
                        return this
                    },
                    getSize: function(c, e) {
                        var n = this._getVarInfo(e && e.sizeInfo, "sizeInfo")
                          , t = n.variable;
                        n = this._cache[n.cacheKey];
                        var g = null;
                        if (t) {
                            var q = t.minSize;
                            g = t.maxSize;
                            q = "object" === typeof q && q ? this._getSize(c, q, n && n.minSize, e) : q;
                            g = "object" === typeof g && g ? this._getSize(c, g, n && n.maxSize, e) : g;
                            g = this._getSize(c, t, n && n.root, e, [q, g])
                        }
                        return g
                    },
                    _getSize: function(c, e, n, t, g) {
                        var q = e.stops
                          , x = 0
                          , v = n && n.hasExpr
                          , z = n && n.ipData
                          , u = n && n.isScaleDriven
                          , p = "object" === typeof c && !!c
                          , r = "number" === typeof c ? c : null;
                        if (e.field || u || v) {
                            var B = t && t.scale;
                            v = g ? g[0] : e.minSize;
                            g = g ? g[1] : e.maxSize;
                            var D = e.minDataValue
                              , G = e.maxDataValue
                              , A = e.valueUnit || "unknown"
                              , E = e.valueRepresentation
                              , H = e.scaleBy
                              , J = t && t.shape;
                            u ? r = B : "number" !== typeof r && p && (r = this._getDataValue(c, e, null, n));
                            if (!this._isValidNumber(r))
                                return null;
                            if (q)
                                v = this._lookupData(r, z),
                                r = v[0],
                                g = v[1],
                                r === g ? x = q[r].size : (r = q[r].size,
                                q = q[g].size,
                                x = r + (q - r) * v[2]);
                            else if (null != v && null != g && null != D && null != G)
                                r <= D ? x = v : r >= G ? x = g : (q = (r - D) / (G - D),
                                "area" === H && J ? (v = (r = "circle" === J) ? a * Math.pow(v / 2, 2) : v * v,
                                q = v + q * ((r ? a * Math.pow(g / 2, 2) : g * g) - v),
                                x = r ? 2 * Math.sqrt(q / a) : Math.sqrt(q)) : x = v + q * (g - v));
                            else if ("unknown" === A)
                                null != v && null != D && (v && D ? (q = r / D,
                                x = "circle" === J ? 2 * Math.sqrt(q * Math.pow(v / 2, 2)) : "square" === J || "diamond" === J || "image" === J ? Math.sqrt(q * Math.pow(v, 2)) : q * v) : x = r + (v || D),
                                x = x < v ? v : x,
                                null != g && x > g && (x = g));
                            else {
                                q = (t && t.resolution ? t.resolution : 1) * this._meterIn[A];
                                if ("area" === E)
                                    x = Math.sqrt(r / a) / q,
                                    x *= 2;
                                else if (x = r / q,
                                "radius" === E || "distance" === E)
                                    x *= 2;
                                null != v && x < v && (x = v);
                                null != g && x > g && (x = g)
                            }
                        } else
                            x = q && q[0] && q[0].size,
                            null == x && (x = e.minSize);
                        return x = isNaN(x) ? 0 : x
                    },
                    getSizeRangeAtScale: function(c, e) {
                        c = this._getVarInfo(c, "sizeInfo");
                        var n = this._cache[c.cacheKey]
                          , t = {
                            scale: e
                        };
                        if ((c = c.variable) && e) {
                            var g = c.minSize;
                            e = c.maxSize;
                            var q = c.stops;
                            q && q.length ? (c = q[0].size,
                            n = q[q.length - 1].size) : (c = "object" === typeof g && g ? this._getSize({}, g, n && n.minSize, t) : g,
                            n = "object" === typeof e && e ? this._getSize({}, e, n && n.maxSize, t) : e);
                            if (null != c || null != n) {
                                if (c > n) {
                                    var x = n;
                                    n = c;
                                    c = x
                                }
                                x = {
                                    minSize: c,
                                    maxSize: n
                                }
                            }
                        }
                        return x
                    },
                    setColorInfo: function(c) {
                        this.colorInfo = c;
                        this._cache.colorInfo = this._processColorInfo(c);
                        return this
                    },
                    _createCache: function(c, e) {
                        if (e = h.createAttributeCache(c, e))
                            e.ipData = this._interpolateData(c);
                        return e
                    },
                    _getCacheObjects: function(c) {
                        var e;
                        c = c || this._cache;
                        var n = [];
                        for (e in c) {
                            var t = c[e];
                            c.hasOwnProperty(e) && t && "object" === typeof t && (t.hasOwnProperty("idSource") ? n.push(t) : n = n.concat(this._getCacheObjects(t)))
                        }
                        return n
                    },
                    _processColorInfo: function(c) {
                        c && (b.forEach(c.colors, function(e, n) {
                            y.isArray(e) && (c.colors[n] = new k(e))
                        }),
                        b.forEach(c.stops, function(e, n) {
                            e.color && y.isArray(e.color) && (c.stops[n].color = new k(e.color))
                        }));
                        return this._createCache(c)
                    },
                    getColor: function(c, e) {
                        e = this._getVarInfo(e && e.colorInfo, "colorInfo");
                        return this._getColorComponent(c, e.variable, this._cache[e.cacheKey])
                    },
                    setOpacityInfo: function(c) {
                        this.opacityInfo = c;
                        this._cache.opacityInfo = this._processOpacityInfo(c);
                        return this
                    },
                    _processOpacityInfo: function(c) {
                        return this._createCache(c)
                    },
                    getOpacity: function(c, e) {
                        e = this._getVarInfo(e && e.opacityInfo, "opacityInfo");
                        return this._getColorComponent(c, e.variable, this._cache[e.cacheKey], !0)
                    },
                    _getColorComponent: function(c, e, n, t, g) {
                        var q = "number" === typeof c ? c : null, x = n && n.hasExpr, v = n && n.ipData, z;
                        e && e.field || x ? ("number" !== typeof q && "object" === typeof c && c && (q = this._getDataValue(c, e, null, n)),
                        this._isValidNumber(q) || (q = null),
                        null != q && (z = t ? this._getOpacity(q, e, v) : this._getColor(q, e, v))) : e && (c = e.stops,
                        t ? (z = c && c[0] && c[0].opacity,
                        null == z && (z = e.opacityValues && e.opacityValues[0])) : z = c && c[0] && c[0].color || e.colors && e.colors[0]);
                        g && (g.data = q,
                        g.value = z);
                        return g || z
                    },
                    _isValidNumber: function(c) {
                        return "number" === typeof c && !isNaN(c) && Infinity !== c && -Infinity !== c
                    },
                    _interpolateData: function(c) {
                        if (c)
                            if (c.colors || c.opacityValues) {
                                var e = (c.colors || c.opacityValues).length
                                  , n = c.minDataValue
                                  , t = (c.maxDataValue - n) / (e - 1);
                                var g = [];
                                for (c = 0; c < e; c++)
                                    g[c] = n + c * t
                            } else
                                c.stops && (g = b.map(c.stops, function(q) {
                                    return q.value
                                }));
                        return g
                    },
                    _getOpacity: function(c, e, n) {
                        c = this._lookupData(c, n);
                        e = e || this.opacityInfo;
                        if (c) {
                            n = c[0];
                            var t = c[1];
                            n === t ? t = this._getOpacValue(e, n) : (n = this._getOpacValue(e, n),
                            e = this._getOpacValue(e, t),
                            t = n + (e - n) * c[2])
                        }
                        return t
                    },
                    _getOpacValue: function(c, e) {
                        return c.opacityValues ? c.opacityValues[e] : c.stops[e].opacity
                    },
                    _getColor: function(c, e, n) {
                        c = this._lookupData(c, n);
                        e = e || this.colorInfo;
                        if (c) {
                            var t = c[0];
                            n = c[1];
                            t = t === n ? this._getColorObj(e, t) : k.blendColors(this._getColorObj(e, t), this._getColorObj(e, n), c[2])
                        }
                        return t
                    },
                    _getColorObj: function(c, e) {
                        return c.colors ? c.colors[e] : c.stops[e].color
                    },
                    _lookupData: function(c, e) {
                        if (e) {
                            var n = 0
                              , t = e.length - 1;
                            b.some(e, function(q, x) {
                                if (c < q)
                                    return t = x,
                                    !0;
                                n = x;
                                return !1
                            });
                            var g = [n, t, (c - e[n]) / (e[t] - e[n])]
                        }
                        return g
                    },
                    _meterIn: {
                        inches: 1 / .0254,
                        feet: 1 / .3048,
                        yards: 1 / .9144,
                        miles: 1 / 1609.344,
                        "nautical-miles": 1 / 1852,
                        millimeters: 1E3,
                        centimeters: 100,
                        decimeters: 10,
                        meters: 1,
                        kilometers: .001,
                        "decimal-degrees": 180 / 20015077
                    },
                    _writeSizeInfo: function(c) {
                        if (c) {
                            c = y.mixin({}, c);
                            this._convertExpressionToArcade(c);
                            var e = c.minSize
                              , n = c.maxSize;
                            e && (c.minSize = "number" === typeof e ? m.px2pt(e) : this._writeSizeInfo(e));
                            n && (c.maxSize = "number" === typeof n ? m.px2pt(n) : this._writeSizeInfo(n));
                            if (e = c.legendOptions)
                                if (c.legendOptions = y.mixin({}, e),
                                e = e.customValues)
                                    c.legendOptions.customValues = e.slice(0);
                            c.stops && (c.stops = b.map(c.stops, function(t) {
                                t = y.mixin({}, t);
                                t.size && "number" === typeof t.size && (t.size = m.px2pt(t.size));
                                return t
                            }))
                        }
                        return c
                    },
                    _writeColorInfo: function(c) {
                        c && (c = y.mixin({}, c),
                        c.colors && (c.colors = b.map(c.colors, function(e) {
                            return k.toJsonColor(e)
                        })),
                        c.stops && (c.stops = b.map(c.stops, function(e) {
                            e = y.mixin({}, e);
                            e.color && (e.color = k.toJsonColor(e.color));
                            return e
                        })),
                        c.legendOptions && (c.legendOptions = y.mixin({}, c.legendOptions)));
                        return c
                    },
                    _writeOpacityInfo: function(c) {
                        if (c) {
                            var e = y.mixin({}, c);
                            e.opacityValues && (e.transparencyValues = b.map(e.opacityValues, function(n) {
                                return 100 * (1 - n)
                            }),
                            delete e.opacityValues);
                            e.stops && (e.stops = b.map(e.stops, function(n) {
                                n = y.mixin({}, n);
                                n.transparency = 100 * (1 - n.opacity);
                                delete n.opacity;
                                return n
                            }));
                            e.legendOptions && (e.legendOptions = y.mixin({}, e.legendOptions))
                        }
                        return e
                    },
                    toJson: function(c) {
                        var e = this.visualVariables, n = y.clone(this.authoringInfo), t = c && c.useLegacyRotationProperties, g = (c = (c = this.getVisualVariablesForType("rotationInfo", !1)) && c[0]) && c.field, q;
                        c && (c === this.rotationInfo || t) && (q = c.expression || g && (y.isFunction(g) ? g : "[" + g + "]"));
                        e && (e = b.map(e, function(x) {
                            "sizeInfo" === x.type ? x = this._writeSizeInfo(x) : "colorInfo" === x.type ? x = this._writeColorInfo(x) : "opacityInfo" === x.type ? (x = this._writeOpacityInfo(x),
                            x.type = "transparencyInfo") : "rotationInfo" === x.type && (x = t ? null : y.mixin({}, x));
                            return x
                        }, this),
                        e = b.filter(e, function(x) {
                            return null != x
                        }));
                        n && b.forEach(n.visualVariables, function(x) {
                            "opacityInfo" === x.type && (x.type = "transparencyInfo")
                        });
                        return {
                            rotationType: q && (this._getRotationType(c) || "geographic"),
                            rotationExpression: q,
                            colorInfo: this._writeColorInfo(this.colorInfo),
                            transparencyInfo: this._writeOpacityInfo(this.opacityInfo),
                            sizeInfo: this._writeSizeInfo(this.sizeInfo),
                            visualVariables: e,
                            authoringInfo: n
                        }
                    }
                });
                w("extend-esri") && y.setObject("renderer.Renderer", C, l);
                return C
            })
        },
        "esri/layers/support/attributeUtils": function() {
            define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "), function(C, y, b, w, m, l) {
                var k = {
                    viewScaleRE: /^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,
                    getAttributeId: function(h) {
                        return "string" === typeof h ? w(h, b.outputTypes.Hex) : null
                    },
                    getAttributeIdSource: function(h) {
                        if (!h)
                            return null;
                        var f = h.field
                          , d = h.valueExpression
                          , a = null;
                        if (d)
                            a = d;
                        else if (C.isFunction(f))
                            a = f.toString();
                        else if (f) {
                            var c = (d = h.normalizationField) ? "field" : h.normalizationType;
                            h = parseFloat(h.normalizationTotal);
                            c && (c = c.toLowerCase(),
                            a = f.toLowerCase() + ",norm:" + c,
                            d ? a += "," + d.toLowerCase() : "percent-of-total" === c && (f = h,
                            "number" === typeof f && !isNaN(f) && Infinity !== f && -Infinity !== f && 0 !== h || (h = null),
                            a += "," + h))
                        }
                        return a
                    },
                    createAttributeCache: function(h, f) {
                        if (!h)
                            return null;
                        var d = h.valueExpression
                          , a = l.createSyntaxTree(d)
                          , c = k.getAttributeIdSource(h);
                        return {
                            attributeInfo: h,
                            isNumeric: !f,
                            idSource: c,
                            id: k.getAttributeId(c),
                            hasExpr: !!d,
                            compiledFunc: l.createFunction(a),
                            syntaxTree: a,
                            isScaleDriven: !!h.expression || k.viewScaleRE.test(d),
                            dependsOnView: a ? l.dependsOnView(a) : !1,
                            dependsOnGeometry: a ? l.hasGeometryOperations(a) : !1,
                            isJSFunc: C.isFunction(h.field)
                        }
                    }
                };
                y("extend-esri") && C.setObject("layers.support.attributeUtils", k, m);
                return k
            })
        },
        "dojox/encoding/digests/_base": function() {
            define(["dojo/_base/lang"], function(C) {
                C = C.getObject("dojox.encoding.digests", !0);
                C.outputTypes = {
                    Base64: 0,
                    Hex: 1,
                    String: 2,
                    Raw: 3
                };
                C.addWords = function(y, b) {
                    var w = (y & 65535) + (b & 65535);
                    return (y >> 16) + (b >> 16) + (w >> 16) << 16 | w & 65535
                }
                ;
                C.stringToWord = function(y) {
                    for (var b = [], w = 0, m = 8 * y.length; w < m; w += 8)
                        b[w >> 5] |= (y.charCodeAt(w / 8) & 255) << w % 32;
                    return b
                }
                ;
                C.wordToString = function(y) {
                    for (var b = [], w = 0, m = 32 * y.length; w < m; w += 8)
                        b.push(String.fromCharCode(y[w >> 5] >>> w % 32 & 255));
                    return b.join("")
                }
                ;
                C.wordToHex = function(y) {
                    for (var b = [], w = 0, m = 4 * y.length; w < m; w++)
                        b.push("0123456789abcdef".charAt(y[w >> 2] >> w % 4 * 8 + 4 & 15) + "0123456789abcdef".charAt(y[w >> 2] >> w % 4 * 8 & 15));
                    return b.join("")
                }
                ;
                C.wordToBase64 = function(y) {
                    for (var b = [], w = 0, m = 4 * y.length; w < m; w += 3)
                        for (var l = (y[w >> 2] >> w % 4 * 8 & 255) << 16 | (y[w + 1 >> 2] >> (w + 1) % 4 * 8 & 255) << 8 | y[w + 2 >> 2] >> (w + 2) % 4 * 8 & 255, k = 0; 4 > k; k++)
                            8 * w + 6 * k > 32 * y.length ? b.push("\x3d") : b.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l >> 6 * (3 - k) & 63));
                    return b.join("")
                }
                ;
                C.stringToUtf8 = function(y) {
                    for (var b = "", w = -1, m, l; ++w < y.length; )
                        m = y.charCodeAt(w),
                        l = w + 1 < y.length ? y.charCodeAt(w + 1) : 0,
                        55296 <= m && 56319 >= m && 56320 <= l && 57343 >= l && (m = 65536 + ((m & 1023) << 10) + (l & 1023),
                        w++),
                        127 >= m ? b += String.fromCharCode(m) : 2047 >= m ? b += String.fromCharCode(192 | m >>> 6 & 31, 128 | m & 63) : 65535 >= m ? b += String.fromCharCode(224 | m >>> 12 & 15, 128 | m >>> 6 & 63, 128 | m & 63) : 2097151 >= m && (b += String.fromCharCode(240 | m >>> 18 & 7, 128 | m >>> 12 & 63, 128 | m >>> 6 & 63, 128 | m & 63));
                    return b
                }
                ;
                return C
            })
        },
        "dojox/encoding/digests/MD5": function() {
            define(["./_base"], function(C) {
                function y(h, f) {
                    return h << f | h >>> 32 - f
                }
                function b(h, f, d, a, c, e) {
                    return C.addWords(y(C.addWords(C.addWords(f, h), C.addWords(a, e)), c), d)
                }
                function w(h, f, d, a, c, e, n) {
                    return b(f & d | ~f & a, h, f, c, e, n)
                }
                function m(h, f, d, a, c, e, n) {
                    return b(f & a | d & ~a, h, f, c, e, n)
                }
                function l(h, f, d, a, c, e, n) {
                    return b(d ^ (f | ~a), h, f, c, e, n)
                }
                function k(h, f) {
                    h[f >> 5] |= 128 << f % 32;
                    h[(f + 64 >>> 9 << 4) + 14] = f;
                    f = 1732584193;
                    for (var d = -271733879, a = -1732584194, c = 271733878, e = 0; e < h.length; e += 16) {
                        var n = f
                          , t = d
                          , g = a
                          , q = c;
                        f = w(f, d, a, c, h[e + 0], 7, -680876936);
                        c = w(c, f, d, a, h[e + 1], 12, -389564586);
                        a = w(a, c, f, d, h[e + 2], 17, 606105819);
                        d = w(d, a, c, f, h[e + 3], 22, -1044525330);
                        f = w(f, d, a, c, h[e + 4], 7, -176418897);
                        c = w(c, f, d, a, h[e + 5], 12, 1200080426);
                        a = w(a, c, f, d, h[e + 6], 17, -1473231341);
                        d = w(d, a, c, f, h[e + 7], 22, -45705983);
                        f = w(f, d, a, c, h[e + 8], 7, 1770035416);
                        c = w(c, f, d, a, h[e + 9], 12, -1958414417);
                        a = w(a, c, f, d, h[e + 10], 17, -42063);
                        d = w(d, a, c, f, h[e + 11], 22, -1990404162);
                        f = w(f, d, a, c, h[e + 12], 7, 1804603682);
                        c = w(c, f, d, a, h[e + 13], 12, -40341101);
                        a = w(a, c, f, d, h[e + 14], 17, -1502002290);
                        d = w(d, a, c, f, h[e + 15], 22, 1236535329);
                        f = m(f, d, a, c, h[e + 1], 5, -165796510);
                        c = m(c, f, d, a, h[e + 6], 9, -1069501632);
                        a = m(a, c, f, d, h[e + 11], 14, 643717713);
                        d = m(d, a, c, f, h[e + 0], 20, -373897302);
                        f = m(f, d, a, c, h[e + 5], 5, -701558691);
                        c = m(c, f, d, a, h[e + 10], 9, 38016083);
                        a = m(a, c, f, d, h[e + 15], 14, -660478335);
                        d = m(d, a, c, f, h[e + 4], 20, -405537848);
                        f = m(f, d, a, c, h[e + 9], 5, 568446438);
                        c = m(c, f, d, a, h[e + 14], 9, -1019803690);
                        a = m(a, c, f, d, h[e + 3], 14, -187363961);
                        d = m(d, a, c, f, h[e + 8], 20, 1163531501);
                        f = m(f, d, a, c, h[e + 13], 5, -1444681467);
                        c = m(c, f, d, a, h[e + 2], 9, -51403784);
                        a = m(a, c, f, d, h[e + 7], 14, 1735328473);
                        d = m(d, a, c, f, h[e + 12], 20, -1926607734);
                        f = b(d ^ a ^ c, f, d, h[e + 5], 4, -378558);
                        c = b(f ^ d ^ a, c, f, h[e + 8], 11, -2022574463);
                        a = b(c ^ f ^ d, a, c, h[e + 11], 16, 1839030562);
                        d = b(a ^ c ^ f, d, a, h[e + 14], 23, -35309556);
                        f = b(d ^ a ^ c, f, d, h[e + 1], 4, -1530992060);
                        c = b(f ^ d ^ a, c, f, h[e + 4], 11, 1272893353);
                        a = b(c ^ f ^ d, a, c, h[e + 7], 16, -155497632);
                        d = b(a ^ c ^ f, d, a, h[e + 10], 23, -1094730640);
                        f = b(d ^ a ^ c, f, d, h[e + 13], 4, 681279174);
                        c = b(f ^ d ^ a, c, f, h[e + 0], 11, -358537222);
                        a = b(c ^ f ^ d, a, c, h[e + 3], 16, -722521979);
                        d = b(a ^ c ^ f, d, a, h[e + 6], 23, 76029189);
                        f = b(d ^ a ^ c, f, d, h[e + 9], 4, -640364487);
                        c = b(f ^ d ^ a, c, f, h[e + 12], 11, -421815835);
                        a = b(c ^ f ^ d, a, c, h[e + 15], 16, 530742520);
                        d = b(a ^ c ^ f, d, a, h[e + 2], 23, -995338651);
                        f = l(f, d, a, c, h[e + 0], 6, -198630844);
                        c = l(c, f, d, a, h[e + 7], 10, 1126891415);
                        a = l(a, c, f, d, h[e + 14], 15, -1416354905);
                        d = l(d, a, c, f, h[e + 5], 21, -57434055);
                        f = l(f, d, a, c, h[e + 12], 6, 1700485571);
                        c = l(c, f, d, a, h[e + 3], 10, -1894986606);
                        a = l(a, c, f, d, h[e + 10], 15, -1051523);
                        d = l(d, a, c, f, h[e + 1], 21, -2054922799);
                        f = l(f, d, a, c, h[e + 8], 6, 1873313359);
                        c = l(c, f, d, a, h[e + 15], 10, -30611744);
                        a = l(a, c, f, d, h[e + 6], 15, -1560198380);
                        d = l(d, a, c, f, h[e + 13], 21, 1309151649);
                        f = l(f, d, a, c, h[e + 4], 6, -145523070);
                        c = l(c, f, d, a, h[e + 11], 10, -1120210379);
                        a = l(a, c, f, d, h[e + 2], 15, 718787259);
                        d = l(d, a, c, f, h[e + 9], 21, -343485551);
                        f = C.addWords(f, n);
                        d = C.addWords(d, t);
                        a = C.addWords(a, g);
                        c = C.addWords(c, q)
                    }
                    return [f, d, a, c]
                }
                C.MD5 = function(h, f) {
                    f = f || C.outputTypes.Base64;
                    h = k(C.stringToWord(h), 8 * h.length);
                    switch (f) {
                    case C.outputTypes.Raw:
                        return h;
                    case C.outputTypes.Hex:
                        return C.wordToHex(h);
                    case C.outputTypes.String:
                        return C.wordToString(h);
                    default:
                        return C.wordToBase64(h)
                    }
                }
                ;
                C.MD5._hmac = function(h, f, d) {
                    d = d || C.outputTypes.Base64;
                    var a = C.stringToWord(f);
                    16 < a.length && (a = k(a, 8 * f.length));
                    var c = [];
                    f = [];
                    for (var e = 0; 16 > e; e++)
                        c[e] = a[e] ^ 909522486,
                        f[e] = a[e] ^ 1549556828;
                    h = k(c.concat(C.stringToWord(h)), 512 + 8 * h.length);
                    h = k(f.concat(h), 640);
                    switch (d) {
                    case C.outputTypes.Raw:
                        return h;
                    case C.outputTypes.Hex:
                        return C.wordToHex(h);
                    case C.outputTypes.String:
                        return C.wordToString(h);
                    default:
                        return C.wordToBase64(h)
                    }
                }
                ;
                return C.MD5
            })
        },
        "esri/support/expressionUtils": function() {
            define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "), function(C, y, b, w, m, l, k) {
                var h = {
                    vars: {
                        $feature: "any",
                        $view: "any"
                    }
                }
                  , f = /^\$feature\./i
                  , d = {
                    _getSyntaxTree: function(a) {
                        return "string" === typeof a ? d.createSyntaxTree(a) : a
                    },
                    createSyntaxTree: function(a) {
                        try {
                            var c = a ? l.parseScript(a) : null
                        } catch (e) {
                            c = null
                        }
                        return c
                    },
                    createFunction: function(a, c) {
                        c = c || C.clone(h);
                        a = d._getSyntaxTree(a);
                        try {
                            var e = a ? l.compileScript(a, c) : null
                        } catch (n) {
                            console.log("expressionUtils.createFunction: compilation failed. " + (n.message || "")),
                            e = null
                        }
                        return e
                    },
                    createExecContext: function(a, c) {
                        return {
                            vars: {
                                $feature: a ? k.createFromGraphic(a) : new k,
                                $view: c && c.view
                            },
                            spatialReference: c && c.sr
                        }
                    },
                    evalSyntaxTree: function(a, c) {
                        try {
                            var e = l.executeScript(a, c)
                        } catch (n) {
                            e = null
                        }
                        return e
                    },
                    executeFunction: function(a, c) {
                        try {
                            var e = a ? a(c) : null
                        } catch (n) {
                            e = null
                        }
                        return e
                    },
                    executeAsyncFunction: function(a, c) {
                        try {
                            var e = a ? a(c) : (new w).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))
                        } catch (n) {
                            e = (new w).reject(n)
                        }
                        return e
                    },
                    extractFieldNames: function(a) {
                        a = d._getSyntaxTree(a);
                        a = l.extractFieldLiterals(a);
                        var c = [];
                        y.forEach(a, function(e) {
                            f.test(e) && (e = e.replace(f, ""),
                            c.push(e))
                        });
                        c.sort();
                        return y.filter(c, function(e, n) {
                            return 0 === n || c[n - 1] !== e
                        })
                    },
                    dependsOnView: function(a) {
                        return d.hasVariable(a, "$view")
                    },
                    hasGeometryFunctions: function(a) {
                        return (a = d._getSyntaxTree(a)) ? l.scriptTouchesGeometry(a) : !1
                    },
                    hasGeometryOperations: function(a) {
                        return (a = d._getSyntaxTree(a)) ? l.scriptUsesGeometryEngine(a) : !1
                    },
                    enableGeometryOperations: function() {
                        return l.enableGeometrySupport()
                    },
                    hasVariable: function(a, c) {
                        return (a = d._getSyntaxTree(a)) ? l.referencesMember(a, c) : !1
                    },
                    hasFunction: function(a, c) {
                        return (a = d._getSyntaxTree(a)) ? l.referencesFunction(a, c) : !1
                    },
                    createFeatureSetFromLayer: function(a, c) {
                        c = c || {};
                        var e = l.featureSetUtils();
                        return e ? e.constructFeatureSet(a, c.spatialReference, c.outFields, c.returnGeometry, c.cache) : null
                    },
                    createFeatureSetFromLayerUrl: function(a, c) {
                        c = c || {};
                        var e = l.featureSetUtils();
                        return e ? e.constructFeatureSetFromUrlRaw(a, c.spatialReference, c.outFields, c.returnGeometry, c.cache) : null
                    },
                    createFeatureSetCollectionFromMap: function(a, c) {
                        var e = l.featureSetUtils();
                        return e ? e.createFeatureSetCollectionFromMap(a, a.spatialReference, c && c.cache) : null
                    },
                    createFeatureSetCollectionFromServiceUrl: function(a, c) {
                        c = c || {};
                        var e = l.featureSetUtils();
                        return e ? e.createFeatureSetCollectionFromService(a, c.spatialReference, c.cache) : null
                    },
                    hasFeatureSetOperations: function(a) {
                        return (a = d._getSyntaxTree(a)) ? l.scriptUsesFeatureSet(a) : !1
                    },
                    enableFeatureSetOperations: function() {
                        return l.enableFeatureSetSupport().then(function() {
                            var a = l.featureSetUtils();
                            a && a.initialiseMetaDataCache()
                        })
                    },
                    enableAsyncOperations: function() {
                        return l.enableAsyncSupport()
                    }
                };
                b("extend-esri") && C.setObject("support.expressionUtils", d, m);
                return d
            })
        },
        "esri/arcade/arcade": function() {
            define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils ../moment".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                function a(V, aa) {
                    if (null === G)
                        throw Error("Async Arcade must be enabled for this script");
                    return h("csp-restrictions") || !1 === r ? function(da) {
                        return G.executeScript(V, da)
                    }
                    : b.compileScript(V, aa, !0)
                }
                function c(V, aa) {
                    void 0 === aa && (aa = []);
                    return l.parseScript(V, aa)
                }
                function e(V, aa) {
                    if (!0 === aa.useAsync || !0 === V.isAsync) {
                        if (null === G)
                            throw Error("Async Arcade must be enabled for this script");
                        return G.executeScript(V, aa)
                    }
                    return w.executeScript(V, aa)
                }
                function n(V, aa) {
                    return w.referencesMember(V, aa)
                }
                function t(V, aa) {
                    void 0 === aa && (aa = []);
                    void 0 === V.usesGeometry && k.findScriptDependencies(V, aa);
                    return !0 === V.usesGeometry
                }
                function g() {
                    return E ? E : E = f.create(function(V, aa) {
                        C(["../geometry/geometryEngine", "./functions/geomsync"], function(da, ea) {
                            D = !0;
                            ea.setGeometryEngine(da);
                            V(!0)
                        }, function(da) {
                            aa(da)
                        })
                    })
                }
                function q() {
                    return null !== H ? H : H = b.enableAsyncSupport().then(function() {
                        return f.create(function(V, aa) {
                            C(["./arcadeAsyncRuntime"], function(da) {
                                try {
                                    G = da;
                                    da = 0;
                                    for (var ea = A; da < ea.length; da++) {
                                        var Y = ea[da];
                                        G.extend(Y);
                                        b.extend(Y, "async")
                                    }
                                    A = null;
                                    V(!0)
                                } catch (ia) {
                                    aa(ia)
                                }
                            }, aa)
                        })
                    })
                }
                function x() {
                    return G ? !0 : !1
                }
                function v() {
                    return J ? J : J = q().then(function() {
                        return f.create(function(V, aa) {
                            C(["./featureSetUtils", "./functions/featuresetbase", "./functions/featuresetgeom", "./functions/featuresetstats", "./functions/featuresetstring"], function(da, ea, Y, ia, qa) {
                                try {
                                    O = da,
                                    G.extend([ea, Y, ia, qa]),
                                    b.extend([ea, Y, ia, qa], "async"),
                                    B = !0,
                                    V(!0)
                                } catch (wa) {
                                    aa(wa)
                                }
                            }, aa)
                        })
                    })
                }
                function z(V, aa) {
                    void 0 === aa && (aa = []);
                    void 0 === V.usesFeatureSet && k.findScriptDependencies(V, aa);
                    return !0 === V.usesFeatureSet
                }
                function u(V, aa) {
                    if (aa)
                        for (var da = 0; da < aa.length; da++)
                            if (n(V, aa[da]))
                                return !0;
                    return !1
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.featureSetUtils = y.scriptTouchesGeometry = y.loadScriptDependencies = y.scriptIsAsync = y.scriptUsesFeatureSet = y.enableFeatureSetSupport = y.isGeometryEnabled = y.isAsyncEnabled = y.isFeatureSetSupportEnabled = y.enableAsyncSupport = y.enableGeometrySupport = y.scriptUsesGeometryEngine = y.extractFieldLiterals = y.referencesFunction = y.referencesMember = y.executeScript = y.parseAndExecuteScript = y.scriptCheck = y.validateScript = y.parseScript = y.extend = y.compileScript = void 0;
                var p = "feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" ")
                  , r = function() {
                    if (h("csp-restrictions"))
                        return !1;
                    try {
                        return (new Function("function* test() {}; return true"))()
                    } catch (V) {
                        return !1
                    }
                }()
                  , B = !1
                  , D = !1
                  , G = null
                  , A = [];
                y.compileScript = function(V, aa) {
                    return !0 === aa.useAsync || !0 === V.isAsync ? a(V, aa) : h("csp-restrictions") ? function(da) {
                        return w.executeScript(V, da)
                    }
                    : b.compileScript(V, aa)
                }
                ;
                y.extend = function(V) {
                    w.extend(V);
                    b.extend(V, "sync");
                    null === G ? A.push(V) : (b.extend(V, "async"),
                    G.extend(V))
                }
                ;
                y.parseScript = c;
                y.validateScript = function(V, aa, da) {
                    void 0 === da && (da = "");
                    return l.validateScript(V, aa, da)
                }
                ;
                y.scriptCheck = function(V, aa, da, ea) {
                    void 0 === ea && (ea = "");
                    return l.scriptCheck(V, aa, da, ea)
                }
                ;
                y.parseAndExecuteScript = function(V, aa, da) {
                    void 0 === da && (da = []);
                    V = l.parseScript(V, da);
                    return e(V, aa)
                }
                ;
                y.executeScript = e;
                y.referencesMember = n;
                y.referencesFunction = function(V, aa) {
                    return w.referencesFunction(V, aa)
                }
                ;
                y.extractFieldLiterals = function(V, aa) {
                    void 0 === aa && (aa = !1);
                    return l.extractFieldLiterals(V, aa)
                }
                ;
                y.scriptUsesGeometryEngine = t;
                var E = null;
                y.enableGeometrySupport = g;
                var H = null;
                y.enableAsyncSupport = q;
                y.isFeatureSetSupportEnabled = function() {
                    return B
                }
                ;
                y.isAsyncEnabled = x;
                y.isGeometryEnabled = function() {
                    return D
                }
                ;
                var J = null;
                y.enableFeatureSetSupport = v;
                y.scriptUsesFeatureSet = z;
                y.scriptIsAsync = function(V, aa) {
                    void 0 === aa && (aa = []);
                    void 0 === V.isAsync && k.findScriptDependencies(V, aa);
                    return !0 === V.isAsync
                }
                ;
                y.loadScriptDependencies = function(V, aa, da, ea) {
                    void 0 === da && (da = []);
                    void 0 === ea && (ea = !1);
                    return f.create(function(Y, ia) {
                        var qa = "string" === typeof V ? c(V) : V
                          , wa = [];
                        qa && (!1 === D && (t(qa) || ea) && wa.push(g()),
                        !1 === x() && (!0 === qa.isAsync || aa) && wa.push(q()),
                        !1 === B && (z(qa) || u(qa, da)) && wa.push(v()));
                        wa ? f.all(wa).then(function() {
                            Y(!0)
                        }, ia) : Y(!0)
                    })
                }
                ;
                y.scriptTouchesGeometry = function(V) {
                    if (t(V))
                        return !0;
                    V = k.findFunctionCalls(V);
                    for (var aa = !1, da = 0; da < V.length; da++)
                        if (-1 < p.indexOf(V[da])) {
                            aa = !0;
                            break
                        }
                    return aa
                }
                ;
                var O = null;
                y.featureSetUtils = function() {
                    return O
                }
                ;
                m.MomentLibrary.Moment = d
            })
        },
        "esri/arcade/arcadeCompiler": function() {
            define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B, D) {
                function G(T, U, ma) {
                    try {
                        return ma(T, null, U)
                    } catch (sa) {
                        throw sa;
                    }
                }
                function A(T) {
                    return T instanceof Error ? x.reject(T) : x.reject(Error(T))
                }
                function E(T, U) {
                    try {
                        switch (U.type) {
                        case "EmptyStatement":
                            return "lc.voidOperation";
                        case "VariableDeclarator":
                            return aa(T, U);
                        case "VariableDeclaration":
                            for (var ma = [], sa = 0; sa < U.declarations.length; sa++)
                                ma.push(E(T, U.declarations[sa]));
                            return ma.join("\n") + " \n lastStatement\x3d  lc.voidOperation; \n";
                        case "BlockStatement":
                            return V(T, U);
                        case "FunctionDeclaration":
                            var ya = U.id.name.toLowerCase()
                              , Oa = {
                                isAsync: T.isAsync,
                                spatialReference: T.spatialReference,
                                console: T.console,
                                lrucache: T.lrucache,
                                interceptor: T.interceptor,
                                services: T.services,
                                symbols: T.symbols,
                                mangleMap: T.mangleMap,
                                localScope: {
                                    _SymbolsMap: {}
                                },
                                depthCounter: T.depthCounter + 1,
                                globalScope: T.globalScope
                            };
                            if (64 < Oa.depthCounter)
                                throw Error("Exceeded maximum function depth");
                            ma = "new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
                            for (sa = 0; sa < U.params.length; sa++) {
                                var Ua = U.params[sa].name.toLowerCase()
                                  , Xa = pa(T);
                                Oa.localScope._SymbolsMap[Ua] = Xa;
                                Oa.mangleMap[Ua] = Xa;
                                ma += "lscope['" + Xa + "']\x3darguments[" + sa.toString() + "];\n"
                            }
                            !0 === T.isAsync ? (ma = ma + "return lang.__awaiter(this, void 0, void 0, function* () {\n" + (V(Oa, U.body) + "\n return lastStatement; "),
                            ma += "});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n") : (ma += V(Oa, U.body) + "\n return lastStatement; }, runtimeCtx))",
                            ma += "\n lastStatement \x3d lc.voidOperation; \n");
                            if (void 0 !== T.globalScope[ya])
                                var Ma = "gscope['" + ya + "']\x3d" + ma;
                            else
                                void 0 !== T.globalScope._SymbolsMap[ya] ? Ma = "gscope['" + T.globalScope._SymbolsMap[ya] + "']\x3d" + ma : (Xa = pa(T),
                                T.globalScope._SymbolsMap[ya] = Xa,
                                T.mangleMap[ya] = Xa,
                                Ma = "gscope['" + Xa + "']\x3d" + ma);
                            return Ma;
                        case "ReturnStatement":
                            var I = null === U.argument ? "return lc.voidOperation" : "return " + E(T, U.argument);
                            return I;
                        case "IfStatement":
                            if ("AssignmentExpression" === U.test.type || "UpdateExpression" === U.test.type)
                                throw Error(d.nodeErrorMessage(U.test, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                            var Q = E(T, U.test)
                              , ba = L(T)
                              , M = "var " + ba + " \x3d " + Q + ";\n if (" + ba + " \x3d\x3d\x3d true) {\n" + O(T, U.consequent) + "\n }\n";
                            M = null !== U.alternate ? M + ("else if (" + ba + "\x3d\x3d\x3dfalse)   { \n" + O(T, U.alternate) + "}\n") : M + ("else if (" + ba + "\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");
                            return M += "else { lang.error({type: '" + U.type + "'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
                        case "ExpressionStatement":
                            var S = "AssignmentExpression" === U.expression.type ? "lastStatement \x3d lc.voidOperation; " + E(T, U.expression) + "; \n " : "lastStatement \x3d " + E(T, U.expression) + "; ";
                            return S;
                        case "AssignmentExpression":
                            return J(T, U);
                        case "UpdateExpression":
                            return H(T, U);
                        case "BreakStatement":
                            return "break";
                        case "ContinueStatement":
                            return "continue";
                        case "TemplateLiteral":
                            try {
                                var fa = [];
                                ya = Ma = 0;
                                for (sa = U.quasis; ya < sa.length; ya++) {
                                    var ra = sa[ya];
                                    fa.push(ra.value ? JSON.stringify(ra.value.cooked) : JSON.stringify(""));
                                    !1 === ra.tail && (fa.push(U.expressions[Ma] ? "lang.castString(lang.aCheck(" + E(T, U.expressions[Ma]) + ", 'TemplateLiteral'))" : ""),
                                    Ma++)
                                }
                                ma = "([" + fa.join(",") + "]).join('')"
                            } catch (nb) {
                                throw nb;
                            }
                            return ma;
                        case "TemplateElement":
                            return JSON.stringify(U.value ? U.value.cooked : "");
                        case "ForStatement":
                            ma = "lastStatement \x3d lc.voidOperation; \n";
                            null !== U.init && (ma += E(T, U.init) + "; ");
                            var va = L(T)
                              , Ca = L(T);
                            ma += "var " + va + " \x3d true; \n do { ";
                            null !== U.update && (ma += " if (" + va + "\x3d\x3d\x3dfalse) {\n " + E(T, U.update) + "  \n}\n " + va + "\x3dfalse; \n");
                            null !== U.test && (ma += "var " + Ca + " \x3d " + E(T, U.test) + "; ",
                            ma += "if (" + Ca + "\x3d\x3d\x3dfalse) { break; } else if (" + Ca + "!\x3d\x3dtrue) { lang.error({type: '" + U.type + "'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");
                            ma += E(T, U.body);
                            null !== U.update && (ma += "\n " + E(T, U.update));
                            return ma + ("\n" + va + " \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");
                        case "ForInStatement":
                            var Da = L(T)
                              , Ra = L(T)
                              , Na = L(T)
                              , Ja = "var " + Da + " \x3d " + E(T, U.right) + ";\n";
                            "VariableDeclaration" === U.left.type && (Ja += E(T, U.left));
                            var Pa = "VariableDeclaration" === U.left.type ? U.left.declarations[0].id.name : U.left.name;
                            Pa = Pa.toLowerCase();
                            ma = "";
                            null !== T.localScope && (void 0 !== T.localScope[Pa] ? ma = "lscope['" + Pa + "']" : void 0 !== T.localScope._SymbolsMap[Pa] && (ma = "lscope['" + T.localScope._SymbolsMap[Pa] + "']"));
                            "" === ma && (void 0 !== T.globalScope[Pa] ? ma = "gscope['" + Pa + "']" : void 0 !== T.globalScope._SymbolsMap[Pa] && (ma = "gscope['" + T.globalScope._SymbolsMap[Pa] + "']"));
                            Ja = Ja + ("if (" + Da + "\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(") + (Da + ") || lc.isString(" + Da + ")) {var ") + (Ra + "\x3d" + Da + ".length; \nfor(var ") + (Na + "\x3d0; " + Na + "\x3c" + Ra + "; " + Na + "++) {\n");
                            Ja += ma + "\x3d" + Na + ";\n";
                            Ja += E(T, U.body);
                            Ja += "\n}\n";
                            Ja += " lastStatement \x3d lc.voidOperation; \n";
                            Ja += " \n}\n";
                            Ja += "else if (lc.isImmutableArray(" + Da + ")) {";
                            Ja = Ja + ("var " + Ra + "\x3d" + Da + ".length(); \nfor(var ") + (Na + "\x3d0; " + Na + "\x3c" + Ra + "; " + Na + "++) {\n");
                            Ja += ma + "\x3d" + Na + ";\n";
                            Ja += E(T, U.body);
                            Ja += "\n}\n";
                            Ja += " lastStatement \x3d lc.voidOperation; \n";
                            Ja += " \n}\n";
                            Ja += "else if (( " + Da + " instanceof lang.Dictionary) || ( " + Da + " instanceof lang.Feature)) {";
                            Ja = Ja + ("var " + Ra + "\x3d" + Da + ".keys(); \nfor(var ") + (Na + "\x3d0; " + Na + "\x3c" + Ra + ".length; " + Na + "++) {\n");
                            Ja += ma + "\x3d" + Ra + "[" + Na + "];\n";
                            Ja += E(T, U.body);
                            Ja += "\n}\n";
                            Ja += " lastStatement \x3d lc.voidOperation; \n";
                            Ja += " \n}\n";
                            T.isAsync && (Ja += "else if (lc.isFeatureSet(" + Da + ")) {",
                            Ja = Ja + ("var " + Ra + "\x3d" + Da + ".iterator(runtimeCtx.abortSignal); \nfor(var ") + (Na + "\x3dlang. graphicToFeature( yield " + Ra + ".next()," + Da + "); " + Na + "!\x3dnull; " + Na + "\x3dlang. graphicToFeature( yield " + Ra + ".next()," + Da + ")) {\n") + (ma + "\x3d" + Na + ";\n"),
                            Ja += E(T, U.body),
                            Ja += "\n}\n",
                            Ja += " lastStatement \x3d lc.voidOperation; \n",
                            Ja += " \n}\n");
                            return Ja + "else { lastStatement \x3d lc.voidOperation; } \n";
                        case "Identifier":
                            return ea(T, U);
                        case "MemberExpression":
                            try {
                                ma = void 0;
                                ma = !0 === U.computed ? E(T, U.property) : "'" + U.property.name + "'";
                                var eb = "lang.member(" + E(T, U.object) + "," + ma + ")"
                            } catch (nb) {
                                throw nb;
                            }
                            return eb;
                        case "Literal":
                            return null === U.value || void 0 === U.value ? "null" : JSON.stringify(U.value);
                        case "ThisExpression":
                            throw Error(d.nodeErrorMessage(U, "RUNTIME", "NOTSUPPORTED"));
                        case "CallExpression":
                            try {
                                if ("Identifier" !== U.callee.type)
                                    throw Error(d.nodeErrorMessage(U, "RUNTIME", "ONLYNODESSUPPORTED"));
                                var bb = U.callee.name.toLowerCase();
                                ma = "";
                                null !== T.localScope && (void 0 !== T.localScope[bb] ? ma = "lscope['" + bb + "']" : void 0 !== T.localScope._SymbolsMap[bb] && (ma = "lscope['" + T.localScope._SymbolsMap[bb] + "']"));
                                "" === ma && (void 0 !== T.globalScope[bb] ? ma = "gscope['" + bb + "']" : void 0 !== T.globalScope._SymbolsMap[bb] && (ma = "gscope['" + T.globalScope._SymbolsMap[bb] + "']"));
                                if ("" !== ma) {
                                    sa = "[";
                                    for (ra = 0; ra < U.arguments.length; ra++)
                                        0 < ra && (sa += ", "),
                                        sa += E(T, U.arguments[ra]);
                                    sa += "]";
                                    fa = T.isAsync ? "(yield lang.callfunc(" + ma + "," + sa + ",runtimeCtx) )" : "lang.callfunc(" + ma + "," + sa + ",runtimeCtx)"
                                } else
                                    throw Error(d.nodeErrorMessage(U, "RUNTIME", "NOTFOUND"));
                            } catch (nb) {
                                throw nb;
                            }
                            return fa;
                        case "UnaryExpression":
                            try {
                                var gb = "lang.unary(" + E(T, U.argument) + ",'" + U.operator + "')"
                            } catch (nb) {
                                throw nb;
                            }
                            return gb;
                        case "BinaryExpression":
                            try {
                                var cb = "lang.binary(" + E(T, U.left) + "," + E(T, U.right) + ",'" + U.operator + "')"
                            } catch (nb) {
                                throw nb;
                            }
                            return cb;
                        case "LogicalExpression":
                            try {
                                if ("AssignmentExpression" === U.left.type || "UpdateExpression" === U.left.type)
                                    throw Error(d.nodeErrorMessage(U.left, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                                if ("AssignmentExpression" === U.right.type || "UpdateExpression" === U.right.type)
                                    throw Error(d.nodeErrorMessage(U.right, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                                if ("\x26\x26" === U.operator || "||" === U.operator)
                                    var kb = "(lang.logicalCheck(" + E(T, U.left) + ") " + U.operator + " lang.logicalCheck(" + E(T, U.right) + "))";
                                else
                                    throw Error(d.nodeErrorMessage(U, "RUNTIME", "ONLYORORAND"));
                            } catch (nb) {
                                throw nb;
                            }
                            return kb;
                        case "ConditionalExpression":
                            throw Error(d.nodeErrorMessage(U, "RUNTIME", "NOTSUPPORTED"));
                        case "ArrayExpression":
                            try {
                                ma = [];
                                for (sa = 0; sa < U.elements.length; sa++)
                                    "Literal" === U.elements[sa].type ? ma.push(E(T, U.elements[sa])) : ma.push("lang.aCheck(" + E(T, U.elements[sa]) + ",'ArrayExpression')");
                                var ub = "[" + ma.join(",") + "]"
                            } catch (nb) {
                                throw nb;
                            }
                            return ub;
                        case "ObjectExpression":
                            ma = "lang.dictionary([";
                            for (sa = 0; sa < U.properties.length; sa++) {
                                var ob = U.properties[sa]
                                  , db = "Identifier" === ob.key.type ? "'" + ob.key.name + "'" : E(T, ob.key)
                                  , jb = E(T, ob.value);
                                0 < sa && (ma += ",");
                                ma += "lang.strCheck(" + db + ",'ObjectExpression'),lang.aCheck(" + jb + ", 'ObjectExpression')"
                            }
                            return ma + "])";
                        case "Property":
                            throw Error("Should not get here");
                        case "Array":
                            throw Error(d.nodeErrorMessage(U, "RUNTIME", "NOTSUPPORTED"));
                        default:
                            throw Error(d.nodeErrorMessage(U, "RUNTIME", "UNREOGNISED"));
                        }
                    } catch (nb) {
                        throw nb;
                    }
                }
                function H(T, U) {
                    var ma = null
                      , sa = "";
                    if ("MemberExpression" === U.argument.type)
                        return ma = E(T, U.argument.object),
                        sa = !0 === U.argument.computed ? E(T, U.argument.property) : "'" + U.argument.property.name + "'",
                        "lang.memberupdate(" + ma + "," + sa + ",'" + U.operator + "'," + U.prefix + ")";
                    ma = U.argument.name.toLowerCase();
                    if (null !== T.localScope) {
                        if (void 0 !== T.localScope[ma])
                            return "lang.update(lscope, '" + ma + "','" + U.operator + "'," + U.prefix + ")";
                        if (void 0 !== T.localScope._SymbolsMap[ma])
                            return "lang.update(lscope, '" + T.localScope._SymbolsMap[ma] + "','" + U.operator + "'," + U.prefix + ")"
                    }
                    if (void 0 !== T.globalScope[ma])
                        return "lang.update(gscope, '" + ma + "','" + U.operator + "'," + U.prefix + ")";
                    if (void 0 !== T.globalScope._SymbolsMap[ma])
                        return "lang.update(gscope, '" + T.globalScope._SymbolsMap[ma] + "','" + U.operator + "'," + U.prefix + ")";
                    throw Error("Variable not recognised");
                }
                function J(T, U) {
                    var ma = E(T, U.right)
                      , sa = null
                      , ya = "";
                    if ("MemberExpression" === U.left.type)
                        return sa = E(T, U.left.object),
                        ya = !0 === U.left.computed ? E(T, U.left.property) : "'" + U.left.property.name + "'",
                        "lang.assignmember(" + sa + "," + ya + ",'" + U.operator + "'," + ma + ")";
                    sa = U.left.name.toLowerCase();
                    if (null !== T.localScope) {
                        if (void 0 !== T.localScope[sa])
                            return "lscope['" + sa + "']\x3dlang.assign(" + ma + ",'" + U.operator + "', lscope['" + sa + "'])";
                        if (void 0 !== T.localScope._SymbolsMap[sa])
                            return "lscope['" + T.localScope._SymbolsMap[sa] + "']\x3dlang.assign(" + ma + ",'" + U.operator + "', lscope['" + T.localScope._SymbolsMap[sa] + "'])"
                    }
                    if (void 0 !== T.globalScope[sa])
                        return "gscope['" + sa + "']\x3dlang.assign(" + ma + ",'" + U.operator + "', gscope['" + sa + "'])";
                    if (void 0 !== T.globalScope._SymbolsMap[sa])
                        return "gscope['" + T.globalScope._SymbolsMap[sa] + "']\x3dlang.assign(" + ma + ",'" + U.operator + "', gscope['" + T.globalScope._SymbolsMap[sa] + "'])";
                    throw Error("Variable not recognised");
                }
                function O(T, U) {
                    return "BlockStatement" === U.type ? E(T, U) : "ReturnStatement" === U.type || "BreakStatement" === U.type || "ContinueStatement" === U.type ? E(T, U) + "; " : "UpdateExpression" === U.type ? "lastStatement \x3d " + E(T, U) + "; " : "ExpressionStatement" === U.type ? E(T, U) : "ObjectExpression" === U.type ? "lastStatement \x3d " + E(T, U) + "; " : E(T, U) + "; "
                }
                function V(T, U) {
                    for (var ma = "", sa = 0; sa < U.body.length; sa++)
                        ma = "ReturnStatement" === U.body[sa].type ? ma + (E(T, U.body[sa]) + "; \n") : "BreakStatement" === U.body[sa].type ? ma + (E(T, U.body[sa]) + "; \n") : "ContinueStatement" === U.body[sa].type ? ma + (E(T, U.body[sa]) + "; \n") : "UpdateExpression" === U.body[sa].type ? ma + ("lastStatement \x3d " + E(T, U.body[sa]) + "; \n") : "ObjectExpression" === U.body[sa].type ? ma + ("lastStatement \x3d " + E(T, U.body[sa]) + "; \n") : ma + (E(T, U.body[sa]) + " \n");
                    return ma
                }
                function aa(T, U) {
                    var ma = null === U.init ? null : E(T, U.init);
                    ma === f.voidOperation && (ma = null);
                    U = U.id.name.toLowerCase();
                    if (null !== T.localScope) {
                        if (void 0 !== T.localScope[U])
                            return "lscope['" + U + "']\x3d" + ma + "; ";
                        if (void 0 !== T.localScope._SymbolsMap[U])
                            return "lscope['" + T.localScope._SymbolsMap[U] + "']\x3d" + ma + "; ";
                        var sa = pa(T);
                        T.localScope._SymbolsMap[U] = sa;
                        T.mangleMap[U] = sa;
                        return "lscope['" + sa + "']\x3d" + ma + "; "
                    }
                    if (void 0 !== T.globalScope[U])
                        return "gscope['" + U + "']\x3d" + ma + "; ";
                    if (void 0 !== T.globalScope._SymbolsMap[U])
                        return "gscope['" + T.globalScope._SymbolsMap[U] + "']\x3d" + ma + "; ";
                    sa = pa(T);
                    T.globalScope._SymbolsMap[U] = sa;
                    T.mangleMap[U] = sa;
                    return "gscope['" + sa + "']\x3d" + ma + "; "
                }
                function da(T, U, ma) {
                    U = U.toLowerCase();
                    switch (U) {
                    case "hasz":
                        return T = T.hasZ,
                        void 0 === T ? !1 : T;
                    case "hasm":
                        return T = T.hasM,
                        void 0 === T ? !1 : T;
                    case "spatialreference":
                        return U = T.spatialReference._arcadeCacheId,
                        void 0 === U && (ma = !0,
                        Object.freeze && Object.isFrozen(T.spatialReference) && (ma = !1),
                        ma && (xa++,
                        U = T.spatialReference._arcadeCacheId = xa)),
                        T = new m({
                            wkt: T.spatialReference.wkt,
                            wkid: T.spatialReference.wkid
                        }),
                        void 0 !== U && (T._arcadeCacheId = "SPREF" + U.toString()),
                        T
                    }
                    switch (T.type) {
                    case "extent":
                        switch (U) {
                        case "xmin":
                        case "xmax":
                        case "ymin":
                        case "ymax":
                        case "zmin":
                        case "zmax":
                        case "mmin":
                        case "mmax":
                            return T = T[U],
                            void 0 !== T ? T : null;
                        case "type":
                            return "Extent"
                        }
                        break;
                    case "polygon":
                        switch (U) {
                        case "rings":
                            return U = T.getCacheValue("_arcadeCacheId"),
                            void 0 === U && (xa++,
                            U = xa,
                            T.setCacheValue("_arcadeCacheId", U)),
                            T = new k(T.rings,T.spatialReference,!0 === T.hasZ,!0 === T.hasM,U);
                        case "type":
                            return "Polygon"
                        }
                        break;
                    case "point":
                        switch (U) {
                        case "x":
                        case "y":
                        case "z":
                        case "m":
                            return void 0 !== T[U] ? T[U] : null;
                        case "type":
                            return "Point"
                        }
                        break;
                    case "polyline":
                        switch (U) {
                        case "paths":
                            return U = T.getCacheValue("_arcadeCacheId"),
                            void 0 === U && (xa++,
                            U = xa,
                            T.setCacheValue("_arcadeCacheId", U)),
                            T = new k(T.paths,T.spatialReference,!0 === T.hasZ,!0 === T.hasM,U);
                        case "type":
                            return "Polyline"
                        }
                        break;
                    case "multipoint":
                        switch (U) {
                        case "points":
                            return U = T.getCacheValue("_arcadeCacheId"),
                            void 0 === U && (xa++,
                            U = xa,
                            T.setCacheValue("_arcadeCacheId", U)),
                            T = new h(T.points,T.spatialReference,!0 === T.hasZ,!0 === T.hasM,U,1);
                        case "type":
                            return "Multipoint"
                        }
                    }
                    throw Error(d.nodeErrorMessage(ma, "RUNTIME", "PROPERTYNOTFOUND"));
                }
                function ea(T, U) {
                    try {
                        var ma = U.name.toLowerCase();
                        if (null !== T.localScope) {
                            if (void 0 !== T.localScope[ma])
                                return "lscope['" + ma + "']";
                            if (void 0 !== T.localScope._SymbolsMap[ma])
                                return "lscope['" + T.localScope._SymbolsMap[ma] + "']"
                        }
                        if (void 0 !== T.globalScope[ma])
                            return "gscope['" + ma + "']";
                        if (void 0 !== T.globalScope._SymbolsMap[ma])
                            return "gscope['" + T.globalScope._SymbolsMap[ma] + "']";
                        throw Error(d.nodeErrorMessage(U, "RUNTIME", "VARIABLENOTFOUND"));
                    } catch (sa) {
                        throw sa;
                    }
                }
                function Y(T) {
                    return null === T ? "" : f.isArray(T) || f.isImmutableArray(T) ? "Array" : f.isDate(T) ? "Date" : f.isString(T) ? "String" : f.isBoolean(T) ? "Boolean" : f.isNumber(T) ? "Number" : T instanceof w ? "Attachment" : T instanceof b ? "Portal" : T instanceof m ? "Dictionary" : T instanceof l ? "Feature" : T instanceof p ? "Point" : T instanceof r ? "Polygon" : T instanceof B ? "Polyline" : T instanceof u ? "Multipoint" : T instanceof v ? "Extent" : f.isFunctionParameter(T) ? "Function" : f.isFeatureSet(T) ? "FeatureSet" : f.isFeatureSetCollection(T) ? "FeatureSetCollection" : T === f.voidOperation ? "" : "number" === typeof T && isNaN(T) ? "Number" : "Unrecognised Type"
                }
                function ia(T, U, ma, sa) {
                    try {
                        if (f.equalityTest(U[ma], sa))
                            return U[ma + 1];
                        var ya = U.length - ma;
                        return 1 === ya ? U[ma] : 2 === ya ? null : 3 === ya ? U[ma + 2] : ia(T, U, ma + 2, sa)
                    } catch (Oa) {
                        throw Oa;
                    }
                }
                function qa(T, U, ma, sa) {
                    try {
                        if (!0 === sa)
                            return U[ma + 1];
                        if (3 === U.length - ma)
                            return U[ma + 2];
                        var ya = U[ma + 2];
                        if (!1 === f.isBoolean(ya))
                            throw Error("WHEN needs boolean test conditions");
                        return qa(T, U, ma + 2, ya)
                    } catch (Oa) {
                        throw Oa;
                    }
                }
                function wa(T, U) {
                    var ma = T.length
                      , sa = Math.floor(ma / 2);
                    if (0 === ma)
                        return [];
                    if (1 === ma)
                        return [T[0]];
                    var ya = wa(T.slice(0, sa), U);
                    T = wa(T.slice(sa, ma), U);
                    for (ma = []; 0 < ya.length || 0 < T.length; )
                        0 < ya.length && 0 < T.length ? (sa = U(ya[0], T[0]),
                        isNaN(sa) && (sa = 0),
                        0 >= sa ? (ma.push(ya[0]),
                        ya = ya.slice(1)) : (ma.push(T[0]),
                        T = T.slice(1))) : 0 < ya.length ? (ma.push(ya[0]),
                        ya = ya.slice(1)) : 0 < T.length && (ma.push(T[0]),
                        T = T.slice(1));
                    return ma
                }
                function K(T, U) {
                    try {
                        var ma = T.length
                          , sa = Math.floor(ma / 2);
                        if (0 === ma)
                            return x.resolve([]);
                        if (1 === ma)
                            return x.resolve([T[0]]);
                        var ya = [K(T.slice(0, sa), U), K(T.slice(sa, ma), U)];
                        return x.all(ya).then(function(Oa) {
                            return Z(Oa[0], Oa[1], U, [])
                        })
                    } catch (Oa) {
                        return x.reject(Oa)
                    }
                }
                function Z(T, U, ma, sa) {
                    return x.create(function(ya, Oa) {
                        0 < T.length || 0 < U.length ? 0 < T.length && 0 < U.length ? ma(T[0], U[0]).then(function(Ua) {
                            try {
                                isNaN(Ua) && (Ua = 1),
                                0 >= Ua ? (sa.push(T[0]),
                                T = T.slice(1)) : (sa.push(U[0]),
                                U = U.slice(1)),
                                Z(T, U, ma, sa).then(function(Xa) {
                                    ya(Xa)
                                }, Oa)
                            } catch (Xa) {
                                Oa(Xa)
                            }
                        }, Oa) : 0 < T.length ? (sa.push(T[0]),
                        T = T.slice(1),
                        Z(T, U, ma, sa).then(function(Ua) {
                            ya(Ua)
                        }, Oa)) : 0 < U.length && (sa.push(U[0]),
                        U = U.slice(1),
                        Z(T, U, ma, sa).then(function(Ua) {
                            ya(Ua)
                        }, Oa)) : ya(sa)
                    })
                }
                function pa(T) {
                    T.symbols.symbolCounter++;
                    return "_T" + T.symbols.symbolCounter.toString()
                }
                function L(T) {
                    T.symbols.symbolCounter++;
                    return "_Tvar" + T.symbols.symbolCounter.toString()
                }
                function R(T, U, ma) {
                    var sa = {};
                    T || (T = {});
                    ma || (ma = {});
                    sa._SymbolsMap = {};
                    sa.textformatting = 1;
                    sa.infinity = 1;
                    sa.pi = 1;
                    for (var ya in U)
                        sa[ya] = 1;
                    for (ya in ma)
                        sa[ya] = 1;
                    for (ya in T)
                        sa[ya] = 1;
                    return sa
                }
                function ha(T, U) {
                    for (var ma = {
                        mode: U,
                        compiled: !0,
                        functions: {},
                        signatures: [],
                        failDefferred: A,
                        standardFunction: G,
                        standardFunctionAsync: G,
                        evaluateIdentifier: na
                    }, sa = 0; sa < T.length; sa++)
                        T[sa].registerFunctions(ma);
                    if ("sync" === U) {
                        for (var ya in ma.functions)
                            Aa[ya] = new f.NativeFunction(ma.functions[ya]),
                            X.prototype[ya] = Aa[ya];
                        for (sa = 0; sa < ma.signatures.length; sa++)
                            d.addFunctionDeclaration(ma.signatures[sa], "sync")
                    } else {
                        for (ya in ma.functions)
                            ca[ya] = new f.NativeFunction(ma.functions[ya]),
                            oa.prototype[ya] = ca[ya];
                        for (sa = 0; sa < ma.signatures.length; sa++)
                            d.addFunctionDeclaration(ma.signatures[sa], "async")
                    }
                }
                function na(T, U) {
                    U = U.name;
                    if ("_SymbolsMap" === U)
                        throw "Illegal";
                    if (0 < T.localStack.length) {
                        if ("_t" !== U.substr(0, 2).toLowerCase() && void 0 !== T.localStack[T.localStack.length - 1][U])
                            return T.localStack[T.localStack.length - 1][U];
                        var ma = T.mangleMap[U];
                        if (void 0 !== ma && void 0 !== T.localStack[T.localStack.length - 1][ma])
                            return T.localStack[T.localStack.length - 1][ma]
                    }
                    if ("_t" !== U.substr(0, 2).toLowerCase() && void 0 !== T.globalScope[U] || 1 === T.globalScope._SymbolsMap[U])
                        return T.globalScope[U];
                    U = T.mangleMap[U];
                    if (void 0 !== U)
                        return T.globalScope[U]
                }
                function ta(T) {
                    console.log(T)
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.enableAsyncSupport = y.compileScript = y.referencesFunction = y.referencesMember = y.validateScript = y.extractFieldLiterals = y.executeScript = y.extend = y.functionHelper = void 0;
                var xa = 0
                  , Aa = {};
                a.registerFunctions(Aa, G);
                c.registerFunctions(Aa, G);
                q.registerFunctions(Aa, G);
                t.registerFunctions(Aa, G);
                e.registerFunctions(Aa, G);
                g.registerFunctions(Aa, G);
                Aa["typeof"] = function(T, U) {
                    return G(T, U, function(ma, sa, ya) {
                        f.pcCheck(ya, 1, 1);
                        ma = Y(ya[0]);
                        if ("Unrecognised Type" === ma)
                            throw Error("Unrecognised Type");
                        return ma
                    })
                }
                ;
                Aa.iif = function(T, U) {
                    try {
                        return G(T, U, function(ma, sa, ya) {
                            f.pcCheck(ya, 3, 3);
                            if (!1 === f.isBoolean(ya[0]))
                                throw Error("IF Function must have a boolean test condition");
                            return ya[0] ? ya[1] : ya[2]
                        })
                    } catch (ma) {
                        throw ma;
                    }
                }
                ;
                Aa.decode = function(T, U) {
                    try {
                        return G(T, U, function(ma, sa, ya) {
                            if (2 > ya.length)
                                throw Error("Missing Parameters");
                            if (2 === ya.length)
                                return ya[1];
                            if (0 === (ya.length - 1) % 2)
                                throw Error("Must have a default value result.");
                            return ia(T, ya, 1, ya[0])
                        })
                    } catch (ma) {
                        throw ma;
                    }
                }
                ;
                Aa.when = function(T, U) {
                    try {
                        return G(T, U, function(ma, sa, ya) {
                            if (3 > ya.length)
                                throw Error("Missing Parameters");
                            if (0 === ya.length % 2)
                                throw Error("Must have a default value result.");
                            ma = ya[0];
                            if (!1 === f.isBoolean(ma))
                                throw Error("WHEN needs boolean test conditions");
                            return qa(T, ya, 0, ma)
                        })
                    } catch (ma) {
                        throw ma;
                    }
                }
                ;
                Aa.top = function(T, U) {
                    return G(T, U, function(ma, sa, ya) {
                        f.pcCheck(ya, 2, 2);
                        if (f.isArray(ya[0]))
                            return f.toNumber(ya[1]) >= ya[0].length ? ya[0].slice(0) : ya[0].slice(0, f.toNumber(ya[1]));
                        if (f.isImmutableArray(ya[0]))
                            return f.toNumber(ya[1]) >= ya[0].length() ? ya[0].slice(0) : ya[0].slice(0, f.toNumber(ya[1]));
                        throw Error("Top cannot accept this parameter type");
                    })
                }
                ;
                Aa.first = function(T, U) {
                    return G(T, U, function(ma, sa, ya) {
                        f.pcCheck(ya, 1, 1);
                        return f.isArray(ya[0]) ? 0 === ya[0].length ? null : ya[0][0] : f.isImmutableArray(ya[0]) ? 0 === ya[0].length() ? null : ya[0].get(0) : null
                    })
                }
                ;
                Aa.sort = function(T, U) {
                    return G(T, U, function(ma, sa, ya) {
                        f.pcCheck(ya, 1, 2);
                        sa = ya[0];
                        f.isImmutableArray(sa) && (sa = sa.toArray());
                        if (!1 === f.isArray(sa))
                            throw Error("Illegal Argument");
                        if (1 < ya.length) {
                            if (!1 === f.isFunctionParameter(ya[1]))
                                throw Error("Illegal Argument");
                            var Oa = function(Q, ba) {
                                return Ea.callfunc(ya[1], [Q, ba], ma)
                            };
                            return T.isAsync ? K(sa, Oa) : sa = wa(sa, function(Q, ba) {
                                return Oa(Q, ba)
                            })
                        }
                        if (0 === sa.length)
                            return [];
                        for (var Ua = {}, Xa = 0; Xa < sa.length; Xa++) {
                            var Ma = Y(sa[Xa]);
                            "" !== Ma && (Ua[Ma] = !0)
                        }
                        if (!0 === Ua.Array || !0 === Ua.Dictionary || !0 === Ua.Feature || !0 === Ua.Point || !0 === Ua.Polygon || !0 === Ua.Polyline || !0 === Ua.Multipoint || !0 === Ua.Extent || !0 === Ua.Function)
                            return sa.slice(0);
                        Xa = 0;
                        Ma = "";
                        for (var I in Ua)
                            Xa++,
                            Ma = I;
                        return sa = 1 < Xa || "String" === Ma ? wa(sa, function(Q, ba) {
                            if (null === Q || void 0 === Q || Q === f.voidOperation)
                                return null === ba || void 0 === ba || ba === f.voidOperation ? 0 : 1;
                            if (null === ba || void 0 === ba || ba === f.voidOperation)
                                return -1;
                            Q = f.toString(Q);
                            ba = f.toString(ba);
                            return Q < ba ? -1 : Q === ba ? 0 : 1
                        }) : "Number" === Ma ? wa(sa, function(Q, ba) {
                            return Q - ba
                        }) : "Boolean" === Ma ? wa(sa, function(Q, ba) {
                            return Q === ba ? 0 : ba ? -1 : 1
                        }) : "Date" === Ma ? wa(sa, function(Q, ba) {
                            return ba - Q
                        }) : sa.slice(0)
                    })
                }
                ;
                var ca = {}, ja;
                for (ja in Aa)
                    ca[ja] = new f.NativeFunction(Aa[ja]);
                n.registerFunctions(Aa, G);
                for (ja in Aa)
                    Aa[ja] = new f.NativeFunction(Aa[ja]);
                var X = function() {};
                X.prototype = Aa;
                var oa = function() {};
                oa.prototype = ca;
                y.functionHelper = {
                    fixSpatialReference: f.fixSpatialReference,
                    parseArguments: function(T, U) {
                        for (var ma = [], sa = 0; sa < U.arguments.length; sa++)
                            ma.push(E(T, U.arguments[sa]));
                        return ma
                    },
                    standardFunction: G
                };
                y.extend = ha;
                y.executeScript = function(T, U) {
                    return T(U)
                }
                ;
                y.extractFieldLiterals = function(T, U) {
                    void 0 === U && (U = !1);
                    return d.findFieldLiterals(T)
                }
                ;
                y.validateScript = function(T, U) {
                    return d.validateScript(T, U, "sync")
                }
                ;
                y.referencesMember = function(T, U) {
                    return d.referencesMember(T, U)
                }
                ;
                y.referencesFunction = function(T, U) {
                    return d.referencesFunction(T, U)
                }
                ;
                var ka = 0
                  , Ea = {
                    error: function(T, U, ma) {
                        throw Error(d.nodeErrorMessage(T, U, ma));
                    },
                    __awaiter: function(T, U, ma, sa) {
                        return x.create(function(ya, Oa) {
                            function Ua(I) {
                                try {
                                    Ma(sa.next(I))
                                } catch (Q) {
                                    Oa(Q)
                                }
                            }
                            function Xa(I) {
                                try {
                                    Ma(sa["throw"](I))
                                } catch (Q) {
                                    Oa(Q)
                                }
                            }
                            function Ma(I) {
                                I.done ? ya(I.value) : I.value && I.value.then ? I.value.then(Ua, Xa) : (ka++,
                                0 === ka % 100 ? setTimeout(function() {
                                    ka = 0;
                                    Ua(I.value)
                                }, 0) : Ua(I.value))
                            }
                            Ma((sa = sa.apply(T, U || [])).next())
                        })
                    },
                    functionDepthchecker: function(T, U) {
                        return function() {
                            U.depthCounter++;
                            U.localStack.push([]);
                            if (64 < U.depthCounter)
                                throw Error("Exceeded maximum function depth");
                            var ma = T.apply(this, arguments);
                            if (x.isPromiseLike(ma))
                                return ma.then(function(sa) {
                                    U.depthCounter--;
                                    --U.localStack.length;
                                    return sa
                                });
                            U.depthCounter--;
                            --U.localStack.length;
                            return ma
                        }
                    },
                    castString: function(T) {
                        return f.toString(T)
                    },
                    aCheck: function(T, U) {
                        if (f.isFunctionParameter(T))
                            throw Error(d.nodeErrorMessage({
                                type: U
                            }, "RUNTIME", "FUNCTIONCONTEXTILLEGAL"));
                        return T === f.voidOperation ? null : T
                    },
                    Dictionary: m,
                    Feature: l,
                    dictionary: function(T) {
                        for (var U = {}, ma = 0; ma < T.length; ma += 2) {
                            if (f.isFunctionParameter(T[ma + 1]))
                                throw Error("Illegal Argument");
                            if (!1 === f.isString(T[ma]))
                                throw Error("Illegal Argument");
                            U[T[ma].toString()] = T[ma + 1] === f.voidOperation ? null : T[ma + 1]
                        }
                        T = new m(U);
                        T.immutable = !1;
                        return T
                    },
                    strCheck: function(T) {
                        if (!1 === f.isString(T))
                            throw Error("Illegal Argument");
                        return T
                    },
                    unary: function(T, U) {
                        if (f.isBoolean(T)) {
                            if ("!" === U)
                                return !T;
                            if ("-" === U)
                                return -1 * f.toNumber(T);
                            if ("+" === U)
                                return 1 * f.toNumber(T);
                            if ("~" === U)
                                return ~f.toNumber(T);
                            throw Error(d.nodeErrorMessage({
                                type: "UnaryExpression",
                                operator: U,
                                prefix: null,
                                argument: null
                            }, "RUNTIME", "NOTSUPPORTEDUNARYOPERATOR"));
                        }
                        if ("-" === U)
                            return -1 * f.toNumber(T);
                        if ("+" === U)
                            return 1 * f.toNumber(T);
                        if ("~" === U)
                            return ~f.toNumber(T);
                        throw Error(d.nodeErrorMessage({
                            type: "UnaryExpression",
                            operator: U,
                            prefix: null,
                            argument: null
                        }, "RUNTIME", "NOTSUPPORTEDUNARYOPERATOR"));
                    },
                    logicalCheck: function(T) {
                        if (!1 === f.isBoolean(T))
                            throw Error(d.nodeErrorMessage({
                                type: "LogicalExpression",
                                operator: null,
                                left: null,
                                right: null
                            }, "RUNTIME", "ONLYORORAND"));
                        return T
                    },
                    logical: function(T, U, ma) {
                        if (f.isBoolean(T) && f.isBoolean(U))
                            switch (ma) {
                            case "||":
                                return T || U;
                            case "\x26\x26":
                                return T && U
                            }
                        throw Error(d.nodeErrorMessage({
                            type: "LogicalExpression",
                            operator: null,
                            left: null,
                            right: null
                        }, "RUNTIME", "ONLYORORAND"));
                    },
                    binary: function(T, U, ma) {
                        switch (ma) {
                        case "|":
                        case "\x3c\x3c":
                        case "\x3e\x3e":
                        case "\x3e\x3e\x3e":
                        case "^":
                        case "\x26":
                            return f.binaryOperator(f.toNumber(T), f.toNumber(U), ma);
                        case "\x3d\x3d":
                            return f.equalityTest(T, U);
                        case "\x3d":
                            return f.equalityTest(T, U);
                        case "!\x3d":
                            return !f.equalityTest(T, U);
                        case "\x3c":
                            return f.greaterThanLessThan(T, U, ma);
                        case "\x3e":
                            return f.greaterThanLessThan(T, U, ma);
                        case "\x3c\x3d":
                            return f.greaterThanLessThan(T, U, ma);
                        case "\x3e\x3d":
                            return f.greaterThanLessThan(T, U, ma);
                        case "+":
                            return f.isString(T) || f.isString(U) ? f.toString(T) + f.toString(U) : f.toNumber(T) + f.toNumber(U);
                        case "-":
                            return f.toNumber(T) - f.toNumber(U);
                        case "*":
                            return f.toNumber(T) * f.toNumber(U);
                        case "/":
                            return f.toNumber(T) / f.toNumber(U);
                        case "%":
                            return f.toNumber(T) % f.toNumber(U);
                        default:
                            throw Error(d.nodeErrorMessage({
                                type: "BinaryExpression",
                                operator: ma,
                                left: T,
                                right: U
                            }, "RUNTIME", "OPERATORNOTRECOGNISED"));
                        }
                    },
                    assign: function(T, U, ma) {
                        switch (U) {
                        case "\x3d":
                            return T === f.voidOperation ? null : T;
                        case "/\x3d":
                            return f.toNumber(ma) / f.toNumber(T);
                        case "*\x3d":
                            return f.toNumber(ma) * f.toNumber(T);
                        case "-\x3d":
                            return f.toNumber(ma) - f.toNumber(T);
                        case "+\x3d":
                            return f.isString(ma) || f.isString(T) ? f.toString(ma) + f.toString(T) : f.toNumber(ma) + f.toNumber(T);
                        case "%\x3d":
                            return f.toNumber(ma) % f.toNumber(T);
                        default:
                            throw Error(d.nodeErrorMessage({
                                type: "AssignmentExpression",
                                operator: U,
                                left: null,
                                right: null
                            }, "RUNTIME", "OPERATORNOTRECOGNISED"));
                        }
                    },
                    update: function(T, U, ma, sa) {
                        var ya = f.toNumber(T[U]);
                        T[U] = "++" === ma ? ya + 1 : ya - 1;
                        return !1 === sa ? ya : "++" === ma ? ya + 1 : ya - 1
                    },
                    graphicToFeature: function(T, U) {
                        return null === T ? null : l.createFromGraphicLikeObject(T.geometry, T.attributes, U)
                    },
                    memberupdate: function(T, U, ma, sa) {
                        if (f.isArray(T))
                            if (f.isNumber(U)) {
                                0 > U && (U = T.length + U);
                                if (0 > U || U >= T.length)
                                    throw Error("Assignment outside of array bounds");
                                var ya = f.toNumber(T[U]);
                                T[U] = "++" === ma ? ya + 1 : ya - 1
                            } else
                                throw Error("Invalid Parameter");
                        else if (T instanceof m) {
                            if (!1 === f.isString(U))
                                throw Error("Dictionary accessor must be a string");
                            if (!0 === T.hasField(U))
                                ya = f.toNumber(T.field(U)),
                                T.setField(U, "++" === ma ? ya + 1 : ya - 1);
                            else
                                throw Error("Invalid Parameter");
                        } else if (T instanceof l) {
                            if (!1 === f.isString(U))
                                throw Error("Feature accessor must be a string");
                            if (!0 === T.hasField(U))
                                ya = f.toNumber(T.field(U)),
                                T.setField(U, "++" === ma ? ya + 1 : ya - 1);
                            else
                                throw Error("Invalid Parameter");
                        } else {
                            if (f.isImmutableArray(T))
                                throw Error("Array is Immutable");
                            throw Error("Invalid Parameter");
                        }
                        return !1 === sa ? ya : "++" === ma ? ya + 1 : ya - 1
                    },
                    assignmember: function(T, U, ma, sa) {
                        if (f.isArray(T))
                            if (f.isNumber(U)) {
                                0 > U && (U = T.length + U);
                                if (0 > U || U > T.length)
                                    throw Error("Assignment outside of array bounds");
                                if (U === T.length && "\x3d" !== ma)
                                    throw Error("Invalid Parameter");
                                T[U] = this.assign(sa, ma, T[U])
                            } else
                                throw Error("Invalid Parameter");
                        else if (T instanceof m) {
                            if (!1 === f.isString(U))
                                throw Error("Dictionary accessor must be a string");
                            if (!0 === T.hasField(U))
                                T.setField(U, this.assign(sa, ma, T.field(U)));
                            else {
                                if ("\x3d" !== ma)
                                    throw Error("Invalid Parameter");
                                T.setField(U, this.assign(sa, ma, null))
                            }
                        } else if (T instanceof l) {
                            if (!1 === f.isString(U))
                                throw Error("Feature accessor must be a string");
                            if (!0 === T.hasField(U))
                                T.setField(U, this.assign(sa, ma, T.field(U)));
                            else {
                                if ("\x3d" !== ma)
                                    throw Error("Invalid Parameter");
                                T.setField(U, this.assign(sa, ma, null))
                            }
                        } else {
                            if (f.isImmutableArray(T))
                                throw Error("Array is Immutable");
                            throw Error("Invalid Parameter");
                        }
                    },
                    member: function(T, U) {
                        if (null === T)
                            throw Error(d.nodeErrorMessage({
                                type: "MemberExpression",
                                object: null,
                                property: null,
                                computed: null
                            }, "RUNTIME", "NOTFOUND"));
                        if (T instanceof m || T instanceof l) {
                            if (f.isString(U))
                                return T.field(U);
                            throw Error(d.nodeErrorMessage({
                                type: "MemberExpression",
                                object: null,
                                property: null,
                                computed: null
                            }, "RUNTIME", "INVALIDTYPE"));
                        }
                        if (T instanceof z) {
                            if (f.isString(U))
                                return da(T, U, "MemberExpression");
                            throw Error(d.nodeErrorMessage({
                                type: "MemberExpression",
                                object: null,
                                property: null,
                                computed: null
                            }, "RUNTIME", "INVALIDTYPE"));
                        }
                        if (f.isArray(T)) {
                            if (f.isNumber(U) && isFinite(U) && Math.floor(U) === U) {
                                0 > U && (U = T.length + U);
                                if (U >= T.length || 0 > U)
                                    throw Error(d.nodeErrorMessage({
                                        type: "MemberExpression",
                                        object: null,
                                        property: null,
                                        computed: null
                                    }, "RUNTIME", "OUTOFBOUNDS"));
                                return T[U]
                            }
                            throw Error(d.nodeErrorMessage({
                                type: "MemberExpression",
                                object: null,
                                property: null,
                                computed: null
                            }, "RUNTIME", "INVALIDTYPE"));
                        }
                        if (f.isString(T)) {
                            if (f.isNumber(U) && isFinite(U) && Math.floor(U) === U) {
                                0 > U && (U = T.length + U);
                                if (U >= T.length || 0 > U)
                                    throw Error(d.nodeErrorMessage({
                                        type: "MemberExpression",
                                        object: null,
                                        property: null,
                                        computed: null
                                    }, "RUNTIME", "OUTOFBOUNDS"));
                                return T[U]
                            }
                            throw Error(d.nodeErrorMessage({
                                type: "MemberExpression",
                                object: null,
                                property: null,
                                computed: null
                            }, "RUNTIME", "INVALIDTYPE"));
                        }
                        if (f.isImmutableArray(T) && f.isNumber(U) && isFinite(U) && Math.floor(U) === U) {
                            0 > U && (U = T.length() + U);
                            if (U >= T.length() || 0 > U)
                                throw Error(d.nodeErrorMessage({
                                    type: "MemberExpression",
                                    object: null,
                                    property: null,
                                    computed: null
                                }, "RUNTIME", "OUTOFBOUNDS"));
                            return T.get(U)
                        }
                        throw Error(d.nodeErrorMessage({
                            type: "MemberExpression",
                            object: null,
                            property: null,
                            computed: null
                        }, "RUNTIME", "INVALIDTYPE"));
                    },
                    callfunc: function(T, U, ma) {
                        return T instanceof f.NativeFunction ? T.fn(ma, U) : T instanceof f.SizzleFunction ? T.fn.apply(this, U) : T.apply(this, U)
                    }
                };
                y.compileScript = function(T, U, ma) {
                    void 0 === U && (U = null);
                    void 0 === ma && (ma = !1);
                    null === U && (U = {
                        vars: {},
                        customfunctions: {}
                    });
                    U = {
                        isAsync: ma,
                        globalScope: R(U.vars, ma ? ca : Aa, U.customfunctions),
                        localScope: null,
                        mangleMap: {},
                        console: ta,
                        lrucache: U.lrucache,
                        interceptor: U.interceptor,
                        services: U.services,
                        symbols: {
                            symbolCounter: 0
                        }
                    };
                    T = E(U, T.body[0].body);
                    "" === T && (T = "lc.voidOperation; ");
                    U = {
                        lc: f,
                        lang: Ea,
                        mangles: U.mangleMap,
                        postProcess: function(sa) {
                            sa instanceof f.ReturnResult && (sa = sa.value);
                            sa instanceof f.ImplicitResult && (sa = sa.value);
                            sa === f.voidOperation && (sa = null);
                            if (sa === f.breakResult)
                                throw Error("Cannot return BREAK");
                            if (sa === f.continueResult)
                                throw Error("Cannot return CONTINUE");
                            if (f.isFunctionParameter(sa))
                                throw Error("Cannot return FUNCTION");
                            return sa
                        },
                        prepare: function(sa, ya) {
                            var Oa = sa.spatialReference;
                            if (null === Oa || void 0 === Oa)
                                Oa = new D({
                                    wkid: 102100
                                });
                            var Ua = sa.vars
                              , Xa = sa.customfunctions
                              , Ma = ya ? new oa : new X;
                            Ua || (Ua = {});
                            Xa || (Xa = {});
                            var I = new m({
                                newline: "\n",
                                tab: "\t",
                                singlequote: "'",
                                doublequote: '"',
                                forwardslash: "/",
                                backwardslash: "\\"
                            });
                            I.immutable = !1;
                            Ma._SymbolsMap = {
                                textformatting: 1,
                                infinity: 1,
                                pi: 1
                            };
                            Ma.textformatting = I;
                            Ma.infinity = Number.POSITIVE_INFINITY;
                            Ma.pi = Math.PI;
                            for (var Q in Xa)
                                Ma[Q] = Xa[Q],
                                Ma._SymbolsMap[Q] = 1;
                            for (Q in Ua)
                                Ma._SymbolsMap[Q] = 1,
                                Ma[Q] = Ua[Q] && "esri.Graphic" === Ua[Q].declaredClass ? l.createFromGraphic(Ua[Q]) : Ua[Q];
                            return {
                                localStack: [],
                                isAsync: ya,
                                mangleMap: this.mangles,
                                spatialReference: Oa,
                                globalScope: Ma,
                                abortSignal: void 0 === sa.abortSignal || null === sa.abortSignal ? {
                                    aborted: !1
                                } : sa.abortSignal,
                                localScope: null,
                                services: sa.services,
                                console: sa.console ? sa.console : ta,
                                lrucache: sa.lrucache,
                                interceptor: sa.interceptor,
                                symbols: {
                                    symbolCounter: 0
                                },
                                depthCounter: 1
                            }
                        }
                    };
                    return (new Function("context","spatialReference",ma ? "var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n" + T + "\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); " : "var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n " + T + "\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(U)
                }
                ;
                y.enableAsyncSupport = function() {
                    return x.create(function(T, U) {
                        C(["./functions/geomasync"], function(ma) {
                            ha([ma], "async");
                            T(!0)
                        }, function(ma) {
                            U(ma)
                        })
                    })
                }
            })
        },
        "esri/arcade/ArcadePortal": function() {
            var C = this && this.__extends || function() {
                var y = function(b, w) {
                    y = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(m, l) {
                        m.__proto__ = l
                    }
                    || function(m, l) {
                        for (var k in l)
                            l.hasOwnProperty(k) && (m[k] = l[k])
                    }
                    ;
                    return y(b, w)
                };
                return function(b, w) {
                    function m() {
                        this.constructor = b
                    }
                    y(b, w);
                    b.prototype = null === w ? Object.create(w) : (m.prototype = w.prototype,
                    new m)
                }
            }();
            define(["require", "exports", "./Dictionary"], function(y, b, w) {
                return function(m) {
                    function l(k) {
                        var h = m.call(this) || this;
                        h.immutable = !1;
                        h.setField("url", k);
                        h.immutable = !0;
                        return h
                    }
                    C(l, m);
                    return l
                }(w)
            })
        },
        "esri/arcade/Attachment": function() {
            var C = this && this.__extends || function() {
                var y = function(b, w) {
                    y = Object.setPrototypeOf || {
                        __proto__: []
                    }instanceof Array && function(m, l) {
                        m.__proto__ = l
                    }
                    || function(m, l) {
                        for (var k in l)
                            l.hasOwnProperty(k) && (m[k] = l[k])
                    }
                    ;
                    return y(b, w)
                };
                return function(b, w) {
                    function m() {
                        this.constructor = b
                    }
                    y(b, w);
                    b.prototype = null === w ? Object.create(w) : (m.prototype = w.prototype,
                    new m)
                }
            }();
            define(["require", "exports", "./Dictionary"], function(y, b, w) {
                return function(m) {
                    function l(k, h, f, d, a) {
                        var c = m.call(this) || this;
                        c.attachmentUrl = a;
                        c.immutable = !1;
                        c.setField("id", k);
                        c.setField("name", h);
                        c.setField("contenttype", f);
                        c.setField("size", d);
                        c.immutable = !0;
                        return c
                    }
                    C(l, m);
                    return l
                }(w)
            })
        },
        "esri/arcade/Feature": function() {
            var C = this && this.__assign || function() {
                C = Object.assign || function(y) {
                    for (var b, w = 1, m = arguments.length; w < m; w++) {
                        b = arguments[w];
                        for (var l in b)
                            Object.prototype.hasOwnProperty.call(b, l) && (y[l] = b[l])
                    }
                    return y
                }
                ;
                return C.apply(this, arguments)
            }
            ;
            define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "), function(y, b, w, m, l, k, h, f, d) {
                return function() {
                    function a() {
                        this.declaredClass = "esri.arcade.Feature";
                        this._layer = this.attributes = this._geometry = this._adapter = null;
                        this.immutable = this._datesfixed = !0;
                        this._datefields = null;
                        this.immutable = !0
                    }
                    a.createFromGraphic = function(c) {
                        var e = new a;
                        e._geometry = c.geometry ? c.geometry : null;
                        e.attributes = void 0 === c.attributes ? {} : null === c.attributes ? {} : c.attributes;
                        c._sourceLayer ? (e._layer = c._sourceLayer,
                        e._datesfixed = !1) : c._layer ? (e._layer = c._layer,
                        e._datesfixed = !1) : c.layer ? (e._layer = c.layer,
                        e._datesfixed = !1) : c.sourceLayer && (e._layer = c.sourceLayer,
                        e._datesfixed = !1);
                        return e
                    }
                    ;
                    a.createFromArcadeFeature = function(c) {
                        var e = new a;
                        e._datesfixed = c._datesfixed;
                        e.attributes = c.attributes;
                        e._geometry = c._geometry;
                        c._layer && (e._layer = c._layer);
                        return e
                    }
                    ;
                    a.createFromArcadeDictionary = function(c) {
                        var e = new a;
                        e.attributes = c.field("attributes");
                        null !== e.attributes ? e.attributes instanceof w ? (e.attributes = e.attributes.attributes,
                        null === e.attributes && (e.attributes = {})) : e.attributes = {} : e.attributes = {};
                        e._geometry = c.field("geometry");
                        null !== e._geometry && (e._geometry instanceof w ? e._geometry = a.parseGeometryFromDictionary(e._geometry) : e._geometry instanceof k || (e._geometry = null));
                        return e
                    }
                    ;
                    a.createFromGraphicLikeObject = function(c, e, n) {
                        void 0 === n && (n = null);
                        var t = new a;
                        null === e && (e = {});
                        t.attributes = e;
                        t._geometry = c ? c : null;
                        t._layer = n;
                        t._layer && (t._datesfixed = !1);
                        t._adapter = null;
                        return t
                    }
                    ;
                    a.prototype.repurposeFromGraphicLikeObject = function(c, e, n) {
                        void 0 === n && (n = null);
                        null === e && (e = {});
                        this.attributes = e;
                        this._geometry = c ? c : null;
                        this._datesfixed = (this._layer = n) ? !1 : !0
                    }
                    ;
                    a.prototype.castToText = function() {
                        if (this._adapter)
                            return this._adapter.castToText();
                        var c = "";
                        !1 === this._datesfixed && this._fixDates();
                        for (var e in this.attributes) {
                            "" !== c && (c += ",");
                            var n = this.attributes[e];
                            null == n ? c += JSON.stringify(e) + ":null" : l.isBoolean(n) || l.isNumber(n) || l.isString(n) ? c += JSON.stringify(e) + ":" + JSON.stringify(n) : n instanceof k ? c += JSON.stringify(e) + ":" + l.toStringExplicit(n) : n instanceof m ? c += JSON.stringify(e) + ":" + l.toStringExplicit(n) : n instanceof Array ? c += JSON.stringify(e) + ":" + l.toStringExplicit(n) : n instanceof Date ? c += JSON.stringify(e) + ":" + JSON.stringify(n) : null !== n && "object" === typeof n && void 0 !== n.castToText && (c += JSON.stringify(e) + ":" + n.castToText())
                        }
                        return '{"geometry":' + (null === this.geometry() ? "null" : l.toStringExplicit(this.geometry())) + ',"attributes":{' + c + "}}"
                    }
                    ;
                    a.prototype._fixDates = function() {
                        if (null !== this._datefields)
                            0 < this._datefields.length && this._fixDateFields(this._datefields);
                        else {
                            for (var c = [], e = 0; e < this._layer.fields.length; e++) {
                                var n = this._layer.fields[e];
                                "date" !== n.type && "esriFieldTypeDate" !== n.type || c.push(n.name)
                            }
                            this._datefields = c;
                            0 < c.length && this._fixDateFields(c)
                        }
                        this._datesfixed = !0
                    }
                    ;
                    a.prototype._fixDateFields = function(c) {
                        this.attributes = C({}, this.attributes);
                        for (var e = 0; e < c.length; e++) {
                            var n = this.attributes[c[e]];
                            if (null !== n)
                                if (void 0 === n)
                                    for (var t in this.attributes) {
                                        if (t.toLowerCase() === c[e].toLowerCase()) {
                                            n = this.attributes[t];
                                            null === n || n instanceof Date || (this.attributes[t] = new Date(n));
                                            break
                                        }
                                    }
                                else
                                    n instanceof Date || (this.attributes[c[e]] = new Date(n))
                        }
                    }
                    ;
                    a.prototype.geometry = function() {
                        if (this._adapter)
                            return this._adapter.geometry();
                        if (null === this._geometry)
                            return this._geometry;
                        this._geometry instanceof k || (this._geometry = f.fromJson(this._geometry));
                        return this._geometry
                    }
                    ;
                    a.prototype.field = function(c) {
                        if (this._adapter)
                            return this._adapter.field(c);
                        !1 === this._datesfixed && this._fixDates();
                        var e = this.attributes[c];
                        if (void 0 !== e)
                            return e;
                        e = c.toLowerCase();
                        for (var n in this.attributes)
                            if (n.toLowerCase() === e)
                                return this.attributes[n];
                        if (this._hasFieldDefinition(e))
                            return null;
                        throw Error("Field not Found : " + c);
                    }
                    ;
                    a.prototype._hasFieldDefinition = function(c) {
                        if (null === this._layer)
                            return !1;
                        for (var e = 0; e < this._layer.fields.length; e++)
                            if (this._layer.fields[e].name.toLowerCase() === c)
                                return !0;
                        return !1
                    }
                    ;
                    a.prototype._field = function(c) {
                        var e;
                        if (this._adapter)
                            return null !== (e = this._adapter.field(c)) && void 0 !== e ? e : null;
                        !1 === this._datesfixed && this._fixDates();
                        e = c.toLowerCase();
                        c = this.attributes[c];
                        if (void 0 !== c)
                            return c;
                        for (var n in this.attributes)
                            if (n.toLowerCase() === e)
                                return this.attributes[n];
                        return null
                    }
                    ;
                    a.prototype.setField = function(c, e) {
                        if (this.immutable)
                            throw Error("Feature is Immutable");
                        if (!1 === l.isSimpleType(e))
                            throw Error("Illegal Value Assignment to Feature");
                        if (this._adapter)
                            this._adapter.setField(c, e);
                        else {
                            var n = c.toLowerCase();
                            if (void 0 === this.attributes[c])
                                for (var t in this.attributes)
                                    if (t.toLowerCase() === n) {
                                        this.attributes[t] = e;
                                        return
                                    }
                            this.attributes[c] = e
                        }
                    }
                    ;
                    a.prototype.hasField = function(c) {
                        if (this._adapter)
                            return this._adapter.hasField(c);
                        var e = c.toLowerCase();
                        if (void 0 !== this.attributes[c])
                            return !0;
                        for (var n in this.attributes)
                            if (n.toLowerCase() === e)
                                return !0;
                        return this._hasFieldDefinition(e) ? !0 : !1
                    }
                    ;
                    a.prototype.keys = function() {
                        if (this._adapter)
                            return this._adapter.keys();
                        var c = [], e = {}, n;
                        for (n in this.attributes)
                            c.push(n),
                            e[n.toLowerCase()] = 1;
                        if (null !== this._layer)
                            for (n = 0; n < this._layer.fields.length; n++) {
                                var t = this._layer.fields[n];
                                1 !== e[t.name.toLowerCase()] && c.push(t.name)
                            }
                        return c = c.sort()
                    }
                    ;
                    a.parseGeometryFromDictionary = function(c) {
                        c = a.convertDictionaryToJson(c, !0);
                        void 0 !== c.hasm && (c.hasM = c.hasm,
                        delete c.hasm);
                        void 0 !== c.hasz && (c.hasZ = c.hasz,
                        delete c.hasz);
                        void 0 !== c.spatialreference && (c.spatialReference = c.spatialreference,
                        delete c.spatialreference);
                        void 0 !== c.rings && (c.rings = this.fixPathArrays(c.rings, !0 === c.hasZ, !0 === c.hasZ));
                        void 0 !== c.paths && (c.paths = this.fixPathArrays(c.paths, !0 === c.hasZ, !0 === c.hasM));
                        void 0 !== c.points && (c.points = this.fixPointArrays(c.points, !0 === c.hasZ, !0 === c.hasM));
                        return f.fromJson(c)
                    }
                    ;
                    a.fixPathArrays = function(c, e, n) {
                        var t = [];
                        if (c instanceof Array)
                            for (var g = 0; g < c.length; g++)
                                t.push(this.fixPointArrays(c[g], e, n));
                        else if (c instanceof m)
                            for (g = 0; g < c.length(); g++)
                                t.push(this.fixPointArrays(c.get(g), e, n));
                        return t
                    }
                    ;
                    a.fixPointArrays = function(c, e, n) {
                        var t = [];
                        if (c instanceof Array)
                            for (var g = 0; g < c.length; g++) {
                                var q = c[g];
                                q instanceof h ? e && n ? t.push([q.x, q.y, q.z, q.m]) : e ? t.push([q.x, q.y, q.z]) : n ? t.push([q.x, q.y, q.m]) : t.push([q.x, q.y]) : q instanceof m ? t.push(q.toArray()) : t.push(q)
                            }
                        else if (c instanceof m)
                            for (g = 0; g < c.length(); g++)
                                q = c.get(g),
                                q instanceof h ? e && n ? t.push([q.x, q.y, q.z, q.m]) : e ? t.push([q.x, q.y, q.z]) : n ? t.push([q.x, q.y, q.m]) : t.push([q.x, q.y]) : q instanceof m ? t.push(q.toArray()) : t.push(q);
                        return t
                    }
                    ;
                    a.convertDictionaryToJson = function(c, e) {
                        void 0 === e && (e = !1);
                        var n = {}, t;
                        for (t in c.attributes) {
                            var g = c.attributes[t];
                            g instanceof w && (g = a.convertDictionaryToJson(g));
                            e ? n[t.toLowerCase()] = g : n[t] = g
                        }
                        return n
                    }
                    ;
                    a.parseAttributesFromDictionary = function(c) {
                        var e = {}, n;
                        for (n in c.attributes) {
                            var t = c.attributes[n];
                            if (l.isSimpleType(t))
                                e[n] = t;
                            else
                                throw Error("Illegal Argument");
                        }
                        return e
                    }
                    ;
                    a.fromJson = function(c) {
                        var e = null;
                        null !== c.geometry && void 0 !== c.geometry && (e = f.fromJson(c.geometry));
                        var n = {};
                        if (null !== c.attributes && void 0 !== c.attributes)
                            for (var t in c.attributes) {
                                var g = c.attributes[t];
                                if (null === g)
                                    n[t] = g;
                                else if (l.isString(g) || l.isNumber(g) || l.isBoolean(g) || l.isDate(g))
                                    n[t] = g;
                                else
                                    throw Error("Illegal Argument");
                            }
                        return a.createFromGraphicLikeObject(e, n, null)
                    }
                    ;
                    a.prototype.fullDomain = function(c, e) {
                        return null !== this._layer && this._layer.fields ? l.getDomain(c, this._layer, this, e) : null
                    }
                    ;
                    a.prototype.subtypes = function() {
                        return null !== this._layer && this._layer.fields ? this._layer.typeIdField ? {
                            subtypeField: this._layer.typeIdField,
                            subtypes: this._layer.types ? this._layer.types.map(function(c) {
                                return {
                                    name: c.name,
                                    code: c.id
                                }
                            }) : []
                        } : null : null
                    }
                    ;
                    a.prototype.domainValueLookup = function(c, e, n) {
                        if (null === this._layer || !this._layer.fields)
                            return null;
                        n = l.getDomain(c, this._layer, this, n);
                        if (void 0 === e)
                            try {
                                e = this.field(c)
                            } catch (t) {
                                return null
                            }
                        return l.getDomainValue(n, e)
                    }
                    ;
                    a.prototype.gdbVersion = function() {
                        if (null === this._layer)
                            return "";
                        var c = this._layer.gdbVersion;
                        return void 0 === c ? "" : "" === c && this._layer.capabilities && this._layer.capabilities.isVersioned ? "SDE.DEFAULT" : c
                    }
                    ;
                    a.prototype.domainCodeLookup = function(c, e, n) {
                        if (null === this._layer || !this._layer.fields)
                            return null;
                        if (void 0 === e) {
                            try {
                                e = this.field(c)
                            } catch (t) {
                                return null
                            }
                            return e
                        }
                        c = l.getDomain(c, this._layer, this, n);
                        return l.getDomainCode(c, e)
                    }
                    ;
                    a.prototype.schema = function() {
                        if (null === this._layer || !this._layer.fields)
                            return null;
                        for (var c = [], e = 0, n = this._layer.fields; e < n.length; e++)
                            c.push(d.esriFieldToJson(n[e]));
                        return {
                            objectIdField: this._layer.objectIdField,
                            globalIdField: this._layer.globalIdField,
                            geometryType: void 0 === d.layerGeometryEsriRestConstants[this._layer.geometryType] ? "" : d.layerGeometryEsriRestConstants[this._layer.geometryType],
                            fields: c
                        }
                    }
                    ;
                    return a
                }()
            })
        },
        "esri/arcade/featureset/support/shared": function() {
            var C = this && this.__assign || function() {
                C = Object.assign || function(y) {
                    for (var b, w = 1, m = arguments.length; w < m; w++) {
                        b = arguments[w];
                        for (var l in b)
                            Object.prototype.hasOwnProperty.call(b, l) && (y[l] = b[l])
                    }
                    return y
                }
                ;
                return C.apply(this, arguments)
            }
            ;
            define(["require", "exports", "../../polyfill/promiseUtils", "../../../geometry/Extent", "../../../layers/Field"], function(y, b, w, m, l) {
                function k(f) {
                    var d = null;
                    f.domain && (d = "range" === f.domain.type ? {
                        type: "range",
                        range: [f.domain.minValue, f.domain.maxValue]
                    } : {
                        type: "codedValue",
                        codedValues: f.domain.toJson().codedValues
                    });
                    return C(C({
                        name: f.name,
                        type: f.type,
                        alias: f.alias
                    }, void 0 !== f.length ? {
                        length: f.length
                    } : {}), {
                        editable: !0 === f.editable,
                        nullable: !0 === f.nullable,
                        domain: d
                    })
                }
                function h(f) {
                    return f instanceof Date
                }
                Object.defineProperty(b, "__esModule", {
                    value: !0
                });
                b.stableStringify = b.extractServiceUrl = b.reduceArrayWithPromises = b.toEsriGeometryType = b.layerFieldEsriConstants = b.layerGeometryEsriRestConstants = b.layerGeometryEsriConstants = b.callback = b.errback = b.defaultMaxRecords = b.sameGeomType = b.convertLinearUnitsToCode = b.shapeExtent = b.convertSquareUnitsToCode = b.cloneAttributes = b.equalityTest = b.isDate = b.isArray = b.isNumber = b.isBoolean = b.isString = b.IdState = b.esriFieldToJson = b.cloneField = b.FeatureServiceDatabaseType = void 0;
                (function(f) {
                    f[f.Standardised = 0] = "Standardised";
                    f[f.StandardisedNoInterval = 1] = "StandardisedNoInterval";
                    f[f.SqlServer = 2] = "SqlServer";
                    f[f.Oracle = 3] = "Oracle";
                    f[f.Postgres = 4] = "Postgres";
                    f[f.PGDB = 5] = "PGDB";
                    f[f.FILEGDB = 6] = "FILEGDB";
                    f[f.NotEvaluated = 7] = "NotEvaluated"
                }
                )(b.FeatureServiceDatabaseType || (b.FeatureServiceDatabaseType = {}));
                b.cloneField = function(f) {
                    return new l(k(f))
                }
                ;
                b.esriFieldToJson = k;
                (function(f) {
                    f[f.InFeatureSet = 0] = "InFeatureSet";
                    f[f.NotInFeatureSet = 1] = "NotInFeatureSet";
                    f[f.Unknown = 2] = "Unknown"
                }
                )(b.IdState || (b.IdState = {}));
                b.isString = function(f) {
                    return "string" === typeof f || f instanceof String
                }
                ;
                b.isBoolean = function(f) {
                    return "boolean" === typeof f
                }
                ;
                b.isNumber = function(f) {
                    return "number" === typeof f
                }
                ;
                b.isArray = function(f) {
                    return f instanceof Array
                }
                ;
                b.isDate = h;
                b.equalityTest = function(f, d) {
                    return f === d ? !0 : h(f) && h(d) ? f.getTime() === d.getTime() : !1
                }
                ;
                b.cloneAttributes = function(f) {
                    var d = {}, a;
                    for (a in f)
                        d[a] = f[a];
                    return d
                }
                ;
                b.convertSquareUnitsToCode = function(f) {
                    if (void 0 === f)
                        return null;
                    if ("number" === typeof f)
                        return f;
                    switch (f.toLowerCase()) {
                    case "meters":
                    case "meter":
                        return 109404;
                    case "miles":
                    case "mile":
                        return 109413;
                    case "kilometers":
                    case "kilometer":
                    case "km":
                        return 109414
                    }
                    return null
                }
                ;
                b.shapeExtent = function(f) {
                    if (null === f)
                        return null;
                    switch (f.type) {
                    case "polygon":
                    case "multipoint":
                    case "polyline":
                        return f.getExtent();
                    case "point":
                        return new m({
                            xmin: f.x,
                            ymin: f.y,
                            xmax: f.x,
                            ymax: f.y,
                            spatialReference: f.spatialReference
                        });
                    case "extent":
                        return f
                    }
                    return null
                }
                ;
                b.convertLinearUnitsToCode = function(f) {
                    if (void 0 === f)
                        return null;
                    if ("number" === typeof f || "number" === typeof f)
                        return f;
                    switch (f.toLowerCase()) {
                    case "meters":
                    case "meter":
                        return 9001;
                    case "miles":
                    case "mile":
                        return 9035;
                    case "kilometers":
                    case "kilometer":
                    case "km":
                        return 9036
                    }
                    return null
                }
                ;
                b.sameGeomType = function(f, d) {
                    return f === d || "point" === f && "esriGeometryPoint" === d || "polyline" === f && "esriGeometryPolyline" === d || "polygon" === f && "esriGeometryPolygon" === d || "extent" === f && "esriGeometryEnvelope" === d || "multipoint" === f && "esriGeometryMultipoint" === d || "point" === d && "esriGeometryPoint" === f || "polyline" === d && "esriGeometryPolyline" === f || "polygon" === d && "esriGeometryPolygon" === f || "extent" === d && "esriGeometryEnvelope" === f || "multipoint" === d && "esriGeometryMultipoint" === f ? !0 : !1
                }
                ;
                b.defaultMaxRecords = 1E3;
                b.errback = function(f) {
                    return function(d) {
                        f.reject(d)
                    }
                }
                ;
                b.callback = function(f, d) {
                    return function() {
                        try {
                            f.apply(null, arguments)
                        } catch (a) {
                            d.reject(a)
                        }
                    }
                }
                ;
                b.layerGeometryEsriConstants = {
                    point: "point",
                    polygon: "polygon",
                    polyline: "polyline",
                    multipoint: "multipoint",
                    extent: "extent",
                    esriGeometryPoint: "point",
                    esriGeometryPolygon: "polygon",
                    esriGeometryPolyline: "polyline",
                    esriGeometryMultipoint: "multipoint",
                    esriGeometryEnvelope: "extent",
                    envelope: "extent"
                };
                b.layerGeometryEsriRestConstants = {
                    point: "esriGeometryPoint",
                    polygon: "esriGeometryPolygon",
                    polyline: "esriGeometryPolyline",
                    multipoint: "esriGeometryMultipoint",
                    extent: "esriGeometryEnvelope",
                    esriGeometryPoint: "esriGeometryPoint",
                    esriGeometryPolygon: "esriGeometryPolygon",
                    esriGeometryPolyline: "esriGeometryPolyline",
                    esriGeometryMultipoint: "esriGeometryMultipoint",
                    esriGeometryEnvelope: "esriGeometryEnvelope",
                    envelope: "esriGeometryEnvelope"
                };
                b.layerFieldEsriConstants = {
                    "small-integer": "esriFieldTypeSmallInteger",
                    integer: "esriFieldTypeInteger",
                    "long": "esriFieldTypeLong",
                    single: "esriFieldTypeSingle",
                    "double": "esriFieldTypeDouble",
                    string: "esriFieldTypeString",
                    date: "esriFieldTypeDate",
                    oid: "esriFieldTypeOID",
                    geometry: "esriFieldTypeGeometry",
                    blob: "esriFieldTypeBlob",
                    raster: "esriFieldTypeRaster",
                    guid: "esriFieldTypeGUID",
                    "global-id": "esriFieldTypeGlobalID",
                    xml: "eesriFieldTypeXML",
                    esriFieldTypeSmallInteger: "esriFieldTypeSmallInteger",
                    esriFieldTypeInteger: "esriFieldTypeInteger",
                    esriFieldTypeLong: "esriFieldTypeLong",
                    esriFieldTypeSingle: "esriFieldTypeSingle",
                    esriFieldTypeDouble: "esriFieldTypeDouble",
                    esriFieldTypeString: "esriFieldTypeString",
                    esriFieldTypeDate: "esriFieldTypeDate",
                    esriFieldTypeOID: "esriFieldTypeOID",
                    esriFieldTypeGeometry: "esriFieldTypeGeometry",
                    esriFieldTypeBlob: "esriFieldTypeBlob",
                    esriFieldTypeRaster: "esriFieldTypeRaster",
                    esriFieldTypeGUID: "esriFieldTypeGUID",
                    esriFieldTypeGlobalID: "esriFieldTypeGlobalID",
                    esriFieldTypeXML: "eesriFieldTypeXML"
                };
                b.toEsriGeometryType = function(f) {
                    switch (f) {
                    case "point":
                        return "esriGeometryPoint";
                    case "polygon":
                        return "esriGeometryPolygon";
                    case "multipoint":
                        return "esriGeometryMultipoint";
                    case "polyline":
                        return "esriGeometryPolyline";
                    default:
                        return "esriGeometryPoint"
                    }
                }
                ;
                b.reduceArrayWithPromises = function(f, d) {
                    return w.create(function(a, c) {
                        var e = w.resolve(!0);
                        f.reduce(function(n, t, g, q) {
                            return n.then(function(x) {
                                try {
                                    return d(x, t, g, q)
                                } catch (v) {
                                    return w.reject(v)
                                }
                            }, function(x) {
                                return w.reject(x)
                            })
                        }, e).then(a, c)
                    })
                }
                ;
                b.extractServiceUrl = function(f) {
                    if (void 0 === f)
                        return "";
                    f = f.replace(/\/featureserver\/[0-9]*/i, "/FeatureServer");
                    f = f.replace(/\/mapserver\/[0-9]*/i, "/MapServer");
                    return f = f.split("?")[0]
                }
                ;
                b.stableStringify = function(f, d) {
                    d || (d = {});
                    "function" === typeof d && (d = {
                        cmp: d
                    });
                    var a = "boolean" === typeof d.cycles ? d.cycles : !1
                      , c = d.cmp && function(n) {
                        return function(t) {
                            return function(g, q) {
                                return n({
                                    key: g,
                                    value: t[g]
                                }, {
                                    key: q,
                                    value: t[q]
                                })
                            }
                        }
                    }(d.cmp)
                      , e = [];
                    return function g(t) {
                        t && t.toJson && "function" === typeof t.toJson && (t = t.toJson());
                        if (void 0 !== t) {
                            if ("number" === typeof t)
                                return isFinite(t) ? "" + t : "null";
                            if ("object" !== typeof t)
                                return JSON.stringify(t);
                            var q;
                            if (Array.isArray(t)) {
                                var x = "[";
                                for (q = 0; q < t.length; q++)
                                    q && (x += ","),
                                    x += g(t[q]) || "null";
                                return x + "]"
                            }
                            if (null === t)
                                return "null";
                            if (-1 !== e.indexOf(t)) {
                                if (a)
                                    return JSON.stringify("__cycle__");
                                throw new TypeError("Converting circular structure to JSON");
                            }
                            var v = e.push(t) - 1
                              , z = Object.keys(t).sort(c && c(t));
                            x = "";
                            for (q = 0; q < z.length; q++) {
                                var u = z[q]
                                  , p = g(t[u]);
                                p && (x && (x += ","),
                                x += JSON.stringify(u) + ":" + p)
                            }
                            e.splice(v, 1);
                            return "{" + x + "}"
                        }
                    }(f)
                }
            })
        },
        "esri/layers/Field": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "), function(C, y, b, w, m, l, k) {
                C = C(null, {
                    declaredClass: "esri.layers.Field",
                    constructor: function(h) {
                        if (h && y.isObject(h) && (this.name = h.name,
                        this.type = h.type,
                        this.alias = h.alias,
                        this.length = h.length,
                        this.editable = h.editable,
                        this.nullable = h.nullable,
                        this.defaultValue = h.defaultValue,
                        this.description = h.description ? JSON.parse(h.description) : null,
                        this.isViewOverride = !!h.isViewOverride,
                        (h = h.domain) && y.isObject(h)))
                            switch (h.type) {
                            case "range":
                                this.domain = new l(h);
                                break;
                            case "codedValue":
                                this.domain = new k(h)
                            }
                    },
                    toJson: function() {
                        return m.fixJson({
                            name: this.name,
                            type: this.type,
                            alias: this.alias,
                            length: this.length,
                            editable: this.editable,
                            nullable: this.nullable,
                            defaultValue: this.defaultValue,
                            description: this.description ? JSON.stringify(this.description) : null,
                            domain: this.domain ? this.domain.toJson() : null,
                            isViewOverride: this.isViewOverride || void 0
                        })
                    },
                    toJSON: function() {
                        return this.toJson()
                    }
                });
                b("extend-esri") && y.setObject("layers.Field", C, w);
                return C
            })
        },
        "esri/layers/RangeDomain": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "), function(C, y, b, w, m, l) {
                C = C([l], {
                    declaredClass: "esri.layers.RangeDomain",
                    constructor: function(k) {
                        k && y.isObject(k) && (this.minValue = k.range[0],
                        this.maxValue = k.range[1])
                    },
                    toJson: function() {
                        var k = this.inherited(arguments);
                        k.range = [this.minValue, this.maxValue];
                        return m.fixJson(k)
                    }
                });
                b("extend-esri") && y.setObject("layers.RangeDomain", C, w);
                return C
            })
        },
        "esri/layers/Domain": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function(C, y, b, w, m) {
                C = C(null, {
                    declaredClass: "esri.layers.Domain",
                    constructor: function(l) {
                        l && y.isObject(l) && (this.name = l.name,
                        this.type = l.type)
                    },
                    toJson: function() {
                        return m.fixJson({
                            name: this.name,
                            type: this.type
                        })
                    }
                });
                b("extend-esri") && y.setObject("layers.Domain", C, w);
                return C
            })
        },
        "esri/layers/CodedValueDomain": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "), function(C, y, b, w, m, l, k) {
                C = C([k], {
                    declaredClass: "esri.layers.CodedValueDomain",
                    constructor: function(h) {
                        h && y.isObject(h) && (this.codedValues = h.codedValues)
                    },
                    getName: function(h) {
                        var f;
                        b.some(this.codedValues, function(d) {
                            d.code == h && (f = d.name);
                            return !!f
                        });
                        return f
                    },
                    toJson: function() {
                        var h = this.inherited(arguments);
                        h.codedValues = y.clone(this.codedValues);
                        return l.fixJson(h)
                    }
                });
                w("extend-esri") && y.setObject("layers.CodedValueDomain", C, m);
                return C
            })
        },
        "esri/arcade/treeAnalysis": function() {
            define(["require", "exports"], function(C, y) {
                function b(u, p) {
                    return "0" !== u.min && p.length < Number(u.min) || "*" !== u.max && p.length > Number(u.max) ? -2 : 1
                }
                function w(u, p, r) {
                    if (null !== r.localScope && void 0 !== r.localScope[u.toLowerCase()]) {
                        var B = r.localScope[u.toLowerCase()];
                        if ("FormulaFunction" === B.type || "any" === B.type)
                            return void 0 === B.signature && (B.signature = {
                                min: "0",
                                max: "*"
                            }),
                            b(B.signature, p)
                    }
                    return void 0 !== r.globalScope[u.toLowerCase()] && (B = r.globalScope[u.toLowerCase()],
                    "FormulaFunction" === B.type || "any" === B.type) ? (void 0 === B.signature && (B.signature = {
                        min: "0",
                        max: "*"
                    }),
                    b(B.signature, p)) : -1
                }
                function m(u, p) {
                    if (u)
                        for (var r = 0; r < u.length; r++)
                            l(u[r], p)
                }
                function l(u, p) {
                    if (u && !1 !== p(u))
                        switch (u.type) {
                        case "ArrayExpression":
                            m(u.elements, p);
                            break;
                        case "AssignmentExpression":
                        case "BinaryExpression":
                            l(u.left, p);
                            l(u.right, p);
                            break;
                        case "BlockStatement":
                            m(u.body, p);
                            break;
                        case "CallExpression":
                            l(u.callee, p);
                            m(u.arguments, p);
                            break;
                        case "ConditionalExpression":
                            l(u.test, p);
                            l(u.alternate, p);
                            l(u.consequent, p);
                            break;
                        case "ExpressionStatement":
                            l(u.expression, p);
                            break;
                        case "ForInStatement":
                            l(u.left, p);
                            l(u.right, p);
                            l(u.body, p);
                            break;
                        case "ForStatement":
                            l(u.init, p);
                            l(u.test, p);
                            l(u.update, p);
                            l(u.body, p);
                            break;
                        case "FunctionDeclaration":
                        case "FunctionDeclaration":
                        case "FunctionExpression":
                            l(u.id, p);
                            m(u.params, p);
                            l(u.body, p);
                            break;
                        case "IfStatement":
                            l(u.test, p);
                            l(u.consequent, p);
                            l(u.alternate, p);
                            break;
                        case "LogicalExpression":
                            l(u.left, p);
                            l(u.right, p);
                            break;
                        case "MemberExpression":
                            l(u.object, p);
                            l(u.property, p);
                            break;
                        case "ObjectExpression":
                            m(u.properties, p);
                            break;
                        case "Program":
                            m(u.body, p);
                            break;
                        case "Property":
                            l(u.key, p);
                            l(u.value, p);
                            break;
                        case "ReturnStatement":
                            l(u.argument, p);
                            break;
                        case "UnaryExpression":
                            l(u.argument, p);
                            break;
                        case "UpdateExpression":
                            l(u.argument, p);
                            break;
                        case "VariableDeclaration":
                            m(u.declarations, p);
                            break;
                        case "VariableDeclarator":
                            l(u.id, p);
                            l(u.init, p);
                            break;
                        case "TemplateLiteral":
                            m(u.expressions, p),
                            m(u.quasis, p)
                        }
                }
                function k(u, p) {
                    void 0 === p && (p = !0);
                    var r = e(u, "SYNTAX", "UNREOGNISED");
                    try {
                        switch (u.type) {
                        case "VariableDeclarator":
                            return null !== u.init && "FunctionExpression" === u.init.type ? e(u, "SYNTAX", "FUNCTIONVARIABLEDECLARATOR") : "Identifier" !== u.id.type ? e(u, "SYNTAX", "VARIABLEMUSTHAVEIDENTIFIER") : null !== u.init ? k(u.init, !1) : "";
                        case "VariableDeclaration":
                            for (var B = 0; B < u.declarations.length; B++)
                                if (r = k(u.declarations[B], p),
                                "" !== r)
                                    return r;
                            return "";
                        case "ForInStatement":
                            r = k(u.left, p);
                            if ("" !== r)
                                break;
                            if ("VariableDeclaration" === u.left.type) {
                                if (1 < u.left.declarations.length)
                                    return e(u, "SYNTAX", "ONLY1VAR");
                                if (null !== u.left.declarations[0].init)
                                    return e(u, "SYNTAX", "CANNOTDECLAREVAL")
                            } else if ("Identifier" !== u.left.type)
                                return e(u, "SYNTAX", "LEFTNOTVAR");
                            r = k(u.right, p);
                            if ("" !== r)
                                break;
                            r = k(u.body, p);
                            if ("" !== r)
                                break;
                            return "";
                        case "ForStatement":
                            if (null !== u.test && (r = k(u.test, p),
                            "" !== r))
                                break;
                            if (null !== u.init && (r = k(u.init, p),
                            "" !== r))
                                break;
                            if (null !== u.update && (r = k(u.update, p),
                            "" !== r))
                                break;
                            if (null !== u.body && (r = k(u.body, p),
                            "" !== r))
                                break;
                            return "";
                        case "ContinueStatement":
                            return "";
                        case "EmptyStatement":
                            return "";
                        case "BreakStatement":
                            return "";
                        case "IfStatement":
                            r = k(u.test, p);
                            if ("" !== r)
                                break;
                            if (null !== u.consequent && (r = k(u.consequent, !1),
                            "" !== r))
                                break;
                            if (null !== u.alternate && (r = k(u.alternate, !1),
                            "" !== r))
                                break;
                            return "";
                        case "BlockStatement":
                            var D = [];
                            for (B = 0; B < u.body.length; B++)
                                "EmptyStatement" !== u.body[B].type && D.push(u.body[B]);
                            u.body = D;
                            for (B = 0; B < u.body.length; B++)
                                if (r = k(u.body[B], p),
                                "" !== r)
                                    return r;
                            return "";
                        case "FunctionDeclaration":
                            return !1 === p ? e(u, "SYNTAX", "GLOBALFUNCTIONSONLY") : "Identifier" !== u.id.type ? e(u, "SYNTAX", "FUNCTIONMUSTHAVEIDENTIFIER") : k(u.body, !1);
                        case "ReturnStatement":
                            return null !== u.argument ? k(u.argument, p) : "";
                        case "UpdateExpression":
                            return "Identifier" !== u.argument.type && "MemberExpression" !== u.argument.type ? e(u, "SYNTAX", "ASSIGNMENTTOVARSONLY") : k(u.argument, p);
                        case "AssignmentExpression":
                            if ("Identifier" !== u.left.type && "MemberExpression" !== u.left.type)
                                return e(u, "SYNTAX", "ASSIGNMENTTOVARSONLY");
                            r = k(u.left, p);
                            if ("" !== r)
                                break;
                            switch (u.operator) {
                            case "\x3d":
                            case "/\x3d":
                            case "*\x3d":
                            case "%\x3d":
                            case "+\x3d":
                            case "-\x3d":
                                break;
                            default:
                                return e(u, "SYNTAX", "OPERATORNOTRECOGNISED")
                            }
                            return k(u.right, !1);
                        case "ExpressionStatement":
                            return k(u.expression, !1);
                        case "Identifier":
                            r = "";
                            break;
                        case "MemberExpression":
                            r = k(u.object, p);
                            if ("" !== r)
                                break;
                            return !0 === u.computed ? k(u.property, p) : "";
                        case "Literal":
                            return "";
                        case "TemplateElement":
                            return "";
                        case "CallExpression":
                            if ("Identifier" !== u.callee.type)
                                return e(u, "SYNTAX", "ONLYNODESSUPPORTED");
                            r = "";
                            for (B = 0; B < u.arguments.length; B++)
                                if (r = k(u.arguments[B], p),
                                "" !== r)
                                    return r;
                            return "";
                        case "UnaryExpression":
                            r = k(u.argument, p);
                            break;
                        case "BinaryExpression":
                            r = k(u.left, p);
                            if ("" !== r)
                                break;
                            r = k(u.right, p);
                            if ("" !== r)
                                break;
                            switch (u.operator) {
                            case "|":
                            case "\x26":
                            case "\x3e\x3e":
                            case "\x3c\x3c":
                            case "\x3e\x3e":
                            case "\x3e\x3e\x3e":
                            case "^":
                            case "\x3d\x3d":
                            case "!\x3d":
                            case "\x3c":
                            case "\x3c\x3d":
                            case "\x3e":
                            case "\x3e\x3d":
                            case "+":
                            case "-":
                            case "*":
                            case "/":
                            case "%":
                                break;
                            default:
                                return e(u, "SYNTAX", "OPERATORNOTRECOGNISED")
                            }
                            return "";
                        case "LogicalExpression":
                            r = k(u.left, p);
                            if ("" !== r)
                                break;
                            r = k(u.right);
                            if ("" !== r)
                                break;
                            switch (u.operator) {
                            case "\x26\x26":
                            case "||":
                                break;
                            default:
                                return e(u, "SYNTAX", "OPERATORNOTRECOGNISED")
                            }
                            return "";
                        case "ConditionalExpression":
                            return e(u, "SYNTAX", "NOTSUPPORTED");
                        case "ArrayExpression":
                            r = "";
                            for (B = 0; B < u.elements.length && (r = k(u.elements[B], p),
                            "" === r); B++)
                                ;
                            break;
                        case "TemplateLiteral":
                            r = "";
                            for (B = 0; B < u.quasis.length; B++)
                                if (r = k(u.quasis[B], p),
                                "" !== r)
                                    return r;
                            for (B = 0; B < u.expressions.length && (r = k(u.expressions[B], p),
                            "" === r); B++)
                                ;
                            break;
                        case "ObjectExpression":
                            r = "";
                            for (B = 0; B < u.properties.length; B++) {
                                r = "";
                                if (null !== u.properties[B].key && ("Literal" !== u.properties[B].key.type && "Identifier" !== u.properties[B].key.type && (r = e(u, "SYNTAX", "OBJECTPROPERTYMUSTBESTRING")),
                                "Literal" === u.properties[B].key.type)) {
                                    D = u.properties[B].key;
                                    var G = "value"in D ? D.value : null;
                                    "string" === typeof G || G instanceof String || (r = e(u, "SYNTAX", "OBJECTPROPERTYMUSTBESTRING"))
                                }
                                "" === r && (r = k(u.properties[B], p));
                                if ("" !== r)
                                    break
                            }
                            break;
                        case "Property":
                            if ("Literal" !== u.key.type && "Identifier" !== u.key.type)
                                return e(u, "SYNTAX", "ONLYLITERAL");
                            if ("Identifier" !== u.key.type && (r = k(u.key, p),
                            "" !== r))
                                break;
                            r = k(u.value, p)
                        }
                        return r
                    } catch (A) {
                        throw A;
                    }
                }
                function h(u, p) {
                    var r = e(u, "SYNTAX", "UNREOGNISED")
                      , B = null
                      , D = "";
                    try {
                        switch (u.type) {
                        case "VariableDeclarator":
                            if (null !== u.init && "FunctionExpression" === u.init.type)
                                return e(u, "SYNTAX", "FUNCTIONVARIABLEDECLARATOR");
                            var G = null === u.init ? "" : h(u.init, p);
                            if ("" !== G)
                                return G;
                            "Identifier" === u.id.type && (null === p.localScope ? p.globalScope[u.id.name.toLowerCase()] = {
                                type: "any"
                            } : p.localScope[u.id.name.toLowerCase()] = {
                                type: "any"
                            });
                            return "";
                        case "FunctionDeclaration":
                            B = d(u.id.name.toLowerCase(), u);
                            D = a(u, p);
                            if ("" !== D)
                                return D;
                            if (null !== p.localScope)
                                return e(u, "SYNTAX", "GLOBALFUNCTIONSONLY");
                            B.isnative = !1;
                            p.globalScope[u.id.name.toLowerCase()] = {
                                type: "FormulaFunction",
                                signature: [B]
                            };
                            return "";
                        case "VariableDeclaration":
                            r = "";
                            for (var A = 0; A < u.declarations.length && (r = h(u.declarations[A], p),
                            "" === r); A++)
                                ;
                            break;
                        case "IfStatement":
                            r = h(u.test, p);
                            if ("" !== r)
                                break;
                            if ("AssignmentExpression" === u.test.type || "UpdateExpression" === u.test.type)
                                return e(u.test, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION");
                            if (null !== u.consequent && (r = h(u.consequent, p),
                            "" !== r))
                                break;
                            if (null !== u.alternate && (r = h(u.alternate, p),
                            "" !== r))
                                break;
                            return "";
                        case "EmptyStatement":
                            return "";
                        case "BlockStatement":
                            for (A = 0; A < u.body.length; A++)
                                if (r = h(u.body[A], p),
                                "" !== r)
                                    return r;
                            return "";
                        case "ReturnStatement":
                            return null !== u.argument ? h(u.argument, p) : "";
                        case "ForInStatement":
                            if ("VariableDeclaration" === u.left.type) {
                                if (1 < u.left.declarations.length)
                                    return e(u, "SYNTAX", "ONLY1VAR");
                                if (null !== u.left.declarations[0].init)
                                    return e(u, "SYNTAX", "CANNOTDECLAREVAL")
                            } else if ("Identifier" !== u.left.type)
                                return e(u, "SYNTAX", "LEFTNOTVAR");
                            r = h(u.left, p);
                            if ("" !== r)
                                break;
                            r = h(u.right, p);
                            if ("" !== r)
                                break;
                            r = h(u.body, p);
                            if ("" !== r)
                                break;
                            return "";
                        case "ForStatement":
                            if (null !== u.init && (r = h(u.init, p),
                            "" !== r))
                                break;
                            if (null !== u.test && (r = h(u.test, p),
                            "" !== r))
                                break;
                            if (null !== u.body && (r = h(u.body, p),
                            "" !== r))
                                break;
                            if (null !== u.update && (r = h(u.update, p),
                            "" !== r))
                                break;
                            return "";
                        case "BreakStatement":
                            return "";
                        case "ContinueStatement":
                            return "";
                        case "UpdateExpression":
                            if ("Identifier" !== u.argument.type && "MemberExpression" !== u.argument.type)
                                return e(u, "SYNTAX", "ASSIGNMENTTOVARSONLY");
                            var E = !1;
                            if ("MemberExpression" === u.argument.type)
                                return h(u.argument, p);
                            null !== p.localScope && void 0 !== p.localScope[u.argument.name.toLowerCase()] && (E = !0);
                            void 0 !== p.globalScope[u.argument.name.toLowerCase()] && (E = !0);
                            return !1 === E ? "Identifier " + u.argument.name + " has not been declared." : "";
                        case "AssignmentExpression":
                            if ("Identifier" !== u.left.type && "MemberExpression" !== u.left.type)
                                return e(u, "SYNTAX", "ASSIGNMENTTOVARSONLY");
                            var H = h(u.right, p);
                            if ("" !== H)
                                return H;
                            E = !1;
                            if ("MemberExpression" === u.left.type)
                                return H = h(u.left, p),
                                "" !== H ? H : "";
                            null !== p.localScope && void 0 !== p.localScope[u.left.name.toLowerCase()] && (E = !0);
                            void 0 !== p.globalScope[u.left.name.toLowerCase()] && (E = !0);
                            return !1 === E ? "Identifier " + u.left.name + " has not been declared." : "";
                        case "ExpressionStatement":
                            return h(u.expression, p);
                        case "Identifier":
                            var J = u.name.toLowerCase();
                            if (null !== p.localScope && void 0 !== p.localScope[J])
                                return "";
                            r = void 0 !== p.globalScope[J] ? "" : e(u, "SYNTAX", "VARIABLENOTFOUND");
                            break;
                        case "MemberExpression":
                            r = h(u.object, p);
                            if ("" !== r)
                                break;
                            return !0 === u.computed ? h(u.property, p) : "";
                        case "Literal":
                            return "";
                        case "TemplateElement":
                            return "";
                        case "CallExpression":
                            if ("Identifier" !== u.callee.type)
                                return e(u, "SYNTAX", "ONLYNODESSUPPORTED");
                            r = "";
                            for (A = 0; A < u.arguments.length; A++)
                                if (r = h(u.arguments[A], p),
                                "" !== r)
                                    return r;
                            var O = w(u.callee.name, u.arguments, p);
                            -1 === O && (r = e(u, "SYNTAX", "NOTFOUND"));
                            -2 === O && (r = e(u, "SYNTAX", "WRONGSIGNATURE"));
                            break;
                        case "UnaryExpression":
                            r = h(u.argument, p);
                            break;
                        case "BinaryExpression":
                            r = h(u.left, p);
                            if ("" !== r)
                                break;
                            r = h(u.right, p);
                            if ("" !== r)
                                break;
                            return "";
                        case "LogicalExpression":
                            r = h(u.left, p);
                            if ("" !== r)
                                break;
                            if ("AssignmentExpression" === u.left.type || "UpdateExpression" === u.left.type)
                                return e(u.left, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION");
                            r = h(u.right, p);
                            if ("" !== r)
                                break;
                            return "AssignmentExpression" === u.right.type || "UpdateExpression" === u.right.type ? e(u.right, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION") : "";
                        case "ConditionalExpression":
                            return e(u, "SYNTAX", "NOTSUPPORTED");
                        case "ArrayExpression":
                            r = "";
                            for (A = 0; A < u.elements.length && (r = h(u.elements[A], p),
                            "" === r); A++)
                                ;
                            break;
                        case "TemplateLiteral":
                            r = "";
                            for (A = 0; A < u.quasis.length; A++)
                                if (r = h(u.quasis[A], p),
                                "" !== r)
                                    return r;
                            for (A = 0; A < u.expressions.length && (r = h(u.expressions[A], p),
                            "" === r); A++)
                                ;
                            break;
                        case "ObjectExpression":
                            r = "";
                            for (A = 0; A < u.properties.length; A++) {
                                r = "";
                                if (null !== u.properties[A].key && ("Literal" !== u.properties[A].key.type && "Identifier" !== u.properties[A].key.type && (r = e(u, "SYNTAX", "OBJECTPROPERTYMUSTBESTRING")),
                                "Literal" === u.properties[A].key.type)) {
                                    var V = u.properties[A].key
                                      , aa = "value"in V ? V.value : null;
                                    "string" === typeof aa || aa instanceof String || (r = e(u, "SYNTAX", "OBJECTPROPERTYMUSTBESTRING"))
                                }
                                "" === r && (r = h(u.properties[A], p));
                                if ("" !== r)
                                    break
                            }
                            break;
                        case "Property":
                            if ("Literal" !== u.key.type && "Identifier" !== u.key.type)
                                return e(u, "SYNTAX", "ONLYLITERAL");
                            if ("Identifier" !== u.key.type && (r = h(u.key, p),
                            "" !== r))
                                break;
                            r = h(u.value, p)
                        }
                        return r
                    } catch (da) {
                        throw da;
                    }
                }
                function f(u, p) {
                    var r = !1
                      , B = p.toLowerCase();
                    l(u, function(D) {
                        if (r)
                            return !1;
                        "Identifier" === D.type && D.name && D.name.toLowerCase() === B && (r = !0);
                        return !0
                    });
                    return r
                }
                function d(u, p) {
                    var r = [];
                    if (void 0 !== p.params && null !== p.params)
                        for (var B = 0; B < p.params.length; B++)
                            r.push("any");
                    return {
                        name: u,
                        return: "any",
                        params: r
                    }
                }
                function a(u, p) {
                    p = {
                        globalScope: p.globalScope,
                        localScope: {}
                    };
                    for (var r = 0; r < u.params.length; r++)
                        p.localScope[u.params[r].name.toLowerCase()] = {
                            type: "any"
                        };
                    return h(u.body, p)
                }
                function c(u, p, r, B) {
                    var D = {};
                    if (void 0 === u || null === u)
                        u = {};
                    if (void 0 === r || null === r)
                        r = {};
                    D.infinity = {
                        type: "any"
                    };
                    D.textformatting = {
                        type: "any"
                    };
                    D.pi = {
                        type: "any"
                    };
                    for (var G in p)
                        "sync" === B && void 0 !== p[G].min ? D[G] = {
                            type: "FormulaFunction",
                            signature: {
                                min: p[G].min,
                                max: p[G].max
                            }
                        } : "sync" !== B && void 0 !== p[G].fmin && (D[G] = {
                            type: "FormulaFunction",
                            signature: {
                                min: p[G].fmin,
                                max: p[G].fmax
                            }
                        });
                    for (p = 0; p < r.length; p++)
                        G = r[p],
                        D[G.name] = {
                            type: "FormulaFunction",
                            signature: G
                        };
                    for (G in u)
                        D[G] = u[G],
                        D[G].type = "any";
                    return D
                }
                function e(u, p, r) {
                    var B = "";
                    switch (p) {
                    case "SYNTAX":
                        B = "Syntax Error: ";
                        break;
                    case "RUNTIME":
                        B = "Runtime Error: ";
                        break;
                    default:
                        B = "Syntax Error: "
                    }
                    try {
                        switch (u.type) {
                        case "IfStatement":
                            switch (r) {
                            case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":
                                B += " Assignments not be made in logical tests";
                                break;
                            case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":
                                B += " Non Boolean used as Condition"
                            }
                            break;
                        case "UpdateExpression":
                        case "AssignmentExpression":
                            switch (r) {
                            case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":
                                B += " Assignments not be made in logical tests";
                                break;
                            case "ASSIGNMENTTOVARSONLY":
                                B += " Assignments can only be made to identifiers"
                            }
                            break;
                        case "ExpressionStatement":
                            B += " Assignments can only be made to identifiers";
                            break;
                        case "FunctionDeclaration":
                            switch (r) {
                            case "GLOBALFUNCTIONSONLY":
                                B += " Functions cannot be declared as variables";
                                break;
                            case "FUNCTIONMUSTHAVEIDENTIFIER":
                                B += " Function Definition must have an identifier"
                            }
                            break;
                        case "VariableDeclaration":
                            B += " Only 1 variable can be declared at a time";
                            break;
                        case "VariableDeclarator":
                            switch (r) {
                            case "FUNCTIONVARIABLEDECLARATOR":
                                B += " Functions cannot be declared as variables";
                                break;
                            case "VARIABLEMUSTHAVEIDENTIFIER":
                                B += " Variable Definition must have an identifier"
                            }
                            break;
                        case "Identifier":
                            B += " Identifier Not Found. ";
                            B += u.name;
                            break;
                        case "ObjectExpression":
                            switch (r) {
                            case "OBJECTPROPERTYMUSTBESTRING":
                                B += " Property name must be a string"
                            }
                            break;
                        case "ForStatement":
                            switch (r) {
                            case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":
                                B += " Non Boolean used as Condition"
                            }
                            break;
                        case "ForInStatement":
                            switch (r) {
                            case "ONLY1VAR":
                                B += " Can only declare 1 var for use with IN";
                                break;
                            case "CANNOTDECLAREVAL":
                                B += " Can only declare value for use with IN";
                                break;
                            case "LEFTNOVAR":
                                B += "Must provide a variable to iterate with.";
                                break;
                            case "VARIABLENOTDECLARED":
                                B += "Variable must be declared before it is used..";
                                break;
                            case "CANNOTITERATETHISTYPE":
                                B += "This type cannot be used in an IN loop"
                            }
                            break;
                        case "MemberExpression":
                            switch (r) {
                            case "PROPERTYNOTFOUND":
                                B += "Cannot find member property. ";
                                B += !1 === u.computed ? "Identifier" === u.property.type ? u.property.name : "" : "";
                                break;
                            case "OUTOFBOUNDS":
                                B += "Out of Bounds. ";
                                B += !1 === u.computed ? "Identifier" === u.property.type ? u.property.name : "" : "";
                                break;
                            case "NOTFOUND":
                                B += "Cannot call member method on null. ";
                                B += !1 === u.computed ? "Identifier" === u.property.type ? u.property.name : "" : "";
                                break;
                            case "INVALIDTYPE":
                                B += "Cannot call member property on object of this type. ",
                                B += !1 === u.computed ? "Identifier" === u.property.type ? u.property.name : "" : ""
                            }
                            break;
                        case "Property":
                            switch (r) {
                            case "ONLYLITERAL":
                                B += "Property names must be literals or identifiers"
                            }
                            break;
                        case "Literal":
                            break;
                        case "CallExpression":
                            switch (r) {
                            case "WRONGSIGNATURE":
                                B += "Function signature does not match: ";
                                B += "Identifier" === u.callee.type ? u.callee.name : "";
                                break;
                            case "ONLYNODESUPPORTED":
                                B += "Functions must be declared.";
                                B += "Identifier" === u.callee.type ? u.callee.name : "";
                                break;
                            case "NOTAFUNCTION":
                                B += "Not a Function: ";
                                B += "Identifier" === u.callee.type ? u.callee.name : "";
                                break;
                            case "NOTFOUND":
                                B += "Function Not Found: " + ("Identifier" === u.callee.type ? u.callee.name : "")
                            }
                            break;
                        case "UnaryExpression":
                            switch (r) {
                            case "NOTSUPPORTEDUNARYOPERATOR":
                                B += "Operator " + u.operator + " not allowed in this context. Only ! can be used with boolean, and - with a number";
                                break;
                            case "NOTSUPPORTEDTYPE":
                                B += "Unary operator " + u.operator + " cannot be used with this argument."
                            }
                        case "BinaryExpression":
                            switch (r) {
                            case "OPERATORNOTRECOGNISED":
                                B += "Binary Operator not recognised " + u.operator
                            }
                            break;
                        case "LogicalExpression":
                            switch (r) {
                            case "ONLYBOOLEAN":
                                B += "Operator " + u.operator + " cannot be used. Only || or \x26\x26 are allowed values";
                                break;
                            case "ONLYORORAND":
                                B += "Logical Expression " + u.operator + " being applied to parameters that are not boolean."
                            }
                            break;
                        case "ConditionalExpression":
                            B += "Conditional statements not supported.";
                            break;
                        case "ArrayExpression":
                            switch (r) {
                            case "FUNCTIONCONTEXTILLEGAL":
                                B += " Cannot Put Function inside Array."
                            }
                            break;
                        default:
                            B += "Expression contains unrecognised code structures."
                        }
                    } catch (D) {
                        throw D;
                    }
                    return B
                }
                function n(u, p, r) {
                    return {
                        line: u.loc.start.line,
                        character: u.loc.start.column,
                        reason: e(u, p, r)
                    }
                }
                function t(u, p, r, B) {
                    p = {
                        globalScope: p.globalScope,
                        localScope: {}
                    };
                    for (var D = 0; D < u.params.length; D++)
                        p.localScope[u.params[D].name.toLowerCase()] = {
                            type: "any"
                        };
                    g(u.body, p, r, B, !1)
                }
                function g(u, p, r, B, D) {
                    void 0 === D && (D = !0);
                    if (null === u)
                        throw Error("Unnexpexted Expression Syntax");
                    var G = null;
                    try {
                        switch (u.type) {
                        case "VariableDeclarator":
                            if (null !== u.init && "FunctionExpression" === u.init.type) {
                                B.push(n(u, "SYNTAX", "FUNCTIONVARIABLEDECLARATOR"));
                                break
                            }
                            "Identifier" !== u.id.type ? B.push(n(u, "SYNTAX", "VARIABLEMUSTHAVEIDENTIFIER")) : (u.id.name.toLowerCase(),
                            null === p.localScope ? p.globalScope[u.id.name.toLowerCase()] = {
                                type: "any"
                            } : p.localScope[u.id.name.toLowerCase()] = {
                                type: "any"
                            });
                            null !== u.init && g(u.init, p, r, B, D);
                            break;
                        case "FunctionDeclaration":
                            !1 === D && B.push(n(u, "SYNTAX", "GLOBALFUNCTIONSONLY"));
                            "Identifier" !== u.id.type && B.push(n(u, "SYNTAX", "FUNCTIONMUSTHAVEIDENTIFIER"));
                            G = d("", u);
                            t(u, p, r, B);
                            null !== p.localScope && B.push(n(u, "SYNTAX", "GLOBALFUNCTIONSONLY"));
                            G.isnative = !1;
                            "Identifier" === u.id.type && (p.globalScope[u.id.name.toLowerCase()] = {
                                type: "FormulaFunction",
                                signature: [G]
                            });
                            break;
                        case "VariableDeclaration":
                            for (var A = 0; A < u.declarations.length; A++)
                                g(u.declarations[A], p, r, B, D);
                            break;
                        case "IfStatement":
                            null !== u.test && (g(u.test, p, r, B, D),
                            "AssignmentExpression" !== u.test.type && "UpdateExpression" !== u.test.type || B.push(n(u.test, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION")));
                            null !== u.consequent && g(u.consequent, p, r, B, D);
                            null !== u.alternate && g(u.alternate, p, r, B, D);
                            break;
                        case "EmptyStatement":
                            break;
                        case "BlockStatement":
                            if (null !== u.body)
                                for (A = 0; A < u.body.length; A++)
                                    g(u.body[A], p, r, B, D);
                            break;
                        case "ReturnStatement":
                            null !== u.argument && g(u.argument, p, r, B, D);
                            break;
                        case "ForInStatement":
                            "VariableDeclaration" === u.left.type ? (1 < u.left.declarations.length && B.push(n(u, "SYNTAX", "ONLY1VAR")),
                            null !== u.left.declarations[0].init && B.push(n(u, "SYNTAX", "CANNOTDECLAREVAL"))) : "Identifier" !== u.left.type && B.push(n(u, "SYNTAX", "LEFTNOTVAR"));
                            g(u.left, p, r, B, D);
                            g(u.right, p, r, B, D);
                            g(u.body, p, r, B, D);
                            break;
                        case "ForStatement":
                            null !== u.init && g(u.init, p, r, B, D);
                            null !== u.test && g(u.test, p, r, B, D);
                            null !== u.body && g(u.body, p, r, B, D);
                            null !== u.update && g(u.update, p, r, B, D);
                            break;
                        case "BreakStatement":
                            break;
                        case "ContinueStatement":
                            break;
                        case "UpdateExpression":
                            if ("Identifier" !== u.argument.type && "MemberExpression" !== u.argument.type)
                                B.push(n(u, "SYNTAX", "ASSIGNMENTTOVARSONLY"));
                            else {
                                if ("Identifier" === u.argument.type) {
                                    var E = !1;
                                    !1 === r && (null !== p.localScope && void 0 !== p.localScope[u.argument.name.toLowerCase()] && (E = !0),
                                    void 0 !== p.globalScope[u.argument.name.toLowerCase()] && (E = !0),
                                    !1 === E && B.push({
                                        line: null === u ? 0 : u.loc.start.line,
                                        character: null === u ? 0 : u.loc.start.column,
                                        reason: "Identifier " + u.argument.name + " has not been declared."
                                    }))
                                }
                                "MemberExpression" === u.argument.type && g(u.argument, p, r, B, D)
                            }
                            break;
                        case "AssignmentExpression":
                            "Identifier" !== u.left.type && "MemberExpression" !== u.left.type && B.push(n(u, "SYNTAX", "ASSIGNMENTTOVARSONLY"));
                            switch (u.operator) {
                            case "\x3d":
                            case "/\x3d":
                            case "*\x3d":
                            case "%\x3d":
                            case "+\x3d":
                            case "-\x3d":
                                break;
                            default:
                                B.push(n(u, "SYNTAX", "OPERATORNOTRECOGNISED"))
                            }
                            g(u.right, p, r, B, D);
                            E = !1;
                            "Identifier" === u.left.type && (null !== p.localScope && void 0 !== p.localScope[u.left.name.toLowerCase()] && (E = !0),
                            void 0 !== p.globalScope[u.left.name.toLowerCase()] && (E = !0),
                            !1 === r && !1 === E && B.push({
                                line: null === u ? 0 : u.loc.start.line,
                                character: null === u ? 0 : u.loc.start.column,
                                reason: "Identifier " + u.left.name + " has not been declared."
                            }));
                            "MemberExpression" === u.left.type && g(u.left, p, r, B, D);
                            break;
                        case "ExpressionStatement":
                            g(u.expression, p, r, B, D);
                            break;
                        case "Identifier":
                            var H = u.name.toLowerCase();
                            if (null !== p.localScope && void 0 !== p.localScope[H] || void 0 !== p.globalScope[H])
                                break;
                            !1 === r && B.push(n(u, "SYNTAX", "VARIABLENOTFOUND"));
                            break;
                        case "MemberExpression":
                            g(u.object, p, r, B, D);
                            !0 === u.computed && g(u.property, p, r, B, D);
                            break;
                        case "Literal":
                            break;
                        case "TemplateElement":
                            break;
                        case "CallExpression":
                            "Identifier" !== u.callee.type && B.push(n(u, "SYNTAX", "ONLYNODESSUPPORTED"));
                            for (A = 0; A < u.arguments.length; A++)
                                g(u.arguments[A], p, r, B, D);
                            if ("Identifier" === u.callee.type) {
                                var J = w(u.callee.name, u.arguments, p);
                                !1 === r && -1 === J && B.push(n(u, "SYNTAX", "NOTFOUND"));
                                -2 === J && B.push(n(u, "SYNTAX", "WRONGSIGNATURE"))
                            }
                            break;
                        case "UnaryExpression":
                            g(u.argument, p, r, B, D);
                            break;
                        case "BinaryExpression":
                            g(u.left, p, r, B, D);
                            g(u.right, p, r, B, D);
                            switch (u.operator) {
                            case "\x3d\x3d":
                            case "!\x3d":
                            case "\x3c":
                            case "\x3c\x3d":
                            case "\x3e":
                            case "\x3e\x3d":
                            case "+":
                            case "-":
                            case "*":
                            case "/":
                            case "%":
                            case "\x26":
                            case "|":
                            case "^":
                            case "\x3c\x3c":
                            case "\x3e\x3e":
                            case "\x3e\x3e\x3e":
                                break;
                            default:
                                B.push(n(u, "SYNTAX", "OPERATORNOTRECOGNISED"))
                            }
                            break;
                        case "LogicalExpression":
                            switch (u.operator) {
                            case "\x26\x26":
                            case "||":
                                break;
                            default:
                                B.push(n(u, "SYNTAX", "OPERATORNOTRECOGNISED"))
                            }
                            g(u.left, p, r, B, D);
                            "AssignmentExpression" !== u.left.type && "UpdateExpression" !== u.left.type || B.push(n(u, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                            g(u.right, p, r, B, D);
                            "AssignmentExpression" !== u.right.type && "UpdateExpression" !== u.right.type || B.push(n(u, "SYNTAX", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                            break;
                        case "ConditionalExpression":
                            B.push(n(u, "SYNTAX", "NOTSUPPORTED"));
                            break;
                        case "ArrayExpression":
                            for (A = 0; A < u.elements.length; A++)
                                g(u.elements[A], p, r, B, D);
                            break;
                        case "TemplateLiteral":
                            for (A = 0; A < u.quasis.length; A++)
                                g(u.quasis[A], p, r, B, D);
                            for (A = 0; A < u.expressions.length; A++)
                                g(u.expressions[A], p, r, B, D);
                            break;
                        case "ObjectExpression":
                            for (A = 0; A < u.properties.length; A++)
                                g(u.properties[A], p, r, B, D);
                            break;
                        case "Property":
                            "Literal" !== u.key.type && "Identifier" !== u.key.type && B.push(n(u, "SYNTAX", "ONLYLITERAL"));
                            "Literal" === u.key.type && g(u.key, p, r, B, D);
                            g(u.value, p, r, B, D);
                            break;
                        default:
                            B.push(n(u, "SYNTAX", "UNRECOGNISED"))
                        }
                    } catch (O) {
                        B.push({
                            line: null === u ? 0 : u.loc.start.line,
                            character: null === u ? 0 : u.loc.start.column,
                            reason: "Unnexpected Syntax"
                        })
                    }
                }
                function q(u) {
                    var p = [];
                    l(u, function(r) {
                        "CallExpression" === r.type && "Identifier" === r.callee.type && p.push(r.callee.name.toLowerCase());
                        return !0
                    });
                    return p
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.scriptUsesFeatureSet = y.findScriptDependencies = y.findFunctionCalls = y.checkScript = y.extractAllIssues = y.extractAllIssuesInFunction = y.makeError = y.nodeErrorMessage = y.validateLanguage = y.validateScript = y.constructGlobalScope = y.validateFunction = y.extractFunctionDeclaration = y.findFieldLiterals = y.referencesFunction = y.referencesMember = y.testValidityOfExpression = y.validateLanguageNode = y.walk = y.findFunction = y.checkFunctionSignature = y.addFunctionDeclaration = y.functionDecls = void 0;
                y.functionDecls = {
                    concatenate: {
                        min: "0",
                        max: "*"
                    },
                    tohex: {
                        min: "1",
                        max: "1"
                    },
                    hash: {
                        min: "1",
                        max: "1"
                    },
                    isoweek: {
                        min: "1",
                        max: "1"
                    },
                    isoweekday: {
                        min: "1",
                        max: "1"
                    },
                    isomonth: {
                        min: "1",
                        max: "1"
                    },
                    isoyear: {
                        min: "1",
                        max: "1"
                    },
                    resize: {
                        min: "2",
                        max: "3"
                    },
                    slice: {
                        min: "0",
                        max: "*"
                    },
                    splice: {
                        min: "0",
                        max: "*"
                    },
                    push: {
                        min: "2",
                        max: "2"
                    },
                    pop: {
                        min: "1",
                        max: "1"
                    },
                    includes: {
                        min: "2",
                        max: "2"
                    },
                    array: {
                        min: "1",
                        max: "2"
                    },
                    front: {
                        min: "1",
                        max: "1"
                    },
                    back: {
                        min: "1",
                        max: "1"
                    },
                    insert: {
                        min: "3",
                        max: "3"
                    },
                    erase: {
                        min: "2",
                        max: "2"
                    },
                    split: {
                        min: "2",
                        max: "4"
                    },
                    guid: {
                        min: "0",
                        max: "1"
                    },
                    today: {
                        min: "0",
                        max: "0"
                    },
                    angle: {
                        min: "2",
                        max: "3"
                    },
                    bearing: {
                        min: "2",
                        max: "3"
                    },
                    urlencode: {
                        min: "1",
                        max: "1"
                    },
                    now: {
                        min: "0",
                        max: "0"
                    },
                    timestamp: {
                        min: "0",
                        max: "0"
                    },
                    day: {
                        min: "1",
                        max: "1"
                    },
                    month: {
                        min: "1",
                        max: "1"
                    },
                    year: {
                        min: "1",
                        max: "1"
                    },
                    hour: {
                        min: "1",
                        max: "1"
                    },
                    second: {
                        min: "1",
                        max: "1"
                    },
                    millisecond: {
                        min: "1",
                        max: "1"
                    },
                    minute: {
                        min: "1",
                        max: "1"
                    },
                    weekday: {
                        min: "1",
                        max: "1"
                    },
                    toutc: {
                        min: "1",
                        max: "1"
                    },
                    tolocal: {
                        min: "1",
                        max: "1"
                    },
                    date: {
                        min: "0",
                        max: "7"
                    },
                    datediff: {
                        min: "2",
                        max: "3"
                    },
                    dateadd: {
                        min: "2",
                        max: "3"
                    },
                    trim: {
                        min: "1",
                        max: "1"
                    },
                    text: {
                        min: "1",
                        max: "2"
                    },
                    left: {
                        min: "2",
                        max: "2"
                    },
                    right: {
                        min: "2",
                        max: "2"
                    },
                    mid: {
                        min: "2",
                        max: "3"
                    },
                    upper: {
                        min: "1",
                        max: "1"
                    },
                    proper: {
                        min: "1",
                        max: "2"
                    },
                    lower: {
                        min: "1",
                        max: "1"
                    },
                    find: {
                        min: "2",
                        max: "3"
                    },
                    iif: {
                        min: "3",
                        max: "3"
                    },
                    decode: {
                        min: "2",
                        max: "*"
                    },
                    when: {
                        min: "2",
                        max: "*"
                    },
                    defaultvalue: {
                        min: "2",
                        max: "2"
                    },
                    isempty: {
                        min: "1",
                        max: "1"
                    },
                    domaincode: {
                        min: "2",
                        max: "4"
                    },
                    domainname: {
                        min: "2",
                        max: "4"
                    },
                    polygon: {
                        min: "1",
                        max: "1"
                    },
                    point: {
                        min: "1",
                        max: "1"
                    },
                    polyline: {
                        min: "1",
                        max: "1"
                    },
                    extent: {
                        min: "1",
                        max: "1"
                    },
                    multipoint: {
                        min: "1",
                        max: "1"
                    },
                    ringisclockwise: {
                        min: "1",
                        max: "1"
                    },
                    geometry: {
                        min: "1",
                        max: "1"
                    },
                    count: {
                        min: "0",
                        max: "*"
                    },
                    number: {
                        min: "1",
                        max: "2"
                    },
                    acos: {
                        min: "1",
                        max: "1"
                    },
                    asin: {
                        min: "1",
                        max: "1"
                    },
                    atan: {
                        min: "1",
                        max: "1"
                    },
                    atan2: {
                        min: "2",
                        max: "2"
                    },
                    ceil: {
                        min: "1",
                        max: "2"
                    },
                    floor: {
                        min: "1",
                        max: "2"
                    },
                    round: {
                        min: "1",
                        max: "2"
                    },
                    cos: {
                        min: "1",
                        max: "1"
                    },
                    exp: {
                        min: "1",
                        max: "1"
                    },
                    log: {
                        min: "1",
                        max: "1"
                    },
                    min: {
                        min: "0",
                        max: "*"
                    },
                    constrain: {
                        min: "3",
                        max: "3"
                    },
                    console: {
                        min: "0",
                        max: "*"
                    },
                    max: {
                        min: "0",
                        max: "*"
                    },
                    pow: {
                        min: "2",
                        max: "2"
                    },
                    random: {
                        min: "0",
                        max: "0"
                    },
                    sqrt: {
                        min: "1",
                        max: "1"
                    },
                    sin: {
                        min: "1",
                        max: "1"
                    },
                    tan: {
                        min: "1",
                        max: "1"
                    },
                    abs: {
                        min: "1",
                        max: "1"
                    },
                    isnan: {
                        min: "1",
                        max: "1"
                    },
                    stdev: {
                        min: "0",
                        max: "*"
                    },
                    average: {
                        min: "0",
                        max: "*"
                    },
                    mean: {
                        min: "0",
                        max: "*"
                    },
                    sum: {
                        min: "0",
                        max: "*"
                    },
                    variance: {
                        min: "0",
                        max: "*"
                    },
                    distinct: {
                        min: "0",
                        max: "*"
                    },
                    first: {
                        min: "1",
                        max: "1"
                    },
                    top: {
                        min: "2",
                        max: "2"
                    },
                    boolean: {
                        min: "1",
                        max: "1"
                    },
                    dictionary: {
                        min: "0",
                        max: "*"
                    },
                    typeof: {
                        min: "1",
                        max: "1"
                    },
                    reverse: {
                        min: "1",
                        max: "1"
                    },
                    replace: {
                        min: "3",
                        max: "4"
                    },
                    sort: {
                        min: "1",
                        max: "2"
                    },
                    feature: {
                        min: "1",
                        max: "*"
                    },
                    haskey: {
                        min: "2",
                        max: "2"
                    },
                    indexof: {
                        min: "2",
                        max: "2"
                    },
                    disjoint: {
                        min: "2",
                        max: "2"
                    },
                    intersects: {
                        min: "2",
                        max: "2"
                    },
                    touches: {
                        min: "2",
                        max: "2"
                    },
                    crosses: {
                        min: "2",
                        max: "2"
                    },
                    within: {
                        min: "2",
                        max: "2"
                    },
                    contains: {
                        min: "2",
                        max: "2"
                    },
                    overlaps: {
                        min: "2",
                        max: "2"
                    },
                    equals: {
                        min: "2",
                        max: "2"
                    },
                    relate: {
                        min: "3",
                        max: "3"
                    },
                    intersection: {
                        min: "2",
                        max: "2"
                    },
                    union: {
                        min: "1",
                        max: "2"
                    },
                    difference: {
                        min: "2",
                        max: "2"
                    },
                    symmetricdifference: {
                        min: "2",
                        max: "2"
                    },
                    clip: {
                        min: "2",
                        max: "2"
                    },
                    cut: {
                        min: "2",
                        max: "2"
                    },
                    area: {
                        min: "1",
                        max: "2"
                    },
                    areageodetic: {
                        min: "1",
                        max: "2"
                    },
                    length: {
                        min: "1",
                        max: "2"
                    },
                    lengthgeodetic: {
                        min: "1",
                        max: "2"
                    },
                    distancegeodetic: {
                        min: "2",
                        max: "3"
                    },
                    distance: {
                        min: "2",
                        max: "3"
                    },
                    densify: {
                        min: "2",
                        max: "3"
                    },
                    densifygeodetic: {
                        min: "2",
                        max: "3"
                    },
                    generalize: {
                        min: "2",
                        max: "4"
                    },
                    buffer: {
                        min: "2",
                        max: "3"
                    },
                    buffergeodetic: {
                        min: "2",
                        max: "3"
                    },
                    offset: {
                        min: "2",
                        max: "6"
                    },
                    rotate: {
                        min: "2",
                        max: "3"
                    },
                    issimple: {
                        min: "1",
                        max: "1"
                    },
                    simplify: {
                        min: "1",
                        max: "1"
                    },
                    centroid: {
                        min: "1",
                        max: "1"
                    },
                    isselfintersecting: {
                        min: "1",
                        max: "1"
                    },
                    multiparttosinglepart: {
                        min: "1",
                        max: "1"
                    },
                    setgeometry: {
                        min: "2",
                        max: "2"
                    },
                    portal: {
                        min: "1",
                        max: "1"
                    },
                    getuser: {
                        min: "1",
                        max: "2"
                    },
                    subtypes: {
                        min: "1",
                        max: "1"
                    },
                    subtypecode: {
                        min: "1",
                        max: "1"
                    },
                    subtypename: {
                        min: "1",
                        max: "1"
                    },
                    domain: {
                        min: "2",
                        max: "3"
                    },
                    convertdirection: {
                        min: "3",
                        max: "3"
                    },
                    schema: {
                        min: "1",
                        max: "1"
                    }
                };
                for (var x in y.functionDecls)
                    y.functionDecls[x].fmin = y.functionDecls[x].min,
                    y.functionDecls[x].fmax = y.functionDecls[x].max;
                var v = "featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" ")
                  , z = "disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
                y.addFunctionDeclaration = function(u, p) {
                    var r = y.functionDecls[u.name.toLowerCase()];
                    void 0 === r ? "sync" === p ? y.functionDecls[u.name.toLowerCase()] = {
                        min: u.min,
                        max: u.max
                    } : y.functionDecls[u.name.toLowerCase()] = {
                        fmin: u.min,
                        fmax: u.max
                    } : "sync" === p ? (r.min = u.min,
                    r.max = u.max) : (r.fmin = u.min,
                    r.fmax = u.max)
                }
                ;
                y.checkFunctionSignature = b;
                y.findFunction = w;
                y.walk = l;
                y.validateLanguageNode = k;
                y.testValidityOfExpression = h;
                y.referencesMember = f;
                y.referencesFunction = function(u, p) {
                    var r = !1
                      , B = p.toLowerCase();
                    l(u, function(D) {
                        return r ? !1 : "CallExpression" === D.type && "Identifier" === D.callee.type && D.callee.name && D.callee.name.toLowerCase() === B ? (r = !0,
                        !1) : !0
                    });
                    return r
                }
                ;
                y.findFieldLiterals = function(u) {
                    var p = [];
                    l(u, function(r) {
                        if ("MemberExpression" !== r.type || "Identifier" !== r.object.type)
                            return !0;
                        !1 === r.computed && r.object && r.object.name && r.property && "Identifier" === r.property.type && r.property.name ? p.push(r.object.name.toLowerCase() + "." + r.property.name.toLowerCase()) : r.object && r.object.name && r.property && "Literal" === r.property.type && "string" === typeof r.property.value && p.push(r.object.name.toLowerCase() + "." + r.property.value.toString().toLowerCase());
                        return !1
                    });
                    return p
                }
                ;
                y.extractFunctionDeclaration = d;
                y.validateFunction = a;
                y.constructGlobalScope = c;
                y.validateScript = function(u, p, r, B) {
                    void 0 === r && (r = "async");
                    void 0 === B && (B = y.functionDecls);
                    p = {
                        globalScope: c(p.vars, B, p.customFunctions, r),
                        localScope: null
                    };
                    return h(u.body[0].body, p)
                }
                ;
                y.validateLanguage = function(u) {
                    return "BlockStatement" !== u.body[0].body.type ? "Invalid formula content." : k(u.body[0].body)
                }
                ;
                y.nodeErrorMessage = e;
                y.makeError = n;
                y.extractAllIssuesInFunction = t;
                y.extractAllIssues = g;
                y.checkScript = function(u, p, r, B, D) {
                    void 0 === B && (B = "async");
                    void 0 === D && (D = y.functionDecls);
                    var G = [];
                    if ("BlockStatement" !== u.body[0].body.type)
                        return [{
                            line: 0,
                            character: 0,
                            reason: "Invalid Body"
                        }];
                    if (null === p || void 0 === p)
                        p = {
                            vars: {},
                            customFunctions: []
                        };
                    p = {
                        globalScope: c(p.vars, D, p.customFunctions, B),
                        localScope: null
                    };
                    try {
                        g(u.body[0].body, p, r, G)
                    } catch (A) {}
                    return G
                }
                ;
                y.findFunctionCalls = q;
                y.findScriptDependencies = function(u, p) {
                    void 0 === p && (p = []);
                    var r = null;
                    if (void 0 === u.usesFeatureSet) {
                        null === r && (r = q(u));
                        u.usesFeatureSet = !1;
                        for (var B = 0; B < r.length; B++)
                            -1 < v.indexOf(r[B]) && (u.usesFeatureSet = !0,
                            u.isAsync = !0);
                        if (!1 === u.usesFeatureSet && p && 0 < p.length)
                            for (B = 0; B < p.length; B++)
                                if (f(u, p[B])) {
                                    u.usesFeatureSet = !0;
                                    u.isAsync = !0;
                                    break
                                }
                    }
                    if (void 0 === u.usesGeometry)
                        for (u.usesGeometry = !1,
                        null === r && (r = q(u)),
                        B = 0; B < r.length; B++)
                            -1 < z.indexOf(r[B]) && (u.usesGeometry = !0)
                }
                ;
                y.scriptUsesFeatureSet = function(u) {
                    u = q(u);
                    for (var p = 0; p < u.length; p++)
                        if (-1 < v.indexOf(u[p]))
                            return !0;
                    return !1
                }
            })
        },
        "esri/arcade/functions/array": function() {
            define(["require", "exports", "../languageUtils"], function(C, y, b) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.registerFunctions = void 0;
                y.registerFunctions = function(w, m) {
                    w.array = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 1, 2);
                            h = b.toNumber(d[0]);
                            if (isNaN(h) || !1 === b.isInteger(h))
                                throw Error("Invalid Parameter");
                            d = b.defaultUndefined(d[1], null);
                            h = Array(h);
                            h.fill(d);
                            return h
                        })
                    }
                    ;
                    w.front = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 1, 1);
                            if (b.isImmutableArray(d[0])) {
                                if (0 >= d[0].length())
                                    throw Error("Array is empty");
                                return d[0].get(0)
                            }
                            if (b.isArray(d[0])) {
                                if (0 >= d[0].length)
                                    throw Error("Array is empty");
                                return d[0][0]
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.back = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 1, 1);
                            if (b.isImmutableArray(d[0])) {
                                if (0 >= d[0].length())
                                    throw Error("Array is empty");
                                return d[0].get(d[0].length() - 1)
                            }
                            if (b.isArray(d[0])) {
                                if (0 >= d[0].length)
                                    throw Error("Array is empty");
                                return d[0][d[0].length - 1]
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.push = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 1, 2);
                            if (b.isArray(d[0]))
                                return d[0][d[0].length] = d[1],
                                d[0].length;
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.pop = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 1, 1);
                            if (b.isArray(d[0])) {
                                if (0 >= d[0].length)
                                    throw Error("Array is empty");
                                h = d[0][d[0].length - 1];
                                --d[0].length;
                                return h
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.erase = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 2, 2);
                            if (b.isArray(d[0])) {
                                h = b.toNumber(d[1]);
                                if (isNaN(h) || !1 === b.isInteger(h))
                                    throw Error("Invalid Parameter");
                                d = d[0];
                                if (0 >= d.length)
                                    throw Error("Array is empty");
                                0 > h && (h = d.length + h);
                                if (0 > h)
                                    throw Error("Element not found");
                                if (h >= d.length)
                                    throw Error("Index is greater than array");
                                d.splice(h, 1);
                                return b.voidOperation
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.insert = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 3, 3);
                            if (b.isArray(d[0])) {
                                h = b.toNumber(d[1]);
                                if (isNaN(h) || !1 === b.isInteger(h))
                                    throw Error("Invalid Parameter");
                                f = d[2];
                                d = d[0];
                                if (h > d.length)
                                    throw Error("Index is greater than array");
                                if (0 > h && h < -1 * d.length)
                                    throw Error("Index is greater than array");
                                if (h === d.length)
                                    return d[h] = f,
                                    b.voidOperation;
                                d.splice(h, 0, f);
                                return b.voidOperation
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.resize = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 2, 3);
                            if (b.isArray(d[0])) {
                                f = b.toNumber(d[1]);
                                if (isNaN(f) || !1 === b.isInteger(f))
                                    throw Error("Invalid Parameter");
                                if (0 > f)
                                    throw Error("Size cannot be negative");
                                h = b.defaultUndefined(d[2], null);
                                d = d[0];
                                if (d.length >= f)
                                    return d.length = f,
                                    b.voidOperation;
                                var a = d.length;
                                d.length = f;
                                for (f = a; f < d.length; f++)
                                    d[f] = h;
                                return b.voidOperation
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.includes = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 2, 2);
                            if (b.isArray(d[0])) {
                                var a = d[1];
                                h = d[0];
                                return -1 < h.findIndex(function(e) {
                                    return b.equalityTest(e, a)
                                }) ? !0 : !1
                            }
                            if (b.isImmutableArray(d[0])) {
                                var c = d[1];
                                h = d[0].toArray();
                                return -1 < h.findIndex(function(e) {
                                    return b.equalityTest(e, c)
                                }) ? !0 : !1
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.slice = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            b.pcCheck(d, 1, 3);
                            if (b.isArray(d[0])) {
                                h = b.toNumber(b.defaultUndefined(d[1], 0));
                                f = b.toNumber(b.defaultUndefined(d[2], d[0].length));
                                if (isNaN(h) || !1 === b.isInteger(h))
                                    throw Error("Invalid Parameter");
                                if (isNaN(f) || !1 === b.isInteger(f))
                                    throw Error("Invalid Parameter");
                                var a = d[0];
                                return a.slice(h, f)
                            }
                            if (b.isImmutableArray(d[0])) {
                                a = d[0];
                                h = b.toNumber(b.defaultUndefined(d[1], 0));
                                f = b.toNumber(b.defaultUndefined(d[2], a.length()));
                                if (isNaN(h) || !1 === b.isInteger(h))
                                    throw Error("Invalid Parameter");
                                if (isNaN(f) || !1 === b.isInteger(f))
                                    throw Error("Invalid Parameter");
                                return a.toArray().slice(h, f)
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    w.splice = function(l, k) {
                        return m(l, k, function(h, f, d) {
                            h = [];
                            for (f = 0; f < d.length; f++)
                                b.isArray(d[f]) ? h.push.apply(h, d[f]) : b.isImmutableArray(d[f]) ? h.push.apply(h, d[f].toArray()) : h.push(d[f]);
                            return h
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/date": function() {
            define(["require", "exports", "../languageUtils"], function(C, y, b) {
                function w(k) {
                    k = new Date(k.getTime());
                    var h = k.getFullYear()
                      , f = new Date(0);
                    f.setFullYear(h + 1, 0, 4);
                    f.setHours(0, 0, 0, 0);
                    f = m(f);
                    var d = new Date(0);
                    d.setFullYear(h, 0, 4);
                    d.setHours(0, 0, 0, 0);
                    d = m(d);
                    return k.getTime() >= f.getTime() ? h + 1 : k.getTime() >= d.getTime() ? h : h - 1
                }
                function m(k) {
                    k = new Date(k.getTime());
                    var h = k.getDay();
                    h = (1 > h ? 7 : 0) + h - 1;
                    k.setDate(k.getDate() - h);
                    k.setHours(0, 0, 0, 0);
                    return k
                }
                function l(k) {
                    return null === k ? k : isNaN(k.getTime()) ? null : k
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.registerFunctions = void 0;
                y.registerFunctions = function(k, h) {
                    k.today = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 0, 0);
                            a = new Date;
                            a.setHours(0, 0, 0, 0);
                            return a
                        })
                    }
                    ;
                    k.now = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 0, 0);
                            return new Date
                        })
                    }
                    ;
                    k.timestamp = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 0, 0);
                            a = new Date;
                            return a = new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())
                        })
                    }
                    ;
                    k.toutc = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? null : new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())
                        })
                    }
                    ;
                    k.tolocal = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? null : b.MomentLibrary.Moment.utc([a.getFullYear(), a.getMonth(), a.getDate(), a.getHours(), a.getMinutes(), a.getSeconds(), a.getMilliseconds()]).toDate()
                        })
                    }
                    ;
                    k.day = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getDate()
                        })
                    }
                    ;
                    k.month = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getMonth()
                        })
                    }
                    ;
                    k.year = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getFullYear()
                        })
                    }
                    ;
                    k.hour = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getHours()
                        })
                    }
                    ;
                    k.second = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getSeconds()
                        })
                    }
                    ;
                    k.millisecond = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getMilliseconds()
                        })
                    }
                    ;
                    k.minute = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getMinutes()
                        })
                    }
                    ;
                    k.weekday = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getDay()
                        })
                    }
                    ;
                    k.isoweekday = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            if (null === a)
                                return NaN;
                            a = a.getDay();
                            0 === a && (a = 7);
                            return a
                        })
                    }
                    ;
                    k.isomonth = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : a.getMonth() + 1
                        })
                    }
                    ;
                    k.isoweek = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            c = b.toDate(e[0]);
                            if (null === c)
                                return NaN;
                            a = m(c).getTime();
                            c = w(c);
                            e = new Date(0);
                            e.setFullYear(c, 0, 4);
                            e.setHours(0, 0, 0, 0);
                            c = m(e);
                            a -= c.getTime();
                            return Math.round(a / 6048E5) + 1
                        })
                    }
                    ;
                    k.isoyear = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            a = b.toDate(e[0]);
                            return null === a ? NaN : w(a)
                        })
                    }
                    ;
                    k.date = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 0, 7);
                            if (3 === e.length)
                                return l(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),0,0,0,0));
                            if (4 === e.length)
                                return l(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]),0,0,0));
                            if (5 === e.length)
                                return l(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),0,0));
                            if (6 === e.length)
                                return l(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),b.toNumber(e[5]),0));
                            if (7 === e.length)
                                return l(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),b.toNumber(e[5]),b.toNumber(e[6])));
                            if (2 === e.length) {
                                a = b.toString(e[1]);
                                if ("" === a)
                                    return null;
                                a = b.standardiseDateFormat(a);
                                e = b.MomentLibrary.Moment(b.toString(e[0]), a, !0);
                                return !0 === e.isValid() ? e.toDate() : null
                            }
                            if (1 === e.length) {
                                if (b.isString(e[0])) {
                                    if ("" === e[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, ""))
                                        return null;
                                    if (!0 === /^[0-9][0-9][0-9][0-9]$/.test(e[0]))
                                        return b.toDate(e[0] + "-01-01")
                                }
                                a = b.toNumber(e[0]);
                                return !1 === isNaN(a) ? l(new Date(a)) : b.toDate(e[0])
                            }
                            if (0 === e.length)
                                return new Date
                        })
                    }
                    ;
                    k.datediff = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 2, 3);
                            a = b.toDateM(e[0]);
                            c = b.toDateM(e[1]);
                            if (null === a || null === c)
                                return NaN;
                            switch (b.toString(e[2]).toLowerCase()) {
                            case "days":
                            case "day":
                            case "d":
                                return a.diff(c, "days", !0);
                            case "months":
                            case "month":
                                return a.diff(c, "months", !0);
                            case "minutes":
                            case "minute":
                            case "m":
                                return "M" === e[2] ? a.diff(c, "months", !0) : a.diff(c, "minutes", !0);
                            case "seconds":
                            case "second":
                            case "s":
                                return a.diff(c, "seconds", !0);
                            case "milliseconds":
                            case "millisecond":
                            case "ms":
                                return a.diff(c);
                            case "hours":
                            case "hour":
                            case "h":
                                return a.diff(c, "hours", !0);
                            case "years":
                            case "year":
                            case "y":
                                return a.diff(c, "years", !0);
                            default:
                                return a.diff(c)
                            }
                        })
                    }
                    ;
                    k.dateadd = function(f, d) {
                        return h(f, d, function(a, c, e) {
                            b.pcCheck(e, 2, 3);
                            a = b.toDateM(e[0]);
                            if (null === a)
                                return null;
                            c = "milliseconds";
                            switch (b.toString(e[2]).toLowerCase()) {
                            case "days":
                            case "day":
                            case "d":
                                c = "days";
                                break;
                            case "months":
                            case "month":
                                c = "months";
                                break;
                            case "minutes":
                            case "minute":
                            case "m":
                                c = "M" === e[2] ? "months" : "minutes";
                                break;
                            case "seconds":
                            case "second":
                            case "s":
                                c = "seconds";
                                break;
                            case "milliseconds":
                            case "millisecond":
                            case "ms":
                                c = "milliseconds";
                                break;
                            case "hours":
                            case "hour":
                            case "h":
                                c = "hours";
                                break;
                            case "years":
                            case "year":
                            case "y":
                                c = "years"
                            }
                            a.add(b.toNumber(e[1]), c);
                            return a.toDate()
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/geometry": function() {
            define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n) {
                function t(g) {
                    return g instanceof w || "object" === typeof g && "FeatureSetReader" === g.type
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.registerFunctions = void 0;
                y.registerFunctions = function(g, q) {
                    g.ringisclockwise = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 1, 1);
                            z = [];
                            if (null === p[0])
                                return !1;
                            if (l.isArray(p[0])) {
                                var r = 0;
                                for (p = p[0]; r < p.length; r++)
                                    if (u = p[r],
                                    u instanceof d)
                                        z.push([u.x, u.y]);
                                    else
                                        throw Error("Invalid Argument");
                            } else if (p[0]instanceof m)
                                z = p[0]._elements;
                            else if (l.isImmutableArray(p[0])) {
                                r = 0;
                                for (var B = p[0].toArray(); r < B.length; r++)
                                    if (u = B[r],
                                    u instanceof d)
                                        z.push([u.x, u.y]);
                                    else
                                        throw Error("Invalid Argument");
                                0 < z.length && (p[0].get(0),
                                p[0].get(0))
                            } else
                                throw Error("Invalid Argument");
                            return 3 > z.length ? !1 : (new a({
                                rings: [],
                                spatialReference: {
                                    wkid: 4326
                                }
                            })).isClockwise(z)
                        })
                    }
                    ;
                    g.polygon = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 1, 1);
                            z = null;
                            if (p[0]instanceof b) {
                                if (z = l.fixSpatialReference(w.parseGeometryFromDictionary(p[0]), x.spatialReference),
                                !1 === z instanceof a)
                                    throw Error("Illegal Parameter");
                            } else
                                z = p[0]instanceof a ? n.fromJson(p[0].toJson()) : l.fixSpatialReference(new a(JSON.parse(p[0])), x.spatialReference);
                            if (null !== z && !1 === z.spatialReference.equals(x.spatialReference))
                                throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                            return l.fixNullGeometry(z)
                        })
                    }
                    ;
                    g.polyline = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 1, 1);
                            z = null;
                            if (p[0]instanceof b) {
                                if (z = l.fixSpatialReference(w.parseGeometryFromDictionary(p[0]), x.spatialReference),
                                !1 === z instanceof c)
                                    throw Error("Illegal Parameter");
                            } else
                                z = p[0]instanceof c ? n.fromJson(p[0].toJson()) : l.fixSpatialReference(new c(JSON.parse(p[0])), x.spatialReference);
                            if (null !== z && !1 === z.spatialReference.equals(x.spatialReference))
                                throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                            return l.fixNullGeometry(z)
                        })
                    }
                    ;
                    g.point = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 1, 1);
                            z = null;
                            if (p[0]instanceof b) {
                                if (z = l.fixSpatialReference(w.parseGeometryFromDictionary(p[0]), x.spatialReference),
                                !1 === z instanceof d)
                                    throw Error("Illegal Parameter");
                            } else
                                z = p[0]instanceof d ? n.fromJson(p[0].toJson()) : l.fixSpatialReference(new d(JSON.parse(p[0])), x.spatialReference);
                            if (null !== z && !1 === z.spatialReference.equals(x.spatialReference))
                                throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                            return l.fixNullGeometry(z)
                        })
                    }
                    ;
                    g.multipoint = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 1, 1);
                            z = null;
                            if (p[0]instanceof b) {
                                if (z = l.fixSpatialReference(w.parseGeometryFromDictionary(p[0]), x.spatialReference),
                                !1 === z instanceof f)
                                    throw Error("Illegal Parameter");
                            } else
                                z = p[0]instanceof f ? n.fromJson(p[0].toJson()) : l.fixSpatialReference(new f(JSON.parse(p[0])), x.spatialReference);
                            if (null !== z && !1 === z.spatialReference.equals(x.spatialReference))
                                throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                            return l.fixNullGeometry(z)
                        })
                    }
                    ;
                    g.extent = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            p = l.autoCastFeatureToGeometry(p);
                            l.pcCheck(p, 1, 1);
                            z = null;
                            p[0]instanceof b ? z = l.fixSpatialReference(w.parseGeometryFromDictionary(p[0]), x.spatialReference) : p[0]instanceof d ? (z = {
                                xmin: p[0].x,
                                ymin: p[0].y,
                                xmax: p[0].x,
                                ymax: p[0].y,
                                spatialReference: p[0].spatialReference.toJson()
                            },
                            p = p[0],
                            p.hasZ ? (z.zmin = p.z,
                            z.zmax = p.z) : p.hasM && (z.mmin = p.m,
                            z.mmax = p.m),
                            z = n.fromJson(z)) : z = p[0]instanceof a ? n.fromJson(p[0].getExtent().toJson()) : p[0]instanceof c ? n.fromJson(p[0].getExtent().toJson()) : p[0]instanceof f ? n.fromJson(p[0].getExtent().toJson()) : p[0]instanceof k ? n.fromJson(p[0].toJson()) : l.fixSpatialReference(new k(JSON.parse(p[0])), x.spatialReference);
                            if (null !== z && !1 === z.spatialReference.equals(x.spatialReference))
                                throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                            return l.fixNullGeometry(z)
                        })
                    }
                    ;
                    g.geometry = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 1, 1);
                            z = null;
                            z = t(p[0]) ? l.fixSpatialReference(p[0].geometry(), x.spatialReference) : p[0]instanceof b ? l.fixSpatialReference(w.parseGeometryFromDictionary(p[0]), x.spatialReference) : l.fixSpatialReference(n.fromJson(JSON.parse(p[0])), x.spatialReference);
                            if (null !== z && !1 === z.spatialReference.equals(x.spatialReference))
                                throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
                            return l.fixNullGeometry(z)
                        })
                    }
                    ;
                    g.setgeometry = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 2, 2);
                            if (t(p[0])) {
                                if (!0 === p[0].immutable)
                                    throw Error("Feature is Immutable");
                                if (p[1]instanceof h || null === p[1])
                                    p[0]._geometry = p[1];
                                else
                                    throw Error("Illegal Argument");
                            } else
                                throw Error("Illegal Argument");
                            return l.voidOperation
                        })
                    }
                    ;
                    g.feature = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            if (0 === p.length)
                                throw Error("Missing Parameters");
                            z = null;
                            if (1 === p.length)
                                if (l.isString(p[0]))
                                    z = w.fromJson(JSON.parse(p[0]));
                                else if (t(p[0]))
                                    z = w.createFromArcadeFeature(p[0]);
                                else if (p[0]instanceof h)
                                    z = w.createFromGraphicLikeObject(p[0], null, null);
                                else if (p[0]instanceof b)
                                    z = p[0].hasField("geometry") ? p[0].field("geometry") : null,
                                    u = p[0].hasField("attributes") ? p[0].field("attributes") : null,
                                    null !== z && z instanceof b && (z = w.parseGeometryFromDictionary(z)),
                                    null !== u && (u = w.parseAttributesFromDictionary(u)),
                                    z = w.createFromGraphicLikeObject(z, u, null);
                                else
                                    throw Error("Illegal Argument");
                            else {
                                if (2 === p.length) {
                                    u = z = null;
                                    if (null !== p[0])
                                        if (p[0]instanceof h)
                                            z = p[0];
                                        else if (z instanceof b)
                                            z = w.parseGeometryFromDictionary(p[0]);
                                        else
                                            throw Error("Illegal Argument");
                                    if (null !== p[1])
                                        if (p[1]instanceof b)
                                            u = w.parseAttributesFromDictionary(p[1]);
                                        else
                                            throw Error("Illegal Argument");
                                } else {
                                    z = null;
                                    u = {};
                                    if (null !== p[0])
                                        if (p[0]instanceof h)
                                            z = p[0];
                                        else if (z instanceof b)
                                            z = w.parseGeometryFromDictionary(p[0]);
                                        else
                                            throw Error("Illegal Argument");
                                    for (var r = 1; r < p.length; r += 2) {
                                        var B = l.toString(p[r])
                                          , D = p[r + 1];
                                        if (null === D || void 0 === D || l.isString(D) || isNaN(D) || l.isDate(D) || l.isNumber(D) || l.isBoolean(D)) {
                                            if (l.isFunctionParameter(D) || !1 === l.isSimpleType(D))
                                                throw Error("Illegal Argument");
                                            u[B] = D === l.voidOperation ? null : D
                                        } else
                                            throw Error("Illegal Argument");
                                    }
                                }
                                z = w.createFromGraphicLikeObject(z, u, null)
                            }
                            z._geometry = l.fixSpatialReference(z.geometry(), x.spatialReference);
                            z.immutable = !1;
                            return z
                        })
                    }
                    ;
                    g.dictionary = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            if (0 === p.length)
                                return p = new b,
                                p.immutable = !1,
                                p;
                            if (1 === p.length && l.isString(p[0]))
                                try {
                                    var r = JSON.parse(p[0])
                                      , B = b.convertObjectToArcadeDictionary(r, !1);
                                    B.immutable = !1;
                                    return B
                                } catch (D) {
                                    throw Error("Missing Parameters or Illegal Json");
                                }
                            if (0 !== p.length % 2)
                                throw Error("Missing Parameters");
                            z = {};
                            for (u = 0; u < p.length; u += 2)
                                if (r = l.toString(p[u]),
                                B = p[u + 1],
                                null === B || void 0 === B || l.isString(B) || isNaN(B) || l.isDate(B) || l.isNumber(B) || l.isBoolean(B) || l.isArray(B) || l.isImmutableArray(B)) {
                                    if (l.isFunctionParameter(B))
                                        throw Error("Illegal Argument");
                                    z[r] = B === l.voidOperation ? null : B
                                } else
                                    throw Error("Illegal Argument");
                            p = new b(z);
                            p.immutable = !1;
                            return p
                        })
                    }
                    ;
                    g.haskey = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 2, 2);
                            z = l.toString(p[1]);
                            if (t(p[0]) || p[0]instanceof b)
                                return p[0].hasField(z);
                            throw Error("Illegal Argument");
                        })
                    }
                    ;
                    g.indexof = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            l.pcCheck(p, 2, 2);
                            z = p[1];
                            if (l.isArray(p[0])) {
                                for (u = 0; u < p[0].length; u++)
                                    if (l.equalityTest(z, p[0][u]))
                                        return u;
                                return -1
                            }
                            if (l.isImmutableArray(p[0])) {
                                var r = p[0].length();
                                for (u = 0; u < r; u++)
                                    if (l.equalityTest(z, p[0].get(u)))
                                        return u;
                                return -1
                            }
                            throw Error("Illegal Argument");
                        })
                    }
                    ;
                    g.angle = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            p = l.autoCastFeatureToGeometry(p);
                            l.pcCheck(p, 2, 3);
                            if (!(p[0]instanceof d))
                                throw Error("Illegal Argument");
                            if (!(p[1]instanceof d))
                                throw Error("Illegal Argument");
                            if (2 < p.length && !(p[2]instanceof d))
                                throw Error("Illegal Argument");
                            return 2 === p.length ? e.angle2D(p[0], p[1]) : e.angleBetween2D(p[0], p[1], p[2])
                        })
                    }
                    ;
                    g.bearing = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            p = l.autoCastFeatureToGeometry(p);
                            l.pcCheck(p, 2, 3);
                            if (!(p[0]instanceof d))
                                throw Error("Illegal Argument");
                            if (!(p[1]instanceof d))
                                throw Error("Illegal Argument");
                            if (2 < p.length && !(p[2]instanceof d))
                                throw Error("Illegal Argument");
                            return 2 === p.length ? e.bearing2D(p[0], p[1]) : e.bearingBetween2D(p[0], p[1], p[2])
                        })
                    }
                    ;
                    g.isselfintersecting = function(x, v) {
                        return q(x, v, function(z, u, p) {
                            p = l.autoCastFeatureToGeometry(p);
                            l.pcCheck(p, 1, 1);
                            z = p[0];
                            if (z instanceof a)
                                return z.isSelfIntersecting(z);
                            if (z instanceof c)
                                return z = z.paths,
                                e.pathsSelfIntersecting(z);
                            if (z instanceof f)
                                for (u = z.points,
                                p = 0; p < u.length; p++)
                                    for (var r = 0; r < u.length; r++)
                                        if (r !== p) {
                                            for (var B = !0, D = 0; D < u[p].length; D++)
                                                if (u[p][D] !== u[r][D]) {
                                                    B = !1;
                                                    break
                                                }
                                            if (!0 === B)
                                                return !0
                                        }
                            return l.isArray(z) || l.isImmutableArray(z) ? (z = l.autoCastArrayOfPointsToPolyline(z, x.spatialReference),
                            null !== z && (z = z.paths),
                            e.pathsSelfIntersecting(z)) : !1
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/centroid": function() {
            define(["require", "exports", "../../geometry/Point"], function(C, y, b) {
                function w(a, c, e) {
                    var n = {
                        x: 0,
                        y: 0
                    };
                    c && (n.z = 0);
                    e && (n.m = 0);
                    for (var t = 0, g = a[0], q = 0; q < a.length; q++) {
                        var x = a[q];
                        a: if (x.length !== g.length)
                            var v = !1;
                        else {
                            for (v = 0; v < x.length; v++)
                                if (x[v] !== g[v]) {
                                    v = !1;
                                    break a
                                }
                            v = !0
                        }
                        if (!1 === v) {
                            v = m(g, x, c);
                            var z = x
                              , u = c
                              , p = e
                              , r = {
                                x: (g[0] + z[0]) / 2,
                                y: (g[1] + z[1]) / 2
                            };
                            u && (r.z = (g[2] + z[2]) / 2);
                            u && p ? r.m = (g[3] + z[3]) / 2 : p && (r.m = (g[2] + z[2]) / 2);
                            g = r;
                            g.x *= v;
                            g.y *= v;
                            n.x += g.x;
                            n.y += g.y;
                            c && (g.z *= v,
                            n.z += g.z);
                            e && (g.m *= v,
                            n.m += g.m);
                            t += v;
                            g = x
                        }
                    }
                    0 < t ? (n.x /= t,
                    n.y /= t,
                    c && (n.z /= t),
                    e && (n.m /= t)) : (n.x = a[0][0],
                    n.y = a[0][1],
                    c && (n.z = a[0][2]),
                    e && c ? n.m = a[0][3] : e && (n.m = a[0][2]));
                    return n
                }
                function m(a, c, e) {
                    var n = c[0] - a[0];
                    a = c[1] - a[1];
                    return e ? (c = c[2] - c[2],
                    Math.sqrt(n * n + a * a + c * c)) : Math.sqrt(n * n + a * a)
                }
                function l(a, c, e) {
                    for (void 0 === e && (e = 0); a < e; )
                        a += c;
                    for (e += c; a >= e; )
                        a -= c;
                    return a
                }
                function k(a, c) {
                    return Math.atan2(c.y - a.y, c.x - a.x)
                }
                function h(a, c, e) {
                    var n = a.x - c.x;
                    a = a.y - c.y;
                    var t = e.x - c.x;
                    c = e.y - c.y;
                    return Math.atan2(n * c - t * a, n * t + a * c)
                }
                function f(a, c, e, n, t) {
                    var g = a[0];
                    a = a[1];
                    var q = c[0];
                    c = c[1];
                    var x = e[0]
                      , v = e[1];
                    e = n[0] - x;
                    x = g - x;
                    var z = q - g;
                    n = n[1] - v;
                    v = a - v;
                    var u = c - a
                      , p = n * z - e * u;
                    if (0 === p)
                        return !1;
                    e = (e * v - n * x) / p;
                    x = (z * v - u * x) / p;
                    return 0 <= e && 1 >= e && 0 <= x && 1 >= x ? (t && (t[0] = g + e * (q - g),
                    t[1] = a + e * (c - a)),
                    !0) : !1
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.pathsSelfIntersecting = y.bearingBetween2D = y.angleBetween2D = y.angleBetweenRad = y.bearing2D = y.angle2D = y.angleRad = y.centroidMultiPoint = y.centroidPolyline = void 0;
                y.centroidPolyline = function(a) {
                    for (var c = {
                        x: 0,
                        y: 0,
                        spatialReference: a.spatialReference.toJson()
                    }, e = {
                        x: 0,
                        y: 0,
                        spatialReference: a.spatialReference.toJson()
                    }, n = 0, t = 0, g = 0; g < a.paths.length; g++)
                        if (0 !== a.paths[g].length) {
                            var q = a.paths[g];
                            var x = !0 === a.hasZ;
                            if (1 >= q.length)
                                q = 0;
                            else {
                                for (var v = 0, z = 1; z < q.length; z++)
                                    v += m(q[z - 1], q[z], x);
                                q = v
                            }
                            0 === q ? (x = w(a.paths[g], !0 === a.hasZ, !0 === a.hasM),
                            c.x += x.x,
                            c.y += x.y,
                            !0 === a.hasZ && (c.z += x.z),
                            !0 === a.hasM && (c.m += x.m),
                            ++n) : (x = w(a.paths[g], !0 === a.hasZ, !0 === a.hasM),
                            e.x += x.x * q,
                            e.y += x.y * q,
                            !0 === a.hasZ && (e.z += x.z * q),
                            !0 === a.hasM && (e.m += x.m * q),
                            t += q)
                        }
                    return 0 < t ? (e.x /= t,
                    e.y /= t,
                    !0 === a.hasZ && (e.z /= t),
                    !0 === a.hasM && (e.m /= t),
                    new b(e)) : 0 < n ? (c.x /= n,
                    c.y /= n,
                    !0 === a.hasZ && (e.z /= n),
                    !0 === a.hasM && (c.m /= n),
                    new b(c)) : null
                }
                ;
                y.centroidMultiPoint = function(a) {
                    if (0 === a.points.length)
                        return null;
                    for (var c = 0, e = 0, n = 0, t = 0, g = 0; g < a.points.length; g++) {
                        var q = a.getPoint(g);
                        !0 === q.hasZ && (n += q.z);
                        !0 === q.hasM && (t += q.m);
                        c += q.x;
                        e += q.y;
                        t += q.m
                    }
                    c = {
                        x: c / a.points.length,
                        y: e / a.points.length,
                        spatialReference: null
                    };
                    c.spatialReference = a.spatialReference.toJson();
                    !0 === a.hasZ && (c.z = n / a.points.length);
                    !0 === a.hasM && (c.m = t / a.points.length);
                    return new b(c)
                }
                ;
                y.angleRad = k;
                y.angle2D = function(a, c) {
                    return l(k(a, c), 2 * Math.PI) * (180 / Math.PI)
                }
                ;
                y.bearing2D = function(a, c) {
                    return l(Math.PI / 2 - k(a, c), 2 * Math.PI) * (180 / Math.PI)
                }
                ;
                y.angleBetweenRad = h;
                y.angleBetween2D = function(a, c, e) {
                    return l(h(a, c, e), 2 * Math.PI) * (180 / Math.PI)
                }
                ;
                y.bearingBetween2D = function(a, c, e) {
                    return l(-1 * h(a, c, e), 2 * Math.PI) * (180 / Math.PI)
                }
                ;
                var d = [0, 0];
                y.pathsSelfIntersecting = function(a) {
                    for (var c = 0; c < a.length; c++) {
                        for (var e = a[c], n = 0; n < e.length - 1; n++)
                            for (var t = e[n], g = e[n + 1], q = c + 1; q < a.length; q++)
                                for (var x = 0; x < a[q].length - 1; x++) {
                                    var v = a[q][x]
                                      , z = a[q][x + 1]
                                      , u = f(t, g, v, z, d);
                                    if (u && !(d[0] === t[0] && d[1] === t[1] || d[0] === v[0] && d[1] === v[1] || d[0] === g[0] && d[1] === g[1] || d[0] === z[0] && d[1] === z[1]))
                                        return !0
                                }
                        x = e.length;
                        if (!(3 > x))
                            for (n = 0; n <= x - 2; n++)
                                for (t = e[n],
                                g = e[n + 1],
                                q = n + 2; q <= x - 2; q++)
                                    if (v = e[q],
                                    z = e[q + 1],
                                    (u = f(t, g, v, z, d)) && !(d[0] === t[0] && d[1] === t[1] || d[0] === v[0] && d[1] === v[1] || d[0] === g[0] && d[1] === g[1] || d[0] === z[0] && d[1] === z[1]))
                                        return !0
                    }
                    return !1
                }
            })
        },
        "esri/arcade/functions/geomsync": function() {
            define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                function n(g) {
                    return 0 === b.version.indexOf("4.") ? a.fromExtent(g) : new a({
                        spatialReference: g.spatialReference,
                        rings: [[[g.xmin, g.ymin], [g.xmin, g.ymax], [g.xmax, g.ymax], [g.xmax, g.ymin], [g.xmin, g.ymin]]]
                    })
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.registerFunctions = y.setGeometryEngine = void 0;
                var t = null;
                y.setGeometryEngine = function(g) {
                    t = g
                }
                ;
                y.registerFunctions = function(g, q) {
                    function x(v) {
                        m.pcCheck(v, 2, 2);
                        if (!(v[0]instanceof h && v[1]instanceof h || v[0]instanceof h && null === v[1] || v[1]instanceof h && null === v[0] || null === v[0] && null === v[1]))
                            throw Error("Illegal Argument");
                    }
                    g.disjoint = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] || null === r[1] ? !0 : t.disjoint(r[0], r[1])
                        })
                    }
                    ;
                    g.intersects = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] || null === r[1] ? !1 : t.intersects(r[0], r[1])
                        })
                    }
                    ;
                    g.touches = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] || null === r[1] ? !1 : t.touches(r[0], r[1])
                        })
                    }
                    ;
                    g.crosses = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] || null === r[1] ? !1 : t.crosses(r[0], r[1])
                        })
                    }
                    ;
                    g.within = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] || null === r[1] ? !1 : t.within(r[0], r[1])
                        })
                    }
                    ;
                    g.contains = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] || null === r[1] ? !1 : t.contains(r[0], r[1])
                        })
                    }
                    ;
                    g.overlaps = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] || null === r[1] ? !1 : t.overlaps(r[0], r[1])
                        })
                    }
                    ;
                    g.equals = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            m.pcCheck(r, 2, 2);
                            return r[0] === r[1] ? !0 : r[0]instanceof h && r[1]instanceof h ? t.equals(r[0], r[1]) : m.isDate(r[0]) && m.isDate(r[1]) ? r[0].getTime() === r[1].getTime() : !1
                        })
                    }
                    ;
                    g.relate = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 3, 3);
                            if (r[0]instanceof h && r[1]instanceof h)
                                return t.relate(r[0], r[1], m.toString(r[2]));
                            if (r[0]instanceof h && null === r[1] || r[1]instanceof h && null === r[0] || null === r[0] && null === r[1])
                                return !1;
                            throw Error("Illegal Argument");
                        })
                    }
                    ;
                    g.intersection = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] || null === r[1] ? null : t.intersect(r[0], r[1])
                        })
                    }
                    ;
                    g.union = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            u = [];
                            if (0 === r.length)
                                throw Error("Function called with wrong number of Parameters");
                            if (1 === r.length)
                                if (m.isArray(r[0]))
                                    for (r = m.autoCastFeatureToGeometry(r[0]),
                                    p = 0; p < r.length; p++) {
                                        if (null !== r[p]) {
                                            if (!(r[p]instanceof h))
                                                throw Error("Illegal Argument");
                                            u.push(r[p])
                                        }
                                    }
                                else if (m.isImmutableArray(r[0]))
                                    for (r = m.autoCastFeatureToGeometry(r[0].toArray()),
                                    p = 0; p < r.length; p++) {
                                        if (null !== r[p]) {
                                            if (!(r[p]instanceof h))
                                                throw Error("Illegal Argument");
                                            u.push(r[p])
                                        }
                                    }
                                else {
                                    if (r[0]instanceof h)
                                        return m.fixSpatialReference(w.cloneGeometry(r[0]), v.spatialReference);
                                    if (null === r[0])
                                        return null;
                                    throw Error("Illegal Argument");
                                }
                            else
                                for (p = 0; p < r.length; p++)
                                    if (null !== r[p]) {
                                        if (!(r[p]instanceof h))
                                            throw Error("Illegal Argument");
                                        u.push(r[p])
                                    }
                            return 0 === u.length ? null : t.union(u)
                        })
                    }
                    ;
                    g.difference = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null !== r[0] && null === r[1] ? w.cloneGeometry(r[0]) : null === r[0] ? null : t.difference(r[0], r[1])
                        })
                    }
                    ;
                    g.symmetricdifference = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            x(r);
                            return null === r[0] && null === r[1] ? null : null === r[0] ? w.cloneGeometry(r[1]) : null === r[1] ? w.cloneGeometry(r[0]) : t.symmetricDifference(r[0], r[1])
                        })
                    }
                    ;
                    g.clip = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 2);
                            if (!(r[1]instanceof k) && null !== r[1])
                                throw Error("Illegal Argument");
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            return null === r[1] ? null : t.clip(r[0], r[1])
                        })
                    }
                    ;
                    g.cut = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 2);
                            if (!(r[1]instanceof c) && null !== r[1])
                                throw Error("Illegal Argument");
                            if (null === r[0])
                                return [];
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            return null === r[1] ? [w.cloneGeometry(r[0])] : t.cut(r[0], r[1])
                        })
                    }
                    ;
                    g.area = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            m.pcCheck(r, 1, 2);
                            r = m.autoCastFeatureToGeometry(r);
                            if (null === r[0])
                                return 0;
                            if (m.isArray(r[0]) || m.isImmutableArray(r[0]))
                                return u = m.autoCastArrayOfPointsToPolygon(r[0], v.spatialReference),
                                null === u ? 0 : t.planarArea(u, w.convertSquareUnitsToCode(m.defaultUndefined(r[1], -1)));
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            return t.planarArea(r[0], w.convertSquareUnitsToCode(m.defaultUndefined(r[1], -1)))
                        })
                    }
                    ;
                    g.areageodetic = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            m.pcCheck(r, 1, 2);
                            r = m.autoCastFeatureToGeometry(r);
                            if (null === r[0])
                                return 0;
                            if (m.isArray(r[0]) || m.isImmutableArray(r[0]))
                                return u = m.autoCastArrayOfPointsToPolygon(r[0], v.spatialReference),
                                null === u ? 0 : t.geodesicArea(u, w.convertSquareUnitsToCode(m.defaultUndefined(r[1], -1)));
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            return t.geodesicArea(r[0], w.convertSquareUnitsToCode(m.defaultUndefined(r[1], -1)))
                        })
                    }
                    ;
                    g.length = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            m.pcCheck(r, 1, 2);
                            r = m.autoCastFeatureToGeometry(r);
                            if (null === r[0])
                                return 0;
                            if (m.isArray(r[0]) || m.isImmutableArray(r[0]))
                                return u = m.autoCastArrayOfPointsToPolyline(r[0], v.spatialReference),
                                null === u ? 0 : t.planarLength(u, w.convertLinearUnitsToCode(m.defaultUndefined(r[1], -1)));
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            return t.planarLength(r[0], w.convertLinearUnitsToCode(m.defaultUndefined(r[1], -1)))
                        })
                    }
                    ;
                    g.lengthgeodetic = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            m.pcCheck(r, 1, 2);
                            r = m.autoCastFeatureToGeometry(r);
                            if (null === r[0])
                                return 0;
                            if (m.isArray(r[0]) || m.isImmutableArray(r[0]))
                                return u = m.autoCastArrayOfPointsToPolyline(r[0], v.spatialReference),
                                null === u ? 0 : t.geodesicLength(u, w.convertLinearUnitsToCode(m.defaultUndefined(r[1], -1)));
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            return t.geodesicLength(r[0], w.convertLinearUnitsToCode(m.defaultUndefined(r[1], -1)))
                        })
                    }
                    ;
                    g.distance = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 3);
                            u = r[0];
                            if (m.isArray(r[0]) || m.isImmutableArray(r[0]))
                                u = m.autoCastArrayOfPointsToMultiPoint(r[0], v.spatialReference);
                            p = r[1];
                            if (m.isArray(r[1]) || m.isImmutableArray(r[1]))
                                p = m.autoCastArrayOfPointsToMultiPoint(r[1], v.spatialReference);
                            if (!(u instanceof h))
                                throw Error("Illegal Argument");
                            if (!(p instanceof h))
                                throw Error("Illegal Argument");
                            return t.distance(u, p, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1)))
                        })
                    }
                    ;
                    g.distancegeodetic = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 3);
                            u = r[0];
                            p = r[1];
                            if (!(u instanceof d))
                                throw Error("Illegal Argument");
                            if (!(p instanceof d))
                                throw Error("Illegal Argument");
                            var B = new c({
                                paths: [],
                                spatialReference: u.spatialReference
                            });
                            B.addPath([u, p]);
                            return t.geodesicLength(B, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1)))
                        })
                    }
                    ;
                    g.densify = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 3);
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            u = m.toNumber(r[1]);
                            if (isNaN(u))
                                throw Error("Illegal Argument");
                            if (0 >= u)
                                throw Error("Illegal Argument");
                            return r[0]instanceof a || r[0]instanceof c ? t.densify(r[0], u, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1))) : r[0]instanceof k ? t.densify(n(r[0]), u, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1))) : r[0]
                        })
                    }
                    ;
                    g.densifygeodetic = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 3);
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            u = m.toNumber(r[1]);
                            if (isNaN(u))
                                throw Error("Illegal Argument");
                            if (0 >= u)
                                throw Error("Illegal Argument");
                            return r[0]instanceof a || r[0]instanceof c ? t.geodesicDensify(r[0], u, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1))) : r[0]instanceof k ? t.geodesicDensify(n(r[0]), u, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1))) : r[0]
                        })
                    }
                    ;
                    g.generalize = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 4);
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            u = m.toNumber(r[1]);
                            if (isNaN(u))
                                throw Error("Illegal Argument");
                            return t.generalize(r[0], u, m.toBoolean(m.defaultUndefined(r[2], !0)), w.convertLinearUnitsToCode(m.defaultUndefined(r[3], -1)))
                        })
                    }
                    ;
                    g.buffer = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 3);
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            u = m.toNumber(r[1]);
                            if (isNaN(u))
                                throw Error("Illegal Argument");
                            return 0 === u ? w.cloneGeometry(r[0]) : t.buffer(r[0], u, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1)))
                        })
                    }
                    ;
                    g.buffergeodetic = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 3);
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            u = m.toNumber(r[1]);
                            if (isNaN(u))
                                throw Error("Illegal Argument");
                            return 0 === u ? w.cloneGeometry(r[0]) : t.geodesicBuffer(r[0], u, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1)))
                        })
                    }
                    ;
                    g.offset = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 6);
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof a || r[0]instanceof c))
                                throw Error("Illegal Argument");
                            u = m.toNumber(r[1]);
                            if (isNaN(u))
                                throw Error("Illegal Argument");
                            p = m.toNumber(m.defaultUndefined(r[4], 10));
                            if (isNaN(p))
                                throw Error("Illegal Argument");
                            var B = m.toNumber(m.defaultUndefined(r[5], 0));
                            if (isNaN(B))
                                throw Error("Illegal Argument");
                            return t.offset(r[0], u, w.convertLinearUnitsToCode(m.defaultUndefined(r[2], -1)), m.toString(m.defaultUndefined(r[3], "round")).toLowerCase(), p, B)
                        })
                    }
                    ;
                    g.rotate = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 2, 3);
                            u = r[0];
                            if (null === u)
                                return null;
                            if (!(u instanceof h))
                                throw Error("Illegal Argument");
                            u instanceof k && (u = a.fromExtent(u));
                            p = m.toNumber(r[1]);
                            if (isNaN(p))
                                throw Error("Illegal Argument");
                            r = m.defaultUndefined(r[2], null);
                            if (null === r)
                                return t.rotate(u, p);
                            if (r instanceof d)
                                return t.rotate(u, p, r);
                            throw Error("Illegal Argument");
                        })
                    }
                    ;
                    g.centroid = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 1, 1);
                            if (null === r[0])
                                return null;
                            u = r[0];
                            if (m.isArray(r[0]) || m.isImmutableArray(r[0]))
                                u = m.autoCastArrayOfPointsToMultiPoint(r[0], v.spatialReference);
                            if (null === u)
                                return null;
                            if (!(u instanceof h))
                                throw Error("Illegal Argument");
                            return u instanceof d ? m.fixSpatialReference(w.cloneGeometry(r[0]), v.spatialReference) : u instanceof a ? u.getCentroid() : u instanceof c ? l.centroidPolyline(u) : u instanceof f ? l.centroidMultiPoint(u) : u instanceof k ? u.getCenter() : null
                        })
                    }
                    ;
                    g.multiparttosinglepart = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 1, 1);
                            p = [];
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            if (r[0]instanceof d || r[0]instanceof k)
                                return [m.fixSpatialReference(w.cloneGeometry(r[0]), v.spatialReference)];
                            u = t.simplify(r[0]);
                            if (u instanceof a) {
                                p = [];
                                var B = [];
                                for (r = 0; r < u.rings.length; r++)
                                    if (u.isClockwise(u.rings[r])) {
                                        var D = e.fromJson({
                                            rings: [u.rings[r]],
                                            hasZ: !0 === u.hasZ,
                                            hasM: !0 === u.hasM,
                                            spatialReference: u.spatialReference.toJson()
                                        });
                                        p.push(D)
                                    } else
                                        B.push({
                                            ring: u.rings[r],
                                            pt: u.getPoint(r, 0)
                                        });
                                for (u = 0; u < B.length; u++)
                                    for (r = 0; r < p.length; r++)
                                        if (p[r].contains(B[u].pt)) {
                                            p[r].addRing(B[u].ring);
                                            break
                                        }
                                return p
                            }
                            if (u instanceof c) {
                                p = [];
                                for (r = 0; r < u.paths.length; r++)
                                    B = e.fromJson({
                                        paths: [u.paths[r]],
                                        hasZ: !0 === u.hasZ,
                                        hasM: !0 === u.hasM,
                                        spatialReference: u.spatialReference.toJson()
                                    }),
                                    p.push(B);
                                return p
                            }
                            if (r[0]instanceof f) {
                                u = m.fixSpatialReference(w.cloneGeometry(r[0]), v.spatialReference);
                                for (r = 0; r < u.points.length; r++)
                                    p.push(u.getPoint(r));
                                return p
                            }
                            return null
                        })
                    }
                    ;
                    g.issimple = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 1, 1);
                            if (null === r[0])
                                return !0;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            return t.isSimple(r[0])
                        })
                    }
                    ;
                    g.simplify = function(v, z) {
                        return q(v, z, function(u, p, r) {
                            r = m.autoCastFeatureToGeometry(r);
                            m.pcCheck(r, 1, 1);
                            if (null === r[0])
                                return null;
                            if (!(r[0]instanceof h))
                                throw Error("Illegal Argument");
                            return t.simplify(r[0])
                        })
                    }
                }
            })
        },
        "esri/arcade/kernel": function() {
            define(["require", "exports", "../geometry/Extent", "../geometry/jsonUtils"], function(C, y, b, w) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.cloneGeometry = y.sameGeomType = y.convertLinearUnitsToCode = y.shapeExtent = y.convertSquareUnitsToCode = void 0;
                y.convertSquareUnitsToCode = function(m) {
                    if (void 0 === m)
                        return null;
                    if ("number" === typeof m)
                        return m;
                    switch (m.toLowerCase()) {
                    case "meters":
                    case "meter":
                    case "m":
                    case "squaremeters":
                    case "squaremeter":
                    case "square-meter":
                    case "square-meters":
                        return 109404;
                    case "miles":
                    case "mile":
                    case "squaremile":
                    case "squaremiles":
                    case "square-miles":
                    case "square-mile":
                        return 109413;
                    case "kilometers":
                    case "kilometer":
                    case "squarekilometers":
                    case "squarekilometer":
                    case "square-kilometers":
                    case "square-kilometer":
                    case "km":
                        return 109414;
                    case "acres":
                    case "acre":
                    case "ac":
                        return 109402;
                    case "hectares":
                    case "hectare":
                    case "ha":
                        return 109401;
                    case "yard":
                    case "yd":
                    case "yards":
                    case "square-yards":
                    case "square-yard":
                    case "squareyards":
                    case "squareyard":
                        return 109442;
                    case "feet":
                    case "ft":
                    case "foot":
                    case "square-feet":
                    case "square-foot":
                    case "squarefeet":
                    case "squarefoot":
                        return 109405
                    }
                    return null
                }
                ;
                y.shapeExtent = function(m) {
                    if (null === m)
                        return null;
                    switch (m.type) {
                    case "polygon":
                    case "multipoint":
                    case "polyline":
                        return m.extent;
                    case "point":
                        return new b({
                            xmin: m.x,
                            ymin: m.y,
                            xmax: m.x,
                            ymax: m.y,
                            spatialReference: m.spatialReference
                        });
                    case "extent":
                        return m
                    }
                    return null
                }
                ;
                y.convertLinearUnitsToCode = function(m) {
                    if (void 0 === m)
                        return null;
                    if ("number" === typeof m || "number" === typeof m)
                        return m;
                    switch (m.toLowerCase()) {
                    case "meters":
                    case "meter":
                    case "m":
                    case "squaremeters":
                    case "squaremeter":
                    case "square-meter":
                    case "square-meters":
                        return 9001;
                    case "miles":
                    case "mile":
                    case "squaremile":
                    case "squaremiles":
                    case "square-miles":
                    case "square-mile":
                        return 9035;
                    case "kilometers":
                    case "kilometer":
                    case "squarekilometers":
                    case "squarekilometer":
                    case "square-kilometers":
                    case "square-kilometer":
                    case "km":
                        return 9036;
                    case "yard":
                    case "yd":
                    case "yards":
                    case "square-yards":
                    case "square-yard":
                    case "squareyards":
                    case "squareyard":
                        return 9096;
                    case "feet":
                    case "ft":
                    case "foot":
                    case "square-feet":
                    case "square-foot":
                    case "squarefeet":
                    case "squarefoot":
                        return 9002
                    }
                    return null
                }
                ;
                y.sameGeomType = function(m, l) {
                    return m === l || "point" === m && "esriGeometryPoint" === l || "polyline" === m && "esriGeometryPolyline" === l || "polygon" === m && "esriGeometryPolygon" === l || "extent" === m && "esriGeometryEnvelope" === l || "multipoint" === m && "esriGeometryMultipoint" === l || "point" === l && "esriGeometryPoint" === m || "polyline" === l && "esriGeometryPolyline" === m || "polygon" === l && "esriGeometryPolygon" === m || "extent" === l && "esriGeometryEnvelope" === m || "multipoint" === l && "esriGeometryMultipoint" === m ? !0 : !1
                }
                ;
                y.cloneGeometry = function(m) {
                    if (null === m)
                        return null;
                    var l = w.fromJson(m.toJson());
                    m.getCacheValue("_geVersion") && l.setCacheValue("_geVersion", m.getCacheValue("_geVersion"));
                    return l
                }
            })
        },
        "esri/arcade/functions/maths": function() {
            define(["require", "exports", "../languageUtils", "dojo/number"], function(C, y, b, w) {
                function m(l, k, h) {
                    if ("undefined" === typeof h || 0 === +h)
                        return Math[l](k);
                    k = +k;
                    h = +h;
                    if (isNaN(k) || "number" !== typeof h || 0 !== h % 1)
                        return NaN;
                    k = k.toString().split("e");
                    k = Math[l](+(k[0] + "e" + (k[1] ? +k[1] - h : -h)));
                    k = k.toString().split("e");
                    return +(k[0] + "e" + (k[1] ? +k[1] + h : h))
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.registerFunctions = void 0;
                y.registerFunctions = function(l, k) {
                    function h(f, d, a) {
                        f = b.toNumber(f);
                        return isNaN(f) ? f : isNaN(d) || isNaN(a) || d > a ? NaN : f < d ? d : f > a ? a : f
                    }
                    l.number = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 2);
                            a = e[0];
                            return b.isNumber(a) ? a : null === a ? 0 : b.isDate(a) || b.isBoolean(a) ? Number(a) : b.isArray(a) ? NaN : "" === a || void 0 === a ? Number(a) : b.isString(a) ? void 0 !== e[1] ? (e = b.multiReplace(e[1], "\u2030", ""),
                            e = b.multiReplace(e, "\u00a4", ""),
                            w.parse(a, {
                                pattern: e
                            })) : Number(a.trim()) : Number(a)
                        })
                    }
                    ;
                    l.abs = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.abs(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.acos = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.acos(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.asin = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.asin(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.atan = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.atan(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.atan2 = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 2, 2);
                            return Math.atan2(b.toNumber(e[0]), b.toNumber(e[1]))
                        })
                    }
                    ;
                    l.ceil = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 2);
                            return 2 === e.length ? (a = b.toNumber(e[1]),
                            isNaN(a) && (a = 0),
                            m("ceil", b.toNumber(e[0]), -1 * a)) : Math.ceil(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.round = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 2);
                            return 2 === e.length ? (a = b.toNumber(e[1]),
                            isNaN(a) && (a = 0),
                            m("round", b.toNumber(e[0]), -1 * a)) : Math.round(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.floor = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 2);
                            return 2 === e.length ? (a = b.toNumber(e[1]),
                            isNaN(a) && (a = 0),
                            m("floor", b.toNumber(e[0]), -1 * a)) : Math.floor(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.cos = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.cos(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.isnan = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return "number" === typeof e[0] && isNaN(e[0])
                        })
                    }
                    ;
                    l.exp = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.exp(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.log = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.log(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.pow = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 2, 2);
                            return Math.pow(b.toNumber(e[0]), b.toNumber(e[1]))
                        })
                    }
                    ;
                    l.random = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 0, 0);
                            return Math.random()
                        })
                    }
                    ;
                    l.sin = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.sin(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.sqrt = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.sqrt(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.tan = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return Math.tan(b.toNumber(e[0]))
                        })
                    }
                    ;
                    l.defaultvalue = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 2, 2);
                            return null === e[0] || "" === e[0] || void 0 === e[0] ? e[1] : e[0]
                        })
                    }
                    ;
                    l.isempty = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return null === e[0] || "" === e[0] || void 0 === e[0] ? !0 : !1
                        })
                    }
                    ;
                    l["boolean"] = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 1, 1);
                            return b.toBoolean(e[0])
                        })
                    }
                    ;
                    l.constrain = function(f, d) {
                        return k(f, d, function(a, c, e) {
                            b.pcCheck(e, 3, 3);
                            a = b.toNumber(e[1]);
                            c = b.toNumber(e[2]);
                            if (b.isArray(e[0])) {
                                var n = []
                                  , t = 0;
                                for (e = e[0]; t < e.length; t++)
                                    n.push(h(e[t], a, c));
                                return n
                            }
                            if (b.isImmutableArray(e[0])) {
                                n = [];
                                for (t = 0; t < e[0].length(); t++)
                                    n.push(h(e[0].get(t), a, c));
                                return n
                            }
                            return h(e[0], a, c)
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/stats": function() {
            define(["require", "exports", "../languageUtils", "./fieldStats"], function(C, y, b, w) {
                function m(l, k, h, f) {
                    if (1 === f.length) {
                        if (b.isArray(f[0]))
                            return w.calculateStat(l, f[0], -1);
                        if (b.isImmutableArray(f[0]))
                            return w.calculateStat(l, f[0].toArray(), -1)
                    }
                    return w.calculateStat(l, f, -1)
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.registerFunctions = void 0;
                y.registerFunctions = function(l, k) {
                    l.stdev = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            return m("stdev", d, a, c)
                        })
                    }
                    ;
                    l.variance = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            return m("variance", d, a, c)
                        })
                    }
                    ;
                    l.average = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            return m("mean", d, a, c)
                        })
                    }
                    ;
                    l.mean = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            return m("mean", d, a, c)
                        })
                    }
                    ;
                    l.sum = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            return m("sum", d, a, c)
                        })
                    }
                    ;
                    l.min = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            return m("min", d, a, c)
                        })
                    }
                    ;
                    l.max = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            return m("max", d, a, c)
                        })
                    }
                    ;
                    l.distinct = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            return m("distinct", d, a, c)
                        })
                    }
                    ;
                    l.count = function(h, f) {
                        return k(h, f, function(d, a, c) {
                            b.pcCheck(c, 1, 1);
                            if (b.isArray(c[0]) || b.isString(c[0]))
                                return c[0].length;
                            if (b.isImmutableArray(c[0]))
                                return c[0].length();
                            throw Error("Invalid Parameters for Count");
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/fieldStats": function() {
            define(["require", "exports", "../languageUtils"], function(C, y, b) {
                function w(l) {
                    for (var k = 0, h = 0; h < l.length; h++)
                        k += l[h];
                    return k / l.length
                }
                function m(l) {
                    for (var k = w(l), h = 0, f = 0; f < l.length; f++)
                        h += Math.pow(k - l[f], 2);
                    return h / l.length
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.calculateStat = y.decodeStatType = void 0;
                y.decodeStatType = function(l) {
                    switch (l.toLowerCase()) {
                    case "distinct":
                        return "distinct";
                    case "avg":
                    case "mean":
                        return "avg";
                    case "min":
                        return "min";
                    case "sum":
                        return "sum";
                    case "max":
                        return "max";
                    case "stdev":
                    case "stddev":
                        return "stddev";
                    case "var":
                    case "variance":
                        return "var";
                    case "count":
                        return "count"
                    }
                    return ""
                }
                ;
                y.calculateStat = function(l, k, h) {
                    void 0 === h && (h = 1E3);
                    switch (l.toLowerCase()) {
                    case "distinct":
                        a: {
                            l = h;
                            h = [];
                            for (var f = {}, d = [], a = 0; a < k.length; a++) {
                                if (void 0 !== k[a] && null !== k[a] && k[a] !== b.voidOperation) {
                                    var c = k[a];
                                    if (b.isNumber(c) || b.isString(c))
                                        void 0 === f[c] && (h.push(c),
                                        f[c] = 1);
                                    else {
                                        for (var e = !1, n = 0; n < d.length; n++)
                                            !0 === b.equalityTest(d[n], c) && (e = !0);
                                        !1 === e && (d.push(c),
                                        h.push(c))
                                    }
                                }
                                if (h.length >= l && -1 !== l) {
                                    k = h;
                                    break a
                                }
                            }
                            k = h
                        }
                        return k;
                    case "avg":
                    case "mean":
                        return w(b.toNumberArray(k));
                    case "min":
                        return Math.min.apply(Math, b.toNumberArray(k));
                    case "sum":
                        k = b.toNumberArray(k);
                        for (h = l = 0; h < k.length; h++)
                            l += k[h];
                        return l;
                    case "max":
                        return Math.max.apply(Math, b.toNumberArray(k));
                    case "stdev":
                    case "stddev":
                        return Math.sqrt(m(b.toNumberArray(k)));
                    case "var":
                    case "variance":
                        return m(b.toNumberArray(k));
                    case "count":
                        return k.length
                    }
                    return 0
                }
            })
        },
        "esri/arcade/functions/string": function() {
            define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g) {
                function q(x, v, z) {
                    if (null === x)
                        v.updateUint8Array([0, 139]);
                    else if (k.isArray(x)) {
                        v.updateUint8Array([61]);
                        if (z.map.has(x))
                            x = z.map.get(x),
                            v.updateIntArray([x ^ 61237541]);
                        else {
                            z.map.set(x, z.currentLength++);
                            for (var u = 0; u < x.length; u++) {
                                var p = x[u];
                                q(p, v, z)
                            }
                            z.map.delete(x);
                            z.currentLength--
                        }
                        v.updateUint8Array([199])
                    } else if (k.isImmutableArray(x)) {
                        v.updateUint8Array([61]);
                        if (z.map.has(x))
                            x = z.map.get(x),
                            v.updateIntArray([x ^ 61237541]);
                        else {
                            z.map.set(x, z.currentLength++);
                            u = 0;
                            for (var r = x.toArray(); u < r.length; u++)
                                p = r[u],
                                q(p, v, z);
                            z.map.delete(x);
                            z.currentLength--
                        }
                        v.updateUint8Array([199])
                    } else if (k.isDate(x))
                        v.updateIntArray([x.getTime()]),
                        v.updateUint8Array([241]);
                    else if (k.isString(x))
                        v.updateIntArray([x.length]),
                        v.updateWithString(x),
                        v.updateUint8Array([41]);
                    else if (k.isBoolean(x))
                        v.updateUint8Array([!0 === x ? 1 : 0, 113]);
                    else if (k.isNumber(x))
                        v.updateFloatArray([x]),
                        v.updateUint8Array([173]);
                    else {
                        if (x instanceof w)
                            throw Error("Type not supported in Hash");
                        if (x instanceof b)
                            throw Error("Type not supported in Hash");
                        if (x instanceof m) {
                            v.updateUint8Array([223]);
                            if (z.map.has(x))
                                x = z.map.get(x),
                                v.updateIntArray([x ^ 61237541]);
                            else {
                                z.map.set(x, z.currentLength++);
                                u = 0;
                                for (r = x.keys(); u < r.length; u++)
                                    p = r[u],
                                    v.updateIntArray([p.length]),
                                    v.updateWithString(p),
                                    v.updateUint8Array([251]),
                                    p = x.field(p),
                                    q(p, v, z),
                                    v.updateUint8Array([239]);
                                z.map.delete(x);
                                z.currentLength--
                            }
                            v.updateUint8Array([73])
                        } else {
                            if (x instanceof l)
                                throw Error("Type not supported in Hash");
                            if (x instanceof e)
                                v.updateIntArray([3833836621]),
                                v.updateIntArray([0]),
                                v.updateFloatArray([x.x]),
                                v.updateIntArray([1]),
                                v.updateFloatArray([x.y]),
                                v.updateIntArray([3765347959]),
                                q(x.spatialReference.wkid, v, z);
                            else if (x instanceof n) {
                                v.updateIntArray([1266616829]);
                                for (u = 0; u < x.rings.length; u++) {
                                    r = x.rings[u];
                                    var B = []
                                      , D = null
                                      , G = null;
                                    for (p = 0; p < r.length; p++) {
                                        var A = x.getPoint(u, p);
                                        if (0 === p)
                                            D = A;
                                        else if (G.x === A.x && G.y === A.y)
                                            continue;
                                        G = A;
                                        p === r.length - 1 && D.x === A.x && D.y === A.y || B.push(A)
                                    }
                                    v.updateIntArray([1397116793, B.length]);
                                    for (p = 0; p < B.length; p++)
                                        A = B[p],
                                        v.updateIntArray([3962308117, p]),
                                        q(A, v, z),
                                        v.updateIntArray([2716288009]);
                                    v.updateIntArray([2278822459])
                                }
                                v.updateIntArray([3878477243]);
                                q(x.spatialReference.wkid, v, z)
                            } else if (x instanceof t) {
                                v.updateIntArray([4106883559]);
                                for (u = 0; u < x.paths.length; u++) {
                                    r = x.paths[u];
                                    v.updateIntArray([1397116793, r.length]);
                                    for (p = 0; p < r.length; p++)
                                        v.updateIntArray([3962308117, p]),
                                        q(x.getPoint(u, p), v, z),
                                        v.updateIntArray([2716288009]);
                                    v.updateIntArray([2278822459])
                                }
                                v.updateIntArray([2568784753]);
                                q(x.spatialReference.wkid, v, z)
                            } else if (x instanceof c) {
                                v.updateIntArray([588535921, x.points.length]);
                                for (p = 0; p < x.points.length; p++)
                                    u = x.getPoint(p),
                                    v.updateIntArray([p]),
                                    q(u, v, z);
                                v.updateIntArray([1700171621]);
                                q(x.spatialReference.wkid, v, z)
                            } else if (x instanceof a)
                                v.updateIntArray([3483648373]),
                                v.updateIntArray([0]),
                                v.updateFloatArray([x.xmax]),
                                v.updateIntArray([1]),
                                v.updateFloatArray([x.xmin]),
                                v.updateIntArray([2]),
                                v.updateFloatArray([x.ymax]),
                                v.updateIntArray([3]),
                                v.updateFloatArray([x.ymin]),
                                v.updateIntArray([3622027469]),
                                q(x.spatialReference.wkid, v, z);
                            else if (x instanceof g)
                                v.updateIntArray([14]),
                                void 0 !== x.wkid && null !== x.wkid && v.updateIntArray([x.wkid]),
                                x.wkt && v.updateWithString(x.wkt);
                            else {
                                if (k.isFunctionParameter(x))
                                    throw Error("Type not supported in Hash");
                                if (k.isFeatureSet(x))
                                    throw Error("Type not supported in Hash");
                                k.isFeatureSetCollection(x);
                                throw Error("Type not supported in Hash");
                            }
                        }
                    }
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.registerFunctions = void 0;
                y.registerFunctions = function(x, v) {
                    x.portal = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            return new b(k.toString(B[0]))
                        })
                    }
                    ;
                    x.trim = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            return k.toString(B[0]).trim()
                        })
                    }
                    ;
                    x.tohex = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            p = k.toNumber(B[0]);
                            return isNaN(p) ? p : p.toString(16)
                        })
                    }
                    ;
                    x.upper = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            return k.toString(B[0]).toUpperCase()
                        })
                    }
                    ;
                    x.proper = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 2);
                            p = 1;
                            2 === B.length && "firstword" === k.toString(B[1]).toLowerCase() && (p = 2);
                            r = /\s/;
                            B = k.toString(B[0]);
                            for (var D = "", G = !0, A = 0; A < B.length; A++) {
                                var E = B[A];
                                r.test(E) ? 1 === p && (G = !0) : E.toUpperCase() !== E.toLowerCase() && (G ? (E = E.toUpperCase(),
                                G = !1) : E = E.toLowerCase());
                                D += E
                            }
                            return D
                        })
                    }
                    ;
                    x.lower = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            return k.toString(B[0]).toLowerCase()
                        })
                    }
                    ;
                    x.guid = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 0, 1);
                            if (0 < B.length)
                                switch (k.toString(B[0]).toLowerCase()) {
                                case "digits":
                                    return k.generateUUID().replace("-", "").replace("-", "").replace("-", "").replace("-", "");
                                case "digits-hyphen":
                                    return k.generateUUID();
                                case "digits-hyphen-parentheses":
                                    return "(" + k.generateUUID() + ")"
                                }
                            return "{" + k.generateUUID() + "}"
                        })
                    }
                    ;
                    x.console = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            0 !== B.length && (1 === B.length ? z.console(k.toString(B[0])) : z.console(k.toString(B)));
                            return k.voidOperation
                        })
                    }
                    ;
                    x.mid = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 2, 3);
                            p = k.toNumber(B[1]);
                            if (isNaN(p))
                                return "";
                            0 > p && (p = 0);
                            if (2 === B.length)
                                return k.toString(B[0]).substr(p);
                            r = k.toNumber(B[2]);
                            if (isNaN(r))
                                return "";
                            0 > r && (r = 0);
                            return k.toString(B[0]).substr(p, r)
                        })
                    }
                    ;
                    x.find = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 2, 3);
                            p = 0;
                            if (2 < B.length) {
                                p = k.toNumber(k.defaultUndefined(B[2], 0));
                                if (isNaN(p))
                                    return -1;
                                0 > p && (p = 0)
                            }
                            return k.toString(B[1]).indexOf(k.toString(B[0]), p)
                        })
                    }
                    ;
                    x.left = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 2, 2);
                            p = k.toNumber(B[1]);
                            if (isNaN(p))
                                return "";
                            0 > p && (p = 0);
                            return k.toString(B[0]).substr(0, p)
                        })
                    }
                    ;
                    x.right = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 2, 2);
                            p = k.toNumber(B[1]);
                            if (isNaN(p))
                                return "";
                            0 > p && (p = 0);
                            return k.toString(B[0]).substr(-1 * p, p)
                        })
                    }
                    ;
                    x.split = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 2, 4);
                            p = k.toNumber(k.defaultUndefined(B[2], -1));
                            r = k.toBoolean(k.defaultUndefined(B[3], !1));
                            -1 === p || null === p || !0 === r ? B = k.toString(B[0]).split(k.toString(B[1])) : (isNaN(p) && (p = -1),
                            -1 > p && (p = -1),
                            B = k.toString(B[0]).split(k.toString(B[1]), p));
                            if (!1 === r)
                                return B;
                            r = [];
                            for (var D = 0; D < B.length && !(-1 !== p && r.length >= p); D++)
                                "" !== B[D] && void 0 !== B[D] && r.push(B[D]);
                            return r
                        })
                    }
                    ;
                    x.text = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 2);
                            return k.toStringExplicit(B[0], B[1])
                        })
                    }
                    ;
                    x.concatenate = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            p = [];
                            if (1 > B.length)
                                return "";
                            if (k.isArray(B[0])) {
                                r = k.defaultUndefined(B[2], "");
                                for (var D = 0; D < B[0].length; D++)
                                    p[D] = k.toStringExplicit(B[0][D], r);
                                return 1 < B.length ? p.join(B[1]) : p.join("")
                            }
                            if (k.isImmutableArray(B[0])) {
                                r = k.defaultUndefined(B[2], "");
                                for (D = 0; D < B[0].length(); D++)
                                    p[D] = k.toStringExplicit(B[0].get(D), r);
                                return 1 < B.length ? p.join(B[1]) : p.join("")
                            }
                            for (D = 0; D < B.length; D++)
                                p[D] = k.toStringExplicit(B[D]);
                            return p.join("")
                        })
                    }
                    ;
                    x.reverse = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            if (k.isArray(B[0]))
                                return p = B[0].slice(0),
                                p.reverse(),
                                p;
                            if (k.isImmutableArray(B[0]))
                                return p = B[0].toArray().slice(0),
                                p.reverse(),
                                p;
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.replace = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 3, 4);
                            p = k.toString(B[0]);
                            r = k.toString(B[1]);
                            var D = k.toString(B[2]);
                            return (4 === B.length ? k.toBoolean(B[3]) : 1) ? k.multiReplace(p, r, D) : p.replace(r, D)
                        })
                    }
                    ;
                    x.schema = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            if (B[0]instanceof l)
                                return (p = B[0].schema()) ? m.convertObjectToArcadeDictionary(p) : null;
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.subtypes = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            if (B[0]instanceof l)
                                return (p = B[0].subtypes()) ? m.convertObjectToArcadeDictionary(p) : null;
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.subtypecode = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            if (B[0]instanceof l) {
                                r = B[0].subtypes();
                                if (!r)
                                    return null;
                                if (r.subtypeField && B[0].hasField(r.subtypeField))
                                    for (B = B[0].field(r.subtypeField),
                                    p = 0,
                                    r = r.subtypes; p < r.length; p++) {
                                        var D = r[p];
                                        if (D.code === B)
                                            return D.code
                                    }
                                return null
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.subtypename = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            if (B[0]instanceof l) {
                                r = B[0].subtypes();
                                if (!r)
                                    return "";
                                if (r.subtypeField && B[0].hasField(r.subtypeField))
                                    for (B = B[0].field(r.subtypeField),
                                    p = 0,
                                    r = r.subtypes; p < r.length; p++) {
                                        var D = r[p];
                                        if (D.code === B)
                                            return D.name
                                    }
                                return ""
                            }
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.gdbversion = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            if (B[0]instanceof l)
                                return B[0].gdbVersion();
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.domain = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 2, 3);
                            if (B[0]instanceof l)
                                return (p = B[0].fullDomain(k.toString(B[1]), void 0 === B[2] ? void 0 : k.toNumber(B[2]))) && p.domain ? "coded-value" === p.domain.type || "codedValue" === p.domain.type ? m.convertObjectToArcadeDictionary({
                                    type: "codedValue",
                                    name: p.domain.name,
                                    dataType: h.layerFieldEsriConstants[p.field.type],
                                    codedValues: p.domain.codedValues.map(function(D) {
                                        return {
                                            name: D.name,
                                            code: D.code
                                        }
                                    })
                                }) : m.convertObjectToArcadeDictionary({
                                    type: "range",
                                    name: p.domain.name,
                                    dataType: h.layerFieldEsriConstants[p.field.type],
                                    min: p.domain.min,
                                    max: p.domain.max
                                }) : null;
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.domainname = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 2, 4);
                            if (B[0]instanceof l)
                                return B[0].domainValueLookup(k.toString(B[1]), B[2], void 0 === B[3] ? void 0 : k.toNumber(B[3]));
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.domaincode = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 2, 4);
                            if (B[0]instanceof l)
                                return B[0].domainCodeLookup(k.toString(B[1]), B[2], void 0 === B[3] ? void 0 : k.toNumber(B[3]));
                            throw Error("Invalid Parameter");
                        })
                    }
                    ;
                    x.urlencode = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            if (null === B[0])
                                return "";
                            if (B[0]instanceof m) {
                                p = "";
                                r = 0;
                                for (var D = B[0].keys(); r < D.length; r++) {
                                    var G = D[r]
                                      , A = B[0].field(G);
                                    "" !== p && (p += "\x26");
                                    p = null === A ? p + (encodeURIComponent(G) + "\x3d") : p + (encodeURIComponent(G) + "\x3d" + encodeURIComponent(A))
                                }
                                return p
                            }
                            return encodeURIComponent(k.toString(B[0]))
                        })
                    }
                    ;
                    x.hash = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 1, 1);
                            p = new d.XXH(0);
                            q(B[0], p, {
                                map: new Map,
                                currentLength: 0
                            });
                            return p.digest()
                        })
                    }
                    ;
                    x.convertdirection = function(z, u) {
                        return v(z, u, function(p, r, B) {
                            k.pcCheck(B, 3, 3);
                            return f.convertDirection(B[0], B[1], B[2])
                        })
                    }
                }
            })
        },
        "esri/arcade/functions/convertdirection": function() {
            define(["require", "exports", "../Dictionary", "../languageUtils"], function(C, y, b, w) {
                function m(K) {
                    if (!1 === w.isString(K))
                        throw Error("Invalid Parameter");
                    return K
                }
                function l(K, Z) {
                    Z = Math.pow(10, Z);
                    return Math.round(K * Z) / Z
                }
                function k(K) {
                    K = +K;
                    return isFinite(K) ? K - K % 1 || (0 > K ? -0 : 0 === K ? K : 0) : K
                }
                function h(K) {
                    var Z = parseFloat(K.toString().replace(k(K).toString(), "0")) * ((0 < K) - (0 > K) || +K);
                    return 0 > K ? {
                        fraction: Z,
                        integer: Math.ceil(K)
                    } : {
                        fraction: Z,
                        integer: Math.floor(K)
                    }
                }
                function f(K, Z) {
                    switch (K) {
                    case 0:
                        return "SHORT" === Z ? "N" : "North";
                    case 1:
                        return "SHORT" === Z ? "E" : "East";
                    case 2:
                        return "SHORT" === Z ? "S" : "South";
                    case 3:
                        return "SHORT" === Z ? "W" : "West"
                    }
                }
                function d(K, Z, pa) {
                    for (; K.length < pa; )
                        K = Z + K;
                    return K
                }
                function a(K, Z) {
                    return K - Math.floor(K / Z) * Z
                }
                function c(K) {
                    switch (K) {
                    case 6:
                    case 1:
                        return 360;
                    case 4:
                        return E;
                    case 5:
                        return 400;
                    case 2:
                        return 1296E3;
                    case 7:
                        return 60;
                    case 8:
                        return 60;
                    default:
                        throw Error("Unnexpected evaluations");
                    }
                }
                function e(K) {
                    switch (K.toUpperCase().trim()) {
                    case "NORTH":
                    case "NORTHAZIMUTH":
                    case "NORTH AZIMUTH":
                        return 1;
                    case "POLAR":
                        return 2;
                    case "QUADRANT":
                        return 3;
                    case "SOUTH":
                    case "SOUTHAZIMUTH":
                    case "SOUTH AZIMUTH":
                        return 4
                    }
                    throw Error("Unsupported direction type");
                }
                function n(K) {
                    switch (K.toUpperCase().trim()) {
                    case "D":
                    case "DD":
                    case "DECIMALDEGREE":
                    case "DECIMAL DEGREE":
                    case "DEGREE":
                    case "DECIMALDEGREES":
                    case "DECIMAL DEGREES":
                    case "DEGREES":
                        return 1;
                    case "DMS":
                    case "DEGREESMINUTESSECONDS":
                    case "DEGREES MINUTES SECONDS":
                        return 3;
                    case "R":
                    case "RAD":
                    case "RADS":
                    case "RADIAN":
                    case "RADIANS":
                        return 4;
                    case "G":
                    case "GON":
                    case "GONS":
                    case "GRAD":
                    case "GRADS":
                    case "GRADIAN":
                    case "GRADIANS":
                        return 5
                    }
                    throw Error("Unsupported units");
                }
                function t(K, Z, pa) {
                    var L = null;
                    switch (Z) {
                    case 1:
                        L = y.preciseMultiply(K, 3600);
                        break;
                    case 2:
                        L = K;
                        break;
                    case 5:
                        L = y.preciseMultiply(K, 3240);
                        break;
                    case 4:
                        L = y.preciseMultiply(K, H);
                        break;
                    default:
                        throw Error("Unnexpected evaluation");
                    }
                    switch (pa) {
                    case 1:
                        return y.preciseDivide(L, 3600);
                    case 2:
                        return L;
                    case 5:
                        return y.preciseDivide(L, 3240);
                    case 4:
                        return L / H;
                    default:
                        throw Error("Unnexpected evaluation");
                    }
                }
                function g(K) {
                    switch (K) {
                    case 1:
                    case 6:
                    case 3:
                        return 1;
                    case 5:
                        return 5;
                    case 7:
                        return 7;
                    case 4:
                        return 4;
                    case 2:
                    case 8:
                        return 2
                    }
                }
                function q(K) {
                    switch (w.toNumber(K)) {
                    case 1:
                        return {
                            first: 0,
                            second: 1
                        };
                    case 2:
                        return {
                            first: 2,
                            second: 1
                        };
                    case 3:
                        return {
                            first: 2,
                            second: 3
                        };
                    case 4:
                        return {
                            first: 0,
                            second: 3
                        }
                    }
                    return null
                }
                function x(K) {
                    switch (K.toUpperCase().trim()) {
                    case "N":
                    case "NORTH":
                        return 0;
                    case "E":
                    case "EAST":
                        return 1;
                    case "S":
                    case "SOUTH":
                        return 2;
                    case "W":
                    case "WEST":
                        return 3
                    }
                    return null
                }
                function v(K) {
                    K = parseFloat(K);
                    if (w.isNumber(K)) {
                        if (isNaN(K))
                            throw Error("Invalid conversion");
                        return K
                    }
                    throw Error("Invalid conversion");
                }
                function z(K, Z, pa) {
                    var L = 3 === pa
                      , R = null
                      , ha = null
                      , na = 0
                      , ta = 0;
                    ta = 0;
                    if (L) {
                        if (2 > K.length)
                            throw Error("Conversion Error");
                        ta = 1;
                        (ha = q(w.toString(K[K.length - 1]))) ? (R = ha.first,
                        ha = ha.second) : (na = 1,
                        R = x(w.toString(K[0])),
                        ha = x(w.toString(K[K.length - 1])));
                        if (null === R || null === ha)
                            throw Error("Invalid Conversion");
                    }
                    switch (Z) {
                    case 1:
                    case 4:
                    case 5:
                        if (0 === K.length)
                            throw Error("Invalid Conversion");
                        return L ? ia.createFromAngleMeridianAndDirection(qa.createFromAngleAndUnits(v(K[na]), g(Z)), R, ha) : ia.createFromAngleAndDirection(qa.createFromAngleAndUnits(v(K[na]), g(Z)), pa);
                    case 3:
                        ta = K.length - ta - na;
                        if (3 === ta)
                            return K = qa.createFromDegreesMinutesSeconds(v(K[na]), v(K[na + 1]), v(K[na + 2])),
                            L ? ia.createFromAngleMeridianAndDirection(K, R, ha) : ia.createFromAngleAndDirection(K, pa);
                        if (1 === ta)
                            return K = v(K[na]),
                            K = ea.number_to_dms(K),
                            K = qa.createFromDegreesMinutesSeconds(K.m_degrees, K.m_minutes, K.m_seconds),
                            L ? ia.createFromAngleMeridianAndDirection(K, R, ha) : ia.createFromAngleAndDirection(K, pa)
                    }
                    throw Error("Conversion Error");
                }
                function u(K) {
                    for (var Z = [" ", "-", "/", "'", '"', "\\", "^", "\u00b0", J, "\t", "\r", "\n", "*"], pa = "", L = 0; L < K.length; L++) {
                        var R = K.charAt(L);
                        pa = -1 !== Z.indexOf(R) ? pa + "RRSPLITRRSPLITRR" : pa + R
                    }
                    return pa.split("RRSPLITRRSPLITRR").filter(function(ha) {
                        return "" !== ha
                    })
                }
                function p(K, Z, pa) {
                    for (var L = {
                        padding: 0,
                        rounding: 0,
                        newpos: Z
                    }, R = !1; Z < K.length; ) {
                        var ha = K[Z];
                        if (ha === pa)
                            R ? L.rounding++ : L.padding++,
                            Z++;
                        else if ("." === ha)
                            R = !0,
                            Z++;
                        else
                            break
                    }
                    L.newpos = Z - 1;
                    return L
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.convertDirection = y.preciseDivide = y.preciseMultiply = y.preciseMinus = y.preciseAdd = void 0;
                var r = function(K) {
                    return function(Z, pa, L) {
                        L = L || 14;
                        return +K(Z, pa).toFixed(L)
                    }
                }
                  , B = function(K, Z) {
                    return K + Z
                }
                  , D = function(K, Z) {
                    return K - Z
                }
                  , G = function(K, Z) {
                    return K * Z
                }
                  , A = function(K, Z) {
                    return K / Z
                };
                y.preciseAdd = function(K, Z, pa) {
                    return r(B)(K, Z, pa)
                }
                ;
                y.preciseMinus = function(K, Z, pa) {
                    return r(D)(K, Z, pa)
                }
                ;
                y.preciseMultiply = function(K, Z, pa) {
                    return r(G)(K, Z, pa)
                }
                ;
                y.preciseDivide = function(K, Z, pa) {
                    return r(A)(K, Z, pa)
                }
                ;
                var E = 2 * Math.PI, H = 648E3 / Math.PI, J = String.fromCharCode(7501), O;
                (function(K) {
                    K[K.north = 0] = "north";
                    K[K.east = 1] = "east";
                    K[K.south = 2] = "south";
                    K[K.west = 3] = "west"
                }
                )(O || (O = {}));
                var V;
                (function(K) {
                    K[K.decimal_degrees = 1] = "decimal_degrees";
                    K[K.seconds = 2] = "seconds";
                    K[K.degrees_minutes_seconds = 3] = "degrees_minutes_seconds";
                    K[K.radians = 4] = "radians";
                    K[K.gradians = 5] = "gradians";
                    K[K.truncated_degrees = 6] = "truncated_degrees";
                    K[K.fractional_degree_minutes = 7] = "fractional_degree_minutes";
                    K[K.fractional_minute_seconds = 8] = "fractional_minute_seconds"
                }
                )(V || (V = {}));
                var aa;
                (function(K) {
                    K[K.north_azimuth = 1] = "north_azimuth";
                    K[K.polar = 2] = "polar";
                    K[K.quadrant = 3] = "quadrant";
                    K[K.south_azimuth = 4] = "south_azimuth"
                }
                )(aa || (aa = {}));
                var da;
                (function(K) {
                    K[K.meridian = 0] = "meridian";
                    K[K.direction = 1] = "direction"
                }
                )(da || (da = {}));
                var ea = function() {
                    function K(Z, pa, L) {
                        this.m_degrees = Z;
                        this.m_minutes = pa;
                        this.m_seconds = L
                    }
                    K.prototype.get_field = function(Z) {
                        switch (Z) {
                        case 1:
                        case 6:
                            return this.m_degrees;
                        case 7:
                            return this.m_minutes;
                        case 2:
                        case 8:
                            return this.m_seconds;
                        default:
                            throw Error("Unnexpected evaluation");
                        }
                    }
                    ;
                    K.seconds_to_DMS = function(Z) {
                        var pa = h(Z).fraction;
                        Z = h(Z).integer;
                        var L = Math.floor(Z / 3600);
                        Z -= 3600 * L;
                        var R = Math.floor(Z / 60);
                        return new K(L,R,Z - 60 * R + pa)
                    }
                    ;
                    K.number_to_dms = function(Z) {
                        var pa = h(Z).fraction;
                        Z = h(Z).integer;
                        var L = y.preciseMultiply(h(100 * pa).fraction, 100);
                        pa = h(100 * pa).integer;
                        return new K(Z,pa,L)
                    }
                    ;
                    K.prototype.format = function(Z, pa) {
                        pa = l(this.m_seconds, pa);
                        var L = this.m_minutes
                          , R = this.m_degrees;
                        if (2 === Z || 8 === Z)
                            60 <= pa && (pa -= 60,
                            ++L),
                            60 <= L && (L = 0,
                            ++R),
                            360 <= R && (R = 0);
                        else if (7 === Z)
                            pa = 0,
                            L = 30 <= this.m_seconds ? this.m_minutes + 1 : this.m_minutes,
                            R = this.m_degrees,
                            60 <= L && (L = 0,
                            ++R),
                            360 <= R && (R = 0);
                        else if (1 === Z || 6 === Z)
                            Z = y.preciseDivide(this.m_seconds, 3600),
                            pa = y.preciseDivide(this.m_minutes, 60),
                            R = Math.round(this.m_degrees + pa + Z),
                            pa = L = 0;
                        return new K(R,L,pa)
                    }
                    ;
                    K.DMS_to_seconds = function(Z, pa, L) {
                        return 3600 * Z + 60 * pa + L
                    }
                    ;
                    return K
                }()
                  , Y = function() {
                    function K(Z, pa, L) {
                        this.meridian = Z;
                        this.angle = pa;
                        this.direction = L
                    }
                    K.prototype.fetch_azimuth = function(Z) {
                        return 0 === Z ? this.meridian : this.direction
                    }
                    ;
                    return K
                }()
                  , ia = function() {
                    function K(Z) {
                        this.m_angle = Z
                    }
                    K.createFromAngleAndDirection = function(Z, pa) {
                        return new K(new qa(K.convertDirectionFormat(Z.extract_angular_units(2), pa, 1)))
                    }
                    ;
                    K.prototype.getAngle = function(Z) {
                        var pa = this.m_angle.extract_angular_units(2);
                        switch (Z) {
                        case 1:
                        case 4:
                        case 2:
                            return Z = new qa(K.convertDirectionFormat(pa, 1, Z));
                        case 3:
                            return Z = K.seconds_north_azimuth_to_quadrant(pa),
                            Z = new qa(Z.angle)
                        }
                    }
                    ;
                    K.prototype.getMeridian = function(Z) {
                        var pa = this.m_angle.extract_angular_units(2);
                        switch (Z) {
                        case 1:
                            return 0;
                        case 4:
                            return 2;
                        case 2:
                            return 1;
                        case 3:
                            return K.seconds_north_azimuth_to_quadrant(pa).meridian
                        }
                    }
                    ;
                    K.prototype.getDirection = function(Z) {
                        var pa = this.m_angle.extract_angular_units(2);
                        switch (Z) {
                        case 1:
                            return 1;
                        case 4:
                            return 3;
                        case 2:
                            return 0;
                        case 3:
                            return K.seconds_north_azimuth_to_quadrant(pa).direction
                        }
                    }
                    ;
                    K.seconds_north_azimuth_to_quadrant = function(Z) {
                        var pa = 324E3 >= Z || 972E3 <= Z ? 0 : 2;
                        return new Y(pa,0 === pa ? Math.min(1296E3 - Z, Z) : Math.abs(Z - 648E3),648E3 < Z ? 3 : 1)
                    }
                    ;
                    K.createFromAngleMeridianAndDirection = function(Z, pa, L) {
                        return new K(new qa(K.secondsQuadrantToNorthAzimuth(Z.extract_angular_units(2), pa, L)))
                    }
                    ;
                    K.secondsQuadrantToNorthAzimuth = function(Z, pa, L) {
                        return 0 === pa ? 1 === L ? Z : 1296E3 - Z : 1 === L ? 648E3 - Z : 648E3 + Z
                    }
                    ;
                    K.convertDirectionFormat = function(Z, pa, L) {
                        var R = 0;
                        switch (pa) {
                        case 1:
                            R = Z;
                            break;
                        case 2:
                            R = 324E3 - Z;
                            break;
                        case 3:
                            throw Error("Unnexpected evaluation");
                        case 4:
                            R = Z + 648E3
                        }
                        Z = 0;
                        switch (L) {
                        case 1:
                            Z = R;
                            break;
                        case 2:
                            Z = 324E3 - R;
                            break;
                        case 3:
                            throw Error("Unnexpected evaluation");
                        case 4:
                            Z = R - 648E3
                        }
                        Z %= 1296E3;
                        return 0 > Z ? 1296E3 + Z : Z
                    }
                    ;
                    return K
                }()
                  , qa = function() {
                    function K(Z) {
                        this.m_seconds = Z
                    }
                    K.createFromAngleAndUnits = function(Z, pa) {
                        return new K(t(Z, pa, 2))
                    }
                    ;
                    K.prototype.extract_angular_units = function(Z) {
                        return t(this.m_seconds, 2, g(Z))
                    }
                    ;
                    K.createFromDegreesMinutesSeconds = function(Z, pa, L) {
                        return new K(y.preciseAdd(y.preciseAdd(y.preciseMultiply(Z, 3600), y.preciseMultiply(pa, 60)), L))
                    }
                    ;
                    return K
                }()
                  , wa = function() {
                    function K(Z, pa, L, R) {
                        this.m_view = Z;
                        this.m_angle = pa;
                        this.m_merdian = L;
                        this.m_direction = R;
                        this.m_formatted_dms = this.m_dms = null
                    }
                    K.createFromStringAndBearing = function(Z, pa, L) {
                        return new K(Z,pa.getAngle(L),pa.getMeridian(L),pa.getDirection(L))
                    }
                    ;
                    K.prototype.fetch_angle = function() {
                        return this.m_angle
                    }
                    ;
                    K.prototype.fetch_meridian = function() {
                        return this.m_merdian
                    }
                    ;
                    K.prototype.fetch_direction = function() {
                        return this.m_direction
                    }
                    ;
                    K.prototype.fetch_m_view = function() {
                        return this.m_view
                    }
                    ;
                    K.prototype.fetch_dms = function() {
                        null === this.m_dms && this.calculate_dms();
                        return this.m_dms
                    }
                    ;
                    K.prototype.fetch_formatted_dms = function() {
                        null === this.m_formatted_dms && this.calculate_dms();
                        return this.m_formatted_dms
                    }
                    ;
                    K.prototype.calculate_dms = function() {
                        var Z = null
                          , pa = 6
                          , L = 0;
                        for (Z = 0; Z < this.m_view.length; Z++) {
                            var R = this.m_view[Z];
                            switch (R) {
                            case "m":
                                Z = p(this.m_view, Z, R);
                                pa = 6 === pa ? 7 : pa;
                                Z = Z.newpos;
                                continue;
                            case "s":
                                Z = p(this.m_view, Z, R),
                                pa = 8,
                                L = L < Z.rounding ? Z.rounding : L,
                                Z = Z.newpos
                            }
                        }
                        this.m_dms = ea.seconds_to_DMS(this.m_angle.extract_angular_units(2));
                        this.m_formatted_dms = ea.seconds_to_DMS(this.m_angle.extract_angular_units(2)).format(pa, L)
                    }
                    ;
                    return K
                }();
                y.convertDirection = function(K, Z, pa) {
                    if (!(Z instanceof b))
                        throw Error("Invalid Parameter");
                    if (!1 === Z.hasField("directionType"))
                        throw Error("Invalid Parameter - Missing directionType");
                    if (!1 === Z.hasField("angleType"))
                        throw Error("Invalid Parameter - Missing directionType");
                    var L = e(m(Z.field("directiontype")));
                    Z = n(m(Z.field("angletype")));
                    if (w.isNumber(K)) {
                        K = w.toNumber(K);
                        if (3 === L)
                            throw Error("Conversion error");
                        3 === Z ? (K = ea.number_to_dms(K),
                        Z = ia.createFromAngleAndDirection(qa.createFromDegreesMinutesSeconds(K.m_degrees, K.m_minutes, K.m_seconds), L)) : Z = ia.createFromAngleAndDirection(qa.createFromAngleAndUnits(K, g(Z)), L)
                    } else if (w.isString(K))
                        Z = z(u(K), Z, L);
                    else if (w.isArray(K))
                        Z = z(K, Z, L);
                    else if (w.isImmutableArray(K))
                        Z = z(K.toArray(), Z, L);
                    else
                        throw Error("Conversion Error");
                    if (!(pa instanceof b))
                        throw Error("Invalid Parameter");
                    if (!1 === pa.hasField("directionType"))
                        throw Error("Invalid Parameter - Missing directionType");
                    if (!1 === pa.hasField("outputType"))
                        throw Error("Invalid Parameter - Missing directionType");
                    L = e(m(pa.field("directiontype")));
                    K = pa.hasField("angleType") ? n(m(pa.field("angletype"))) : null;
                    var R = m(pa.field("outputType")).toUpperCase().trim();
                    if (!L || !R)
                        throw Error("Conversion error");
                    if (!(K || "TEXT" === R && pa.hasField("format")))
                        throw Error("Invalid unit");
                    switch (R) {
                    case "VALUE":
                        if (3 === L || 3 === K)
                            return pa = Z,
                            Z = pa.getAngle(L),
                            3 === L && 3 === K ? (K = ea.seconds_to_DMS(Z.extract_angular_units(2)),
                            L = [f(pa.getMeridian(L), "SHORT"), K.m_degrees, K.m_minutes, K.m_seconds, f(pa.getDirection(L), "SHORT")]) : 3 === K ? (K = ea.seconds_to_DMS(Z.extract_angular_units(2)),
                            L = [K.m_degrees, K.m_minutes, K.m_seconds]) : L = 3 === L ? [f(pa.getMeridian(L), "SHORT"), Z.extract_angular_units(K), f(pa.getDirection(L), "SHORT")] : [Z.extract_angular_units(K)],
                            L;
                        pa = Z;
                        if ((Z = g(K)) && 3 !== K)
                            L = pa.getAngle(L).extract_angular_units(Z);
                        else
                            throw Error("Conversion Error");
                        return L;
                    case "TEXT":
                        R = "";
                        pa.hasField("format") && (R = w.toString(pa.field("format")));
                        if (null === R || "" === R) {
                            pa = "";
                            switch (K) {
                            case 1:
                                pa = 3 === L ? "DD.DD\u00b0" : "DDD.DD\u00b0";
                                break;
                            case 3:
                                pa = 3 === L ? "dd\u00b0 mm' ss\"" : "ddd\u00b0 mm' ss.ss\"";
                                break;
                            case 4:
                                pa = "R.RR";
                                break;
                            case 5:
                                pa = "GGG.GG" + J;
                                break;
                            default:
                                throw Error("Conversion error");
                            }
                            3 === L && (pa = "p " + pa + " b");
                            R = pa
                        }
                        pa = Z;
                        K = R;
                        var ha = ""
                          , na = null
                          , ta = null;
                        Z = wa.createFromStringAndBearing(K, pa, L);
                        R = {
                            D: 1,
                            d: 6,
                            m: 7,
                            s: 8,
                            R: 4,
                            G: 5
                        };
                        for (ta = 0; ta < K.length; ta++) {
                            var xa = K[ta];
                            switch (xa) {
                            case "[":
                                na = K;
                                xa = {
                                    escaped: "",
                                    newpos: ta
                                };
                                for (ta++; ta < na.length; ) {
                                    var Aa = na[ta];
                                    ta++;
                                    if ("]" === Aa)
                                        break;
                                    xa.escaped += Aa
                                }
                                xa.newpos = ta - 1;
                                na = xa;
                                ha += na.escaped;
                                ta = na.newpos;
                                continue;
                            case "D":
                            case "d":
                            case "m":
                            case "s":
                            case "R":
                            case "G":
                                na = p(K, ta, xa);
                                ta = pa.getAngle(L);
                                a: {
                                    xa = R[xa];
                                    Aa = na.padding;
                                    var ca = na.rounding
                                      , ja = Z
                                      , X = null;
                                    switch (xa) {
                                    case 1:
                                    case 4:
                                    case 5:
                                        X = a(l(ta.extract_angular_units(xa), ca), c(xa));
                                        ta = d(X.toFixed(ca), "0", Aa + ca + (0 < ca ? 1 : 0));
                                        break a;
                                    case 6:
                                    case 7:
                                        X = a(ja.fetch_formatted_dms().get_field(xa), c(xa));
                                        ta = d(X.toFixed(ca), "0", Aa + ca + (0 < ca ? 1 : 0));
                                        break a;
                                    case 8:
                                        X = a(l(ja.fetch_dms().get_field(xa), ca), c(xa));
                                        ta = d(X.toFixed(ca), "0", Aa + ca + (0 < ca ? 1 : 0));
                                        break a;
                                    default:
                                        throw Error("Unnexepected evaluation");
                                    }
                                }
                                ha += ta;
                                ta = na.newpos;
                                continue;
                            case "P":
                            case "p":
                                ha += f(Z.fetch_meridian(), "p" === xa ? "SHORT" : "LONG");
                                continue;
                            case "B":
                            case "b":
                                ha += f(Z.fetch_direction(), "b" === xa ? "SHORT" : "LONG");
                                continue;
                            default:
                                ha += xa
                            }
                        }
                        return ha;
                    default:
                        throw Error("Invalid Parameter");
                    }
                }
            })
        },
        "esri/arcade/functions/hash": function() {
            define(["require", "exports"], function(C, y) {
                function b(w) {
                    for (var m = [], l = 0, k = w.length; l < k; l++) {
                        var h = w.charCodeAt(l);
                        128 > h ? m.push(h) : 2048 > h ? m.push(192 | h >> 6, 128 | h & 63) : 55296 > h || 57344 <= h ? m.push(224 | h >> 12, 128 | h >> 6 & 63, 128 | h & 63) : (l++,
                        h = 65536 + ((h & 1023) << 10 | w.charCodeAt(l) & 1023),
                        m.push(240 | h >> 18, 128 | h >> 12 & 63, 128 | h >> 6 & 63, 128 | h & 63))
                    }
                    return new Uint8Array(m)
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.XXH = void 0;
                C = function() {
                    function w(m) {
                        this.seed = m;
                        this.totallen = 0;
                        this.bufs = [];
                        this.init()
                    }
                    w.prototype.init = function() {
                        this.bufs = [];
                        this.totallen = 0;
                        return this
                    }
                    ;
                    w.prototype.updateFloatArray = function(m) {
                        for (var l = [], k = 0; k < m.length; k++) {
                            var h = m[k];
                            isNaN(h) ? l.push("NaN") : Infinity === h ? l.push("Infinity") : -Infinity === h ? l.push("-Infinity") : 0 === h ? l.push("0") : l.push(h.toString(16))
                        }
                        this.update(b(l.join("")))
                    }
                    ;
                    w.prototype.updateIntArray = function(m) {
                        m = Int32Array.from(m);
                        this.update(new Uint8Array(m.buffer))
                    }
                    ;
                    w.prototype.updateUint8Array = function(m) {
                        this.update(Uint8Array.from(m))
                    }
                    ;
                    w.prototype.updateWithString = function(m) {
                        return this.update(b(m))
                    }
                    ;
                    w.prototype.update = function(m) {
                        this.bufs.push(m);
                        this.totallen += m.length;
                        return this
                    }
                    ;
                    w.prototype.digest = function() {
                        for (var m = new Uint8Array(this.totallen), l = 0, k = 0, h = this.bufs; k < h.length; k++) {
                            var f = h[k];
                            m.set(f, l);
                            l += f.length
                        }
                        this.init();
                        return this.xxHash32(m, this.seed)
                    }
                    ;
                    w.prototype.xxHash32 = function(m, l) {
                        void 0 === l && (l = 0);
                        var k = l + 374761393 & 4294967295
                          , h = 0;
                        if (16 <= m.length) {
                            k = [l + 2654435761 + 2246822519 & 4294967295, l + 2246822519 & 4294967295, l + 0 & 4294967295, l - 2654435761 & 4294967295];
                            var f = m.length - 16;
                            for (h = l = 0; (h & 4294967280) <= f; h += 4) {
                                var d = h
                                  , a = m[d + 0] + (m[d + 1] << 8);
                                d = m[d + 2] + (m[d + 3] << 8);
                                a = k[l] + (2246822519 * a + (2246822519 * d << 16)) & 4294967295;
                                a = a << 13 | a >>> 19;
                                k[l] = 2654435761 * (a & 65535) + (2654435761 * (a >>> 16) << 16) & 4294967295;
                                l = l + 1 & 3
                            }
                            k = (k[0] << 1 | k[0] >>> 31) + (k[1] << 7 | k[1] >>> 25) + (k[2] << 12 | k[2] >>> 20) + (k[3] << 18 | k[3] >>> 14) & 4294967295
                        }
                        k = k + m.length & 4294967295;
                        for (l = m.length - 4; h <= l; h += 4)
                            d = h,
                            a = m[d + 0] + (m[d + 1] << 8),
                            d = m[d + 2] + (m[d + 3] << 8),
                            k = k + (3266489917 * a + (3266489917 * d << 16)) & 4294967295,
                            k = k << 17 | k >>> 15,
                            k = 668265263 * (k & 65535) + (668265263 * (k >>> 16) << 16) & 4294967295;
                        for (; h < m.length; ++h)
                            l = m[h],
                            k += 374761393 * l,
                            k = k << 11 | k >>> 21,
                            k = 2654435761 * (k & 65535) + (2654435761 * (k >>> 16) << 16) & 4294967295;
                        k ^= k >>> 15;
                        k = (2246822519 * (k & 65535) & 4294967295) + (2246822519 * (k >>> 16) << 16);
                        k ^= k >>> 13;
                        k = (3266489917 * (k & 65535) & 4294967295) + (3266489917 * (k >>> 16) << 16);
                        k ^= k >>> 16;
                        return 0 > k ? k + 4294967296 : k
                    }
                    ;
                    return w
                }();
                y.XXH = C
            })
        },
        "esri/arcade/arcadeRuntime": function() {
            define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B, D) {
                function G(ca, ja) {
                    for (var X = [], oa = 0; oa < ja.arguments.length; oa++)
                        X.push(E(ca, ja.arguments[oa]));
                    return X
                }
                function A(ca, ja, X) {
                    try {
                        return X(ca, ja, G(ca, ja))
                    } catch (oa) {
                        throw oa;
                    }
                }
                function E(ca, ja) {
                    try {
                        switch (ja.type) {
                        case "EmptyStatement":
                            return d.voidOperation;
                        case "VariableDeclarator":
                            var X = null === ja.init ? null : E(ca, ja.init);
                            X === d.voidOperation && (X = null);
                            if ("Identifier" !== ja.id.type)
                                throw Error("Can only assign a regular variable");
                            var oa = ja.id.name.toLowerCase();
                            null !== ca.localScope ? ca.localScope[oa] = {
                                value: X,
                                valueset: !0,
                                node: ja.init
                            } : ca.globalScope[oa] = {
                                value: X,
                                valueset: !0,
                                node: ja.init
                            };
                            return d.voidOperation;
                        case "VariableDeclaration":
                            for (var ka = 0; ka < ja.declarations.length; ka++)
                                E(ca, ja.declarations[ka]);
                            return d.voidOperation;
                        case "BlockStatement":
                            a: {
                                var Ea = d.voidOperation;
                                for (ka = 0; ka < ja.body.length; ka++)
                                    if (Ea = E(ca, ja.body[ka]),
                                    Ea instanceof d.ReturnResult || Ea === d.breakResult || Ea === d.continueResult) {
                                        var T = Ea;
                                        break a
                                    }
                                T = Ea
                            }
                            return T;
                        case "FunctionDeclaration":
                            var U = ja.id.name.toLowerCase();
                            ca.globalScope[U] = {
                                valueset: !0,
                                node: null,
                                value: new k(ja,ca)
                            };
                            return d.voidOperation;
                        case "ReturnStatement":
                            if (null === ja.argument)
                                var ma = new d.ReturnResult(d.voidOperation);
                            else {
                                var sa = E(ca, ja.argument);
                                ma = new d.ReturnResult(sa)
                            }
                            return ma;
                        case "IfStatement":
                            if ("AssignmentExpression" === ja.test.type || "UpdateExpression" === ja.test.type)
                                throw Error(a.nodeErrorMessage(ja.test, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                            var ya = E(ca, ja.test);
                            if (!0 === ya)
                                var Oa = E(ca, ja.consequent);
                            else if (!1 === ya)
                                Oa = null !== ja.alternate ? E(ca, ja.alternate) : d.voidOperation;
                            else
                                throw Error(a.nodeErrorMessage(ja, "RUNTIME", "CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
                            return Oa;
                        case "ExpressionStatement":
                            if ("AssignmentExpression" === ja.expression.type || "UpdateExpression" === ja.expression.type)
                                var Ua = E(ca, ja.expression);
                            else {
                                var Xa = E(ca, ja.expression);
                                Ua = Xa === d.voidOperation ? d.voidOperation : new d.ImplicitResult(Xa)
                            }
                            return Ua;
                        case "AssignmentExpression":
                            var Ma = E(ca, ja.right);
                            ka = null;
                            var I = "";
                            if ("MemberExpression" === ja.left.type) {
                                ka = E(ca, ja.left.object);
                                !0 === ja.left.computed ? I = E(ca, ja.left.property) : "Identifier" === ja.left.property.type && (I = ja.left.property.name);
                                if (d.isArray(ka))
                                    if (d.isNumber(I)) {
                                        0 > I && (I = ka.length + I);
                                        if (0 > I || I > ka.length)
                                            throw Error("Assignment outside of array bounds");
                                        if (I === ka.length && "\x3d" !== ja.operator)
                                            throw Error("Invalid Parameter");
                                        ka[I] = J(Ma, ja.operator, ka[I], ja)
                                    } else
                                        throw Error("Invalid Parameter");
                                else if (ka instanceof m) {
                                    if (!1 === d.isString(I))
                                        throw Error("Dictionary accessor must be a string");
                                    if (!0 === ka.hasField(I))
                                        ka.setField(I, J(Ma, ja.operator, ka.field(I), ja));
                                    else {
                                        if ("\x3d" !== ja.operator)
                                            throw Error("Invalid Parameter");
                                        ka.setField(I, J(Ma, ja.operator, null, ja))
                                    }
                                } else if (ka instanceof l) {
                                    if (!1 === d.isString(I))
                                        throw Error("Feature accessor must be a string");
                                    if (!0 === ka.hasField(I))
                                        ka.setField(I, J(Ma, ja.operator, ka.field(I), ja));
                                    else {
                                        if ("\x3d" !== ja.operator)
                                            throw Error("Invalid Parameter");
                                        ka.setField(I, J(Ma, ja.operator, null, ja))
                                    }
                                } else {
                                    if (d.isImmutableArray(ka))
                                        throw Error("Array is Immutable");
                                    throw Error("Invalid Parameter");
                                }
                                var Q = d.voidOperation
                            } else if (ka = ja.left.name.toLowerCase(),
                            null !== ca.localScope && void 0 !== ca.localScope[ka])
                                ca.localScope[ka] = {
                                    value: J(Ma, ja.operator, ca.localScope[ka].value, ja),
                                    valueset: !0,
                                    node: ja.right
                                },
                                Q = d.voidOperation;
                            else if (void 0 !== ca.globalScope[ka])
                                ca.globalScope[ka] = {
                                    value: J(Ma, ja.operator, ca.globalScope[ka].value, ja),
                                    valueset: !0,
                                    node: ja.right
                                },
                                Q = d.voidOperation;
                            else
                                throw Error("Variable not recognised");
                            return Q;
                        case "UpdateExpression":
                            ka = null;
                            I = "";
                            if ("MemberExpression" === ja.argument.type) {
                                ka = E(ca, ja.argument.object);
                                !0 === ja.argument.computed ? I = E(ca, ja.argument.property) : "Identifier" === ja.argument.property.type && (I = ja.argument.property.name);
                                if (d.isArray(ka))
                                    if (d.isNumber(I)) {
                                        0 > I && (I = ka.length + I);
                                        if (0 > I || I >= ka.length)
                                            throw Error("Assignment outside of array bounds");
                                        var ba = d.toNumber(ka[I]);
                                        ka[I] = "++" === ja.operator ? ba + 1 : ba - 1
                                    } else
                                        throw Error("Invalid Parameter");
                                else if (ka instanceof m) {
                                    if (!1 === d.isString(I))
                                        throw Error("Dictionary accessor must be a string");
                                    if (!0 === ka.hasField(I))
                                        ba = d.toNumber(ka.field(I)),
                                        ka.setField(I, "++" === ja.operator ? ba + 1 : ba - 1);
                                    else
                                        throw Error("Invalid Parameter");
                                } else if (ka instanceof l) {
                                    if (!1 === d.isString(I))
                                        throw Error("Feature accessor must be a string");
                                    if (!0 === ka.hasField(I))
                                        ba = d.toNumber(ka.field(I)),
                                        ka.setField(I, "++" === ja.operator ? ba + 1 : ba - 1);
                                    else
                                        throw Error("Invalid Parameter");
                                } else {
                                    if (d.isImmutableArray(ka))
                                        throw Error("Array is Immutable");
                                    throw Error("Invalid Parameter");
                                }
                                var M = !1 === ja.prefix ? ba : "++" === ja.operator ? ba + 1 : ba - 1
                            } else {
                                ka = "Identifier" === ja.argument.type ? ja.argument.name.toLowerCase() : "";
                                if (!ka)
                                    throw Error("Invalid identifier");
                                if (null !== ca.localScope && void 0 !== ca.localScope[ka])
                                    ba = d.toNumber(ca.localScope[ka].value),
                                    ca.localScope[ka] = {
                                        value: "++" === ja.operator ? ba + 1 : ba - 1,
                                        valueset: !0,
                                        node: ja
                                    },
                                    M = !1 === ja.prefix ? ba : "++" === ja.operator ? ba + 1 : ba - 1;
                                else if (void 0 !== ca.globalScope[ka])
                                    ba = d.toNumber(ca.globalScope[ka].value),
                                    ca.globalScope[ka] = {
                                        value: "++" === ja.operator ? ba + 1 : ba - 1,
                                        valueset: !0,
                                        node: ja
                                    },
                                    M = !1 === ja.prefix ? ba : "++" === ja.operator ? ba + 1 : ba - 1;
                                else
                                    throw Error("Variable not recognised");
                            }
                            return M;
                        case "BreakStatement":
                            return d.breakResult;
                        case "ContinueStatement":
                            return d.continueResult;
                        case "TemplateElement":
                            return ja.value ? ja.value.cooked : "";
                        case "TemplateLiteral":
                            var S = ""
                              , fa = 0;
                            Q = 0;
                            for (ka = ja.quasis; Q < ka.length; Q++)
                                if (I = ka[Q],
                                S += I.value ? I.value.cooked : "",
                                !1 === I.tail) {
                                    var ra = ja.expressions[fa] ? d.toString(E(ca, ja.expressions[fa])) : "";
                                    S += ra;
                                    fa++
                                }
                            return S;
                        case "ForStatement":
                            null !== ja.init && E(ca, ja.init);
                            fa = {
                                testResult: !0,
                                lastAction: d.voidOperation
                            };
                            do
                                b: {
                                    ka = ca;
                                    I = ja;
                                    ra = fa;
                                    if (null !== I.test) {
                                        ra.testResult = E(ka, I.test);
                                        if (!1 === ra.testResult)
                                            break b;
                                        if (!0 !== ra.testResult)
                                            throw Error(a.nodeErrorMessage(I, "RUNTIME", "CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
                                    }
                                    ra.lastAction = E(ka, I.body);
                                    ra.lastAction === d.breakResult ? ra.testResult = !1 : ra.lastAction instanceof d.ReturnResult ? ra.testResult = !1 : null !== I.update && E(ka, I.update)
                                }
                            while (!0 === fa.testResult);
                            S = fa.lastAction instanceof d.ReturnResult ? fa.lastAction : d.voidOperation;
                            return S;
                        case "ForInStatement":
                            return H(ca, ja);
                        case "Identifier":
                            return Y(ca, ja);
                        case "MemberExpression":
                            return V(ca, ja);
                        case "Literal":
                            return ja.value;
                        case "CallExpression":
                            return ia(ca, ja);
                        case "UnaryExpression":
                            return aa(ca, ja);
                        case "BinaryExpression":
                            return da(ca, ja);
                        case "LogicalExpression":
                            return ea(ca, ja);
                        case "ConditionalExpression":
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "NOTSUPPORTED"));
                        case "ArrayExpression":
                            try {
                                for (ka = [],
                                I = 0; I < ja.elements.length; I++) {
                                    var va = E(ca, ja.elements[I]);
                                    if (d.isFunctionParameter(va))
                                        throw Error(a.nodeErrorMessage(ja, "RUNTIME", "FUNCTIONCONTEXTILLEGAL"));
                                    va === d.voidOperation ? ka.push(null) : ka.push(va)
                                }
                            } catch (Ra) {
                                throw Ra;
                            }
                            return ka;
                        case "ObjectExpression":
                            ka = {};
                            for (I = 0; I < ja.properties.length; I++) {
                                var Ca = E(ca, ja.properties[I]);
                                if (d.isFunctionParameter(Ca.value))
                                    throw Error("Illegal Argument");
                                if (!1 === d.isString(Ca.key))
                                    throw Error("Illegal Argument");
                                ka[Ca.key.toString()] = Ca.value === d.voidOperation ? null : Ca.value
                            }
                            var Da = new m(ka);
                            Da.immutable = !1;
                            return Da;
                        case "Property":
                            return {
                                key: "Identifier" === ja.key.type ? ja.key.name : E(ca, ja.key),
                                value: E(ca, ja.value)
                            };
                        default:
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "UNREOGNISED"));
                        }
                    } catch (Ra) {
                        throw Ra;
                    }
                }
                function H(ca, ja) {
                    var X = E(ca, ja.right);
                    "VariableDeclaration" === ja.left.type && E(ca, ja.left);
                    var oa = null
                      , ka = "";
                    if ("VariableDeclaration" === ja.left.type) {
                        var Ea = ja.left.declarations[0].id;
                        "Identifier" === Ea.type && (ka = Ea.name)
                    } else
                        "Identifier" === ja.left.type && (ka = ja.left.name);
                    if (!ka)
                        throw Error(a.nodeErrorMessage(ja, "RUNTIME", "INVALIDVARIABLE"));
                    ka = ka.toLowerCase();
                    null !== ca.localScope && void 0 !== ca.localScope[ka] && (oa = ca.localScope[ka]);
                    null === oa && void 0 !== ca.globalScope[ka] && (oa = ca.globalScope[ka]);
                    if (null === oa)
                        throw Error(a.nodeErrorMessage(ja, "RUNTIME", "VARIABLENOTDECLARED"));
                    if (d.isArray(X) || d.isString(X)) {
                        X = X.length;
                        for (Ea = 0; Ea < X; Ea++) {
                            oa.value = Ea;
                            ka = E(ca, ja.body);
                            if (ka === d.breakResult)
                                break;
                            if (ka instanceof d.ReturnResult)
                                return ka
                        }
                        return d.voidOperation
                    }
                    if (d.isImmutableArray(X)) {
                        for (Ea = 0; Ea < X.length(); Ea++) {
                            oa.value = Ea;
                            ka = E(ca, ja.body);
                            if (ka === d.breakResult)
                                break;
                            if (ka instanceof d.ReturnResult)
                                return ka
                        }
                        return d.voidOperation
                    }
                    if (X instanceof m || X instanceof l)
                        for (X = X.keys(),
                        Ea = 0; Ea < X.length; Ea++) {
                            oa.value = X[Ea];
                            ka = E(ca, ja.body);
                            if (ka === d.breakResult)
                                break;
                            if (ka instanceof d.ReturnResult)
                                return ka
                        }
                    else
                        return d.voidOperation
                }
                function J(ca, ja, X, oa) {
                    switch (ja) {
                    case "\x3d":
                        return ca === d.voidOperation ? null : ca;
                    case "/\x3d":
                        return d.toNumber(X) / d.toNumber(ca);
                    case "*\x3d":
                        return d.toNumber(X) * d.toNumber(ca);
                    case "-\x3d":
                        return d.toNumber(X) - d.toNumber(ca);
                    case "+\x3d":
                        return d.isString(X) || d.isString(ca) ? d.toString(X) + d.toString(ca) : d.toNumber(X) + d.toNumber(ca);
                    case "%\x3d":
                        return d.toNumber(X) % d.toNumber(ca);
                    default:
                        throw Error(a.nodeErrorMessage(oa, "RUNTIME", "OPERATORNOTRECOGNISED"));
                    }
                }
                function O(ca, ja, X) {
                    ja = ja.toLowerCase();
                    switch (ja) {
                    case "hasz":
                        return ca = ca.hasZ,
                        void 0 === ca ? !1 : ca;
                    case "hasm":
                        return ca = ca.hasM,
                        void 0 === ca ? !1 : ca;
                    case "spatialreference":
                        return ja = ca.spatialReference._arcadeCacheId,
                        void 0 === ja && (X = !0,
                        Object.freeze && Object.isFrozen(ca.spatialReference) && (X = !1),
                        X && (na++,
                        ja = ca.spatialReference._arcadeCacheId = na)),
                        ca = new m({
                            wkt: ca.spatialReference.wkt,
                            wkid: ca.spatialReference.wkid
                        }),
                        void 0 !== ja && (ca._arcadeCacheId = "SPREF" + ja.toString()),
                        ca
                    }
                    switch (ca.type) {
                    case "extent":
                        switch (ja) {
                        case "xmin":
                        case "xmax":
                        case "ymin":
                        case "ymax":
                        case "zmin":
                        case "zmax":
                        case "mmin":
                        case "mmax":
                            return ca = ca[ja],
                            void 0 !== ca ? ca : null;
                        case "type":
                            return "Extent"
                        }
                        break;
                    case "polygon":
                        switch (ja) {
                        case "rings":
                            return ja = ca.getCacheValue("_arcadeCacheId"),
                            void 0 === ja && (na++,
                            ja = na,
                            ca.setCacheValue("_arcadeCacheId", ja)),
                            ca = new h(ca.rings,ca.spatialReference,!0 === ca.hasZ,!0 === ca.hasM,ja);
                        case "type":
                            return "Polygon"
                        }
                        break;
                    case "point":
                        switch (ja) {
                        case "x":
                        case "y":
                        case "z":
                        case "m":
                            return void 0 !== ca[ja] ? ca[ja] : null;
                        case "type":
                            return "Point"
                        }
                        break;
                    case "polyline":
                        switch (ja) {
                        case "paths":
                            return ja = ca.getCacheValue("_arcadeCacheId"),
                            void 0 === ja && (na++,
                            ja = na,
                            ca.setCacheValue("_arcadeCacheId", ja)),
                            ca = new h(ca.paths,ca.spatialReference,!0 === ca.hasZ,!0 === ca.hasM,ja);
                        case "type":
                            return "Polyline"
                        }
                        break;
                    case "multipoint":
                        switch (ja) {
                        case "points":
                            return ja = ca.getCacheValue("_arcadeCacheId"),
                            void 0 === ja && (na++,
                            ja = na,
                            ca.setCacheValue("_arcadeCacheId", ja)),
                            ca = new f(ca.points,ca.spatialReference,!0 === ca.hasZ,!0 === ca.hasM,ja,1);
                        case "type":
                            return "Multipoint"
                        }
                    }
                    throw Error(a.nodeErrorMessage(X, "RUNTIME", "PROPERTYNOTFOUND"));
                }
                function V(ca, ja) {
                    try {
                        var X = E(ca, ja.object);
                        if (null === X)
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "NOTFOUND"));
                        if (!1 === ja.computed) {
                            if ("Identifier" === ja.property.type) {
                                if (X instanceof m || X instanceof l)
                                    return X.field(ja.property.name);
                                if (X instanceof z)
                                    return O(X, ja.property.name, ja)
                            }
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "INVALIDTYPE"));
                        }
                        var oa = E(ca, ja.property);
                        if (X instanceof m || X instanceof l) {
                            if (d.isString(oa))
                                return X.field(oa);
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "INVALIDTYPE"));
                        }
                        if (X instanceof z) {
                            if (d.isString(oa))
                                return O(X, oa, ja);
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "INVALIDTYPE"));
                        }
                        if (d.isArray(X)) {
                            if (d.isNumber(oa) && isFinite(oa) && Math.floor(oa) === oa) {
                                0 > oa && (oa = X.length + oa);
                                if (oa >= X.length || 0 > oa)
                                    throw Error(a.nodeErrorMessage(ja, "RUNTIME", "OUTOFBOUNDS"));
                                return X[oa]
                            }
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "INVALIDTYPE"));
                        }
                        if (d.isString(X)) {
                            if (d.isNumber(oa) && isFinite(oa) && Math.floor(oa) === oa) {
                                0 > oa && (oa = X.length + oa);
                                if (oa >= X.length || 0 > oa)
                                    throw Error(a.nodeErrorMessage(ja, "RUNTIME", "OUTOFBOUNDS"));
                                return X[oa]
                            }
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "INVALIDTYPE"));
                        }
                        if (d.isImmutableArray(X) && d.isNumber(oa) && isFinite(oa) && Math.floor(oa) === oa) {
                            0 > oa && (oa = X.length() + oa);
                            if (oa >= X.length() || 0 > oa)
                                throw Error(a.nodeErrorMessage(ja, "RUNTIME", "OUTOFBOUNDS"));
                            return X.get(oa)
                        }
                        throw Error(a.nodeErrorMessage(ja, "RUNTIME", "INVALIDTYPE"));
                    } catch (ka) {
                        throw ka;
                    }
                }
                function aa(ca, ja) {
                    try {
                        var X = E(ca, ja.argument);
                        if (d.isBoolean(X)) {
                            if ("!" === ja.operator)
                                return !X;
                            if ("-" === ja.operator)
                                return -1 * d.toNumber(X);
                            if ("+" === ja.operator)
                                return 1 * d.toNumber(X);
                            if ("~" === ja.operator)
                                return ~d.toNumber(X);
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "NOTSUPPORTEDUNARYOPERATOR"));
                        }
                        if ("~" === ja.operator)
                            return ~d.toNumber(X);
                        if ("-" === ja.operator)
                            return -1 * d.toNumber(X);
                        if ("+" === ja.operator)
                            return 1 * d.toNumber(X);
                        throw Error(a.nodeErrorMessage(ja, "RUNTIME", "NOTSUPPORTEDUNARYOPERATOR"));
                    } catch (oa) {
                        throw oa;
                    }
                }
                function da(ca, ja) {
                    try {
                        var X = [E(ca, ja.left), E(ca, ja.right)]
                          , oa = X[0]
                          , ka = X[1];
                        switch (ja.operator) {
                        case "|":
                        case "\x3c\x3c":
                        case "\x3e\x3e":
                        case "\x3e\x3e\x3e":
                        case "^":
                        case "\x26":
                            return d.binaryOperator(d.toNumber(oa), d.toNumber(ka), ja.operator);
                        case "\x3d\x3d":
                            return d.equalityTest(oa, ka);
                        case "!\x3d":
                            return !d.equalityTest(oa, ka);
                        case "\x3c":
                            return d.greaterThanLessThan(oa, ka, ja.operator);
                        case "\x3e":
                            return d.greaterThanLessThan(oa, ka, ja.operator);
                        case "\x3c\x3d":
                            return d.greaterThanLessThan(oa, ka, ja.operator);
                        case "\x3e\x3d":
                            return d.greaterThanLessThan(oa, ka, ja.operator);
                        case "+":
                            return d.isString(oa) || d.isString(ka) ? d.toString(oa) + d.toString(ka) : d.toNumber(oa) + d.toNumber(ka);
                        case "-":
                            return d.toNumber(oa) - d.toNumber(ka);
                        case "*":
                            return d.toNumber(oa) * d.toNumber(ka);
                        case "/":
                            return d.toNumber(oa) / d.toNumber(ka);
                        case "%":
                            return d.toNumber(oa) % d.toNumber(ka);
                        default:
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "OPERATORNOTRECOGNISED"));
                        }
                    } catch (Ea) {
                        throw Ea;
                    }
                }
                function ea(ca, ja) {
                    try {
                        if ("AssignmentExpression" === ja.left.type || "UpdateExpression" === ja.left.type)
                            throw Error(a.nodeErrorMessage(ja.left, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                        if ("AssignmentExpression" === ja.right.type || "UpdateExpression" === ja.right.type)
                            throw Error(a.nodeErrorMessage(ja.right, "RUNTIME", "CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
                        var X = E(ca, ja.left);
                        if (d.isBoolean(X))
                            switch (ja.operator) {
                            case "||":
                                if (!0 === X)
                                    return X;
                                var oa = E(ca, ja.right);
                                if (d.isBoolean(oa))
                                    return oa;
                                throw Error(a.nodeErrorMessage(ja, "RUNTIME", "ONLYORORAND"));
                            case "\x26\x26":
                                if (!1 === X)
                                    return X;
                                oa = E(ca, ja.right);
                                if (d.isBoolean(oa))
                                    return oa;
                                throw Error(a.nodeErrorMessage(ja, "RUNTIME", "ONLYORORAND"));
                            default:
                                throw Error(a.nodeErrorMessage(ja, "RUNTIME", "ONLYORORAND"));
                            }
                        throw Error(a.nodeErrorMessage(ja, "RUNTIME", "ONLYBOOLEAN"));
                    } catch (ka) {
                        throw ka;
                    }
                }
                function Y(ca, ja) {
                    try {
                        var X = ja.name.toLowerCase();
                        if (null !== ca.localScope && void 0 !== ca.localScope[X]) {
                            var oa = ca.localScope[X];
                            if (!0 === oa.valueset)
                                return oa.value;
                            oa.value = E(ca, oa.node);
                            oa.valueset = !0;
                            return oa.value
                        }
                        if (void 0 !== ca.globalScope[X]) {
                            oa = ca.globalScope[X];
                            if (!0 === oa.valueset)
                                return oa.value;
                            oa.value = E(ca, oa.node);
                            oa.valueset = !0;
                            return oa.value
                        }
                        throw Error(a.nodeErrorMessage(ja, "RUNTIME", "VARIABLENOTFOUND"));
                    } catch (ka) {
                        throw ka;
                    }
                }
                function ia(ca, ja) {
                    try {
                        if ("Identifier" !== ja.callee.type)
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "ONLYNODESSUPPORTED"));
                        if (null !== ca.localScope && void 0 !== ca.localScope[ja.callee.name.toLowerCase()]) {
                            var X = ca.localScope[ja.callee.name.toLowerCase()];
                            if (X.value instanceof d.NativeFunction)
                                return X.value.fn(ca, ja);
                            if (X.value instanceof k)
                                return L(ca, ja, X.value.definition);
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "NOTAFUNCTION"));
                        }
                        if (void 0 !== ca.globalScope[ja.callee.name.toLowerCase()]) {
                            X = ca.globalScope[ja.callee.name.toLowerCase()];
                            if (X.value instanceof d.NativeFunction)
                                return X.value.fn(ca, ja);
                            if (X.value instanceof k)
                                return L(ca, ja, X.value.definition);
                            throw Error(a.nodeErrorMessage(ja, "RUNTIME", "NOTAFUNCTION"));
                        }
                        throw Error(a.nodeErrorMessage(ja, "RUNTIME", "NOTFOUND"));
                    } catch (oa) {
                        throw oa;
                    }
                }
                function qa(ca) {
                    return null == ca ? "" : d.isArray(ca) || d.isImmutableArray(ca) ? "Array" : d.isDate(ca) ? "Date" : d.isString(ca) ? "String" : d.isBoolean(ca) ? "Boolean" : d.isNumber(ca) ? "Number" : ca instanceof w ? "Attachment" : ca instanceof b ? "Portal" : ca instanceof m ? "Dictionary" : ca instanceof l ? "Feature" : ca instanceof p ? "Point" : ca instanceof r ? "Polygon" : ca instanceof B ? "Polyline" : ca instanceof u ? "Multipoint" : ca instanceof v ? "Extent" : d.isFunctionParameter(ca) ? "Function" : d.isFeatureSet(ca) ? "FeatureSet" : d.isFeatureSetCollection(ca) ? "FeatureSetCollection" : ca === d.voidOperation ? "" : "number" === typeof ca && isNaN(ca) ? "Number" : "Unrecognised Type"
                }
                function wa(ca, ja, X, oa) {
                    try {
                        var ka = E(ca, ja.arguments[X]);
                        if (d.equalityTest(ka, oa))
                            return E(ca, ja.arguments[X + 1]);
                        var Ea = ja.arguments.length - X;
                        return 1 === Ea ? E(ca, ja.arguments[X]) : 2 === Ea ? null : 3 === Ea ? E(ca, ja.arguments[X + 2]) : wa(ca, ja, X + 2, oa)
                    } catch (T) {
                        throw T;
                    }
                }
                function K(ca, ja, X, oa) {
                    try {
                        if (!0 === oa)
                            return E(ca, ja.arguments[X + 1]);
                        if (3 === ja.arguments.length - X)
                            return E(ca, ja.arguments[X + 2]);
                        var ka = E(ca, ja.arguments[X + 2]);
                        if (!1 === d.isBoolean(ka))
                            throw Error("WHEN needs boolean test conditions");
                        return K(ca, ja, X + 2, ka)
                    } catch (Ea) {
                        throw Ea;
                    }
                }
                function Z(ca, ja) {
                    var X = ca.length
                      , oa = Math.floor(X / 2);
                    if (0 === X)
                        return [];
                    if (1 === X)
                        return [ca[0]];
                    var ka = Z(ca.slice(0, oa), ja);
                    ca = Z(ca.slice(oa, X), ja);
                    for (X = []; 0 < ka.length || 0 < ca.length; )
                        0 < ka.length && 0 < ca.length ? (oa = ja(ka[0], ca[0]),
                        isNaN(oa) && (oa = 0),
                        0 >= oa ? (X.push(ka[0]),
                        ka = ka.slice(1)) : (X.push(ca[0]),
                        ca = ca.slice(1))) : 0 < ka.length ? (X.push(ka[0]),
                        ka = ka.slice(1)) : 0 < ca.length && (X.push(ca[0]),
                        ca = ca.slice(1));
                    return X
                }
                function pa(ca, ja, X) {
                    try {
                        var oa = ca.body;
                        if (X.length !== ca.params.length)
                            throw Error("Invalid Parameter calls to function.");
                        for (var ka = 0; ka < X.length; ka++)
                            ja.localScope[ca.params[ka].name.toLowerCase()] = {
                                value: X[ka],
                                valueset: !0,
                                node: null
                            };
                        var Ea = E(ja, oa);
                        if (Ea instanceof d.ReturnResult)
                            return Ea.value;
                        if (Ea === d.breakResult)
                            throw Error("Cannot Break from a Function");
                        if (Ea === d.continueResult)
                            throw Error("Cannot Continue from a Function");
                        return Ea instanceof d.ImplicitResult ? Ea.value : Ea
                    } catch (T) {
                        throw T;
                    }
                }
                function L(ca, ja, X) {
                    return A(ca, ja, function(oa, ka, Ea) {
                        oa = {
                            spatialReference: ca.spatialReference,
                            globalScope: ca.globalScope,
                            depthCounter: ca.depthCounter + 1,
                            console: ca.console,
                            lrucache: ca.lrucache,
                            interceptor: ca.interceptor,
                            localScope: {}
                        };
                        if (64 < oa.depthCounter)
                            throw Error("Exceeded maximum function depth");
                        return pa(X, oa, Ea)
                    })
                }
                function R(ca) {
                    return function() {
                        var ja = {
                            spatialReference: ca.context.spatialReference,
                            console: ca.context.console,
                            lrucache: ca.context.lrucache,
                            interceptor: ca.context.interceptor,
                            localScope: {},
                            depthCounter: ca.context.depthCounter + 1,
                            globalScope: ca.context.globalScope
                        };
                        if (64 < ja.depthCounter)
                            throw Error("Exceeded maximum function depth");
                        return pa(ca.definition, ja, arguments)
                    }
                }
                function ha(ca) {
                    console.log(ca)
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.findFunctionCalls = y.referencesFunction = y.referencesMember = y.validateScript = y.extractFieldLiterals = y.executeScript = y.extend = y.functionHelper = void 0;
                var na = 0
                  , ta = {};
                c.registerFunctions(ta, A);
                e.registerFunctions(ta, A);
                x.registerFunctions(ta, A);
                g.registerFunctions(ta, A);
                n.registerFunctions(ta, A);
                q.registerFunctions(ta, A);
                t.registerFunctions(ta, A);
                ta["typeof"] = function(ca, ja) {
                    return A(ca, ja, function(X, oa, ka) {
                        d.pcCheck(ka, 1, 1);
                        X = qa(ka[0]);
                        if ("Unrecognised Type" === X)
                            throw Error("Unrecognised Type");
                        return X
                    })
                }
                ;
                ta.iif = function(ca, ja) {
                    try {
                        d.pcCheck(null === ja.arguments ? [] : ja.arguments, 3, 3);
                        var X = E(ca, ja.arguments[0]);
                        if (!1 === d.isBoolean(X))
                            throw Error("IF Function must have a boolean test condition");
                        var oa = E(ca, ja.arguments[1])
                          , ka = E(ca, ja.arguments[2]);
                        return !0 === X ? oa : ka
                    } catch (Ea) {
                        throw Ea;
                    }
                }
                ;
                ta.decode = function(ca, ja) {
                    try {
                        if (2 > ja.arguments.length)
                            throw Error("Missing Parameters");
                        if (2 === ja.arguments.length)
                            return E(ca, ja.arguments[1]);
                        if (0 === (ja.arguments.length - 1) % 2)
                            throw Error("Must have a default value result.");
                        var X = E(ca, ja.arguments[0]);
                        return wa(ca, ja, 1, X)
                    } catch (oa) {
                        throw oa;
                    }
                }
                ;
                ta.when = function(ca, ja) {
                    try {
                        if (3 > ja.arguments.length)
                            throw Error("Missing Parameters");
                        if (0 === ja.arguments.length % 2)
                            throw Error("Must have a default value result.");
                        var X = E(ca, ja.arguments[0]);
                        if (!1 === d.isBoolean(X))
                            throw Error("WHEN needs boolean test conditions");
                        return K(ca, ja, 0, X)
                    } catch (oa) {
                        throw oa;
                    }
                }
                ;
                ta.top = function(ca, ja) {
                    return A(ca, ja, function(X, oa, ka) {
                        d.pcCheck(ka, 2, 2);
                        if (d.isArray(ka[0]))
                            return d.toNumber(ka[1]) >= ka[0].length ? ka[0].slice(0) : ka[0].slice(0, d.toNumber(ka[1]));
                        if (d.isImmutableArray(ka[0]))
                            return d.toNumber(ka[1]) >= ka[0].length() ? ka[0].slice(0) : ka[0].slice(0, d.toNumber(ka[1]));
                        throw Error("Top cannot accept this parameter type");
                    })
                }
                ;
                ta.first = function(ca, ja) {
                    return A(ca, ja, function(X, oa, ka) {
                        d.pcCheck(ka, 1, 1);
                        return d.isArray(ka[0]) ? 0 === ka[0].length ? null : ka[0][0] : d.isImmutableArray(ka[0]) ? 0 === ka[0].length() ? null : ka[0].get(0) : null
                    })
                }
                ;
                ta.sort = function(ca, ja) {
                    return A(ca, ja, function(X, oa, ka) {
                        d.pcCheck(ka, 1, 2);
                        X = ka[0];
                        d.isImmutableArray(X) && (X = X.toArray());
                        if (!1 === d.isArray(X))
                            throw Error("Illegal Argument");
                        if (1 < ka.length) {
                            if (!1 === d.isFunctionParameter(ka[1]))
                                throw Error("Illegal Argument");
                            var Ea = R(ka[1]);
                            return X = Z(X, function(ma, sa) {
                                return Ea(ma, sa)
                            })
                        }
                        if (0 === X.length)
                            return [];
                        ka = {};
                        for (oa = 0; oa < X.length; oa++) {
                            var T = qa(X[oa]);
                            "" !== T && (ka[T] = !0)
                        }
                        if (!0 === ka.Array || !0 === ka.Dictionary || !0 === ka.Feature || !0 === ka.Point || !0 === ka.Polygon || !0 === ka.Polyline || !0 === ka.Multipoint || !0 === ka.Extent || !0 === ka.Function)
                            return X.slice(0);
                        oa = 0;
                        T = "";
                        for (var U in ka)
                            oa++,
                            T = U;
                        return X = 1 < oa || "String" === T ? Z(X, function(ma, sa) {
                            if (null === ma || void 0 === ma || ma === d.voidOperation)
                                return null === sa || void 0 === sa || sa === d.voidOperation ? 0 : 1;
                            if (null === sa || void 0 === sa || sa === d.voidOperation)
                                return -1;
                            ma = d.toString(ma);
                            sa = d.toString(sa);
                            return ma < sa ? -1 : ma === sa ? 0 : 1
                        }) : "Number" === T ? Z(X, function(ma, sa) {
                            return ma - sa
                        }) : "Boolean" === T ? Z(X, function(ma, sa) {
                            return ma === sa ? 0 : sa ? -1 : 1
                        }) : "Date" === T ? Z(X, function(ma, sa) {
                            return sa - ma
                        }) : X.slice(0)
                    })
                }
                ;
                for (var xa in ta)
                    ta[xa] = {
                        value: new d.NativeFunction(ta[xa]),
                        valueset: !0,
                        node: null
                    };
                var Aa = function() {};
                Aa.prototype = ta;
                Aa.prototype.infinity = {
                    value: Number.POSITIVE_INFINITY,
                    valueset: !0,
                    node: null
                };
                Aa.prototype.pi = {
                    value: Math.PI,
                    valueset: !0,
                    node: null
                };
                y.functionHelper = {
                    fixSpatialReference: d.fixSpatialReference,
                    parseArguments: G,
                    standardFunction: A
                };
                y.extend = function(ca) {
                    for (var ja = {
                        mode: "sync",
                        compiled: !1,
                        functions: {},
                        signatures: [],
                        standardFunction: A,
                        evaluateIdentifier: Y,
                        arcadeCustomFunctionHandler: R
                    }, X = 0; X < ca.length; X++)
                        ca[X].registerFunctions(ja);
                    for (var oa in ja.functions)
                        ta[oa] = {
                            value: new d.NativeFunction(ja.functions[oa]),
                            valueset: !0,
                            node: null
                        },
                        Aa.prototype[oa] = ta[oa];
                    for (X = 0; X < ja.signatures.length; X++)
                        a.addFunctionDeclaration(ja.signatures[X], "async")
                }
                ;
                y.executeScript = function(ca, ja) {
                    var X = ja.spatialReference;
                    if (null === X || void 0 === X)
                        X = new D({
                            wkid: 102100
                        });
                    var oa = ja.vars
                      , ka = ja.customfunctions
                      , Ea = new Aa;
                    oa || (oa = {});
                    ka || (ka = {});
                    var T = new m({
                        newline: "\n",
                        tab: "\t",
                        singlequote: "'",
                        doublequote: '"',
                        forwardslash: "/",
                        backwardslash: "\\"
                    });
                    T.immutable = !1;
                    Ea.textformatting = {
                        value: T,
                        valueset: !0,
                        node: null
                    };
                    for (var U in ka)
                        Ea[U] = {
                            value: new d.NativeFunction(ka[U]),
                            native: !0,
                            valueset: !0,
                            node: null
                        };
                    for (U in oa)
                        Ea[U] = oa[U] && "esri.Graphic" === oa[U].declaredClass ? {
                            value: l.createFromGraphic(oa[U]),
                            valueset: !0,
                            node: null
                        } : {
                            value: oa[U],
                            valueset: !0,
                            node: null
                        };
                    ca = E({
                        spatialReference: X,
                        globalScope: Ea,
                        localScope: null,
                        console: ja.console ? ja.console : ha,
                        lrucache: ja.lrucache,
                        interceptor: ja.interceptor,
                        depthCounter: 1
                    }, ca.body[0].body);
                    ca instanceof d.ReturnResult && (ca = ca.value);
                    ca instanceof d.ImplicitResult && (ca = ca.value);
                    ca === d.voidOperation && (ca = null);
                    if (ca === d.breakResult)
                        throw Error("Cannot return BREAK");
                    if (ca === d.continueResult)
                        throw Error("Cannot return CONTINUE");
                    if (ca instanceof k)
                        throw Error("Cannot return FUNCTION");
                    if (ca instanceof d.NativeFunction)
                        throw Error("Cannot return FUNCTION");
                    return ca
                }
                ;
                y.extractFieldLiterals = function(ca, ja) {
                    void 0 === ja && (ja = !1);
                    return a.findFieldLiterals(ca)
                }
                ;
                y.validateScript = function(ca, ja) {
                    return a.validateScript(ca, ja, "simple")
                }
                ;
                y.referencesMember = function(ca, ja) {
                    return a.referencesMember(ca, ja)
                }
                ;
                y.referencesFunction = function(ca, ja) {
                    return a.referencesFunction(ca, ja)
                }
                ;
                y.findFunctionCalls = function(ca) {
                    return a.findFunctionCalls(ca)
                }
            })
        },
        "esri/arcade/parser": function() {
            define(["require", "exports", "./treeAnalysis", "./lib/esprima"], function(C, y, b, w) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.referencesFunction = y.referencesMember = y.validateScript = y.extractFieldLiterals = y.scriptCheck = y.parseScript = void 0;
                y.parseScript = function(m, l) {
                    void 0 === l && (l = []);
                    m = w.parse("function _() { " + m + "\n}");
                    if (null === m.body || void 0 === m.body)
                        throw Error("No formula provided.");
                    if (0 === m.body.length)
                        throw Error("No formula provided.");
                    if (0 === m.body.length)
                        throw Error("No formula provided.");
                    if ("BlockStatement" !== m.body[0].body.type)
                        throw Error("Invalid formula content.");
                    var k = b.validateLanguage(m);
                    if ("" !== k)
                        throw Error(k);
                    b.findScriptDependencies(m, l);
                    return m
                }
                ;
                y.scriptCheck = function(m, l, k, h, f) {
                    var d = [];
                    m = "function _() { \n" + m + "\n}";
                    try {
                        var a = w.parse(m, {
                            tolerant: !0,
                            loc: !0,
                            range: !0
                        })
                          , c = a.errors;
                        if (0 < c.length)
                            for (var e = 0; e < c.length; e++)
                                d.push({
                                    line: c[e].lineNumber - 2,
                                    character: c[e].column,
                                    reason: c[e].description
                                });
                        var n = b.checkScript(a, l, k, h, f);
                        for (l = 0; l < n.length; l++)
                            n[l].line -= 2,
                            n[l].range && (n[l].range = [n[l][0] - 15, n[l][1] - 15]),
                            n[l].loc && (n[l].loc.start.line -= 2,
                            n[l].loc.end.line -= 2),
                            d.push(n[l])
                    } catch (g) {
                        try {
                            if ("Unexpected token }" === g.description) {
                                var t = m.split("\n").length;
                                g.lineNumber === t ? (g.index = m.length - 1,
                                d.push({
                                    line: g.lineNumber - 4,
                                    character: g.column,
                                    reason: "Unexpected end of script"
                                })) : (g.index = m.length - 1,
                                d.push({
                                    line: g.lineNumber - 2,
                                    character: g.column,
                                    reason: "Unexpected end of script"
                                }))
                            } else
                                d.push({
                                    line: g.lineNumber - 2,
                                    character: g.column,
                                    reason: g.description
                                })
                        } catch (q) {}
                    }
                    return d
                }
                ;
                y.extractFieldLiterals = function(m, l) {
                    void 0 === l && (l = !1);
                    return b.findFieldLiterals(m)
                }
                ;
                y.validateScript = function(m, l, k) {
                    return b.validateScript(m, l, k)
                }
                ;
                y.referencesMember = function(m, l) {
                    return b.referencesMember(m, l)
                }
                ;
                y.referencesFunction = function(m, l) {
                    return b.referencesFunction(m, l)
                }
            })
        },
        "esri/arcade/lib/esprima": function() {
            define("require exports ./comment-handler ./parser ./tokenizer ./syntax".split(" "), function(C, y, b, w, m, l) {
                function k(h, f, d) {
                    var a = null
                      , c = function(g, q) {
                        d && d(g, q);
                        a && a.visit(g, q)
                    }
                      , e = "function" === typeof d ? c : null
                      , n = !1;
                    if (f) {
                        n = "boolean" === typeof f.comment && f.comment;
                        var t = "boolean" === typeof f.attachComment && f.attachComment;
                        if (n || t)
                            a = new b.CommentHandler,
                            a.attach = t,
                            f.comment = !0,
                            e = c
                    }
                    h = new w.Parser(h,f,e);
                    f = h.parseScript();
                    n && a && (f.comments = a.comments);
                    h.config.tokens && (f.tokens = h.tokens);
                    h.config.tolerant && (f.errors = h.errorHandler.errors);
                    return f
                }
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.version = y.tokenize = y.parseScript = y.parse = void 0;
                y.parse = k;
                y.parseScript = function(h, f, d) {
                    f = f || {};
                    f.sourceType = "script";
                    return k(h, f, d)
                }
                ;
                y.tokenize = function(h, f, d) {
                    h = new m.Tokenizer(h,f);
                    f = [];
                    try {
                        for (; ; ) {
                            var a = h.getNextToken();
                            if (!a)
                                break;
                            d && (a = d(a));
                            f.push(a)
                        }
                    } catch (c) {
                        h.errorHandler.tolerate(c)
                    }
                    h.errorHandler.tolerant && (f.errors = h.errors());
                    return f
                }
                ;
                Object.defineProperty(y, "Syntax", {
                    enumerable: !0,
                    get: function() {
                        return l.Syntax
                    }
                });
                y.version = "4.0.0-dev"
            })
        },
        "esri/arcade/lib/comment-handler": function() {
            define(["require", "exports", "./syntax"], function(C, y, b) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.CommentHandler = void 0;
                C = function() {
                    function w() {
                        this.attach = !1;
                        this.comments = [];
                        this.stack = [];
                        this.leading = [];
                        this.trailing = []
                    }
                    w.prototype.insertInnerComments = function(m, l) {
                        if (m.type === b.Syntax.BlockStatement && 0 === m.body.length) {
                            for (var k = [], h = this.leading.length - 1; 0 <= h; --h) {
                                var f = this.leading[h];
                                l.end.offset >= f.start && (k.unshift(f.comment),
                                this.leading.splice(h, 1),
                                this.trailing.splice(h, 1))
                            }
                            k.length && (m.innerComments = k)
                        }
                    }
                    ;
                    w.prototype.findTrailingComments = function(m) {
                        var l = [];
                        if (0 < this.trailing.length) {
                            for (var k = this.trailing.length - 1; 0 <= k; --k) {
                                var h = this.trailing[k];
                                h.start >= m.end.offset && l.unshift(h.comment)
                            }
                            this.trailing.length = 0;
                            return l
                        }
                        (k = this.stack[this.stack.length - 1]) && k.node.trailingComments && (h = k.node.trailingComments[0]) && h.range[0] >= m.end.offset && (l = k.node.trailingComments,
                        delete k.node.trailingComments);
                        return l
                    }
                    ;
                    w.prototype.findLeadingComments = function(m) {
                        for (var l = [], k; 0 < this.stack.length; ) {
                            var h = this.stack[this.stack.length - 1];
                            if (h && h.start >= m.start.offset)
                                k = h.node,
                                this.stack.pop();
                            else
                                break
                        }
                        if (k) {
                            for (var f = (k.leadingComments ? k.leadingComments.length : 0) - 1; 0 <= f; --f)
                                h = k.leadingComments[f],
                                h.range[1] <= m.start.offset && (l.unshift(h),
                                k.leadingComments.splice(f, 1));
                            k.leadingComments && 0 === k.leadingComments.length && delete k.leadingComments;
                            return l
                        }
                        for (f = this.leading.length - 1; 0 <= f; --f)
                            h = this.leading[f],
                            h.start <= m.start.offset && (l.unshift(h.comment),
                            this.leading.splice(f, 1));
                        return l
                    }
                    ;
                    w.prototype.visitNode = function(m, l) {
                        if (!(m.type === b.Syntax.Program && 0 < m.body.length)) {
                            this.insertInnerComments(m, l);
                            var k = this.findTrailingComments(l)
                              , h = this.findLeadingComments(l);
                            0 < h.length && (m.leadingComments = h);
                            0 < k.length && (m.trailingComments = k);
                            this.stack.push({
                                node: m,
                                start: l.start.offset
                            })
                        }
                    }
                    ;
                    w.prototype.visitComment = function(m, l) {
                        var k = "L" === m.type[0] ? "Line" : "Block"
                          , h = {
                            type: k,
                            value: m.value
                        };
                        m.range && (h.range = m.range);
                        m.loc && (h.loc = m.loc);
                        this.comments.push(h);
                        this.attach && (l = {
                            comment: {
                                type: k,
                                value: m.value,
                                range: [l.start.offset, l.end.offset]
                            },
                            start: l.start.offset
                        },
                        m.loc && (l.comment.loc = m.loc),
                        m.type = k,
                        this.leading.push(l),
                        this.trailing.push(l))
                    }
                    ;
                    w.prototype.visit = function(m, l) {
                        "LineComment" === m.type ? this.visitComment(m, l) : "BlockComment" === m.type ? this.visitComment(m, l) : this.attach && this.visitNode(m, l)
                    }
                    ;
                    return w
                }();
                y.CommentHandler = C
            })
        },
        "esri/arcade/lib/syntax": function() {
            define(["require", "exports"], function(C, y) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.Syntax = void 0;
                y.Syntax = {
                    AssignmentExpression: "AssignmentExpression",
                    AssignmentPattern: "AssignmentPattern",
                    ArrayExpression: "ArrayExpression",
                    ArrayPattern: "ArrayPattern",
                    BlockStatement: "BlockStatement",
                    BinaryExpression: "BinaryExpression",
                    BreakStatement: "BreakStatement",
                    CallExpression: "CallExpression",
                    ConditionalExpression: "ConditionalExpression",
                    ContinueStatement: "ContinueStatement",
                    EmptyStatement: "EmptyStatement",
                    ExpressionStatement: "ExpressionStatement",
                    ForStatement: "ForStatement",
                    ForInStatement: "ForInStatement",
                    FunctionDeclaration: "FunctionDeclaration",
                    FunctionExpression: "FunctionExpression",
                    Identifier: "Identifier",
                    IfStatement: "IfStatement",
                    Literal: "Literal",
                    LogicalExpression: "LogicalExpression",
                    MemberExpression: "MemberExpression",
                    MethodDefinition: "MethodDefinition",
                    ObjectExpression: "ObjectExpression",
                    ObjectPattern: "ObjectPattern",
                    Program: "Program",
                    Property: "Property",
                    ReturnStatement: "ReturnStatement",
                    SequenceExpression: "SequenceExpression",
                    TemplateElement: "TemplateElement",
                    TemplateLiteral: "TemplateLiteral",
                    UnaryExpression: "UnaryExpression",
                    UpdateExpression: "UpdateExpression",
                    VariableDeclaration: "VariableDeclaration",
                    VariableDeclarator: "VariableDeclarator",
                    WhileStatement: "WhileStatement"
                }
            })
        },
        "esri/arcade/lib/parser": function() {
            define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "), function(C, y, b, w, m, l, k, h, f) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.Parser = void 0;
                C = function() {
                    function d(a, c, e) {
                        void 0 === c && (c = {});
                        this.config = {
                            range: "boolean" === typeof c.range && c.range,
                            loc: "boolean" === typeof c.loc && c.loc,
                            source: null,
                            tokens: "boolean" === typeof c.tokens && c.tokens,
                            comment: "boolean" === typeof c.comment && c.comment,
                            tolerant: "boolean" === typeof c.tolerant && c.tolerant
                        };
                        this.config.loc && c.source && null !== c.source && (this.config.source = String(c.source));
                        this.delegate = e;
                        this.errorHandler = new w.ErrorHandler;
                        this.errorHandler.tolerant = this.config.tolerant;
                        this.scanner = new k.Scanner(a,this.errorHandler);
                        this.scanner.trackComment = this.config.comment;
                        this.operatorPrecedence = {
                            ")": 0,
                            ";": 0,
                            ",": 0,
                            "\x3d": 0,
                            "]": 0,
                            "||": 1,
                            "\x26\x26": 2,
                            "|": 3,
                            "^": 4,
                            "\x26": 5,
                            "\x3d\x3d": 6,
                            "!\x3d": 6,
                            "\x3d\x3d\x3d": 6,
                            "!\x3d\x3d": 6,
                            "\x3c": 7,
                            "\x3e": 7,
                            "\x3c\x3d": 7,
                            "\x3e\x3d": 7,
                            "\x3c\x3c": 8,
                            "\x3e\x3e": 8,
                            "\x3e\x3e\x3e": 8,
                            "+": 9,
                            "-": 9,
                            "*": 11,
                            "/": 11,
                            "%": 11
                        };
                        this.lookahead = {
                            type: 2,
                            value: "",
                            lineNumber: this.scanner.lineNumber,
                            lineStart: 0,
                            start: 0,
                            end: 0
                        };
                        this.hasLineTerminator = !1;
                        this.context = {
                            isModule: !1,
                            allowIn: !0,
                            allowStrictDirective: !0,
                            firstCoverInitializedNameError: null,
                            isAssignmentTarget: !1,
                            isBindingElement: !1,
                            inFunctionBody: !1,
                            inIteration: !1,
                            inSwitch: !1,
                            labelSet: {},
                            strict: !1
                        };
                        this.tokens = [];
                        this.startMarker = {
                            index: 0,
                            line: this.scanner.lineNumber,
                            column: 0
                        };
                        this.lastMarker = {
                            index: 0,
                            line: this.scanner.lineNumber,
                            column: 0
                        };
                        this.nextToken();
                        this.lastMarker = {
                            index: this.scanner.index,
                            line: this.scanner.lineNumber,
                            column: this.scanner.index - this.scanner.lineStart
                        }
                    }
                    d.prototype.throwError = function(a) {
                        for (var c = [], e = 1; e < arguments.length; e++)
                            c[e - 1] = arguments[e];
                        var n = c.slice();
                        c = a.replace(/%(\d)/g, function(t, g) {
                            b.assert(g < n.length, "Message reference must be in range");
                            return n[g]
                        });
                        throw this.errorHandler.createError(this.lastMarker.index, this.lastMarker.line, this.lastMarker.column + 1, c);
                    }
                    ;
                    d.prototype.tolerateError = function(a) {
                        for (var c = [], e = 1; e < arguments.length; e++)
                            c[e - 1] = arguments[e];
                        var n = c.slice();
                        c = a.replace(/%(\d)/g, function(t, g) {
                            b.assert(g < n.length, "Message reference must be in range");
                            return n[g]
                        });
                        this.errorHandler.tolerateError(this.lastMarker.index, this.scanner.lineNumber, this.lastMarker.column + 1, c)
                    }
                    ;
                    d.prototype.unexpectedTokenError = function(a, c) {
                        var e = c || m.Messages.UnexpectedToken;
                        a ? (c || (e = 2 === a.type ? m.Messages.UnexpectedEOS : 3 === a.type ? m.Messages.UnexpectedIdentifier : 6 === a.type ? m.Messages.UnexpectedNumber : 8 === a.type ? m.Messages.UnexpectedString : 10 === a.type ? m.Messages.UnexpectedTemplate : m.Messages.UnexpectedToken,
                        4 === a.type && (this.scanner.isFutureReservedWord(a.value) ? e = m.Messages.UnexpectedReserved : this.context.strict && this.scanner.isStrictModeReservedWord(a.value) && (e = m.Messages.StrictReservedWord))),
                        c = a.value) : c = "ILLEGAL";
                        e = e.replace("%0", c);
                        if (a && "number" === typeof a.lineNumber) {
                            c = a.start;
                            var n = a.lineNumber;
                            a = a.start - (this.lastMarker.index - this.lastMarker.column) + 1;
                            return this.errorHandler.createError(c, n, a, e)
                        }
                        c = this.lastMarker.index;
                        n = this.lastMarker.line;
                        a = this.lastMarker.column + 1;
                        return this.errorHandler.createError(c, n, a, e)
                    }
                    ;
                    d.prototype.throwUnexpectedToken = function(a, c) {
                        throw this.unexpectedTokenError(a, c);
                    }
                    ;
                    d.prototype.tolerateUnexpectedToken = function(a, c) {
                        this.errorHandler.tolerate(this.unexpectedTokenError(a, c))
                    }
                    ;
                    d.prototype.collectComments = function() {
                        if (this.config.comment) {
                            var a = this.scanner.scanComments();
                            if (0 < a.length && this.delegate)
                                for (var c = 0; c < a.length; ++c) {
                                    var e = a[c]
                                      , n = {
                                        type: e.multiLine ? "BlockComment" : "LineComment",
                                        value: this.scanner.source.slice(e.slice[0], e.slice[1])
                                    };
                                    this.config.range && (n.range = e.range);
                                    this.config.loc && (n.loc = e.loc);
                                    this.delegate(n, {
                                        start: {
                                            line: e.loc.start.line,
                                            column: e.loc.start.column,
                                            offset: e.range[0]
                                        },
                                        end: {
                                            line: e.loc.end.line,
                                            column: e.loc.end.column,
                                            offset: e.range[1]
                                        }
                                    })
                                }
                        } else
                            this.scanner.scanComments()
                    }
                    ;
                    d.prototype.getTokenRaw = function(a) {
                        return this.scanner.source.slice(a.start, a.end)
                    }
                    ;
                    d.prototype.convertToken = function(a) {
                        var c = {
                            type: f.TokenName[a.type],
                            value: this.getTokenRaw(a)
                        };
                        this.config.range && (c.range = [a.start, a.end]);
                        this.config.loc && (c.loc = {
                            start: {
                                line: this.startMarker.line,
                                column: this.startMarker.column
                            },
                            end: {
                                line: this.scanner.lineNumber,
                                column: this.scanner.index - this.scanner.lineStart
                            }
                        });
                        9 === a.type && (c.regex = {
                            pattern: a.pattern,
                            flags: a.flags
                        });
                        return c
                    }
                    ;
                    d.prototype.nextToken = function() {
                        var a = this.lookahead;
                        this.lastMarker.index = this.scanner.index;
                        this.lastMarker.line = this.scanner.lineNumber;
                        this.lastMarker.column = this.scanner.index - this.scanner.lineStart;
                        this.collectComments();
                        this.scanner.index !== this.startMarker.index && (this.startMarker.index = this.scanner.index,
                        this.startMarker.line = this.scanner.lineNumber,
                        this.startMarker.column = this.scanner.index - this.scanner.lineStart);
                        var c = this.scanner.lex();
                        this.hasLineTerminator = a.lineNumber !== c.lineNumber;
                        c && this.context.strict && 3 === c.type && this.scanner.isStrictModeReservedWord(c.value) && (c.type = 4);
                        this.lookahead = c;
                        this.config.tokens && 2 !== c.type && this.tokens.push(this.convertToken(c));
                        return a
                    }
                    ;
                    d.prototype.nextRegexToken = function() {
                        this.collectComments();
                        var a = this.scanner.scanRegExp();
                        this.config.tokens && (this.tokens.pop(),
                        this.tokens.push(this.convertToken(a)));
                        this.lookahead = a;
                        this.nextToken();
                        return a
                    }
                    ;
                    d.prototype.createNode = function() {
                        return {
                            index: this.startMarker.index,
                            line: this.startMarker.line,
                            column: this.startMarker.column
                        }
                    }
                    ;
                    d.prototype.startNode = function(a, c) {
                        void 0 === c && (c = 0);
                        var e = a.start - a.lineStart
                          , n = a.lineNumber;
                        0 > e && (e += c,
                        n--);
                        return {
                            index: a.start,
                            line: n,
                            column: e
                        }
                    }
                    ;
                    d.prototype.finalize = function(a, c) {
                        this.config.range && (c.range = [a.index, this.lastMarker.index]);
                        this.config.loc && (c.loc = {
                            start: {
                                line: a.line,
                                column: a.column
                            },
                            end: {
                                line: this.lastMarker.line,
                                column: this.lastMarker.column
                            }
                        },
                        this.config.source && (c.loc.source = this.config.source));
                        this.delegate && this.delegate(c, {
                            start: {
                                line: a.line,
                                column: a.column,
                                offset: a.index
                            },
                            end: {
                                line: this.lastMarker.line,
                                column: this.lastMarker.column,
                                offset: this.lastMarker.index
                            }
                        });
                        return c
                    }
                    ;
                    d.prototype.expect = function(a) {
                        var c = this.nextToken();
                        7 === c.type && c.value === a || this.throwUnexpectedToken(c)
                    }
                    ;
                    d.prototype.expectCommaSeparator = function() {
                        if (this.config.tolerant) {
                            var a = this.lookahead;
                            7 === a.type && "," === a.value ? this.nextToken() : 7 === a.type && ";" === a.value ? (this.nextToken(),
                            this.tolerateUnexpectedToken(a)) : this.tolerateUnexpectedToken(a, m.Messages.UnexpectedToken)
                        } else
                            this.expect(",")
                    }
                    ;
                    d.prototype.expectKeyword = function(a) {
                        var c = this.nextToken();
                        4 === c.type && c.value.toLowerCase() === a.toLowerCase() || this.throwUnexpectedToken(c)
                    }
                    ;
                    d.prototype.match = function(a) {
                        return 7 === this.lookahead.type && this.lookahead.value === a
                    }
                    ;
                    d.prototype.matchKeyword = function(a) {
                        return 4 === this.lookahead.type && this.lookahead.value.toLowerCase() === a.toLowerCase()
                    }
                    ;
                    d.prototype.matchContextualKeyword = function(a) {
                        return 3 === this.lookahead.type && this.lookahead.value === a
                    }
                    ;
                    d.prototype.matchAssign = function() {
                        if (7 !== this.lookahead.type)
                            return !1;
                        var a = this.lookahead.value;
                        return "\x3d" === a || "*\x3d" === a || "**\x3d" === a || "/\x3d" === a || "%\x3d" === a || "+\x3d" === a || "-\x3d" === a || "\x3c\x3c\x3d" === a || "\x3e\x3e\x3d" === a || "\x3e\x3e\x3e\x3d" === a || "\x26\x3d" === a || "^\x3d" === a || "|\x3d" === a
                    }
                    ;
                    d.prototype.isolateCoverGrammar = function(a) {
                        var c = this.context.isBindingElement
                          , e = this.context.isAssignmentTarget
                          , n = this.context.firstCoverInitializedNameError;
                        this.context.isBindingElement = !0;
                        this.context.isAssignmentTarget = !0;
                        this.context.firstCoverInitializedNameError = null;
                        a = a.call(this);
                        null !== this.context.firstCoverInitializedNameError && this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);
                        this.context.isBindingElement = c;
                        this.context.isAssignmentTarget = e;
                        this.context.firstCoverInitializedNameError = n;
                        return a
                    }
                    ;
                    d.prototype.inheritCoverGrammar = function(a) {
                        var c = this.context.isBindingElement
                          , e = this.context.isAssignmentTarget
                          , n = this.context.firstCoverInitializedNameError;
                        this.context.isBindingElement = !0;
                        this.context.isAssignmentTarget = !0;
                        this.context.firstCoverInitializedNameError = null;
                        a = a.call(this);
                        this.context.isBindingElement = this.context.isBindingElement && c;
                        this.context.isAssignmentTarget = this.context.isAssignmentTarget && e;
                        this.context.firstCoverInitializedNameError = n || this.context.firstCoverInitializedNameError;
                        return a
                    }
                    ;
                    d.prototype.consumeSemicolon = function() {
                        this.match(";") ? this.nextToken() : this.hasLineTerminator || (2 === this.lookahead.type || this.match("}") || this.throwUnexpectedToken(this.lookahead),
                        this.lastMarker.index = this.startMarker.index,
                        this.lastMarker.line = this.startMarker.line,
                        this.lastMarker.column = this.startMarker.column)
                    }
                    ;
                    d.prototype.parsePrimaryExpression = function() {
                        var a = this.createNode();
                        switch (this.lookahead.type) {
                        case 3:
                            a = this.finalize(a, new l.Identifier(this.nextToken().value));
                            break;
                        case 6:
                        case 8:
                            this.context.strict && this.lookahead.octal && this.tolerateUnexpectedToken(this.lookahead, m.Messages.StrictOctalLiteral);
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1;
                            var c = this.nextToken();
                            var e = this.getTokenRaw(c);
                            a = this.finalize(a, new l.Literal(c.value,e));
                            break;
                        case 1:
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1;
                            c = this.nextToken();
                            e = this.getTokenRaw(c);
                            a = this.finalize(a, new l.Literal("true" === c.value.toLowerCase(),e));
                            break;
                        case 5:
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1;
                            c = this.nextToken();
                            e = this.getTokenRaw(c);
                            a = this.finalize(a, new l.Literal(null,e));
                            break;
                        case 10:
                            a = this.parseTemplateLiteral();
                            break;
                        case 7:
                            switch (this.lookahead.value) {
                            case "(":
                                this.context.isBindingElement = !1;
                                a = this.inheritCoverGrammar(this.parseGroupExpression);
                                break;
                            case "[":
                                a = this.inheritCoverGrammar(this.parseArrayInitializer);
                                break;
                            case "{":
                                a = this.inheritCoverGrammar(this.parseObjectInitializer);
                                break;
                            default:
                                a = this.throwUnexpectedToken(this.nextToken())
                            }
                            break;
                        case 4:
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1;
                            a = this.matchKeyword("function") ? this.parseFunctionExpression() : this.throwUnexpectedToken(this.nextToken());
                            break;
                        default:
                            a = this.throwUnexpectedToken(this.nextToken())
                        }
                        return a
                    }
                    ;
                    d.prototype.parseArrayInitializer = function() {
                        var a = this.createNode()
                          , c = [];
                        for (this.expect("["); !this.match("]"); )
                            this.match(",") ? (this.nextToken(),
                            c.push(null)) : (c.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),
                            this.match("]") || this.expect(","));
                        this.expect("]");
                        return this.finalize(a, new l.ArrayExpression(c))
                    }
                    ;
                    d.prototype.parsePropertyMethod = function(a) {
                        this.context.isAssignmentTarget = !1;
                        this.context.isBindingElement = !1;
                        var c = this.context.strict
                          , e = this.context.allowStrictDirective;
                        this.context.allowStrictDirective = a.simple;
                        var n = this.isolateCoverGrammar(this.parseFunctionSourceElements);
                        this.context.strict && a.firstRestricted && this.tolerateUnexpectedToken(a.firstRestricted, a.message);
                        this.context.strict && a.stricted && this.tolerateUnexpectedToken(a.stricted, a.message);
                        this.context.strict = c;
                        this.context.allowStrictDirective = e;
                        return n
                    }
                    ;
                    d.prototype.parsePropertyMethodFunction = function() {
                        var a = this.createNode()
                          , c = this.parseFormalParameters()
                          , e = this.parsePropertyMethod(c);
                        return this.finalize(a, new l.FunctionExpression(null,c.params,e,!1))
                    }
                    ;
                    d.prototype.parseObjectPropertyKey = function() {
                        var a = this.createNode()
                          , c = this.nextToken();
                        switch (c.type) {
                        case 8:
                        case 6:
                            this.context.strict && c.octal && this.tolerateUnexpectedToken(c, m.Messages.StrictOctalLiteral);
                            var e = this.getTokenRaw(c);
                            a = this.finalize(a, new l.Literal(c.value,e));
                            break;
                        case 3:
                        case 1:
                        case 5:
                        case 4:
                            a = this.finalize(a, new l.Identifier(c.value));
                            break;
                        case 7:
                            "[" === c.value ? (a = this.isolateCoverGrammar(this.parseAssignmentExpression),
                            this.expect("]")) : a = this.throwUnexpectedToken(c);
                            break;
                        default:
                            a = this.throwUnexpectedToken(c)
                        }
                        return a
                    }
                    ;
                    d.prototype.isPropertyKey = function(a, c) {
                        return a.type === h.Syntax.Identifier && a.name === c || a.type === h.Syntax.Literal && a.value === c
                    }
                    ;
                    d.prototype.parseObjectProperty = function(a) {
                        var c = this.createNode()
                          , e = this.lookahead
                          , n = null
                          , t = null
                          , g = !1
                          , q = !1
                          , x = !1
                          , v = !1;
                        if (3 === e.type) {
                            var z = e.value;
                            this.nextToken();
                            g = this.match("[");
                            n = (v = !this.hasLineTerminator && "async" === z && !this.match(":") && !this.match("(") && !this.match("*") && !this.match(",")) ? this.parseObjectPropertyKey() : this.finalize(c, new l.Identifier(z))
                        } else
                            this.match("*") ? this.nextToken() : (g = this.match("["),
                            n = this.parseObjectPropertyKey());
                        n || this.throwUnexpectedToken(this.lookahead);
                        this.match(":") && !v ? (!g && this.isPropertyKey(n, "__proto__") && (a.value && this.tolerateError(m.Messages.DuplicateProtoProperty),
                        a.value = !0),
                        this.nextToken(),
                        t = this.inheritCoverGrammar(this.parseAssignmentExpression)) : this.match("(") ? (t = this.parsePropertyMethodFunction(),
                        q = !0) : 3 === e.type ? (z = this.finalize(c, new l.Identifier(e.value)),
                        this.match("\x3d") ? (this.context.firstCoverInitializedNameError = this.lookahead,
                        this.nextToken(),
                        x = !0,
                        a = this.isolateCoverGrammar(this.parseAssignmentExpression),
                        t = this.finalize(c, new l.AssignmentPattern(z,a))) : (x = !0,
                        t = z)) : this.throwUnexpectedToken(this.nextToken());
                        return this.finalize(c, new l.Property("init",n,g,t,q,x))
                    }
                    ;
                    d.prototype.parseObjectInitializer = function() {
                        var a = this.createNode();
                        this.expect("{");
                        for (var c = [], e = {
                            value: !1
                        }; !this.match("}"); )
                            c.push(this.parseObjectProperty(e)),
                            this.match("}") || this.expectCommaSeparator();
                        this.expect("}");
                        return this.finalize(a, new l.ObjectExpression(c))
                    }
                    ;
                    d.prototype.parseTemplateHead = function() {
                        b.assert(this.lookahead.head, "Template literal must start with a template head");
                        var a = this.createNode()
                          , c = this.nextToken();
                        return this.finalize(a, new l.TemplateElement({
                            raw: c.value,
                            cooked: c.cooked
                        },c.tail))
                    }
                    ;
                    d.prototype.parseTemplateElement = function() {
                        10 !== this.lookahead.type && this.throwUnexpectedToken();
                        var a = this.createNode()
                          , c = this.nextToken();
                        return this.finalize(a, new l.TemplateElement({
                            raw: c.value,
                            cooked: c.cooked
                        },c.tail))
                    }
                    ;
                    d.prototype.parseTemplateLiteral = function() {
                        var a = this.createNode()
                          , c = []
                          , e = []
                          , n = this.parseTemplateHead();
                        for (e.push(n); !n.tail; )
                            c.push(this.parseExpression()),
                            n = this.parseTemplateElement(),
                            e.push(n);
                        return this.finalize(a, new l.TemplateLiteral(e,c))
                    }
                    ;
                    d.prototype.reinterpretExpressionAsPattern = function(a) {
                        switch (a.type) {
                        case h.Syntax.ArrayExpression:
                            a.type = h.Syntax.ArrayPattern;
                            for (var c = 0; c < a.elements.length; c++)
                                null !== a.elements[c] && this.reinterpretExpressionAsPattern(a.elements[c]);
                            break;
                        case h.Syntax.ObjectExpression:
                            a.type = h.Syntax.ObjectPattern;
                            for (c = 0; c < a.properties.length; c++)
                                this.reinterpretExpressionAsPattern(a.properties[c].value);
                            break;
                        case h.Syntax.AssignmentExpression:
                            a.type = h.Syntax.AssignmentPattern,
                            delete a.operator,
                            this.reinterpretExpressionAsPattern(a.left)
                        }
                    }
                    ;
                    d.prototype.parseGroupExpression = function() {
                        this.expect("(");
                        if (this.match(")")) {
                            this.nextToken();
                            this.match("\x3d\x3e") || this.expect("\x3d\x3e");
                            var a = {
                                type: "ArrowParameterPlaceHolder",
                                params: [],
                                async: !1
                            }
                        } else {
                            var c = this.lookahead
                              , e = !1;
                            this.context.isBindingElement = !0;
                            a = this.inheritCoverGrammar(this.parseAssignmentExpression);
                            if (this.match(",")) {
                                var n = [];
                                this.context.isAssignmentTarget = !1;
                                for (n.push(a); 2 !== this.lookahead.type && this.match(","); ) {
                                    this.nextToken();
                                    if (this.match(")")) {
                                        this.nextToken();
                                        for (e = 0; e < n.length; e++)
                                            this.reinterpretExpressionAsPattern(n[e]);
                                        e = !0;
                                        a = {
                                            type: "ArrowParameterPlaceHolder",
                                            params: n,
                                            async: !1
                                        }
                                    } else
                                        n.push(this.inheritCoverGrammar(this.parseAssignmentExpression));
                                    if (e)
                                        break
                                }
                                e || (a = this.finalize(this.startNode(c), new l.SequenceExpression(n)))
                            }
                            if (!e) {
                                this.expect(")");
                                if (this.match("\x3d\x3e") && (a.type === h.Syntax.Identifier && "yield" === a.name && (e = !0,
                                a = {
                                    type: "ArrowParameterPlaceHolder",
                                    params: [a],
                                    async: !1
                                }),
                                !e)) {
                                    this.context.isBindingElement || this.throwUnexpectedToken(this.lookahead);
                                    if (a.type === h.Syntax.SequenceExpression)
                                        for (e = 0; e < a.expressions.length; e++)
                                            this.reinterpretExpressionAsPattern(a.expressions[e]);
                                    else
                                        this.reinterpretExpressionAsPattern(a);
                                    a = {
                                        type: "ArrowParameterPlaceHolder",
                                        params: a.type === h.Syntax.SequenceExpression ? a.expressions : [a],
                                        async: !1
                                    }
                                }
                                this.context.isBindingElement = !1
                            }
                        }
                        return a
                    }
                    ;
                    d.prototype.parseArguments = function() {
                        this.expect("(");
                        var a = [];
                        if (!this.match(")"))
                            for (; ; ) {
                                var c = this.isolateCoverGrammar(this.parseAssignmentExpression);
                                a.push(c);
                                if (this.match(")"))
                                    break;
                                this.expectCommaSeparator();
                                if (this.match(")"))
                                    break
                            }
                        this.expect(")");
                        return a
                    }
                    ;
                    d.prototype.isIdentifierName = function(a) {
                        return 3 === a.type || 4 === a.type || 1 === a.type || 5 === a.type
                    }
                    ;
                    d.prototype.parseIdentifierName = function() {
                        var a = this.createNode()
                          , c = this.nextToken();
                        this.isIdentifierName(c) || this.throwUnexpectedToken(c);
                        return this.finalize(a, new l.Identifier(c.value))
                    }
                    ;
                    d.prototype.parseLeftHandSideExpressionAllowCall = function() {
                        var a = this.lookahead
                          , c = this.context.allowIn;
                        this.context.allowIn = !0;
                        var e;
                        for (e = this.inheritCoverGrammar(this.parsePrimaryExpression); ; )
                            if (this.match(".")) {
                                this.context.isBindingElement = !1;
                                this.context.isAssignmentTarget = !0;
                                this.expect(".");
                                var n = this.parseIdentifierName();
                                e = this.finalize(this.startNode(a), new l.StaticMemberExpression(e,n))
                            } else if (this.match("("))
                                this.context.isBindingElement = !1,
                                this.context.isAssignmentTarget = !1,
                                n = this.parseArguments(),
                                e = this.finalize(this.startNode(a), new l.CallExpression(e,n));
                            else if (this.match("["))
                                this.context.isBindingElement = !1,
                                this.context.isAssignmentTarget = !0,
                                this.expect("["),
                                n = this.isolateCoverGrammar(this.parseExpression),
                                this.expect("]"),
                                e = this.finalize(this.startNode(a), new l.ComputedMemberExpression(e,n));
                            else
                                break;
                        this.context.allowIn = c;
                        return e
                    }
                    ;
                    d.prototype.parseLeftHandSideExpression = function() {
                        b.assert(this.context.allowIn, "callee of new expression always allow in keyword.");
                        for (var a = this.startNode(this.lookahead), c = this.inheritCoverGrammar(this.parsePrimaryExpression); ; )
                            if (this.match("[")) {
                                this.context.isBindingElement = !1;
                                this.context.isAssignmentTarget = !0;
                                this.expect("[");
                                var e = this.isolateCoverGrammar(this.parseExpression);
                                this.expect("]");
                                c = this.finalize(a, new l.ComputedMemberExpression(c,e))
                            } else if (this.match("."))
                                this.context.isBindingElement = !1,
                                this.context.isAssignmentTarget = !0,
                                this.expect("."),
                                e = this.parseIdentifierName(),
                                c = this.finalize(a, new l.StaticMemberExpression(c,e));
                            else
                                break;
                        return c
                    }
                    ;
                    d.prototype.parseUpdateExpression = function() {
                        var a = this.lookahead;
                        if (this.match("++") || this.match("--")) {
                            a = this.startNode(a);
                            var c = this.nextToken();
                            var e = this.inheritCoverGrammar(this.parseUnaryExpression);
                            this.context.strict && e.type === h.Syntax.Identifier && this.scanner.isRestrictedWord(e.name) && this.tolerateError(m.Messages.StrictLHSPrefix);
                            this.context.isAssignmentTarget || this.tolerateError(m.Messages.InvalidLHSInAssignment);
                            e = this.finalize(a, new l.UpdateExpression(c.value,e,!0));
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1
                        } else
                            e = this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),
                            this.hasLineTerminator || 7 !== this.lookahead.type || !this.match("++") && !this.match("--") || (this.context.strict && e.type === h.Syntax.Identifier && this.scanner.isRestrictedWord(e.name) && this.tolerateError(m.Messages.StrictLHSPostfix),
                            this.context.isAssignmentTarget || this.tolerateError(m.Messages.InvalidLHSInAssignment),
                            this.context.isAssignmentTarget = !1,
                            this.context.isBindingElement = !1,
                            c = this.nextToken().value,
                            e = this.finalize(this.startNode(a), new l.UpdateExpression(c,e,!1)));
                        return e
                    }
                    ;
                    d.prototype.parseUnaryExpression = function() {
                        if (this.match("+") || this.match("-") || this.match("~") || this.match("!") || this.matchKeyword("delete") || this.matchKeyword("void") || this.matchKeyword("typeof")) {
                            var a = this.startNode(this.lookahead)
                              , c = this.nextToken();
                            var e = this.inheritCoverGrammar(this.parseUnaryExpression);
                            e = this.finalize(a, new l.UnaryExpression(c.value,e));
                            this.context.strict && "delete" === e.operator && e.argument.type === h.Syntax.Identifier && this.tolerateError(m.Messages.StrictDelete);
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1
                        } else
                            e = this.parseUpdateExpression();
                        return e
                    }
                    ;
                    d.prototype.parseExponentiationExpression = function() {
                        var a = this.lookahead
                          , c = this.inheritCoverGrammar(this.parseUnaryExpression);
                        if (c.type !== h.Syntax.UnaryExpression && this.match("**")) {
                            this.nextToken();
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1;
                            var e = this.isolateCoverGrammar(this.parseExponentiationExpression);
                            c = this.finalize(this.startNode(a), new l.BinaryExpression("**",c,e))
                        }
                        return c
                    }
                    ;
                    d.prototype.binaryPrecedence = function(a) {
                        var c = a.value;
                        return 7 === a.type ? this.operatorPrecedence[c] || 0 : 4 === a.type ? "instanceof" === c || this.context.allowIn && "in" === c ? 7 : 0 : 0
                    }
                    ;
                    d.prototype.parseBinaryExpression = function() {
                        var a = this.lookahead
                          , c = this.inheritCoverGrammar(this.parseExponentiationExpression)
                          , e = this.lookahead
                          , n = this.binaryPrecedence(e);
                        if (0 < n) {
                            this.nextToken();
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1;
                            a = [a, this.lookahead];
                            var t = this.isolateCoverGrammar(this.parseExponentiationExpression);
                            e = [c, e.value, t];
                            for (var g = [n]; ; ) {
                                n = this.binaryPrecedence(this.lookahead);
                                if (0 >= n)
                                    break;
                                for (; 2 < e.length && n <= g[g.length - 1]; ) {
                                    t = e.pop();
                                    var q = e.pop();
                                    g.pop();
                                    c = e.pop();
                                    a.pop();
                                    var x = a[a.length - 1]
                                      , v = this.startNode(x, x.lineStart);
                                    e.push(this.finalize(v, new l.BinaryExpression(q,c,t)))
                                }
                                e.push(this.nextToken().value);
                                g.push(n);
                                a.push(this.lookahead);
                                e.push(this.isolateCoverGrammar(this.parseExponentiationExpression))
                            }
                            n = e.length - 1;
                            c = e[n];
                            for (q = a.pop(); 1 < n; )
                                x = a.pop(),
                                v = this.startNode(x, q && q.lineStart),
                                q = e[n - 1],
                                c = this.finalize(v, new l.BinaryExpression(q,e[n - 2],c)),
                                n -= 2,
                                q = x
                        }
                        return c
                    }
                    ;
                    d.prototype.parseConditionalExpression = function() {
                        var a = this.lookahead
                          , c = this.inheritCoverGrammar(this.parseBinaryExpression);
                        if (this.match("?")) {
                            this.nextToken();
                            var e = this.context.allowIn;
                            this.context.allowIn = !0;
                            var n = this.isolateCoverGrammar(this.parseAssignmentExpression);
                            this.context.allowIn = e;
                            this.expect(":");
                            e = this.isolateCoverGrammar(this.parseAssignmentExpression);
                            c = this.finalize(this.startNode(a), new l.ConditionalExpression(c,n,e));
                            this.context.isAssignmentTarget = !1;
                            this.context.isBindingElement = !1
                        }
                        return c
                    }
                    ;
                    d.prototype.checkPatternParam = function(a, c) {
                        switch (c.type) {
                        case h.Syntax.Identifier:
                            this.validateParam(a, c, c.name);
                            break;
                        case h.Syntax.AssignmentPattern:
                            this.checkPatternParam(a, c.left);
                            break;
                        case h.Syntax.ArrayPattern:
                            for (var e = 0; e < c.elements.length; e++)
                                null !== c.elements[e] && this.checkPatternParam(a, c.elements[e]);
                            break;
                        case h.Syntax.ObjectPattern:
                            for (e = 0; e < c.properties.length; e++)
                                this.checkPatternParam(a, c.properties[e].value)
                        }
                        a.simple = a.simple && c instanceof l.Identifier
                    }
                    ;
                    d.prototype.reinterpretAsCoverFormalsList = function(a) {
                        var c = [a]
                          , e = {
                            simple: !0,
                            paramSet: {}
                        };
                        switch (a.type) {
                        case h.Syntax.Identifier:
                            break;
                        default:
                            return null
                        }
                        for (a = 0; a < c.length; ++a) {
                            var n = c[a];
                            this.checkPatternParam(e, n);
                            c[a] = n
                        }
                        e.message === m.Messages.StrictParamDupe && this.throwUnexpectedToken(this.context.strict ? e.stricted : e.firstRestricted, e.message);
                        return {
                            simple: e.simple,
                            params: c,
                            stricted: e.stricted,
                            firstRestricted: e.firstRestricted,
                            message: e.message
                        }
                    }
                    ;
                    d.prototype.parseAssignmentExpression = function() {
                        var a = this.lookahead
                          , c = a;
                        var e = this.parseConditionalExpression();
                        if (this.matchAssign()) {
                            this.context.isAssignmentTarget || this.tolerateError(m.Messages.InvalidLHSInAssignment);
                            if (this.context.strict && e.type === h.Syntax.Identifier) {
                                var n = e;
                                this.scanner.isRestrictedWord(n.name) && this.tolerateUnexpectedToken(c, m.Messages.StrictLHSAssignment);
                                this.scanner.isStrictModeReservedWord(n.name) && this.tolerateUnexpectedToken(c, m.Messages.StrictReservedWord)
                            }
                            this.match("\x3d") ? this.reinterpretExpressionAsPattern(e) : (this.context.isAssignmentTarget = !1,
                            this.context.isBindingElement = !1);
                            c = this.nextToken();
                            c = c.value;
                            n = this.isolateCoverGrammar(this.parseAssignmentExpression);
                            e = this.finalize(this.startNode(a), new l.AssignmentExpression(c,e,n));
                            this.context.firstCoverInitializedNameError = null
                        }
                        return e
                    }
                    ;
                    d.prototype.parseExpression = function() {
                        var a = this.lookahead
                          , c = this.isolateCoverGrammar(this.parseAssignmentExpression);
                        if (this.match(",")) {
                            var e = [];
                            for (e.push(c); 2 !== this.lookahead.type && this.match(","); )
                                this.nextToken(),
                                e.push(this.isolateCoverGrammar(this.parseAssignmentExpression));
                            c = this.finalize(this.startNode(a), new l.SequenceExpression(e))
                        }
                        return c
                    }
                    ;
                    d.prototype.parseStatementListItem = function() {
                        this.context.isAssignmentTarget = !0;
                        this.context.isBindingElement = !0;
                        if (4 === this.lookahead.type)
                            switch (this.lookahead.value) {
                            case "function":
                                var a = this.parseFunctionDeclaration();
                                break;
                            default:
                                a = this.parseStatement()
                            }
                        else
                            a = this.parseStatement();
                        return a
                    }
                    ;
                    d.prototype.parseBlock = function() {
                        var a = this.createNode();
                        this.expect("{");
                        for (var c = []; !this.match("}"); )
                            c.push(this.parseStatementListItem());
                        this.expect("}");
                        return this.finalize(a, new l.BlockStatement(c))
                    }
                    ;
                    d.prototype.parseBlockOrObjectInitialiser = function() {
                        var a = this.createNode();
                        this.expect("{");
                        if (3 === this.lookahead.type || 8 === this.lookahead.type) {
                            var c = this.scanner.saveState();
                            this.scanner.scanComments();
                            var e = this.scanner.lex();
                            this.scanner.restoreState(c);
                            if (7 === e.type && ":" === e.value) {
                                c = [];
                                for (e = {
                                    value: !1
                                }; !this.match("}"); )
                                    c.push(this.parseObjectProperty(e)),
                                    this.match("}") || this.expectCommaSeparator();
                                this.expect("}");
                                return this.finalize(a, new l.ObjectExpression(c))
                            }
                        }
                        for (c = []; !this.match("}"); )
                            c.push(this.parseStatementListItem());
                        this.expect("}");
                        return this.finalize(a, new l.BlockStatement(c))
                    }
                    ;
                    d.prototype.parseLexicalBinding = function(a, c) {
                        var e = this.createNode();
                        a = this.parsePattern([], a);
                        this.context.strict && a.type === h.Syntax.Identifier && this.scanner.isRestrictedWord(a.name) && this.tolerateError(m.Messages.StrictVarName);
                        var n = null;
                        if (!c.inFor && a.type !== h.Syntax.Identifier || this.match("\x3d"))
                            this.expect("\x3d"),
                            n = this.isolateCoverGrammar(this.parseAssignmentExpression);
                        return this.finalize(e, new l.VariableDeclarator(a,n))
                    }
                    ;
                    d.prototype.parseBindingList = function(a, c) {
                        for (var e = [this.parseLexicalBinding(a, c)]; this.match(","); )
                            this.nextToken(),
                            e.push(this.parseLexicalBinding(a, c));
                        return e
                    }
                    ;
                    d.prototype.parseArrayPattern = function(a, c) {
                        var e = this.createNode();
                        this.expect("[");
                        for (var n = []; !this.match("]"); )
                            this.match(",") ? (this.nextToken(),
                            n.push(null)) : (n.push(this.parsePatternWithDefault(a, c)),
                            this.match("]") || this.expect(","));
                        this.expect("]");
                        return this.finalize(e, new l.ArrayPattern(n))
                    }
                    ;
                    d.prototype.parsePropertyPattern = function(a, c) {
                        var e = this.createNode()
                          , n = !1
                          , t = !1;
                        if (3 === this.lookahead.type) {
                            var g = this.lookahead;
                            var q = this.parseVariableIdentifier();
                            var x = this.finalize(e, new l.Identifier(g.value));
                            this.match("\x3d") ? (a.push(g),
                            t = !0,
                            this.nextToken(),
                            a = this.parseAssignmentExpression(),
                            g = this.finalize(this.startNode(g), new l.AssignmentPattern(x,a))) : this.match(":") ? (this.expect(":"),
                            g = this.parsePatternWithDefault(a, c)) : (a.push(g),
                            t = !0,
                            g = x)
                        } else
                            n = this.match("["),
                            q = this.parseObjectPropertyKey(),
                            this.expect(":"),
                            g = this.parsePatternWithDefault(a, c);
                        return this.finalize(e, new l.Property("init",q,n,g,!1,t))
                    }
                    ;
                    d.prototype.parseObjectPattern = function(a, c) {
                        var e = this.createNode()
                          , n = [];
                        for (this.expect("{"); !this.match("}"); )
                            n.push(this.parsePropertyPattern(a, c)),
                            this.match("}") || this.expect(",");
                        this.expect("}");
                        return this.finalize(e, new l.ObjectPattern(n))
                    }
                    ;
                    d.prototype.parsePattern = function(a, c) {
                        this.match("[") ? a = this.parseArrayPattern(a, c) : this.match("{") ? a = this.parseObjectPattern(a, c) : (!this.matchKeyword("let") || "const" !== c && "let" !== c || this.tolerateUnexpectedToken(this.lookahead, m.Messages.LetInLexicalBinding),
                        a.push(this.lookahead),
                        a = this.parseVariableIdentifier(c));
                        return a
                    }
                    ;
                    d.prototype.parsePatternWithDefault = function(a, c) {
                        var e = this.lookahead;
                        a = this.parsePattern(a, c);
                        this.match("\x3d") && (this.nextToken(),
                        c = this.isolateCoverGrammar(this.parseAssignmentExpression),
                        a = this.finalize(this.startNode(e), new l.AssignmentPattern(a,c)));
                        return a
                    }
                    ;
                    d.prototype.parseVariableIdentifier = function(a) {
                        var c = this.createNode()
                          , e = this.nextToken();
                        3 !== e.type && (this.context.strict && 4 === e.type && this.scanner.isStrictModeReservedWord(e.value) ? this.tolerateUnexpectedToken(e, m.Messages.StrictReservedWord) : (this.context.strict || "let" !== e.value || "var" !== a) && this.throwUnexpectedToken(e));
                        return this.finalize(c, new l.Identifier(e.value))
                    }
                    ;
                    d.prototype.parseVariableDeclaration = function(a) {
                        var c = this.createNode()
                          , e = this.parsePattern([], "var");
                        this.context.strict && e.type === h.Syntax.Identifier && this.scanner.isRestrictedWord(e.name) && this.tolerateError(m.Messages.StrictVarName);
                        var n = null;
                        this.match("\x3d") ? (this.nextToken(),
                        n = this.isolateCoverGrammar(this.parseAssignmentExpression)) : e.type === h.Syntax.Identifier || a.inFor || this.expect("\x3d");
                        return this.finalize(c, new l.VariableDeclarator(e,n))
                    }
                    ;
                    d.prototype.parseVariableDeclarationList = function(a) {
                        a = {
                            inFor: a.inFor
                        };
                        var c = [];
                        for (c.push(this.parseVariableDeclaration(a)); this.match(","); )
                            this.nextToken(),
                            c.push(this.parseVariableDeclaration(a));
                        return c
                    }
                    ;
                    d.prototype.parseVariableStatement = function() {
                        var a = this.createNode();
                        this.expectKeyword("var");
                        var c = this.parseVariableDeclarationList({
                            inFor: !1
                        });
                        this.consumeSemicolon();
                        return this.finalize(a, new l.VariableDeclaration(c,"var"))
                    }
                    ;
                    d.prototype.parseEmptyStatement = function() {
                        var a = this.createNode();
                        this.expect(";");
                        return this.finalize(a, new l.EmptyStatement)
                    }
                    ;
                    d.prototype.parseExpressionStatement = function() {
                        var a = this.createNode()
                          , c = this.parseExpression();
                        this.consumeSemicolon();
                        return this.finalize(a, new l.ExpressionStatement(c))
                    }
                    ;
                    d.prototype.parseIfClause = function() {
                        this.context.strict && this.matchKeyword("function") && this.tolerateError(m.Messages.StrictFunction);
                        return this.parseStatement(!0)
                    }
                    ;
                    d.prototype.parseIfStatement = function() {
                        var a = this.createNode()
                          , c = null;
                        this.expectKeyword("if");
                        this.expect("(");
                        var e = this.parseExpression();
                        if (!this.match(")") && this.config.tolerant) {
                            this.tolerateUnexpectedToken(this.nextToken());
                            var n = this.finalize(this.createNode(), new l.EmptyStatement)
                        } else
                            this.expect(")"),
                            n = this.parseIfClause(),
                            this.matchKeyword("else") && (this.nextToken(),
                            c = this.parseIfClause());
                        return this.finalize(a, new l.IfStatement(e,n,c))
                    }
                    ;
                    d.prototype.parseForStatement = function() {
                        var a = null
                          , c = null
                          , e = null
                          , n = this.createNode();
                        this.expectKeyword("for");
                        this.expect("(");
                        if (this.match(";"))
                            this.nextToken();
                        else if (this.matchKeyword("var")) {
                            a = this.createNode();
                            this.nextToken();
                            var t = this.context.allowIn;
                            this.context.allowIn = !1;
                            var g = this.parseVariableDeclarationList({
                                inFor: !0
                            });
                            this.context.allowIn = t;
                            if (1 === g.length && this.matchKeyword("in")) {
                                var q = g[0];
                                q.init && (q.id.type === h.Syntax.ArrayPattern || q.id.type === h.Syntax.ObjectPattern || this.context.strict) && this.tolerateError(m.Messages.ForInOfLoopInitializer, "for-in");
                                a = this.finalize(a, new l.VariableDeclaration(g,"var"));
                                this.nextToken();
                                q = a;
                                var x = this.parseExpression();
                                a = null
                            } else
                                1 === g.length && null === g[0].init && this.matchContextualKeyword("of") ? (a = this.finalize(a, new l.VariableDeclaration(g,"var")),
                                this.nextToken(),
                                q = a,
                                x = this.parseAssignmentExpression(),
                                a = null) : (a = this.finalize(a, new l.VariableDeclaration(g,"var")),
                                this.expect(";"))
                        } else {
                            g = this.lookahead;
                            var v = this.context.isBindingElement
                              , z = this.context.isAssignmentTarget
                              , u = this.context.firstCoverInitializedNameError;
                            t = this.context.allowIn;
                            this.context.allowIn = !1;
                            a = this.inheritCoverGrammar(this.parseAssignmentExpression);
                            this.context.allowIn = t;
                            if (this.matchKeyword("in"))
                                this.context.isAssignmentTarget && a.type !== h.Syntax.AssignmentExpression || this.tolerateError(m.Messages.InvalidLHSInForIn),
                                this.nextToken(),
                                this.reinterpretExpressionAsPattern(a),
                                q = a,
                                x = this.parseExpression(),
                                a = null;
                            else {
                                this.context.isBindingElement = v;
                                this.context.isAssignmentTarget = z;
                                this.context.firstCoverInitializedNameError = u;
                                if (this.match(",")) {
                                    for (a = [a]; this.match(","); )
                                        this.nextToken(),
                                        a.push(this.isolateCoverGrammar(this.parseAssignmentExpression));
                                    a = this.finalize(this.startNode(g), new l.SequenceExpression(a))
                                }
                                this.expect(";")
                            }
                        }
                        "undefined" === typeof q && (this.match(";") || (c = this.isolateCoverGrammar(this.parseExpression)),
                        this.expect(";"),
                        this.match(")") || (e = this.isolateCoverGrammar(this.parseExpression)));
                        !this.match(")") && this.config.tolerant ? (this.tolerateUnexpectedToken(this.nextToken()),
                        t = this.finalize(this.createNode(), new l.EmptyStatement)) : (this.expect(")"),
                        g = this.context.inIteration,
                        this.context.inIteration = !0,
                        t = this.isolateCoverGrammar(this.parseStatementBlockAllowed),
                        this.context.inIteration = g);
                        return "undefined" === typeof q ? this.finalize(n, new l.ForStatement(a,c,e,t)) : this.finalize(n, new l.ForInStatement(q,x,t))
                    }
                    ;
                    d.prototype.parseContinueStatement = function() {
                        var a = this.createNode();
                        this.expectKeyword("continue");
                        var c = null;
                        if (3 === this.lookahead.type && !this.hasLineTerminator) {
                            var e = this.parseVariableIdentifier();
                            c = e;
                            Object.prototype.hasOwnProperty.call(this.context.labelSet, "$" + e.name) || this.throwError(m.Messages.UnknownLabel, e.name)
                        }
                        this.consumeSemicolon();
                        null !== c || this.context.inIteration || this.throwError(m.Messages.IllegalContinue);
                        return this.finalize(a, new l.ContinueStatement(c))
                    }
                    ;
                    d.prototype.parseBreakStatement = function() {
                        var a = this.createNode();
                        this.expectKeyword("break");
                        var c = null;
                        3 !== this.lookahead.type || this.hasLineTerminator || (c = this.parseVariableIdentifier(),
                        Object.prototype.hasOwnProperty.call(this.context.labelSet, "$" + c.name) || this.throwError(m.Messages.UnknownLabel, c.name));
                        this.consumeSemicolon();
                        null !== c || this.context.inIteration || this.context.inSwitch || this.throwError(m.Messages.IllegalBreak);
                        return this.finalize(a, new l.BreakStatement(c))
                    }
                    ;
                    d.prototype.parseReturnStatement = function() {
                        this.context.inFunctionBody || this.tolerateError(m.Messages.IllegalReturn);
                        var a = this.createNode();
                        this.expectKeyword("return");
                        var c = (this.match(";") || this.match("}") || this.hasLineTerminator || 2 === this.lookahead.type) && 8 !== this.lookahead.type && 10 !== this.lookahead.type ? null : this.parseExpression();
                        this.consumeSemicolon();
                        return this.finalize(a, new l.ReturnStatement(c))
                    }
                    ;
                    d.prototype.parseLabelledStatement = function() {
                        var a = this.createNode()
                          , c = this.parseExpression();
                        this.consumeSemicolon();
                        c = new l.ExpressionStatement(c);
                        return this.finalize(a, c)
                    }
                    ;
                    d.prototype.parseStatementBlockAllowed = function() {
                        return this.parseStatement(!0)
                    }
                    ;
                    d.prototype.parseStatement = function(a) {
                        void 0 === a && (a = !1);
                        switch (this.lookahead.type) {
                        case 1:
                        case 5:
                        case 6:
                        case 8:
                        case 10:
                        case 9:
                            a = this.parseExpressionStatement();
                            break;
                        case 7:
                            var c = this.lookahead.value;
                            a = "{" === c ? a ? this.parseBlockOrObjectInitialiser() : this.parseObjectInitializer() : "(" === c ? this.parseExpressionStatement() : ";" === c ? this.parseEmptyStatement() : this.parseExpressionStatement();
                            break;
                        case 3:
                            a = this.parseLabelledStatement();
                            break;
                        case 4:
                            switch (this.lookahead.value.toLowerCase()) {
                            case "break":
                                a = this.parseBreakStatement();
                                break;
                            case "continue":
                                a = this.parseContinueStatement();
                                break;
                            case "for":
                                a = this.parseForStatement();
                                break;
                            case "function":
                                a = this.parseFunctionDeclaration();
                                break;
                            case "if":
                                a = this.parseIfStatement();
                                break;
                            case "return":
                                a = this.parseReturnStatement();
                                break;
                            case "var":
                                a = this.parseVariableStatement();
                                break;
                            default:
                                a = this.parseExpressionStatement()
                            }
                            break;
                        default:
                            a = this.throwUnexpectedToken(this.lookahead)
                        }
                        return a
                    }
                    ;
                    d.prototype.parseFunctionSourceElements = function() {
                        var a = this.createNode();
                        this.expect("{");
                        var c = []
                          , e = this.context.labelSet
                          , n = this.context.inIteration
                          , t = this.context.inSwitch
                          , g = this.context.inFunctionBody;
                        this.context.labelSet = {};
                        this.context.inIteration = !1;
                        this.context.inSwitch = !1;
                        for (this.context.inFunctionBody = !0; 2 !== this.lookahead.type && !this.match("}"); )
                            c.push(this.parseStatementListItem());
                        this.expect("}");
                        this.context.labelSet = e;
                        this.context.inIteration = n;
                        this.context.inSwitch = t;
                        this.context.inFunctionBody = g;
                        return this.finalize(a, new l.BlockStatement(c))
                    }
                    ;
                    d.prototype.validateParam = function(a, c, e) {
                        var n = "$" + e;
                        this.context.strict ? (this.scanner.isRestrictedWord(e) && (a.stricted = c,
                        a.message = m.Messages.StrictParamName),
                        Object.prototype.hasOwnProperty.call(a.paramSet, n) && (a.stricted = c,
                        a.message = m.Messages.StrictParamDupe)) : a.firstRestricted || (this.scanner.isRestrictedWord(e) ? (a.firstRestricted = c,
                        a.message = m.Messages.StrictParamName) : this.scanner.isStrictModeReservedWord(e) ? (a.firstRestricted = c,
                        a.message = m.Messages.StrictReservedWord) : Object.prototype.hasOwnProperty.call(a.paramSet, n) && (a.stricted = c,
                        a.message = m.Messages.StrictParamDupe));
                        "function" === typeof Object.defineProperty ? Object.defineProperty(a.paramSet, n, {
                            value: !0,
                            enumerable: !0,
                            writable: !0,
                            configurable: !0
                        }) : a.paramSet[n] = !0
                    }
                    ;
                    d.prototype.parseFormalParameter = function(a) {
                        for (var c = [], e = this.parsePatternWithDefault(c), n = 0; n < c.length; n++)
                            this.validateParam(a, c[n], c[n].value);
                        a.simple = a.simple && e instanceof l.Identifier;
                        a.params.push(e)
                    }
                    ;
                    d.prototype.parseFormalParameters = function(a) {
                        a = {
                            simple: !0,
                            params: [],
                            firstRestricted: a
                        };
                        this.expect("(");
                        if (!this.match(")"))
                            for (a.paramSet = {}; 2 !== this.lookahead.type; ) {
                                this.parseFormalParameter(a);
                                if (this.match(")"))
                                    break;
                                this.expect(",");
                                if (this.match(")"))
                                    break
                            }
                        this.expect(")");
                        return {
                            simple: a.simple,
                            params: a.params,
                            stricted: a.stricted,
                            firstRestricted: a.firstRestricted,
                            message: a.message
                        }
                    }
                    ;
                    d.prototype.parseFunctionDeclaration = function(a) {
                        var c = this.createNode();
                        this.expectKeyword("function");
                        var e = null
                          , n = null;
                        if (!a || !this.match("("))
                            if (a = this.lookahead,
                            e = this.parseVariableIdentifier(),
                            this.context.strict)
                                this.scanner.isRestrictedWord(a.value) && this.tolerateUnexpectedToken(a, m.Messages.StrictFunctionName);
                            else if (this.scanner.isRestrictedWord(a.value)) {
                                n = a;
                                var t = m.Messages.StrictFunctionName
                            } else
                                this.scanner.isStrictModeReservedWord(a.value) && (n = a,
                                t = m.Messages.StrictReservedWord);
                        var g = this.parseFormalParameters(n);
                        a = g.params;
                        var q = g.stricted;
                        n = g.firstRestricted;
                        g.message && (t = g.message);
                        var x = this.context.strict
                          , v = this.context.allowStrictDirective;
                        this.context.allowStrictDirective = g.simple;
                        g = this.parseFunctionSourceElements();
                        this.context.strict && n && this.throwUnexpectedToken(n, t);
                        this.context.strict && q && this.tolerateUnexpectedToken(q, t);
                        this.context.strict = x;
                        this.context.allowStrictDirective = v;
                        return this.finalize(c, new l.FunctionDeclaration(e,a,g,!1))
                    }
                    ;
                    d.prototype.parseFunctionExpression = function() {
                        var a = this.createNode();
                        this.expectKeyword("function");
                        var c = null;
                        if (!this.match("(")) {
                            var e = this.lookahead;
                            c = this.parseVariableIdentifier();
                            if (this.context.strict)
                                this.scanner.isRestrictedWord(e.value) && this.tolerateUnexpectedToken(e, m.Messages.StrictFunctionName);
                            else if (this.scanner.isRestrictedWord(e.value)) {
                                var n = e;
                                var t = m.Messages.StrictFunctionName
                            } else
                                this.scanner.isStrictModeReservedWord(e.value) && (n = e,
                                t = m.Messages.StrictReservedWord)
                        }
                        var g = this.parseFormalParameters(n);
                        e = g.params;
                        var q = g.stricted;
                        n = g.firstRestricted;
                        g.message && (t = g.message);
                        var x = this.context.strict
                          , v = this.context.allowStrictDirective;
                        this.context.allowStrictDirective = g.simple;
                        g = this.parseFunctionSourceElements();
                        this.context.strict && n && this.throwUnexpectedToken(n, t);
                        this.context.strict && q && this.tolerateUnexpectedToken(q, t);
                        this.context.strict = x;
                        this.context.allowStrictDirective = v;
                        return this.finalize(a, new l.FunctionExpression(c,e,g,!1))
                    }
                    ;
                    d.prototype.qualifiedPropertyName = function(a) {
                        switch (a.type) {
                        case 3:
                        case 8:
                        case 1:
                        case 5:
                        case 6:
                        case 4:
                            return !0;
                        case 7:
                            return "[" === a.value
                        }
                        return !1
                    }
                    ;
                    d.prototype.isStartOfExpression = function() {
                        var a = !0
                          , c = this.lookahead.value;
                        switch (this.lookahead.type) {
                        case 7:
                            a = "[" === c || "(" === c || "{" === c || "+" === c || "-" === c || "!" === c || "~" === c || "++" === c || "--" === c || "/" === c || "/\x3d" === c;
                            break;
                        case 4:
                            a = "class" === c || "delete" === c || "function" === c || "let" === c || "new" === c || "super" === c || "this" === c || "typeof" === c || "void" === c || "yield" === c
                        }
                        return a
                    }
                    ;
                    d.prototype.parseScript = function() {
                        for (var a = this.createNode(), c = []; 2 !== this.lookahead.type; )
                            c.push(this.parseStatementListItem());
                        return this.finalize(a, new l.Script(c))
                    }
                    ;
                    return d
                }();
                y.Parser = C
            })
        },
        "esri/arcade/lib/assert": function() {
            define(["require", "exports"], function(C, y) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.assert = void 0;
                y.assert = function(b, w) {
                    if (!b)
                        throw Error("ASSERT: " + w);
                }
            })
        },
        "esri/arcade/lib/error-handler": function() {
            define(["require", "exports"], function(C, y) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.ErrorHandler = void 0;
                C = function() {
                    function b() {
                        this.errors = [];
                        this.tolerant = !1
                    }
                    b.prototype.recordError = function(w) {
                        this.errors.push(w)
                    }
                    ;
                    b.prototype.tolerate = function(w) {
                        if (this.tolerant)
                            this.recordError(w);
                        else
                            throw w;
                    }
                    ;
                    b.prototype.constructError = function(w, m) {
                        w = Error(w);
                        try {
                            throw w;
                        } catch (l) {
                            Object.create && Object.defineProperty && (w = Object.create(l),
                            Object.defineProperty(w, "column", {
                                value: m
                            }))
                        }
                        return w
                    }
                    ;
                    b.prototype.createError = function(w, m, l, k) {
                        l = this.constructError("Line " + m + ": " + k, l);
                        l.index = w;
                        l.lineNumber = m;
                        l.description = k;
                        return l
                    }
                    ;
                    b.prototype.throwError = function(w, m, l, k) {
                        throw this.createError(w, m, l, k);
                    }
                    ;
                    b.prototype.tolerateError = function(w, m, l, k) {
                        w = this.createError(w, m, l, k);
                        if (this.tolerant)
                            this.recordError(w);
                        else
                            throw w;
                    }
                    ;
                    return b
                }();
                y.ErrorHandler = C
            })
        },
        "esri/arcade/lib/messages": function() {
            define(["require", "exports"], function(C, y) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.Messages = void 0;
                y.Messages = {
                    BadImportCallArity: "Unexpected token",
                    BadGetterArity: "Getter must not have any formal parameters",
                    BadSetterArity: "Setter must have exactly one formal parameter",
                    BadSetterRestParameter: "Setter function argument must not be a rest parameter",
                    ConstructorIsAsync: "Class constructor may not be an async method",
                    ConstructorSpecialMethod: "Class constructor may not be an accessor",
                    DeclarationMissingInitializer: "Missing initializer in %0 declaration",
                    DefaultRestParameter: "Unexpected token \x3d",
                    DefaultRestProperty: "Unexpected token \x3d",
                    DuplicateBinding: "Duplicate binding %0",
                    DuplicateConstructor: "A class may only have one constructor",
                    DuplicateProtoProperty: "Duplicate __proto__ fields are not allowed in object literals",
                    ForInOfLoopInitializer: "%0 loop variable declaration may not have an initializer",
                    GeneratorInLegacyContext: "Generator declarations are not allowed in legacy contexts",
                    IllegalBreak: "Illegal break statement",
                    IllegalContinue: "Illegal continue statement",
                    IllegalExportDeclaration: "Unexpected token",
                    IllegalImportDeclaration: "Unexpected token",
                    IllegalLanguageModeDirective: "Illegal 'use strict' directive in function with non-simple parameter list",
                    IllegalReturn: "Illegal return statement",
                    InvalidEscapedReservedWord: "Keyword must not contain escaped characters",
                    InvalidHexEscapeSequence: "Invalid hexadecimal escape sequence",
                    InvalidLHSInAssignment: "Invalid left-hand side in assignment",
                    InvalidLHSInForIn: "Invalid left-hand side in for-in",
                    InvalidLHSInForLoop: "Invalid left-hand side in for-loop",
                    InvalidModuleSpecifier: "Unexpected token",
                    InvalidRegExp: "Invalid regular expression",
                    LetInLexicalBinding: "let is disallowed as a lexically bound name",
                    MissingFromClause: "Unexpected token",
                    MultipleDefaultsInSwitch: "More than one default clause in switch statement",
                    NewlineAfterThrow: "Illegal newline after throw",
                    NoAsAfterImportNamespace: "Unexpected token",
                    NoCatchOrFinally: "Missing catch or finally after try",
                    ParameterAfterRestParameter: "Rest parameter must be last formal parameter",
                    PropertyAfterRestProperty: "Unexpected token",
                    Redeclaration: "%0 '%1' has already been declared",
                    StaticPrototype: "Classes may not have static property named prototype",
                    StrictCatchVariable: "Catch variable may not be eval or arguments in strict mode",
                    StrictDelete: "Delete of an unqualified identifier in strict mode.",
                    StrictFunction: "In strict mode code, functions can only be declared at top level or inside a block",
                    StrictFunctionName: "Function name may not be eval or arguments in strict mode",
                    StrictLHSAssignment: "Assignment to eval or arguments is not allowed in strict mode",
                    StrictLHSPostfix: "Postfix increment/decrement may not have eval or arguments operand in strict mode",
                    StrictLHSPrefix: "Prefix increment/decrement may not have eval or arguments operand in strict mode",
                    StrictModeWith: "Strict mode code may not include a with statement",
                    StrictOctalLiteral: "Octal literals are not allowed in strict mode.",
                    StrictParamDupe: "Strict mode function may not have duplicate parameter names",
                    StrictParamName: "Parameter name eval or arguments is not allowed in strict mode",
                    StrictReservedWord: "Use of future reserved word in strict mode",
                    StrictVarName: "Variable name may not be eval or arguments in strict mode",
                    TemplateOctalLiteral: "Octal literals are not allowed in template strings.",
                    UnexpectedEOS: "Unexpected end of input",
                    UnexpectedIdentifier: "Unexpected identifier",
                    UnexpectedNumber: "Unexpected number",
                    UnexpectedReserved: "Unexpected reserved word",
                    UnexpectedString: "Unexpected string",
                    UnexpectedTemplate: "Unexpected quasi %0",
                    UnexpectedToken: "Unexpected token %0",
                    UnexpectedTokenIllegal: "Unexpected token ILLEGAL",
                    UnknownLabel: "Undefined label '%0'",
                    UnterminatedRegExp: "Invalid regular expression: missing /"
                }
            })
        },
        "esri/arcade/lib/nodes": function() {
            define(["require", "exports", "./syntax"], function(C, y, b) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.VariableDeclarator = y.VariableDeclaration = y.UpdateExpression = y.UnaryExpression = y.TemplateLiteral = y.TemplateElement = y.StaticMemberExpression = y.SequenceExpression = y.Script = y.ReturnStatement = y.Property = y.ObjectPattern = y.ObjectExpression = y.Module = y.MethodDefinition = y.Literal = y.IfStatement = y.Identifier = y.FunctionExpression = y.FunctionDeclaration = y.ForStatement = y.ForInStatement = y.ExpressionStatement = y.EmptyStatement = y.ContinueStatement = y.ConditionalExpression = y.ComputedMemberExpression = y.CallExpression = y.BreakStatement = y.BlockStatement = y.BinaryExpression = y.AssignmentPattern = y.AssignmentExpression = y.ArrayPattern = y.ArrayExpression = void 0;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.ArrayExpression;
                        this.elements = w
                    }
                }();
                y.ArrayExpression = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.ArrayPattern;
                        this.elements = w
                    }
                }();
                y.ArrayPattern = C;
                C = function() {
                    return function(w, m, l) {
                        this.type = b.Syntax.AssignmentExpression;
                        this.operator = w;
                        this.left = m;
                        this.right = l
                    }
                }();
                y.AssignmentExpression = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.AssignmentPattern;
                        this.left = w;
                        this.right = m
                    }
                }();
                y.AssignmentPattern = C;
                C = function() {
                    return function(w, m, l) {
                        this.type = "||" === w || "\x26\x26" === w ? b.Syntax.LogicalExpression : b.Syntax.BinaryExpression;
                        this.operator = w;
                        this.left = m;
                        this.right = l
                    }
                }();
                y.BinaryExpression = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.BlockStatement;
                        this.body = w
                    }
                }();
                y.BlockStatement = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.BreakStatement;
                        this.label = w
                    }
                }();
                y.BreakStatement = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.CallExpression;
                        this.callee = w;
                        this.arguments = m
                    }
                }();
                y.CallExpression = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.MemberExpression;
                        this.computed = !0;
                        this.object = w;
                        this.property = m
                    }
                }();
                y.ComputedMemberExpression = C;
                C = function() {
                    return function(w, m, l) {
                        this.type = b.Syntax.ConditionalExpression;
                        this.test = w;
                        this.consequent = m;
                        this.alternate = l
                    }
                }();
                y.ConditionalExpression = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.ContinueStatement;
                        this.label = w
                    }
                }();
                y.ContinueStatement = C;
                C = function() {
                    return function() {
                        this.type = b.Syntax.EmptyStatement
                    }
                }();
                y.EmptyStatement = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.ExpressionStatement;
                        this.expression = w
                    }
                }();
                y.ExpressionStatement = C;
                C = function() {
                    return function(w, m, l) {
                        this.type = b.Syntax.ForInStatement;
                        this.left = w;
                        this.right = m;
                        this.body = l;
                        this.each = !1
                    }
                }();
                y.ForInStatement = C;
                C = function() {
                    return function(w, m, l, k) {
                        this.type = b.Syntax.ForStatement;
                        this.init = w;
                        this.test = m;
                        this.update = l;
                        this.body = k
                    }
                }();
                y.ForStatement = C;
                C = function() {
                    return function(w, m, l, k) {
                        this.type = b.Syntax.FunctionDeclaration;
                        this.id = w;
                        this.params = m;
                        this.body = l;
                        this.generator = k;
                        this.async = this.expression = !1
                    }
                }();
                y.FunctionDeclaration = C;
                C = function() {
                    return function(w, m, l, k) {
                        this.type = b.Syntax.FunctionExpression;
                        this.id = w;
                        this.params = m;
                        this.body = l;
                        this.generator = k;
                        this.async = this.expression = !1
                    }
                }();
                y.FunctionExpression = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.Identifier;
                        this.name = w
                    }
                }();
                y.Identifier = C;
                C = function() {
                    return function(w, m, l) {
                        this.type = b.Syntax.IfStatement;
                        this.test = w;
                        this.consequent = m;
                        this.alternate = l
                    }
                }();
                y.IfStatement = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.Literal;
                        this.value = w;
                        this.raw = m
                    }
                }();
                y.Literal = C;
                C = function() {
                    return function(w, m, l, k, h) {
                        this.type = b.Syntax.MethodDefinition;
                        this.key = w;
                        this.computed = m;
                        this.value = l;
                        this.kind = k;
                        this.static = h
                    }
                }();
                y.MethodDefinition = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.Program;
                        this.body = w;
                        this.sourceType = "module"
                    }
                }();
                y.Module = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.ObjectExpression;
                        this.properties = w
                    }
                }();
                y.ObjectExpression = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.ObjectPattern;
                        this.properties = w
                    }
                }();
                y.ObjectPattern = C;
                C = function() {
                    return function(w, m, l, k, h, f) {
                        this.type = b.Syntax.Property;
                        this.key = m;
                        this.computed = l;
                        this.value = k;
                        this.kind = w;
                        this.method = h;
                        this.shorthand = f
                    }
                }();
                y.Property = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.ReturnStatement;
                        this.argument = w
                    }
                }();
                y.ReturnStatement = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.Program;
                        this.body = w;
                        this.sourceType = "script"
                    }
                }();
                y.Script = C;
                C = function() {
                    return function(w) {
                        this.type = b.Syntax.SequenceExpression;
                        this.expressions = w
                    }
                }();
                y.SequenceExpression = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.MemberExpression;
                        this.computed = !1;
                        this.object = w;
                        this.property = m
                    }
                }();
                y.StaticMemberExpression = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.TemplateElement;
                        this.value = w;
                        this.tail = m
                    }
                }();
                y.TemplateElement = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.TemplateLiteral;
                        this.quasis = w;
                        this.expressions = m
                    }
                }();
                y.TemplateLiteral = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.UnaryExpression;
                        this.operator = w;
                        this.argument = m;
                        this.prefix = !0
                    }
                }();
                y.UnaryExpression = C;
                C = function() {
                    return function(w, m, l) {
                        this.type = b.Syntax.UpdateExpression;
                        this.operator = w;
                        this.argument = m;
                        this.prefix = l
                    }
                }();
                y.UpdateExpression = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.VariableDeclaration;
                        this.declarations = w;
                        this.kind = m
                    }
                }();
                y.VariableDeclaration = C;
                C = function() {
                    return function(w, m) {
                        this.type = b.Syntax.VariableDeclarator;
                        this.id = w;
                        this.init = m
                    }
                }();
                y.VariableDeclarator = C
            })
        },
        "esri/arcade/lib/scanner": function() {
            define(["require", "exports", "./assert", "./character", "./messages"], function(C, y, b, w, m) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.Scanner = void 0;
                C = function() {
                    function l(k, h) {
                        this.source = k;
                        this.errorHandler = h;
                        this.isModule = this.trackComment = !1;
                        this.length = k.length;
                        this.index = 0;
                        this.lineNumber = 0 < k.length ? 1 : 0;
                        this.lineStart = 0;
                        this.curlyStack = []
                    }
                    l.prototype.saveState = function() {
                        return {
                            index: this.index,
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            curlyStack: this.curlyStack.slice()
                        }
                    }
                    ;
                    l.prototype.restoreState = function(k) {
                        this.index = k.index;
                        this.lineNumber = k.lineNumber;
                        this.lineStart = k.lineStart;
                        this.curlyStack = k.curlyStack
                    }
                    ;
                    l.prototype.eof = function() {
                        return this.index >= this.length
                    }
                    ;
                    l.prototype.throwUnexpectedToken = function(k) {
                        void 0 === k && (k = m.Messages.UnexpectedTokenIllegal);
                        return this.errorHandler.throwError(this.index, this.lineNumber, this.index - this.lineStart + 1, k)
                    }
                    ;
                    l.prototype.tolerateUnexpectedToken = function(k) {
                        void 0 === k && (k = m.Messages.UnexpectedTokenIllegal);
                        this.errorHandler.tolerateError(this.index, this.lineNumber, this.index - this.lineStart + 1, k)
                    }
                    ;
                    l.prototype.skipSingleLineComment = function(k) {
                        var h = [];
                        if (this.trackComment) {
                            h = [];
                            var f = this.index - k;
                            var d = {
                                start: {
                                    line: this.lineNumber,
                                    column: this.index - this.lineStart - k
                                },
                                end: {}
                            }
                        }
                        for (; !this.eof(); ) {
                            var a = this.source.charCodeAt(this.index);
                            ++this.index;
                            if (w.Character.isLineTerminator(a))
                                return this.trackComment && (d.end = {
                                    line: this.lineNumber,
                                    column: this.index - this.lineStart - 1
                                },
                                k = {
                                    multiLine: !1,
                                    slice: [f + k, this.index - 1],
                                    range: [f, this.index - 1],
                                    loc: d
                                },
                                h.push(k)),
                                13 === a && 10 === this.source.charCodeAt(this.index) && ++this.index,
                                ++this.lineNumber,
                                this.lineStart = this.index,
                                h
                        }
                        this.trackComment && (d.end = {
                            line: this.lineNumber,
                            column: this.index - this.lineStart
                        },
                        k = {
                            multiLine: !1,
                            slice: [f + k, this.index],
                            range: [f, this.index],
                            loc: d
                        },
                        h.push(k));
                        return h
                    }
                    ;
                    l.prototype.skipMultiLineComment = function() {
                        var k = [];
                        if (this.trackComment) {
                            k = [];
                            var h = this.index - 2;
                            var f = {
                                start: {
                                    line: this.lineNumber,
                                    column: this.index - this.lineStart - 2
                                },
                                end: {}
                            }
                        }
                        for (; !this.eof(); ) {
                            var d = this.source.charCodeAt(this.index);
                            if (w.Character.isLineTerminator(d))
                                13 === d && 10 === this.source.charCodeAt(this.index + 1) && ++this.index,
                                ++this.lineNumber,
                                ++this.index,
                                this.lineStart = this.index;
                            else {
                                if (42 === d && 47 === this.source.charCodeAt(this.index + 1))
                                    return this.index += 2,
                                    this.trackComment && (f.end = {
                                        line: this.lineNumber,
                                        column: this.index - this.lineStart
                                    },
                                    h = {
                                        multiLine: !0,
                                        slice: [h + 2, this.index - 2],
                                        range: [h, this.index],
                                        loc: f
                                    },
                                    k.push(h)),
                                    k;
                                ++this.index
                            }
                        }
                        this.trackComment && (f.end = {
                            line: this.lineNumber,
                            column: this.index - this.lineStart
                        },
                        h = {
                            multiLine: !0,
                            slice: [h + 2, this.index],
                            range: [h, this.index],
                            loc: f
                        },
                        k.push(h));
                        this.tolerateUnexpectedToken();
                        return k
                    }
                    ;
                    l.prototype.scanComments = function() {
                        var k;
                        this.trackComment && (k = []);
                        for (var h = 0 === this.index; !this.eof(); ) {
                            var f = this.source.charCodeAt(this.index);
                            if (w.Character.isWhiteSpace(f))
                                ++this.index;
                            else if (w.Character.isLineTerminator(f))
                                ++this.index,
                                13 === f && 10 === this.source.charCodeAt(this.index) && ++this.index,
                                ++this.lineNumber,
                                this.lineStart = this.index,
                                h = !0;
                            else if (47 === f)
                                if (f = this.source.charCodeAt(this.index + 1),
                                47 === f)
                                    this.index += 2,
                                    f = this.skipSingleLineComment(2),
                                    this.trackComment && (k = k.concat(f)),
                                    h = !0;
                                else if (42 === f)
                                    this.index += 2,
                                    f = this.skipMultiLineComment(),
                                    this.trackComment && (k = k.concat(f));
                                else
                                    break;
                            else if (h && 45 === f)
                                if (45 === this.source.charCodeAt(this.index + 1) && 62 === this.source.charCodeAt(this.index + 2))
                                    this.index += 3,
                                    f = this.skipSingleLineComment(3),
                                    this.trackComment && (k = k.concat(f));
                                else
                                    break;
                            else if (60 !== f || this.isModule)
                                break;
                            else if ("!--" === this.source.slice(this.index + 1, this.index + 4))
                                this.index += 4,
                                f = this.skipSingleLineComment(4),
                                this.trackComment && (k = k.concat(f));
                            else
                                break
                        }
                        return k
                    }
                    ;
                    l.prototype.isFutureReservedWord = function(k) {
                        return !1
                    }
                    ;
                    l.prototype.isStrictModeReservedWord = function(k) {
                        return !1
                    }
                    ;
                    l.prototype.isRestrictedWord = function(k) {
                        return !1
                    }
                    ;
                    l.prototype.isKeyword = function(k) {
                        k = k.toLowerCase();
                        switch (k.length) {
                        case 2:
                            return "if" === k || "in" === k;
                        case 3:
                            return "var" === k || "for" === k;
                        case 4:
                            return "else" === k;
                        case 5:
                            return "break" === k;
                        case 6:
                            return "return" === k;
                        case 8:
                            return "function" === k || "continue" === k;
                        default:
                            return !1
                        }
                    }
                    ;
                    l.prototype.codePointAt = function(k) {
                        var h = this.source.charCodeAt(k);
                        55296 <= h && 56319 >= h && (k = this.source.charCodeAt(k + 1),
                        56320 <= k && 57343 >= k && (h = 1024 * (h - 55296) + k - 56320 + 65536));
                        return h
                    }
                    ;
                    l.prototype.scanHexEscape = function(k) {
                        k = "u" === k ? 4 : 2;
                        for (var h = 0, f = 0; f < k; ++f)
                            if (!this.eof() && w.Character.isHexDigit(this.source.charCodeAt(this.index)))
                                h = 16 * h + "0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());
                            else
                                return null;
                        return String.fromCharCode(h)
                    }
                    ;
                    l.prototype.scanUnicodeCodePointEscape = function() {
                        var k = this.source[this.index]
                          , h = 0;
                        for ("}" === k && this.throwUnexpectedToken(); !this.eof(); ) {
                            k = this.source[this.index++];
                            if (!w.Character.isHexDigit(k.charCodeAt(0)))
                                break;
                            h = 16 * h + "0123456789abcdef".indexOf(k.toLowerCase())
                        }
                        (1114111 < h || "}" !== k) && this.throwUnexpectedToken();
                        return w.Character.fromCodePoint(h)
                    }
                    ;
                    l.prototype.getIdentifier = function() {
                        for (var k = this.index++; !this.eof(); ) {
                            var h = this.source.charCodeAt(this.index);
                            if (92 === h || 55296 <= h && 57343 > h)
                                return this.index = k,
                                this.getComplexIdentifier();
                            if (w.Character.isIdentifierPart(h))
                                ++this.index;
                            else
                                break
                        }
                        return this.source.slice(k, this.index)
                    }
                    ;
                    l.prototype.getComplexIdentifier = function() {
                        var k = this.codePointAt(this.index)
                          , h = w.Character.fromCodePoint(k);
                        this.index += h.length;
                        if (92 === k) {
                            117 !== this.source.charCodeAt(this.index) && this.throwUnexpectedToken();
                            ++this.index;
                            if ("{" === this.source[this.index]) {
                                ++this.index;
                                var f = this.scanUnicodeCodePointEscape()
                            } else
                                f = this.scanHexEscape("u"),
                                null !== f && "\\" !== f && w.Character.isIdentifierStart(f.charCodeAt(0)) || this.throwUnexpectedToken();
                            h = f
                        }
                        for (; !this.eof(); ) {
                            k = this.codePointAt(this.index);
                            if (!w.Character.isIdentifierPart(k))
                                break;
                            f = w.Character.fromCodePoint(k);
                            h += f;
                            this.index += f.length;
                            92 === k && (h = h.substr(0, h.length - 1),
                            117 !== this.source.charCodeAt(this.index) && this.throwUnexpectedToken(),
                            ++this.index,
                            "{" === this.source[this.index] ? (++this.index,
                            f = this.scanUnicodeCodePointEscape()) : (f = this.scanHexEscape("u"),
                            null !== f && "\\" !== f && w.Character.isIdentifierPart(f.charCodeAt(0)) || this.throwUnexpectedToken()),
                            h += f)
                        }
                        return h
                    }
                    ;
                    l.prototype.octalToDecimal = function(k) {
                        var h = "0" !== k
                          , f = "01234567".indexOf(k);
                        !this.eof() && w.Character.isOctalDigit(this.source.charCodeAt(this.index)) && (h = !0,
                        f = 8 * f + "01234567".indexOf(this.source[this.index++]),
                        0 <= "0123".indexOf(k) && !this.eof() && w.Character.isOctalDigit(this.source.charCodeAt(this.index)) && (f = 8 * f + "01234567".indexOf(this.source[this.index++])));
                        return {
                            code: f,
                            octal: h
                        }
                    }
                    ;
                    l.prototype.scanIdentifier = function() {
                        var k = this.index
                          , h = 92 === this.source.charCodeAt(k) ? this.getComplexIdentifier() : this.getIdentifier();
                        var f = 1 === h.length ? 3 : this.isKeyword(h) ? 4 : "null" === h.toLowerCase() ? 5 : "true" === h.toLowerCase() || "false" === h.toLowerCase() ? 1 : 3;
                        if (3 !== f && k + h.length !== this.index) {
                            var d = this.index;
                            this.index = k;
                            this.tolerateUnexpectedToken(m.Messages.InvalidEscapedReservedWord);
                            this.index = d
                        }
                        return {
                            type: f,
                            value: h,
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: k,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.scanPunctuator = function() {
                        var k = this.index
                          , h = this.source[this.index];
                        switch (h) {
                        case "(":
                        case "{":
                            "{" === h && this.curlyStack.push("{");
                            ++this.index;
                            break;
                        case ".":
                            ++this.index;
                            "." === this.source[this.index] && "." === this.source[this.index + 1] && (this.index += 2,
                            h = "...");
                            break;
                        case "}":
                            ++this.index;
                            this.curlyStack.pop();
                            break;
                        case ")":
                        case ";":
                        case ",":
                        case "[":
                        case "]":
                        case ":":
                        case "?":
                        case "~":
                            ++this.index;
                            break;
                        default:
                            h = this.source.substr(this.index, 4),
                            "\x3e\x3e\x3e\x3d" === h ? this.index += 4 : (h = h.substr(0, 3),
                            "\x3d\x3d\x3d" === h || "!\x3d\x3d" === h || "\x3e\x3e\x3e" === h || "\x3c\x3c\x3d" === h || "\x3e\x3e\x3d" === h || "**\x3d" === h ? this.index += 3 : (h = h.substr(0, 2),
                            "\x26\x26" === h || "||" === h || "\x3d\x3d" === h || "!\x3d" === h || "+\x3d" === h || "-\x3d" === h || "*\x3d" === h || "/\x3d" === h || "++" === h || "--" === h || "\x3c\x3c" === h || "\x3e\x3e" === h || "\x26\x3d" === h || "|\x3d" === h || "^\x3d" === h || "%\x3d" === h || "\x3c\x3d" === h || "\x3e\x3d" === h || "\x3d\x3e" === h || "**" === h ? this.index += 2 : (h = this.source[this.index],
                            0 <= "\x3c\x3e\x3d!+-*%\x26|^/".indexOf(h) && ++this.index)))
                        }
                        this.index === k && this.throwUnexpectedToken();
                        return {
                            type: 7,
                            value: h,
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: k,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.scanHexLiteral = function(k) {
                        for (var h = ""; !this.eof() && w.Character.isHexDigit(this.source.charCodeAt(this.index)); )
                            h += this.source[this.index++];
                        0 === h.length && this.throwUnexpectedToken();
                        w.Character.isIdentifierStart(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken();
                        return {
                            type: 6,
                            value: parseInt("0x" + h, 16),
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: k,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.scanBinaryLiteral = function(k) {
                        for (var h = "", f; !this.eof(); ) {
                            f = this.source[this.index];
                            if ("0" !== f && "1" !== f)
                                break;
                            h += this.source[this.index++]
                        }
                        0 === h.length && this.throwUnexpectedToken();
                        this.eof() || (f = this.source.charCodeAt(this.index),
                        (w.Character.isIdentifierStart(f) || w.Character.isDecimalDigit(f)) && this.throwUnexpectedToken());
                        return {
                            type: 6,
                            value: parseInt(h, 2),
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: k,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.scanOctalLiteral = function(k, h) {
                        var f = ""
                          , d = !1;
                        w.Character.isOctalDigit(k.charCodeAt(0)) ? (d = !0,
                        f = "0" + this.source[this.index++]) : ++this.index;
                        for (; !this.eof() && w.Character.isOctalDigit(this.source.charCodeAt(this.index)); )
                            f += this.source[this.index++];
                        d || 0 !== f.length || this.throwUnexpectedToken();
                        (w.Character.isIdentifierStart(this.source.charCodeAt(this.index)) || w.Character.isDecimalDigit(this.source.charCodeAt(this.index))) && this.throwUnexpectedToken();
                        return {
                            type: 6,
                            value: parseInt(f, 8),
                            octal: d,
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: h,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.scanNumericLiteral = function() {
                        var k = this.index
                          , h = this.source[k];
                        b.assert(w.Character.isDecimalDigit(h.charCodeAt(0)) || "." === h, "Numeric literal must start with a decimal digit or a decimal point");
                        var f = "";
                        if ("." !== h) {
                            f = this.source[this.index++];
                            h = this.source[this.index];
                            if ("0" === f) {
                                if ("x" === h || "X" === h)
                                    return ++this.index,
                                    this.scanHexLiteral(k);
                                if ("b" === h || "B" === h)
                                    return ++this.index,
                                    this.scanBinaryLiteral(k);
                                if ("o" === h || "O" === h)
                                    return this.scanOctalLiteral(h, k)
                            }
                            for (; w.Character.isDecimalDigit(this.source.charCodeAt(this.index)); )
                                f += this.source[this.index++];
                            h = this.source[this.index]
                        }
                        if ("." === h) {
                            for (f += this.source[this.index++]; w.Character.isDecimalDigit(this.source.charCodeAt(this.index)); )
                                f += this.source[this.index++];
                            h = this.source[this.index]
                        }
                        if ("e" === h || "E" === h) {
                            f += this.source[this.index++];
                            h = this.source[this.index];
                            if ("+" === h || "-" === h)
                                f += this.source[this.index++];
                            if (w.Character.isDecimalDigit(this.source.charCodeAt(this.index)))
                                for (; w.Character.isDecimalDigit(this.source.charCodeAt(this.index)); )
                                    f += this.source[this.index++];
                            else
                                this.throwUnexpectedToken()
                        }
                        w.Character.isIdentifierStart(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken();
                        return {
                            type: 6,
                            value: parseFloat(f),
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: k,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.scanStringLiteral = function() {
                        var k = this.index
                          , h = this.source[k];
                        b.assert("'" === h || '"' === h, "String literal must starts with a quote");
                        ++this.index;
                        for (var f = !1, d = ""; !this.eof(); ) {
                            var a = this.source[this.index++];
                            if (a === h) {
                                h = "";
                                break
                            }
                            if ("\\" === a)
                                if ((a = this.source[this.index++]) && w.Character.isLineTerminator(a.charCodeAt(0)))
                                    ++this.lineNumber,
                                    "\r" === a && "\n" === this.source[this.index] && ++this.index,
                                    this.lineStart = this.index;
                                else
                                    switch (a) {
                                    case "u":
                                        "{" === this.source[this.index] ? (++this.index,
                                        d += this.scanUnicodeCodePointEscape()) : (a = this.scanHexEscape(a),
                                        null === a && this.throwUnexpectedToken(),
                                        d += a);
                                        break;
                                    case "x":
                                        a = this.scanHexEscape(a);
                                        null === a && this.throwUnexpectedToken(m.Messages.InvalidHexEscapeSequence);
                                        d += a;
                                        break;
                                    case "n":
                                        d += "\n";
                                        break;
                                    case "r":
                                        d += "\r";
                                        break;
                                    case "t":
                                        d += "\t";
                                        break;
                                    case "b":
                                        d += "\b";
                                        break;
                                    case "f":
                                        d += "\f";
                                        break;
                                    case "v":
                                        d += "\x0B";
                                        break;
                                    case "8":
                                    case "9":
                                        d += a;
                                        this.tolerateUnexpectedToken();
                                        break;
                                    default:
                                        a && w.Character.isOctalDigit(a.charCodeAt(0)) ? (a = this.octalToDecimal(a),
                                        f = a.octal || f,
                                        d += String.fromCharCode(a.code)) : d += a
                                    }
                            else if (w.Character.isLineTerminator(a.charCodeAt(0)))
                                break;
                            else
                                d += a
                        }
                        "" !== h && (this.index = k,
                        this.throwUnexpectedToken());
                        return {
                            type: 8,
                            value: d,
                            octal: f,
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: k,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.scanTemplate = function() {
                        var k = ""
                          , h = !1
                          , f = this.index
                          , d = "`" === this.source[f]
                          , a = !1
                          , c = 2;
                        for (++this.index; !this.eof(); ) {
                            var e = this.source[this.index++];
                            if ("`" === e) {
                                c = 1;
                                h = a = !0;
                                break
                            }
                            if ("$" === e) {
                                if ("{" === this.source[this.index]) {
                                    this.curlyStack.push("${");
                                    ++this.index;
                                    h = !0;
                                    break
                                }
                                k += e
                            } else if ("\\" === e)
                                if (e = this.source[this.index++],
                                w.Character.isLineTerminator(e.charCodeAt(0)))
                                    ++this.lineNumber,
                                    "\r" === e && "\n" === this.source[this.index] && ++this.index,
                                    this.lineStart = this.index;
                                else
                                    switch (e) {
                                    case "n":
                                        k += "\n";
                                        break;
                                    case "r":
                                        k += "\r";
                                        break;
                                    case "t":
                                        k += "\t";
                                        break;
                                    case "u":
                                        if ("{" === this.source[this.index])
                                            ++this.index,
                                            k += this.scanUnicodeCodePointEscape();
                                        else {
                                            var n = this.index
                                              , t = this.scanHexEscape(e);
                                            null !== t ? k += t : (this.index = n,
                                            k += e)
                                        }
                                        break;
                                    case "x":
                                        e = this.scanHexEscape(e);
                                        null === e && this.throwUnexpectedToken(m.Messages.InvalidHexEscapeSequence);
                                        k += e;
                                        break;
                                    case "b":
                                        k += "\b";
                                        break;
                                    case "f":
                                        k += "\f";
                                        break;
                                    case "v":
                                        k += "\v";
                                        break;
                                    default:
                                        "0" === e ? (w.Character.isDecimalDigit(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken(m.Messages.TemplateOctalLiteral),
                                        k += "\x00") : w.Character.isOctalDigit(e.charCodeAt(0)) ? this.throwUnexpectedToken(m.Messages.TemplateOctalLiteral) : k += e
                                    }
                            else
                                w.Character.isLineTerminator(e.charCodeAt(0)) ? (++this.lineNumber,
                                "\r" === e && "\n" === this.source[this.index] && ++this.index,
                                this.lineStart = this.index,
                                k += "\n") : k += e
                        }
                        h || this.throwUnexpectedToken();
                        d || this.curlyStack.pop();
                        return {
                            type: 10,
                            value: this.source.slice(f + 1, this.index - c),
                            cooked: k,
                            head: d,
                            tail: a,
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: f,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.testRegExp = function(k, h) {
                        var f = this
                          , d = k;
                        0 <= h.indexOf("u") && (d = d.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g, function(a, c, e) {
                            a = parseInt(c || e, 16);
                            1114111 < a && f.throwUnexpectedToken(m.Messages.InvalidRegExp);
                            return 65535 >= a ? String.fromCharCode(a) : "\uffff"
                        }).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g, "\uffff"));
                        try {
                            RegExp(d)
                        } catch (a) {
                            this.throwUnexpectedToken(m.Messages.InvalidRegExp)
                        }
                        try {
                            return new RegExp(k,h)
                        } catch (a) {
                            return null
                        }
                    }
                    ;
                    l.prototype.scanRegExpBody = function() {
                        var k = this.source[this.index];
                        b.assert("/" === k, "Regular expression literal must start with a slash");
                        for (var h = this.source[this.index++], f = !1, d = !1; !this.eof(); )
                            if (k = this.source[this.index++],
                            h += k,
                            "\\" === k)
                                k = this.source[this.index++],
                                w.Character.isLineTerminator(k.charCodeAt(0)) && this.throwUnexpectedToken(m.Messages.UnterminatedRegExp),
                                h += k;
                            else if (w.Character.isLineTerminator(k.charCodeAt(0)))
                                this.throwUnexpectedToken(m.Messages.UnterminatedRegExp);
                            else if (f)
                                "]" === k && (f = !1);
                            else {
                                if ("/" === k) {
                                    d = !0;
                                    break
                                }
                                "[" === k && (f = !0)
                            }
                        d || this.throwUnexpectedToken(m.Messages.UnterminatedRegExp);
                        return h.substr(1, h.length - 2)
                    }
                    ;
                    l.prototype.scanRegExpFlags = function() {
                        for (var k = ""; !this.eof(); ) {
                            var h = this.source[this.index];
                            if (!w.Character.isIdentifierPart(h.charCodeAt(0)))
                                break;
                            ++this.index;
                            if ("\\" !== h || this.eof())
                                k += h;
                            else {
                                h = this.source[this.index];
                                if ("u" === h) {
                                    ++this.index;
                                    h = this.index;
                                    var f = this.scanHexEscape("u");
                                    if (null !== f)
                                        for (k += f; h < this.index; ++h)
                                            ;
                                    else
                                        this.index = h,
                                        k += "u"
                                }
                                this.tolerateUnexpectedToken()
                            }
                        }
                        return k
                    }
                    ;
                    l.prototype.scanRegExp = function() {
                        var k = this.index
                          , h = this.scanRegExpBody()
                          , f = this.scanRegExpFlags()
                          , d = this.testRegExp(h, f);
                        return {
                            type: 9,
                            value: "",
                            pattern: h,
                            flags: f,
                            regex: d,
                            lineNumber: this.lineNumber,
                            lineStart: this.lineStart,
                            start: k,
                            end: this.index
                        }
                    }
                    ;
                    l.prototype.lex = function() {
                        if (this.eof())
                            return {
                                type: 2,
                                value: "",
                                lineNumber: this.lineNumber,
                                lineStart: this.lineStart,
                                start: this.index,
                                end: this.index
                            };
                        var k = this.source.charCodeAt(this.index);
                        return w.Character.isIdentifierStart(k) ? this.scanIdentifier() : 40 === k || 41 === k || 59 === k ? this.scanPunctuator() : 39 === k || 34 === k ? this.scanStringLiteral() : 46 === k ? w.Character.isDecimalDigit(this.source.charCodeAt(this.index + 1)) ? this.scanNumericLiteral() : this.scanPunctuator() : w.Character.isDecimalDigit(k) ? this.scanNumericLiteral() : 96 === k || 125 === k && "${" === this.curlyStack[this.curlyStack.length - 1] ? this.scanTemplate() : 55296 <= k && 57343 > k && w.Character.isIdentifierStart(this.codePointAt(this.index)) ? this.scanIdentifier() : this.scanPunctuator()
                    }
                    ;
                    return l
                }();
                y.Scanner = C
            })
        },
        "esri/arcade/lib/character": function() {
            define(["require", "exports"], function(C, y) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.Character = void 0;
                var b = /[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/
                  , w = /[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
                y.Character = {
                    fromCodePoint: function(m) {
                        return 65536 > m ? String.fromCharCode(m) : String.fromCharCode(55296 + (m - 65536 >> 10)) + String.fromCharCode(56320 + (m - 65536 & 1023))
                    },
                    isWhiteSpace: function(m) {
                        return 32 === m || 9 === m || 11 === m || 12 === m || 160 === m || 5760 <= m && 0 <= [5760, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8199, 8200, 8201, 8202, 8239, 8287, 12288, 65279].indexOf(m)
                    },
                    isLineTerminator: function(m) {
                        return 10 === m || 13 === m || 8232 === m || 8233 === m
                    },
                    isIdentifierStart: function(m) {
                        return 36 === m || 95 === m || 65 <= m && 90 >= m || 97 <= m && 122 >= m || 92 === m || 128 <= m && b.test(y.Character.fromCodePoint(m))
                    },
                    isIdentifierPart: function(m) {
                        return 36 === m || 95 === m || 65 <= m && 90 >= m || 97 <= m && 122 >= m || 48 <= m && 57 >= m || 92 === m || 128 <= m && w.test(y.Character.fromCodePoint(m))
                    },
                    isDecimalDigit: function(m) {
                        return 48 <= m && 57 >= m
                    },
                    isHexDigit: function(m) {
                        return 48 <= m && 57 >= m || 65 <= m && 70 >= m || 97 <= m && 102 >= m
                    },
                    isOctalDigit: function(m) {
                        return 48 <= m && 55 >= m
                    }
                }
            })
        },
        "esri/arcade/lib/token": function() {
            define(["require", "exports"], function(C, y) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.TokenName = y.Token = void 0;
                C = y.Token || (y.Token = {});
                C[C.BooleanLiteral = 1] = "BooleanLiteral";
                C[C.EOF = 2] = "EOF";
                C[C.Identifier = 3] = "Identifier";
                C[C.Keyword = 4] = "Keyword";
                C[C.NullLiteral = 5] = "NullLiteral";
                C[C.NumericLiteral = 6] = "NumericLiteral";
                C[C.Punctuator = 7] = "Punctuator";
                C[C.StringLiteral = 8] = "StringLiteral";
                C[C.RegularExpression = 9] = "RegularExpression";
                C[C.Template = 10] = "Template";
                y.TokenName = {};
                y.TokenName[1] = "Boolean";
                y.TokenName[2] = "\x3cend\x3e";
                y.TokenName[3] = "Identifier";
                y.TokenName[4] = "Keyword";
                y.TokenName[5] = "Null";
                y.TokenName[6] = "Numeric";
                y.TokenName[7] = "Punctuator";
                y.TokenName[8] = "String";
                y.TokenName[9] = "RegularExpression";
                y.TokenName[10] = "Template"
            })
        },
        "esri/arcade/lib/tokenizer": function() {
            define(["require", "exports", "./error-handler", "./scanner", "./token"], function(C, y, b, w, m) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                y.Tokenizer = void 0;
                var l = function() {
                    function k() {
                        this.values = [];
                        this.curly = this.paren = -1
                    }
                    k.prototype.beforeFunctionExpression = function(h) {
                        return 0 <= "( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d **\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * ** / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ").indexOf(h)
                    }
                    ;
                    k.prototype.isRegexStart = function() {
                        var h = this.values[this.values.length - 1]
                          , f = null !== h;
                        switch (h) {
                        case "this":
                        case "]":
                            f = !1;
                            break;
                        case ")":
                            h = this.values[this.paren - 1];
                            f = "if" === h || "while" === h || "for" === h || "with" === h;
                            break;
                        case "}":
                            f = !0,
                            "function" === this.values[this.curly - 3] ? f = (h = this.values[this.curly - 4]) ? !this.beforeFunctionExpression(h) : !1 : "function" === this.values[this.curly - 4] && (f = (h = this.values[this.curly - 5]) ? !this.beforeFunctionExpression(h) : !0)
                        }
                        return f
                    }
                    ;
                    k.prototype.push = function(h) {
                        7 === h.type || 4 === h.type ? ("{" === h.value ? this.curly = this.values.length : "(" === h.value && (this.paren = this.values.length),
                        this.values.push(h.value)) : this.values.push(null)
                    }
                    ;
                    return k
                }();
                C = function() {
                    function k(h, f) {
                        this.errorHandler = new b.ErrorHandler;
                        this.errorHandler.tolerant = f ? "boolean" === typeof f.tolerant && f.tolerant : !1;
                        this.scanner = new w.Scanner(h,this.errorHandler);
                        this.scanner.trackComment = f ? "boolean" === typeof f.comment && f.comment : !1;
                        this.trackRange = f ? "boolean" === typeof f.range && f.range : !1;
                        this.trackLoc = f ? "boolean" === typeof f.loc && f.loc : !1;
                        this.buffer = [];
                        this.reader = new l
                    }
                    k.prototype.errors = function() {
                        return this.errorHandler.errors
                    }
                    ;
                    k.prototype.getNextToken = function() {
                        if (0 === this.buffer.length) {
                            var h = this.scanner.scanComments();
                            if (this.scanner.trackComment)
                                for (var f = 0; f < h.length; ++f) {
                                    var d = h[f]
                                      , a = this.scanner.source.slice(d.slice[0], d.slice[1]);
                                    a = {
                                        type: d.multiLine ? "BlockComment" : "LineComment",
                                        value: a
                                    };
                                    this.trackRange && (a.range = d.range);
                                    this.trackLoc && (a.loc = d.loc);
                                    this.buffer.push(a)
                                }
                            if (!this.scanner.eof()) {
                                h = void 0;
                                this.trackLoc && (h = {
                                    start: {
                                        line: this.scanner.lineNumber,
                                        column: this.scanner.index - this.scanner.lineStart
                                    },
                                    end: {}
                                });
                                f = void 0;
                                if ("/" === this.scanner.source[this.scanner.index] && this.reader.isRegexStart()) {
                                    d = this.scanner.saveState();
                                    try {
                                        f = this.scanner.scanRegExp()
                                    } catch (c) {
                                        this.scanner.restoreState(d),
                                        f = this.scanner.lex()
                                    }
                                } else
                                    f = this.scanner.lex();
                                this.reader.push(f);
                                d = {
                                    type: m.TokenName[f.type],
                                    value: this.scanner.source.slice(f.start, f.end)
                                };
                                this.trackRange && (d.range = [f.start, f.end]);
                                this.trackLoc && (h.end = {
                                    line: this.scanner.lineNumber,
                                    column: this.scanner.index - this.scanner.lineStart
                                },
                                d.loc = h);
                                9 === f.type && (d.regex = {
                                    pattern: f.pattern,
                                    flags: f.flags
                                });
                                this.buffer.push(d)
                            }
                        }
                        return this.buffer.shift()
                    }
                    ;
                    return k
                }();
                y.Tokenizer = C
            })
        },
        "esri/moment": function() {
            define(["require", "exports", "./plugins/moment!"], function(C, y, b) {
                return b
            })
        },
        "esri/plugins/moment": function() {
            define(["require", "exports", "dojo/_base/kernel", "moment/moment"], function(C, y, b, w) {
                Object.defineProperty(y, "__esModule", {
                    value: !0
                });
                var m = {
                    ar: 1,
                    "ar-dz": 1,
                    "ar-kw": 1,
                    "ar-ly": 1,
                    "ar-ma": 1,
                    "ar-sa": 1,
                    "ar-tn": 1,
                    bs: 1,
                    ca: 1,
                    cs: 1,
                    da: 1,
                    de: 1,
                    "de-at": 1,
                    "de-ch": 1,
                    el: 1,
                    "en-au": 1,
                    "en-ca": 1,
                    "en-gb": 1,
                    "en-ie": 1,
                    "en-il": 1,
                    "en-in": 1,
                    "en-nz": 1,
                    "en-sg": 1,
                    es: 1,
                    "es-do": 1,
                    "es-mx": 1,
                    "es-us": 1,
                    et: 1,
                    fi: 1,
                    fr: 1,
                    "fr-ca": 1,
                    "fr-ch": 1,
                    he: 1,
                    hr: 1,
                    hu: 1,
                    id: 1,
                    it: 1,
                    "it-ch": 1,
                    ja: 1,
                    ko: 1,
                    lt: 1,
                    lv: 1,
                    nb: 1,
                    nl: 1,
                    "nl-be": 1,
                    pl: 1,
                    pt: 1,
                    "pt-br": 1,
                    ro: 1,
                    ru: 1,
                    sk: 1,
                    sl: 1,
                    sr: 1,
                    "sr-cyrl": 1,
                    sv: 1,
                    th: 1,
                    tr: 1,
                    uk: 1,
                    vi: 1,
                    "zh-cn": 1,
                    "zh-hk": 1,
                    "zh-mo": 1,
                    "zh-tw": 1
                };
                y.load = function(l, k, h) {
                    l = b.locale;
                    var f = l in m;
                    if (!f) {
                        var d = l.split("-");
                        1 < d.length && d[0]in m && (l = d[0],
                        f = !0)
                    }
                    f ? k(["moment/locale/" + l], function() {
                        h(w)
                    }) : h(w)
                }
            })
        },
        "moment/moment": function() {
            (function(C, y) {
                "object" === typeof exports && "undefined" !== typeof module ? module.exports = y() : "function" === typeof define && define.amd ? define(y) : C.moment = y()
            }
            )(this, function() {
                function C() {
                    return Gc.apply(null, arguments)
                }
                function y(F) {
                    return F instanceof Array || "[object Array]" === Object.prototype.toString.call(F)
                }
                function b(F) {
                    return null != F && "[object Object]" === Object.prototype.toString.call(F)
                }
                function w(F, N) {
                    return Object.prototype.hasOwnProperty.call(F, N)
                }
                function m(F) {
                    if (Object.getOwnPropertyNames)
                        return 0 === Object.getOwnPropertyNames(F).length;
                    for (var N in F)
                        if (w(F, N))
                            return !1;
                    return !0
                }
                function l(F) {
                    return void 0 === F
                }
                function k(F) {
                    return "number" === typeof F || "[object Number]" === Object.prototype.toString.call(F)
                }
                function h(F) {
                    return F instanceof Date || "[object Date]" === Object.prototype.toString.call(F)
                }
                function f(F, N) {
                    var W = [], la;
                    for (la = 0; la < F.length; ++la)
                        W.push(N(F[la], la));
                    return W
                }
                function d(F, N) {
                    for (var W in N)
                        w(N, W) && (F[W] = N[W]);
                    w(N, "toString") && (F.toString = N.toString);
                    w(N, "valueOf") && (F.valueOf = N.valueOf);
                    return F
                }
                function a(F, N, W, la) {
                    return Ja(F, N, W, la, !0).utc()
                }
                function c(F) {
                    null == F._pf && (F._pf = {
                        empty: !1,
                        unusedTokens: [],
                        unusedInput: [],
                        overflow: -2,
                        charsLeftOver: 0,
                        nullInput: !1,
                        invalidEra: null,
                        invalidMonth: null,
                        invalidFormat: !1,
                        userInvalidated: !1,
                        iso: !1,
                        parsedDateParts: [],
                        era: null,
                        meridiem: null,
                        rfc2822: !1,
                        weekdayMismatch: !1
                    });
                    return F._pf
                }
                function e(F) {
                    if (null == F._isValid) {
                        var N = c(F)
                          , W = ua.call(N.parsedDateParts, function(la) {
                            return null != la
                        });
                        W = !isNaN(F._d.getTime()) && 0 > N.overflow && !N.empty && !N.invalidEra && !N.invalidMonth && !N.invalidWeekday && !N.weekdayMismatch && !N.nullInput && !N.invalidFormat && !N.userInvalidated && (!N.meridiem || N.meridiem && W);
                        F._strict && (W = W && 0 === N.charsLeftOver && 0 === N.unusedTokens.length && void 0 === N.bigHour);
                        if (null != Object.isFrozen && Object.isFrozen(F))
                            return W;
                        F._isValid = W
                    }
                    return F._isValid
                }
                function n(F) {
                    var N = a(NaN);
                    null != F ? d(c(N), F) : c(N).userInvalidated = !0;
                    return N
                }
                function t(F, N) {
                    var W;
                    l(N._isAMomentObject) || (F._isAMomentObject = N._isAMomentObject);
                    l(N._i) || (F._i = N._i);
                    l(N._f) || (F._f = N._f);
                    l(N._l) || (F._l = N._l);
                    l(N._strict) || (F._strict = N._strict);
                    l(N._tzm) || (F._tzm = N._tzm);
                    l(N._isUTC) || (F._isUTC = N._isUTC);
                    l(N._offset) || (F._offset = N._offset);
                    l(N._pf) || (F._pf = c(N));
                    l(N._locale) || (F._locale = N._locale);
                    if (0 < za.length)
                        for (W = 0; W < za.length; W++) {
                            var la = za[W];
                            var Ha = N[la];
                            l(Ha) || (F[la] = Ha)
                        }
                    return F
                }
                function g(F) {
                    t(this, F);
                    this._d = new Date(null != F._d ? F._d.getTime() : NaN);
                    this.isValid() || (this._d = new Date(NaN));
                    !1 === Ka && (Ka = !0,
                    C.updateOffset(this),
                    Ka = !1)
                }
                function q(F) {
                    return F instanceof g || null != F && null != F._isAMomentObject
                }
                function x(F) {
                    !1 === C.suppressDeprecationWarnings && "undefined" !== typeof console && console.warn && console.warn("Deprecation warning: " + F)
                }
                function v(F, N) {
                    var W = !0;
                    return d(function() {
                        null != C.deprecationHandler && C.deprecationHandler(null, F);
                        if (W) {
                            var la = [], Ha, Qa;
                            for (Ha = 0; Ha < arguments.length; Ha++) {
                                var Va = "";
                                if ("object" === typeof arguments[Ha]) {
                                    Va += "\n[" + Ha + "] ";
                                    for (Qa in arguments[0])
                                        w(arguments[0], Qa) && (Va += Qa + ": " + arguments[0][Qa] + ", ");
                                    Va = Va.slice(0, -2)
                                } else
                                    Va = arguments[Ha];
                                la.push(Va)
                            }
                            x(F + "\nArguments: " + Array.prototype.slice.call(la).join("") + "\n" + Error().stack);
                            W = !1
                        }
                        return N.apply(this, arguments)
                    }, N)
                }
                function z(F, N) {
                    null != C.deprecationHandler && C.deprecationHandler(F, N);
                    Ia[F] || (x(N),
                    Ia[F] = !0)
                }
                function u(F) {
                    return "undefined" !== typeof Function && F instanceof Function || "[object Function]" === Object.prototype.toString.call(F)
                }
                function p(F, N) {
                    var W = d({}, F), la;
                    for (la in N)
                        w(N, la) && (b(F[la]) && b(N[la]) ? (W[la] = {},
                        d(W[la], F[la]),
                        d(W[la], N[la])) : null != N[la] ? W[la] = N[la] : delete W[la]);
                    for (la in F)
                        w(F, la) && !w(N, la) && b(F[la]) && (W[la] = d({}, W[la]));
                    return W
                }
                function r(F) {
                    null != F && this.set(F)
                }
                function B(F, N, W) {
                    var la = "" + Math.abs(F);
                    return (0 <= F ? W ? "+" : "" : "-") + Math.pow(10, Math.max(0, N - la.length)).toString().substr(1) + la
                }
                function D(F, N, W, la) {
                    var Ha = la;
                    "string" === typeof la && (Ha = function() {
                        return this[la]()
                    }
                    );
                    F && ($a[F] = Ha);
                    N && ($a[N[0]] = function() {
                        return B(Ha.apply(this, arguments), N[1], N[2])
                    }
                    );
                    W && ($a[W] = function() {
                        return this.localeData().ordinal(Ha.apply(this, arguments), F)
                    }
                    )
                }
                function G(F) {
                    return F.match(/\[[\s\S]/) ? F.replace(/^\[|\]$/g, "") : F.replace(/\\/g, "")
                }
                function A(F) {
                    var N = F.match(La), W;
                    var la = 0;
                    for (W = N.length; la < W; la++)
                        N[la] = $a[N[la]] ? $a[N[la]] : G(N[la]);
                    return function(Ha) {
                        var Qa = "", Va;
                        for (Va = 0; Va < W; Va++)
                            Qa += u(N[Va]) ? N[Va].call(Ha, F) : N[Va];
                        return Qa
                    }
                }
                function E(F, N) {
                    if (!F.isValid())
                        return F.localeData().invalidDate();
                    N = H(N, F.localeData());
                    Wa[N] = Wa[N] || A(N);
                    return Wa[N](F)
                }
                function H(F, N) {
                    function W(Ha) {
                        return N.longDateFormat(Ha) || Ha
                    }
                    var la = 5;
                    for (Sa.lastIndex = 0; 0 <= la && Sa.test(F); )
                        F = F.replace(Sa, W),
                        Sa.lastIndex = 0,
                        --la;
                    return F
                }
                function J(F, N) {
                    var W = F.toLowerCase();
                    Ta[W] = Ta[W + "s"] = Ta[N] = F
                }
                function O(F) {
                    return "string" === typeof F ? Ta[F] || Ta[F.toLowerCase()] : void 0
                }
                function V(F) {
                    var N = {}, W, la;
                    for (la in F)
                        w(F, la) && (W = O(la)) && (N[W] = F[la]);
                    return N
                }
                function aa(F) {
                    var N = [], W;
                    for (W in F)
                        w(F, W) && N.push({
                            unit: W,
                            priority: Za[W]
                        });
                    N.sort(function(la, Ha) {
                        return la.priority - Ha.priority
                    });
                    return N
                }
                function da(F) {
                    return 0 === F % 4 && 0 !== F % 100 || 0 === F % 400
                }
                function ea(F) {
                    return 0 > F ? Math.ceil(F) || 0 : Math.floor(F)
                }
                function Y(F) {
                    F = +F;
                    var N = 0;
                    0 !== F && isFinite(F) && (N = ea(F));
                    return N
                }
                function ia(F, N) {
                    return function(W) {
                        return null != W ? (wa(this, F, W),
                        C.updateOffset(this, N),
                        this) : qa(this, F)
                    }
                }
                function qa(F, N) {
                    return F.isValid() ? F._d["get" + (F._isUTC ? "UTC" : "") + N]() : NaN
                }
                function wa(F, N, W) {
                    if (F.isValid() && !isNaN(W))
                        if ("FullYear" === N && da(F.year()) && 1 === F.month() && 29 === F.date())
                            W = Y(W),
                            F._d["set" + (F._isUTC ? "UTC" : "") + N](W, F.month(), na(W, F.month()));
                        else
                            F._d["set" + (F._isUTC ? "UTC" : "") + N](W)
                }
                function K(F, N, W) {
                    tc[F] = u(N) ? N : function(la, Ha) {
                        return la && W ? W : N
                    }
                }
                function Z(F, N) {
                    return w(tc, F) ? tc[F](N._strict, N._locale) : new RegExp(pa(F))
                }
                function pa(F) {
                    return L(F.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(N, W, la, Ha, Qa) {
                        return W || la || Ha || Qa
                    }))
                }
                function L(F) {
                    return F.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$\x26")
                }
                function R(F, N) {
                    var W, la = N;
                    "string" === typeof F && (F = [F]);
                    k(N) && (la = function(Ha, Qa) {
                        Qa[N] = Y(Ha)
                    }
                    );
                    for (W = 0; W < F.length; W++)
                        uc[F[W]] = la
                }
                function ha(F, N) {
                    R(F, function(W, la, Ha, Qa) {
                        Ha._w = Ha._w || {};
                        N(W, Ha._w, Ha, Qa)
                    })
                }
                function na(F, N) {
                    if (isNaN(F) || isNaN(N))
                        return NaN;
                    var W = (N % 12 + 12) % 12;
                    return 1 === W ? da(F + (N - W) / 12) ? 29 : 28 : 31 - W % 7 % 2
                }
                function ta(F, N) {
                    if (!F.isValid())
                        return F;
                    if ("string" === typeof N)
                        if (/^\d+$/.test(N))
                            N = Y(N);
                        else if (N = F.localeData().monthsParse(N),
                        !k(N))
                            return F;
                    var W = Math.min(F.date(), na(F.year(), N));
                    F._d["set" + (F._isUTC ? "UTC" : "") + "Month"](N, W);
                    return F
                }
                function xa(F) {
                    return null != F ? (ta(this, F),
                    C.updateOffset(this, !0),
                    this) : qa(this, "Month")
                }
                function Aa() {
                    function F(Va, hb) {
                        return hb.length - Va.length
                    }
                    var N = [], W = [], la = [], Ha;
                    for (Ha = 0; 12 > Ha; Ha++) {
                        var Qa = a([2E3, Ha]);
                        N.push(this.monthsShort(Qa, ""));
                        W.push(this.months(Qa, ""));
                        la.push(this.months(Qa, ""));
                        la.push(this.monthsShort(Qa, ""))
                    }
                    N.sort(F);
                    W.sort(F);
                    la.sort(F);
                    for (Ha = 0; 12 > Ha; Ha++)
                        N[Ha] = L(N[Ha]),
                        W[Ha] = L(W[Ha]);
                    for (Ha = 0; 24 > Ha; Ha++)
                        la[Ha] = L(la[Ha]);
                    this._monthsShortRegex = this._monthsRegex = new RegExp("^(" + la.join("|") + ")","i");
                    this._monthsStrictRegex = new RegExp("^(" + W.join("|") + ")","i");
                    this._monthsShortStrictRegex = new RegExp("^(" + N.join("|") + ")","i")
                }
                function ca(F, N, W, la, Ha, Qa, Va) {
                    100 > F && 0 <= F ? (N = new Date(F + 400,N,W,la,Ha,Qa,Va),
                    isFinite(N.getFullYear()) && N.setFullYear(F)) : N = new Date(F,N,W,la,Ha,Qa,Va);
                    return N
                }
                function ja(F) {
                    if (100 > F && 0 <= F) {
                        var N = Array.prototype.slice.call(arguments);
                        N[0] = F + 400;
                        N = new Date(Date.UTC.apply(null, N));
                        isFinite(N.getUTCFullYear()) && N.setUTCFullYear(F)
                    } else
                        N = new Date(Date.UTC.apply(null, arguments));
                    return N
                }
                function X(F, N, W) {
                    W = 7 + N - W;
                    return -((7 + ja(F, 0, W).getUTCDay() - N) % 7) + W - 1
                }
                function oa(F, N, W, la, Ha) {
                    W = (7 + W - la) % 7;
                    la = X(F, la, Ha);
                    la = 1 + 7 * (N - 1) + W + la;
                    0 >= la ? (N = F - 1,
                    F = (da(N) ? 366 : 365) + la) : la > (da(F) ? 366 : 365) ? (N = F + 1,
                    F = la - (da(F) ? 366 : 365)) : (N = F,
                    F = la);
                    return {
                        year: N,
                        dayOfYear: F
                    }
                }
                function ka(F, N, W) {
                    var la = X(F.year(), N, W);
                    la = Math.floor((F.dayOfYear() - la - 1) / 7) + 1;
                    1 > la ? (F = F.year() - 1,
                    N = la + Ea(F, N, W)) : la > Ea(F.year(), N, W) ? (N = la - Ea(F.year(), N, W),
                    F = F.year() + 1) : (F = F.year(),
                    N = la);
                    return {
                        week: N,
                        year: F
                    }
                }
                function Ea(F, N, W) {
                    var la = X(F, N, W);
                    N = X(F + 1, N, W);
                    return ((da(F) ? 366 : 365) - la + N) / 7
                }
                function T(F, N) {
                    return F.slice(N, 7).concat(F.slice(0, N))
                }
                function U(F, N, W) {
                    var la;
                    F = F.toLocaleLowerCase();
                    if (!this._weekdaysParse)
                        for (this._weekdaysParse = [],
                        this._shortWeekdaysParse = [],
                        this._minWeekdaysParse = [],
                        la = 0; 7 > la; ++la) {
                            var Ha = a([2E3, 1]).day(la);
                            this._minWeekdaysParse[la] = this.weekdaysMin(Ha, "").toLocaleLowerCase();
                            this._shortWeekdaysParse[la] = this.weekdaysShort(Ha, "").toLocaleLowerCase();
                            this._weekdaysParse[la] = this.weekdays(Ha, "").toLocaleLowerCase()
                        }
                    if (W)
                        N = "dddd" === N ? wb.call(this._weekdaysParse, F) : "ddd" === N ? wb.call(this._shortWeekdaysParse, F) : wb.call(this._minWeekdaysParse, F);
                    else if ("dddd" === N) {
                        N = wb.call(this._weekdaysParse, F);
                        if (-1 !== N)
                            return N;
                        N = wb.call(this._shortWeekdaysParse, F);
                        if (-1 !== N)
                            return N;
                        N = wb.call(this._minWeekdaysParse, F)
                    } else if ("ddd" === N) {
                        N = wb.call(this._shortWeekdaysParse, F);
                        if (-1 !== N)
                            return N;
                        N = wb.call(this._weekdaysParse, F);
                        if (-1 !== N)
                            return N;
                        N = wb.call(this._minWeekdaysParse, F)
                    } else {
                        N = wb.call(this._minWeekdaysParse, F);
                        if (-1 !== N)
                            return N;
                        N = wb.call(this._weekdaysParse, F);
                        if (-1 !== N)
                            return N;
                        N = wb.call(this._shortWeekdaysParse, F)
                    }
                    return -1 !== N ? N : null
                }
                function ma() {
                    function F(ib, xb) {
                        return xb.length - ib.length
                    }
                    var N = [], W = [], la = [], Ha = [], Qa;
                    for (Qa = 0; 7 > Qa; Qa++) {
                        var Va = a([2E3, 1]).day(Qa);
                        var hb = L(this.weekdaysMin(Va, ""));
                        var pb = L(this.weekdaysShort(Va, ""));
                        Va = L(this.weekdays(Va, ""));
                        N.push(hb);
                        W.push(pb);
                        la.push(Va);
                        Ha.push(hb);
                        Ha.push(pb);
                        Ha.push(Va)
                    }
                    N.sort(F);
                    W.sort(F);
                    la.sort(F);
                    Ha.sort(F);
                    this._weekdaysMinRegex = this._weekdaysShortRegex = this._weekdaysRegex = new RegExp("^(" + Ha.join("|") + ")","i");
                    this._weekdaysStrictRegex = new RegExp("^(" + la.join("|") + ")","i");
                    this._weekdaysShortStrictRegex = new RegExp("^(" + W.join("|") + ")","i");
                    this._weekdaysMinStrictRegex = new RegExp("^(" + N.join("|") + ")","i")
                }
                function sa() {
                    return this.hours() % 12 || 12
                }
                function ya(F, N) {
                    D(F, 0, 0, function() {
                        return this.localeData().meridiem(this.hours(), this.minutes(), N)
                    })
                }
                function Oa(F, N) {
                    return N._meridiemParse
                }
                function Ua(F) {
                    return F ? F.toLowerCase().replace("_", "-") : F
                }
                function Xa(F) {
                    var N = null;
                    if (void 0 === sb[F] && "undefined" !== typeof module && module && module.exports)
                        try {
                            N = gc._abbr;
                            var W = require;
                            W("./locale/" + F);
                            Ma(N)
                        } catch (la) {
                            sb[F] = null
                        }
                    return sb[F]
                }
                function Ma(F, N) {
                    F && ((N = l(N) ? Q(F) : I(F, N)) ? gc = N : "undefined" !== typeof console && console.warn && console.warn("Locale " + F + " not found. Did you forget to load it?"));
                    return gc._abbr
                }
                function I(F, N) {
                    if (null !== N) {
                        var W = xc;
                        N.abbr = F;
                        if (null != sb[F])
                            z("defineLocaleOverride", "use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
                            W = sb[F]._config;
                        else if (null != N.parentLocale)
                            if (null != sb[N.parentLocale])
                                W = sb[N.parentLocale]._config;
                            else if (W = Xa(N.parentLocale),
                            null != W)
                                W = W._config;
                            else
                                return hc[N.parentLocale] || (hc[N.parentLocale] = []),
                                hc[N.parentLocale].push({
                                    name: F,
                                    config: N
                                }),
                                null;
                        sb[F] = new r(p(W, N));
                        hc[F] && hc[F].forEach(function(la) {
                            I(la.name, la.config)
                        });
                        Ma(F);
                        return sb[F]
                    }
                    delete sb[F];
                    return null
                }
                function Q(F) {
                    var N;
                    F && F._locale && F._locale._abbr && (F = F._locale._abbr);
                    if (!F)
                        return gc;
                    if (!y(F)) {
                        if (N = Xa(F))
                            return N;
                        F = [F]
                    }
                    a: {
                        N = 0;
                        for (var W, la, Ha, Qa; N < F.length; ) {
                            Qa = Ua(F[N]).split("-");
                            W = Qa.length;
                            for (la = (la = Ua(F[N + 1])) ? la.split("-") : null; 0 < W; ) {
                                if (Ha = Xa(Qa.slice(0, W).join("-"))) {
                                    F = Ha;
                                    break a
                                }
                                if (Ha = la && la.length >= W) {
                                    b: {
                                        Ha = void 0;
                                        var Va = Math.min(Qa.length, la.length);
                                        for (Ha = 0; Ha < Va; Ha += 1)
                                            if (Qa[Ha] !== la[Ha])
                                                break b;
                                        Ha = Va
                                    }
                                    Ha = Ha >= W - 1
                                }
                                if (Ha)
                                    break;
                                W--
                            }
                            N++
                        }
                        F = gc
                    }
                    return F
                }
                function ba(F) {
                    var N;
                    (N = F._a) && -2 === c(F).overflow && (N = 0 > N[Mb] || 11 < N[Mb] ? Mb : 1 > N[Lb] || N[Lb] > na(N[Cb], N[Mb]) ? Lb : 0 > N[yb] || 24 < N[yb] || 24 === N[yb] && (0 !== N[Hb] || 0 !== N[Nb] || 0 !== N[Ub]) ? yb : 0 > N[Hb] || 59 < N[Hb] ? Hb : 0 > N[Nb] || 59 < N[Nb] ? Nb : 0 > N[Ub] || 999 < N[Ub] ? Ub : -1,
                    c(F)._overflowDayOfYear && (N < Cb || N > Lb) && (N = Lb),
                    c(F)._overflowWeeks && -1 === N && (N = Hc),
                    c(F)._overflowWeekday && -1 === N && (N = Ic),
                    c(F).overflow = N);
                    return F
                }
                function M(F) {
                    var N;
                    var W = F._i;
                    var la = Jc.exec(W) || Kc.exec(W);
                    if (la) {
                        c(F).iso = !0;
                        W = 0;
                        for (N = oc.length; W < N; W++)
                            if (oc[W][1].exec(la[1])) {
                                var Ha = oc[W][0];
                                var Qa = !1 !== oc[W][2];
                                break
                            }
                        if (null == Ha)
                            F._isValid = !1;
                        else {
                            if (la[3]) {
                                W = 0;
                                for (N = vc.length; W < N; W++)
                                    if (vc[W][1].exec(la[3])) {
                                        var Va = (la[2] || " ") + vc[W][0];
                                        break
                                    }
                                if (null == Va) {
                                    F._isValid = !1;
                                    return
                                }
                            }
                            if (Qa || null == Va) {
                                if (la[4])
                                    if (Lc.exec(la[4]))
                                        var hb = "Z";
                                    else {
                                        F._isValid = !1;
                                        return
                                    }
                                F._f = Ha + (Va || "") + (hb || "");
                                Ca(F)
                            } else
                                F._isValid = !1
                        }
                    } else
                        F._isValid = !1
                }
                function S(F) {
                    var N = Mc.exec(F._i.replace(/\([^)]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").replace(/^\s\s*/, "").replace(/\s\s*$/, ""));
                    if (N) {
                        var W = N[3]
                          , la = N[2]
                          , Ha = N[5]
                          , Qa = N[6]
                          , Va = N[7]
                          , hb = parseInt(N[4], 10);
                        W = [49 >= hb ? 2E3 + hb : 999 >= hb ? 1900 + hb : hb, yc.indexOf(W), parseInt(la, 10), parseInt(Ha, 10), parseInt(Qa, 10)];
                        Va && W.push(parseInt(Va, 10));
                        a: {
                            if (Va = N[1])
                                if (Va = zc.indexOf(Va),
                                la = (new Date(W[0],W[1],W[2])).getDay(),
                                Va !== la) {
                                    c(F).weekdayMismatch = !0;
                                    Va = F._isValid = !1;
                                    break a
                                }
                            Va = !0
                        }
                        Va && (F._a = W,
                        (Va = N[8]) ? N = Nc[Va] : N[9] ? N = 0 : (N = parseInt(N[10], 10),
                        Va = N % 100,
                        N = (N - Va) / 100 * 60 + Va),
                        F._tzm = N,
                        F._d = ja.apply(null, F._a),
                        F._d.setUTCMinutes(F._d.getUTCMinutes() - F._tzm),
                        c(F).rfc2822 = !0)
                    } else
                        F._isValid = !1
                }
                function fa(F) {
                    var N = Oc.exec(F._i);
                    null !== N ? F._d = new Date(+N[1]) : (M(F),
                    !1 === F._isValid && (delete F._isValid,
                    S(F),
                    !1 === F._isValid && (delete F._isValid,
                    F._strict ? F._isValid = !1 : C.createFromInputFallback(F))))
                }
                function ra(F, N, W) {
                    return null != F ? F : null != N ? N : W
                }
                function va(F) {
                    var N = [];
                    if (!F._d) {
                        var W = new Date(C.now());
                        W = F._useUTC ? [W.getUTCFullYear(), W.getUTCMonth(), W.getUTCDate()] : [W.getFullYear(), W.getMonth(), W.getDate()];
                        if (F._w && null == F._a[Lb] && null == F._a[Mb]) {
                            var la = F._w;
                            if (null != la.GG || null != la.W || null != la.E) {
                                var Ha = 1;
                                var Qa = 4;
                                var Va = ra(la.GG, F._a[Cb], ka(Pa(), 1, 4).year);
                                var hb = ra(la.W, 1);
                                var pb = ra(la.E, 1);
                                if (1 > pb || 7 < pb)
                                    var ib = !0
                            } else if (Ha = F._locale._week.dow,
                            Qa = F._locale._week.doy,
                            hb = ka(Pa(), Ha, Qa),
                            Va = ra(la.gg, F._a[Cb], hb.year),
                            hb = ra(la.w, hb.week),
                            null != la.d) {
                                if (pb = la.d,
                                0 > pb || 6 < pb)
                                    ib = !0
                            } else if (null != la.e) {
                                if (pb = la.e + Ha,
                                0 > la.e || 6 < la.e)
                                    ib = !0
                            } else
                                pb = Ha;
                            1 > hb || hb > Ea(Va, Ha, Qa) ? c(F)._overflowWeeks = !0 : null != ib ? c(F)._overflowWeekday = !0 : (ib = oa(Va, hb, pb, Ha, Qa),
                            F._a[Cb] = ib.year,
                            F._dayOfYear = ib.dayOfYear)
                        }
                        if (null != F._dayOfYear) {
                            ib = ra(F._a[Cb], W[Cb]);
                            if (F._dayOfYear > (da(ib) ? 366 : 365) || 0 === F._dayOfYear)
                                c(F)._overflowDayOfYear = !0;
                            ib = ja(ib, 0, F._dayOfYear);
                            F._a[Mb] = ib.getUTCMonth();
                            F._a[Lb] = ib.getUTCDate()
                        }
                        for (ib = 0; 3 > ib && null == F._a[ib]; ++ib)
                            F._a[ib] = N[ib] = W[ib];
                        for (; 7 > ib; ib++)
                            F._a[ib] = N[ib] = null == F._a[ib] ? 2 === ib ? 1 : 0 : F._a[ib];
                        24 === F._a[yb] && 0 === F._a[Hb] && 0 === F._a[Nb] && 0 === F._a[Ub] && (F._nextDay = !0,
                        F._a[yb] = 0);
                        F._d = (F._useUTC ? ja : ca).apply(null, N);
                        N = F._useUTC ? F._d.getUTCDay() : F._d.getDay();
                        null != F._tzm && F._d.setUTCMinutes(F._d.getUTCMinutes() - F._tzm);
                        F._nextDay && (F._a[yb] = 24);
                        F._w && "undefined" !== typeof F._w.d && F._w.d !== N && (c(F).weekdayMismatch = !0)
                    }
                }
                function Ca(F) {
                    if (F._f === C.ISO_8601)
                        M(F);
                    else if (F._f === C.RFC_2822)
                        S(F);
                    else {
                        F._a = [];
                        c(F).empty = !0;
                        var N = "" + F._i, W, la, Ha = N.length, Qa = 0;
                        var Va = H(F._f, F._locale).match(La) || [];
                        for (W = 0; W < Va.length; W++) {
                            var hb = Va[W];
                            if (la = (N.match(Z(hb, F)) || [])[0]) {
                                var pb = N.substr(0, N.indexOf(la));
                                0 < pb.length && c(F).unusedInput.push(pb);
                                N = N.slice(N.indexOf(la) + la.length);
                                Qa += la.length
                            }
                            if ($a[hb]) {
                                if (la ? c(F).empty = !1 : c(F).unusedTokens.push(hb),
                                pb = F,
                                null != la && w(uc, hb))
                                    uc[hb](la, pb._a, pb, hb)
                            } else
                                F._strict && !la && c(F).unusedTokens.push(hb)
                        }
                        c(F).charsLeftOver = Ha - Qa;
                        0 < N.length && c(F).unusedInput.push(N);
                        12 >= F._a[yb] && !0 === c(F).bigHour && 0 < F._a[yb] && (c(F).bigHour = void 0);
                        c(F).parsedDateParts = F._a.slice(0);
                        c(F).meridiem = F._meridiem;
                        N = F._a;
                        W = yb;
                        Ha = F._locale;
                        Va = F._a[yb];
                        Qa = F._meridiem;
                        null != Qa && (null != Ha.meridiemHour ? Va = Ha.meridiemHour(Va, Qa) : null != Ha.isPM && ((Ha = Ha.isPM(Qa)) && 12 > Va && (Va += 12),
                        Ha || 12 !== Va || (Va = 0)));
                        N[W] = Va;
                        N = c(F).era;
                        null !== N && (F._a[Cb] = F._locale.erasConvertYear(N, F._a[Cb]));
                        va(F);
                        ba(F)
                    }
                }
                function Da(F) {
                    if (!F._d) {
                        var N = V(F._i);
                        F._a = f([N.year, N.month, void 0 === N.day ? N.date : N.day, N.hour, N.minute, N.second, N.millisecond], function(W) {
                            return W && parseInt(W, 10)
                        });
                        va(F)
                    }
                }
                function Ra(F) {
                    var N = F._i
                      , W = F._f;
                    F._locale = F._locale || Q(F._l);
                    if (null === N || void 0 === W && "" === N)
                        return n({
                            nullInput: !0
                        });
                    "string" === typeof N && (F._i = N = F._locale.preparse(N));
                    if (q(N))
                        return new g(ba(N));
                    if (h(N))
                        F._d = N;
                    else if (y(W)) {
                        var la = !1;
                        if (0 === F._f.length)
                            c(F).invalidFormat = !0,
                            F._d = new Date(NaN);
                        else {
                            for (N = 0; N < F._f.length; N++) {
                                W = 0;
                                var Ha = !1;
                                var Qa = t({}, F);
                                null != F._useUTC && (Qa._useUTC = F._useUTC);
                                Qa._f = F._f[N];
                                Ca(Qa);
                                e(Qa) && (Ha = !0);
                                W += c(Qa).charsLeftOver;
                                W += 10 * c(Qa).unusedTokens.length;
                                c(Qa).score = W;
                                if (la)
                                    W < Va && (Va = W,
                                    hb = Qa);
                                else if (null == Va || W < Va || Ha) {
                                    var Va = W;
                                    var hb = Qa;
                                    Ha && (la = !0)
                                }
                            }
                            d(F, hb || Qa)
                        }
                    } else
                        W ? Ca(F) : Na(F);
                    e(F) || (F._d = null);
                    return F
                }
                function Na(F) {
                    var N = F._i;
                    l(N) ? F._d = new Date(C.now()) : h(N) ? F._d = new Date(N.valueOf()) : "string" === typeof N ? fa(F) : y(N) ? (F._a = f(N.slice(0), function(W) {
                        return parseInt(W, 10)
                    }),
                    va(F)) : b(N) ? Da(F) : k(N) ? F._d = new Date(N) : C.createFromInputFallback(F)
                }
                function Ja(F, N, W, la, Ha) {
                    var Qa = {};
                    if (!0 === N || !1 === N)
                        la = N,
                        N = void 0;
                    if (!0 === W || !1 === W)
                        la = W,
                        W = void 0;
                    if (b(F) && m(F) || y(F) && 0 === F.length)
                        F = void 0;
                    Qa._isAMomentObject = !0;
                    Qa._useUTC = Qa._isUTC = Ha;
                    Qa._l = W;
                    Qa._i = F;
                    Qa._f = N;
                    Qa._strict = la;
                    F = new g(ba(Ra(Qa)));
                    F._nextDay && (F.add(1, "d"),
                    F._nextDay = void 0);
                    return F
                }
                function Pa(F, N, W, la) {
                    return Ja(F, N, W, la, !1)
                }
                function eb(F, N) {
                    var W;
                    1 === N.length && y(N[0]) && (N = N[0]);
                    if (!N.length)
                        return Pa();
                    var la = N[0];
                    for (W = 1; W < N.length; ++W)
                        if (!N[W].isValid() || N[W][F](la))
                            la = N[W];
                    return la
                }
                function bb(F) {
                    var N = V(F);
                    F = N.year || 0;
                    var W = N.quarter || 0
                      , la = N.month || 0
                      , Ha = N.week || N.isoWeek || 0
                      , Qa = N.day || 0
                      , Va = N.hour || 0
                      , hb = N.minute || 0
                      , pb = N.second || 0
                      , ib = N.millisecond || 0;
                    a: {
                        var xb, Ac = !1;
                        for (xb in N)
                            if (w(N, xb) && (-1 === wb.call(ic, xb) || null != N[xb] && isNaN(N[xb]))) {
                                N = !1;
                                break a
                            }
                        for (xb = 0; xb < ic.length; ++xb)
                            if (N[ic[xb]]) {
                                if (Ac) {
                                    N = !1;
                                    break a
                                }
                                parseFloat(N[ic[xb]]) !== Y(N[ic[xb]]) && (Ac = !0)
                            }
                        N = !0
                    }
                    this._isValid = N;
                    this._milliseconds = +ib + 1E3 * pb + 6E4 * hb + 36E5 * Va;
                    this._days = +Qa + 7 * Ha;
                    this._months = +la + 3 * W + 12 * F;
                    this._data = {};
                    this._locale = Q();
                    this._bubble()
                }
                function gb(F) {
                    return F instanceof bb
                }
                function cb(F) {
                    return 0 > F ? -1 * Math.round(-1 * F) : Math.round(F)
                }
                function kb(F, N) {
                    D(F, 0, 0, function() {
                        var W = this.utcOffset()
                          , la = "+";
                        0 > W && (W = -W,
                        la = "-");
                        return la + B(~~(W / 60), 2) + N + B(~~W % 60, 2)
                    })
                }
                function ub(F, N) {
                    F = (N || "").match(F);
                    if (null === F)
                        return null;
                    F = ((F[F.length - 1] || []) + "").match(Pc) || ["-", 0, 0];
                    N = +(60 * F[1]) + Y(F[2]);
                    return 0 === N ? 0 : "+" === F[0] ? N : -N
                }
                function ob(F, N) {
                    return N._isUTC ? (N = N.clone(),
                    F = (q(F) || h(F) ? F.valueOf() : Pa(F).valueOf()) - N.valueOf(),
                    N._d.setTime(N._d.valueOf() + F),
                    C.updateOffset(N, !1),
                    N) : Pa(F).local()
                }
                function db() {
                    return this.isValid() ? this._isUTC && 0 === this._offset : !1
                }
                function jb(F, N) {
                    var W = F
                      , la = null;
                    gb(F) ? W = {
                        ms: F._milliseconds,
                        d: F._days,
                        M: F._months
                    } : k(F) || !isNaN(+F) ? (W = {},
                    N ? W[N] = +F : W.milliseconds = +F) : (la = Qc.exec(F)) ? (W = "-" === la[1] ? -1 : 1,
                    W = {
                        y: 0,
                        d: Y(la[Lb]) * W,
                        h: Y(la[yb]) * W,
                        m: Y(la[Hb]) * W,
                        s: Y(la[Nb]) * W,
                        ms: Y(cb(1E3 * la[Ub])) * W
                    }) : (la = Rc.exec(F)) ? (W = "-" === la[1] ? -1 : 1,
                    W = {
                        y: nb(la[2], W),
                        M: nb(la[3], W),
                        w: nb(la[4], W),
                        d: nb(la[5], W),
                        h: nb(la[6], W),
                        m: nb(la[7], W),
                        s: nb(la[8], W)
                    }) : null == W ? W = {} : "object" === typeof W && ("from"in W || "to"in W) && (la = Pa(W.from),
                    W = Pa(W.to),
                    la.isValid() && W.isValid() ? (W = ob(W, la),
                    la.isBefore(W) ? W = Jb(la, W) : (W = Jb(W, la),
                    W.milliseconds = -W.milliseconds,
                    W.months = -W.months),
                    la = W) : la = {
                        milliseconds: 0,
                        months: 0
                    },
                    W = {},
                    W.ms = la.milliseconds,
                    W.M = la.months);
                    W = new bb(W);
                    gb(F) && w(F, "_locale") && (W._locale = F._locale);
                    gb(F) && w(F, "_isValid") && (W._isValid = F._isValid);
                    return W
                }
                function nb(F, N) {
                    F = F && parseFloat(F.replace(",", "."));
                    return (isNaN(F) ? 0 : F) * N
                }
                function Jb(F, N) {
                    var W = {};
                    W.months = N.month() - F.month() + 12 * (N.year() - F.year());
                    F.clone().add(W.months, "M").isAfter(N) && --W.months;
                    W.milliseconds = +N - +F.clone().add(W.months, "M");
                    return W
                }
                function Ab(F, N) {
                    return function(W, la) {
                        if (null !== la && !isNaN(+la)) {
                            z(N, "moment()." + N + "(period, number) is deprecated. Please use moment()." + N + "(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");
                            var Ha = W;
                            W = la;
                            la = Ha
                        }
                        W = jb(W, la);
                        vb(this, W, F);
                        return this
                    }
                }
                function vb(F, N, W, la) {
                    var Ha = N._milliseconds
                      , Qa = cb(N._days);
                    N = cb(N._months);
                    F.isValid() && (la = null == la ? !0 : la,
                    N && ta(F, qa(F, "Month") + N * W),
                    Qa && wa(F, "Date", qa(F, "Date") + Qa * W),
                    Ha && F._d.setTime(F._d.valueOf() + Ha * W),
                    la && C.updateOffset(F, Qa || N))
                }
                function Tb(F) {
                    return "string" === typeof F || F instanceof String
                }
                function zb(F) {
                    var N = y(F)
                      , W = !1;
                    N && (W = 0 === F.filter(function(la) {
                        return !k(la) && Tb(F)
                    }).length);
                    return N && W
                }
                function Db(F, N) {
                    if (F.date() < N.date())
                        return -Db(N, F);
                    var W = 12 * (N.year() - F.year()) + (N.month() - F.month())
                      , la = F.clone().add(W, "months");
                    0 > N - la ? (F = F.clone().add(W - 1, "months"),
                    N = (N - la) / (la - F)) : (F = F.clone().add(W + 1, "months"),
                    N = (N - la) / (F - la));
                    return -(W + N) || 0
                }
                function Kb(F) {
                    if (void 0 === F)
                        return this._locale._abbr;
                    F = Q(F);
                    null != F && (this._locale = F);
                    return this
                }
                function Qb() {
                    return this._locale
                }
                function Gb(F, N) {
                    return (F % N + N) % N
                }
                function Rb(F, N, W) {
                    return 100 > F && 0 <= F ? new Date(F + 400,N,W) - Bc : (new Date(F,N,W)).valueOf()
                }
                function jc(F, N, W) {
                    return 100 > F && 0 <= F ? Date.UTC(F + 400, N, W) - Bc : Date.UTC(F, N, W)
                }
                function $b(F, N) {
                    return N.erasAbbrRegex(F)
                }
                function ac() {
                    var F = [], N = [], W = [], la = [], Ha, Qa = this.eras();
                    var Va = 0;
                    for (Ha = Qa.length; Va < Ha; ++Va)
                        N.push(L(Qa[Va].name)),
                        F.push(L(Qa[Va].abbr)),
                        W.push(L(Qa[Va].narrow)),
                        la.push(L(Qa[Va].name)),
                        la.push(L(Qa[Va].abbr)),
                        la.push(L(Qa[Va].narrow));
                    this._erasRegex = new RegExp("^(" + la.join("|") + ")","i");
                    this._erasNameRegex = new RegExp("^(" + N.join("|") + ")","i");
                    this._erasAbbrRegex = new RegExp("^(" + F.join("|") + ")","i");
                    this._erasNarrowRegex = new RegExp("^(" + W.join("|") + ")","i")
                }
                function Vb(F, N) {
                    D(0, [F, F.length], 0, N)
                }
                function kc(F, N, W, la, Ha) {
                    if (null == F)
                        return ka(this, la, Ha).year;
                    var Qa = Ea(F, la, Ha);
                    N > Qa && (N = Qa);
                    F = oa(F, N, W, la, Ha);
                    F = ja(F.year, 0, F.dayOfYear);
                    this.year(F.getUTCFullYear());
                    this.month(F.getUTCMonth());
                    this.date(F.getUTCDate());
                    return this
                }
                function bc(F, N) {
                    N[Ub] = Y(1E3 * ("0." + F))
                }
                function Eb(F) {
                    return F
                }
                function Wb(F, N, W, la) {
                    var Ha = Q();
                    N = a().set(la, N);
                    return Ha[W](N, F)
                }
                function lc(F, N, W) {
                    k(F) && (N = F,
                    F = void 0);
                    F = F || "";
                    if (null != N)
                        return Wb(F, N, W, "month");
                    var la = [];
                    for (N = 0; 12 > N; N++)
                        la[N] = Wb(F, N, W, "month");
                    return la
                }
                function cc(F, N, W, la) {
                    "boolean" !== typeof F && (W = N = F,
                    F = !1);
                    k(N) && (W = N,
                    N = void 0);
                    N = N || "";
                    var Ha = Q();
                    F = F ? Ha._week.dow : 0;
                    Ha = [];
                    if (null != W)
                        return Wb(N, (W + F) % 7, la, "day");
                    for (W = 0; 7 > W; W++)
                        Ha[W] = Wb(N, (W + F) % 7, la, "day");
                    return Ha
                }
                function mc(F, N, W, la) {
                    N = jb(N, W);
                    F._milliseconds += la * N._milliseconds;
                    F._days += la * N._days;
                    F._months += la * N._months;
                    return F._bubble()
                }
                function pc(F) {
                    return 0 > F ? Math.floor(F) : Math.ceil(F)
                }
                function Ib(F) {
                    return function() {
                        return this.as(F)
                    }
                }
                function rb(F) {
                    return function() {
                        return this.isValid() ? this._data[F] : NaN
                    }
                }
                function P(F, N, W, la, Ha) {
                    return Ha.relativeTime(N || 1, !!W, F, la)
                }
                function Fa(F) {
                    return (0 < F) - (0 > F) || +F
                }
                function Ba() {
                    if (!this.isValid())
                        return this.localeData().invalidDate();
                    var F = wc(this._milliseconds) / 1E3
                      , N = wc(this._days)
                      , W = wc(this._months)
                      , la = this.asSeconds();
                    if (!la)
                        return "P0D";
                    var Ha = ea(F / 60);
                    var Qa = ea(Ha / 60);
                    F %= 60;
                    Ha %= 60;
                    var Va = ea(W / 12);
                    W %= 12;
                    var hb = F ? F.toFixed(3).replace(/\.?0+$/, "") : "";
                    var pb = 0 > la ? "-" : "";
                    var ib = Fa(this._months) !== Fa(la) ? "-" : "";
                    var xb = Fa(this._days) !== Fa(la) ? "-" : "";
                    la = Fa(this._milliseconds) !== Fa(la) ? "-" : "";
                    return pb + "P" + (Va ? ib + Va + "Y" : "") + (W ? ib + W + "M" : "") + (N ? xb + N + "D" : "") + (Qa || Ha || F ? "T" : "") + (Qa ? la + Qa + "H" : "") + (Ha ? la + Ha + "M" : "") + (F ? la + hb + "S" : "")
                }
                var ua = Array.prototype.some ? Array.prototype.some : function(F) {
                    var N = Object(this), W = N.length >>> 0, la;
                    for (la = 0; la < W; la++)
                        if (la in N && F.call(this, N[la], la, N))
                            return !0;
                    return !1
                }
                ;
                var za = C.momentProperties = []
                  , Ka = !1
                  , Ia = {};
                C.suppressDeprecationWarnings = !1;
                C.deprecationHandler = null;
                var Ga = Object.keys ? Object.keys : function(F) {
                    var N, W = [];
                    for (N in F)
                        w(F, N) && W.push(N);
                    return W
                }
                ;
                var La = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g
                  , Sa = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g
                  , Wa = {}
                  , $a = {}
                  , Ta = {}
                  , Za = {}
                  , ab = /\d/
                  , fb = /\d\d/
                  , Bb = /\d{3}/
                  , dc = /\d{4}/
                  , Xb = /[+-]?\d{6}/
                  , qb = /\d\d?/
                  , tb = /\d\d\d\d?/
                  , Yb = /\d\d\d\d\d\d?/
                  , Fb = /\d{1,3}/
                  , Zb = /\d{1,4}/
                  , qc = /[+-]?\d{1,6}/
                  , ec = /\d+/
                  , rc = /[+-]?\d+/
                  , Sc = /Z|[+-]\d\d:?\d\d/gi
                  , sc = /Z|[+-]\d\d(?::?\d\d)?/gi
                  , nc = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;
                var tc = {};
                var uc = {}
                  , Cb = 0
                  , Mb = 1
                  , Lb = 2
                  , yb = 3
                  , Hb = 4
                  , Nb = 5
                  , Ub = 6
                  , Hc = 7
                  , Ic = 8;
                var wb = Array.prototype.indexOf ? Array.prototype.indexOf : function(F) {
                    var N;
                    for (N = 0; N < this.length; ++N)
                        if (this[N] === F)
                            return N;
                    return -1
                }
                ;
                D("M", ["MM", 2], "Mo", function() {
                    return this.month() + 1
                });
                D("MMM", 0, 0, function(F) {
                    return this.localeData().monthsShort(this, F)
                });
                D("MMMM", 0, 0, function(F) {
                    return this.localeData().months(this, F)
                });
                J("month", "M");
                Za.month = 8;
                K("M", qb);
                K("MM", qb, fb);
                K("MMM", function(F, N) {
                    return N.monthsShortRegex(F)
                });
                K("MMMM", function(F, N) {
                    return N.monthsRegex(F)
                });
                R(["M", "MM"], function(F, N) {
                    N[Mb] = Y(F) - 1
                });
                R(["MMM", "MMMM"], function(F, N, W, la) {
                    la = W._locale.monthsParse(F, la, W._strict);
                    null != la ? N[Mb] = la : c(W).invalidMonth = F
                });
                var yc = "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")
                  , Cc = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;
                D("Y", 0, 0, function() {
                    var F = this.year();
                    return 9999 >= F ? B(F, 4) : "+" + F
                });
                D(0, ["YY", 2], 0, function() {
                    return this.year() % 100
                });
                D(0, ["YYYY", 4], 0, "year");
                D(0, ["YYYYY", 5], 0, "year");
                D(0, ["YYYYYY", 6, !0], 0, "year");
                J("year", "y");
                Za.year = 1;
                K("Y", rc);
                K("YY", qb, fb);
                K("YYYY", Zb, dc);
                K("YYYYY", qc, Xb);
                K("YYYYYY", qc, Xb);
                R(["YYYYY", "YYYYYY"], Cb);
                R("YYYY", function(F, N) {
                    N[Cb] = 2 === F.length ? C.parseTwoDigitYear(F) : Y(F)
                });
                R("YY", function(F, N) {
                    N[Cb] = C.parseTwoDigitYear(F)
                });
                R("Y", function(F, N) {
                    N[Cb] = parseInt(F, 10)
                });
                C.parseTwoDigitYear = function(F) {
                    return Y(F) + (68 < Y(F) ? 1900 : 2E3)
                }
                ;
                var Dc = ia("FullYear", !0);
                D("w", ["ww", 2], "wo", "week");
                D("W", ["WW", 2], "Wo", "isoWeek");
                J("week", "w");
                J("isoWeek", "W");
                Za.week = 5;
                Za.isoWeek = 5;
                K("w", qb);
                K("ww", qb, fb);
                K("W", qb);
                K("WW", qb, fb);
                ha(["w", "ww", "W", "WW"], function(F, N, W, la) {
                    N[la.substr(0, 1)] = Y(F)
                });
                D("d", 0, "do", "day");
                D("dd", 0, 0, function(F) {
                    return this.localeData().weekdaysMin(this, F)
                });
                D("ddd", 0, 0, function(F) {
                    return this.localeData().weekdaysShort(this, F)
                });
                D("dddd", 0, 0, function(F) {
                    return this.localeData().weekdays(this, F)
                });
                D("e", 0, 0, "weekday");
                D("E", 0, 0, "isoWeekday");
                J("day", "d");
                J("weekday", "e");
                J("isoWeekday", "E");
                Za.day = 11;
                Za.weekday = 11;
                Za.isoWeekday = 11;
                K("d", qb);
                K("e", qb);
                K("E", qb);
                K("dd", function(F, N) {
                    return N.weekdaysMinRegex(F)
                });
                K("ddd", function(F, N) {
                    return N.weekdaysShortRegex(F)
                });
                K("dddd", function(F, N) {
                    return N.weekdaysRegex(F)
                });
                ha(["dd", "ddd", "dddd"], function(F, N, W, la) {
                    la = W._locale.weekdaysParse(F, la, W._strict);
                    null != la ? N.d = la : c(W).invalidWeekday = F
                });
                ha(["d", "e", "E"], function(F, N, W, la) {
                    N[la] = Y(F)
                });
                var zc = "Sun Mon Tue Wed Thu Fri Sat".split(" ");
                D("H", ["HH", 2], 0, "hour");
                D("h", ["hh", 2], 0, sa);
                D("k", ["kk", 2], 0, function() {
                    return this.hours() || 24
                });
                D("hmm", 0, 0, function() {
                    return "" + sa.apply(this) + B(this.minutes(), 2)
                });
                D("hmmss", 0, 0, function() {
                    return "" + sa.apply(this) + B(this.minutes(), 2) + B(this.seconds(), 2)
                });
                D("Hmm", 0, 0, function() {
                    return "" + this.hours() + B(this.minutes(), 2)
                });
                D("Hmmss", 0, 0, function() {
                    return "" + this.hours() + B(this.minutes(), 2) + B(this.seconds(), 2)
                });
                ya("a", !0);
                ya("A", !1);
                J("hour", "h");
                Za.hour = 13;
                K("a", Oa);
                K("A", Oa);
                K("H", qb);
                K("h", qb);
                K("k", qb);
                K("HH", qb, fb);
                K("hh", qb, fb);
                K("kk", qb, fb);
                K("hmm", tb);
                K("hmmss", Yb);
                K("Hmm", tb);
                K("Hmmss", Yb);
                R(["H", "HH"], yb);
                R(["k", "kk"], function(F, N, W) {
                    F = Y(F);
                    N[yb] = 24 === F ? 0 : F
                });
                R(["a", "A"], function(F, N, W) {
                    W._isPm = W._locale.isPM(F);
                    W._meridiem = F
                });
                R(["h", "hh"], function(F, N, W) {
                    N[yb] = Y(F);
                    c(W).bigHour = !0
                });
                R("hmm", function(F, N, W) {
                    var la = F.length - 2;
                    N[yb] = Y(F.substr(0, la));
                    N[Hb] = Y(F.substr(la));
                    c(W).bigHour = !0
                });
                R("hmmss", function(F, N, W) {
                    var la = F.length - 4
                      , Ha = F.length - 2;
                    N[yb] = Y(F.substr(0, la));
                    N[Hb] = Y(F.substr(la, 2));
                    N[Nb] = Y(F.substr(Ha));
                    c(W).bigHour = !0
                });
                R("Hmm", function(F, N, W) {
                    W = F.length - 2;
                    N[yb] = Y(F.substr(0, W));
                    N[Hb] = Y(F.substr(W))
                });
                R("Hmmss", function(F, N, W) {
                    W = F.length - 4;
                    var la = F.length - 2;
                    N[yb] = Y(F.substr(0, W));
                    N[Hb] = Y(F.substr(W, 2));
                    N[Nb] = Y(F.substr(la))
                });
                var Tc = ia("Hours", !0), xc = {
                    calendar: {
                        sameDay: "[Today at] LT",
                        nextDay: "[Tomorrow at] LT",
                        nextWeek: "dddd [at] LT",
                        lastDay: "[Yesterday at] LT",
                        lastWeek: "[Last] dddd [at] LT",
                        sameElse: "L"
                    },
                    longDateFormat: {
                        LTS: "h:mm:ss A",
                        LT: "h:mm A",
                        L: "MM/DD/YYYY",
                        LL: "MMMM D, YYYY",
                        LLL: "MMMM D, YYYY h:mm A",
                        LLLL: "dddd, MMMM D, YYYY h:mm A"
                    },
                    invalidDate: "Invalid date",
                    ordinal: "%d",
                    dayOfMonthOrdinalParse: /\d{1,2}/,
                    relativeTime: {
                        future: "in %s",
                        past: "%s ago",
                        s: "a few seconds",
                        ss: "%d seconds",
                        m: "a minute",
                        mm: "%d minutes",
                        h: "an hour",
                        hh: "%d hours",
                        d: "a day",
                        dd: "%d days",
                        w: "a week",
                        ww: "%d weeks",
                        M: "a month",
                        MM: "%d months",
                        y: "a year",
                        yy: "%d years"
                    },
                    months: "January February March April May June July August September October November December".split(" "),
                    monthsShort: yc,
                    week: {
                        dow: 0,
                        doy: 6
                    },
                    weekdays: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
                    weekdaysMin: "Su Mo Tu We Th Fr Sa".split(" "),
                    weekdaysShort: zc,
                    meridiemParse: /[ap]\.?m?\.?/i
                }, sb = {}, hc = {}, gc, Jc = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/, Kc = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/, Lc = /Z|[+-]\d\d(?::?\d\d)?/, oc = [["YYYYYY-MM-DD", /[+-]\d{6}-\d\d-\d\d/], ["YYYY-MM-DD", /\d{4}-\d\d-\d\d/], ["GGGG-[W]WW-E", /\d{4}-W\d\d-\d/], ["GGGG-[W]WW", /\d{4}-W\d\d/, !1], ["YYYY-DDD", /\d{4}-\d{3}/], ["YYYY-MM", /\d{4}-\d\d/, !1], ["YYYYYYMMDD", /[+-]\d{10}/], ["YYYYMMDD", /\d{8}/], ["GGGG[W]WWE", /\d{4}W\d{3}/], ["GGGG[W]WW", /\d{4}W\d{2}/, !1], ["YYYYDDD", /\d{7}/], ["YYYYMM", /\d{6}/, !1], ["YYYY", /\d{4}/, !1]], vc = [["HH:mm:ss.SSSS", /\d\d:\d\d:\d\d\.\d+/], ["HH:mm:ss,SSSS", /\d\d:\d\d:\d\d,\d+/], ["HH:mm:ss", /\d\d:\d\d:\d\d/], ["HH:mm", /\d\d:\d\d/], ["HHmmss.SSSS", /\d\d\d\d\d\d\.\d+/], ["HHmmss,SSSS", /\d\d\d\d\d\d,\d+/], ["HHmmss", /\d\d\d\d\d\d/], ["HHmm", /\d\d\d\d/], ["HH", /\d\d/]], Oc = /^\/?Date\((-?\d+)/i, Mc = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/, Nc = {
                    UT: 0,
                    GMT: 0,
                    EDT: -240,
                    EST: -300,
                    CDT: -300,
                    CST: -360,
                    MDT: -360,
                    MST: -420,
                    PDT: -420,
                    PST: -480
                };
                C.createFromInputFallback = v("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.", function(F) {
                    F._d = new Date(F._i + (F._useUTC ? " UTC" : ""))
                });
                C.ISO_8601 = function() {}
                ;
                C.RFC_2822 = function() {}
                ;
                var Uc = v("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/", function() {
                    var F = Pa.apply(null, arguments);
                    return this.isValid() && F.isValid() ? F < this ? this : F : n()
                })
                  , Vc = v("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/", function() {
                    var F = Pa.apply(null, arguments);
                    return this.isValid() && F.isValid() ? F > this ? this : F : n()
                })
                  , ic = "year quarter month week day hour minute second millisecond".split(" ");
                kb("Z", ":");
                kb("ZZ", "");
                K("Z", sc);
                K("ZZ", sc);
                R(["Z", "ZZ"], function(F, N, W) {
                    W._useUTC = !0;
                    W._tzm = ub(sc, F)
                });
                var Pc = /([\+\-]|\d\d)/gi;
                C.updateOffset = function() {}
                ;
                var Qc = /^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/
                  , Rc = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;
                jb.fn = bb.prototype;
                jb.invalid = function() {
                    return jb(NaN)
                }
                ;
                var Wc = Ab(1, "add")
                  , Xc = Ab(-1, "subtract");
                C.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
                C.defaultFormatUtc = "YYYY-MM-DDTHH:mm:ss[Z]";
                var Ec = v("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(F) {
                    return void 0 === F ? this.localeData() : this.locale(F)
                })
                  , Bc = 126227808E5;
                D("N", 0, 0, "eraAbbr");
                D("NN", 0, 0, "eraAbbr");
                D("NNN", 0, 0, "eraAbbr");
                D("NNNN", 0, 0, "eraName");
                D("NNNNN", 0, 0, "eraNarrow");
                D("y", ["y", 1], "yo", "eraYear");
                D("y", ["yy", 2], 0, "eraYear");
                D("y", ["yyy", 3], 0, "eraYear");
                D("y", ["yyyy", 4], 0, "eraYear");
                K("N", $b);
                K("NN", $b);
                K("NNN", $b);
                K("NNNN", function(F, N) {
                    return N.erasNameRegex(F)
                });
                K("NNNNN", function(F, N) {
                    return N.erasNarrowRegex(F)
                });
                R(["N", "NN", "NNN", "NNNN", "NNNNN"], function(F, N, W, la) {
                    (N = W._locale.erasParse(F, la, W._strict)) ? c(W).era = N : c(W).invalidEra = F
                });
                K("y", ec);
                K("yy", ec);
                K("yyy", ec);
                K("yyyy", ec);
                K("yo", function(F, N) {
                    return N._eraYearOrdinalRegex || ec
                });
                R(["y", "yy", "yyy", "yyyy"], Cb);
                R(["yo"], function(F, N, W, la) {
                    var Ha;
                    W._locale._eraYearOrdinalRegex && (Ha = F.match(W._locale._eraYearOrdinalRegex));
                    N[Cb] = W._locale.eraYearOrdinalParse ? W._locale.eraYearOrdinalParse(F, Ha) : parseInt(F, 10)
                });
                D(0, ["gg", 2], 0, function() {
                    return this.weekYear() % 100
                });
                D(0, ["GG", 2], 0, function() {
                    return this.isoWeekYear() % 100
                });
                Vb("gggg", "weekYear");
                Vb("ggggg", "weekYear");
                Vb("GGGG", "isoWeekYear");
                Vb("GGGGG", "isoWeekYear");
                J("weekYear", "gg");
                J("isoWeekYear", "GG");
                Za.weekYear = 1;
                Za.isoWeekYear = 1;
                K("G", rc);
                K("g", rc);
                K("GG", qb, fb);
                K("gg", qb, fb);
                K("GGGG", Zb, dc);
                K("gggg", Zb, dc);
                K("GGGGG", qc, Xb);
                K("ggggg", qc, Xb);
                ha(["gggg", "ggggg", "GGGG", "GGGGG"], function(F, N, W, la) {
                    N[la.substr(0, 2)] = Y(F)
                });
                ha(["gg", "GG"], function(F, N, W, la) {
                    N[la] = C.parseTwoDigitYear(F)
                });
                D("Q", 0, "Qo", "quarter");
                J("quarter", "Q");
                Za.quarter = 7;
                K("Q", ab);
                R("Q", function(F, N) {
                    N[Mb] = 3 * (Y(F) - 1)
                });
                D("D", ["DD", 2], "Do", "date");
                J("date", "D");
                Za.date = 9;
                K("D", qb);
                K("DD", qb, fb);
                K("Do", function(F, N) {
                    return F ? N._dayOfMonthOrdinalParse || N._ordinalParse : N._dayOfMonthOrdinalParseLenient
                });
                R(["D", "DD"], Lb);
                R("Do", function(F, N) {
                    N[Lb] = Y(F.match(qb)[0])
                });
                var Fc = ia("Date", !0);
                D("DDD", ["DDDD", 3], "DDDo", "dayOfYear");
                J("dayOfYear", "DDD");
                Za.dayOfYear = 4;
                K("DDD", Fb);
                K("DDDD", Bb);
                R(["DDD", "DDDD"], function(F, N, W) {
                    W._dayOfYear = Y(F)
                });
                D("m", ["mm", 2], 0, "minute");
                J("minute", "m");
                Za.minute = 14;
                K("m", qb);
                K("mm", qb, fb);
                R(["m", "mm"], Hb);
                var Yc = ia("Minutes", !1);
                D("s", ["ss", 2], 0, "second");
                J("second", "s");
                Za.second = 15;
                K("s", qb);
                K("ss", qb, fb);
                R(["s", "ss"], Nb);
                var Zc = ia("Seconds", !1);
                D("S", 0, 0, function() {
                    return ~~(this.millisecond() / 100)
                });
                D(0, ["SS", 2], 0, function() {
                    return ~~(this.millisecond() / 10)
                });
                D(0, ["SSS", 3], 0, "millisecond");
                D(0, ["SSSS", 4], 0, function() {
                    return 10 * this.millisecond()
                });
                D(0, ["SSSSS", 5], 0, function() {
                    return 100 * this.millisecond()
                });
                D(0, ["SSSSSS", 6], 0, function() {
                    return 1E3 * this.millisecond()
                });
                D(0, ["SSSSSSS", 7], 0, function() {
                    return 1E4 * this.millisecond()
                });
                D(0, ["SSSSSSSS", 8], 0, function() {
                    return 1E5 * this.millisecond()
                });
                D(0, ["SSSSSSSSS", 9], 0, function() {
                    return 1E6 * this.millisecond()
                });
                J("millisecond", "ms");
                Za.millisecond = 16;
                K("S", Fb, ab);
                K("SS", Fb, fb);
                K("SSS", Fb, Bb);
                var Sb;
                for (Sb = "SSSS"; 9 >= Sb.length; Sb += "S")
                    K(Sb, ec);
                for (Sb = "S"; 9 >= Sb.length; Sb += "S")
                    R(Sb, bc);
                var $c = ia("Milliseconds", !1);
                D("z", 0, 0, "zoneAbbr");
                D("zz", 0, 0, "zoneName");
                var Ya = g.prototype;
                Ya.add = Wc;
                Ya.calendar = function(F, N) {
                    if (1 === arguments.length)
                        if (arguments[0]) {
                            var W = arguments[0], la;
                            if (!(la = q(W) || h(W) || Tb(W) || k(W) || zb(W))) {
                                la = b(W) && !m(W);
                                var Ha = !1, Qa = "years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "), Va;
                                for (Va = 0; Va < Qa.length; Va += 1) {
                                    var hb = Qa[Va];
                                    Ha = Ha || w(W, hb)
                                }
                                la = la && Ha
                            }
                            if (la || null === W || void 0 === W)
                                F = arguments[0],
                                N = void 0;
                            else {
                                W = arguments[0];
                                la = b(W) && !m(W);
                                Ha = !1;
                                Qa = "sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");
                                for (Va = 0; Va < Qa.length; Va += 1)
                                    hb = Qa[Va],
                                    Ha = Ha || w(W, hb);
                                la && Ha && (N = arguments[0],
                                F = void 0)
                            }
                        } else
                            N = F = void 0;
                    W = F || Pa();
                    la = ob(W, this).startOf("day");
                    la = C.calendarFormat(this, la) || "sameElse";
                    Ha = N && (u(N[la]) ? N[la].call(this, W) : N[la]);
                    return this.format(Ha || this.localeData().calendar(la, this, Pa(W)))
                }
                ;
                Ya.clone = function() {
                    return new g(this)
                }
                ;
                Ya.diff = function(F, N, W) {
                    if (!this.isValid())
                        return NaN;
                    F = ob(F, this);
                    if (!F.isValid())
                        return NaN;
                    var la = 6E4 * (F.utcOffset() - this.utcOffset());
                    N = O(N);
                    switch (N) {
                    case "year":
                        N = Db(this, F) / 12;
                        break;
                    case "month":
                        N = Db(this, F);
                        break;
                    case "quarter":
                        N = Db(this, F) / 3;
                        break;
                    case "second":
                        N = (this - F) / 1E3;
                        break;
                    case "minute":
                        N = (this - F) / 6E4;
                        break;
                    case "hour":
                        N = (this - F) / 36E5;
                        break;
                    case "day":
                        N = (this - F - la) / 864E5;
                        break;
                    case "week":
                        N = (this - F - la) / 6048E5;
                        break;
                    default:
                        N = this - F
                    }
                    return W ? N : ea(N)
                }
                ;
                Ya.endOf = function(F) {
                    F = O(F);
                    if (void 0 === F || "millisecond" === F || !this.isValid())
                        return this;
                    var N = this._isUTC ? jc : Rb;
                    switch (F) {
                    case "year":
                        var W = N(this.year() + 1, 0, 1) - 1;
                        break;
                    case "quarter":
                        W = N(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;
                        break;
                    case "month":
                        W = N(this.year(), this.month() + 1, 1) - 1;
                        break;
                    case "week":
                        W = N(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;
                        break;
                    case "isoWeek":
                        W = N(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;
                        break;
                    case "day":
                    case "date":
                        W = N(this.year(), this.month(), this.date() + 1) - 1;
                        break;
                    case "hour":
                        W = this._d.valueOf();
                        W += 36E5 - Gb(W + (this._isUTC ? 0 : 6E4 * this.utcOffset()), 36E5) - 1;
                        break;
                    case "minute":
                        W = this._d.valueOf();
                        W += 6E4 - Gb(W, 6E4) - 1;
                        break;
                    case "second":
                        W = this._d.valueOf(),
                        W += 1E3 - Gb(W, 1E3) - 1
                    }
                    this._d.setTime(W);
                    C.updateOffset(this, !0);
                    return this
                }
                ;
                Ya.format = function(F) {
                    F || (F = this.isUtc() ? C.defaultFormatUtc : C.defaultFormat);
                    F = E(this, F);
                    return this.localeData().postformat(F)
                }
                ;
                Ya.from = function(F, N) {
                    return this.isValid() && (q(F) && F.isValid() || Pa(F).isValid()) ? jb({
                        to: this,
                        from: F
                    }).locale(this.locale()).humanize(!N) : this.localeData().invalidDate()
                }
                ;
                Ya.fromNow = function(F) {
                    return this.from(Pa(), F)
                }
                ;
                Ya.to = function(F, N) {
                    return this.isValid() && (q(F) && F.isValid() || Pa(F).isValid()) ? jb({
                        from: this,
                        to: F
                    }).locale(this.locale()).humanize(!N) : this.localeData().invalidDate()
                }
                ;
                Ya.toNow = function(F) {
                    return this.to(Pa(), F)
                }
                ;
                Ya.get = function(F) {
                    F = O(F);
                    return u(this[F]) ? this[F]() : this
                }
                ;
                Ya.invalidAt = function() {
                    return c(this).overflow
                }
                ;
                Ya.isAfter = function(F, N) {
                    F = q(F) ? F : Pa(F);
                    if (!this.isValid() || !F.isValid())
                        return !1;
                    N = O(N) || "millisecond";
                    return "millisecond" === N ? this.valueOf() > F.valueOf() : F.valueOf() < this.clone().startOf(N).valueOf()
                }
                ;
                Ya.isBefore = function(F, N) {
                    F = q(F) ? F : Pa(F);
                    if (!this.isValid() || !F.isValid())
                        return !1;
                    N = O(N) || "millisecond";
                    return "millisecond" === N ? this.valueOf() < F.valueOf() : this.clone().endOf(N).valueOf() < F.valueOf()
                }
                ;
                Ya.isBetween = function(F, N, W, la) {
                    F = q(F) ? F : Pa(F);
                    N = q(N) ? N : Pa(N);
                    if (!(this.isValid() && F.isValid() && N.isValid()))
                        return !1;
                    la = la || "()";
                    return ("(" === la[0] ? this.isAfter(F, W) : !this.isBefore(F, W)) && (")" === la[1] ? this.isBefore(N, W) : !this.isAfter(N, W))
                }
                ;
                Ya.isSame = function(F, N) {
                    F = q(F) ? F : Pa(F);
                    if (!this.isValid() || !F.isValid())
                        return !1;
                    N = O(N) || "millisecond";
                    if ("millisecond" === N)
                        return this.valueOf() === F.valueOf();
                    F = F.valueOf();
                    return this.clone().startOf(N).valueOf() <= F && F <= this.clone().endOf(N).valueOf()
                }
                ;
                Ya.isSameOrAfter = function(F, N) {
                    return this.isSame(F, N) || this.isAfter(F, N)
                }
                ;
                Ya.isSameOrBefore = function(F, N) {
                    return this.isSame(F, N) || this.isBefore(F, N)
                }
                ;
                Ya.isValid = function() {
                    return e(this)
                }
                ;
                Ya.lang = Ec;
                Ya.locale = Kb;
                Ya.localeData = Qb;
                Ya.max = Vc;
                Ya.min = Uc;
                Ya.parsingFlags = function() {
                    return d({}, c(this))
                }
                ;
                Ya.set = function(F, N) {
                    if ("object" === typeof F) {
                        F = V(F);
                        N = aa(F);
                        var W;
                        for (W = 0; W < N.length; W++)
                            this[N[W].unit](F[N[W].unit])
                    } else if (F = O(F),
                    u(this[F]))
                        return this[F](N);
                    return this
                }
                ;
                Ya.startOf = function(F) {
                    F = O(F);
                    if (void 0 === F || "millisecond" === F || !this.isValid())
                        return this;
                    var N = this._isUTC ? jc : Rb;
                    switch (F) {
                    case "year":
                        var W = N(this.year(), 0, 1);
                        break;
                    case "quarter":
                        W = N(this.year(), this.month() - this.month() % 3, 1);
                        break;
                    case "month":
                        W = N(this.year(), this.month(), 1);
                        break;
                    case "week":
                        W = N(this.year(), this.month(), this.date() - this.weekday());
                        break;
                    case "isoWeek":
                        W = N(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));
                        break;
                    case "day":
                    case "date":
                        W = N(this.year(), this.month(), this.date());
                        break;
                    case "hour":
                        W = this._d.valueOf();
                        W -= Gb(W + (this._isUTC ? 0 : 6E4 * this.utcOffset()), 36E5);
                        break;
                    case "minute":
                        W = this._d.valueOf();
                        W -= Gb(W, 6E4);
                        break;
                    case "second":
                        W = this._d.valueOf(),
                        W -= Gb(W, 1E3)
                    }
                    this._d.setTime(W);
                    C.updateOffset(this, !0);
                    return this
                }
                ;
                Ya.subtract = Xc;
                Ya.toArray = function() {
                    return [this.year(), this.month(), this.date(), this.hour(), this.minute(), this.second(), this.millisecond()]
                }
                ;
                Ya.toObject = function() {
                    return {
                        years: this.year(),
                        months: this.month(),
                        date: this.date(),
                        hours: this.hours(),
                        minutes: this.minutes(),
                        seconds: this.seconds(),
                        milliseconds: this.milliseconds()
                    }
                }
                ;
                Ya.toDate = function() {
                    return new Date(this.valueOf())
                }
                ;
                Ya.toISOString = function(F) {
                    if (!this.isValid())
                        return null;
                    var N = (F = !0 !== F) ? this.clone().utc() : this;
                    return 0 > N.year() || 9999 < N.year() ? E(N, F ? "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYYYY-MM-DD[T]HH:mm:ss.SSSZ") : u(Date.prototype.toISOString) ? F ? this.toDate().toISOString() : (new Date(this.valueOf() + 6E4 * this.utcOffset())).toISOString().replace("Z", E(N, "Z")) : E(N, F ? "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]" : "YYYY-MM-DD[T]HH:mm:ss.SSSZ")
                }
                ;
                Ya.inspect = function() {
                    if (!this.isValid())
                        return "moment.invalid(/* " + this._i + " */)";
                    var F = "moment"
                      , N = "";
                    this.isLocal() || (F = 0 === this.utcOffset() ? "moment.utc" : "moment.parseZone",
                    N = "Z");
                    F = "[" + F + '("]';
                    var W = 0 <= this.year() && 9999 >= this.year() ? "YYYY" : "YYYYYY";
                    return this.format(F + W + "-MM-DD[T]HH:mm:ss.SSS" + (N + '[")]'))
                }
                ;
                "undefined" !== typeof Symbol && null != Symbol.for && (Ya[Symbol.for("nodejs.util.inspect.custom")] = function() {
                    return "Moment\x3c" + this.format() + "\x3e"
                }
                );
                Ya.toJSON = function() {
                    return this.isValid() ? this.toISOString() : null
                }
                ;
                Ya.toString = function() {
                    return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
                }
                ;
                Ya.unix = function() {
                    return Math.floor(this.valueOf() / 1E3)
                }
                ;
                Ya.valueOf = function() {
                    return this._d.valueOf() - 6E4 * (this._offset || 0)
                }
                ;
                Ya.creationData = function() {
                    return {
                        input: this._i,
                        format: this._f,
                        locale: this._locale,
                        isUTC: this._isUTC,
                        strict: this._strict
                    }
                }
                ;
                Ya.eraName = function() {
                    var F, N = this.localeData().eras();
                    var W = 0;
                    for (F = N.length; W < F; ++W) {
                        var la = this.clone().startOf("day").valueOf();
                        if (N[W].since <= la && la <= N[W].until || N[W].until <= la && la <= N[W].since)
                            return N[W].name
                    }
                    return ""
                }
                ;
                Ya.eraNarrow = function() {
                    var F, N = this.localeData().eras();
                    var W = 0;
                    for (F = N.length; W < F; ++W) {
                        var la = this.clone().startOf("day").valueOf();
                        if (N[W].since <= la && la <= N[W].until || N[W].until <= la && la <= N[W].since)
                            return N[W].narrow
                    }
                    return ""
                }
                ;
                Ya.eraAbbr = function() {
                    var F, N = this.localeData().eras();
                    var W = 0;
                    for (F = N.length; W < F; ++W) {
                        var la = this.clone().startOf("day").valueOf();
                        if (N[W].since <= la && la <= N[W].until || N[W].until <= la && la <= N[W].since)
                            return N[W].abbr
                    }
                    return ""
                }
                ;
                Ya.eraYear = function() {
                    var F, N = this.localeData().eras();
                    var W = 0;
                    for (F = N.length; W < F; ++W) {
                        var la = N[W].since <= N[W].until ? 1 : -1;
                        var Ha = this.clone().startOf("day").valueOf();
                        if (N[W].since <= Ha && Ha <= N[W].until || N[W].until <= Ha && Ha <= N[W].since)
                            return (this.year() - C(N[W].since).year()) * la + N[W].offset
                    }
                    return this.year()
                }
                ;
                Ya.year = Dc;
                Ya.isLeapYear = function() {
                    return da(this.year())
                }
                ;
                Ya.weekYear = function(F) {
                    return kc.call(this, F, this.week(), this.weekday(), this.localeData()._week.dow, this.localeData()._week.doy)
                }
                ;
                Ya.isoWeekYear = function(F) {
                    return kc.call(this, F, this.isoWeek(), this.isoWeekday(), 1, 4)
                }
                ;
                Ya.quarter = Ya.quarters = function(F) {
                    return null == F ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (F - 1) + this.month() % 3)
                }
                ;
                Ya.month = xa;
                Ya.daysInMonth = function() {
                    return na(this.year(), this.month())
                }
                ;
                Ya.week = Ya.weeks = function(F) {
                    var N = this.localeData().week(this);
                    return null == F ? N : this.add(7 * (F - N), "d")
                }
                ;
                Ya.isoWeek = Ya.isoWeeks = function(F) {
                    var N = ka(this, 1, 4).week;
                    return null == F ? N : this.add(7 * (F - N), "d")
                }
                ;
                Ya.weeksInYear = function() {
                    var F = this.localeData()._week;
                    return Ea(this.year(), F.dow, F.doy)
                }
                ;
                Ya.weeksInWeekYear = function() {
                    var F = this.localeData()._week;
                    return Ea(this.weekYear(), F.dow, F.doy)
                }
                ;
                Ya.isoWeeksInYear = function() {
                    return Ea(this.year(), 1, 4)
                }
                ;
                Ya.isoWeeksInISOWeekYear = function() {
                    return Ea(this.isoWeekYear(), 1, 4)
                }
                ;
                Ya.date = Fc;
                Ya.day = Ya.days = function(F) {
                    if (!this.isValid())
                        return null != F ? this : NaN;
                    var N = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
                    if (null != F) {
                        var W = this.localeData();
                        "string" === typeof F && (isNaN(F) ? (F = W.weekdaysParse(F),
                        F = "number" === typeof F ? F : null) : F = parseInt(F, 10));
                        return this.add(F - N, "d")
                    }
                    return N
                }
                ;
                Ya.weekday = function(F) {
                    if (!this.isValid())
                        return null != F ? this : NaN;
                    var N = (this.day() + 7 - this.localeData()._week.dow) % 7;
                    return null == F ? N : this.add(F - N, "d")
                }
                ;
                Ya.isoWeekday = function(F) {
                    if (!this.isValid())
                        return null != F ? this : NaN;
                    if (null != F) {
                        var N = this.localeData();
                        F = "string" === typeof F ? N.weekdaysParse(F) % 7 || 7 : isNaN(F) ? null : F;
                        return this.day(this.day() % 7 ? F : F - 7)
                    }
                    return this.day() || 7
                }
                ;
                Ya.dayOfYear = function(F) {
                    var N = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864E5) + 1;
                    return null == F ? N : this.add(F - N, "d")
                }
                ;
                Ya.hour = Ya.hours = Tc;
                Ya.minute = Ya.minutes = Yc;
                Ya.second = Ya.seconds = Zc;
                Ya.millisecond = Ya.milliseconds = $c;
                Ya.utcOffset = function(F, N, W) {
                    var la = this._offset || 0, Ha;
                    if (!this.isValid())
                        return null != F ? this : NaN;
                    if (null != F) {
                        if ("string" === typeof F) {
                            if (F = ub(sc, F),
                            null === F)
                                return this
                        } else
                            16 > Math.abs(F) && !W && (F *= 60);
                        !this._isUTC && N && (Ha = -Math.round(this._d.getTimezoneOffset()));
                        this._offset = F;
                        this._isUTC = !0;
                        null != Ha && this.add(Ha, "m");
                        la !== F && (!N || this._changeInProgress ? vb(this, jb(F - la, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0,
                        C.updateOffset(this, !0),
                        this._changeInProgress = null));
                        return this
                    }
                    return this._isUTC ? la : -Math.round(this._d.getTimezoneOffset())
                }
                ;
                Ya.utc = function(F) {
                    return this.utcOffset(0, F)
                }
                ;
                Ya.local = function(F) {
                    this._isUTC && (this.utcOffset(0, F),
                    this._isUTC = !1,
                    F && this.subtract(-Math.round(this._d.getTimezoneOffset()), "m"));
                    return this
                }
                ;
                Ya.parseZone = function() {
                    if (null != this._tzm)
                        this.utcOffset(this._tzm, !1, !0);
                    else if ("string" === typeof this._i) {
                        var F = ub(Sc, this._i);
                        null != F ? this.utcOffset(F) : this.utcOffset(0, !0)
                    }
                    return this
                }
                ;
                Ya.hasAlignedHourOffset = function(F) {
                    if (!this.isValid())
                        return !1;
                    F = F ? Pa(F).utcOffset() : 0;
                    return 0 === (this.utcOffset() - F) % 60
                }
                ;
                Ya.isDST = function() {
                    return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
                }
                ;
                Ya.isLocal = function() {
                    return this.isValid() ? !this._isUTC : !1
                }
                ;
                Ya.isUtcOffset = function() {
                    return this.isValid() ? this._isUTC : !1
                }
                ;
                Ya.isUtc = db;
                Ya.isUTC = db;
                Ya.zoneAbbr = function() {
                    return this._isUTC ? "UTC" : ""
                }
                ;
                Ya.zoneName = function() {
                    return this._isUTC ? "Coordinated Universal Time" : ""
                }
                ;
                Ya.dates = v("dates accessor is deprecated. Use date instead.", Fc);
                Ya.months = v("months accessor is deprecated. Use month instead", xa);
                Ya.years = v("years accessor is deprecated. Use year instead", Dc);
                Ya.zone = v("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/", function(F, N) {
                    return null != F ? ("string" !== typeof F && (F = -F),
                    this.utcOffset(F, N),
                    this) : -this.utcOffset()
                });
                Ya.isDSTShifted = v("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information", function() {
                    if (!l(this._isDSTShifted))
                        return this._isDSTShifted;
                    var F = {};
                    t(F, this);
                    F = Ra(F);
                    if (F._a) {
                        var N = F._isUTC ? a(F._a) : Pa(F._a);
                        var W;
                        if (W = this.isValid()) {
                            F = F._a;
                            N = N.toArray();
                            W = Math.min(F.length, N.length);
                            var la = Math.abs(F.length - N.length), Ha = 0, Qa;
                            for (Qa = 0; Qa < W; Qa++)
                                Y(F[Qa]) !== Y(N[Qa]) && Ha++;
                            W = 0 < Ha + la
                        }
                        this._isDSTShifted = W
                    } else
                        this._isDSTShifted = !1;
                    return this._isDSTShifted
                });
                var mb = r.prototype;
                mb.calendar = function(F, N, W) {
                    F = this._calendar[F] || this._calendar.sameElse;
                    return u(F) ? F.call(N, W) : F
                }
                ;
                mb.longDateFormat = function(F) {
                    var N = this._longDateFormat[F]
                      , W = this._longDateFormat[F.toUpperCase()];
                    if (N || !W)
                        return N;
                    this._longDateFormat[F] = W.match(La).map(function(la) {
                        return "MMMM" === la || "MM" === la || "DD" === la || "dddd" === la ? la.slice(1) : la
                    }).join("");
                    return this._longDateFormat[F]
                }
                ;
                mb.invalidDate = function() {
                    return this._invalidDate
                }
                ;
                mb.ordinal = function(F) {
                    return this._ordinal.replace("%d", F)
                }
                ;
                mb.preparse = Eb;
                mb.postformat = Eb;
                mb.relativeTime = function(F, N, W, la) {
                    var Ha = this._relativeTime[W];
                    return u(Ha) ? Ha(F, N, W, la) : Ha.replace(/%d/i, F)
                }
                ;
                mb.pastFuture = function(F, N) {
                    F = this._relativeTime[0 < F ? "future" : "past"];
                    return u(F) ? F(N) : F.replace(/%s/i, N)
                }
                ;
                mb.set = function(F) {
                    var N;
                    for (N in F)
                        if (w(F, N)) {
                            var W = F[N];
                            u(W) ? this[N] = W : this["_" + N] = W
                        }
                    this._config = F;
                    this._dayOfMonthOrdinalParseLenient = new RegExp((this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) + "|" + /\d{1,2}/.source)
                }
                ;
                mb.eras = function(F, N) {
                    var W = this._eras || Q("en")._eras;
                    F = 0;
                    for (N = W.length; F < N; ++F) {
                        switch (typeof W[F].since) {
                        case "string":
                            var la = C(W[F].since).startOf("day");
                            W[F].since = la.valueOf()
                        }
                        switch (typeof W[F].until) {
                        case "undefined":
                            W[F].until = Infinity;
                            break;
                        case "string":
                            la = C(W[F].until).startOf("day").valueOf(),
                            W[F].until = la.valueOf()
                        }
                    }
                    return W
                }
                ;
                mb.erasParse = function(F, N, W) {
                    var la, Ha = this.eras();
                    F = F.toUpperCase();
                    var Qa = 0;
                    for (la = Ha.length; Qa < la; ++Qa) {
                        var Va = Ha[Qa].name.toUpperCase();
                        var hb = Ha[Qa].abbr.toUpperCase();
                        var pb = Ha[Qa].narrow.toUpperCase();
                        if (W)
                            switch (N) {
                            case "N":
                            case "NN":
                            case "NNN":
                                if (hb === F)
                                    return Ha[Qa];
                                break;
                            case "NNNN":
                                if (Va === F)
                                    return Ha[Qa];
                                break;
                            case "NNNNN":
                                if (pb === F)
                                    return Ha[Qa]
                            }
                        else if (0 <= [Va, hb, pb].indexOf(F))
                            return Ha[Qa]
                    }
                }
                ;
                mb.erasConvertYear = function(F, N) {
                    var W = F.since <= F.until ? 1 : -1;
                    return void 0 === N ? C(F.since).year() : C(F.since).year() + (N - F.offset) * W
                }
                ;
                mb.erasAbbrRegex = function(F) {
                    w(this, "_erasAbbrRegex") || ac.call(this);
                    return F ? this._erasAbbrRegex : this._erasRegex
                }
                ;
                mb.erasNameRegex = function(F) {
                    w(this, "_erasNameRegex") || ac.call(this);
                    return F ? this._erasNameRegex : this._erasRegex
                }
                ;
                mb.erasNarrowRegex = function(F) {
                    w(this, "_erasNarrowRegex") || ac.call(this);
                    return F ? this._erasNarrowRegex : this._erasRegex
                }
                ;
                mb.months = function(F, N) {
                    return F ? y(this._months) ? this._months[F.month()] : this._months[(this._months.isFormat || Cc).test(N) ? "format" : "standalone"][F.month()] : y(this._months) ? this._months : this._months.standalone
                }
                ;
                mb.monthsShort = function(F, N) {
                    return F ? y(this._monthsShort) ? this._monthsShort[F.month()] : this._monthsShort[Cc.test(N) ? "format" : "standalone"][F.month()] : y(this._monthsShort) ? this._monthsShort : this._monthsShort.standalone
                }
                ;
                mb.monthsParse = function(F, N, W) {
                    var la;
                    if (this._monthsParseExact) {
                        a: {
                            F = F.toLocaleLowerCase();
                            if (!this._monthsParse)
                                for (this._monthsParse = [],
                                this._longMonthsParse = [],
                                this._shortMonthsParse = [],
                                la = 0; 12 > la; ++la) {
                                    var Ha = a([2E3, la]);
                                    this._shortMonthsParse[la] = this.monthsShort(Ha, "").toLocaleLowerCase();
                                    this._longMonthsParse[la] = this.months(Ha, "").toLocaleLowerCase()
                                }
                            if (W)
                                N = "MMM" === N ? wb.call(this._shortMonthsParse, F) : wb.call(this._longMonthsParse, F);
                            else if ("MMM" === N) {
                                N = wb.call(this._shortMonthsParse, F);
                                if (-1 !== N)
                                    break a;
                                N = wb.call(this._longMonthsParse, F)
                            } else {
                                N = wb.call(this._longMonthsParse, F);
                                if (-1 !== N)
                                    break a;
                                N = wb.call(this._shortMonthsParse, F)
                            }
                            N = -1 !== N ? N : null
                        }
                        return N
                    }
                    this._monthsParse || (this._monthsParse = [],
                    this._longMonthsParse = [],
                    this._shortMonthsParse = []);
                    for (la = 0; 12 > la; la++)
                        if (Ha = a([2E3, la]),
                        W && !this._longMonthsParse[la] && (this._longMonthsParse[la] = new RegExp("^" + this.months(Ha, "").replace(".", "") + "$","i"),
                        this._shortMonthsParse[la] = new RegExp("^" + this.monthsShort(Ha, "").replace(".", "") + "$","i")),
                        W || this._monthsParse[la] || (Ha = "^" + this.months(Ha, "") + "|^" + this.monthsShort(Ha, ""),
                        this._monthsParse[la] = new RegExp(Ha.replace(".", ""),"i")),
                        W && "MMMM" === N && this._longMonthsParse[la].test(F) || W && "MMM" === N && this._shortMonthsParse[la].test(F) || !W && this._monthsParse[la].test(F))
                            return la
                }
                ;
                mb.monthsRegex = function(F) {
                    if (this._monthsParseExact)
                        return w(this, "_monthsRegex") || Aa.call(this),
                        F ? this._monthsStrictRegex : this._monthsRegex;
                    w(this, "_monthsRegex") || (this._monthsRegex = nc);
                    return this._monthsStrictRegex && F ? this._monthsStrictRegex : this._monthsRegex
                }
                ;
                mb.monthsShortRegex = function(F) {
                    if (this._monthsParseExact)
                        return w(this, "_monthsRegex") || Aa.call(this),
                        F ? this._monthsShortStrictRegex : this._monthsShortRegex;
                    w(this, "_monthsShortRegex") || (this._monthsShortRegex = nc);
                    return this._monthsShortStrictRegex && F ? this._monthsShortStrictRegex : this._monthsShortRegex
                }
                ;
                mb.week = function(F) {
                    return ka(F, this._week.dow, this._week.doy).week
                }
                ;
                mb.firstDayOfYear = function() {
                    return this._week.doy
                }
                ;
                mb.firstDayOfWeek = function() {
                    return this._week.dow
                }
                ;
                mb.weekdays = function(F, N) {
                    N = y(this._weekdays) ? this._weekdays : this._weekdays[F && !0 !== F && this._weekdays.isFormat.test(N) ? "format" : "standalone"];
                    return !0 === F ? T(N, this._week.dow) : F ? N[F.day()] : N
                }
                ;
                mb.weekdaysMin = function(F) {
                    return !0 === F ? T(this._weekdaysMin, this._week.dow) : F ? this._weekdaysMin[F.day()] : this._weekdaysMin
                }
                ;
                mb.weekdaysShort = function(F) {
                    return !0 === F ? T(this._weekdaysShort, this._week.dow) : F ? this._weekdaysShort[F.day()] : this._weekdaysShort
                }
                ;
                mb.weekdaysParse = function(F, N, W) {
                    var la;
                    if (this._weekdaysParseExact)
                        return U.call(this, F, N, W);
                    this._weekdaysParse || (this._weekdaysParse = [],
                    this._minWeekdaysParse = [],
                    this._shortWeekdaysParse = [],
                    this._fullWeekdaysParse = []);
                    for (la = 0; 7 > la; la++) {
                        var Ha = a([2E3, 1]).day(la);
                        W && !this._fullWeekdaysParse[la] && (this._fullWeekdaysParse[la] = new RegExp("^" + this.weekdays(Ha, "").replace(".", "\\.?") + "$","i"),
                        this._shortWeekdaysParse[la] = new RegExp("^" + this.weekdaysShort(Ha, "").replace(".", "\\.?") + "$","i"),
                        this._minWeekdaysParse[la] = new RegExp("^" + this.weekdaysMin(Ha, "").replace(".", "\\.?") + "$","i"));
                        this._weekdaysParse[la] || (Ha = "^" + this.weekdays(Ha, "") + "|^" + this.weekdaysShort(Ha, "") + "|^" + this.weekdaysMin(Ha, ""),
                        this._weekdaysParse[la] = new RegExp(Ha.replace(".", ""),"i"));
                        if (W && "dddd" === N && this._fullWeekdaysParse[la].test(F) || W && "ddd" === N && this._shortWeekdaysParse[la].test(F) || W && "dd" === N && this._minWeekdaysParse[la].test(F) || !W && this._weekdaysParse[la].test(F))
                            return la
                    }
                }
                ;
                mb.weekdaysRegex = function(F) {
                    if (this._weekdaysParseExact)
                        return w(this, "_weekdaysRegex") || ma.call(this),
                        F ? this._weekdaysStrictRegex : this._weekdaysRegex;
                    w(this, "_weekdaysRegex") || (this._weekdaysRegex = nc);
                    return this._weekdaysStrictRegex && F ? this._weekdaysStrictRegex : this._weekdaysRegex
                }
                ;
                mb.weekdaysShortRegex = function(F) {
                    if (this._weekdaysParseExact)
                        return w(this, "_weekdaysRegex") || ma.call(this),
                        F ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex;
                    w(this, "_weekdaysShortRegex") || (this._weekdaysShortRegex = nc);
                    return this._weekdaysShortStrictRegex && F ? this._weekdaysShortStrictRegex : this._weekdaysShortRegex
                }
                ;
                mb.weekdaysMinRegex = function(F) {
                    if (this._weekdaysParseExact)
                        return w(this, "_weekdaysRegex") || ma.call(this),
                        F ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex;
                    w(this, "_weekdaysMinRegex") || (this._weekdaysMinRegex = nc);
                    return this._weekdaysMinStrictRegex && F ? this._weekdaysMinStrictRegex : this._weekdaysMinRegex
                }
                ;
                mb.isPM = function(F) {
                    return "p" === (F + "").toLowerCase().charAt(0)
                }
                ;
                mb.meridiem = function(F, N, W) {
                    return 11 < F ? W ? "pm" : "PM" : W ? "am" : "AM"
                }
                ;
                Ma("en", {
                    eras: [{
                        since: "0001-01-01",
                        until: Infinity,
                        offset: 1,
                        name: "Anno Domini",
                        narrow: "AD",
                        abbr: "AD"
                    }, {
                        since: "0000-12-31",
                        until: -Infinity,
                        offset: 1,
                        name: "Before Christ",
                        narrow: "BC",
                        abbr: "BC"
                    }],
                    dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
                    ordinal: function(F) {
                        var N = F % 10;
                        N = 1 === Y(F % 100 / 10) ? "th" : 1 === N ? "st" : 2 === N ? "nd" : 3 === N ? "rd" : "th";
                        return F + N
                    }
                });
                C.lang = v("moment.lang is deprecated. Use moment.locale instead.", Ma);
                C.langData = v("moment.langData is deprecated. Use moment.localeData instead.", Q);
                var Ob = Math.abs
                  , ad = Ib("ms")
                  , bd = Ib("s")
                  , cd = Ib("m")
                  , dd = Ib("h")
                  , ed = Ib("d")
                  , fd = Ib("w")
                  , gd = Ib("M")
                  , hd = Ib("Q")
                  , id = Ib("y")
                  , jd = rb("milliseconds")
                  , kd = rb("seconds")
                  , ld = rb("minutes")
                  , md = rb("hours")
                  , nd = rb("days")
                  , od = rb("months")
                  , pd = rb("years")
                  , Pb = Math.round
                  , fc = {
                    ss: 44,
                    s: 45,
                    m: 45,
                    h: 22,
                    d: 26,
                    w: null,
                    M: 11
                }
                  , wc = Math.abs
                  , lb = bb.prototype;
                lb.isValid = function() {
                    return this._isValid
                }
                ;
                lb.abs = function() {
                    var F = this._data;
                    this._milliseconds = Ob(this._milliseconds);
                    this._days = Ob(this._days);
                    this._months = Ob(this._months);
                    F.milliseconds = Ob(F.milliseconds);
                    F.seconds = Ob(F.seconds);
                    F.minutes = Ob(F.minutes);
                    F.hours = Ob(F.hours);
                    F.months = Ob(F.months);
                    F.years = Ob(F.years);
                    return this
                }
                ;
                lb.add = function(F, N) {
                    return mc(this, F, N, 1)
                }
                ;
                lb.subtract = function(F, N) {
                    return mc(this, F, N, -1)
                }
                ;
                lb.as = function(F) {
                    if (!this.isValid())
                        return NaN;
                    var N = this._milliseconds;
                    F = O(F);
                    if ("month" === F || "quarter" === F || "year" === F) {
                        var W = this._days + N / 864E5;
                        W = this._months + 4800 * W / 146097;
                        switch (F) {
                        case "month":
                            return W;
                        case "quarter":
                            return W / 3;
                        case "year":
                            return W / 12
                        }
                    } else
                        switch (W = this._days + Math.round(146097 * this._months / 4800),
                        F) {
                        case "week":
                            return W / 7 + N / 6048E5;
                        case "day":
                            return W + N / 864E5;
                        case "hour":
                            return 24 * W + N / 36E5;
                        case "minute":
                            return 1440 * W + N / 6E4;
                        case "second":
                            return 86400 * W + N / 1E3;
                        case "millisecond":
                            return Math.floor(864E5 * W) + N;
                        default:
                            throw Error("Unknown unit " + F);
                        }
                }
                ;
                lb.asMilliseconds = ad;
                lb.asSeconds = bd;
                lb.asMinutes = cd;
                lb.asHours = dd;
                lb.asDays = ed;
                lb.asWeeks = fd;
                lb.asMonths = gd;
                lb.asQuarters = hd;
                lb.asYears = id;
                lb.valueOf = function() {
                    return this.isValid() ? this._milliseconds + 864E5 * this._days + this._months % 12 * 2592E6 + 31536E6 * Y(this._months / 12) : NaN
                }
                ;
                lb._bubble = function() {
                    var F = this._milliseconds
                      , N = this._days
                      , W = this._months
                      , la = this._data;
                    0 <= F && 0 <= N && 0 <= W || 0 >= F && 0 >= N && 0 >= W || (F += 864E5 * pc(146097 * W / 4800 + N),
                    W = N = 0);
                    la.milliseconds = F % 1E3;
                    F = ea(F / 1E3);
                    la.seconds = F % 60;
                    F = ea(F / 60);
                    la.minutes = F % 60;
                    F = ea(F / 60);
                    la.hours = F % 24;
                    N += ea(F / 24);
                    F = ea(4800 * N / 146097);
                    W += F;
                    N -= pc(146097 * F / 4800);
                    F = ea(W / 12);
                    la.days = N;
                    la.months = W % 12;
                    la.years = F;
                    return this
                }
                ;
                lb.clone = function() {
                    return jb(this)
                }
                ;
                lb.get = function(F) {
                    F = O(F);
                    return this.isValid() ? this[F + "s"]() : NaN
                }
                ;
                lb.milliseconds = jd;
                lb.seconds = kd;
                lb.minutes = ld;
                lb.hours = md;
                lb.days = nd;
                lb.weeks = function() {
                    return ea(this.days() / 7)
                }
                ;
                lb.months = od;
                lb.years = pd;
                lb.humanize = function(F, N) {
                    if (!this.isValid())
                        return this.localeData().invalidDate();
                    var W = !1
                      , la = fc;
                    "object" === typeof F && (N = F,
                    F = !1);
                    "boolean" === typeof F && (W = F);
                    "object" === typeof N && (la = Object.assign({}, fc, N),
                    null != N.s && null == N.ss && (la.ss = N.s - 1));
                    F = this.localeData();
                    N = !W;
                    var Ha = jb(this).abs()
                      , Qa = Pb(Ha.as("s"))
                      , Va = Pb(Ha.as("m"))
                      , hb = Pb(Ha.as("h"))
                      , pb = Pb(Ha.as("d"))
                      , ib = Pb(Ha.as("M"))
                      , xb = Pb(Ha.as("w"));
                    Ha = Pb(Ha.as("y"));
                    Qa = Qa <= la.ss && ["s", Qa] || Qa < la.s && ["ss", Qa] || 1 >= Va && ["m"] || Va < la.m && ["mm", Va] || 1 >= hb && ["h"] || hb < la.h && ["hh", hb] || 1 >= pb && ["d"] || pb < la.d && ["dd", pb];
                    null != la.w && (Qa = Qa || 1 >= xb && ["w"] || xb < la.w && ["ww", xb]);
                    Qa = Qa || 1 >= ib && ["M"] || ib < la.M && ["MM", ib] || 1 >= Ha && ["y"] || ["yy", Ha];
                    Qa[2] = N;
                    Qa[3] = 0 < +this;
                    Qa[4] = F;
                    N = P.apply(null, Qa);
                    W && (N = F.pastFuture(+this, N));
                    return F.postformat(N)
                }
                ;
                lb.toISOString = Ba;
                lb.toString = Ba;
                lb.toJSON = Ba;
                lb.locale = Kb;
                lb.localeData = Qb;
                lb.toIsoString = v("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", Ba);
                lb.lang = Ec;
                D("X", 0, 0, "unix");
                D("x", 0, 0, "valueOf");
                K("x", rc);
                K("X", /[+-]?\d+(\.\d{1,3})?/);
                R("X", function(F, N, W) {
                    W._d = new Date(1E3 * parseFloat(F))
                });
                R("x", function(F, N, W) {
                    W._d = new Date(Y(F))
                });
                C.version = "2.29.1";
                var Gc = Pa;
                C.fn = Ya;
                C.min = function() {
                    var F = [].slice.call(arguments, 0);
                    return eb("isBefore", F)
                }
                ;
                C.max = function() {
                    var F = [].slice.call(arguments, 0);
                    return eb("isAfter", F)
                }
                ;
                C.now = function() {
                    return Date.now ? Date.now() : +new Date
                }
                ;
                C.utc = a;
                C.unix = function(F) {
                    return Pa(1E3 * F)
                }
                ;
                C.months = function(F, N) {
                    return lc(F, N, "months")
                }
                ;
                C.isDate = h;
                C.locale = Ma;
                C.invalid = n;
                C.duration = jb;
                C.isMoment = q;
                C.weekdays = function(F, N, W) {
                    return cc(F, N, W, "weekdays")
                }
                ;
                C.parseZone = function() {
                    return Pa.apply(null, arguments).parseZone()
                }
                ;
                C.localeData = Q;
                C.isDuration = gb;
                C.monthsShort = function(F, N) {
                    return lc(F, N, "monthsShort")
                }
                ;
                C.weekdaysMin = function(F, N, W) {
                    return cc(F, N, W, "weekdaysMin")
                }
                ;
                C.defineLocale = I;
                C.updateLocale = function(F, N) {
                    if (null != N) {
                        var W = xc;
                        if (null != sb[F] && null != sb[F].parentLocale)
                            sb[F].set(p(sb[F]._config, N));
                        else {
                            var la = Xa(F);
                            null != la && (W = la._config);
                            N = p(W, N);
                            null == la && (N.abbr = F);
                            N = new r(N);
                            N.parentLocale = sb[F];
                            sb[F] = N
                        }
                        Ma(F)
                    } else
                        null != sb[F] && (null != sb[F].parentLocale ? (sb[F] = sb[F].parentLocale,
                        F === Ma() && Ma(F)) : null != sb[F] && delete sb[F]);
                    return sb[F]
                }
                ;
                C.locales = function() {
                    return Ga(sb)
                }
                ;
                C.weekdaysShort = function(F, N, W) {
                    return cc(F, N, W, "weekdaysShort")
                }
                ;
                C.normalizeUnits = O;
                C.relativeTimeRounding = function(F) {
                    return void 0 === F ? Pb : "function" === typeof F ? (Pb = F,
                    !0) : !1
                }
                ;
                C.relativeTimeThreshold = function(F, N) {
                    if (void 0 === fc[F])
                        return !1;
                    if (void 0 === N)
                        return fc[F];
                    fc[F] = N;
                    "s" === F && (fc.ss = N - 1);
                    return !0
                }
                ;
                C.calendarFormat = function(F, N) {
                    F = F.diff(N, "days", !0);
                    return -6 > F ? "sameElse" : -1 > F ? "lastWeek" : 0 > F ? "lastDay" : 1 > F ? "sameDay" : 2 > F ? "nextDay" : 7 > F ? "nextWeek" : "sameElse"
                }
                ;
                C.prototype = Ya;
                C.HTML5_FMT = {
                    DATETIME_LOCAL: "YYYY-MM-DDTHH:mm",
                    DATETIME_LOCAL_SECONDS: "YYYY-MM-DDTHH:mm:ss",
                    DATETIME_LOCAL_MS: "YYYY-MM-DDTHH:mm:ss.SSS",
                    DATE: "YYYY-MM-DD",
                    TIME: "HH:mm",
                    TIME_SECONDS: "HH:mm:ss",
                    TIME_MS: "HH:mm:ss.SSS",
                    WEEK: "GGGG-[W]WW",
                    MONTH: "YYYY-MM"
                };
                return C
            })
        },
        "esri/arcadeProfiles/visualizationProfile": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "), function(C, y, b, w, m, l, k) {
                C = new (C(null, {
                    declaredClass: "esri.arcadeProfiles.VisualizationProfile",
                    initialize: function(h) {
                        var f = [];
                        k.hasGeometryOperations(h) && f.push(l.enableGeometryOperations());
                        return m(f)
                    }
                }));
                b("extend-esri") && y.setObject("arcadeProfiles.visualizationProfile", C, w);
                return C
            })
        },
        "esri/arcadeProfiles/utils": function() {
            define(["dojo/_base/lang", "dojo/_base/array", "dojo/has", "../kernel", "../support/expressionUtils"], function(C, y, b, w, m) {
                var l = /(\/(MapServer|FeatureServer)).*/ig
                  , k = {
                    hasGeometryOperations: function(h) {
                        return y.some(h, function(f) {
                            return f.hasGeometryOperations ? f.hasGeometryOperations() : m.hasGeometryOperations(f)
                        })
                    },
                    hasFeatureSetOperations: function(h) {
                        return y.some(h, function(f) {
                            return f.hasFeatureSetOperations ? f.hasFeatureSetOperations() : m.hasFeatureSetOperations(f)
                        })
                    },
                    hasVariables: function(h, f) {
                        return y.some(h, function(d) {
                            return y.some(f, function(a) {
                                return d.hasVariable ? d.hasVariable(a) : m.hasVariable(d, a)
                            })
                        })
                    },
                    isAsync: function(h) {
                        return y.some(h, function(f) {
                            return f.async
                        })
                    },
                    getServiceUrl: function(h) {
                        return l.test(h) ? h.replace(l, "$1") : null
                    }
                };
                b("extend-esri") && C.setObject("arcadeProfiles.utils", k, w);
                return k
            })
        },
        "esri/renderers/SimpleRenderer": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "), function(C, y, b, w, m, l, k) {
                C = C(k, {
                    declaredClass: "esri.renderer.SimpleRenderer",
                    constructor: function(h, f) {
                        if (h && !h.declaredClass) {
                            var d = h;
                            this.symbol = (h = d.symbol) && (h.declaredClass ? h : l.fromJson(h, f));
                            this.label = d.label;
                            this.description = d.description
                        } else
                            this.symbol = h
                    },
                    getSymbol: function(h) {
                        return this.symbol
                    },
                    toJson: function() {
                        var h = y.mixin(this.inherited(arguments), {
                            type: "simple",
                            label: this.label,
                            description: this.description,
                            symbol: this.symbol && this.symbol.toJson()
                        });
                        return m.fixJson(h)
                    }
                });
                b("extend-esri") && y.setObject("renderer.SimpleRenderer", C, w);
                return C
            })
        },
        "esri/renderers/UniqueValueRenderer": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "), function(C, y, b, w, m, l, k, h, f) {
                C = C(h, {
                    declaredClass: "esri.renderer.UniqueValueRenderer",
                    constructor: function(d, a, c, e, n, t) {
                        this.values = [];
                        this._symbols = {};
                        this.infos = [];
                        d && !d.declaredClass ? (a = d,
                        c = t && t.geometryType,
                        this.defaultSymbol = (d = a.defaultSymbol) && (d.declaredClass ? d : k.fromJson(d, t)),
                        this.attributeField = a.field1,
                        this.attributeField2 = a.field2,
                        this.attributeField3 = a.field3,
                        this.fieldDelimiter = a.fieldDelimiter,
                        this.defaultLabel = a.defaultLabel,
                        this.setValueExpression(a.valueExpression),
                        this.valueExpressionTitle = a.valueExpressionTitle,
                        this.legendOptions = a.legendOptions,
                        a.backgroundFillSymbol && (this.backgroundFillSymbol = k.fromJson(a.backgroundFillSymbol, c ? {
                            geometryType: "esriGeometryPolygon"
                        } : null)),
                        "esriGeometryPolygon" === c && this.hasVisualVariables("sizeInfo", !1) && (t = {
                            geometryType: "esriGeometryPoint"
                        }),
                        y.forEach(a.uniqueValueInfos, function(g) {
                            this._addValueInfo(g, t)
                        }, this)) : (this.defaultSymbol = d,
                        this.attributeField = a,
                        this.attributeField2 = c,
                        this.attributeField3 = e,
                        this.fieldDelimiter = n);
                        this._multiple = !!this.attributeField2
                    },
                    addValue: function(d, a) {
                        d = b.isObject(d) ? d : {
                            value: d,
                            symbol: a
                        };
                        this._addValueInfo(d)
                    },
                    removeValue: function(d) {
                        var a = y.indexOf(this.values, d);
                        -1 !== a && (this.values.splice(a, 1),
                        this._hasNullKeyword = this._evalNullKeyword(this.values),
                        delete this._symbols[d],
                        this.infos.splice(a, 1))
                    },
                    getUniqueValueInfo: function(d) {
                        var a = this.attributeField
                          , c = d.attributes;
                        if (this.valueExpression)
                            a = this._getDataValue(d, this._uvInfo, null, this._cache.uvInfo),
                            a = this._normalizeNullValue(a);
                        else if (this._multiple) {
                            d = this.attributeField2;
                            var e = this.attributeField3
                              , n = [];
                            a && n.push(this._normalizeNullValue(c[a]));
                            d && n.push(this._normalizeNullValue(c[d]));
                            e && n.push(this._normalizeNullValue(c[e]));
                            a = n.join(this.fieldDelimiter || "")
                        } else
                            a = b.isFunction(a) ? a(d) : c[a],
                            a = this._normalizeNullValue(a);
                        return this._symbols[a]
                    },
                    setValueExpression: function(d) {
                        this.valueExpression = d;
                        this._uvInfo = {
                            valueExpression: d
                        };
                        this._cache.uvInfo = this._createCache(this._uvInfo, !0)
                    },
                    getFieldsUsedInExpressions: function() {
                        var d = this.inherited(arguments);
                        this.valueExpression && (d = d.concat(f.extractFieldNames(this.valueExpression)));
                        d.sort();
                        return y.filter(d, function(a, c) {
                            return 0 === c || d[c - 1] !== a
                        })
                    },
                    getSymbol: function(d) {
                        return (d = this.getUniqueValueInfo(d)) && d.symbol || this.defaultSymbol
                    },
                    _addValueInfo: function(d, a) {
                        var c = d.value;
                        this.values.push(c);
                        this._hasNullKeyword = this._evalNullKeyword(this.values);
                        this.infos.push(d);
                        var e = d.symbol;
                        e && !e.declaredClass && (d.symbol = k.fromJson(e, a));
                        this._symbols[c] = d
                    },
                    _nullCode: "\x3cNull\x3e",
                    _normalizeNullValue: function(d) {
                        return this._hasNullKeyword && null == d ? this._nullCode : d
                    },
                    _evalNullKeyword: function(d) {
                        var a = this.fieldDelimiter || ""
                          , c = new RegExp("(^|" + a + ")(" + this._nullCode + ")(" + a + "|$)");
                        return y.some(d, function(e) {
                            return c.test(e)
                        })
                    },
                    toJson: function() {
                        var d = l.fixJson;
                        var a = {
                            type: "uniqueValue",
                            field1: this.attributeField,
                            field2: this.attributeField2,
                            field3: this.attributeField3,
                            fieldDelimiter: this.fieldDelimiter,
                            valueExpression: this.valueExpression,
                            valueExpressionTitle: this.valueExpressionTitle,
                            legendOptions: b.clone(this.legendOptions),
                            defaultSymbol: this.defaultSymbol && this.defaultSymbol.toJson(),
                            defaultLabel: this.defaultLabel,
                            uniqueValueInfos: y.map(this.infos || [], function(c) {
                                c = b.mixin({}, c);
                                c.symbol = c.symbol && c.symbol.toJson();
                                c.value += "";
                                return d(c)
                            })
                        };
                        this.backgroundFillSymbol && (a.backgroundFillSymbol = this.backgroundFillSymbol.toJson());
                        a = b.mixin(this.inherited(arguments), a);
                        return d(a)
                    }
                });
                w("extend-esri") && b.setObject("renderer.UniqueValueRenderer", C, m);
                return C
            })
        },
        "esri/renderers/ClassBreaksRenderer": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "), function(C, y, b, w, m, l, k, h, f) {
                C = C(h, {
                    declaredClass: "esri.renderer.ClassBreaksRenderer",
                    constructor: function(d, a, c) {
                        this.breaks = [];
                        this._symbols = {};
                        this.infos = [];
                        this.isMaxInclusive = !0;
                        if (d && !d.declaredClass) {
                            var e = d;
                            a = c && c.geometryType;
                            this.attributeField = e.field;
                            this.setValueExpression(e.valueExpression);
                            this.valueExpressionTitle = e.valueExpressionTitle;
                            this.legendOptions = e.legendOptions;
                            this.defaultSymbol = (d = e.defaultSymbol) && (d.declaredClass ? d : k.fromJson(d, c));
                            this.backgroundFillSymbol = (d = e.backgroundFillSymbol) && (d.declaredClass ? d : k.fromJson(d, a ? {
                                geometryType: "esriGeometryPolygon"
                            } : null));
                            this._copy(["defaultLabel", "classificationMethod:rest", "normalizationType:rest", "normalizationField", "normalizationTotal"], e, this);
                            var n = e.minValue;
                            (d = e.classBreakInfos) && d[0] && l.isDefined(d[0].classMaxValue) && y.forEach(d, function(t) {
                                var g = t.classMaxValue;
                                t.minValue = n;
                                n = t.maxValue = g
                            }, this);
                            "esriGeometryPolygon" === a && (this.hasVisualVariables("sizeInfo", !1) || k.isPointSymbol(k.getFirstSupportedSymbol(y.map(d, function(t) {
                                return t.symbol
                            })))) && (c = {
                                geometryType: "esriGeometryPoint"
                            });
                            y.forEach(d, function(t) {
                                this._addBreakInfo(t, c)
                            }, this)
                        } else
                            this.defaultSymbol = d,
                            this.attributeField = a
                    },
                    addBreak: function(d, a, c) {
                        d = b.isObject(d) ? d : {
                            minValue: d,
                            maxValue: a,
                            symbol: c
                        };
                        this._addBreakInfo(d)
                    },
                    removeBreak: function(d, a) {
                        var c = this.breaks, e, n = c.length, t = this._symbols;
                        for (e = 0; e < n; e++) {
                            var g = c[e];
                            if (g[0] == d && g[1] == a) {
                                c.splice(e, 1);
                                delete t[d + "-" + a];
                                this.infos.splice(e, 1);
                                break
                            }
                        }
                    },
                    clearBreaks: function() {
                        this.breaks = [];
                        this._symbols = {};
                        this.infos = []
                    },
                    getBreakIndex: function(d) {
                        var a = this.attributeField
                          , c = d.attributes
                          , e = this.breaks
                          , n = e.length
                          , t = this.isMaxInclusive;
                        if (this.valueExpression)
                            d = this._getDataValue(d, this._cbInfo, null, this._cache.cbInfo);
                        else if (b.isFunction(a))
                            d = a(d);
                        else if (d = parseFloat(c[a]),
                        a = this.normalizationType,
                        a) {
                            var g = parseFloat(this.normalizationTotal);
                            c = parseFloat(c[this.normalizationField]);
                            if ("log" === a)
                                d = Math.log(d) * Math.LOG10E;
                            else if ("percent-of-total" === a && !isNaN(g))
                                d = d / g * 100;
                            else if ("field" === a) {
                                if (isNaN(d) || isNaN(c))
                                    return -1;
                                d /= c
                            }
                        }
                        if (null != d && !isNaN(d) && "number" === typeof d)
                            for (c = 0; c < n; c++)
                                if (a = e[c],
                                a[0] <= d && (t ? d <= a[1] : d < a[1]))
                                    return c;
                        return -1
                    },
                    getBreakInfo: function(d) {
                        d = this.getBreakIndex(d);
                        return -1 !== d ? this.infos[d] : null
                    },
                    getSymbol: function(d) {
                        return (d = this.breaks[this.getBreakIndex(d)]) ? this._symbols[d[0] + "-" + d[1]] : this.defaultSymbol
                    },
                    setMaxInclusive: function(d) {
                        this.isMaxInclusive = d
                    },
                    setValueExpression: function(d) {
                        this.valueExpression = d;
                        this._cbInfo = {
                            valueExpression: d
                        };
                        this._cache.cbInfo = this._createCache(this._cbInfo)
                    },
                    getFieldsUsedInExpressions: function() {
                        var d = this.inherited(arguments);
                        this.valueExpression && (d = d.concat(f.extractFieldNames(this.valueExpression)));
                        d.sort();
                        return y.filter(d, function(a, c) {
                            return 0 === c || d[c - 1] !== a
                        })
                    },
                    isContinuousRenderer: function() {
                        var d = !1;
                        if (this.infos && 1 === this.infos.length) {
                            var a = this.attributeField
                              , c = this.normalizationField
                              , e = this.valueExpression;
                            d = this.getVisualVariablesForType("colorInfo", !1) || [];
                            var n = this.getVisualVariablesForType("sizeInfo", !1) || []
                              , t = this.getVisualVariablesForType("opacityInfo", !1) || [];
                            d = d.concat(n).concat(t);
                            d = y.some(d, function(g) {
                                return (g.field === a || g.valueExpression === e) && g.normalizationField == c
                            })
                        }
                        return d
                    },
                    _normalizationTypeEnums: [["field", "esriNormalizeByField"], ["log", "esriNormalizeByLog"], ["percent-of-total", "esriNormalizeByPercentOfTotal"]],
                    _classificationMethodEnums: [["natural-breaks", "esriClassifyNaturalBreaks"], ["equal-interval", "esriClassifyEqualInterval"], ["quantile", "esriClassifyQuantile"], ["standard-deviation", "esriClassifyStandardDeviation"], ["geometrical-interval", "esriClassifyGeometricalInterval"], ["defined-interval", "esriClassifyDefinedInterval"]],
                    _copy: function(d, a, c) {
                        y.forEach(d, function(e) {
                            var n = e.split(":");
                            if (1 < n.length) {
                                e = n[0];
                                var t = this["_" + e + "Enums"];
                                if ("rest" === n[1]) {
                                    var g = "1";
                                    var q = "0"
                                } else
                                    "sdk" === n[1] && (g = "0",
                                    q = "1")
                            }
                            n = a[e];
                            if (void 0 !== n && (c[e] = n,
                            t && g)) {
                                var x, v = t.length;
                                for (x = 0; x < v; x++)
                                    if (t[x][g] === n) {
                                        c[e] = t[x][q];
                                        break
                                    }
                            }
                        }, this)
                    },
                    _addBreakInfo: function(d, a) {
                        var c = d.minValue
                          , e = d.maxValue;
                        this.breaks.push([c, e]);
                        this.infos.push(d);
                        var n = d.symbol;
                        n && !n.declaredClass && (d.symbol = k.fromJson(n, a));
                        this._symbols[c + "-" + e] = d.symbol
                    },
                    toJson: function() {
                        var d = this.infos || []
                          , a = l.fixJson
                          , c = d[0] && d[0].minValue
                          , e = this.backgroundFillSymbol;
                        d = b.mixin(this.inherited(arguments), {
                            type: "classBreaks",
                            field: this.attributeField,
                            valueExpression: this.valueExpression,
                            valueExpressionTitle: this.valueExpressionTitle,
                            legendOptions: b.clone(this.legendOptions),
                            defaultSymbol: this.defaultSymbol && this.defaultSymbol.toJson(),
                            backgroundFillSymbol: e && e.toJson(),
                            minValue: -Infinity === c ? -Number.MAX_VALUE : c,
                            classBreakInfos: y.map(d, function(n) {
                                n = b.mixin({}, n);
                                n.symbol = n.symbol && n.symbol.toJson();
                                n.classMaxValue = Infinity === n.maxValue ? Number.MAX_VALUE : n.maxValue;
                                delete n.minValue;
                                delete n.maxValue;
                                return a(n)
                            })
                        });
                        this._copy(["defaultLabel", "classificationMethod:sdk", "normalizationType:sdk", "normalizationField", "normalizationTotal"], this, d);
                        d.hasOwnProperty("normalizationType") && !d.normalizationType && delete d.normalizationType;
                        d.hasOwnProperty("classificationMethod") && !d.classificationMethod && delete d.classificationMethod;
                        return a(d)
                    }
                });
                w("extend-esri") && b.setObject("renderer.ClassBreaksRenderer", C, m);
                return C
            })
        },
        "esri/renderers/TemporalRenderer": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "./Renderer"], function(C, y, b, w, m) {
                C = C(m, {
                    declaredClass: "esri.renderer.TemporalRenderer",
                    constructor: function(l, k, h, f) {
                        this.observationRenderer = l;
                        this.latestObservationRenderer = k;
                        this.trackRenderer = h;
                        this.observationAger = f
                    },
                    getSymbol: function(l) {
                        var k = l.getLayer()
                          , h = this.getObservationRenderer(l)
                          , f = h && h.getSymbol(l)
                          , d = this.observationAger;
                        k.timeInfo && k._map.timeExtent && h === this.observationRenderer && d && f && (f = d.getAgedSymbol(f, l));
                        return f
                    },
                    getObservationRenderer: function(l) {
                        return 0 === l.getLayer()._getKind(l) ? this.observationRenderer : this.latestObservationRenderer || this.observationRenderer
                    },
                    toJson: function() {
                        var l = {
                            type: "temporal"
                        };
                        l.observationRenderer = this.observationRenderer.toJson();
                        this.latestObservationRenderer && (l.latestObservationRenderer = this.latestObservationRenderer.toJson());
                        this.trackRenderer && (l.trackRenderer = this.trackRenderer.toJson());
                        this.observationAger && (l.observationAger = this.observationAger.toJson());
                        return l
                    }
                });
                b("extend-esri") && y.setObject("renderer.TemporalRenderer", C, w);
                return C
            })
        },
        "esri/renderers/SymbolAger": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function(C, y, b, w) {
                C = C(null, {
                    declaredClass: "esri.renderer.SymbolAger",
                    getAgedSymbol: function(m, l) {},
                    _setSymbolSize: function(m, l) {
                        switch (m.type) {
                        case "simplemarkersymbol":
                            m.setSize(l);
                            break;
                        case "picturemarkersymbol":
                            m.setWidth(l);
                            m.setHeight(l);
                            break;
                        case "simplelinesymbol":
                        case "cartographiclinesymbol":
                            m.setWidth(l);
                            break;
                        case "simplefillsymbol":
                        case "picturefillsymbol":
                            m.outline && m.outline.setWidth(l)
                        }
                    }
                });
                b("extend-esri") && y.setObject("renderer.SymbolAger", C, w);
                return C
            })
        },
        "esri/renderers/TimeClassBreaksAger": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                var a = C(d, {
                    declaredClass: "esri.renderer.TimeClassBreaksAger",
                    constructor: function(c, e) {
                        this.infos = c;
                        this.timeUnits = e || "day";
                        c.sort(function(n, t) {
                            return n.minAge < t.minAge ? -1 : n.minAge > t.minAge ? 1 : 0
                        })
                    },
                    getAgedSymbol: function(c, e) {
                        var n = e.getLayer();
                        e = e.attributes;
                        var t = k.isDefined;
                        c = h.fromJson(c.toJson());
                        var g = n._map.timeExtent.endTime;
                        if (!g)
                            return c;
                        var q = m.difference(new Date(e[n._startTimeField]), g, this.timeUnits);
                        y.some(this.infos, function(x) {
                            if (q >= x.minAge && q <= x.maxAge) {
                                var v = x.color
                                  , z = x.size;
                                x = x.alpha;
                                v && c.setColor(v);
                                t(z) && this._setSymbolSize(c, z);
                                t(x) && c.color && (c.color.a = x);
                                return !0
                            }
                        }, this);
                        return c
                    },
                    toJson: function() {
                        var c = {
                            agerClassBreakInfos: []
                        }, e;
                        c.timeUnits = this._getRestUnits(this.timeUnits);
                        for (e = 0; e < this.infos.length; e += 1) {
                            var n = this.infos[e];
                            var t = {};
                            t.oldestAge = Infinity === n.maxAge ? null : n.maxAge;
                            t.size = n.size;
                            n.color && (t.color = f.toJsonColor(n.color));
                            n.alpha && (t.alpha = Math.round(255 * n.alpha));
                            c.agerClassBreakInfos[e] = t
                        }
                        return c
                    },
                    _getRestUnits: function(c) {
                        var e = "esriTimeUnitsDays";
                        switch (c) {
                        case a.UNIT_SECONDS:
                            e = "esriTimeUnitsSeconds";
                            break;
                        case a.UNIT_MILLISECONDS:
                            e = "esriTimeUnitsMilliseconds";
                            break;
                        case a.UNIT_HOURS:
                            e = "esriTimeUnitsHours";
                            break;
                        case a.UNIT_MINUTES:
                            e = "esriTimeUnitsMinutes";
                            break;
                        case a.UNIT_MONTHS:
                            e = "esriTimeUnitsMonths";
                            break;
                        case a.UNIT_WEEKS:
                            e = "esriTimeUnitsWeeks";
                            break;
                        case a.UNIT_YEARS:
                            e = "esriTimeUnitsYears"
                        }
                        return e
                    }
                });
                b.mixin(a, {
                    UNIT_DAYS: "day",
                    UNIT_HOURS: "hour",
                    UNIT_MILLISECONDS: "millisecond",
                    UNIT_MINUTES: "minute",
                    UNIT_MONTHS: "month",
                    UNIT_SECONDS: "second",
                    UNIT_WEEKS: "week",
                    UNIT_YEARS: "year"
                });
                w("extend-esri") && b.setObject("renderer.TimeClassBreaksAger", a, l);
                return a
            })
        },
        "esri/renderers/TimeRampAger": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "), function(C, y, b, w, m, l, k, h) {
                C = C(h, {
                    declaredClass: "esri.renderer.TimeRampAger",
                    constructor: function(f, d, a) {
                        this.colorRange = f;
                        this.sizeRange = d;
                        this.alphaRange = a
                    },
                    getAgedSymbol: function(f, d) {
                        var a = d.getLayer()
                          , c = d.attributes;
                        f = l.fromJson(f.toJson());
                        var e = a._map.timeExtent;
                        d = e.startTime;
                        e = e.endTime;
                        if (!d || !e)
                            return f;
                        d = d.getTime();
                        e = e.getTime();
                        a = new Date(c[a._startTimeField]);
                        a = a.getTime();
                        a < d && (a = d);
                        a = e === d ? 1 : (a - d) / (e - d);
                        if (d = this.sizeRange)
                            c = d[0],
                            e = d[1],
                            d = Math.abs(e - c) * a,
                            this._setSymbolSize(f, c < e ? c + d : c - d);
                        if (d = this.colorRange) {
                            e = d[0];
                            var n = d[1]
                              , t = Math.round;
                            c = new b;
                            var g = e.r
                              , q = n.r;
                            d = Math.abs(q - g) * a;
                            c.r = t(g < q ? g + d : g - d);
                            g = e.g;
                            q = n.g;
                            d = Math.abs(q - g) * a;
                            c.g = t(g < q ? g + d : g - d);
                            g = e.b;
                            q = n.b;
                            d = Math.abs(q - g) * a;
                            c.b = t(g < q ? g + d : g - d);
                            e = e.a;
                            n = n.a;
                            d = Math.abs(n - e) * a;
                            c.a = e < n ? e + d : e - d;
                            f.setColor(c)
                        }
                        c = f.color;
                        (d = this.alphaRange) && c && (e = d[0],
                        n = d[1],
                        d = Math.abs(n - e) * a,
                        c.a = e < n ? e + d : e - d);
                        return f
                    },
                    toJson: function() {
                        var f = {};
                        this.sizeRange && (f.sizeRange = this.sizeRange);
                        this.colorRange && (f.colorRange = [k.toJsonColor(this.colorRange[0]), k.toJsonColor(this.colorRange[1])]);
                        this.alphaRange && (f.alphaRange = [Math.round(255 * this.alphaRange[0]), Math.round(255 * this.alphaRange[1])]);
                        return f
                    }
                });
                w("extend-esri") && y.setObject("renderer.TimeRampAger", C, m);
                return C
            })
        },
        "esri/renderers/StretchRenderer": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = {
                    TYPE_NONE: "none",
                    TYPE_STANDARDDEVIATION: "standardDeviation",
                    TYPE_HISTOGRAMEQUALIZATION: "histogramEqualization",
                    TYPE_MINMAX: "minMax",
                    TYPE_PERCENTCLIP: "percentClip",
                    TYPE_SIGMOID: "sigmoid"
                };
                C = C(null, {
                    declaredClass: "esri.renderer.StretchRenderer",
                    constructor: function(d) {
                        d = d || {};
                        this.stretchType = f.TYPE_NONE;
                        this.dra = !0;
                        this.statistics = [];
                        this.gamma = [];
                        this.computeGamma = this.useGamma = !1;
                        this.sigmoidStrengthLevel = this.numberOfStandardDeviations = this.minPercent = this.maxPercent = this.min = this.max = null;
                        b.mixin(this, d);
                        this.colorRamp = h.fromJson(d.colorRamp)
                    },
                    toJson: function() {
                        var d = {
                            type: "rasterStretch",
                            stretchType: this.stretchType,
                            colorRamp: this.colorRamp && this.colorRamp.toJson(),
                            min: this.min,
                            max: this.max,
                            numberOfStandardDeviations: this.numberOfStandardDeviations,
                            statistics: b.clone(this.statistics),
                            dra: this.dra,
                            minPercent: this.minPercent,
                            maxPercent: this.maxPercent,
                            useGamma: this.useGamma,
                            gamma: b.clone(this.gamma),
                            computeGamma: this.computeGamma,
                            sigmoidStrengthLevel: this.sigmoidStrengthLevel
                        };
                        return l.fixJson(d)
                    },
                    toRenderingRule: function(d) {
                        d = d || {};
                        var a = new k;
                        a.functionName = "Stretch";
                        var c = this._convertStretchTypeEnumToIndex(this.stretchType)
                          , e = {
                            StretchType: c,
                            Statistics: this.statistics,
                            DRA: this.dra,
                            UseGamma: this.useGamma,
                            Gamma: this.gamma,
                            ComputeGamma: this.computeGamma
                        };
                        l.isDefined(this.min) && (e.Min = this.min);
                        l.isDefined(this.min) && (e.Max = this.max);
                        3 === c ? (e.NumberOfStandardDeviations = this.numberOfStandardDeviations,
                        a.outputPixelType = "U8") : 6 === c ? (e.MinPercent = parseFloat(this.minPercent),
                        e.MaxPercent = parseFloat(this.maxPercent),
                        a.outputPixelType = "U8") : 5 === c ? a.outputPixelType = "U8" : 9 === c && (e.SigmoidStrengthLevel = this.sigmoidStrengthLevel);
                        a.functionArguments = e;
                        a.variableName = "Raster";
                        return this.colorRamp ? (c = new k,
                        c.functionArguments = d.convertToColormap ? {
                            Colormap: h.convertColorRampToColormap(this.colorRamp, 256)
                        } : {
                            colorRamp: this.colorRamp.toJson()
                        },
                        c.variableName = "Raster",
                        c.functionName = "Colormap",
                        c.functionArguments.Raster = a,
                        c) : a
                    },
                    _convertStretchTypeEnumToIndex: function(d) {
                        var a = 0;
                        d === f.TYPE_STANDARDDEVIATION ? a = 3 : d === f.TYPE_HISTOGRAMEQUALIZATION ? a = 4 : d === f.TYPE_MINMAX ? a = 5 : d === f.TYPE_PERCENTCLIP ? a = 6 : d === f.TYPE_SIGMOID && (a = 9);
                        return a
                    },
                    _convertStretchTypeIndexToEnum: function(d) {
                        var a = f.TYPE_NONE;
                        3 === d ? a = f.TYPE_STANDARDDEVIATION : 4 === d ? a = f.TYPE_HISTOGRAMEQUALIZATION : 5 === d ? a = f.TYPE_MINMAX : 6 === d ? a = f.TYPE_PERCENTCLIP : 9 === d && (a = f.TYPE_SIGMOID);
                        return a
                    }
                });
                b.mixin(C, f);
                w("extend-esri") && b.setObject("renderer.StretchRenderer", C, m);
                return C
            })
        },
        "esri/layers/RasterFunction": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "../lang"], function(C, y, b, w, m) {
                var l = C(null, {
                    declaredClass: "esri.layers.RasterFunction",
                    functionName: null,
                    arguments: null,
                    functionArguments: null,
                    variableName: null,
                    outputPixelType: null,
                    _isTemplate: null,
                    _templateJson: null,
                    constructor: function(k) {
                        if (y.isObject(k)) {
                            this._isRFTJson(k) && (this._isTemplate = !0,
                            this._templateJson = k);
                            var h = 0;
                            this.functionName = k.rasterFunction || k.name;
                            this.functionArguments = y.clone(k.rasterFunctionArguments || k.arguments);
                            y.mixin(this, k);
                            if (k = this.functionArguments)
                                if (k.Raster = this._toRasterFunction(k.Raster),
                                k.Raster2 = this._toRasterFunction(k.Raster2),
                                k.DEM = this._toRasterFunction(k.DEM),
                                k.FillRaster = this._toRasterFunction(k.FillRaster),
                                k.Rasters && k.Rasters.length)
                                    for (h = 0; h < k.Rasters.length; h++)
                                        k.Rasters[h] = this._toRasterFunction(k.Rasters[h])
                        }
                    },
                    _isRFTJson: function(k) {
                        return k.name && k.arguments && k.function && k.hasOwnProperty("functionType")
                    },
                    _toRasterFunction: function(k) {
                        return k && (k.rasterFunction || k.functionName) ? new l(k) : k
                    },
                    _rfToJson: function(k) {
                        k && "esri.layers.RasterFunction" === k.declaredClass && (k = k.toJson());
                        return k
                    },
                    toJson: function() {
                        if (this._isTemplate)
                            return this._templateJson;
                        var k = y.clone(this.functionArguments || this.arguments);
                        if (k && (k.Raster = this._rfToJson(k.Raster),
                        k.Raster2 = this._rfToJson(k.Raster2),
                        k.DEM = this._rfToJson(k.DEM),
                        k.FillRaster = this._rfToJson(k.FillRaster),
                        k.Rasters && k.Rasters.length)) {
                            var h, f = [];
                            for (h = 0; h < k.Rasters.length; h++)
                                f.push(this._rfToJson(k.Rasters[h]));
                            k.Rasters = f
                        }
                        return m.filter({
                            rasterFunction: this.functionName,
                            rasterFunctionArguments: k,
                            variableName: this.variableName,
                            outputPixelType: this.outputPixelType ? this.outputPixelType : null
                        }, function(d) {
                            if (null !== d && void 0 !== d)
                                return !0
                        })
                    }
                });
                b("extend-esri") && y.setObject("layers.RasterFunction", l, w);
                return l
            })
        },
        "esri/renderers/colorRampUtils": function() {
            define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "), function(C, y, b, w, m, l, k) {
                function h(v) {
                    if (null == v || "algorithmic" !== v.type && !v.fromColor)
                        return v;
                    var z = v.declaredClass ? new w : C.clone(v);
                    z.fromColor = v.toColor;
                    z.toColor = v.fromColor;
                    z.algorithm = v.algorithm;
                    return z
                }
                function f(v) {
                    if (null == v)
                        return null;
                    if ("multipart" === v.type || v.colorRamps && 0 < v.colorRamps.length) {
                        var z = v.declaredClass ? new m : C.clone(v);
                        z.colorRamps = y.map(v.colorRamps.slice().reverse(), function(u) {
                            return h(u)
                        });
                        return z
                    }
                    return h(v)
                }
                function d(v, z, u) {
                    if (!v)
                        return {
                            id: null,
                            isInverted: !1
                        };
                    var p = v.name;
                    p && (v.fromColor || v.colorRamps) && (v.name = void 0);
                    var r = a(v, z, u);
                    if (r)
                        return p && (v.name = p),
                        {
                            id: r,
                            isInverted: !1
                        };
                    r = a(v, z, u, !0);
                    p && (v.name = p);
                    return r ? {
                        id: r,
                        isInverted: !0
                    } : p && (r = a(v, z, u)) ? {
                        id: r,
                        isInverted: !1
                    } : {
                        id: null,
                        isInverted: !1
                    }
                }
                function a(v, z, u, p) {
                    if (v) {
                        p && (v = f(v));
                        z = z || g;
                        u = u || q;
                        var r = null;
                        p = v.declaredClass;
                        var B, D;
                        if ((B = "string" === typeof v ? v : v.name) && y.some(u, function(G) {
                            if (G.name === B)
                                return r = G.id,
                                !0
                        }) && r)
                            return r;
                        "esri.tasks.AlgorithmicColorRamp" === p ? y.some(z, function(G) {
                            if (e(v.fromColor.toRgb(), G.fromColor) && e(v.toColor.toRgb(), G.toColor))
                                return r = G.id,
                                !0
                        }, this) : "esri.tasks.MultipartColorRamp" === p && y.some(z, function(G) {
                            if (v.colorRamps && G.colorRamps && v.colorRamps.length === G.colorRamps.length && (D = v.colorRamps,
                            !y.some(G.colorRamps, function(A, E) {
                                if (!e(D[E].fromColor.toRgb(), A.fromColor) || !e(D[E].toColor.toRgb(), A.toColor))
                                    return !0
                            }, this))) {
                                if (r)
                                    return !0;
                                r = G.id
                            }
                        }, this);
                        return r
                    }
                }
                function c(v) {
                    var z = new w
                      , u = v.algorithm;
                    z.fromColor = l.toDojoColor(v.fromColor);
                    z.toColor = l.toDojoColor(v.toColor);
                    u ? "esriCIELabAlgorithm" === u ? z.algorithm = "cie-lab" : "esriHSVAlgorithm" === u ? z.algorithm = "hsv" : "esriLabLChAlgorithm" === u && (z.algorithm = "lab-lch") : z.algorithm = "hsv";
                    return z
                }
                function e(v, z) {
                    if (!v || !z)
                        return !1;
                    v = v.slice(0, 3);
                    z = z.slice(0, 3);
                    return !y.some(v, function(u, p) {
                        if (u > z[p] + 2 || u < z[p] - 2)
                            return !0
                    })
                }
                function n(v, z, u) {
                    v = k.toLAB(v);
                    z = k.toLAB(z);
                    return k.toRGB({
                        l: v.l * (1 - u) + u * z.l,
                        a: v.a * (1 - u) + u * z.a,
                        b: v.b * (1 - u) + u * z.b
                    })
                }
                var t = {}
                  , g = [{
                    id: "none",
                    selected: !0
                }, {
                    id: "aspect_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [190, 190, 190],
                        toColor: [255, 45, 8]
                    }, {
                        fromColor: [255, 45, 8],
                        toColor: [255, 181, 61]
                    }, {
                        fromColor: [255, 181, 61],
                        toColor: [255, 254, 52]
                    }, {
                        fromColor: [255, 254, 52],
                        toColor: [0, 251, 50]
                    }, {
                        fromColor: [0, 251, 50],
                        toColor: [255, 254, 52]
                    }, {
                        fromColor: [0, 253, 255],
                        toColor: [0, 181, 255]
                    }, {
                        fromColor: [0, 181, 255],
                        toColor: [26, 35, 253]
                    }, {
                        fromColor: [26, 35, 253],
                        toColor: [255, 57, 251]
                    }, {
                        fromColor: [255, 57, 251],
                        toColor: [255, 45, 8]
                    }]
                }, {
                    id: "blackToWhite_predefined",
                    fromColor: [0, 0, 0],
                    toColor: [255, 255, 255]
                }, {
                    id: "blueBright_predefined",
                    fromColor: [204, 204, 255],
                    toColor: [0, 0, 224]
                }, {
                    id: "blueLightToDark_predefined",
                    fromColor: [211, 229, 232],
                    toColor: [46, 100, 140]
                }, {
                    id: "blueGreenBright_predefined",
                    fromColor: [203, 245, 234],
                    toColor: [48, 207, 146]
                }, {
                    id: "blueGreenLightToDark_predefined",
                    fromColor: [216, 242, 237],
                    toColor: [21, 79, 74]
                }, {
                    id: "brownLightToDark_predefined",
                    fromColor: [240, 236, 170],
                    toColor: [102, 72, 48]
                }, {
                    id: "brownToBlueGreenDivergingBright_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [156, 85, 31],
                        toColor: [255, 255, 191]
                    }, {
                        fromColor: [255, 255, 191],
                        toColor: [33, 130, 145]
                    }]
                }, {
                    id: "brownToBlueGreenDivergingDark_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [110, 70, 45],
                        toColor: [204, 204, 102]
                    }, {
                        fromColor: [204, 204, 102],
                        toColor: [48, 100, 102]
                    }]
                }, {
                    id: "cividis_predefined",
                    type: "multipart",
                    colorRamps: [{
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 32, 77, 255],
                        toColor: [0, 33, 79, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 33, 79, 255],
                        toColor: [0, 34, 80, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 34, 80, 255],
                        toColor: [0, 35, 82, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 35, 82, 255],
                        toColor: [0, 35, 84, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 35, 84, 255],
                        toColor: [0, 36, 85, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 36, 85, 255],
                        toColor: [0, 37, 87, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 37, 87, 255],
                        toColor: [0, 38, 89, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 38, 89, 255],
                        toColor: [0, 38, 91, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 38, 91, 255],
                        toColor: [0, 39, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 39, 92, 255],
                        toColor: [0, 40, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 40, 94, 255],
                        toColor: [0, 40, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 40, 96, 255],
                        toColor: [0, 41, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 41, 98, 255],
                        toColor: [0, 42, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 42, 100, 255],
                        toColor: [0, 42, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 42, 101, 255],
                        toColor: [0, 43, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 43, 103, 255],
                        toColor: [0, 44, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 44, 105, 255],
                        toColor: [0, 45, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 45, 107, 255],
                        toColor: [0, 45, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 45, 109, 255],
                        toColor: [0, 46, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 46, 110, 255],
                        toColor: [0, 47, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 47, 111, 255],
                        toColor: [0, 47, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 47, 112, 255],
                        toColor: [0, 47, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 47, 112, 255],
                        toColor: [0, 48, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 48, 112, 255],
                        toColor: [0, 49, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 49, 112, 255],
                        toColor: [0, 49, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 49, 112, 255],
                        toColor: [0, 50, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 50, 112, 255],
                        toColor: [0, 51, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 51, 111, 255],
                        toColor: [0, 52, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 52, 111, 255],
                        toColor: [0, 52, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 52, 111, 255],
                        toColor: [0, 53, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 53, 111, 255],
                        toColor: [1, 54, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [1, 54, 111, 255],
                        toColor: [6, 55, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [6, 55, 110, 255],
                        toColor: [11, 55, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [11, 55, 110, 255],
                        toColor: [15, 56, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [15, 56, 110, 255],
                        toColor: [18, 57, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [18, 57, 110, 255],
                        toColor: [21, 57, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [21, 57, 110, 255],
                        toColor: [24, 58, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [24, 58, 110, 255],
                        toColor: [26, 59, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [26, 59, 109, 255],
                        toColor: [29, 60, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [29, 60, 109, 255],
                        toColor: [31, 60, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 60, 109, 255],
                        toColor: [33, 61, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [33, 61, 109, 255],
                        toColor: [35, 62, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [35, 62, 109, 255],
                        toColor: [37, 63, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [37, 63, 109, 255],
                        toColor: [38, 63, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [38, 63, 109, 255],
                        toColor: [40, 64, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [40, 64, 108, 255],
                        toColor: [42, 65, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [42, 65, 108, 255],
                        toColor: [43, 65, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [43, 65, 108, 255],
                        toColor: [45, 66, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [45, 66, 108, 255],
                        toColor: [46, 67, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [46, 67, 108, 255],
                        toColor: [48, 68, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [48, 68, 108, 255],
                        toColor: [49, 68, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [49, 68, 108, 255],
                        toColor: [51, 69, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [51, 69, 108, 255],
                        toColor: [52, 70, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [52, 70, 108, 255],
                        toColor: [53, 70, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [53, 70, 108, 255],
                        toColor: [55, 71, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [55, 71, 108, 255],
                        toColor: [56, 72, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [56, 72, 108, 255],
                        toColor: [57, 73, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [57, 73, 108, 255],
                        toColor: [58, 73, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [58, 73, 108, 255],
                        toColor: [60, 74, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [60, 74, 108, 255],
                        toColor: [61, 75, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [61, 75, 108, 255],
                        toColor: [62, 75, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [62, 75, 108, 255],
                        toColor: [63, 76, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [63, 76, 108, 255],
                        toColor: [64, 77, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [64, 77, 108, 255],
                        toColor: [65, 78, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [65, 78, 108, 255],
                        toColor: [67, 78, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [67, 78, 108, 255],
                        toColor: [68, 79, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [68, 79, 108, 255],
                        toColor: [69, 80, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 80, 108, 255],
                        toColor: [70, 80, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 80, 108, 255],
                        toColor: [71, 81, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 81, 108, 255],
                        toColor: [72, 82, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 82, 108, 255],
                        toColor: [73, 83, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [73, 83, 108, 255],
                        toColor: [74, 83, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [74, 83, 108, 255],
                        toColor: [75, 84, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [75, 84, 108, 255],
                        toColor: [76, 85, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [76, 85, 108, 255],
                        toColor: [77, 86, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [77, 86, 108, 255],
                        toColor: [78, 86, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [78, 86, 108, 255],
                        toColor: [79, 87, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [79, 87, 108, 255],
                        toColor: [80, 88, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [80, 88, 108, 255],
                        toColor: [81, 88, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [81, 88, 109, 255],
                        toColor: [82, 89, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [82, 89, 109, 255],
                        toColor: [83, 90, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [83, 90, 109, 255],
                        toColor: [84, 91, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [84, 91, 109, 255],
                        toColor: [85, 91, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [85, 91, 109, 255],
                        toColor: [86, 92, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [86, 92, 109, 255],
                        toColor: [87, 93, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [87, 93, 109, 255],
                        toColor: [88, 93, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [88, 93, 109, 255],
                        toColor: [89, 94, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [89, 94, 110, 255],
                        toColor: [90, 95, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [90, 95, 110, 255],
                        toColor: [91, 96, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [91, 96, 110, 255],
                        toColor: [92, 96, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [92, 96, 110, 255],
                        toColor: [93, 97, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [93, 97, 110, 255],
                        toColor: [94, 98, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [94, 98, 110, 255],
                        toColor: [94, 99, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [94, 99, 111, 255],
                        toColor: [95, 99, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [95, 99, 111, 255],
                        toColor: [96, 100, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [96, 100, 111, 255],
                        toColor: [97, 101, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [97, 101, 111, 255],
                        toColor: [98, 101, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [98, 101, 111, 255],
                        toColor: [99, 102, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [99, 102, 112, 255],
                        toColor: [100, 103, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [100, 103, 112, 255],
                        toColor: [101, 104, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [101, 104, 112, 255],
                        toColor: [102, 104, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [102, 104, 112, 255],
                        toColor: [103, 105, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [103, 105, 113, 255],
                        toColor: [104, 106, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [104, 106, 113, 255],
                        toColor: [104, 107, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [104, 107, 113, 255],
                        toColor: [105, 107, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [105, 107, 113, 255],
                        toColor: [106, 108, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [106, 108, 114, 255],
                        toColor: [107, 109, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [107, 109, 114, 255],
                        toColor: [108, 109, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [108, 109, 114, 255],
                        toColor: [109, 110, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [109, 110, 115, 255],
                        toColor: [110, 111, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [110, 111, 115, 255],
                        toColor: [111, 112, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [111, 112, 115, 255],
                        toColor: [111, 112, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [111, 112, 115, 255],
                        toColor: [112, 113, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [112, 113, 116, 255],
                        toColor: [113, 114, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [113, 114, 116, 255],
                        toColor: [114, 115, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [114, 115, 116, 255],
                        toColor: [115, 115, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [115, 115, 117, 255],
                        toColor: [116, 116, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [116, 116, 117, 255],
                        toColor: [117, 117, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [117, 117, 117, 255],
                        toColor: [117, 118, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [117, 118, 118, 255],
                        toColor: [118, 118, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [118, 118, 118, 255],
                        toColor: [119, 119, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [119, 119, 119, 255],
                        toColor: [120, 120, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [120, 120, 119, 255],
                        toColor: [121, 121, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [121, 121, 119, 255],
                        toColor: [122, 121, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [122, 121, 120, 255],
                        toColor: [123, 122, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [123, 122, 120, 255],
                        toColor: [124, 123, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [124, 123, 120, 255],
                        toColor: [124, 124, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [124, 124, 121, 255],
                        toColor: [125, 124, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [125, 124, 121, 255],
                        toColor: [126, 125, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [126, 125, 121, 255],
                        toColor: [127, 126, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [127, 126, 121, 255],
                        toColor: [128, 127, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [128, 127, 121, 255],
                        toColor: [129, 127, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [129, 127, 121, 255],
                        toColor: [130, 128, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [130, 128, 121, 255],
                        toColor: [131, 129, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [131, 129, 121, 255],
                        toColor: [132, 130, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [132, 130, 121, 255],
                        toColor: [133, 130, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [133, 130, 121, 255],
                        toColor: [134, 131, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [134, 131, 121, 255],
                        toColor: [135, 132, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [135, 132, 121, 255],
                        toColor: [136, 133, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [136, 133, 121, 255],
                        toColor: [137, 134, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [137, 134, 121, 255],
                        toColor: [138, 134, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [138, 134, 121, 255],
                        toColor: [139, 135, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [139, 135, 121, 255],
                        toColor: [140, 136, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [140, 136, 121, 255],
                        toColor: [141, 137, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [141, 137, 121, 255],
                        toColor: [142, 137, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [142, 137, 121, 255],
                        toColor: [143, 138, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [143, 138, 121, 255],
                        toColor: [144, 139, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [144, 139, 121, 255],
                        toColor: [145, 140, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [145, 140, 121, 255],
                        toColor: [146, 141, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [146, 141, 121, 255],
                        toColor: [147, 141, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [147, 141, 121, 255],
                        toColor: [148, 142, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [148, 142, 121, 255],
                        toColor: [149, 143, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [149, 143, 121, 255],
                        toColor: [150, 144, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [150, 144, 121, 255],
                        toColor: [151, 145, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [151, 145, 120, 255],
                        toColor: [152, 145, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [152, 145, 120, 255],
                        toColor: [153, 146, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [153, 146, 120, 255],
                        toColor: [154, 147, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [154, 147, 120, 255],
                        toColor: [155, 148, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [155, 148, 120, 255],
                        toColor: [156, 149, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [156, 149, 120, 255],
                        toColor: [157, 149, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [157, 149, 120, 255],
                        toColor: [158, 150, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [158, 150, 120, 255],
                        toColor: [159, 151, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [159, 151, 119, 255],
                        toColor: [160, 152, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [160, 152, 119, 255],
                        toColor: [161, 153, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [161, 153, 119, 255],
                        toColor: [162, 153, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [162, 153, 119, 255],
                        toColor: [163, 154, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [163, 154, 119, 255],
                        toColor: [164, 155, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [164, 155, 118, 255],
                        toColor: [165, 156, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [165, 156, 118, 255],
                        toColor: [166, 157, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [166, 157, 118, 255],
                        toColor: [167, 158, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [167, 158, 118, 255],
                        toColor: [168, 158, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [168, 158, 118, 255],
                        toColor: [169, 159, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [169, 159, 117, 255],
                        toColor: [170, 160, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [170, 160, 117, 255],
                        toColor: [171, 161, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [171, 161, 117, 255],
                        toColor: [172, 162, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [172, 162, 117, 255],
                        toColor: [173, 162, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [173, 162, 116, 255],
                        toColor: [174, 163, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [174, 163, 116, 255],
                        toColor: [175, 164, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [175, 164, 116, 255],
                        toColor: [177, 165, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [177, 165, 115, 255],
                        toColor: [178, 166, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [178, 166, 115, 255],
                        toColor: [179, 167, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [179, 167, 115, 255],
                        toColor: [180, 168, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [180, 168, 115, 255],
                        toColor: [181, 168, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [181, 168, 114, 255],
                        toColor: [182, 169, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [182, 169, 114, 255],
                        toColor: [183, 170, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [183, 170, 114, 255],
                        toColor: [184, 171, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [184, 171, 113, 255],
                        toColor: [185, 172, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [185, 172, 113, 255],
                        toColor: [186, 173, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [186, 173, 113, 255],
                        toColor: [187, 173, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [187, 173, 112, 255],
                        toColor: [188, 174, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [188, 174, 112, 255],
                        toColor: [189, 175, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [189, 175, 111, 255],
                        toColor: [190, 176, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [190, 176, 111, 255],
                        toColor: [191, 177, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [191, 177, 111, 255],
                        toColor: [192, 178, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [192, 178, 110, 255],
                        toColor: [194, 179, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [194, 179, 110, 255],
                        toColor: [195, 180, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [195, 180, 109, 255],
                        toColor: [196, 180, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [196, 180, 109, 255],
                        toColor: [197, 181, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [197, 181, 109, 255],
                        toColor: [198, 182, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [198, 182, 108, 255],
                        toColor: [199, 183, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [199, 183, 108, 255],
                        toColor: [200, 184, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [200, 184, 107, 255],
                        toColor: [201, 185, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [201, 185, 107, 255],
                        toColor: [202, 186, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [202, 186, 106, 255],
                        toColor: [203, 187, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [203, 187, 106, 255],
                        toColor: [204, 187, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [204, 187, 105, 255],
                        toColor: [205, 188, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [205, 188, 105, 255],
                        toColor: [207, 189, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [207, 189, 104, 255],
                        toColor: [208, 190, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [208, 190, 104, 255],
                        toColor: [209, 191, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [209, 191, 103, 255],
                        toColor: [210, 192, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [210, 192, 103, 255],
                        toColor: [211, 193, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [211, 193, 102, 255],
                        toColor: [212, 194, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [212, 194, 101, 255],
                        toColor: [213, 195, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [213, 195, 101, 255],
                        toColor: [214, 196, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [214, 196, 100, 255],
                        toColor: [215, 196, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [215, 196, 100, 255],
                        toColor: [217, 197, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [217, 197, 99, 255],
                        toColor: [218, 198, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [218, 198, 98, 255],
                        toColor: [219, 199, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [219, 199, 98, 255],
                        toColor: [220, 200, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [220, 200, 97, 255],
                        toColor: [221, 201, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [221, 201, 96, 255],
                        toColor: [222, 202, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [222, 202, 96, 255],
                        toColor: [223, 203, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [223, 203, 95, 255],
                        toColor: [224, 204, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [224, 204, 94, 255],
                        toColor: [226, 205, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [226, 205, 94, 255],
                        toColor: [227, 206, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [227, 206, 93, 255],
                        toColor: [228, 207, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [228, 207, 92, 255],
                        toColor: [229, 208, 91, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [229, 208, 91, 255],
                        toColor: [230, 209, 91, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [230, 209, 91, 255],
                        toColor: [231, 209, 90, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [231, 209, 90, 255],
                        toColor: [233, 210, 89, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [233, 210, 89, 255],
                        toColor: [234, 211, 88, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [234, 211, 88, 255],
                        toColor: [235, 212, 87, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [235, 212, 87, 255],
                        toColor: [236, 213, 86, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [236, 213, 86, 255],
                        toColor: [237, 214, 86, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [237, 214, 86, 255],
                        toColor: [238, 215, 85, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [238, 215, 85, 255],
                        toColor: [239, 216, 84, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [239, 216, 84, 255],
                        toColor: [241, 217, 83, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [241, 217, 83, 255],
                        toColor: [242, 218, 82, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 218, 82, 255],
                        toColor: [243, 219, 81, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 219, 81, 255],
                        toColor: [244, 220, 80, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 220, 80, 255],
                        toColor: [245, 221, 79, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 221, 79, 255],
                        toColor: [246, 222, 78, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 222, 78, 255],
                        toColor: [248, 223, 77, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 223, 77, 255],
                        toColor: [249, 224, 75, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 224, 75, 255],
                        toColor: [250, 225, 74, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 225, 74, 255],
                        toColor: [251, 226, 73, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 226, 73, 255],
                        toColor: [252, 227, 72, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 227, 72, 255],
                        toColor: [254, 228, 71, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 228, 71, 255],
                        toColor: [255, 229, 69, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 229, 69, 255],
                        toColor: [255, 230, 68, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 230, 68, 255],
                        toColor: [255, 231, 67, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 231, 67, 255],
                        toColor: [255, 232, 66, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 232, 66, 255],
                        toColor: [255, 233, 67, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 233, 67, 255],
                        toColor: [255, 234, 69, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 234, 69, 255],
                        toColor: [255, 235, 70, 255]
                    }]
                }, {
                    id: "coefficientBias_predefined",
                    fromColor: [214, 214, 255],
                    toColor: [0, 57, 148]
                }, {
                    id: "coldToHotDiverging_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [69, 117, 181],
                        toColor: [255, 255, 191]
                    }, {
                        fromColor: [255, 255, 191],
                        toColor: [214, 47, 39]
                    }]
                }, {
                    id: "conditionNumber_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [0, 97, 0],
                        toColor: [255, 255, 0]
                    }, {
                        fromColor: [255, 255, 0],
                        toColor: [255, 34, 0]
                    }]
                }, {
                    id: "cyanToPurple_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [0, 245, 245],
                        toColor: [0, 0, 245]
                    }, {
                        fromColor: [0, 0, 245],
                        toColor: [245, 0, 245]
                    }]
                }, {
                    id: "cyanLightToBlueDark_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [182, 237, 240],
                        toColor: [31, 131, 224]
                    }, {
                        fromColor: [31, 131, 224],
                        toColor: [9, 9, 145]
                    }]
                }, {
                    id: "distance_predefined",
                    fromColor: [255, 200, 0],
                    toColor: [0, 0, 255]
                }, {
                    id: "elevation1_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [175, 240, 233],
                        toColor: [255, 255, 179]
                    }, {
                        fromColor: [255, 255, 179],
                        toColor: [0, 128, 64]
                    }, {
                        fromColor: [0, 128, 64],
                        toColor: [252, 186, 3]
                    }, {
                        fromColor: [252, 186, 3],
                        toColor: [128, 0, 0]
                    }, {
                        fromColor: [120, 0, 0],
                        toColor: [105, 48, 13]
                    }, {
                        fromColor: [105, 48, 13],
                        toColor: [171, 171, 171]
                    }, {
                        fromColor: [171, 171, 171],
                        toColor: [255, 252, 255]
                    }]
                }, {
                    id: "elevation2_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [118, 219, 211],
                        toColor: [255, 255, 199]
                    }, {
                        fromColor: [255, 255, 199],
                        toColor: [255, 255, 128]
                    }, {
                        fromColor: [255, 255, 128],
                        toColor: [217, 194, 121]
                    }, {
                        fromColor: [217, 194, 121],
                        toColor: [135, 96, 38]
                    }, {
                        fromColor: [135, 96, 38],
                        toColor: [150, 150, 181]
                    }, {
                        fromColor: [150, 150, 181],
                        toColor: [181, 150, 181]
                    }, {
                        fromColor: [181, 150, 181],
                        toColor: [255, 252, 255]
                    }]
                }, {
                    id: "errors_predefined",
                    fromColor: [255, 235, 214],
                    toColor: [196, 10, 10]
                }, {
                    id: "grayLightToDark_predefined",
                    fromColor: [219, 219, 219],
                    toColor: [69, 69, 69]
                }, {
                    id: "greenBright_predefined",
                    fromColor: [204, 255, 204],
                    toColor: [14, 204, 14]
                }, {
                    id: "greenLightToDark_predefined",
                    fromColor: [220, 245, 233],
                    toColor: [34, 102, 51]
                }, {
                    id: "greenToBlue_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [32, 204, 16],
                        toColor: [0, 242, 242]
                    }, {
                        fromColor: [0, 242, 242],
                        toColor: [2, 33, 227]
                    }]
                }, {
                    id: "inferno_predefined",
                    type: "multipart",
                    colorRamps: [{
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 0, 4, 255],
                        toColor: [1, 0, 5, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [1, 0, 5, 255],
                        toColor: [1, 1, 6, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [1, 1, 6, 255],
                        toColor: [1, 1, 8, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [1, 1, 8, 255],
                        toColor: [2, 1, 10, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [2, 1, 10, 255],
                        toColor: [2, 2, 12, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [2, 2, 12, 255],
                        toColor: [2, 2, 14, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [2, 2, 14, 255],
                        toColor: [3, 2, 16, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [3, 2, 16, 255],
                        toColor: [4, 3, 18, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [4, 3, 18, 255],
                        toColor: [4, 3, 21, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [4, 3, 21, 255],
                        toColor: [5, 4, 23, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [5, 4, 23, 255],
                        toColor: [6, 4, 25, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [6, 4, 25, 255],
                        toColor: [7, 5, 27, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [7, 5, 27, 255],
                        toColor: [8, 6, 29, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [8, 6, 29, 255],
                        toColor: [9, 6, 32, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [9, 6, 32, 255],
                        toColor: [10, 7, 34, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [10, 7, 34, 255],
                        toColor: [11, 7, 36, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [11, 7, 36, 255],
                        toColor: [12, 8, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [12, 8, 38, 255],
                        toColor: [13, 8, 41, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [13, 8, 41, 255],
                        toColor: [14, 9, 43, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [14, 9, 43, 255],
                        toColor: [16, 9, 45, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [16, 9, 45, 255],
                        toColor: [17, 10, 48, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [17, 10, 48, 255],
                        toColor: [18, 10, 50, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [18, 10, 50, 255],
                        toColor: [20, 11, 53, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [20, 11, 53, 255],
                        toColor: [21, 11, 55, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [21, 11, 55, 255],
                        toColor: [22, 11, 58, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [22, 11, 58, 255],
                        toColor: [24, 12, 60, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [24, 12, 60, 255],
                        toColor: [25, 12, 62, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [25, 12, 62, 255],
                        toColor: [27, 12, 65, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [27, 12, 65, 255],
                        toColor: [28, 12, 67, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [28, 12, 67, 255],
                        toColor: [30, 12, 70, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [30, 12, 70, 255],
                        toColor: [31, 12, 72, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 12, 72, 255],
                        toColor: [33, 12, 74, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [33, 12, 74, 255],
                        toColor: [35, 12, 77, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [35, 12, 77, 255],
                        toColor: [36, 12, 79, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [36, 12, 79, 255],
                        toColor: [38, 12, 81, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [38, 12, 81, 255],
                        toColor: [40, 11, 83, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [40, 11, 83, 255],
                        toColor: [42, 11, 85, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [42, 11, 85, 255],
                        toColor: [43, 11, 87, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [43, 11, 87, 255],
                        toColor: [45, 11, 89, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [45, 11, 89, 255],
                        toColor: [47, 10, 91, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [47, 10, 91, 255],
                        toColor: [49, 10, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [49, 10, 93, 255],
                        toColor: [51, 10, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [51, 10, 94, 255],
                        toColor: [52, 10, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [52, 10, 96, 255],
                        toColor: [54, 9, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [54, 9, 97, 255],
                        toColor: [56, 9, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [56, 9, 98, 255],
                        toColor: [58, 9, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [58, 9, 99, 255],
                        toColor: [59, 9, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [59, 9, 100, 255],
                        toColor: [61, 9, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [61, 9, 101, 255],
                        toColor: [63, 9, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [63, 9, 102, 255],
                        toColor: [64, 10, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [64, 10, 103, 255],
                        toColor: [66, 10, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [66, 10, 104, 255],
                        toColor: [68, 10, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [68, 10, 105, 255],
                        toColor: [69, 10, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 10, 105, 255],
                        toColor: [71, 11, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 11, 106, 255],
                        toColor: [73, 11, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [73, 11, 107, 255],
                        toColor: [74, 12, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [74, 12, 107, 255],
                        toColor: [76, 12, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [76, 12, 108, 255],
                        toColor: [78, 13, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [78, 13, 108, 255],
                        toColor: [79, 13, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [79, 13, 108, 255],
                        toColor: [81, 14, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [81, 14, 109, 255],
                        toColor: [83, 14, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [83, 14, 109, 255],
                        toColor: [84, 15, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [84, 15, 109, 255],
                        toColor: [86, 15, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [86, 15, 110, 255],
                        toColor: [87, 16, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [87, 16, 110, 255],
                        toColor: [89, 17, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [89, 17, 110, 255],
                        toColor: [91, 17, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [91, 17, 110, 255],
                        toColor: [92, 18, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [92, 18, 110, 255],
                        toColor: [94, 18, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [94, 18, 111, 255],
                        toColor: [95, 19, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [95, 19, 111, 255],
                        toColor: [97, 20, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [97, 20, 111, 255],
                        toColor: [99, 20, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [99, 20, 111, 255],
                        toColor: [100, 21, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [100, 21, 111, 255],
                        toColor: [102, 21, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [102, 21, 111, 255],
                        toColor: [103, 22, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [103, 22, 111, 255],
                        toColor: [105, 23, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [105, 23, 111, 255],
                        toColor: [107, 23, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [107, 23, 111, 255],
                        toColor: [108, 24, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [108, 24, 111, 255],
                        toColor: [110, 24, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [110, 24, 111, 255],
                        toColor: [111, 25, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [111, 25, 111, 255],
                        toColor: [113, 25, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [113, 25, 110, 255],
                        toColor: [115, 26, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [115, 26, 110, 255],
                        toColor: [116, 27, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [116, 27, 110, 255],
                        toColor: [118, 27, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [118, 27, 110, 255],
                        toColor: [119, 28, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [119, 28, 110, 255],
                        toColor: [121, 28, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [121, 28, 110, 255],
                        toColor: [123, 29, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [123, 29, 109, 255],
                        toColor: [124, 29, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [124, 29, 109, 255],
                        toColor: [126, 30, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [126, 30, 109, 255],
                        toColor: [127, 31, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [127, 31, 109, 255],
                        toColor: [129, 31, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [129, 31, 108, 255],
                        toColor: [130, 32, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [130, 32, 108, 255],
                        toColor: [132, 32, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [132, 32, 108, 255],
                        toColor: [134, 33, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [134, 33, 107, 255],
                        toColor: [135, 33, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [135, 33, 107, 255],
                        toColor: [137, 34, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [137, 34, 107, 255],
                        toColor: [138, 34, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [138, 34, 106, 255],
                        toColor: [140, 35, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [140, 35, 106, 255],
                        toColor: [142, 36, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [142, 36, 105, 255],
                        toColor: [143, 36, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [143, 36, 105, 255],
                        toColor: [145, 37, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [145, 37, 105, 255],
                        toColor: [146, 37, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [146, 37, 104, 255],
                        toColor: [148, 38, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [148, 38, 104, 255],
                        toColor: [150, 38, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [150, 38, 103, 255],
                        toColor: [151, 39, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [151, 39, 102, 255],
                        toColor: [153, 40, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [153, 40, 102, 255],
                        toColor: [154, 40, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [154, 40, 101, 255],
                        toColor: [156, 41, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [156, 41, 101, 255],
                        toColor: [158, 41, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [158, 41, 100, 255],
                        toColor: [159, 42, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [159, 42, 100, 255],
                        toColor: [161, 43, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [161, 43, 99, 255],
                        toColor: [162, 43, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [162, 43, 98, 255],
                        toColor: [164, 44, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [164, 44, 98, 255],
                        toColor: [165, 45, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [165, 45, 97, 255],
                        toColor: [167, 45, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [167, 45, 96, 255],
                        toColor: [169, 46, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [169, 46, 95, 255],
                        toColor: [170, 46, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [170, 46, 95, 255],
                        toColor: [172, 47, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [172, 47, 94, 255],
                        toColor: [173, 48, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [173, 48, 93, 255],
                        toColor: [175, 49, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [175, 49, 92, 255],
                        toColor: [176, 49, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [176, 49, 92, 255],
                        toColor: [178, 50, 91, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [178, 50, 91, 255],
                        toColor: [179, 51, 90, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [179, 51, 90, 255],
                        toColor: [181, 51, 89, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [181, 51, 89, 255],
                        toColor: [182, 52, 88, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [182, 52, 88, 255],
                        toColor: [184, 53, 87, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [184, 53, 87, 255],
                        toColor: [185, 54, 86, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [185, 54, 86, 255],
                        toColor: [187, 54, 85, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [187, 54, 85, 255],
                        toColor: [188, 55, 85, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [188, 55, 85, 255],
                        toColor: [190, 56, 84, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [190, 56, 84, 255],
                        toColor: [191, 57, 83, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [191, 57, 83, 255],
                        toColor: [193, 58, 82, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [193, 58, 82, 255],
                        toColor: [194, 59, 81, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [194, 59, 81, 255],
                        toColor: [196, 60, 80, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [196, 60, 80, 255],
                        toColor: [197, 60, 79, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [197, 60, 79, 255],
                        toColor: [198, 61, 78, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [198, 61, 78, 255],
                        toColor: [200, 62, 77, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [200, 62, 77, 255],
                        toColor: [201, 63, 76, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [201, 63, 76, 255],
                        toColor: [203, 64, 75, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [203, 64, 75, 255],
                        toColor: [204, 65, 74, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [204, 65, 74, 255],
                        toColor: [205, 66, 72, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [205, 66, 72, 255],
                        toColor: [207, 67, 71, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [207, 67, 71, 255],
                        toColor: [208, 68, 70, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [208, 68, 70, 255],
                        toColor: [209, 69, 69, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [209, 69, 69, 255],
                        toColor: [211, 70, 68, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [211, 70, 68, 255],
                        toColor: [212, 72, 67, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [212, 72, 67, 255],
                        toColor: [213, 73, 66, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [213, 73, 66, 255],
                        toColor: [214, 74, 65, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [214, 74, 65, 255],
                        toColor: [216, 75, 64, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [216, 75, 64, 255],
                        toColor: [217, 76, 62, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [217, 76, 62, 255],
                        toColor: [218, 77, 61, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [218, 77, 61, 255],
                        toColor: [219, 79, 60, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [219, 79, 60, 255],
                        toColor: [220, 80, 59, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [220, 80, 59, 255],
                        toColor: [221, 81, 58, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [221, 81, 58, 255],
                        toColor: [223, 82, 57, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [223, 82, 57, 255],
                        toColor: [224, 84, 56, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [224, 84, 56, 255],
                        toColor: [225, 85, 54, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [225, 85, 54, 255],
                        toColor: [226, 86, 53, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [226, 86, 53, 255],
                        toColor: [227, 88, 52, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [227, 88, 52, 255],
                        toColor: [228, 89, 51, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [228, 89, 51, 255],
                        toColor: [229, 90, 50, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [229, 90, 50, 255],
                        toColor: [230, 92, 48, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [230, 92, 48, 255],
                        toColor: [231, 93, 47, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [231, 93, 47, 255],
                        toColor: [232, 95, 46, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [232, 95, 46, 255],
                        toColor: [233, 96, 45, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [233, 96, 45, 255],
                        toColor: [234, 98, 43, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [234, 98, 43, 255],
                        toColor: [235, 99, 42, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [235, 99, 42, 255],
                        toColor: [235, 101, 41, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [235, 101, 41, 255],
                        toColor: [236, 102, 40, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [236, 102, 40, 255],
                        toColor: [237, 104, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [237, 104, 38, 255],
                        toColor: [238, 105, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [238, 105, 37, 255],
                        toColor: [239, 107, 36, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [239, 107, 36, 255],
                        toColor: [240, 109, 35, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [240, 109, 35, 255],
                        toColor: [240, 110, 33, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [240, 110, 33, 255],
                        toColor: [241, 112, 32, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [241, 112, 32, 255],
                        toColor: [242, 113, 31, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 113, 31, 255],
                        toColor: [242, 115, 30, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 115, 30, 255],
                        toColor: [243, 117, 28, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 117, 28, 255],
                        toColor: [244, 118, 27, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 118, 27, 255],
                        toColor: [244, 120, 26, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 120, 26, 255],
                        toColor: [245, 122, 24, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 122, 24, 255],
                        toColor: [246, 123, 23, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 123, 23, 255],
                        toColor: [246, 125, 22, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 125, 22, 255],
                        toColor: [247, 127, 20, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 127, 20, 255],
                        toColor: [247, 129, 19, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 129, 19, 255],
                        toColor: [248, 130, 18, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 130, 18, 255],
                        toColor: [248, 132, 16, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 132, 16, 255],
                        toColor: [249, 134, 15, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 134, 15, 255],
                        toColor: [249, 136, 14, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 136, 14, 255],
                        toColor: [249, 137, 12, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 137, 12, 255],
                        toColor: [250, 139, 11, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 139, 11, 255],
                        toColor: [250, 141, 10, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 141, 10, 255],
                        toColor: [250, 143, 9, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 143, 9, 255],
                        toColor: [251, 145, 8, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 145, 8, 255],
                        toColor: [251, 146, 7, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 146, 7, 255],
                        toColor: [251, 148, 7, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 148, 7, 255],
                        toColor: [252, 150, 6, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 150, 6, 255],
                        toColor: [252, 152, 6, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 152, 6, 255],
                        toColor: [252, 154, 6, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 154, 6, 255],
                        toColor: [252, 156, 6, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 156, 6, 255],
                        toColor: [252, 158, 7, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 158, 7, 255],
                        toColor: [253, 160, 7, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 160, 7, 255],
                        toColor: [253, 161, 8, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 161, 8, 255],
                        toColor: [253, 163, 9, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 163, 9, 255],
                        toColor: [253, 165, 10, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 165, 10, 255],
                        toColor: [253, 167, 12, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 167, 12, 255],
                        toColor: [253, 169, 13, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 169, 13, 255],
                        toColor: [253, 171, 15, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 171, 15, 255],
                        toColor: [253, 173, 17, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 173, 17, 255],
                        toColor: [253, 175, 19, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 175, 19, 255],
                        toColor: [253, 177, 20, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 177, 20, 255],
                        toColor: [253, 179, 22, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 179, 22, 255],
                        toColor: [253, 181, 25, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 181, 25, 255],
                        toColor: [252, 183, 27, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 183, 27, 255],
                        toColor: [252, 185, 29, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 185, 29, 255],
                        toColor: [252, 186, 31, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 186, 31, 255],
                        toColor: [252, 188, 33, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 188, 33, 255],
                        toColor: [252, 190, 35, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 190, 35, 255],
                        toColor: [251, 192, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 192, 38, 255],
                        toColor: [251, 194, 40, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 194, 40, 255],
                        toColor: [251, 196, 43, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 196, 43, 255],
                        toColor: [251, 198, 45, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 198, 45, 255],
                        toColor: [250, 200, 48, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 200, 48, 255],
                        toColor: [250, 202, 50, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 202, 50, 255],
                        toColor: [250, 204, 53, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 204, 53, 255],
                        toColor: [249, 206, 56, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 206, 56, 255],
                        toColor: [249, 208, 58, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 208, 58, 255],
                        toColor: [248, 210, 61, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 210, 61, 255],
                        toColor: [248, 212, 64, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 212, 64, 255],
                        toColor: [247, 214, 67, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 214, 67, 255],
                        toColor: [247, 216, 70, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 216, 70, 255],
                        toColor: [246, 218, 73, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 218, 73, 255],
                        toColor: [246, 220, 76, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 220, 76, 255],
                        toColor: [245, 222, 80, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 222, 80, 255],
                        toColor: [245, 224, 83, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 224, 83, 255],
                        toColor: [244, 226, 86, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 226, 86, 255],
                        toColor: [244, 228, 90, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 228, 90, 255],
                        toColor: [244, 229, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 229, 94, 255],
                        toColor: [243, 231, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 231, 97, 255],
                        toColor: [243, 233, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 233, 101, 255],
                        toColor: [243, 235, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 235, 105, 255],
                        toColor: [242, 237, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 237, 109, 255],
                        toColor: [242, 238, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 238, 113, 255],
                        toColor: [242, 240, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 240, 117, 255],
                        toColor: [242, 242, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 242, 122, 255],
                        toColor: [243, 243, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 243, 126, 255],
                        toColor: [243, 245, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 245, 130, 255],
                        toColor: [244, 246, 134, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 246, 134, 255],
                        toColor: [244, 247, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 247, 138, 255],
                        toColor: [245, 249, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 249, 142, 255],
                        toColor: [246, 250, 146, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 250, 146, 255],
                        toColor: [247, 251, 150, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 251, 150, 255],
                        toColor: [249, 252, 154, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 252, 154, 255],
                        toColor: [250, 253, 158, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 253, 158, 255],
                        toColor: [251, 254, 162, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 254, 162, 255],
                        toColor: [253, 255, 165, 255]
                    }]
                }, {
                    id: "magma_predefined",
                    type: "multipart",
                    colorRamps: [{
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [0, 0, 4, 255],
                        toColor: [1, 0, 5, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [1, 0, 5, 255],
                        toColor: [1, 1, 6, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [1, 1, 6, 255],
                        toColor: [1, 1, 8, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [1, 1, 8, 255],
                        toColor: [2, 1, 10, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [2, 1, 10, 255],
                        toColor: [2, 2, 12, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [2, 2, 12, 255],
                        toColor: [2, 2, 14, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [2, 2, 14, 255],
                        toColor: [3, 3, 16, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [3, 3, 16, 255],
                        toColor: [4, 3, 18, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [4, 3, 18, 255],
                        toColor: [4, 4, 20, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [4, 4, 20, 255],
                        toColor: [5, 4, 22, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [5, 4, 22, 255],
                        toColor: [6, 5, 24, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [6, 5, 24, 255],
                        toColor: [6, 5, 26, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [6, 5, 26, 255],
                        toColor: [7, 6, 28, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [7, 6, 28, 255],
                        toColor: [8, 7, 30, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [8, 7, 30, 255],
                        toColor: [9, 7, 32, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [9, 7, 32, 255],
                        toColor: [10, 8, 34, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [10, 8, 34, 255],
                        toColor: [11, 9, 36, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [11, 9, 36, 255],
                        toColor: [12, 9, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [12, 9, 38, 255],
                        toColor: [13, 10, 41, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [13, 10, 41, 255],
                        toColor: [14, 11, 43, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [14, 11, 43, 255],
                        toColor: [16, 11, 45, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [16, 11, 45, 255],
                        toColor: [17, 12, 47, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [17, 12, 47, 255],
                        toColor: [18, 13, 50, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [18, 13, 50, 255],
                        toColor: [19, 13, 52, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [19, 13, 52, 255],
                        toColor: [20, 14, 54, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [20, 14, 54, 255],
                        toColor: [21, 14, 57, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [21, 14, 57, 255],
                        toColor: [23, 15, 59, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [23, 15, 59, 255],
                        toColor: [24, 15, 61, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [24, 15, 61, 255],
                        toColor: [25, 16, 64, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [25, 16, 64, 255],
                        toColor: [26, 16, 66, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [26, 16, 66, 255],
                        toColor: [28, 16, 68, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [28, 16, 68, 255],
                        toColor: [29, 17, 71, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [29, 17, 71, 255],
                        toColor: [30, 17, 73, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [30, 17, 73, 255],
                        toColor: [32, 17, 76, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 17, 76, 255],
                        toColor: [33, 17, 78, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [33, 17, 78, 255],
                        toColor: [35, 18, 81, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [35, 18, 81, 255],
                        toColor: [36, 18, 83, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [36, 18, 83, 255],
                        toColor: [38, 18, 86, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [38, 18, 86, 255],
                        toColor: [39, 18, 88, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [39, 18, 88, 255],
                        toColor: [41, 18, 90, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [41, 18, 90, 255],
                        toColor: [42, 17, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [42, 17, 93, 255],
                        toColor: [44, 17, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [44, 17, 95, 255],
                        toColor: [46, 17, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [46, 17, 97, 255],
                        toColor: [47, 17, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [47, 17, 99, 255],
                        toColor: [49, 17, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [49, 17, 101, 255],
                        toColor: [51, 16, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [51, 16, 103, 255],
                        toColor: [52, 16, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [52, 16, 105, 255],
                        toColor: [54, 16, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [54, 16, 107, 255],
                        toColor: [56, 16, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [56, 16, 109, 255],
                        toColor: [58, 15, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [58, 15, 111, 255],
                        toColor: [59, 15, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [59, 15, 112, 255],
                        toColor: [61, 15, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [61, 15, 113, 255],
                        toColor: [63, 15, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [63, 15, 115, 255],
                        toColor: [65, 15, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [65, 15, 116, 255],
                        toColor: [66, 15, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [66, 15, 117, 255],
                        toColor: [68, 15, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [68, 15, 118, 255],
                        toColor: [70, 16, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 16, 119, 255],
                        toColor: [71, 16, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 16, 120, 255],
                        toColor: [73, 16, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [73, 16, 121, 255],
                        toColor: [75, 17, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [75, 17, 122, 255],
                        toColor: [76, 17, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [76, 17, 122, 255],
                        toColor: [78, 17, 123, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [78, 17, 123, 255],
                        toColor: [79, 18, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [79, 18, 124, 255],
                        toColor: [81, 18, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [81, 18, 124, 255],
                        toColor: [83, 19, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [83, 19, 125, 255],
                        toColor: [84, 19, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [84, 19, 125, 255],
                        toColor: [86, 20, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [86, 20, 126, 255],
                        toColor: [87, 21, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [87, 21, 126, 255],
                        toColor: [89, 21, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [89, 21, 126, 255],
                        toColor: [91, 22, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [91, 22, 127, 255],
                        toColor: [92, 22, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [92, 22, 127, 255],
                        toColor: [94, 23, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [94, 23, 127, 255],
                        toColor: [95, 24, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [95, 24, 128, 255],
                        toColor: [97, 24, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [97, 24, 128, 255],
                        toColor: [98, 25, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [98, 25, 128, 255],
                        toColor: [100, 26, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [100, 26, 128, 255],
                        toColor: [101, 26, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [101, 26, 129, 255],
                        toColor: [103, 27, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [103, 27, 129, 255],
                        toColor: [105, 28, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [105, 28, 129, 255],
                        toColor: [106, 28, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [106, 28, 129, 255],
                        toColor: [108, 29, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [108, 29, 129, 255],
                        toColor: [109, 30, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [109, 30, 129, 255],
                        toColor: [111, 30, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [111, 30, 130, 255],
                        toColor: [112, 31, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [112, 31, 130, 255],
                        toColor: [114, 31, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [114, 31, 130, 255],
                        toColor: [116, 32, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [116, 32, 130, 255],
                        toColor: [117, 33, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [117, 33, 130, 255],
                        toColor: [119, 33, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [119, 33, 130, 255],
                        toColor: [120, 34, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [120, 34, 130, 255],
                        toColor: [122, 34, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [122, 34, 130, 255],
                        toColor: [123, 35, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [123, 35, 130, 255],
                        toColor: [125, 36, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [125, 36, 130, 255],
                        toColor: [127, 36, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [127, 36, 130, 255],
                        toColor: [128, 37, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [128, 37, 130, 255],
                        toColor: [130, 37, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [130, 37, 130, 255],
                        toColor: [131, 38, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [131, 38, 130, 255],
                        toColor: [133, 39, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [133, 39, 130, 255],
                        toColor: [134, 39, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [134, 39, 130, 255],
                        toColor: [136, 40, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [136, 40, 130, 255],
                        toColor: [138, 40, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [138, 40, 130, 255],
                        toColor: [139, 41, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [139, 41, 130, 255],
                        toColor: [141, 41, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [141, 41, 129, 255],
                        toColor: [142, 42, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [142, 42, 129, 255],
                        toColor: [144, 42, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [144, 42, 129, 255],
                        toColor: [146, 43, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [146, 43, 129, 255],
                        toColor: [147, 43, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [147, 43, 129, 255],
                        toColor: [149, 44, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [149, 44, 129, 255],
                        toColor: [151, 44, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [151, 44, 129, 255],
                        toColor: [152, 45, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [152, 45, 128, 255],
                        toColor: [154, 46, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [154, 46, 128, 255],
                        toColor: [155, 46, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [155, 46, 128, 255],
                        toColor: [157, 47, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [157, 47, 128, 255],
                        toColor: [159, 47, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [159, 47, 127, 255],
                        toColor: [160, 48, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [160, 48, 127, 255],
                        toColor: [162, 48, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [162, 48, 127, 255],
                        toColor: [164, 49, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [164, 49, 127, 255],
                        toColor: [165, 49, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [165, 49, 126, 255],
                        toColor: [167, 50, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [167, 50, 126, 255],
                        toColor: [169, 50, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [169, 50, 126, 255],
                        toColor: [170, 51, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [170, 51, 125, 255],
                        toColor: [172, 51, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [172, 51, 125, 255],
                        toColor: [174, 52, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [174, 52, 124, 255],
                        toColor: [175, 52, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [175, 52, 124, 255],
                        toColor: [177, 53, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [177, 53, 124, 255],
                        toColor: [178, 53, 123, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [178, 53, 123, 255],
                        toColor: [180, 54, 123, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [180, 54, 123, 255],
                        toColor: [182, 54, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [182, 54, 122, 255],
                        toColor: [183, 55, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [183, 55, 122, 255],
                        toColor: [185, 56, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [185, 56, 121, 255],
                        toColor: [187, 56, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [187, 56, 121, 255],
                        toColor: [188, 57, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [188, 57, 120, 255],
                        toColor: [190, 57, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [190, 57, 120, 255],
                        toColor: [192, 58, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [192, 58, 119, 255],
                        toColor: [193, 59, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [193, 59, 118, 255],
                        toColor: [195, 59, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [195, 59, 118, 255],
                        toColor: [196, 60, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [196, 60, 117, 255],
                        toColor: [198, 60, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [198, 60, 117, 255],
                        toColor: [200, 61, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [200, 61, 116, 255],
                        toColor: [201, 62, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [201, 62, 115, 255],
                        toColor: [203, 63, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [203, 63, 115, 255],
                        toColor: [204, 63, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [204, 63, 114, 255],
                        toColor: [206, 64, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [206, 64, 113, 255],
                        toColor: [208, 65, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [208, 65, 112, 255],
                        toColor: [209, 66, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [209, 66, 112, 255],
                        toColor: [211, 66, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [211, 66, 111, 255],
                        toColor: [212, 67, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [212, 67, 110, 255],
                        toColor: [214, 68, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [214, 68, 109, 255],
                        toColor: [215, 69, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [215, 69, 109, 255],
                        toColor: [217, 70, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [217, 70, 108, 255],
                        toColor: [218, 71, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [218, 71, 107, 255],
                        toColor: [220, 72, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [220, 72, 106, 255],
                        toColor: [221, 73, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [221, 73, 106, 255],
                        toColor: [222, 74, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [222, 74, 105, 255],
                        toColor: [224, 75, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [224, 75, 104, 255],
                        toColor: [225, 76, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [225, 76, 103, 255],
                        toColor: [226, 77, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [226, 77, 102, 255],
                        toColor: [228, 78, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [228, 78, 102, 255],
                        toColor: [229, 79, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [229, 79, 101, 255],
                        toColor: [230, 81, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [230, 81, 100, 255],
                        toColor: [231, 82, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [231, 82, 99, 255],
                        toColor: [233, 83, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [233, 83, 99, 255],
                        toColor: [234, 84, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [234, 84, 98, 255],
                        toColor: [235, 86, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [235, 86, 97, 255],
                        toColor: [236, 87, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [236, 87, 97, 255],
                        toColor: [237, 89, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [237, 89, 96, 255],
                        toColor: [238, 90, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [238, 90, 95, 255],
                        toColor: [239, 92, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [239, 92, 95, 255],
                        toColor: [240, 93, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [240, 93, 94, 255],
                        toColor: [241, 95, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [241, 95, 94, 255],
                        toColor: [242, 97, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 97, 93, 255],
                        toColor: [242, 98, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 98, 93, 255],
                        toColor: [243, 100, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 100, 93, 255],
                        toColor: [244, 102, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 102, 93, 255],
                        toColor: [245, 104, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 104, 92, 255],
                        toColor: [245, 105, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 105, 92, 255],
                        toColor: [246, 107, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 107, 92, 255],
                        toColor: [247, 109, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 109, 92, 255],
                        toColor: [247, 111, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 111, 92, 255],
                        toColor: [248, 113, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 113, 92, 255],
                        toColor: [248, 114, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 114, 92, 255],
                        toColor: [249, 116, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 116, 92, 255],
                        toColor: [249, 118, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 118, 93, 255],
                        toColor: [250, 120, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 120, 93, 255],
                        toColor: [250, 122, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 122, 93, 255],
                        toColor: [250, 124, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 124, 94, 255],
                        toColor: [251, 126, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 126, 94, 255],
                        toColor: [251, 128, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 128, 95, 255],
                        toColor: [251, 130, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 130, 95, 255],
                        toColor: [252, 131, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 131, 96, 255],
                        toColor: [252, 133, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 133, 96, 255],
                        toColor: [252, 135, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 135, 97, 255],
                        toColor: [253, 137, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 137, 98, 255],
                        toColor: [253, 139, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 139, 99, 255],
                        toColor: [253, 141, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 141, 99, 255],
                        toColor: [253, 143, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 143, 100, 255],
                        toColor: [253, 145, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 145, 101, 255],
                        toColor: [254, 147, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 147, 102, 255],
                        toColor: [254, 149, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 149, 103, 255],
                        toColor: [254, 150, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 150, 104, 255],
                        toColor: [254, 152, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 152, 105, 255],
                        toColor: [254, 154, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 154, 106, 255],
                        toColor: [254, 156, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 156, 107, 255],
                        toColor: [255, 158, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 158, 108, 255],
                        toColor: [255, 160, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 160, 109, 255],
                        toColor: [255, 162, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 162, 111, 255],
                        toColor: [255, 164, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 164, 112, 255],
                        toColor: [255, 165, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 165, 113, 255],
                        toColor: [255, 167, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 167, 114, 255],
                        toColor: [255, 169, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 169, 116, 255],
                        toColor: [255, 171, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 171, 117, 255],
                        toColor: [255, 173, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 173, 118, 255],
                        toColor: [255, 175, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 175, 119, 255],
                        toColor: [255, 177, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 177, 121, 255],
                        toColor: [255, 179, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 179, 122, 255],
                        toColor: [255, 180, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 180, 124, 255],
                        toColor: [255, 182, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 182, 125, 255],
                        toColor: [255, 184, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 184, 126, 255],
                        toColor: [255, 186, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 186, 128, 255],
                        toColor: [255, 188, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 188, 129, 255],
                        toColor: [255, 190, 131, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 190, 131, 255],
                        toColor: [255, 191, 132, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 191, 132, 255],
                        toColor: [255, 193, 134, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 193, 134, 255],
                        toColor: [255, 195, 135, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 195, 135, 255],
                        toColor: [255, 197, 137, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 197, 137, 255],
                        toColor: [255, 199, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 199, 139, 255],
                        toColor: [255, 201, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 201, 140, 255],
                        toColor: [255, 203, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 203, 142, 255],
                        toColor: [255, 204, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 204, 143, 255],
                        toColor: [255, 206, 145, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 206, 145, 255],
                        toColor: [255, 208, 147, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 208, 147, 255],
                        toColor: [255, 210, 148, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 210, 148, 255],
                        toColor: [255, 212, 150, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 212, 150, 255],
                        toColor: [255, 214, 152, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 214, 152, 255],
                        toColor: [255, 215, 153, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 215, 153, 255],
                        toColor: [255, 217, 155, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 217, 155, 255],
                        toColor: [254, 219, 157, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 219, 157, 255],
                        toColor: [254, 221, 159, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 221, 159, 255],
                        toColor: [254, 223, 160, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 223, 160, 255],
                        toColor: [254, 225, 162, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 225, 162, 255],
                        toColor: [254, 226, 164, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 226, 164, 255],
                        toColor: [254, 228, 166, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 228, 166, 255],
                        toColor: [254, 230, 167, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 230, 167, 255],
                        toColor: [254, 232, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 232, 169, 255],
                        toColor: [254, 234, 171, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 234, 171, 255],
                        toColor: [254, 236, 173, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 236, 173, 255],
                        toColor: [253, 237, 175, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 237, 175, 255],
                        toColor: [253, 239, 177, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 239, 177, 255],
                        toColor: [253, 241, 179, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 241, 179, 255],
                        toColor: [253, 243, 180, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 243, 180, 255],
                        toColor: [253, 245, 182, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 245, 182, 255],
                        toColor: [253, 247, 184, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 247, 184, 255],
                        toColor: [253, 248, 186, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 248, 186, 255],
                        toColor: [253, 250, 188, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 250, 188, 255],
                        toColor: [253, 252, 190, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 252, 190, 255],
                        toColor: [253, 254, 192, 255]
                    }]
                }, {
                    id: "orangeBright_predefined",
                    fromColor: [255, 235, 204],
                    toColor: [240, 118, 5]
                }, {
                    id: "orangeLightToDark_predefined",
                    fromColor: [250, 233, 212],
                    toColor: [171, 65, 36]
                }, {
                    id: "partialSpectrum_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [242, 241, 162],
                        toColor: [255, 255, 0]
                    }, {
                        fromColor: [255, 255, 0],
                        toColor: [255, 0, 0]
                    }, {
                        fromColor: [252, 3, 69],
                        toColor: [176, 7, 237]
                    }, {
                        fromColor: [176, 7, 237],
                        toColor: [2, 29, 173]
                    }]
                }, {
                    id: "partialSpectrum1Diverging_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [135, 38, 38],
                        toColor: [240, 149, 12]
                    }, {
                        fromColor: [240, 149, 12],
                        toColor: [255, 255, 191]
                    }, {
                        fromColor: [255, 255, 191],
                        toColor: [74, 80, 181]
                    }, {
                        fromColor: [74, 80, 181],
                        toColor: [39, 32, 122]
                    }]
                }, {
                    id: "partialSpectrum2Diverging_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [115, 77, 42],
                        toColor: [201, 137, 52]
                    }, {
                        fromColor: [201, 137, 52],
                        toColor: [255, 255, 191]
                    }, {
                        fromColor: [255, 255, 191],
                        toColor: [91, 63, 176]
                    }, {
                        fromColor: [91, 63, 176],
                        toColor: [81, 13, 97]
                    }]
                }, {
                    id: "pinkToYellowGreenDivergingBright_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [158, 30, 113],
                        toColor: [255, 255, 191]
                    }, {
                        fromColor: [255, 255, 191],
                        toColor: [99, 110, 45]
                    }]
                }, {
                    id: "pinkToYellowGreenDivergingDark_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [97, 47, 73],
                        toColor: [204, 204, 102]
                    }, {
                        fromColor: [204, 204, 102],
                        toColor: [22, 59, 15]
                    }]
                }, {
                    id: "plasma_predefined",
                    type: "multipart",
                    colorRamps: [{
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [13, 8, 135, 255],
                        toColor: [16, 7, 136, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [16, 7, 136, 255],
                        toColor: [19, 7, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [19, 7, 138, 255],
                        toColor: [22, 7, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [22, 7, 139, 255],
                        toColor: [25, 6, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [25, 6, 140, 255],
                        toColor: [27, 6, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [27, 6, 141, 255],
                        toColor: [29, 6, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [29, 6, 142, 255],
                        toColor: [32, 6, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 6, 143, 255],
                        toColor: [34, 6, 144, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [34, 6, 144, 255],
                        toColor: [36, 6, 145, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [36, 6, 145, 255],
                        toColor: [38, 5, 146, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [38, 5, 146, 255],
                        toColor: [40, 5, 147, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [40, 5, 147, 255],
                        toColor: [42, 5, 148, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [42, 5, 148, 255],
                        toColor: [44, 5, 149, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [44, 5, 149, 255],
                        toColor: [46, 5, 150, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [46, 5, 150, 255],
                        toColor: [48, 5, 150, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [48, 5, 150, 255],
                        toColor: [50, 5, 151, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [50, 5, 151, 255],
                        toColor: [51, 5, 152, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [51, 5, 152, 255],
                        toColor: [53, 4, 153, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [53, 4, 153, 255],
                        toColor: [55, 4, 153, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [55, 4, 153, 255],
                        toColor: [57, 4, 154, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [57, 4, 154, 255],
                        toColor: [58, 4, 155, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [58, 4, 155, 255],
                        toColor: [60, 4, 156, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [60, 4, 156, 255],
                        toColor: [62, 4, 156, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [62, 4, 156, 255],
                        toColor: [64, 4, 157, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [64, 4, 157, 255],
                        toColor: [65, 4, 158, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [65, 4, 158, 255],
                        toColor: [67, 3, 158, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [67, 3, 158, 255],
                        toColor: [69, 3, 159, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 3, 159, 255],
                        toColor: [70, 3, 159, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 3, 159, 255],
                        toColor: [72, 3, 160, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 3, 160, 255],
                        toColor: [73, 3, 161, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [73, 3, 161, 255],
                        toColor: [75, 3, 161, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [75, 3, 161, 255],
                        toColor: [77, 2, 162, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [77, 2, 162, 255],
                        toColor: [78, 2, 162, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [78, 2, 162, 255],
                        toColor: [80, 2, 163, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [80, 2, 163, 255],
                        toColor: [82, 2, 163, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [82, 2, 163, 255],
                        toColor: [83, 2, 164, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [83, 2, 164, 255],
                        toColor: [85, 2, 164, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [85, 2, 164, 255],
                        toColor: [86, 1, 165, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [86, 1, 165, 255],
                        toColor: [88, 1, 165, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [88, 1, 165, 255],
                        toColor: [90, 1, 165, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [90, 1, 165, 255],
                        toColor: [91, 1, 166, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [91, 1, 166, 255],
                        toColor: [93, 1, 166, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [93, 1, 166, 255],
                        toColor: [94, 1, 167, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [94, 1, 167, 255],
                        toColor: [96, 1, 167, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [96, 1, 167, 255],
                        toColor: [98, 0, 167, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [98, 0, 167, 255],
                        toColor: [99, 0, 167, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [99, 0, 167, 255],
                        toColor: [101, 0, 168, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [101, 0, 168, 255],
                        toColor: [102, 0, 168, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [102, 0, 168, 255],
                        toColor: [104, 0, 168, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [104, 0, 168, 255],
                        toColor: [105, 0, 168, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [105, 0, 168, 255],
                        toColor: [107, 0, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [107, 0, 169, 255],
                        toColor: [108, 0, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [108, 0, 169, 255],
                        toColor: [110, 0, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [110, 0, 169, 255],
                        toColor: [112, 0, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [112, 0, 169, 255],
                        toColor: [113, 0, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [113, 0, 169, 255],
                        toColor: [115, 1, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [115, 1, 169, 255],
                        toColor: [116, 1, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [116, 1, 169, 255],
                        toColor: [118, 1, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [118, 1, 169, 255],
                        toColor: [119, 1, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [119, 1, 169, 255],
                        toColor: [121, 1, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [121, 1, 169, 255],
                        toColor: [122, 2, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [122, 2, 169, 255],
                        toColor: [124, 2, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [124, 2, 169, 255],
                        toColor: [125, 3, 169, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [125, 3, 169, 255],
                        toColor: [127, 3, 168, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [127, 3, 168, 255],
                        toColor: [128, 4, 168, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [128, 4, 168, 255],
                        toColor: [130, 4, 168, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [130, 4, 168, 255],
                        toColor: [131, 5, 168, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [131, 5, 168, 255],
                        toColor: [133, 6, 167, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [133, 6, 167, 255],
                        toColor: [134, 6, 167, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [134, 6, 167, 255],
                        toColor: [136, 7, 167, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [136, 7, 167, 255],
                        toColor: [137, 8, 166, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [137, 8, 166, 255],
                        toColor: [138, 9, 166, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [138, 9, 166, 255],
                        toColor: [140, 10, 166, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [140, 10, 166, 255],
                        toColor: [141, 11, 165, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [141, 11, 165, 255],
                        toColor: [143, 12, 165, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [143, 12, 165, 255],
                        toColor: [144, 13, 164, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [144, 13, 164, 255],
                        toColor: [145, 14, 164, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [145, 14, 164, 255],
                        toColor: [147, 15, 163, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [147, 15, 163, 255],
                        toColor: [148, 16, 163, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [148, 16, 163, 255],
                        toColor: [150, 18, 162, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [150, 18, 162, 255],
                        toColor: [151, 19, 161, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [151, 19, 161, 255],
                        toColor: [152, 20, 161, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [152, 20, 161, 255],
                        toColor: [154, 21, 160, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [154, 21, 160, 255],
                        toColor: [155, 22, 159, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [155, 22, 159, 255],
                        toColor: [156, 23, 159, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [156, 23, 159, 255],
                        toColor: [158, 24, 158, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [158, 24, 158, 255],
                        toColor: [159, 25, 157, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [159, 25, 157, 255],
                        toColor: [160, 26, 156, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [160, 26, 156, 255],
                        toColor: [162, 28, 156, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [162, 28, 156, 255],
                        toColor: [163, 29, 155, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [163, 29, 155, 255],
                        toColor: [164, 30, 154, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [164, 30, 154, 255],
                        toColor: [165, 31, 153, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [165, 31, 153, 255],
                        toColor: [167, 32, 152, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [167, 32, 152, 255],
                        toColor: [168, 33, 152, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [168, 33, 152, 255],
                        toColor: [169, 34, 151, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [169, 34, 151, 255],
                        toColor: [170, 35, 150, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [170, 35, 150, 255],
                        toColor: [171, 37, 149, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [171, 37, 149, 255],
                        toColor: [173, 38, 148, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [173, 38, 148, 255],
                        toColor: [174, 39, 147, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [174, 39, 147, 255],
                        toColor: [175, 40, 146, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [175, 40, 146, 255],
                        toColor: [176, 41, 145, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [176, 41, 145, 255],
                        toColor: [177, 42, 145, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [177, 42, 145, 255],
                        toColor: [179, 43, 144, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [179, 43, 144, 255],
                        toColor: [180, 45, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [180, 45, 143, 255],
                        toColor: [181, 46, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [181, 46, 142, 255],
                        toColor: [182, 47, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [182, 47, 141, 255],
                        toColor: [183, 48, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [183, 48, 140, 255],
                        toColor: [184, 49, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [184, 49, 139, 255],
                        toColor: [185, 50, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [185, 50, 138, 255],
                        toColor: [186, 51, 137, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [186, 51, 137, 255],
                        toColor: [187, 52, 136, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [187, 52, 136, 255],
                        toColor: [188, 54, 135, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [188, 54, 135, 255],
                        toColor: [189, 55, 134, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [189, 55, 134, 255],
                        toColor: [191, 56, 133, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [191, 56, 133, 255],
                        toColor: [192, 57, 132, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [192, 57, 132, 255],
                        toColor: [193, 58, 131, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [193, 58, 131, 255],
                        toColor: [194, 59, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [194, 59, 130, 255],
                        toColor: [195, 60, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [195, 60, 129, 255],
                        toColor: [196, 62, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [196, 62, 129, 255],
                        toColor: [197, 63, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [197, 63, 128, 255],
                        toColor: [198, 64, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [198, 64, 127, 255],
                        toColor: [199, 65, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [199, 65, 126, 255],
                        toColor: [200, 66, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [200, 66, 125, 255],
                        toColor: [201, 67, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [201, 67, 124, 255],
                        toColor: [202, 68, 123, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [202, 68, 123, 255],
                        toColor: [202, 69, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [202, 69, 122, 255],
                        toColor: [203, 71, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [203, 71, 121, 255],
                        toColor: [204, 72, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [204, 72, 120, 255],
                        toColor: [205, 73, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [205, 73, 119, 255],
                        toColor: [206, 74, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [206, 74, 118, 255],
                        toColor: [207, 75, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [207, 75, 117, 255],
                        toColor: [208, 76, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [208, 76, 117, 255],
                        toColor: [209, 77, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [209, 77, 116, 255],
                        toColor: [210, 79, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [210, 79, 115, 255],
                        toColor: [211, 80, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [211, 80, 114, 255],
                        toColor: [212, 81, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [212, 81, 113, 255],
                        toColor: [212, 82, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [212, 82, 112, 255],
                        toColor: [213, 83, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [213, 83, 111, 255],
                        toColor: [214, 84, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [214, 84, 110, 255],
                        toColor: [215, 85, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [215, 85, 109, 255],
                        toColor: [216, 87, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [216, 87, 109, 255],
                        toColor: [217, 88, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [217, 88, 108, 255],
                        toColor: [218, 89, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [218, 89, 107, 255],
                        toColor: [218, 90, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [218, 90, 106, 255],
                        toColor: [219, 91, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [219, 91, 105, 255],
                        toColor: [220, 92, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [220, 92, 104, 255],
                        toColor: [221, 93, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [221, 93, 103, 255],
                        toColor: [222, 95, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [222, 95, 102, 255],
                        toColor: [223, 96, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [223, 96, 102, 255],
                        toColor: [223, 97, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [223, 97, 101, 255],
                        toColor: [224, 98, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [224, 98, 100, 255],
                        toColor: [225, 99, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [225, 99, 99, 255],
                        toColor: [226, 100, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [226, 100, 98, 255],
                        toColor: [226, 102, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [226, 102, 97, 255],
                        toColor: [227, 103, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [227, 103, 96, 255],
                        toColor: [228, 104, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [228, 104, 96, 255],
                        toColor: [229, 105, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [229, 105, 95, 255],
                        toColor: [229, 106, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [229, 106, 94, 255],
                        toColor: [230, 108, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [230, 108, 93, 255],
                        toColor: [231, 109, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [231, 109, 92, 255],
                        toColor: [232, 110, 91, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [232, 110, 91, 255],
                        toColor: [232, 111, 90, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [232, 111, 90, 255],
                        toColor: [233, 112, 90, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [233, 112, 90, 255],
                        toColor: [234, 114, 89, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [234, 114, 89, 255],
                        toColor: [234, 115, 88, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [234, 115, 88, 255],
                        toColor: [235, 116, 87, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [235, 116, 87, 255],
                        toColor: [236, 117, 86, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [236, 117, 86, 255],
                        toColor: [236, 119, 85, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [236, 119, 85, 255],
                        toColor: [237, 120, 84, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [237, 120, 84, 255],
                        toColor: [238, 121, 83, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [238, 121, 83, 255],
                        toColor: [238, 122, 83, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [238, 122, 83, 255],
                        toColor: [239, 124, 82, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [239, 124, 82, 255],
                        toColor: [240, 125, 81, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [240, 125, 81, 255],
                        toColor: [240, 126, 80, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [240, 126, 80, 255],
                        toColor: [241, 127, 79, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [241, 127, 79, 255],
                        toColor: [241, 129, 78, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [241, 129, 78, 255],
                        toColor: [242, 130, 77, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 130, 77, 255],
                        toColor: [242, 131, 77, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 131, 77, 255],
                        toColor: [243, 133, 76, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 133, 76, 255],
                        toColor: [244, 134, 75, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 134, 75, 255],
                        toColor: [244, 135, 74, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 135, 74, 255],
                        toColor: [245, 136, 73, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 136, 73, 255],
                        toColor: [245, 138, 72, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 138, 72, 255],
                        toColor: [246, 139, 71, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 139, 71, 255],
                        toColor: [246, 140, 70, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 140, 70, 255],
                        toColor: [247, 142, 70, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 142, 70, 255],
                        toColor: [247, 143, 69, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 143, 69, 255],
                        toColor: [248, 144, 68, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 144, 68, 255],
                        toColor: [248, 146, 67, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 146, 67, 255],
                        toColor: [248, 147, 66, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 147, 66, 255],
                        toColor: [249, 149, 65, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 149, 65, 255],
                        toColor: [249, 150, 64, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 150, 64, 255],
                        toColor: [250, 151, 64, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 151, 64, 255],
                        toColor: [250, 153, 63, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 153, 63, 255],
                        toColor: [250, 154, 62, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 154, 62, 255],
                        toColor: [251, 156, 61, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 156, 61, 255],
                        toColor: [251, 157, 60, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 157, 60, 255],
                        toColor: [251, 158, 59, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 158, 59, 255],
                        toColor: [252, 160, 58, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 160, 58, 255],
                        toColor: [252, 161, 58, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 161, 58, 255],
                        toColor: [252, 163, 57, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 163, 57, 255],
                        toColor: [253, 164, 56, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 164, 56, 255],
                        toColor: [253, 166, 55, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 166, 55, 255],
                        toColor: [253, 167, 54, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 167, 54, 255],
                        toColor: [253, 168, 53, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 168, 53, 255],
                        toColor: [253, 170, 52, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 170, 52, 255],
                        toColor: [254, 171, 52, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 171, 52, 255],
                        toColor: [254, 173, 51, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 173, 51, 255],
                        toColor: [254, 174, 50, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 174, 50, 255],
                        toColor: [254, 176, 49, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 176, 49, 255],
                        toColor: [254, 177, 48, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 177, 48, 255],
                        toColor: [254, 179, 48, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 179, 48, 255],
                        toColor: [254, 180, 47, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 180, 47, 255],
                        toColor: [254, 182, 46, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 182, 46, 255],
                        toColor: [255, 183, 45, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 183, 45, 255],
                        toColor: [255, 185, 45, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 185, 45, 255],
                        toColor: [255, 187, 44, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 187, 44, 255],
                        toColor: [255, 188, 43, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 188, 43, 255],
                        toColor: [255, 190, 43, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 190, 43, 255],
                        toColor: [255, 191, 42, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 191, 42, 255],
                        toColor: [255, 193, 41, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [255, 193, 41, 255],
                        toColor: [254, 194, 41, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 194, 41, 255],
                        toColor: [254, 196, 40, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 196, 40, 255],
                        toColor: [254, 198, 40, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 198, 40, 255],
                        toColor: [254, 199, 39, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 199, 39, 255],
                        toColor: [254, 201, 39, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 201, 39, 255],
                        toColor: [254, 202, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 202, 38, 255],
                        toColor: [254, 204, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [254, 204, 38, 255],
                        toColor: [253, 206, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 206, 38, 255],
                        toColor: [253, 207, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 207, 37, 255],
                        toColor: [253, 209, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 209, 37, 255],
                        toColor: [253, 211, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [253, 211, 37, 255],
                        toColor: [252, 212, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 212, 37, 255],
                        toColor: [252, 214, 36, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 214, 36, 255],
                        toColor: [252, 216, 36, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 216, 36, 255],
                        toColor: [251, 217, 36, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 217, 36, 255],
                        toColor: [251, 219, 36, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [251, 219, 36, 255],
                        toColor: [250, 221, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 221, 37, 255],
                        toColor: [250, 222, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [250, 222, 37, 255],
                        toColor: [249, 224, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 224, 37, 255],
                        toColor: [249, 226, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 226, 37, 255],
                        toColor: [248, 227, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 227, 37, 255],
                        toColor: [248, 229, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [248, 229, 38, 255],
                        toColor: [247, 231, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 231, 38, 255],
                        toColor: [247, 232, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 232, 38, 255],
                        toColor: [246, 234, 39, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 234, 39, 255],
                        toColor: [246, 236, 39, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [246, 236, 39, 255],
                        toColor: [245, 238, 39, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 238, 39, 255],
                        toColor: [244, 239, 39, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 239, 39, 255],
                        toColor: [244, 241, 39, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [244, 241, 39, 255],
                        toColor: [243, 243, 39, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [243, 243, 39, 255],
                        toColor: [242, 245, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 245, 38, 255],
                        toColor: [242, 246, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 246, 38, 255],
                        toColor: [241, 248, 36, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [241, 248, 36, 255],
                        toColor: [241, 250, 34, 255]
                    }]
                }, {
                    id: "precipitation_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [194, 82, 60],
                        toColor: [237, 161, 19]
                    }, {
                        fromColor: [237, 161, 19],
                        toColor: [255, 255, 0]
                    }, {
                        fromColor: [255, 255, 0],
                        toColor: [0, 219, 0]
                    }, {
                        fromColor: [0, 219, 0],
                        toColor: [32, 153, 143]
                    }, {
                        fromColor: [32, 153, 143],
                        toColor: [11, 44, 122]
                    }]
                }, {
                    id: "prediction_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [40, 146, 199],
                        toColor: [250, 250, 100]
                    }, {
                        fromColor: [250, 250, 100],
                        toColor: [232, 16, 20]
                    }]
                }, {
                    id: "purpleBright_predefined",
                    fromColor: [255, 204, 255],
                    toColor: [199, 0, 199]
                }, {
                    id: "purpleToGreenDivergingBright_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [77, 32, 150],
                        toColor: [255, 255, 191]
                    }, {
                        fromColor: [255, 255, 191],
                        toColor: [20, 122, 11]
                    }]
                }, {
                    id: "purpleToGreenDivergingDark_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [67, 14, 89],
                        toColor: [204, 204, 102]
                    }, {
                        fromColor: [204, 204, 102],
                        toColor: [24, 79, 15]
                    }]
                }, {
                    id: "purpleBlueBright_predefined",
                    fromColor: [223, 184, 230],
                    toColor: [112, 12, 242]
                }, {
                    id: "purpleBlueLightToDark_predefined",
                    fromColor: [229, 213, 242],
                    toColor: [93, 44, 112]
                }, {
                    id: "purpleRedBright_predefined",
                    fromColor: [255, 204, 225],
                    toColor: [199, 0, 99]
                }, {
                    id: "purpleRedLightToDark_predefined",
                    fromColor: [250, 215, 246],
                    toColor: [143, 17, 57]
                }, {
                    id: "redBright_predefined",
                    fromColor: [255, 204, 204],
                    toColor: [219, 0, 0]
                }, {
                    id: "redLightToDark_predefined",
                    fromColor: [255, 224, 224],
                    toColor: [143, 10, 10]
                }, {
                    id: "redToBlueDivergingBright_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [196, 69, 57],
                        toColor: [255, 255, 191]
                    }, {
                        fromColor: [255, 255, 191],
                        toColor: [48, 95, 207]
                    }]
                }, {
                    id: "redToBlueDivergingDark_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [107, 13, 13],
                        toColor: [204, 204, 102]
                    }, {
                        fromColor: [204, 204, 102],
                        toColor: [13, 53, 97]
                    }]
                }, {
                    id: "redToGreen_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [245, 0, 0],
                        toColor: [245, 245, 0]
                    }, {
                        fromColor: [245, 245, 0],
                        toColor: [0, 245, 0]
                    }]
                }, {
                    id: "redToGreenDivergingBright_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [186, 20, 20],
                        toColor: [255, 255, 191]
                    }, {
                        fromColor: [255, 255, 191],
                        toColor: [54, 145, 33]
                    }]
                }, {
                    id: "redToGreenDivergingDark_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [97, 21, 13],
                        toColor: [204, 204, 102]
                    }, {
                        fromColor: [204, 204, 102],
                        toColor: [16, 69, 16]
                    }]
                }, {
                    id: "slope_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [56, 168, 0],
                        toColor: [255, 255, 0]
                    }, {
                        fromColor: [255, 255, 0],
                        toColor: [255, 0, 0]
                    }]
                }, {
                    id: "spectrumFullBright_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [255, 0, 0],
                        toColor: [255, 255, 0]
                    }, {
                        fromColor: [255, 255, 0],
                        toColor: [0, 255, 255]
                    }, {
                        fromColor: [0, 255, 255],
                        toColor: [0, 0, 255]
                    }]
                }, {
                    id: "spectrumFullDark_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [153, 0, 0],
                        toColor: [153, 153, 0]
                    }, {
                        fromColor: [153, 153, 0],
                        toColor: [0, 153, 153]
                    }, {
                        fromColor: [0, 153, 153],
                        toColor: [0, 0, 153]
                    }]
                }, {
                    id: "spectrumFullLight_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [255, 153, 153],
                        toColor: [255, 255, 153]
                    }, {
                        fromColor: [255, 255, 153],
                        toColor: [153, 255, 255]
                    }, {
                        fromColor: [153, 255, 255],
                        toColor: [153, 153, 255]
                    }]
                }, {
                    id: "surface_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [112, 153, 89],
                        toColor: [242, 238, 162]
                    }, {
                        fromColor: [242, 238, 162],
                        toColor: [242, 206, 133]
                    }, {
                        fromColor: [242, 206, 133],
                        toColor: [194, 140, 124]
                    }, {
                        fromColor: [194, 140, 124],
                        toColor: [255, 242, 255]
                    }]
                }, {
                    id: "temperature_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [255, 252, 255],
                        toColor: [255, 0, 255]
                    }, {
                        fromColor: [255, 0, 255],
                        toColor: [0, 0, 255]
                    }, {
                        fromColor: [0, 0, 255],
                        toColor: [0, 255, 255]
                    }, {
                        fromColor: [0, 255, 255],
                        toColor: [0, 255, 0]
                    }, {
                        fromColor: [0, 255, 0],
                        toColor: [255, 255, 0]
                    }, {
                        fromColor: [255, 255, 0],
                        toColor: [255, 128, 0]
                    }, {
                        fromColor: [255, 128, 0],
                        toColor: [128, 0, 0]
                    }]
                }, {
                    id: "viridis_predefined",
                    type: "multipart",
                    colorRamps: [{
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [68, 1, 84, 255],
                        toColor: [69, 2, 86, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 2, 86, 255],
                        toColor: [69, 4, 87, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 4, 87, 255],
                        toColor: [69, 5, 89, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 5, 89, 255],
                        toColor: [70, 7, 90, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 7, 90, 255],
                        toColor: [70, 8, 92, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 8, 92, 255],
                        toColor: [70, 10, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 10, 93, 255],
                        toColor: [71, 11, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 11, 95, 255],
                        toColor: [71, 13, 96, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 13, 96, 255],
                        toColor: [71, 14, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 14, 98, 255],
                        toColor: [71, 16, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 16, 99, 255],
                        toColor: [72, 17, 100, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 17, 100, 255],
                        toColor: [72, 19, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 19, 102, 255],
                        toColor: [72, 20, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 20, 103, 255],
                        toColor: [72, 22, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 22, 104, 255],
                        toColor: [72, 23, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 23, 106, 255],
                        toColor: [72, 24, 107, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 24, 107, 255],
                        toColor: [72, 26, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 26, 108, 255],
                        toColor: [72, 27, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 27, 109, 255],
                        toColor: [72, 28, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 28, 110, 255],
                        toColor: [73, 30, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [73, 30, 112, 255],
                        toColor: [73, 31, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [73, 31, 113, 255],
                        toColor: [72, 32, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 32, 114, 255],
                        toColor: [72, 34, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 34, 115, 255],
                        toColor: [72, 35, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 35, 116, 255],
                        toColor: [72, 36, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 36, 117, 255],
                        toColor: [72, 37, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 37, 118, 255],
                        toColor: [72, 39, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 39, 119, 255],
                        toColor: [72, 40, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 40, 120, 255],
                        toColor: [72, 41, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 41, 121, 255],
                        toColor: [72, 42, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 42, 122, 255],
                        toColor: [72, 44, 123, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 44, 123, 255],
                        toColor: [71, 45, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 45, 124, 255],
                        toColor: [71, 46, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 46, 125, 255],
                        toColor: [71, 47, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 47, 125, 255],
                        toColor: [71, 49, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [71, 49, 126, 255],
                        toColor: [70, 50, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 50, 127, 255],
                        toColor: [70, 51, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 51, 128, 255],
                        toColor: [70, 52, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 52, 128, 255],
                        toColor: [70, 54, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 54, 129, 255],
                        toColor: [69, 55, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 55, 130, 255],
                        toColor: [69, 56, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 56, 130, 255],
                        toColor: [69, 57, 131, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [69, 57, 131, 255],
                        toColor: [68, 58, 132, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [68, 58, 132, 255],
                        toColor: [68, 60, 132, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [68, 60, 132, 255],
                        toColor: [68, 61, 133, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [68, 61, 133, 255],
                        toColor: [67, 62, 133, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [67, 62, 133, 255],
                        toColor: [67, 63, 134, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [67, 63, 134, 255],
                        toColor: [66, 64, 134, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [66, 64, 134, 255],
                        toColor: [66, 66, 135, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [66, 66, 135, 255],
                        toColor: [65, 67, 135, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [65, 67, 135, 255],
                        toColor: [65, 68, 136, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [65, 68, 136, 255],
                        toColor: [65, 69, 136, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [65, 69, 136, 255],
                        toColor: [64, 70, 136, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [64, 70, 136, 255],
                        toColor: [64, 71, 137, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [64, 71, 137, 255],
                        toColor: [63, 73, 137, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [63, 73, 137, 255],
                        toColor: [63, 74, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [63, 74, 138, 255],
                        toColor: [62, 75, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [62, 75, 138, 255],
                        toColor: [62, 76, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [62, 76, 138, 255],
                        toColor: [61, 77, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [61, 77, 138, 255],
                        toColor: [61, 78, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [61, 78, 139, 255],
                        toColor: [60, 79, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [60, 79, 139, 255],
                        toColor: [60, 80, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [60, 80, 139, 255],
                        toColor: [59, 81, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [59, 81, 139, 255],
                        toColor: [59, 83, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [59, 83, 140, 255],
                        toColor: [58, 84, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [58, 84, 140, 255],
                        toColor: [58, 85, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [58, 85, 140, 255],
                        toColor: [57, 86, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [57, 86, 140, 255],
                        toColor: [57, 87, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [57, 87, 140, 255],
                        toColor: [56, 88, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [56, 88, 141, 255],
                        toColor: [56, 89, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [56, 89, 141, 255],
                        toColor: [55, 90, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [55, 90, 141, 255],
                        toColor: [55, 91, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [55, 91, 141, 255],
                        toColor: [54, 92, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [54, 92, 141, 255],
                        toColor: [54, 93, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [54, 93, 141, 255],
                        toColor: [53, 94, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [53, 94, 141, 255],
                        toColor: [53, 95, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [53, 95, 142, 255],
                        toColor: [52, 96, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [52, 96, 142, 255],
                        toColor: [52, 97, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [52, 97, 142, 255],
                        toColor: [52, 98, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [52, 98, 142, 255],
                        toColor: [51, 99, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [51, 99, 142, 255],
                        toColor: [51, 100, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [51, 100, 142, 255],
                        toColor: [50, 101, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [50, 101, 142, 255],
                        toColor: [50, 102, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [50, 102, 142, 255],
                        toColor: [49, 103, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [49, 103, 142, 255],
                        toColor: [49, 104, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [49, 104, 142, 255],
                        toColor: [48, 105, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [48, 105, 142, 255],
                        toColor: [48, 106, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [48, 106, 142, 255],
                        toColor: [48, 107, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [48, 107, 143, 255],
                        toColor: [47, 108, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [47, 108, 143, 255],
                        toColor: [47, 109, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [47, 109, 143, 255],
                        toColor: [46, 110, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [46, 110, 143, 255],
                        toColor: [46, 111, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [46, 111, 143, 255],
                        toColor: [45, 112, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [45, 112, 143, 255],
                        toColor: [45, 113, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [45, 113, 143, 255],
                        toColor: [45, 114, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [45, 114, 143, 255],
                        toColor: [44, 115, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [44, 115, 143, 255],
                        toColor: [44, 116, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [44, 116, 143, 255],
                        toColor: [43, 117, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [43, 117, 143, 255],
                        toColor: [43, 118, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [43, 118, 143, 255],
                        toColor: [43, 119, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [43, 119, 143, 255],
                        toColor: [42, 120, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [42, 120, 143, 255],
                        toColor: [42, 121, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [42, 121, 143, 255],
                        toColor: [42, 122, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [42, 122, 143, 255],
                        toColor: [41, 123, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [41, 123, 143, 255],
                        toColor: [41, 123, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [41, 123, 143, 255],
                        toColor: [40, 124, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [40, 124, 143, 255],
                        toColor: [40, 125, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [40, 125, 143, 255],
                        toColor: [40, 126, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [40, 126, 143, 255],
                        toColor: [39, 127, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [39, 127, 143, 255],
                        toColor: [39, 128, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [39, 128, 143, 255],
                        toColor: [39, 129, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [39, 129, 143, 255],
                        toColor: [38, 130, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [38, 130, 143, 255],
                        toColor: [38, 131, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [38, 131, 143, 255],
                        toColor: [37, 132, 143, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [37, 132, 143, 255],
                        toColor: [37, 133, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [37, 133, 142, 255],
                        toColor: [37, 134, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [37, 134, 142, 255],
                        toColor: [36, 135, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [36, 135, 142, 255],
                        toColor: [36, 136, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [36, 136, 142, 255],
                        toColor: [36, 137, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [36, 137, 142, 255],
                        toColor: [35, 138, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [35, 138, 142, 255],
                        toColor: [35, 139, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [35, 139, 142, 255],
                        toColor: [35, 139, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [35, 139, 142, 255],
                        toColor: [34, 140, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [34, 140, 142, 255],
                        toColor: [34, 141, 142, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [34, 141, 142, 255],
                        toColor: [34, 142, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [34, 142, 141, 255],
                        toColor: [33, 143, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [33, 143, 141, 255],
                        toColor: [33, 144, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [33, 144, 141, 255],
                        toColor: [33, 145, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [33, 145, 141, 255],
                        toColor: [32, 146, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 146, 141, 255],
                        toColor: [32, 147, 141, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 147, 141, 255],
                        toColor: [32, 148, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 148, 140, 255],
                        toColor: [32, 149, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 149, 140, 255],
                        toColor: [31, 150, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 150, 140, 255],
                        toColor: [31, 151, 140, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 151, 140, 255],
                        toColor: [31, 152, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 152, 139, 255],
                        toColor: [31, 153, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 153, 139, 255],
                        toColor: [31, 154, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 154, 139, 255],
                        toColor: [31, 155, 139, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 155, 139, 255],
                        toColor: [31, 156, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 156, 138, 255],
                        toColor: [31, 156, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 156, 138, 255],
                        toColor: [31, 157, 138, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 157, 138, 255],
                        toColor: [31, 158, 137, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 158, 137, 255],
                        toColor: [31, 159, 137, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 159, 137, 255],
                        toColor: [31, 160, 137, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 160, 137, 255],
                        toColor: [31, 161, 136, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 161, 136, 255],
                        toColor: [31, 162, 136, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [31, 162, 136, 255],
                        toColor: [32, 163, 135, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 163, 135, 255],
                        toColor: [32, 164, 135, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 164, 135, 255],
                        toColor: [32, 165, 134, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [32, 165, 134, 255],
                        toColor: [33, 166, 134, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [33, 166, 134, 255],
                        toColor: [33, 167, 134, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [33, 167, 134, 255],
                        toColor: [34, 168, 133, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [34, 168, 133, 255],
                        toColor: [34, 169, 133, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [34, 169, 133, 255],
                        toColor: [35, 170, 132, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [35, 170, 132, 255],
                        toColor: [36, 170, 131, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [36, 170, 131, 255],
                        toColor: [37, 171, 131, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [37, 171, 131, 255],
                        toColor: [38, 172, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [38, 172, 130, 255],
                        toColor: [38, 173, 130, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [38, 173, 130, 255],
                        toColor: [39, 174, 129, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [39, 174, 129, 255],
                        toColor: [40, 175, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [40, 175, 128, 255],
                        toColor: [41, 176, 128, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [41, 176, 128, 255],
                        toColor: [43, 177, 127, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [43, 177, 127, 255],
                        toColor: [44, 178, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [44, 178, 126, 255],
                        toColor: [45, 179, 126, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [45, 179, 126, 255],
                        toColor: [46, 180, 125, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [46, 180, 125, 255],
                        toColor: [48, 180, 124, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [48, 180, 124, 255],
                        toColor: [49, 181, 123, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [49, 181, 123, 255],
                        toColor: [50, 182, 123, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [50, 182, 123, 255],
                        toColor: [52, 183, 122, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [52, 183, 122, 255],
                        toColor: [53, 184, 121, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [53, 184, 121, 255],
                        toColor: [55, 185, 120, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [55, 185, 120, 255],
                        toColor: [56, 186, 119, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [56, 186, 119, 255],
                        toColor: [58, 187, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [58, 187, 118, 255],
                        toColor: [60, 187, 118, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [60, 187, 118, 255],
                        toColor: [61, 188, 117, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [61, 188, 117, 255],
                        toColor: [63, 189, 116, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [63, 189, 116, 255],
                        toColor: [65, 190, 115, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [65, 190, 115, 255],
                        toColor: [67, 191, 114, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [67, 191, 114, 255],
                        toColor: [68, 192, 113, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [68, 192, 113, 255],
                        toColor: [70, 193, 112, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [70, 193, 112, 255],
                        toColor: [72, 193, 111, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [72, 193, 111, 255],
                        toColor: [74, 194, 110, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [74, 194, 110, 255],
                        toColor: [76, 195, 109, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [76, 195, 109, 255],
                        toColor: [78, 196, 108, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [78, 196, 108, 255],
                        toColor: [80, 197, 106, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [80, 197, 106, 255],
                        toColor: [82, 197, 105, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [82, 197, 105, 255],
                        toColor: [84, 198, 104, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [84, 198, 104, 255],
                        toColor: [86, 199, 103, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [86, 199, 103, 255],
                        toColor: [88, 200, 102, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [88, 200, 102, 255],
                        toColor: [90, 200, 101, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [90, 200, 101, 255],
                        toColor: [92, 201, 99, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [92, 201, 99, 255],
                        toColor: [95, 202, 98, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [95, 202, 98, 255],
                        toColor: [97, 203, 97, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [97, 203, 97, 255],
                        toColor: [99, 203, 95, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [99, 203, 95, 255],
                        toColor: [101, 204, 94, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [101, 204, 94, 255],
                        toColor: [103, 205, 93, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [103, 205, 93, 255],
                        toColor: [106, 206, 91, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [106, 206, 91, 255],
                        toColor: [108, 206, 90, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [108, 206, 90, 255],
                        toColor: [110, 207, 89, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [110, 207, 89, 255],
                        toColor: [113, 208, 87, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [113, 208, 87, 255],
                        toColor: [115, 208, 86, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [115, 208, 86, 255],
                        toColor: [117, 209, 84, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [117, 209, 84, 255],
                        toColor: [120, 210, 83, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [120, 210, 83, 255],
                        toColor: [122, 210, 81, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [122, 210, 81, 255],
                        toColor: [125, 211, 80, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [125, 211, 80, 255],
                        toColor: [127, 212, 78, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [127, 212, 78, 255],
                        toColor: [130, 212, 77, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [130, 212, 77, 255],
                        toColor: [132, 213, 75, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [132, 213, 75, 255],
                        toColor: [135, 213, 74, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [135, 213, 74, 255],
                        toColor: [137, 214, 72, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [137, 214, 72, 255],
                        toColor: [140, 215, 71, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [140, 215, 71, 255],
                        toColor: [142, 215, 69, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [142, 215, 69, 255],
                        toColor: [145, 216, 67, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [145, 216, 67, 255],
                        toColor: [147, 216, 66, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [147, 216, 66, 255],
                        toColor: [150, 217, 64, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [150, 217, 64, 255],
                        toColor: [153, 217, 62, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [153, 217, 62, 255],
                        toColor: [155, 218, 61, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [155, 218, 61, 255],
                        toColor: [158, 218, 59, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [158, 218, 59, 255],
                        toColor: [160, 219, 57, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [160, 219, 57, 255],
                        toColor: [163, 219, 55, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [163, 219, 55, 255],
                        toColor: [166, 220, 54, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [166, 220, 54, 255],
                        toColor: [168, 220, 52, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [168, 220, 52, 255],
                        toColor: [171, 221, 50, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [171, 221, 50, 255],
                        toColor: [174, 221, 49, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [174, 221, 49, 255],
                        toColor: [176, 222, 47, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [176, 222, 47, 255],
                        toColor: [179, 222, 45, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [179, 222, 45, 255],
                        toColor: [182, 222, 43, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [182, 222, 43, 255],
                        toColor: [184, 223, 42, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [184, 223, 42, 255],
                        toColor: [187, 223, 40, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [187, 223, 40, 255],
                        toColor: [190, 224, 38, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [190, 224, 38, 255],
                        toColor: [192, 224, 37, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [192, 224, 37, 255],
                        toColor: [195, 224, 35, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [195, 224, 35, 255],
                        toColor: [198, 225, 34, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [198, 225, 34, 255],
                        toColor: [201, 225, 32, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [201, 225, 32, 255],
                        toColor: [203, 225, 31, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [203, 225, 31, 255],
                        toColor: [206, 226, 29, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [206, 226, 29, 255],
                        toColor: [209, 226, 28, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [209, 226, 28, 255],
                        toColor: [211, 226, 27, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [211, 226, 27, 255],
                        toColor: [214, 227, 26, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [214, 227, 26, 255],
                        toColor: [216, 227, 26, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [216, 227, 26, 255],
                        toColor: [219, 227, 25, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [219, 227, 25, 255],
                        toColor: [222, 228, 25, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [222, 228, 25, 255],
                        toColor: [224, 228, 24, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [224, 228, 24, 255],
                        toColor: [227, 228, 24, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [227, 228, 24, 255],
                        toColor: [229, 229, 25, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [229, 229, 25, 255],
                        toColor: [232, 229, 25, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [232, 229, 25, 255],
                        toColor: [235, 229, 26, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [235, 229, 26, 255],
                        toColor: [237, 230, 27, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [237, 230, 27, 255],
                        toColor: [240, 230, 28, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [240, 230, 28, 255],
                        toColor: [242, 230, 29, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [242, 230, 29, 255],
                        toColor: [245, 231, 30, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [245, 231, 30, 255],
                        toColor: [247, 231, 32, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [247, 231, 32, 255],
                        toColor: [249, 231, 33, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [249, 231, 33, 255],
                        toColor: [252, 232, 35, 255]
                    }, {
                        type: "algorithmic",
                        algorithm: "esriCIELabAlgorithm",
                        fromColor: [252, 232, 35, 255],
                        toColor: [254, 232, 37, 255]
                    }]
                }, {
                    id: "whiteToBlack_predefined",
                    fromColor: [255, 255, 255],
                    toColor: [0, 0, 0]
                }, {
                    id: "yellowToDarkRed_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [255, 255, 128],
                        toColor: [242, 167, 46]
                    }, {
                        fromColor: [242, 167, 46],
                        toColor: [107, 0, 0]
                    }]
                }, {
                    id: "yellowToGreenToDarkBlue_predefined",
                    type: "multipart",
                    colorRamps: [{
                        fromColor: [255, 255, 128],
                        toColor: [56, 224, 9]
                    }, {
                        fromColor: [56, 224, 9],
                        toColor: [26, 147, 171]
                    }, {
                        fromColor: [26, 147, 171],
                        toColor: [12, 16, 120]
                    }]
                }, {
                    id: "yellowToRed_predefined",
                    fromColor: [245, 245, 0],
                    toColor: [255, 0, 0]
                }, {
                    id: "yellowGreenBright_predefined",
                    fromColor: [236, 252, 204],
                    toColor: [157, 204, 16]
                }, {
                    id: "yellowGreenLightToDark_predefined",
                    fromColor: [215, 240, 175],
                    toColor: [96, 107, 45]
                }]
                  , q = [{
                    name: "Aspect",
                    id: "aspect_predefined"
                }, {
                    name: "Black to White",
                    id: "blackToWhite_predefined"
                }, {
                    name: "Blue Bright",
                    id: "blueBright_predefined"
                }, {
                    name: "Blue Light to Dark",
                    id: "blueLightToDark_predefined"
                }, {
                    name: "Blue-Green Bright",
                    id: "blueGreenBright_predefined"
                }, {
                    name: "Blue-Green Light to Dark",
                    id: "blueGreenLightToDark_predefined"
                }, {
                    name: "Brown Light to Dark",
                    id: "brownLightToDark_predefined"
                }, {
                    name: "Brown to Blue Green Diverging, Bright",
                    id: "brownToBlueGreenDivergingBright_predefined"
                }, {
                    name: "Brown to Blue Green Diverging, Dark",
                    id: "brownToBlueGreenDivergingDark_predefined"
                }, {
                    name: "Cividis",
                    id: "cividis_predefined"
                }, {
                    name: "Coefficient Bias",
                    id: "coefficientBias_predefined"
                }, {
                    name: "Cold to Hot Diverging",
                    id: "coldToHotDiverging_predefined"
                }, {
                    name: "Condition Number",
                    id: "conditionNumber_predefined"
                }, {
                    name: "Cyan to Purple",
                    id: "cyanToPurple_predefined"
                }, {
                    name: "Cyan-Light to Blue-Dark",
                    id: "cyanLightToBlueDark_predefined"
                }, {
                    name: "Distance",
                    id: "distance_predefined"
                }, {
                    id: "elevation1_predefined",
                    name: "Elevation #1"
                }, {
                    id: "elevation2_predefined",
                    name: "Elevation #2"
                }, {
                    id: "errors_predefined",
                    name: "Errors"
                }, {
                    id: "grayLightToDark_predefined",
                    name: "Gray Light to Dark"
                }, {
                    id: "greenBright_predefined",
                    name: "Green Bright"
                }, {
                    id: "greenLightToDark_predefined",
                    name: "Green Light to Dark"
                }, {
                    name: "Green to Blue",
                    id: "greenToBlue_predefined"
                }, {
                    name: "Inferno",
                    id: "inferno_predefined"
                }, {
                    name: "Magma",
                    id: "magma_predefined"
                }, {
                    name: "Orange Bright",
                    id: "orangeBright_predefined"
                }, {
                    name: "Orange Light to Dark",
                    id: "orangeLightToDark_predefined"
                }, {
                    id: "partialSpectrum_predefined",
                    name: "Partial Spectrum"
                }, {
                    id: "partialSpectrum1Diverging_predefined",
                    name: "Partial Spectrum 1 Diverging",
                    type: "multipart"
                }, {
                    id: "partialSpectrum2Diverging_predefined",
                    name: "Partial Spectrum 2 Diverging"
                }, {
                    name: "Plasma",
                    id: "plasma_predefined"
                }, {
                    name: "Pink to YellowGreen Diverging, Bright",
                    id: "pinkToYellowGreenDivergingBright_predefined"
                }, {
                    name: "Pink to YellowGreen Diverging, Dark",
                    id: "pinkToYellowGreenDivergingDark_predefined"
                }, {
                    id: "precipitation_predefined",
                    name: "Precipitation"
                }, {
                    id: "prediction_predefined",
                    name: "Prediction"
                }, {
                    name: "Purple Bright",
                    id: "purpleBright_predefined"
                }, {
                    id: "purpleToGreenDivergingBright_predefined",
                    name: "Purple to Green Diverging, Bright"
                }, {
                    id: "purpleToGreenDivergingDark_predefined",
                    name: "Purple to Green Diverging, Dark"
                }, {
                    name: "Purple-Blue Bright",
                    id: "purpleBlueBright_predefined"
                }, {
                    name: "Purple-Blue Light to Dark",
                    id: "purpleBlueLightToDark_predefined"
                }, {
                    name: "Purple-Red Bright",
                    id: "purpleRedBright_predefined"
                }, {
                    name: "Purple-Red Light to Dark",
                    id: "purpleRedLightToDark_predefined"
                }, {
                    name: "Red Bright",
                    id: "redBright_predefined"
                }, {
                    name: "Red Light to Dark",
                    id: "redLightToDark_predefined"
                }, {
                    id: "redToBlueDivergingBright_predefined",
                    name: "Red to Blue Diverging, Bright"
                }, {
                    id: "redToBlueDivergingDark_predefined",
                    name: "Red to Blue Diverging, Dark"
                }, {
                    id: "redToGreen_predefined",
                    name: "Red to Green"
                }, {
                    id: "redToGreenDivergingBright_predefined",
                    name: "Red to Green Diverging, Bright"
                }, {
                    id: "redToGreenDivergingDark_predefined",
                    name: "Red to Green Diverging, Dark"
                }, {
                    name: "Slope",
                    id: "slope_predefined"
                }, {
                    id: "spectrumFullBright_predefined",
                    name: "Spectrum-Full Bright"
                }, {
                    id: "spectrumFullDark_predefined",
                    name: "Spectrum-Full Dark"
                }, {
                    id: "spectrumFullLight_predefined",
                    name: "Spectrum-Full Light"
                }, {
                    id: "surface_predefined",
                    name: "Surface"
                }, {
                    id: "temperature_predefined",
                    name: "Temperature"
                }, {
                    name: "Viridis",
                    id: "viridis_predefined"
                }, {
                    name: "White to Black",
                    id: "whiteToBlack_predefined"
                }, {
                    id: "yellowToDarkRed_predefined",
                    name: "Yellow to Dark Red"
                }, {
                    id: "yellowToGreenToDarkBlue_predefined",
                    name: "Yellow to Green to Dark Blue"
                }, {
                    name: "Yellow to Red",
                    id: "yellowToRed_predefined"
                }, {
                    name: "Yellow-Green Bright",
                    id: "yellowGreenBright_predefined"
                }, {
                    name: "Yellow-Green Light to Dark",
                    id: "yellowGreenLightToDark_predefined"
                }]
                  , x = new b({
                    data: q
                });
                C.mixin(t, {
                    predefinedColorRamps: g,
                    predefinedColorRampNameMap: q,
                    getColorRampName: function(v) {
                        v = d(v);
                        return v.id ? (v = x.query({
                            id: v.id
                        }),
                        v[0] ? v[0].name : null) : null
                    },
                    fromJson: function(v) {
                        var z = null;
                        if (!v)
                            return z;
                        "multipart" === v.type ? (z = new m,
                        z.colorRamps = y.map(v.colorRamps, function(u) {
                            return c(u)
                        }, this)) : "algorithmic" === v.type && (z = c(v));
                        return z
                    },
                    colorsEqual: e,
                    getColorRampId: d,
                    invertColorRamp: f,
                    convertColorRampToColormap: function(v, z) {
                        if (v && z) {
                            var u = v.colorRamps ? v.colorRamps.length : 1, p = [], r = [], B, D, G, A, E = 0, H = 0;
                            for (E = 0; E < u; E++)
                                p[E] = {},
                                p[E].start = H,
                                p[E].end = H + 1 / u,
                                H = p[E].end;
                            for (E = 0; E < z; E++) {
                                var J = (E + .5) / z;
                                y.forEach(p, function(O, V) {
                                    J >= O.start && J < O.end && (A = (J - O.start) / (O.end - O.start),
                                    1 < p.length ? (B = k.getDojoColor(v.colorRamps[V].fromColor),
                                    D = k.getDojoColor(v.colorRamps[V].toColor)) : (B = k.getDojoColor(v.fromColor),
                                    D = k.getDojoColor(v.toColor)),
                                    G = n(B, D, A),
                                    r.push([E, G.r, G.g, G.b]))
                                }, this)
                            }
                            return r
                        }
                    },
                    interpolateLabColor: n
                });
                return t
            })
        },
        "dojo/store/Memory": function() {
            define(["../_base/declare", "./util/QueryResults", "./util/SimpleQueryEngine"], function(C, y, b) {
                return C("dojo.store.Memory", null, {
                    constructor: function(w) {
                        for (var m in w)
                            this[m] = w[m];
                        this.setData(this.data || [])
                    },
                    data: null,
                    idProperty: "id",
                    index: null,
                    queryEngine: b,
                    get: function(w) {
                        return this.data[this.index[w]]
                    },
                    getIdentity: function(w) {
                        return w[this.idProperty]
                    },
                    put: function(w, m) {
                        var l = this.data
                          , k = this.index
                          , h = this.idProperty;
                        h = w[h] = m && "id"in m ? m.id : h in w ? w[h] : Math.random();
                        if (h in k) {
                            if (m && !1 === m.overwrite)
                                throw Error("Object already exists");
                            l[k[h]] = w
                        } else
                            k[h] = l.push(w) - 1;
                        return h
                    },
                    add: function(w, m) {
                        (m = m || {}).overwrite = !1;
                        return this.put(w, m)
                    },
                    remove: function(w) {
                        var m = this.index
                          , l = this.data;
                        if (w in m)
                            return l.splice(m[w], 1),
                            this.setData(l),
                            !0
                    },
                    query: function(w, m) {
                        return y(this.queryEngine(w, m)(this.data))
                    },
                    setData: function(w) {
                        w.items ? (this.idProperty = w.identifier || this.idProperty,
                        w = this.data = w.items) : this.data = w;
                        this.index = {};
                        for (var m = 0, l = w.length; m < l; m++)
                            this.index[w[m][this.idProperty]] = m
                    }
                })
            })
        },
        "dojo/store/util/QueryResults": function() {
            define(["../../_base/array", "../../_base/lang", "../../when"], function(C, y, b) {
                var w = function(m) {
                    function l(h) {
                        m[h] = function() {
                            var f = arguments
                              , d = b(m, function(a) {
                                Array.prototype.unshift.call(f, a);
                                return w(C[h].apply(C, f))
                            });
                            if ("forEach" !== h || k)
                                return d
                        }
                    }
                    if (!m)
                        return m;
                    var k = !!m.then;
                    k && (m = y.delegate(m));
                    l("forEach");
                    l("filter");
                    l("map");
                    null == m.total && (m.total = b(m, function(h) {
                        return h.length
                    }));
                    return m
                };
                y.setObject("dojo.store.util.QueryResults", w);
                return w
            })
        },
        "dojo/store/util/SimpleQueryEngine": function() {
            define(["../../_base/array"], function(C) {
                return function(y, b) {
                    function w(l) {
                        l = C.filter(l, y);
                        var k = b && b.sort;
                        k && l.sort("function" == typeof k ? k : function(f, d) {
                            for (var a, c = 0; a = k[c]; c++) {
                                var e = f[a.attribute]
                                  , n = d[a.attribute];
                                e = null != e ? e.valueOf() : e;
                                n = null != n ? n.valueOf() : n;
                                if (e != n)
                                    return !!a.descending == (null == e || e > n) ? -1 : 1
                            }
                            return 0
                        }
                        );
                        if (b && (b.start || b.count)) {
                            var h = l.length;
                            l = l.slice(b.start || 0, (b.start || 0) + (b.count || Infinity));
                            l.total = h
                        }
                        return l
                    }
                    switch (typeof y) {
                    default:
                        throw Error("Can not query with a " + typeof y);
                    case "object":
                    case "undefined":
                        var m = y;
                        y = function(l) {
                            for (var k in m) {
                                var h = m[k];
                                if (h && h.test) {
                                    if (!h.test(l[k], l))
                                        return !1
                                } else if (h != l[k])
                                    return !1
                            }
                            return !0
                        }
                        ;
                        break;
                    case "string":
                        if (!this[y])
                            throw Error("No filter function " + y + " was found in store");
                        y = this[y];
                    case "function":
                    }
                    w.matches = y;
                    return w
                }
            })
        },
        "esri/tasks/AlgorithmicColorRamp": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "), function(C, y, b, w, m, l) {
                C = C(l, {
                    declaredClass: "esri.tasks.AlgorithmicColorRamp",
                    type: "algorithmic",
                    fromColor: null,
                    toColor: null,
                    algorithm: null,
                    toJson: function() {
                        switch (this.algorithm && this.algorithm.toLowerCase()) {
                        case "cie-lab":
                            var k = "esriCIELabAlgorithm";
                            break;
                        case "hsv":
                            k = "esriHSVAlgorithm";
                            break;
                        case "lab-lch":
                            k = "esriLabLChAlgorithm"
                        }
                        k = {
                            type: "algorithmic",
                            algorithm: k
                        };
                        k.fromColor = m.toJsonColor(this.fromColor);
                        k.toColor = m.toJsonColor(this.toColor);
                        return k
                    }
                });
                b("extend-esri") && y.setObject("tasks.AlgorithmicColorRamp", C, w);
                return C
            })
        },
        "esri/tasks/ColorRamp": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function(C, y, b, w) {
                C = C(null, {
                    declaredClass: "esri.tasks.ColorRamp",
                    type: null
                });
                b("extend-esri") && y.setObject("tasks.ColorRamp", C, w);
                return C
            })
        },
        "esri/tasks/MultipartColorRamp": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "), function(C, y, b, w, m, l) {
                C = C(l, {
                    declaredClass: "esri.tasks.MultipartColorRamp",
                    type: "multipart",
                    constructor: function() {
                        this.colorRamps = []
                    },
                    addColorRamp: function(k) {
                        this.colorRamps.push(k)
                    },
                    toJson: function() {
                        return {
                            type: "multipart",
                            colorRamps: b.map(this.colorRamps, function(k) {
                                return k.toJson()
                            })
                        }
                    }
                });
                w("extend-esri") && y.setObject("tasks.MultipartColorRamp", C, m);
                return C
            })
        },
        "esri/renderers/colorUtils": function() {
            define(["dojo/_base/Color", "dojo/_base/array"], function(C, y) {
                var b = {
                    COEF_RGB2XYZ: [[.4124, .3576, .1805], [.2126, .7152, .0722], [.0193, .1192, .9505]],
                    COEF_XYZ2RGB: [[3.2406, -1.5372, -.4986], [-.9689, 1.8758, .0415], [.0557, -.204, 1.057]],
                    matrixProduct: function(m, l) {
                        var k = [], h, f;
                        if (m[0].length !== l.length)
                            throw "dimensions do not match";
                        var d = m.length
                          , a = m[0].length
                          , c = 0;
                        for (h = 0; h < d; h++) {
                            for (f = c = 0; f < a; f++)
                                c += m[h][f] * l[f];
                            k.push(c)
                        }
                        return k
                    },
                    rgb2xyz: function(m) {
                        m = [m.r / 255, m.g / 255, m.b / 255].map(function(l) {
                            return .04045 >= l ? l / 12.92 : Math.pow((l + .055) / 1.055, 2.4)
                        });
                        m = this.matrixProduct(this.COEF_RGB2XYZ, m);
                        return {
                            x: 100 * m[0],
                            y: 100 * m[1],
                            z: 100 * m[2]
                        }
                    },
                    xyz2rgb: function(m) {
                        m = this.matrixProduct(this.COEF_XYZ2RGB, [m.x / 100, m.y / 100, m.z / 100]).map(function(l) {
                            return Math.min(1, Math.max(.0031308 >= l ? 12.92 * l : 1.055 * Math.pow(l, 1 / 2.4) - .055, 0))
                        });
                        return {
                            r: Math.round(255 * m[0]),
                            g: Math.round(255 * m[1]),
                            b: Math.round(255 * m[2])
                        }
                    },
                    xyz2lab: function(m) {
                        m = [m.x / 95.047, m.y / 100, m.z / 108.883].map(function(l) {
                            return l > Math.pow(6 / 29, 3) ? Math.pow(l, 1 / 3) : 1 / 3 * Math.pow(29 / 6, 2) * l + 4 / 29
                        });
                        return {
                            l: 116 * m[1] - 16,
                            a: 500 * (m[0] - m[1]),
                            b: 200 * (m[1] - m[2])
                        }
                    },
                    lab2xyz: function(m) {
                        var l = m.l;
                        m = [(l + 16) / 116 + m.a / 500, (l + 16) / 116, (l + 16) / 116 - m.b / 200].map(function(k) {
                            return k > 6 / 29 ? Math.pow(k, 3) : 3 * Math.pow(6 / 29, 2) * (k - 4 / 29)
                        });
                        return {
                            x: 95.047 * m[0],
                            y: 100 * m[1],
                            z: 108.883 * m[2]
                        }
                    },
                    lab2lch: function(m) {
                        var l = m.l
                          , k = m.a
                          , h = m.b;
                        m = Math.sqrt(k * k + h * h);
                        k = Math.atan2(h, k);
                        k = 0 < k ? k : k + 2 * Math.PI;
                        return {
                            l: l,
                            c: m,
                            h: k
                        }
                    },
                    lch2lab: function(m) {
                        var l = m.c
                          , k = m.h;
                        return {
                            l: m.l,
                            a: l * Math.cos(k),
                            b: l * Math.sin(k)
                        }
                    },
                    rgb2lab: function(m) {
                        return this.xyz2lab(this.rgb2xyz(m))
                    },
                    lab2rgb: function(m) {
                        return this.xyz2rgb(this.lab2xyz(m))
                    },
                    rgb2lch: function(m) {
                        return this.lab2lch(this.xyz2lab(this.rgb2xyz(m)))
                    },
                    lch2rgb: function(m) {
                        return this.xyz2rgb(this.lab2xyz(this.lch2lab(m)))
                    }
                }
                  , w = {
                    rgb2hsv: function(m) {
                        var l = m.r
                          , k = m.g;
                        m = m.b;
                        var h = Math.max(l, k, m), f = h - Math.min(l, k, m), d;
                        0 === f ? d = 0 : h === l ? d = (k - m) / f % 6 : h === k ? d = (m - l) / f + 2 : h === m && (d = (l - k) / f + 4);
                        0 > d && (d += 6);
                        return {
                            h: 60 * d,
                            s: 100 * (0 === f ? 0 : f / h),
                            v: 100 / 255 * h
                        }
                    },
                    hsv2rgb: function(m) {
                        var l = (m.h + 360) % 360 / 60
                          , k = m.v / 100 * 255;
                        m = m.s / 100 * k;
                        var h = m * (1 - Math.abs(l % 2 - 1));
                        switch (Math.floor(l)) {
                        case 0:
                            l = {
                                r: m,
                                g: h,
                                b: 0
                            };
                            break;
                        case 1:
                            l = {
                                r: h,
                                g: m,
                                b: 0
                            };
                            break;
                        case 2:
                            l = {
                                r: 0,
                                g: m,
                                b: h
                            };
                            break;
                        case 3:
                            l = {
                                r: 0,
                                g: h,
                                b: m
                            };
                            break;
                        case 4:
                            l = {
                                r: h,
                                g: 0,
                                b: m
                            };
                            break;
                        case 5:
                        case 6:
                            l = {
                                r: m,
                                g: 0,
                                b: h
                            };
                            break;
                        default:
                            l = {
                                r: 0,
                                g: 0,
                                b: 0
                            }
                        }
                        l.r = Math.round(l.r + k - m);
                        l.g = Math.round(l.g + k - m);
                        l.b = Math.round(l.b + k - m);
                        return l
                    }
                };
                return {
                    toRGB: function(m) {
                        var l;
                        void 0 !== m.r && void 0 !== m.g && void 0 !== m.b ? l = m : void 0 !== m.l && void 0 !== m.c && void 0 !== m.h ? l = b.lch2rgb(m) : void 0 !== m.l && void 0 !== m.a && void 0 !== m.b ? l = b.lab2rgb(m) : void 0 !== m.x && void 0 !== m.y && void 0 !== m.z ? l = b.xyz2rgb(m) : void 0 !== m.h && void 0 !== m.s && void 0 !== m.v && (l = w.hsv2rgb(m));
                        return l
                    },
                    toHSV: function(m) {
                        if (void 0 !== m.h && void 0 !== m.s && void 0 !== m.v)
                            return m;
                        m = this.toRGB(m);
                        return w.rgb2hsv(m)
                    },
                    toLAB: function(m) {
                        return void 0 !== m.l && void 0 !== m.a && void 0 !== m.b ? m : b.rgb2lab(this.toRGB(m))
                    },
                    toLCH: function(m) {
                        return void 0 !== m.l && void 0 !== m.c && void 0 !== m.h ? m : b.rgb2lch(this.toRGB(m))
                    },
                    toXYZ: function(m) {
                        return void 0 !== m.x && void 0 !== m.y && void 0 !== m.z ? m : b.rgb2xyz(this.toRGB(m))
                    },
                    getDojoColor: function(m) {
                        if (m) {
                            if (Array.isArray(m))
                                return C.fromArray(m);
                            if (void 0 !== m.r && void 0 !== m.g && void 0 !== m.b)
                                return m
                        }
                    },
                    correctRGBLimits: function(m) {
                        var l = [m.r, m.g, m.b];
                        y.forEach(l, function(k, h) {
                            0 > l[h] ? l[h] = 0 : 255 < l[h] && (l[h] = 255);
                            l[h] = Math.floor(l[h])
                        });
                        return {
                            r: l[0],
                            g: l[1],
                            b: l[2],
                            a: 1
                        }
                    }
                }
            })
        },
        "esri/renderers/jsonUtils": function() {
            define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z) {
                var u = {
                    createDefaultRenderer: function(p) {
                        p = k.createDefaultSymbol(p);
                        return new h(p)
                    },
                    fromJson: function(p, r) {
                        switch (p.type || "") {
                        case "simple":
                            p = new h(p,r);
                            break;
                        case "uniqueValue":
                            p = new f(p,null,null,null,null,r);
                            break;
                        case "classBreaks":
                            p = new d(p,null,r);
                            break;
                        case "vectorField":
                            p = new a(p);
                            break;
                        case "scaleDependent":
                            p = this._scaleDependentFromJson(p);
                            break;
                        case "dotDensity":
                            p = p.attributes ? u.createDefaultRenderer("esriGeometryPolygon") : this._dotDensityFromJson(p);
                            break;
                        case "temporal":
                            p = this._temporalFromJson(p, r);
                            break;
                        case "heatmap":
                            p = this._heatmapFromJson(p);
                            break;
                        case "rasterStretch":
                            p = new x(p);
                            break;
                        case "rasterShadedRelief":
                            p = new v(p);
                            break;
                        case "rasterColormap":
                            p = new z(p);
                            break;
                        default:
                            p = (p = r && r.geometryType) ? u.createDefaultRenderer(p) : null
                        }
                        return p
                    },
                    _scaleDependentFromJson: function(p) {
                        var r = {}
                          , B = p.minScale;
                        r.rendererInfos = C.map(p.rendererInfos, function(D) {
                            var G = D.maxScale;
                            D = {
                                minScale: B,
                                maxScale: G,
                                renderer: D.renderer && this.fromJson(D.renderer)
                            };
                            B = G;
                            return D
                        }, this);
                        return new e(r)
                    },
                    _dotDensityFromJson: function(p) {
                        p.backgroundColor && y.isArray(p.backgroundColor) && (p.backgroundColor = l.toDojoColor(p.backgroundColor));
                        0 < p.dotSize && (p.dotSize = w.pt2px(p.dotSize));
                        p.fields && C.forEach(p.fields, function(r) {
                            r && y.isArray(r.color) && (r.color = l.toDojoColor(r.color))
                        });
                        p.legendOptions && (p.legendOptions.backgroundColor && y.isArray(p.legendOptions.backgroundColor) && (p.legendOptions.backgroundColor = l.toDojoColor(p.legendOptions.backgroundColor)),
                        p.legendOptions.outline && (p.legendOptions.outline = k.fromJson(p.legendOptions.outline)));
                        p.outline && (p.outline = k.fromJson(p.outline));
                        return new c(p)
                    },
                    _temporalFromJson: function(p, r) {
                        var B = r && r.geometryType;
                        p = p || {};
                        var D = this.fromJson(p.observationRenderer, r);
                        r = p.latestObservationRenderer ? this.fromJson(p.latestObservationRenderer, r) : null;
                        B = p.trackRenderer ? this.fromJson(p.trackRenderer, B ? {
                            geometryType: "esriGeometryPolyline"
                        } : null) : null;
                        p = this._agerFromJson(p.observationAger);
                        return new g(D,r,B,p)
                    },
                    _agerFromJson: function(p) {
                        var r;
                        p = p || {};
                        p.colorRange || p.sizeRange || p.alphaRange ? r = this._timeRampFromJson(p) : p.agerClassBreakInfos && (r = this._timeClassBreaksFromJson(p));
                        return r
                    },
                    _timeRampFromJson: function(p) {
                        var r, B, D;
                        p.colorRange && 1 < p.colorRange.length && (r = [l.toDojoColor(p.colorRange[0]), l.toDojoColor(p.colorRange[1])]);
                        p.sizeRange && 1 < p.sizeRange.length && (B = [p.sizeRange[0], p.sizeRange[1]]);
                        p.alphaRange && 1 < p.alphaRange.length && (D = [p.alphaRange[0] / 255, p.alphaRange[1] / 255]);
                        return new t(r,B,D)
                    },
                    _timeClassBreaksFromJson: function(p) {
                        var r = p.agerClassBreakInfos, B = [], D;
                        var G = n.UNIT_DAYS;
                        switch (p.timeUnits) {
                        case "esriTimeUnitsSeconds":
                            G = n.UNIT_SECONDS;
                            break;
                        case "esriTimeUnitsMilliseconds":
                            G = n.UNIT_MILLISECONDS;
                            break;
                        case "esriTimeUnitsHours":
                            G = n.UNIT_HOURS;
                            break;
                        case "esriTimeUnitsMinutes":
                            G = n.UNIT_MINUTES;
                            break;
                        case "esriTimeUnitsMonths":
                            G = n.UNIT_MONTHS;
                            break;
                        case "esriTimeUnitsWeeks":
                            G = n.UNIT_WEEKS;
                            break;
                        case "esriTimeUnitsYears":
                            G = n.UNIT_YEARS
                        }
                        for (D = 0; D < r.length; D += 1) {
                            p = r[D];
                            var A = {
                                minAge: 0,
                                maxAge: p.oldestAge || Infinity
                            };
                            p.color && (A.color = l.toDojoColor(p.color));
                            p.alpha && (A.alpha = p.alpha / 255);
                            A.size = p.size;
                            B[D] = A
                        }
                        return new n(B,G)
                    },
                    _heatmapFromJson: function(p) {
                        var r = p.colorStops;
                        r && r instanceof Array && C.forEach(r, function(B) {
                            B.color = l.toDojoColor(B.color)
                        });
                        return new q(p)
                    }
                };
                b("extend-esri") && y.mixin(y.getObject("renderer", !0, m), u);
                return u
            })
        },
        "esri/renderers/VectorFieldRenderer": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n) {
                var t = C(h, {
                    declaredClass: "esri.renderer.VectorFieldRenderer",
                    iconFolderPath: "../images/symbol/sfs/",
                    constructor: function(g) {
                        l.isDefined(g) || (g = {});
                        g.attributeField = g.attributeField || "Magnitude";
                        g.rotationInfo = g.rotationInfo || this._getRotationInfo(g);
                        C.safeMixin(this, g);
                        this.setRotationInfo(this.rotationInfo);
                        this.style = this.style || t.STYLE_SINGLE_ARROW;
                        this.singleArrowSymbol && (this.singleArrowSymbol = this.singleArrowSymbol.declaredClass ? this.singleArrowSymbol : e.fromJson(this.singleArrowSymbol));
                        this.renderer = new f(this._getDefaultSymbol(),g.attributeField);
                        this._updateRenderer(this.style);
                        this.flowRepresentation = this.flowRepresentation || this.FLOW_FROM
                    },
                    getSymbol: function(g) {
                        return this.renderer && this.renderer.getSymbol(g)
                    },
                    setVisualVariables: function(g) {
                        g = w.filter(g, function(q) {
                            if ("sizeInfo" === q.type)
                                return l.isDefined(this._updateSizeInfo(q))
                        }, this);
                        this.inherited(arguments);
                        return this
                    },
                    setSizeInfo: function(g) {
                        this._updateSizeInfo(g);
                        this.inherited(arguments);
                        return this
                    },
                    setProportionalSymbolInfo: function(g) {
                        this.setSizeInfo(g);
                        return this
                    },
                    setColorInfo: function(g) {
                        return this
                    },
                    _updateRenderer: function(g) {
                        return l.isDefined(this.renderer) ? g === t.STYLE_SINGLE_ARROW ? this._createSingleArrowRenderer() : g === t.STYLE_BEAUFORT_KN ? this._createBeaufortKnotsRenderer() : g === t.STYLE_BEAUFORT_METER ? this._createBeaufortMeterRenderer() : g === t.STYLE_BEAUFORT_FEET ? this._createBeaufortFeetRenderer() : g === t.STYLE_BEAUFORT_MILE ? this._createBeaufortMilesRenderer() : g === t.STYLE_BEAUFORT_KM ? this._createBeaufortKilometersRenderer() : g === t.STYLE_OCEAN_CURRENT_M ? this._createCurrentMeterRenderer() : g === t.STYLE_OCEAN_CURRENT_KN ? this._createCurrentKnotsRenderer() : g === t.STYLE_SCALAR ? this._createSimpleScalarRenderer() : g === t.STYLE_WIND_BARBS ? this._createWindBarbsRenderer() : this._createClassifiedArrowRenderer() : Error("Invalid Renderer!")
                    },
                    _updateSizeInfo: function(g) {
                        return g && l.isDefined(g.minSize) && l.isDefined(g.maxSize) && l.isDefined(g.minDataValue) && l.isDefined(g.maxDataValue) ? (this.style === t.STYLE_WIND_BARBS && (g.minSize = g.maxSize),
                        g.field = g.field || "Magnitude",
                        g.type = "sizeInfo",
                        this.minDataValue = g.minDataValue,
                        this.maxDataValue = g.maxDataValue,
                        g) : null
                    },
                    _createClassifiedArrowRenderer: function() {
                        this.renderer.defaultSymbol = this._getDefaultSymbol(new k([56, 168, 0]));
                        var g = [0, 1E-6, 3.5, 7, 10.5, 14];
                        if (l.isDefined(this.minDataValue) && l.isDefined(this.maxDataValue)) {
                            var q = (this.maxDataValue - this.minDataValue) / 5;
                            g = [];
                            var x;
                            var v = this.minDataValue;
                            for (x = 0; 6 > x; x++)
                                g[x] = v,
                                v += q
                        }
                        this._addBreaks(g, [[56, 168, 0], [139, 309, 0], [255, 255, 0], [255, 128, 0], [255, 0, 0]])
                    },
                    _createSingleArrowRenderer: function() {
                        this.renderer.defaultSymbol = this.singleArrowSymbol || this._getDefaultSymbol()
                    },
                    _createBeaufortMeterRenderer: function() {
                        this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                        this._addBreaks([0, .2, 1.8, 3.3, 5.4, 8.5, 11, 14.1, 17.2, 20.8, 24.4, 28.6, 32.7], [[69, 117, 181], [101, 137, 184], [132, 158, 186], [162, 180, 189], [192, 204, 190], [222, 227, 191], [255, 255, 191], [255, 220, 161], [250, 185, 132], [245, 152, 105], [237, 117, 81], [232, 21, 21]])
                    },
                    _createBeaufortKnotsRenderer: function() {
                        this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                        this._addBreaks([0, 1, 3, 6, 10, 16, 21, 27, 33, 40, 47, 55, 63], [[40, 146, 199], [89, 162, 186], [129, 179, 171], [160, 194, 155], [191, 212, 138], [218, 230, 119], [250, 250, 100], [252, 213, 83], [252, 179, 102], [250, 141, 52], [247, 110, 42], [240, 71, 29]])
                    },
                    _createBeaufortFeetRenderer: function() {
                        var g = [0, .2, 1.8, 3.3, 5.4, 8.5, 11, 14.1, 17.2, 20.8, 24.4, 28.6, 32.7];
                        w.forEach(g, function(q, x) {
                            g[x] *= 3.28084
                        });
                        this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                        this._addBreaks(g, [[69, 117, 181], [101, 137, 184], [132, 158, 186], [162, 180, 189], [192, 204, 190], [222, 227, 191], [255, 255, 191], [255, 220, 161], [250, 185, 132], [245, 152, 105], [237, 117, 81], [232, 21, 21]])
                    },
                    _createBeaufortMilesRenderer: function() {
                        var g = [0, .2, 1.8, 3.3, 5.4, 8.5, 11, 14.1, 17.2, 20.8, 24.4, 28.6, 32.7];
                        w.forEach(g, function(q, x) {
                            g[x] *= 2.23694
                        });
                        this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                        this._addBreaks(g, [[69, 117, 181], [101, 137, 184], [132, 158, 186], [162, 180, 189], [192, 204, 190], [222, 227, 191], [255, 255, 191], [255, 220, 161], [250, 185, 132], [245, 152, 105], [237, 117, 81], [232, 21, 21]])
                    },
                    _createBeaufortKilometersRenderer: function() {
                        var g = [0, .2, 1.8, 3.3, 5.4, 8.5, 11, 14.1, 17.2, 20.8, 24.4, 28.6, 32.7];
                        w.forEach(g, function(q, x) {
                            g[x] *= 3.6
                        });
                        this.renderer.defaultSymbol = this._getDefaultSymbol(new k([214, 47, 39]));
                        this._addBreaks(g, [[69, 117, 181], [101, 137, 184], [132, 158, 186], [162, 180, 189], [192, 204, 190], [222, 227, 191], [255, 255, 191], [255, 220, 161], [250, 185, 132], [245, 152, 105], [237, 117, 81], [232, 21, 21]])
                    },
                    _createCurrentMeterRenderer: function() {
                        this.renderer.defaultSymbol = this._getDefaultSymbol(new k([177, 177, 177]));
                        this._addBreaks([0, .5, 1, 1.5, 2], [[78, 26, 153], [179, 27, 26], [202, 128, 26], [177, 177, 177]])
                    },
                    _createCurrentKnotsRenderer: function() {
                        this.renderer.defaultSymbol = this._getDefaultSymbol(new k([177, 177, 177]));
                        this._addBreaks([0, .25, .5, 1, 1.5, 2, 2.5, 3, 3.5, 4], [[0, 0, 0], [0, 37, 100], [78, 26, 153], [151, 0, 100], [179, 27, 26], [177, 78, 26], [202, 128, 26], [177, 179, 52], [177, 177, 177]])
                    },
                    _createSimpleScalarRenderer: function() {
                        this.renderer.defaultSymbol = new a({
                            url: n.toUrl(this.iconFolderPath + "scalar.png"),
                            height: 20,
                            width: 20,
                            type: "esriPMS",
                            angle: 0
                        })
                    },
                    _createWindBarbsRenderer: function() {
                        var g = [], q;
                        for (q = 0; 150 >= q; q += 5)
                            g.push(q);
                        var x = "M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
                        var v = new a({
                            url: n.toUrl(this.iconFolderPath + "windbarb.png"),
                            height: 20,
                            width: 20,
                            type: "esriPMS",
                            angle: 0
                        });
                        this.renderer.defaultSymbol = v;
                        for (q = 0; q < g.length - 1; q++)
                            0 === q ? this.renderer.addBreak({
                                minValue: g[q],
                                maxValue: g[q + 1],
                                symbol: v
                            }) : this.renderer.addBreak({
                                minValue: g[q],
                                maxValue: g[q + 1],
                                symbol: (new d).setPath(x[q]).setOutline((new c).setWidth(1.5)).setSize(20).setColor(new k([0, 0, 0, 255]))
                            })
                    },
                    _getDefaultSymbol: function(g) {
                        return (new d).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new c).setWidth(0)).setSize(20).setColor(g || new k([0, 92, 230]))
                    },
                    _getRotationInfo: function(g) {
                        var q = g && g.flowRepresentation || t.FLOW_FROM
                          , x = g && g.rotationField || "Direction"
                          , v = t.FLOW_FROM;
                        return {
                            field: function(z) {
                                z = z.attributes[x];
                                return q === v ? z : z + 180
                            },
                            type: "geographic"
                        }
                    },
                    _addBreaks: function(g, q) {
                        if (!l.isDefined(this.renderer))
                            return Error("Invalid Renderer!");
                        if (!(g && q && g.length && q.length && g.length >= q.length))
                            return Error("AddBreaks: Input arguments break values and colors not valid");
                        var x;
                        for (x = 0; x < q.length; x++)
                            this.renderer.addBreak({
                                minValue: g[x],
                                maxValue: g[x + 1],
                                symbol: this._getDefaultSymbol(new k(q[x]))
                            })
                    },
                    toJson: function() {
                        var g = y.mixin(this.inherited(arguments), {
                            type: "vectorField",
                            style: this.style,
                            attributeField: this.attributeField,
                            flowRepresentation: this.flowRepresentation,
                            symbolTileSize: this.symbolTileSize,
                            inputUnit: this.inputUnit,
                            outputUnit: this.outputUnit
                        });
                        this.renderer && this.renderer.defaultSymbol && this.style === t.STYLE_SINGLE_ARROW && (g.singleArrowSymbol = this.renderer.defaultSymbol.toJson());
                        return l.fixJson(g)
                    }
                });
                y.mixin(t, {
                    STYLE_WIND_BARBS: "wind_speed",
                    STYLE_SINGLE_ARROW: "single_arrow",
                    STYLE_CLASSIFIED_ARROW: "classified_arrow",
                    STYLE_BEAUFORT_KN: "beaufort_kn",
                    STYLE_BEAUFORT_METER: "beaufort_m",
                    STYLE_BEAUFORT_MILE: "beaufort_mi",
                    STYLE_BEAUFORT_FEET: "beaufort_ft",
                    STYLE_BEAUFORT_KM: "beaufort_km",
                    STYLE_OCEAN_CURRENT_M: "ocean_current_m",
                    STYLE_OCEAN_CURRENT_KN: "ocean_current_kn",
                    STYLE_SCALAR: "simple_scalar"
                }, {
                    FLOW_FROM: "flow_from",
                    FLOW_TO: "flow_to"
                });
                b("extend-esri") && y.setObject("renderer.VectorFieldRenderer", t, m);
                return t
            })
        },
        "esri/renderers/DotDensityRenderer": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                C = C(d, {
                    declaredClass: "esri.renderer.DotDensityRenderer",
                    constructor: function(n) {
                        this.dotSize = n.dotSize || 3;
                        this.dotValue = n.dotValue;
                        this.fields = n.fields;
                        this.outline = n.outline;
                        this.backgroundColor = n.backgroundColor;
                        this.exactCount = n.exactCount || !0;
                        this.dotShape = n.dotShape || "square";
                        this.legendOptions = n.legendOptions;
                        this._exactCountMinArea = 1E4;
                        this._currentMapScale = this._map = this._canvas = null;
                        this._symbolMap = {};
                        this._currentGraphic = this._currentResolution = this._objectIdField = null;
                        this._supportsCanvas = window.CanvasRenderingContext2D ? !0 : !1;
                        window.CanvasRenderingContext2D || console.log("The DotDensityRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")
                    },
                    getSymbol: function(n) {
                        this._currentGraphic = n;
                        if (!this._supportsCanvas)
                            return null;
                        this._map || (this._map = n.getLayer()._map,
                        this._objectIdField = n.getLayer().objectIdField,
                        this._currentMapScale = this._map.getScale(),
                        this._currentResolution = this._map.extent.getWidth() / this._map.width,
                        this._map.on("zoom-end", y.hitch(this, function(q) {
                            this._currentMapScale = this._map.getScale();
                            this._currentResolution = q.extent.getWidth() / this._map.width;
                            this._symbolMap[this._currentMapScale] = {}
                        })));
                        if (this._symbolMap[this._currentMapScale] && this._symbolMap[this._currentMapScale][n.attributes[this._objectIdField]]) {
                            var t = this._symbolMap[this._currentMapScale][n.attributes[this._objectIdField]];
                            var g = this._getShapeProperties(n);
                            t.setOffset(g.dx, g.dy);
                            return t
                        }
                        t = this._generateFieldsCount(this.fields, n.attributes, this.dotValue);
                        g = this._getShapeProperties(n);
                        if (!g.width || !g.height)
                            return null;
                        t = new a(this._generateImageSrc(g.width, g.height, t, g.minXY, g.maxXY),this.outline,g.width,g.height);
                        t.setOffset(g.dx, g.dy);
                        this._symbolMap[this._currentMapScale] || (this._symbolMap[this._currentMapScale] = {});
                        return this._symbolMap[this._currentMapScale][n.attributes[this._objectIdField]] = t
                    },
                    _generateFieldsCount: function(n, t, g) {
                        var q;
                        for (q = n.length - 1; 0 <= q; q--) {
                            var x = t[n[q].name] / g;
                            n[q].numPoints = Math.round(x)
                        }
                        return n
                    },
                    _getShapeProperties: function(n) {
                        var t = n.geometry.getExtent();
                        t.contains(this._map.extent) && (t = this._map.extent);
                        var g = Math.ceil(t.getWidth() / this._currentResolution);
                        var q = Math.ceil(t.getHeight() / this._currentResolution);
                        var x = this._map.toScreen(new e(t.xmin,t.ymin,t.spatialReference));
                        t = this._map.toScreen(new e(t.xmax,t.ymax,t.spatialReference));
                        n = n.getLayer().getNavigationTransform();
                        return {
                            minXY: x,
                            maxXY: t,
                            dx: (x.x - n.dx) % g,
                            dy: (t.y - n.dy) % q,
                            width: g,
                            height: q
                        }
                    },
                    _generateImageSrc: function(n, t, g, q, x, v) {
                        var z = this.dotSize, u;
                        this._canvas ? (this._canvas.width = n,
                        this._canvas.height = t) : this._canvas = this._initCanvas(n, t);
                        var p = this._canvas.getContext("2d");
                        if (v = v || this.backgroundColor)
                            p.fillStyle = v.toCss(!0),
                            p.fillRect(0, 0, n, t),
                            p.fill();
                        for (v = g.length - 1; 0 <= v; v--)
                            for (p.fillStyle = g[v].color.toCss(!0),
                            u = g[v].numPoints - 1; 0 <= u; u--) {
                                var r = this._getRandomPoint(n, t, q, x);
                                "square" === this.dotShape ? p.fillRect(r.x, r.y, z, z) : "circle" === this.dotShape && (p.beginPath(),
                                p.arc(r.x, r.y, z / 2, 0, 2 * Math.PI, !0));
                                p.fill()
                            }
                        return this._canvas.toDataURL()
                    },
                    _initCanvas: function(n, t) {
                        n = w.create("canvas", {
                            id: "canvas",
                            width: n + "px",
                            height: t + "px",
                            style: "position: absolute; left: -10000px; top: 0px;"
                        }, null);
                        document.body.appendChild(n);
                        return n
                    },
                    _getRandomInt: function(n, t) {
                        return Math.floor(Math.random() * (t - n + 1) + n)
                    },
                    _getRandomPoint: function(n, t, g, q) {
                        var x = {}
                          , v = this.outline && this.outline.width ? this.outline.width : 0;
                        if (!0 === this.exactCount && n * t > this._exactCountMinArea) {
                            n = !1;
                            do
                                x.x = this._getRandomInt(g.x, q.x),
                                x.y = this._getRandomInt(q.y, g.y),
                                n = new c(x.x,x.y),
                                n = this._checkPointShapeBounds(n, this.dotSize + v, this._currentGraphic.geometry),
                                !0 === n && (x.x -= g.x,
                                x.y -= q.y);
                            while (!1 === n)
                        } else
                            x.x = this._getRandomInt(0, n),
                            x.y = this._getRandomInt(0, t);
                        return x
                    },
                    _checkPointShapeBounds: function(n, t, g) {
                        var q = null;
                        q = !1;
                        var x = !0
                          , v = 0;
                        do {
                            switch (v) {
                            case 1:
                                n.x += t;
                                break;
                            case 2:
                                n.y += t;
                                break;
                            case 3:
                                n.x -= t
                            }
                            q = this._map.toMap(n);
                            q = g.contains(q);
                            !1 === q && (x = !1);
                            v += 1
                        } while (3 >= v && !0 === x);
                        return q
                    },
                    setDotSize: function(n) {
                        0 < n && (this.dotSize = n)
                    },
                    setDotValue: function(n) {
                        0 < n && (this.dotValue = n)
                    },
                    setOutline: function(n) {
                        this.outline = n
                    },
                    setBackgroundColor: function(n) {
                        this.backgroundColor = n
                    },
                    toJson: function() {
                        var n = y.mixin(this.inherited(arguments), {
                            type: "dotDensity",
                            backgroundColor: f.toJsonColor(this.backgroundColor),
                            dotShape: this.dotShape,
                            dotSize: 0 < this.dotSize ? l.px2pt(this.dotSize) : 0,
                            dotValue: this.dotValue,
                            fields: b.map(this.fields, function(t) {
                                return h.fixJson({
                                    color: f.toJsonColor(t.color),
                                    name: t.name
                                })
                            }),
                            legendOptions: this.legendOptions && h.fixJson({
                                backgroundColor: f.toJsonColor(this.legendOptions.backgroundColor),
                                dotCoverage: this.legendOptions.dotCoverage,
                                outline: this.legendOptions.outline && this.legendOptions.outline.toJson(),
                                valueUnit: this.legendOptions.valueUnit
                            }),
                            outline: this.outline && this.outline.toJson()
                        });
                        return h.fixJson(n)
                    }
                });
                m("extend-esri") && y.setObject("renderer.DotDensityRenderer", C, k);
                return C
            })
        },
        "esri/renderers/ScaleDependentRenderer": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "), function(C, y, b, w, m, l, k) {
                C = C(k, {
                    declaredClass: "esri.renderer.ScaleDependentRenderer",
                    constructor: function(h) {
                        this.setRendererInfos(h && h.rendererInfos || [])
                    },
                    setRendererInfos: function(h) {
                        this.rendererInfos = h;
                        this._setRangeType();
                        return this
                    },
                    getSymbol: function(h) {
                        var f = this.getRendererInfo(h);
                        return f && f.renderer && f.renderer.getSymbol(h)
                    },
                    getRendererInfo: function(h) {
                        h = h.getLayer().getMap();
                        return "zoom" === this.rangeType ? this.getRendererInfoByZoom(h.getZoom()) : this.getRendererInfoByScale(h.getScale())
                    },
                    getRendererInfoByZoom: function(h) {
                        var f = this.rendererInfos, d, a = 0;
                        do {
                            var c = f[a];
                            h >= c.minZoom && h <= c.maxZoom && (d = c);
                            a++
                        } while (!d && a < f.length);
                        return d
                    },
                    getRendererInfoByScale: function(h) {
                        var f = this.rendererInfos, d, a = 0;
                        do {
                            var c = f[a];
                            var e = c.minScale;
                            var n = c.maxScale;
                            var t = !e;
                            var g = !n;
                            !t && h <= e && (t = !0);
                            !g && h >= n && (g = !0);
                            t && g && (d = c);
                            a++
                        } while (!d && a < f.length);
                        return d
                    },
                    addRendererInfo: function(h) {
                        var f = 0
                          , d = this.rendererInfos
                          , a = h.hasOwnProperty("minZoom") ? "minZoom" : "minScale"
                          , c = d.length;
                        do {
                            var e = d[f];
                            if (c === f || h[a] < e[a]) {
                                d.splice(f, 0, h);
                                this._setRangeType();
                                var n = !0
                            }
                            f++
                        } while (!n && f < c);
                        return this
                    },
                    _setRangeType: function() {
                        var h = this.rendererInfos;
                        if (h = h && h[0])
                            this.rangeType = h.hasOwnProperty("minZoom") ? "zoom" : h.hasOwnProperty("minScale") ? "scale" : ""
                    },
                    toJson: function() {
                        if ("zoom" === this.rangeType)
                            return null;
                        var h = this.rendererInfos || []
                          , f = h[0] && h[0].minScale;
                        h = b.mixin(this.inherited(arguments), {
                            type: "scaleDependent",
                            minScale: 0 < f ? f : 0,
                            rendererInfos: y.map(h, function(d) {
                                return l.fixJson({
                                    maxScale: 0 < d.maxScale ? d.maxScale : 0,
                                    renderer: d.renderer && d.renderer.toJson()
                                })
                            })
                        });
                        return l.fixJson(h)
                    }
                });
                w("extend-esri") && b.setObject("renderer.ScaleDependentRenderer", C, m);
                return C
            })
        },
        "esri/renderers/HeatmapRenderer": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                C = C([d], {
                    declaredClass: "esri.renderer.HeatmapRenderer",
                    colors: null,
                    blurRadius: 10,
                    maxPixelIntensity: 100,
                    minPixelIntensity: 0,
                    field: null,
                    fieldOffset: null,
                    colorStops: null,
                    constructor: function(a) {
                        (this._supportsCanvas = window.CanvasRenderingContext2D ? !0 : !1) ? ("string" == typeof a && (a = JSON.parse(a)),
                        y.mixin(this, a),
                        this._canvas = null,
                        this.colors || this.colorStops || (this.colorStops = [{
                            ratio: 0,
                            color: "rgba(255, 140, 0, 0)"
                        }, {
                            ratio: .75,
                            color: "rgba(255, 140, 0, 1)"
                        }, {
                            ratio: .9,
                            color: "rgba(255, 0,   0, 1)"
                        }]),
                        this.gradient = this._generateGradient(this.colorStops || this.colors)) : console.log("The HeatmapRenderer requires a Canvas enabled Browser.  IE8 and less does not support Canvas.")
                    },
                    getSymbol: function(a) {
                        if (!this._supportsCanvas)
                            return !1;
                        var c = a.attributes.imageData;
                        a = a.attributes.size;
                        if (!a)
                            return null;
                        var e = this._getContext(a[0], a[1])
                          , n = e.getImageData(0, 0, a[0], a[1]);
                        window.ArrayBuffer && c instanceof ArrayBuffer ? c = window.Uint8ClampedArray ? new Uint8ClampedArray(c) : new Uint8Array(c) : c.BYTES_PER_ELEMENT && 1 !== c.BYTES_PER_ELEMENT && (c = window.Uint8ClampedArray ? new Uint8ClampedArray(c.buffer) : new Uint8Array(c.buffer));
                        if (window.CanvasPixelArray && n.data instanceof window.CanvasPixelArray)
                            for (var t = n.data, g = t.length; g--; )
                                t[g] = c[g];
                        else
                            n.data.set(c);
                        e.putImageData(n, 0, 0);
                        return new h(e.canvas.toDataURL(),a[0],a[1])
                    },
                    setColors: function(a) {
                        a && (a instanceof Array || a.colors) && (this.gradient = this._generateGradient(a.colors || a),
                        this.colors = a);
                        return this
                    },
                    setColorStops: function(a) {
                        a && (a instanceof Array || a.colorStops) && (this.gradient = this._generateGradient(a.colorStops || a),
                        this.colorStops = a);
                        return this
                    },
                    setMaxPixelIntensity: function(a) {
                        this.maxPixelIntensity = a;
                        return this
                    },
                    setMinPixelIntensity: function(a) {
                        this.minPixelIntensity = a;
                        return this
                    },
                    setField: function(a) {
                        this.field = a;
                        return this
                    },
                    setFieldOffset: function(a) {
                        this.fieldOffset = a;
                        return this
                    },
                    setBlurRadius: function(a) {
                        this.blurRadius = a;
                        return this
                    },
                    getStats: function() {},
                    getHistogramData: function() {},
                    toJson: function() {
                        var a = y.mixin(this.inherited(arguments), {
                            type: "heatmap",
                            blurRadius: this.blurRadius,
                            colorStops: this._colorsToStops(this.colorStops || this.colors),
                            maxPixelIntensity: this.maxPixelIntensity,
                            minPixelIntensity: this.minPixelIntensity,
                            field: this.field
                        });
                        null != this.fieldOffset && (a.fieldOffset = this.fieldOffset);
                        b.forEach(a.colorStops, function(c) {
                            c.color = f.toJsonColor(c.color)
                        });
                        return k.fixJson(a)
                    },
                    _getContext: function(a, c) {
                        this._canvas ? (this._canvas.width = a,
                        this._canvas.height = c) : this._canvas = this._initCanvas(a, c);
                        return this._canvas.getContext("2d")
                    },
                    _initCanvas: function(a, c) {
                        var e = w.create("canvas", {
                            id: "hm_canvas-" + Math.floor(1E3 * Math.random()),
                            style: "position: absolute; left: 0px; top: -10000px;"
                        }, null);
                        e.width = a;
                        e.height = c;
                        document.body.appendChild(e);
                        return e
                    },
                    _generateGradient: function(a, c) {
                        c || (c = 512);
                        a = this._colorsToStops(a);
                        for (var e = this._getContext(1, c || 512), n = e.createLinearGradient(0, 0, 0, c), t = 0, g; t < a.length; t++)
                            g = a[t],
                            n.addColorStop(g.ratio, g.color.toCss(!0));
                        e.fillStyle = n;
                        e.fillRect(0, 0, 1, c);
                        return e.getImageData(0, 0, 1, c).data
                    },
                    _colorsToStops: function(a) {
                        var c = [];
                        if (!a[0])
                            return c;
                        if (null != a[0].ratio)
                            c = b.map(a, function(x) {
                                return {
                                    ratio: x.ratio,
                                    color: this._toColor(x.color)
                                }
                            }, this);
                        else if (null != a[0].value) {
                            var e = Infinity;
                            c = -Infinity;
                            var n = 0, t;
                            for (t = 0; t < a.length; t++) {
                                var g = a[t].value;
                                g < e && (e = g);
                                g > c && (c = g)
                            }
                            n = c - e;
                            this.maxPixelIntensity = c;
                            this.minPixelIntensity = e;
                            c = b.map(a, function(x) {
                                var v = x.value;
                                x = this._toColor(x.color);
                                return {
                                    value: v,
                                    ratio: (v - e) / n,
                                    color: x
                                }
                            }, this)
                        } else {
                            var q = a.length - 1;
                            c = b.map(a, function(x, v) {
                                return {
                                    color: this._toColor(x),
                                    ratio: v / q
                                }
                            }, this)
                        }
                        return c
                    },
                    _toColor: function(a) {
                        a.toRgba || a.declaredClass || (a = new f(a));
                        return a
                    }
                });
                m("extend-esri") && y.setObject("renderer.HeatmapRenderer", C, l);
                return C
            })
        },
        "esri/renderers/ShadedReliefRenderer": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "), function(C, y, b, w, m, l, k, h) {
                C = C(null, {
                    declaredClass: "esri.renderer.ShadedReliefRenderer",
                    constructor: function(f) {
                        f = f || {};
                        this.hillshadeType = f.hillshadeType || "traditional";
                        this.azimuth = null != f.azimuth ? f.azimuth : 315;
                        this.altitude = null != f.altitude ? f.altitude : 45;
                        this.zFactor = f.zFactor || 1;
                        this.scalingType = f.scalingType || "none";
                        this.pixelSizePower = null != f.pixelSizePower ? f.pixelSizePower : .664;
                        this.pixelSizeFactor = null != f.pixelSizeFactor ? f.pixelSizeFactor : .024;
                        this.removeEdgeEffect = f.removeEdgeEffect || !1;
                        this.colorRamp = h.fromJson(f.colorRamp)
                    },
                    toJson: function() {
                        var f = {
                            type: "rasterShadedRelief",
                            hillshadeType: this.hillshadeType,
                            azimuth: this.azimuth,
                            altitude: this.altitude,
                            zFactor: this.zFactor,
                            scalingType: this.scalingType,
                            pixelSizePower: this.pixelSizePower,
                            pixelSizeFactor: this.pixelSizeFactor,
                            colorRamp: this.colorRamp && this.colorRamp.toJson()
                        };
                        return l.fixJson(f)
                    },
                    toRenderingRule: function(f) {}
                });
                w("extend-esri") && b.setObject("renderer.ShadedReliefRenderer", C, m);
                return C
            })
        },
        "esri/renderers/ColormapRenderer": function() {
            define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "), function(C, y, b, w, m, l, k, h, f) {
                C = C(h, {
                    declaredClass: "esri.renderer.ColormapRenderer",
                    constructor: function(d) {
                        this.colormapInfos = d && d.colormapInfos
                    },
                    toJson: function() {
                        var d = l.fixJson;
                        var a = {
                            type: "rasterColormap",
                            colormapInfos: y.map(this.colormapInfos || [], function(c, e) {
                                var n = {};
                                c.color && null !== c.color && 3 <= c.color.length && (n.color = c.color,
                                n.value = c.value || e,
                                n.label = (c.label || e) + "");
                                return d(n)
                            })
                        };
                        a = b.mixin(this.inherited(arguments), a);
                        return d(a)
                    }
                });
                w("extend-esri") && b.setObject("renderer.ColormapRenderer", C, m);
                return C
            })
        },
        "esri/renderers/arcadeUtils": function() {
            define(["dojo/_base/lang", "dojo/has", "../kernel", "../support/expressionUtils"], function(C, y, b, w) {
                y("extend-esri") && C.setObject("renderer.arcadeUtils", w, b);
                return w
            })
        },
        "esri/utils": function() {
            define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "), function() {
                return {}
            })
        },
        "esri/graphicsUtils": function() {
            define(["dojo/_base/lang", "dojo/_base/array", "dojo/has", "./kernel", "./geometry/Extent"], function(C, y, b, w, m) {
                var l = {
                    graphicsExtent: function(k) {
                        if (!k || !k.length)
                            return null;
                        var h = null, f, d = k.length;
                        for (f = 0; f < d; f++) {
                            var a = k[f].geometry;
                            if (a) {
                                var c = a.getExtent();
                                c || "point" !== a.type || null == a.x || null == a.y || (c = new m(a.x,a.y,a.x,a.y,a.spatialReference));
                                c && (h = h ? h.union(c) : c)
                            }
                        }
                        return 0 > h.getWidth() && 0 > h.getHeight() ? null : h
                    },
                    getGeometries: function(k) {
                        return y.map(k, function(h) {
                            return h.geometry
                        })
                    },
                    _encodeGraphics: function(k, h) {
                        return y.map(k, function(f, d) {
                            f = f.toJson();
                            var a = {};
                            f.geometry && (d = h && h[d],
                            a.geometry = d && d.toJson() || f.geometry);
                            f.attributes && (a.attributes = f.attributes);
                            return a
                        })
                    }
                };
                b("extend-esri") && C.mixin(w, l);
                return l
            })
        },
        "esri/IdentityManager": function() {
            define(["./IdentityManagerDialog", "./kernel", "./OAuthSignInHandler", "dojo/_base/declare"], function(C, y, b, w) {
                C = new C;
                y.id = w.safeMixin(C, b);
                return y.id
            })
        },
        "esri/IdentityManagerDialog": function() {
            define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g) {
                y = y([t], {
                    declaredClass: "esri.IdentityManager",
                    _eventMap: {
                        "dialog-cancel": ["info"]
                    },
                    constructor: function(q) {
                        m.mixin(this, q);
                        this.registerConnectEvents()
                    },
                    _dialogContent: "\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
                    onDialogCreate: function() {},
                    onDialogCancel: function() {},
                    signIn: function(q, x, v) {
                        this._nls || (this._nls = g.identity);
                        this._loginDialog || (this._loginDialog = this.dialog = this._createLoginDialog(),
                        this.onDialogCreate());
                        var z = this._loginDialog
                          , u = v && v.error
                          , p = v && v.token
                          , r = new w(function() {
                            z.onCancel()
                        }
                        );
                        if (z.open)
                            return q = Error("BUSY"),
                            q.name = "identity-manager:busy",
                            q.code = "IdentityManager.1",
                            q.log = !!b.isDebug,
                            r.errback(q),
                            r;
                        e.hide(z.errMsg_);
                        u && 403 == u.code && p && (k.set(z.errMsg_, "innerHTML", this._nls.forbidden),
                        e.show(z.errMsg_));
                        z.dfd_ = r;
                        z.serverInfo_ = x;
                        z.resUrl_ = q;
                        z.admin_ = v && v.isAdmin;
                        k.set(z.resLink_, {
                            title: q,
                            innerHTML: "(" + (this.getResourceName(q) || this._nls.lblItem) + ")"
                        });
                        k.set(z.serverLink_, {
                            title: x.server,
                            innerHTML: (-1 !== x.server.toLowerCase().indexOf("arcgis.com") ? "ArcGIS Online" : x.server) + " "
                        });
                        z.txtPwd_.set("value", "");
                        z.show();
                        return r
                    },
                    _createLoginDialog: function() {
                        var q = this._nls
                          , x = c.substitute(q, this._dialogContent);
                        x = c.substitute({
                            resource: "\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
                            server: "\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"
                        }, x);
                        var v = new d({
                            title: q.title,
                            content: x,
                            "class": "esriSignInDialog",
                            style: "width: 18em;",
                            esriIdMgr_: this,
                            keypressed_: function(z) {
                                z.charOrCode === h.ENTER && this.execute_()
                            },
                            execute_: function() {
                                var z = this.txtUser_.get("value")
                                  , u = this.txtPwd_.get("value")
                                  , p = this.dfd_
                                  , r = this;
                                if (this.form_.validate() && z && u) {
                                    this.btnSubmit_.set("label", q.lblSigning);
                                    var B = a.id.findCredential(r.resUrl_, z)
                                      , D = function(G) {
                                        r.btnSubmit_.set("label", q.lblOk);
                                        r.btnSubmit_.set("disabled", !1);
                                        e.hide(r.errMsg_);
                                        r.hide();
                                        d._DialogLevelManager.hide(r);
                                        var A = r.serverInfo_;
                                        r.dfd_ = r.serverInfo_ = r.generateDfd_ = r.resUrl_ = null;
                                        var E = B;
                                        if (G) {
                                            var H = G.token;
                                            var J = c.isDefined(G.expires) ? Number(G.expires) : null;
                                            var O = !!G.ssl;
                                            E ? (E.userId = z,
                                            E.token = H,
                                            E.expires = J,
                                            E.validity = G.validity,
                                            E.ssl = O,
                                            E.creationTime = (new Date).getTime()) : E = new n({
                                                userId: z,
                                                server: A.server,
                                                token: H,
                                                expires: J,
                                                ssl: O,
                                                isAdmin: r.admin_,
                                                validity: G.validity
                                            })
                                        }
                                        p.callback(E)
                                    };
                                    B && !B._enqueued ? D() : (r.btnSubmit_.set("disabled", !0),
                                    r.generateDfd_ = a.id.generateToken(this.serverInfo_, {
                                        username: z,
                                        password: u
                                    }, {
                                        isAdmin: this.admin_
                                    }).addCallback(D).addErrback(function(G) {
                                        r.btnSubmit_.set("disabled", !1);
                                        r.generateDfd_ = null;
                                        r.btnSubmit_.set("label", q.lblOk);
                                        k.set(r.errMsg_, "innerHTML", G && G.code ? q.invalidUser : q.noAuthService);
                                        e.show(r.errMsg_)
                                    }))
                                }
                            },
                            cancel_: function() {
                                v.generateDfd_ && v.generateDfd_.cancel();
                                var z = v.dfd_
                                  , u = v.resUrl_
                                  , p = v.serverInfo_;
                                v.btnSubmit_.set("disabled", !1);
                                v.dfd_ = v.serverInfo_ = v.generateDfd_ = v.resUrl_ = null;
                                e.hide(v.errMsg_);
                                d._DialogLevelManager.hide(v);
                                v.esriIdMgr_.onDialogCancel({
                                    resourceUrl: u,
                                    serverInfo: p
                                });
                                u = Error("ABORTED");
                                u.name = "identity-manager:user-aborted";
                                u.code = "IdentityManager.2";
                                u.log = !!b.isDebug;
                                z.errback(u)
                            }
                        });
                        x = v.domNode;
                        v.form_ = f.byNode(C.query(".esriIdForm", x)[0]);
                        v.txtUser_ = f.byNode(C.query(".esriIdUser", x)[0]);
                        v.txtPwd_ = f.byNode(C.query(".esriIdPwd", x)[0]);
                        v.btnSubmit_ = f.byNode(C.query(".esriIdSubmit", x)[0]);
                        v.btnCancel_ = f.byNode(C.query(".esriIdCancel", x)[0]);
                        v.resLink_ = C.query(".resLink", x)[0];
                        v.serverLink_ = C.query(".serverLink", x)[0];
                        v.errMsg_ = C.query(".esriErrorMsg", x)[0];
                        v.connect(v.txtUser_, "onKeyPress", v.keypressed_);
                        v.connect(v.txtPwd_, "onKeyPress", v.keypressed_);
                        v.connect(v.btnSubmit_, "onClick", v.execute_);
                        v.connect(v.btnCancel_, "onClick", v.onCancel);
                        v.connect(v, "onCancel", v.cancel_);
                        return v
                    }
                });
                l("extend-esri") && (a.IdentityManagerDialog = a.IdentityManager = y);
                return y
            })
        },
        "dijit/Dialog": function() {
            define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B, D, G, A, E, H, J, O) {
                function V() {}
                var aa = new m;
                aa.resolve(!0);
                p = w("dijit._DialogBase" + (g("dojo-bidi") ? "_NoBidi" : ""), [B, G, A, D], {
                    templateString: O,
                    baseClass: "dijitDialog",
                    cssStateNodes: {
                        closeButtonNode: "dijitDialogCloseIcon"
                    },
                    _setTitleAttr: {
                        node: "titleNode",
                        type: "innerHTML"
                    },
                    open: !1,
                    duration: p.defaultDuration,
                    refocus: !0,
                    autofocus: !0,
                    _firstFocusItem: null,
                    _lastFocusItem: null,
                    draggable: !0,
                    _setDraggableAttr: function(ia) {
                        this._set("draggable", ia)
                    },
                    maxRatio: .9,
                    closable: !0,
                    _setClosableAttr: function(ia) {
                        this.closeButtonNode.style.display = ia ? "" : "none";
                        this._set("closable", ia)
                    },
                    postMixInProperties: function() {
                        var ia = a.getLocalization("dijit", "common");
                        e.mixin(this, ia);
                        this.inherited(arguments)
                    },
                    postCreate: function() {
                        f.set(this.domNode, {
                            display: "none",
                            position: "absolute"
                        });
                        this.ownerDocumentBody.appendChild(this.domNode);
                        this.inherited(arguments);
                        b.after(this, "onExecute", e.hitch(this, "hide"), !0);
                        b.after(this, "onCancel", e.hitch(this, "hide"), !0);
                        n(this.closeButtonNode, q.press, function(ia) {
                            ia.stopPropagation()
                        });
                        this._modalconnects = []
                    },
                    onLoad: function() {
                        this.resize();
                        this._position();
                        this.autofocus && ea.isTop(this) && (this._getFocusItems(),
                        u.focus(this._firstFocusItem));
                        this.inherited(arguments)
                    },
                    focus: function() {
                        this._getFocusItems();
                        u.focus(this._firstFocusItem)
                    },
                    _endDrag: function() {
                        var ia = h.position(this.domNode)
                          , qa = x.getBox(this.ownerDocument);
                        ia.y = Math.min(Math.max(ia.y, 0), qa.h - ia.h);
                        ia.x = Math.min(Math.max(ia.x, 0), qa.w - ia.w);
                        this._relativePosition = ia;
                        this._position()
                    },
                    _setup: function() {
                        var ia = this.domNode;
                        this.titleBar && this.draggable ? (this._moveable = new (6 == g("ie") ? z : v)(ia,{
                            handle: this.titleBar
                        }),
                        b.after(this._moveable, "onMoveStop", e.hitch(this, "_endDrag"), !0)) : k.add(ia, "dijitDialogFixed");
                        this.underlayAttrs = {
                            dialogId: this.id,
                            "class": y.map(this["class"].split(/\s/), function(qa) {
                                return qa + "_underlay"
                            }).join(" "),
                            _onKeyDown: e.hitch(this, "_onKey"),
                            ownerDocument: this.ownerDocument
                        }
                    },
                    _size: function() {
                        this.resize()
                    },
                    _position: function() {
                        if (!k.contains(this.ownerDocumentBody, "dojoMove")) {
                            var ia = this.domNode
                              , qa = x.getBox(this.ownerDocument)
                              , wa = this._relativePosition
                              , K = h.position(ia);
                            f.set(ia, {
                                left: Math.floor(qa.l + (wa ? Math.min(wa.x, qa.w - K.w) : (qa.w - K.w) / 2)) + "px",
                                top: Math.floor(qa.t + (wa ? Math.min(wa.y, qa.h - K.h) : (qa.h - K.h) / 2)) + "px"
                            })
                        }
                    },
                    _onKey: function(ia) {
                        if (ia.keyCode == c.TAB) {
                            this._getFocusItems();
                            var qa = ia.target;
                            this._firstFocusItem == this._lastFocusItem ? (ia.stopPropagation(),
                            ia.preventDefault()) : qa == this._firstFocusItem && ia.shiftKey ? (u.focus(this._lastFocusItem),
                            ia.stopPropagation(),
                            ia.preventDefault()) : qa != this._lastFocusItem || ia.shiftKey || (u.focus(this._firstFocusItem),
                            ia.stopPropagation(),
                            ia.preventDefault())
                        } else
                            this.closable && ia.keyCode == c.ESCAPE && (this.onCancel(),
                            ia.stopPropagation(),
                            ia.preventDefault())
                    },
                    show: function() {
                        if (this.open)
                            return aa.promise;
                        this._started || this.startup();
                        this._alreadyInitialized || (this._setup(),
                        this._alreadyInitialized = !0);
                        this._fadeOutDeferred && (this._fadeOutDeferred.cancel(),
                        ea.hide(this));
                        var ia = x.get(this.ownerDocument);
                        this._modalconnects.push(n(ia, "scroll", e.hitch(this, "resize", null)));
                        this._modalconnects.push(n(this.domNode, "keydown", e.hitch(this, "_onKey")));
                        f.set(this.domNode, {
                            opacity: 0,
                            display: ""
                        });
                        this._set("open", !0);
                        this._onShow();
                        this.resize();
                        this._position();
                        this._fadeInDeferred = new m(e.hitch(this, function() {
                            qa.stop();
                            delete this._fadeInDeferred
                        }));
                        this._fadeInDeferred.then(void 0, V);
                        ia = this._fadeInDeferred.promise;
                        var qa = d.fadeIn({
                            node: this.domNode,
                            duration: this.duration,
                            beforeBegin: e.hitch(this, function() {
                                ea.show(this, this.underlayAttrs)
                            }),
                            onEnd: e.hitch(this, function() {
                                this.autofocus && ea.isTop(this) && (this._getFocusItems(),
                                u.focus(this._firstFocusItem));
                                this._fadeInDeferred.resolve(!0);
                                delete this._fadeInDeferred
                            })
                        }).play();
                        return ia
                    },
                    hide: function() {
                        if (!this._alreadyInitialized || !this.open)
                            return aa.promise;
                        this._fadeInDeferred && this._fadeInDeferred.cancel();
                        this._fadeOutDeferred = new m(e.hitch(this, function() {
                            qa.stop();
                            delete this._fadeOutDeferred
                        }));
                        this._fadeOutDeferred.then(void 0, V);
                        this._fadeOutDeferred.then(e.hitch(this, "onHide"));
                        var ia = this._fadeOutDeferred.promise;
                        var qa = d.fadeOut({
                            node: this.domNode,
                            duration: this.duration,
                            onEnd: e.hitch(this, function() {
                                this.domNode.style.display = "none";
                                ea.hide(this);
                                this._fadeOutDeferred.resolve(!0);
                                delete this._fadeOutDeferred
                            })
                        }).play();
                        this._scrollConnected && (this._scrollConnected = !1);
                        for (var wa; wa = this._modalconnects.pop(); )
                            wa.remove();
                        this._relativePosition && delete this._relativePosition;
                        this._set("open", !1);
                        return ia
                    },
                    resize: function(ia) {
                        if ("none" != this.domNode.style.display) {
                            this._checkIfSingleChild();
                            if (!ia) {
                                this._shrunk && (this._singleChild && "undefined" != typeof this._singleChildOriginalStyle && (this._singleChild.domNode.style.cssText = this._singleChildOriginalStyle,
                                delete this._singleChildOriginalStyle),
                                y.forEach([this.domNode, this.containerNode, this.titleBar, this.actionBarNode], function(Z) {
                                    Z && f.set(Z, {
                                        position: "static",
                                        width: "auto",
                                        height: "auto"
                                    })
                                }),
                                this.domNode.style.position = "absolute");
                                var qa = x.getBox(this.ownerDocument);
                                qa.w *= this.maxRatio;
                                qa.h *= this.maxRatio;
                                var wa = h.position(this.domNode);
                                this._shrunk = !1;
                                wa.w >= qa.w && (ia = {
                                    w: qa.w
                                },
                                h.setMarginBox(this.domNode, ia),
                                wa = h.position(this.domNode),
                                this._shrunk = !0);
                                wa.h >= qa.h && (ia || (ia = {
                                    w: wa.w
                                }),
                                ia.h = qa.h,
                                this._shrunk = !0);
                                ia && (ia.w || (ia.w = wa.w),
                                ia.h || (ia.h = wa.h))
                            }
                            if (ia) {
                                h.setMarginBox(this.domNode, ia);
                                qa = [];
                                this.titleBar && qa.push({
                                    domNode: this.titleBar,
                                    region: "top"
                                });
                                this.actionBarNode && qa.push({
                                    domNode: this.actionBarNode,
                                    region: "bottom"
                                });
                                wa = {
                                    domNode: this.containerNode,
                                    region: "center"
                                };
                                qa.push(wa);
                                var K = J.marginBox2contentBox(this.domNode, ia);
                                J.layoutChildren(this.domNode, K, qa);
                                this._singleChild ? (qa = J.marginBox2contentBox(this.containerNode, wa),
                                this._singleChild.resize({
                                    w: qa.w,
                                    h: qa.h
                                })) : (this.containerNode.style.overflow = "auto",
                                this._layoutChildren())
                            } else
                                this._layoutChildren();
                            g("touch") || ia || this._position()
                        }
                    },
                    _layoutChildren: function() {
                        y.forEach(this.getChildren(), function(ia) {
                            ia.resize && ia.resize()
                        })
                    },
                    destroy: function() {
                        this._fadeInDeferred && this._fadeInDeferred.cancel();
                        this._fadeOutDeferred && this._fadeOutDeferred.cancel();
                        this._moveable && this._moveable.destroy();
                        for (var ia; ia = this._modalconnects.pop(); )
                            ia.remove();
                        ea.hide(this);
                        this.inherited(arguments)
                    }
                });
                g("dojo-bidi") && (p = w("dijit._DialogBase", p, {
                    _setTitleAttr: function(ia) {
                        this._set("title", ia);
                        this.titleNode.innerHTML = ia;
                        this.applyTextDir(this.titleNode)
                    },
                    _setTextDirAttr: function(ia) {
                        this._created && this.textDir != ia && (this._set("textDir", ia),
                        this.set("title", this.title))
                    }
                }));
                var da = w("dijit.Dialog", [H, p], {});
                da._DialogBase = p;
                var ea = da._DialogLevelManager = {
                    _beginZIndex: 950,
                    show: function(ia, qa) {
                        Y[Y.length - 1].focus = u.curNode;
                        var wa = Y[Y.length - 1].dialog ? Y[Y.length - 1].zIndex + 2 : da._DialogLevelManager._beginZIndex;
                        f.set(ia.domNode, "zIndex", wa);
                        E.show(qa, wa - 1);
                        Y.push({
                            dialog: ia,
                            underlayAttrs: qa,
                            zIndex: wa
                        })
                    },
                    hide: function(ia) {
                        if (Y[Y.length - 1].dialog == ia) {
                            Y.pop();
                            var qa = Y[Y.length - 1];
                            1 == Y.length ? E.hide() : E.show(qa.underlayAttrs, qa.zIndex - 1);
                            if (ia.refocus && (ia = qa.focus,
                            !qa.dialog || ia && l.isDescendant(ia, qa.dialog.domNode) || (qa.dialog._getFocusItems(),
                            ia = qa.dialog._firstFocusItem),
                            ia))
                                try {
                                    ia.focus()
                                } catch (wa) {}
                        } else
                            qa = y.indexOf(y.map(Y, function(wa) {
                                return wa.dialog
                            }), ia),
                            -1 != qa && Y.splice(qa, 1)
                    },
                    isTop: function(ia) {
                        return Y[Y.length - 1].dialog == ia
                    }
                }
                  , Y = da._dialogStack = [{
                    dialog: null,
                    focus: null,
                    underlayAttrs: null
                }];
                u.watch("curNode", function(ia, qa, wa) {
                    ia = Y[Y.length - 1].dialog;
                    if (wa && ia && !ia._fadeOutDeferred && wa.ownerDocument == ia.ownerDocument) {
                        do
                            if (wa == ia.domNode || k.contains(wa, "dijitPopup"))
                                return;
                        while (wa = wa.parentNode);
                        ia.focus()
                    }
                });
                g("dijit-legacy-requires") && t(0, function() {
                    C(["dijit/TooltipDialog"])
                });
                return da
            })
        },
        "dojo/dnd/Moveable": function() {
            define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                function n(q, x) {
                    "touchAction"in document.body.style ? t = "touchAction" : "msTouchAction"in document.body.style && (t = "msTouchAction");
                    g = function(v, z) {
                        v.style[t] = z
                    }
                    ;
                    g(q, x)
                }
                var t, g = function() {};
                k("touch-action") && (g = n);
                return y("dojo.dnd.Moveable", [l], {
                    handle: "",
                    delay: 0,
                    skip: !1,
                    constructor: function(q, x) {
                        this.node = w.byId(q);
                        g(this.node, "none");
                        x || (x = {});
                        this.handle = x.handle ? w.byId(x.handle) : null;
                        this.handle || (this.handle = this.node);
                        this.delay = 0 < x.delay ? x.delay : 0;
                        this.skip = x.skip;
                        this.mover = x.mover ? x.mover : c;
                        this.events = [h(this.handle, d.press, b.hitch(this, "onMouseDown")), h(this.handle, "dragstart", b.hitch(this, "onSelectStart")), h(this.handle, "selectstart", b.hitch(this, "onSelectStart"))]
                    },
                    markupFactory: function(q, x, v) {
                        return new v(x,q)
                    },
                    destroy: function() {
                        C.forEach(this.events, function(q) {
                            q.remove()
                        });
                        g(this.node, "");
                        this.events = this.node = this.handle = null
                    },
                    onMouseDown: function(q) {
                        if (!this.skip || !a.isFormElement(q)) {
                            if (this.delay)
                                this.events.push(h(this.handle, d.move, b.hitch(this, "onMouseMove")), h(this.handle.ownerDocument, d.release, b.hitch(this, "onMouseUp"))),
                                this._lastX = q.pageX,
                                this._lastY = q.pageY;
                            else
                                this.onDragDetected(q);
                            q.stopPropagation();
                            q.preventDefault()
                        }
                    },
                    onMouseMove: function(q) {
                        if (Math.abs(q.pageX - this._lastX) > this.delay || Math.abs(q.pageY - this._lastY) > this.delay)
                            this.onMouseUp(q),
                            this.onDragDetected(q);
                        q.stopPropagation();
                        q.preventDefault()
                    },
                    onMouseUp: function(q) {
                        for (var x = 0; 2 > x; ++x)
                            this.events.pop().remove();
                        q.stopPropagation();
                        q.preventDefault()
                    },
                    onSelectStart: function(q) {
                        this.skip && a.isFormElement(q) || (q.stopPropagation(),
                        q.preventDefault())
                    },
                    onDragDetected: function(q) {
                        new this.mover(this.node,q,this)
                    },
                    onMoveStart: function(q) {
                        f.publish("/dnd/move/start", q);
                        m.add(e.body(), "dojoMove");
                        m.add(this.node, "dojoMoveItem")
                    },
                    onMoveStop: function(q) {
                        f.publish("/dnd/move/stop", q);
                        m.remove(e.body(), "dojoMove");
                        m.remove(this.node, "dojoMoveItem")
                    },
                    onFirstMove: function() {},
                    onMove: function(q, x) {
                        this.onMoving(q, x);
                        var v = q.node.style;
                        v.left = x.l + "px";
                        v.top = x.t + "px";
                        this.onMoved(q, x)
                    },
                    onMoving: function() {},
                    onMoved: function() {}
                })
            })
        },
        "dojo/dnd/common": function() {
            define(["../sniff", "../_base/kernel", "../_base/lang", "../dom"], function(C, y, b, w) {
                var m = b.getObject("dojo.dnd", !0);
                m.getCopyKeyState = function(l) {
                    return l[C("mac") ? "metaKey" : "ctrlKey"]
                }
                ;
                m._uniqueId = 0;
                m.getUniqueId = function() {
                    do
                        var l = y._scopeName + "Unique" + ++m._uniqueId;
                    while (w.byId(l));
                    return l
                }
                ;
                m._empty = {};
                m.isFormElement = function(l) {
                    l = l.target;
                    3 == l.nodeType && (l = l.parentNode);
                    return 0 <= " a button textarea input select option ".indexOf(" " + l.tagName.toLowerCase() + " ")
                }
                ;
                return m
            })
        },
        "dojo/dnd/Mover": function() {
            define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                return y("dojo.dnd.Mover", [f], {
                    constructor: function(n, t, g) {
                        function q(x) {
                            x.preventDefault();
                            x.stopPropagation()
                        }
                        this.node = l.byId(n);
                        this.marginBox = {
                            l: t.pageX,
                            t: t.pageY
                        };
                        this.mouseButton = t.button;
                        t = this.host = g;
                        n = n.ownerDocument;
                        this.events = [d(n, a.move, b.hitch(this, "onFirstMove")), d(n, a.move, b.hitch(this, "onMouseMove")), d(n, a.release, b.hitch(this, "onMouseUp")), d(n, "dragstart", q), d(n.body, "selectstart", q)];
                        e.autoScrollStart(n);
                        if (t && t.onMoveStart)
                            t.onMoveStart(this)
                    },
                    onMouseMove: function(n) {
                        e.autoScroll(n);
                        var t = this.marginBox;
                        this.host.onMove(this, {
                            l: t.l + n.pageX,
                            t: t.t + n.pageY
                        }, n);
                        n.preventDefault();
                        n.stopPropagation()
                    },
                    onMouseUp: function(n) {
                        (w("webkit") && w("mac") && 2 == this.mouseButton ? 0 == n.button : this.mouseButton == n.button) && this.destroy();
                        n.preventDefault();
                        n.stopPropagation()
                    },
                    onFirstMove: function(n) {
                        var t = this.node.style
                          , g = this.host;
                        switch (t.position) {
                        case "relative":
                        case "absolute":
                            var q = Math.round(parseFloat(t.left)) || 0;
                            t = Math.round(parseFloat(t.top)) || 0;
                            break;
                        default:
                            t.position = "absolute";
                            t = k.getMarginBox(this.node);
                            q = m.doc.body;
                            var x = h.getComputedStyle(q)
                              , v = k.getMarginBox(q, x);
                            x = k.getContentBox(q, x);
                            q = t.l - (x.l - v.l);
                            t = t.t - (x.t - v.t)
                        }
                        this.marginBox.l = q - this.marginBox.l;
                        this.marginBox.t = t - this.marginBox.t;
                        if (g && g.onFirstMove)
                            g.onFirstMove(this, n);
                        this.events.shift().remove()
                    },
                    destroy: function() {
                        C.forEach(this.events, function(t) {
                            t.remove()
                        });
                        var n = this.host;
                        if (n && n.onMoveStop)
                            n.onMoveStop(this);
                        this.events = this.node = this.host = null
                    }
                })
            })
        },
        "dojo/dnd/autoscroll": function() {
            define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "), function(C, y, b, w, m, l) {
                var k = {};
                C.setObject("dojo.dnd.autoscroll", k);
                k.getViewport = l.getBox;
                k.V_TRIGGER_AUTOSCROLL = 32;
                k.H_TRIGGER_AUTOSCROLL = 32;
                k.V_AUTOSCROLL_VALUE = 16;
                k.H_AUTOSCROLL_VALUE = 16;
                var h, f = b.doc, d = Infinity, a = Infinity;
                k.autoScrollStart = function(c) {
                    f = c;
                    h = l.getBox(f);
                    c = b.body(f).parentNode;
                    d = Math.max(c.scrollHeight - h.h, 0);
                    a = Math.max(c.scrollWidth - h.w, 0)
                }
                ;
                k.autoScroll = function(c) {
                    var e = h || l.getBox(f)
                      , n = b.body(f).parentNode
                      , t = 0
                      , g = 0;
                    c.clientX < k.H_TRIGGER_AUTOSCROLL ? t = -k.H_AUTOSCROLL_VALUE : c.clientX > e.w - k.H_TRIGGER_AUTOSCROLL && (t = Math.min(k.H_AUTOSCROLL_VALUE, a - n.scrollLeft));
                    c.clientY < k.V_TRIGGER_AUTOSCROLL ? g = -k.V_AUTOSCROLL_VALUE : c.clientY > e.h - k.V_TRIGGER_AUTOSCROLL && (g = Math.min(k.V_AUTOSCROLL_VALUE, d - n.scrollTop));
                    window.scrollBy(t, g)
                }
                ;
                k._validNodes = {
                    div: 1,
                    p: 1,
                    td: 1
                };
                k._validOverflow = {
                    auto: 1,
                    scroll: 1
                };
                k.autoScrollNodes = function(c) {
                    for (var e, n, t, g, q, x = 0, v = 0, z = c.target; z; ) {
                        if (1 == z.nodeType && z.tagName.toLowerCase()in k._validNodes) {
                            t = m.getComputedStyle(z);
                            q = t.overflowX.toLowerCase()in k._validOverflow;
                            g = t.overflowY.toLowerCase()in k._validOverflow;
                            if (q || g)
                                e = w.getContentBox(z, t),
                                n = w.position(z, !0);
                            if (q) {
                                t = Math.min(k.H_TRIGGER_AUTOSCROLL, e.w / 2);
                                q = c.pageX - n.x;
                                if (y("webkit") || y("opera"))
                                    q += b.body().scrollLeft;
                                x = 0;
                                0 < q && q < e.w && (q < t ? x = -t : q > e.w - t && (x = t),
                                z.scrollLeft += x)
                            }
                            if (g) {
                                g = Math.min(k.V_TRIGGER_AUTOSCROLL, e.h / 2);
                                t = c.pageY - n.y;
                                if (y("webkit") || y("opera"))
                                    t += b.body().scrollTop;
                                v = 0;
                                0 < t && t < e.h && (t < g ? v = -g : t > e.h - g && (v = g),
                                z.scrollTop += v)
                            }
                            if (x || v)
                                return
                        }
                        try {
                            z = z.parentNode
                        } catch (u) {
                            z = null
                        }
                    }
                    k.autoScroll(c)
                }
                ;
                return k
            })
        },
        "dojo/dnd/TimedMoveable": function() {
            define(["../_base/declare", "./Moveable"], function(C, y) {
                var b = y.prototype.onMove;
                return C("dojo.dnd.TimedMoveable", y, {
                    timeout: 40,
                    constructor: function(w, m) {
                        m || (m = {});
                        m.timeout && "number" == typeof m.timeout && 0 <= m.timeout && (this.timeout = m.timeout)
                    },
                    onMoveStop: function(w) {
                        w._timer && (clearTimeout(w._timer),
                        b.call(this, w, w._leftTop));
                        y.prototype.onMoveStop.apply(this, arguments)
                    },
                    onMove: function(w, m) {
                        w._leftTop = m;
                        if (!w._timer) {
                            var l = this;
                            w._timer = setTimeout(function() {
                                w._timer = null;
                                b.call(l, w, w._leftTop)
                            }, this.timeout)
                        }
                    }
                })
            })
        },
        "dijit/DialogUnderlay": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c) {
                var e = C("dijit.DialogUnderlay", [h, f], {
                    templateString: "\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
                    dialogId: "",
                    "class": "",
                    _modalConnects: [],
                    _setDialogIdAttr: function(n) {
                        w.set(this.node, "id", n + "_underlay");
                        this._set("dialogId", n)
                    },
                    _setClassAttr: function(n) {
                        this.node.className = "dijitDialogUnderlay " + n;
                        this._set("class", n)
                    },
                    postCreate: function() {
                        this.ownerDocumentBody.appendChild(this.domNode);
                        this.own(l(this.domNode, "keydown", y.hitch(this, "_onKeyDown")));
                        this.inherited(arguments)
                    },
                    layout: function() {
                        var n = this.node.style
                          , t = this.domNode.style;
                        t.display = "none";
                        var g = k.getBox(this.ownerDocument);
                        t.top = g.t + "px";
                        t.left = g.l + "px";
                        n.width = g.w + "px";
                        n.height = g.h + "px";
                        t.display = "block"
                    },
                    show: function() {
                        this.domNode.style.display = "block";
                        this.open = !0;
                        this.layout();
                        this.bgIframe = new d(this.domNode);
                        var n = k.get(this.ownerDocument);
                        this._modalConnects = [a.on("resize", y.hitch(this, "layout")), l(n, "scroll", y.hitch(this, "layout"))]
                    },
                    hide: function() {
                        this.bgIframe.destroy();
                        delete this.bgIframe;
                        for (this.domNode.style.display = "none"; this._modalConnects.length; )
                            this._modalConnects.pop().remove();
                        this.open = !1
                    },
                    destroy: function() {
                        for (; this._modalConnects.length; )
                            this._modalConnects.pop().remove();
                        this.inherited(arguments)
                    },
                    _onKeyDown: function() {}
                });
                e.show = function(n, t) {
                    var g = e._singleton;
                    !g || g._destroyed ? g = c._underlay = e._singleton = new e(n) : n && g.set(n);
                    m.set(g.domNode, "zIndex", t);
                    g.open || g.show()
                }
                ;
                e.hide = function() {
                    var n = e._singleton;
                    n && !n._destroyed && n.hide()
                }
                ;
                return e
            })
        },
        "esri/Credential": function() {
            define(["dojo/_base/declare", "dojo/has", "./kernel", "./IdentityManagerBase"], function(C, y, b, w) {
                C = C(w.Credential, {});
                y("extend-esri") && (b.Credential = C);
                return C
            })
        },
        "esri/IdentityManagerBase": function() {
            define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v) {
                var z = {}
                  , u = function(A) {
                    var E = (new l(A.owningSystemUrl)).host;
                    A = (new l(A.server)).host;
                    var H = /.+\.arcgis\.com$/i;
                    return H.test(E) && H.test(A)
                }
                  , p = function(A, E) {
                    return !!(u(A) && E && w.some(E, function(H) {
                        return H.test(A.server)
                    }))
                }
                  , r = null
                  , B = null;
                try {
                    r = window.localStorage,
                    B = window.sessionStorage
                } catch (A) {}
                var D = C(q, {
                    declaredClass: "esri.IdentityManagerBase",
                    constructor: function() {
                        this._portalConfig = b.getObject("esriGeowConfig");
                        this.serverInfos = [];
                        this.oAuthInfos = [];
                        this.credentials = [];
                        this._soReqs = [];
                        this._xoReqs = [];
                        this._portals = [];
                        this._getOAuthHash();
                        f(window, "pageshow", b.hitch(this, this._pageShowHandler))
                    },
                    defaultOAuthInfo: null,
                    defaultTokenValidity: 60,
                    tokenValidity: null,
                    normalizeWebTierAuth: !1,
                    _appUrlObj: n.urlToObject(window.location.href),
                    _postMessageAuthHandle: null,
                    _busy: null,
                    _rejectOnPersistedPageShow: !1,
                    _oAuthHash: null,
                    _gwTokenUrl: "/sharing/generateToken",
                    _agsRest: "/rest/services",
                    _agsPortal: /\/sharing(\/|$)/i,
                    _agsAdmin: /(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,
                    _adminSvcs: /\/rest\/admin\/services(\/|$)/i,
                    _gwDomains: [{
                        regex: /^https?:\/\/www\.arcgis\.com/i,
                        customBaseUrl: "maps.arcgis.com",
                        tokenServiceUrl: "https://www.arcgis.com/sharing/generateToken"
                    }, {
                        regex: /^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,
                        customBaseUrl: "mapsdev.arcgis.com",
                        tokenServiceUrl: "https://dev.arcgis.com/sharing/generateToken"
                    }, {
                        regex: /^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,
                        customBaseUrl: "mapsdevext.arcgis.com",
                        tokenServiceUrl: "https://devext.arcgis.com/sharing/generateToken"
                    }, {
                        regex: /^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,
                        customBaseUrl: "mapsqa.arcgis.com",
                        tokenServiceUrl: "https://qaext.arcgis.com/sharing/generateToken"
                    }, {
                        regex: /^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,
                        customBaseUrl: "maps.arcgis.com",
                        tokenServiceUrl: "https://www.arcgis.com/sharing/generateToken"
                    }],
                    _legacyFed: [],
                    _regexSDirUrl: /http.+\/rest\/services\/?/ig,
                    _regexServerType: /(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
                    _gwUser: /http.+\/users\/([^\/]+)\/?.*/i,
                    _gwItem: /http.+\/items\/([^\/]+)\/?.*/i,
                    _gwGroup: /http.+\/groups\/([^\/]+)\/?.*/i,
                    _errorCodes: [499, 498, 403, 401],
                    _rePortalTokenSvc: /\/sharing(\/rest)?\/generatetoken/i,
                    _publicUrls: [/\/arcgis\/tokens/i, /\/sharing(\/rest)?\/generatetoken/i, /\/rest\/info/i],
                    _createDefaultOAuthInfo: !0,
                    _hasTestedIfAppIsOnPortal: !1,
                    registerServers: function(A) {
                        var E = this.serverInfos;
                        E ? (A = w.filter(A, function(H) {
                            return !this.findServerInfo(H.server)
                        }, this),
                        this.serverInfos = E.concat(A)) : this.serverInfos = A;
                        w.forEach(A, function(H) {
                            H.owningSystemUrl && this._portals.push(H.owningSystemUrl);
                            if (H.hasPortal) {
                                this._portals.push(H.server);
                                var J = a.defaults.io.corsEnabledServers
                                  , O = this._getOrigin(H.tokenServiceUrl);
                                n.canUseXhr(H.server) || J.push(H.server.replace(/^https?:\/\//i, ""));
                                n.canUseXhr(O) || J.push(O.replace(/^https?:\/\//i, ""))
                            }
                        }, this)
                    },
                    registerOAuthInfos: function(A) {
                        var E = this.oAuthInfos;
                        E ? (w.forEach(A, function(H) {
                            (H = this.findOAuthInfo(H.portalUrl)) && E.splice(E.indexOf(H), 1)
                        }, this),
                        this.oAuthInfos = E.concat(A)) : this.oAuthInfos = A
                    },
                    registerToken: function(A) {
                        A = c.mixin({}, A);
                        var E = this._sanitizeUrl(A.server), H = this.findServerInfo(E), J = !0, O;
                        H || (H = new e,
                        H.server = this._getServerInstanceRoot(E),
                        H.tokenServiceUrl = this._getTokenSvcUrl(E),
                        H.hasPortal = !0,
                        this.registerServers([H]));
                        (O = this.findCredential(E, A.userId)) ? (delete A.server,
                        b.mixin(O, A),
                        J = !1) : (O = new G({
                            userId: A.userId,
                            server: H.server,
                            token: A.token,
                            expires: A.expires,
                            ssl: A.ssl,
                            scope: this._isServerRsrc(E) ? "server" : "portal"
                        }),
                        O.resources = [E],
                        this.credentials.push(O));
                        O.onTokenChange(!1);
                        J || O.refreshServerTokens()
                    },
                    toJson: function() {
                        return c.fixJson({
                            serverInfos: w.map(this.serverInfos, function(A) {
                                return A.toJson()
                            }),
                            oAuthInfos: w.map(this.oAuthInfos, function(A) {
                                return A.toJson()
                            }),
                            credentials: w.map(this.credentials, function(A) {
                                return A.toJson()
                            })
                        })
                    },
                    initialize: function(A) {
                        if (A) {
                            b.isString(A) && (A = JSON.parse(A));
                            var E = A.serverInfos
                              , H = A.oAuthInfos;
                            A = A.credentials;
                            if (E) {
                                var J = [];
                                w.forEach(E, function(V) {
                                    V.server && V.tokenServiceUrl && J.push(V.declaredClass ? V : new e(V))
                                });
                                J.length && this.registerServers(J)
                            }
                            if (H) {
                                var O = [];
                                w.forEach(H, function(V) {
                                    V.appId && O.push(V.declaredClass ? V : new v(V))
                                });
                                O.length && this.registerOAuthInfos(O)
                            }
                            A && w.forEach(A, function(V) {
                                V.userId && V.server && V.token && V.expires && V.expires > (new Date).getTime() && (V = V.declaredClass ? V : new G(V),
                                V.onTokenChange(),
                                this.credentials.push(V))
                            }, this)
                        }
                    },
                    findServerInfo: function(A) {
                        var E;
                        A = this._sanitizeUrl(A);
                        w.some(this.serverInfos, function(H) {
                            this._hasSameServerInstance(H.server, A) && (E = H);
                            return !!E
                        }, this);
                        return E
                    },
                    findOAuthInfo: function(A) {
                        var E;
                        A = this._sanitizeUrl(A);
                        w.some(this.oAuthInfos, function(H) {
                            this._hasSameServerInstance(H.portalUrl, A) && (E = H);
                            return !!E
                        }, this);
                        return E
                    },
                    findCredential: function(A, E) {
                        var H;
                        A = this._sanitizeUrl(A);
                        var J = this._isServerRsrc(A) ? "server" : "portal";
                        E ? w.some(this.credentials, function(O) {
                            this._hasSameServerInstance(O.server, A) && E === O.userId && O.scope === J && (H = O);
                            return !!H
                        }, this) : w.some(this.credentials, function(O) {
                            this._hasSameServerInstance(O.server, A) && -1 !== this._getIdenticalSvcIdx(A, O) && O.scope === J && (H = O);
                            return !!H
                        }, this);
                        return H
                    },
                    getCredential: function(A, E) {
                        var H = !0;
                        if (c.isDefined(E))
                            if (b.isObject(E)) {
                                var J = !!E.token;
                                var O = E.error;
                                H = !1 !== E.prompt
                            } else
                                J = E;
                        A = this._sanitizeUrl(A);
                        var V = new m(t._dfdCanceller)
                          , aa = this._isAdminResource(A);
                        if ((J = J ? this.findCredential(A) : null) && O && 498 === O.code)
                            J.destroy();
                        else if (J)
                            return A = Error("You are currently signed in as: '" + J.userId + "'. You do not have access to this resource: " + A),
                            A.name = "identity-manager:not-authorized",
                            A.code = "IdentityManagerBase.1",
                            A.httpCode = O && O.httpCode,
                            A.messageCode = O ? O.messageCode : null,
                            A.subcode = O ? O.subcode : null,
                            A.details = O ? O.details : null,
                            A.log = !!y.isDebug,
                            V.errback(A),
                            V;
                        if (O = this._findCredential(A, E))
                            return V.callback(O),
                            V;
                        var da = this.findServerInfo(A);
                        if (da)
                            !da.hasServer && this._isServerRsrc(A) && (da._restInfoDfd = this._getTokenSvcUrl(A, !0),
                            da.hasServer = !0);
                        else {
                            O = this._getTokenSvcUrl(A);
                            if (!O)
                                return A = Error("Unknown resource - could not find token service endpoint."),
                                A.name = "identity-manager:unknown-resource",
                                A.code = "IdentityManagerBase.2",
                                A.log = !!y.isDebug,
                                V.errback(A),
                                V;
                            da = new e;
                            da.server = this._getServerInstanceRoot(A);
                            b.isString(O) ? (da.tokenServiceUrl = O,
                            da.hasPortal = !0) : (da._restInfoDfd = O,
                            da.hasServer = !0);
                            this.registerServers([da])
                        }
                        da.hasPortal && void 0 === da._selfReq && (H || n.hasSameOrigin(da.tokenServiceUrl, window.location.origin) || this._gwDomains.some(function(ea) {
                            return ea.tokenServiceUrl === da.tokenServiceUrl
                        })) && (da._selfReq = {
                            owningTenant: E && E.owningTenant,
                            selfDfd: this._getPortalSelf(da.tokenServiceUrl.replace(this._rePortalTokenSvc, "/sharing/rest/portals/self"), A)
                        });
                        return this._enqueue(A, da, E, V, aa)
                    },
                    getResourceName: function(A) {
                        return this._isRESTService(A) ? A.replace(this._regexSDirUrl, "").replace(this._regexServerType, "") || "" : this._gwUser.test(A) && A.replace(this._gwUser, "$1") || this._gwItem.test(A) && A.replace(this._gwItem, "$1") || this._gwGroup.test(A) && A.replace(this._gwGroup, "$1") || ""
                    },
                    generateToken: function(A, E, H) {
                        var J = this._rePortalTokenSvc.test(A.tokenServiceUrl)
                          , O = new l(window.location.href.toLowerCase())
                          , V = !E;
                        var aa = A.shortLivedTokenValidity;
                        if (E) {
                            var da = d.id.tokenValidity || aa || d.id.defaultTokenValidity;
                            da > aa && (da = aa)
                        }
                        if (H) {
                            var ea = H.isAdmin;
                            var Y = H.serverUrl;
                            var ia = H.token;
                            var qa = H.ssl;
                            A.customParameters = H.customParameters
                        }
                        if (ea)
                            aa = A.adminTokenServiceUrl;
                        else {
                            aa = A.tokenServiceUrl;
                            var wa = new l(aa.toLowerCase());
                            A.webTierAuth && H && H.serverUrl && !qa && "http" === O.scheme && (n.hasSameOrigin(O.uri, aa, !0) || "https" === wa.scheme && O.host === wa.host && "7080" === O.port && "7443" === wa.port) && (aa = aa.replace(/^https:/i, "http:").replace(/:7443/i, ":7080"));
                            V && J && (aa = aa.replace(/\/rest/i, ""))
                        }
                        ea = b.mixin({
                            url: aa,
                            content: b.mixin({
                                request: "getToken",
                                username: E && E.username,
                                password: E && E.password,
                                serverUrl: Y,
                                token: ia,
                                expiration: da,
                                referer: ea || J ? window.location.host : null,
                                client: ea ? "referer" : null,
                                f: "json"
                            }, A.customParameters),
                            handleAs: "json",
                            callbackParamName: V ? "callback" : void 0
                        }, H && H.ioArgs);
                        H = {
                            usePost: !V,
                            disableIdentityLookup: !0,
                            useProxy: this._useProxy(A, H)
                        };
                        J || (ea.withCredentials = !1);
                        J = g(ea, H);
                        J.addCallback(function(K) {
                            if (!K || !K.token)
                                return K = Error("Unable to generate token"),
                                K.name = "identity-manager:authentication-failed",
                                K.code = "IdentityManagerBase.3",
                                K.log = !!y.isDebug,
                                K;
                            var Z = A.server;
                            z[Z] || (z[Z] = {});
                            E && (z[Z][E.username] = E.password);
                            K.validity = da;
                            return K
                        });
                        J.addErrback(function(K) {});
                        return J
                    },
                    isBusy: function() {
                        return !!this._busy
                    },
                    checkSignInStatus: function(A) {
                        var E = new m;
                        this.checkAppAccess(A, "").then(function(H) {
                            E.resolve(H.credential)
                        }).catch(function(H) {
                            E.reject(H)
                        });
                        return E
                    },
                    checkAppAccess: function(A, E, H) {
                        var J = this
                          , O = !1;
                        return this.getCredential(A, {
                            prompt: !1
                        }).then(function(V) {
                            var aa = {
                                f: "json"
                            };
                            if ("portal" === V.scope)
                                if (E && (J._doPortalSignIn(A) || H && H.force)) {
                                    var da = V.server + "/sharing/rest/oauth2/validateAppAccess";
                                    aa.client_id = E
                                } else if (V.token)
                                    da = V.server + "/sharing/rest";
                                else
                                    return {
                                        credential: V
                                    };
                            else if (V.token)
                                da = V.server + "/rest/services";
                            else
                                return {
                                    credential: V
                                };
                            V.token && (aa.token = V.token);
                            return g({
                                url: da,
                                content: aa,
                                callbackParamName: "callback"
                            }, {
                                disableIdentityLookup: !0
                            }).then(function(ea) {
                                if (!1 === ea.valid) {
                                    var Y = Error("You are currently signed in as: '" + V.userId + "'.  You do not have access to this app: '" + E + "'.");
                                    Y.name = "identity-manager:not-authorized";
                                    Y.code = "IdentityManagerBase.1";
                                    Y.log = !!y.isDebug;
                                    Y.details = ea;
                                    throw Y;
                                }
                                O = !!ea.viewOnlyUserTypeApp;
                                return {
                                    credential: V
                                }
                            }).catch(function(ea) {
                                if ("IdentityManagerBase.1" === ea.code || 400 === ea.code)
                                    throw 400 === ea.code && (ea.name = "identity-manager:invalid-request"),
                                    ea;
                                if (498 === ea.code)
                                    throw V.destroy(),
                                    ea = Error("User is not signed in."),
                                    ea.name = "identity-manager:not-authenticated",
                                    ea.code = "IdentityManagerBase.6",
                                    ea.log = !!y.isDebug,
                                    ea;
                                return {
                                    credential: V
                                }
                            })
                        }).then(function(V) {
                            return {
                                credential: V.credential,
                                viewOnly: O
                            }
                        })
                    },
                    setProtocolErrorHandler: function(A) {
                        this._protocolFunc = A
                    },
                    signIn: function() {},
                    oAuthSignIn: function() {},
                    onCredentialCreate: function() {},
                    onCredentialsDestroy: function() {},
                    destroyCredentials: function() {
                        if (this.credentials) {
                            var A = this.credentials.slice();
                            w.forEach(A, function(E) {
                                E.destroy()
                            })
                        }
                        this.onCredentialsDestroy()
                    },
                    enablePostMessageAuth: function(A) {
                        A || (A = "https://www.arcgis.com/sharing/rest");
                        this._postMessageAuthHandle && this._postMessageAuthHandle.remove();
                        this._postMessageAuthHandle = f(window, "message", function(E) {
                            (E.origin === window.location.origin || c.endsWith(E.origin, ".arcgis.com")) && E.data && "arcgis:auth:requestCredential" === E.data.type && this.getCredential(A).then(function(H) {
                                E.source.postMessage({
                                    type: "arcgis:auth:credential",
                                    credential: {
                                        expires: H.expires,
                                        server: H.server,
                                        ssl: H.ssl,
                                        token: H.token,
                                        userId: H.userId
                                    }
                                }, E.origin)
                            }).catch(function(H) {
                                E.source.postMessage({
                                    type: "arcgis:auth:error",
                                    error: {
                                        name: H.name,
                                        message: H.message
                                    }
                                }, E.origin)
                            })
                        }
                        .bind(this))
                    },
                    disablePostMessageAuth: function() {
                        this._postMessageAuthHandle && (this._postMessageAuthHandle.remove(),
                        this._postMessageAuthHandle = null)
                    },
                    _getOAuthHash: function() {
                        var A = window.location.hash;
                        if (A) {
                            "#" === A.charAt(0) && (A = A.substring(1));
                            A = h.queryToObject(A);
                            var E = !1;
                            if (A.access_token && A.expires_in && A.state && A.hasOwnProperty("username"))
                                try {
                                    A.state = JSON.parse(A.state),
                                    "object" === typeof A.state && A.state.portalUrl && (this._oAuthHash = A,
                                    E = !0)
                                } catch (H) {}
                            else
                                A.error && A.error_description && (console.log("IdentityManager OAuth Error: ", A.error, " - ", A.error_description),
                                "access_denied" === A.error && (E = !0));
                            E && (window.location.hash = A.state && A.state.hash || "")
                        }
                    },
                    _pageShowHandler: function(A) {
                        A.persisted && this.isBusy() && this._rejectOnPersistedPageShow && (A = Error("ABORTED"),
                        A.name = "identity-manager:user-aborted",
                        A.code = "IdentityManager.2",
                        A.log = !!y.isDebug,
                        this._errbackFunc(A))
                    },
                    _findCredential: function(A, E) {
                        var H = -1, J, O, V = E && E.token;
                        E = E && E.resource;
                        var aa = this._isServerRsrc(A) ? "server" : "portal"
                          , da = w.filter(this.credentials, function(qa) {
                            return this._hasSameServerInstance(qa.server, A) && qa.scope === aa
                        }, this);
                        A = E || A;
                        if (da.length)
                            if (1 === da.length) {
                                E = da[0];
                                var ea = (J = (O = this.findServerInfo(E.server)) && O.owningSystemUrl) && this.findCredential(J, E.userId);
                                H = this._getIdenticalSvcIdx(A, E);
                                if (V)
                                    -1 !== H && (E.resources.splice(H, 1),
                                    this._removeResource(A, ea));
                                else
                                    return -1 === H && E.resources.push(A),
                                    this._addResource(A, ea),
                                    E
                            } else {
                                var Y, ia;
                                w.some(da, function(qa) {
                                    ia = this._getIdenticalSvcIdx(A, qa);
                                    return -1 !== ia ? (Y = qa,
                                    ea = (J = (O = this.findServerInfo(Y.server)) && O.owningSystemUrl) && this.findCredential(J, Y.userId),
                                    H = ia,
                                    !0) : !1
                                }, this);
                                if (V)
                                    Y && (Y.resources.splice(H, 1),
                                    this._removeResource(A, ea));
                                else if (Y)
                                    return this._addResource(A, ea),
                                    Y
                            }
                    },
                    _findOAuthInfo: function(A) {
                        var E = this.findOAuthInfo(A);
                        E || w.some(this.oAuthInfos, function(H) {
                            this._isIdProvider(H.portalUrl, A) && (E = H);
                            return !!E
                        }, this);
                        return E
                    },
                    _addResource: function(A, E) {
                        E && -1 === this._getIdenticalSvcIdx(A, E) && E.resources.push(A)
                    },
                    _removeResource: function(A, E) {
                        var H = -1;
                        E && (H = this._getIdenticalSvcIdx(A, E),
                        -1 < H && E.resources.splice(H, 1))
                    },
                    _useProxy: function(A, E) {
                        return E && E.isAdmin && !n.hasSameOrigin(A.adminTokenServiceUrl, window.location.href) || !this._isPortalDomain(A.tokenServiceUrl) && 10.1 == A.currentVersion && !n.hasSameOrigin(A.tokenServiceUrl, window.location.href)
                    },
                    _getOrigin: function(A) {
                        A = new l(A);
                        return A.scheme + "://" + A.host + (c.isDefined(A.port) ? ":" + A.port : "")
                    },
                    _getServerInstanceRoot: function(A) {
                        var E = A.toLowerCase()
                          , H = E.indexOf(this._agsRest);
                        -1 === H && this._isAdminResource(A) && (H = this._agsAdmin.test(A) ? A.replace(this._agsAdmin, "$1").length : A.search(this._adminSvcs));
                        -1 === H && (H = E.indexOf("/sharing"));
                        -1 === H && "/" === E.substr(-1) && (H = E.length - 1);
                        return -1 < H ? A.substring(0, H) : A
                    },
                    _hasSameServerInstance: function(A, E) {
                        "/" === A.substr(-1) && (A = A.slice(0, -1));
                        A = A.toLowerCase();
                        E = this._getServerInstanceRoot(E).toLowerCase();
                        A = this._normalizeAGOLorgDomain(A);
                        E = this._normalizeAGOLorgDomain(E);
                        A = A.substr(A.indexOf(":"));
                        E = E.substr(E.indexOf(":"));
                        return A === E
                    },
                    _normalizeAGOLorgDomain: function(A) {
                        var E = /^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i
                          , H = /^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i
                          , J = /^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;
                        E.test(A) ? A = A.replace(E, "https://www.arcgis.com") : H.test(A) ? A = A.replace(H, "https://devext.arcgis.com") : J.test(A) && (A = A.replace(J, "https://qaext.arcgis.com"));
                        return A
                    },
                    _sanitizeUrl: function(A) {
                        var E = (a.defaults.io.proxyUrl || "").toLowerCase()
                          , H = E ? A.toLowerCase().indexOf(E + "?") : -1;
                        -1 !== H && (A = A.substring(H + E.length + 1));
                        A = n.normalize(A);
                        return n.urlToObject(A).path
                    },
                    _isRESTService: function(A) {
                        return -1 < A.indexOf(this._agsRest)
                    },
                    _isAdminResource: function(A) {
                        return this._agsAdmin.test(A) || this._adminSvcs.test(A)
                    },
                    _isServerRsrc: function(A) {
                        return this._isRESTService(A) || this._isAdminResource(A)
                    },
                    _isIdenticalService: function(A, E) {
                        if (this._isRESTService(A) && this._isRESTService(E)) {
                            A = this._getSuffix(A).toLowerCase();
                            E = this._getSuffix(E).toLowerCase();
                            var H = A === E;
                            H || (H = /(.*)\/(MapServer|FeatureServer).*/ig,
                            H = A.replace(H, "$1") === E.replace(H, "$1"))
                        } else
                            this._isAdminResource(A) && this._isAdminResource(E) ? H = !0 : this._isServerRsrc(A) || this._isServerRsrc(E) || !this._isPortalDomain(A) || (H = !0);
                        return H
                    },
                    _isPortalDomain: function(A) {
                        var E = new l(A.toLowerCase())
                          , H = this._portalConfig;
                        A = w.some(this._gwDomains, function(J) {
                            return J.regex.test(E.uri)
                        });
                        !A && H && (A = this._hasSameServerInstance(this._getServerInstanceRoot(H.restBaseUrl), E.uri));
                        A || (!this._arcgisUrl && (H = b.getObject("esri.arcgis.utils.arcgisUrl")) && (this._arcgisUrl = (new l(H)).authority),
                        this._arcgisUrl && (A = this._arcgisUrl.toLowerCase() === E.authority));
                        A || (A = w.some(this._portals, function(J) {
                            return this._hasSameServerInstance(J, E.uri)
                        }, this));
                        return A = A || this._agsPortal.test(E.path)
                    },
                    _isIdProvider: function(A, E) {
                        var H = -1
                          , J = -1;
                        w.forEach(this._gwDomains, function(da, ea) {
                            -1 === H && da.regex.test(A) && (H = ea);
                            -1 === J && da.regex.test(E) && (J = ea)
                        });
                        var O = !1;
                        if (-1 < H && -1 < J)
                            if (0 === H || 4 === H) {
                                if (0 === J || 4 === J)
                                    O = !0
                            } else if (1 === H) {
                                if (1 === J || 2 === J)
                                    O = !0
                            } else
                                2 === H ? 2 === J && (O = !0) : 3 === H && 3 === J && (O = !0);
                        if (!O) {
                            var V = this.findServerInfo(E)
                              , aa = V && V.owningSystemUrl;
                            aa && u(V) && this._isPortalDomain(aa) && this._isIdProvider(A, aa) && (O = !0)
                        }
                        return O
                    },
                    _isPublic: function(A) {
                        A = this._sanitizeUrl(A);
                        return w.some(this._publicUrls, function(E) {
                            return E.test(A)
                        })
                    },
                    _getIdenticalSvcIdx: function(A, E) {
                        var H = -1;
                        w.some(E.resources, function(J, O) {
                            return this._isIdenticalService(A, J) ? (H = O,
                            !0) : !1
                        }, this);
                        return H
                    },
                    _getSuffix: function(A) {
                        return A.replace(this._regexSDirUrl, "").replace(this._regexServerType, "$1")
                    },
                    _getTokenSvcUrl: function(A) {
                        if (this._isRESTService(A) || this._isAdminResource(A)) {
                            var E = this._getServerInstanceRoot(A);
                            var H = E + "/admin/generateToken";
                            A = E + "/rest/info";
                            E = g({
                                url: A,
                                content: {
                                    f: "json"
                                },
                                handleAs: "json",
                                callbackParamName: "callback"
                            });
                            E.adminUrl_ = H;
                            return E
                        }
                        if (this._isPortalDomain(A)) {
                            var J = "";
                            w.some(this._gwDomains, function(O) {
                                O.regex.test(A) && (J = O.tokenServiceUrl);
                                return !!J
                            });
                            J || w.some(this._portals, function(O) {
                                this._hasSameServerInstance(O, A) && (J = O + this._gwTokenUrl);
                                return !!J
                            }, this);
                            J || (H = A.toLowerCase().indexOf("/sharing"),
                            -1 !== H && (J = A.substring(0, H) + this._gwTokenUrl));
                            J || (J = this._getOrigin(A) + this._gwTokenUrl);
                            J && (H = (new l(A)).port,
                            /^http:\/\//i.test(A) && "7080" === H && (J = J.replace(/:7080/i, ":7443")),
                            J = J.replace(/http:/i, "https:"));
                            return J
                        }
                        if (-1 !== A.toLowerCase().indexOf("premium.arcgisonline.com"))
                            return "https://premium.arcgisonline.com/server/tokens"
                    },
                    _exchangeToken: function(A, E, H) {
                        return g({
                            url: A + "/sharing/rest/oauth2/exchangeToken",
                            content: {
                                f: "json",
                                client_id: E,
                                token: H
                            }
                        }, {
                            disableIdentityLookup: !0,
                            usePost: !0
                        }).then(function(J) {
                            return J.token
                        })
                    },
                    _getPlatformSelf: function(A, E) {
                        return g({
                            url: A + "/sharing/rest/oauth2/platformSelf",
                            content: {
                                f: "json"
                            },
                            headers: {
                                "X-Esri-Auth-Client-Id": E,
                                "X-Esri-Auth-Redirect-Uri": window.location.href.replace(/#.*$/, "")
                            },
                            withCredentials: !0
                        }, {
                            disableIdentityLookup: !0,
                            usePost: !0
                        })
                    },
                    _getPortalSelf: function(A, E) {
                        var H = "";
                        w.some(this._gwDomains, function(J) {
                            J.regex.test(A) && (H = J.customBaseUrl);
                            return !!H
                        });
                        if (H)
                            return E = new m,
                            E.resolve({
                                allSSL: !0,
                                currentVersion: "4.4",
                                customBaseUrl: H,
                                portalMode: "multitenant",
                                supportsOAuth: !0
                            }),
                            E;
                        "https:" === window.location.protocol ? A = A.replace(/^http:/i, "https:").replace(/:7080/i, ":7443") : /^http:/i.test(E) && (A = A.replace(/^https:/i, "http:").replace(/:7443/i, ":7080"));
                        return g({
                            url: A,
                            content: {
                                f: "json"
                            },
                            handleAs: "json",
                            callbackParamName: "callback"
                        }, {
                            crossOrigin: !1,
                            disableIdentityLookup: !0
                        })
                    },
                    _doPortalSignIn: function(A) {
                        var E = this._portalConfig
                          , H = window.location.href
                          , J = this.findServerInfo(A);
                        return (E || this._isPortalDomain(H)) && (J ? J.hasPortal || J.owningSystemUrl && this._isPortalDomain(J.owningSystemUrl) : this._isPortalDomain(A)) && (this._isIdProvider(H, A) || E && (this._hasSameServerInstance(this._getServerInstanceRoot(E.restBaseUrl), A) || this._isIdProvider(E.restBaseUrl, A)) || n.hasSameOrigin(H, A, !0)) ? !0 : !1
                    },
                    _checkProtocol: function(A, E, H, J) {
                        var O = !0;
                        J = J ? E.adminTokenServiceUrl : E.tokenServiceUrl;
                        0 !== b.trim(J).toLowerCase().indexOf("https:") || 0 === window.location.href.toLowerCase().indexOf("https:") || a.defaults.io.useCors && (n.canUseXhr(J) || n.canUseXhr(n.getProxyUrl(!0).path)) || (O = this._protocolFunc ? !!this._protocolFunc({
                            resourceUrl: A,
                            serverInfo: E
                        }) : !1,
                        O || (A = Error("Aborted the Sign-In process to avoid sending password over insecure connection."),
                        A.name = "identity-manager:aborted",
                        A.code = "IdentityManagerBase.4",
                        A.log = !!y.isDebug,
                        console.log(A.message),
                        H(A)));
                        return O
                    },
                    _enqueue: function(A, E, H, J, O, V) {
                        J || (J = new m(t._dfdCanceller));
                        J.resUrl_ = A;
                        J.sinfo_ = E;
                        J.options_ = H;
                        J.admin_ = O;
                        J.refresh_ = V;
                        this._busy ? this._hasSameServerInstance(this._getServerInstanceRoot(A), this._busy.resUrl_) ? (this._oAuthDfd && this._oAuthDfd.oAuthWin_ && this._oAuthDfd.oAuthWin_.focus(),
                        this._soReqs.push(J)) : this._xoReqs.push(J) : this._doSignIn(J);
                        return J
                    },
                    _doSignIn: function(A) {
                        this._busy = A;
                        this._rejectOnPersistedPageShow = !1;
                        var E = this
                          , H = function(Y) {
                            var ia = A.options_ && A.options_.resource
                              , qa = A.resUrl_
                              , wa = A.refresh_
                              , K = !1;
                            -1 === w.indexOf(E.credentials, Y) && (wa && -1 !== w.indexOf(E.credentials, wa) ? (wa.userId = Y.userId,
                            wa.token = Y.token,
                            wa.expires = Y.expires,
                            wa.validity = Y.validity,
                            wa.ssl = Y.ssl,
                            wa.creationTime = Y.creationTime,
                            K = !0,
                            Y = wa) : E.credentials.push(Y));
                            Y.resources || (Y.resources = []);
                            Y.resources.push(ia || qa);
                            Y.scope = E._isServerRsrc(qa) ? "server" : "portal";
                            Y.onTokenChange();
                            ia = E._soReqs;
                            var Z = {};
                            E._soReqs = [];
                            w.forEach(ia, function(pa) {
                                if (!this._isIdenticalService(qa, pa.resUrl_)) {
                                    var L = this._getSuffix(pa.resUrl_);
                                    Z[L] || (Z[L] = !0,
                                    Y.resources.push(pa.resUrl_))
                                }
                            }, E);
                            A.callback(Y);
                            w.forEach(ia, function(pa) {
                                this._hasSameServerInstance(this._getServerInstanceRoot(qa), pa.resUrl_) ? pa.callback(Y) : this._soReqs.push(pa)
                            }, E);
                            E._busy = A.resUrl_ = A.sinfo_ = A.refresh_ = null;
                            if (!K)
                                E.onCredentialCreate({
                                    credential: Y
                                });
                            E._soReqs.length ? E._doSignIn(E._soReqs.shift()) : E._xoReqs.length && E._doSignIn(E._xoReqs.shift())
                        }
                          , J = function(Y) {
                            A.errback(Y);
                            E._busy = A.resUrl_ = A.sinfo_ = A.refresh_ = null;
                            E._soReqs.length ? E._doSignIn(E._soReqs.shift()) : E._xoReqs.length && E._doSignIn(E._xoReqs.shift())
                        }
                          , O = function(Y, ia, qa, wa) {
                            var K = A.sinfo_
                              , Z = !A.options_ || !1 !== A.options_.prompt
                              , pa = K.hasPortal && E._findOAuthInfo(A.resUrl_);
                            if (Y)
                                H(new G({
                                    userId: Y,
                                    server: K.server,
                                    token: qa || null,
                                    expires: c.isDefined(wa) ? Number(wa) : null,
                                    ssl: !!ia
                                }));
                            else if (window !== window.parent && E._appUrlObj.query && E._appUrlObj.query["arcgis-auth-origin"] && E._appUrlObj.query["arcgis-auth-portal"] && E._hasSameServerInstance(E._getServerInstanceRoot(E._appUrlObj.query["arcgis-auth-portal"]), A.resUrl_)) {
                                window.parent.postMessage({
                                    type: "arcgis:auth:requestCredential"
                                }, E._appUrlObj.query["arcgis-auth-origin"]);
                                var L = f(window, "message", function(xa) {
                                    if (xa.source === window.parent && xa.data)
                                        if ("arcgis:auth:credential" === xa.data.type)
                                            L.remove(),
                                            H(new G(xa.data.credential));
                                        else if ("arcgis:auth:error" === xa.data.type) {
                                            L.remove();
                                            xa = xa.data.error;
                                            switch (xa.name) {
                                            case "identity-manager:busy":
                                            case "identity-manager:not-authorized":
                                                var Aa = "IdentityManager.1";
                                                break;
                                            case "identity-manager:server-identification-failed":
                                            case "identity-manager:unknown-resource":
                                            case "identity-manager:user-aborted":
                                                Aa = "IdentityManager.2";
                                                break;
                                            case "identity-manager:authentication-failed":
                                                Aa = "IdentityManager.3";
                                                break;
                                            case "identity-manager:aborted":
                                                Aa = "IdentityManager.4";
                                                break;
                                            case "identity-manager:not-authenticated":
                                                Aa = "IdentityManager.6";
                                                break;
                                            case "identity-manager:invalid-request":
                                                Aa = 400
                                            }
                                            var ca = Error(xa.message);
                                            ca.name = xa.name;
                                            ca.code = Aa;
                                            ca.log = !!y.isDebug;
                                            J(ca)
                                        }
                                })
                            } else if (pa) {
                                var R = pa._oAuthCred;
                                R || (Y = new x(pa,r),
                                ia = new x(pa,B),
                                Y.isValid() && ia.isValid() ? Y.expires > ia.expires ? (R = Y,
                                ia.destroy()) : (R = ia,
                                Y.destroy()) : R = Y.isValid() ? Y : ia,
                                pa._oAuthCred = R);
                                if (R.isValid()) {
                                    var ha = new G({
                                        userId: R.userId,
                                        server: K.server,
                                        token: R.token,
                                        expires: R.expires,
                                        ssl: R.ssl,
                                        _oAuthCred: R
                                    });
                                    pa.appId !== R.appId && E._doPortalSignIn(A.resUrl_) ? A._pendingDfd = E._exchangeToken(ha.server, pa.appId, ha.token).then(function(xa) {
                                        ha.token = xa;
                                        R.token = xa;
                                        R.save();
                                        H(ha)
                                    }).catch(function() {
                                        H(ha)
                                    }) : H(ha)
                                } else if (E._oAuthHash && E._hasSameServerInstance(pa.portalUrl, E._oAuthHash.state.portalUrl))
                                    Y = E._oAuthHash,
                                    ha = new G({
                                        userId: Y.username,
                                        server: K.server,
                                        token: Y.access_token,
                                        expires: (new Date).getTime() + 1E3 * Number(Y.expires_in),
                                        ssl: "true" === Y.ssl,
                                        oAuthState: Y.state,
                                        _oAuthCred: R
                                    }),
                                    R.storage = Y.persist ? r : B,
                                    R.token = ha.token,
                                    R.expires = ha.expires,
                                    R.userId = ha.userId,
                                    R.ssl = ha.ssl,
                                    R.save(),
                                    E._oAuthHash = null,
                                    H(ha);
                                else {
                                    var na = function() {
                                        Z ? A._pendingDfd = E.oAuthSignIn(A.resUrl_, K, pa, A.options_).addCallbacks(H, J) : (ta = Error("User is not signed in."),
                                        ta.name = "identity-manager:not-authenticated",
                                        ta.code = "IdentityManagerBase.6",
                                        ta.log = !!y.isDebug,
                                        J(ta))
                                    };
                                    E._doPortalSignIn(A.resUrl_) ? A._pendingDfd = E._getPlatformSelf(K.server, pa.appId).then(function(xa) {
                                        var Aa = xa.portalUrl;
                                        !Aa || n.hasSameOrigin(Aa, window.location.origin, !0) ? (ha = new G({
                                            server: K.server,
                                            userId: xa.username,
                                            token: xa.token
                                        }),
                                        H(ha)) : na()
                                    }).catch(na) : na()
                                }
                            } else if (Z)
                                E._checkProtocol(A.resUrl_, K, J, A.admin_) && (Y = A.options_,
                                A.admin_ && (Y = Y || {},
                                Y.isAdmin = !0),
                                A._pendingDfd = E.signIn(A.resUrl_, K, Y).addCallbacks(H, J));
                            else {
                                var ta = Error("User is not signed in.");
                                ta.name = "identity-manager:not-authenticated";
                                ta.code = "IdentityManagerBase.6";
                                ta.log = !!y.isDebug;
                                J(ta)
                            }
                        }
                          , V = function() {
                            var Y = A.sinfo_, ia = Y.owningSystemUrl, qa = A.options_, wa;
                            if (qa) {
                                var K = qa.token;
                                var Z = qa.error;
                                var pa = qa.prompt
                            }
                            (wa = E._findCredential(ia, {
                                token: K,
                                resource: A.resUrl_
                            })) || w.some(E.credentials, function(L) {
                                this._isIdProvider(ia, L.server) && (wa = L);
                                return !!wa
                            }, E);
                            wa ? (qa = E.findCredential(A.resUrl_, wa.userId)) ? H(qa) : p(Y, E._legacyFed) ? (qa = wa.toJson(),
                            qa.server = Y.server,
                            qa.resources = null,
                            H(new G(qa))) : (A._pendingDfd = E.generateToken(E.findServerInfo(wa.server), null, {
                                serverUrl: A.resUrl_,
                                token: wa.token,
                                ssl: wa.ssl
                            })).addCallbacks(function(L) {
                                H(new G({
                                    userId: wa.userId,
                                    server: Y.server,
                                    token: L.token,
                                    expires: c.isDefined(L.expires) ? Number(L.expires) : null,
                                    ssl: !!L.ssl,
                                    isAdmin: A.admin_,
                                    validity: L.validity
                                }))
                            }, J) : (E._busy = null,
                            K && (A.options_.token = null),
                            (A._pendingDfd = E.getCredential(ia.replace(/\/?$/, "/sharing"), {
                                resource: A.resUrl_,
                                owningTenant: Y.owningTenant,
                                token: K,
                                error: Z,
                                prompt: pa
                            })).addCallbacks(function(L) {
                                E._enqueue(A.resUrl_, A.sinfo_, A.options_, A, A.admin_)
                            }, function(L) {
                                J(L)
                            }))
                        };
                        this._errbackFunc = J;
                        var aa = A.sinfo_.owningSystemUrl
                          , da = this._isServerRsrc(A.resUrl_)
                          , ea = A.sinfo_._restInfoDfd;
                        ea ? ea.addCallbacks(function(Y) {
                            var ia = A.sinfo_;
                            ia._restInfoDfd && (ia.adminTokenServiceUrl = ia._restInfoDfd.adminUrl_,
                            ia._restInfoDfd = null,
                            ia.tokenServiceUrl = b.getObject("authInfo.tokenServicesUrl", !1, Y) || b.getObject("authInfo.tokenServiceUrl", !1, Y) || b.getObject("tokenServiceUrl", !1, Y),
                            ia.shortLivedTokenValidity = b.getObject("authInfo.shortLivedTokenValidity", !1, Y),
                            ia.currentVersion = Y.currentVersion,
                            ia.owningTenant = Y.owningTenant,
                            (Y = ia.owningSystemUrl = Y.owningSystemUrl) && E._portals.push(Y));
                            da && ia.owningSystemUrl ? V() : O()
                        }, function() {
                            A.sinfo_._restInfoDfd = null;
                            var Y = Error("Unknown resource - could not find token service endpoint.");
                            Y.name = "identity-manager:server-identification-failed";
                            Y.code = "IdentityManagerBase.2";
                            Y.log = !!y.isDebug;
                            J(Y)
                        }) : da && aa ? V() : A.sinfo_._selfReq ? A.sinfo_._selfReq.selfDfd.then(function(Y) {
                            var ia = {};
                            if (Y) {
                                var qa = Y.user && Y.user.username;
                                ia.username = qa;
                                ia.allSSL = Y.allSSL;
                                var wa = Y.supportsOAuth;
                                var K = Y.currentVersion;
                                if ("multitenant" === Y.portalMode)
                                    var Z = Y.customBaseUrl
                            }
                            A.sinfo_.webTierAuth = !!qa;
                            return qa && E.normalizeWebTierAuth ? E.generateToken(A.sinfo_, null, {
                                ssl: ia.allSSL
                            }).addBoth(function(pa) {
                                ia.portalToken = pa && pa.token;
                                ia.tokenExpiration = pa && pa.expires;
                                return ia
                            }) : !qa && wa && 4.4 <= parseFloat(K) && !E._findOAuthInfo(A.resUrl_) ? E._generateOAuthInfo({
                                portalUrl: A.sinfo_.server,
                                customBaseUrl: Z,
                                owningTenant: A.sinfo_._selfReq.owningTenant
                            }).always(function() {
                                return ia
                            }) : ia
                        }).always(function(Y) {
                            A.sinfo_._selfReq = null;
                            Y ? O(Y.username, Y.allSSL, Y.portalToken, Y.tokenExpiration) : O()
                        }) : O()
                    },
                    _generateOAuthInfo: function(A) {
                        var E = this
                          , H = A.portalUrl
                          , J = A.customBaseUrl
                          , O = A.owningTenant;
                        if (A = !this.defaultOAuthInfo && this._createDefaultOAuthInfo && !this._hasTestedIfAppIsOnPortal) {
                            var V = window.location.href;
                            var aa = V.indexOf("?");
                            -1 < aa && (V = V.slice(0, aa));
                            aa = V.search(/\/(apps|home)\//);
                            V = -1 < aa ? V.slice(0, aa) : null
                        }
                        A && V ? (this._hasTestedIfAppIsOnPortal = !0,
                        A = g({
                            url: V + "/sharing/rest",
                            content: {
                                f: "json"
                            },
                            handleAs: "json"
                        }).then(function() {
                            E.defaultOAuthInfo = new v({
                                appId: "arcgisonline",
                                popupCallbackUrl: V + "/home/oauth-callback.html"
                            })
                        })) : (A = new m,
                        A.resolve(),
                        A = A.promise);
                        return A.then(function() {
                            if (E.defaultOAuthInfo)
                                return H = H.replace(/^http:/i, "https:"),
                                g({
                                    url: H + "/sharing/rest/oauth2/validateRedirectUri",
                                    content: {
                                        accountId: O,
                                        client_id: E.defaultOAuthInfo.appId,
                                        redirect_uri: n.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),
                                        f: "json"
                                    },
                                    handleAs: "json",
                                    callbackParamName: "callback"
                                }).then(function(da) {
                                    if (da.valid) {
                                        var ea = E.defaultOAuthInfo.clone();
                                        ea.portalUrl = da.urlKey && J ? "https://" + da.urlKey.toLowerCase() + "." + J : H;
                                        ea.popup = window !== window.top || !(n.hasSameOrigin(H, window.location.origin) || E._gwDomains.some(function(Y) {
                                            return Y.regex.test(H) && Y.regex.test(window.location.origin)
                                        }));
                                        E.oAuthInfos.push(ea)
                                    }
                                })
                        })
                    }
                });
                var G = C(q, {
                    declaredClass: "esri.Credential",
                    tokenRefreshBuffer: 2,
                    constructor: function(A) {
                        b.mixin(this, A);
                        this.resources = this.resources || [];
                        c.isDefined(this.creationTime) || (this.creationTime = (new Date).getTime())
                    },
                    _oAuthCred: null,
                    refreshToken: function() {
                        var A = this, E = this.resources && this.resources[0], H = d.id.findServerInfo(this.server), J = H && H.owningSystemUrl, O = !!J && "server" === this.scope, V = O && p(H, d.id._legacyFed), aa = O && d.id.findServerInfo(J), da, ea = (da = H.webTierAuth) && d.id.normalizeWebTierAuth, Y = z[this.server];
                        Y = Y && Y[this.userId];
                        var ia = {
                            username: this.userId,
                            password: Y
                        };
                        if (!da || ea)
                            if (O && !aa && w.some(d.id.serverInfos, function(K) {
                                d.id._isIdProvider(J, K.server) && (aa = K);
                                return !!aa
                            }),
                            da = aa && d.id.findCredential(aa.server, this.userId),
                            !O || da)
                                if (V)
                                    da.refreshToken();
                                else {
                                    if (O)
                                        var qa = {
                                            serverUrl: E,
                                            token: da && da.token,
                                            ssl: da && da.ssl
                                        };
                                    else if (ea)
                                        ia = null,
                                        qa = {
                                            ssl: this.ssl
                                        };
                                    else if (Y)
                                        this.isAdmin && (qa = {
                                            isAdmin: !0
                                        });
                                    else {
                                        if (E) {
                                            E = d.id._sanitizeUrl(E);
                                            this._enqueued = 1;
                                            var wa = d.id._enqueue(E, H, null, null, this.isAdmin, this);
                                            wa.addCallback(function() {
                                                A._enqueued = 0;
                                                A.refreshServerTokens()
                                            }).addErrback(function() {
                                                A._enqueued = 0
                                            })
                                        }
                                        return wa
                                    }
                                    return d.id.generateToken(O ? aa : H, O ? null : ia, qa).addCallback(function(K) {
                                        A.token = K.token;
                                        A.expires = c.isDefined(K.expires) ? Number(K.expires) : null;
                                        A.creationTime = (new Date).getTime();
                                        A.validity = K.validity;
                                        A.onTokenChange();
                                        A.refreshServerTokens()
                                    }).addErrback(function() {})
                                }
                    },
                    refreshServerTokens: function() {
                        "portal" === this.scope && w.forEach(d.id.credentials, function(A) {
                            var E = d.id.findServerInfo(A.server)
                              , H = E && E.owningSystemUrl;
                            A !== this && A.userId === this.userId && H && "server" === A.scope && (d.id._hasSameServerInstance(this.server, H) || d.id._isIdProvider(H, this.server)) && (p(E, d.id._legacyFed) ? (A.token = this.token,
                            A.expires = this.expires,
                            A.creationTime = this.creationTime,
                            A.validity = this.validity,
                            A.onTokenChange()) : A.refreshToken())
                        }, this)
                    },
                    onTokenChange: function(A) {
                        clearTimeout(this._refreshTimer);
                        var E = this.server && d.id.findServerInfo(this.server)
                          , H = (E = E && E.owningSystemUrl) && d.id.findServerInfo(E);
                        !1 !== A && (!E || "portal" === this.scope || H && H.webTierAuth && !d.id.normalizeWebTierAuth) && (c.isDefined(this.expires) || c.isDefined(this.validity)) && this._startRefreshTimer()
                    },
                    onDestroy: function() {},
                    destroy: function() {
                        this.userId = this.server = this.token = this.expires = this.validity = this.resources = this.creationTime = null;
                        this._oAuthCred && (this._oAuthCred.destroy(),
                        this._oAuthCred = null);
                        var A = w.indexOf(d.id.credentials, this);
                        -1 < A && d.id.credentials.splice(A, 1);
                        this.onTokenChange();
                        this.onDestroy()
                    },
                    toJson: function() {
                        return this._toJson()
                    },
                    _toJson: function() {
                        var A = c.fixJson({
                            userId: this.userId,
                            server: this.server,
                            token: this.token,
                            expires: this.expires,
                            validity: this.validity,
                            ssl: this.ssl,
                            isAdmin: this.isAdmin,
                            creationTime: this.creationTime,
                            scope: this.scope
                        })
                          , E = this.resources;
                        E && 0 < E.length && (A.resources = E.slice());
                        return A
                    },
                    _startRefreshTimer: function() {
                        clearTimeout(this._refreshTimer);
                        var A = 6E4 * this.tokenRefreshBuffer
                          , E = Math.pow(2, 31) - 1
                          , H = (this.validity ? this.creationTime + 6E4 * this.validity : this.expires) - (new Date).getTime();
                        0 > H ? H = 0 : H > E && (H = E);
                        this._refreshTimer = setTimeout(b.hitch(this, this.refreshToken), H > A ? H - A : H)
                    }
                });
                D.Credential = G;
                k("extend-esri") && (d.IdentityManagerBase = D);
                return D
            })
        },
        "esri/ServerInfo": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "./kernel", "./lang"], function(C, y, b, w, m) {
                C = C(null, {
                    declaredClass: "esri.ServerInfo",
                    constructor: function(l) {
                        y.mixin(this, l)
                    },
                    toJson: function() {
                        return m.fixJson({
                            server: this.server,
                            tokenServiceUrl: this.tokenServiceUrl,
                            adminTokenServiceUrl: this.adminTokenServiceUrl,
                            shortLivedTokenValidity: this.shortLivedTokenValidity,
                            owningSystemUrl: this.owningSystemUrl,
                            owningTenant: this.owningTenant,
                            currentVersion: this.currentVersion,
                            hasPortal: this.hasPortal,
                            hasServer: this.hasServer,
                            webTierAuth: this.webTierAuth
                        })
                    }
                });
                b("extend-esri") && (w.ServerInfo = C);
                return C
            })
        },
        "esri/OAuthCredential": function() {
            define(["./kernel", "dojo/_base/declare", "dojo/has", "dojo/json"], function(C, y, b, w) {
                y = y(null, {
                    declaredClass: "esri.OAuthCredential",
                    oAuthInfo: null,
                    storage: null,
                    appId: null,
                    expires: null,
                    ssl: null,
                    token: null,
                    userId: null,
                    constructor: function(m, l) {
                        this.oAuthInfo = m;
                        this.storage = l;
                        this._init()
                    },
                    isValid: function() {
                        var m = !1;
                        if (this.oAuthInfo && this.token && this.userId) {
                            var l = (new Date).getTime();
                            this.expires > l && (this.expires - l) / 1E3 > 60 * this.oAuthInfo.minTimeUntilExpiration && (m = !0)
                        }
                        return m
                    },
                    save: function() {
                        if (this.storage) {
                            var m = this._load()
                              , l = this.oAuthInfo;
                            if (l && l.authNamespace && l.portalUrl) {
                                var k = m[l.authNamespace];
                                k || (k = m[l.authNamespace] = {});
                                k[l.portalUrl] = {
                                    appId: this.appId = l.appId,
                                    expires: this.expires,
                                    ssl: this.ssl,
                                    token: this.token,
                                    userId: this.userId
                                };
                                try {
                                    this.storage.setItem("esriJSAPIOAuth", w.stringify(m))
                                } catch (h) {
                                    console.log(h)
                                }
                            }
                        }
                    },
                    destroy: function() {
                        var m = this._load()
                          , l = this.oAuthInfo;
                        if (l && l.appId && l.portalUrl && this.token && this.expires > Date.now()) {
                            var k = l.portalUrl.replace(/^http:/i, "https:") + "/sharing/rest/oauth2/revokeToken"
                              , h = new FormData;
                            h.append("f", "json");
                            h.append("auth_token", this.token);
                            h.append("client_id", l.appId);
                            h.append("token_type_hint", "access_token");
                            if ("function" === typeof navigator.sendBeacon)
                                navigator.sendBeacon(k, h);
                            else {
                                var f = new XMLHttpRequest;
                                f.open("POST", k);
                                f.send(h)
                            }
                        }
                        if (l && l.authNamespace && l.portalUrl && this.storage && (k = m[l.authNamespace])) {
                            delete k[l.portalUrl];
                            try {
                                this.storage.setItem("esriJSAPIOAuth", w.stringify(m))
                            } catch (d) {
                                console.log(d)
                            }
                        }
                        l && (this.oAuthInfo = l._oAuthCred = null)
                    },
                    _init: function() {
                        var m = this._load()
                          , l = this.oAuthInfo;
                        l && l.authNamespace && l.portalUrl && (m = m[l.authNamespace]) && (m = m[l.portalUrl]) && (this.appId = m.appId,
                        this.expires = m.expires,
                        this.ssl = m.ssl,
                        this.token = m.token,
                        this.userId = m.userId)
                    },
                    _load: function() {
                        var m = {};
                        if (this.storage) {
                            var l = this.storage.getItem("esriJSAPIOAuth");
                            if (l)
                                try {
                                    m = w.parse(l)
                                } catch (k) {
                                    console.log(k)
                                }
                        }
                        return m
                    }
                });
                b("extend-esri") && (C.OAuthCredential = y);
                return y
            })
        },
        "esri/arcgis/OAuthInfo": function() {
            define(["../kernel", "../lang", "dojo/_base/declare", "dojo/_base/lang", "dojo/has"], function(C, y, b, w, m) {
                var l = b(null, {
                    declaredClass: "esri.arcgis.OAuthInfo",
                    constructor: function(k) {
                        w.mixin(this, {
                            expiration: 20160,
                            minTimeUntilExpiration: 30,
                            portalUrl: "https://www.arcgis.com",
                            authNamespace: "/",
                            forceLogin: !1,
                            popup: !1,
                            popupCallbackUrl: "oauth-callback.html",
                            popupWindowFeatures: "height\x3d490,width\x3d800,resizable,scrollbars,status",
                            preserveUrlHash: !1
                        }, k)
                    },
                    _oAuthCred: null,
                    toJson: function() {
                        return y.fixJson({
                            appId: this.appId,
                            expiration: this.expiration,
                            locale: this.locale,
                            minTimeUntilExpiration: this.minTimeUntilExpiration,
                            portalUrl: this.portalUrl,
                            authNamespace: this.authNamespace,
                            forceLogin: this.forceLogin,
                            popup: this.popup,
                            popupCallbackUrl: this.popupCallbackUrl,
                            popupWindowFeatures: this.popupWindowFeatures,
                            preserveUrlHash: this.preserveUrlHash
                        })
                    },
                    clone: function() {
                        return new l(this.toJson())
                    }
                });
                m("extend-esri") && w.setObject("arcgis.OAuthInfo", l, C);
                return l
            })
        },
        "dijit/form/Form": function() {
            define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "), function(C, y, b, w, m, l, k, h) {
                return C("dijit.form.Form", [m, l, k, h], {
                    name: "",
                    action: "",
                    method: "",
                    encType: "",
                    "accept-charset": "",
                    accept: "",
                    target: "",
                    templateString: "\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
                    postMixInProperties: function() {
                        this.nameAttrSetting = this.name ? "name\x3d'" + this.name + "'" : "";
                        this.inherited(arguments)
                    },
                    execute: function() {},
                    onExecute: function() {},
                    _setEncTypeAttr: function(f) {
                        y.set(this.domNode, "encType", f);
                        w("ie") && (this.domNode.encoding = f);
                        this._set("encType", f)
                    },
                    reset: function(f) {
                        var d = {
                            returnValue: !0,
                            preventDefault: function() {
                                this.returnValue = !1
                            },
                            stopPropagation: function() {},
                            currentTarget: f ? f.target : this.domNode,
                            target: f ? f.target : this.domNode
                        };
                        !1 !== this.onReset(d) && d.returnValue && this.inherited(arguments, [])
                    },
                    onReset: function() {
                        return !0
                    },
                    _onReset: function(f) {
                        this.reset(f);
                        f.stopPropagation();
                        f.preventDefault();
                        return !1
                    },
                    _onSubmit: function(f) {
                        var d = this.constructor.prototype;
                        if (this.execute != d.execute || this.onExecute != d.onExecute)
                            b.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.", "", "2.0"),
                            this.onExecute(),
                            this.execute(this.getValues());
                        !1 === this.onSubmit(f) && (f.stopPropagation(),
                        f.preventDefault())
                    },
                    onSubmit: function() {
                        return this.isValid()
                    },
                    submit: function() {
                        !1 !== this.onSubmit() && this.containerNode.submit()
                    }
                })
            })
        },
        "dijit/form/ValidationTextBox": function() {
            define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "), function(C, y, b, w, m, l, k) {
                var h = C("dijit.form.ValidationTextBox", m, {
                    templateString: k,
                    required: !1,
                    promptMessage: "",
                    invalidMessage: "$_unset_$",
                    missingMessage: "$_unset_$",
                    message: "",
                    constraints: {},
                    pattern: ".*",
                    regExp: "",
                    regExpGen: function() {},
                    state: "",
                    tooltipPosition: [],
                    _deprecateRegExp: function(f, d) {
                        d != h.prototype[f] && (y.deprecated("ValidationTextBox id\x3d" + this.id + ", set('" + f + "', ...) is deprecated.  Use set('pattern', ...) instead.", "", "2.0"),
                        this.set("pattern", d))
                    },
                    _setRegExpGenAttr: function(f) {
                        this._deprecateRegExp("regExpGen", f);
                        this._set("regExpGen", this._computeRegexp)
                    },
                    _setRegExpAttr: function(f) {
                        this._deprecateRegExp("regExp", f)
                    },
                    _setValueAttr: function() {
                        this.inherited(arguments);
                        this._refreshState()
                    },
                    validator: function(f, d) {
                        return (new RegExp("^(?:" + this._computeRegexp(d) + ")" + (this.required ? "" : "?") + "$")).test(f) && (!this.required || !this._isEmpty(f)) && (this._isEmpty(f) || void 0 !== this.parse(f, d))
                    },
                    _isValidSubset: function() {
                        return 0 == this.textbox.value.search(this._partialre)
                    },
                    isValid: function() {
                        return this.validator(this.textbox.value, this.get("constraints"))
                    },
                    _isEmpty: function(f) {
                        return (this.trim ? /^\s*$/ : /^$/).test(f)
                    },
                    getErrorMessage: function() {
                        var f = "$_unset_$" == this.invalidMessage ? this.messages.invalidMessage : this.invalidMessage ? this.invalidMessage : this.promptMessage
                          , d = "$_unset_$" == this.missingMessage ? this.messages.missingMessage : this.missingMessage ? this.missingMessage : f;
                        return this.required && this._isEmpty(this.textbox.value) ? d : f
                    },
                    getPromptMessage: function() {
                        return this.promptMessage
                    },
                    _maskValidSubsetError: !0,
                    validate: function(f) {
                        var d = ""
                          , a = this.disabled || this.isValid(f);
                        a && (this._maskValidSubsetError = !0);
                        var c = this._isEmpty(this.textbox.value)
                          , e = !a && f && this._isValidSubset();
                        this._set("state", a ? "" : ((!this._hasBeenBlurred || f) && c || e) && (this._maskValidSubsetError || e && !this._hasBeenBlurred && f) ? "Incomplete" : "Error");
                        this.focusNode.setAttribute("aria-invalid", "Error" == this.state ? "true" : "false");
                        "Error" == this.state ? (this._maskValidSubsetError = f && e,
                        d = this.getErrorMessage(f)) : "Incomplete" == this.state ? (d = this.getPromptMessage(f),
                        this._maskValidSubsetError = !this._hasBeenBlurred || f) : c && (d = this.getPromptMessage(f));
                        this.set("message", d);
                        return a
                    },
                    displayMessage: function(f) {
                        f && this.focused ? l.show(f, this.domNode, this.tooltipPosition, !this.isLeftToRight()) : l.hide(this.domNode)
                    },
                    _refreshState: function() {
                        this._created && this.validate(this.focused);
                        this.inherited(arguments)
                    },
                    constructor: function(f) {
                        this.constraints = b.clone(this.constraints);
                        this.baseClass += " dijitValidationTextBox"
                    },
                    startup: function() {
                        this.inherited(arguments);
                        this._refreshState()
                    },
                    _setConstraintsAttr: function(f) {
                        !f.locale && this.lang && (f.locale = this.lang);
                        this._set("constraints", f);
                        this._refreshState()
                    },
                    _setPatternAttr: function(f) {
                        this._set("pattern", f);
                        this._refreshState()
                    },
                    _computeRegexp: function(f) {
                        var d = this.pattern;
                        "function" == typeof d && (d = d.call(this, f));
                        if (d != this._lastRegExp) {
                            var a = "";
                            this._lastRegExp = d;
                            ".*" != d && d.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g, function(c) {
                                switch (c.charAt(0)) {
                                case "{":
                                case "+":
                                case "?":
                                case "*":
                                case "^":
                                case "$":
                                case "|":
                                case "(":
                                    a += c;
                                    break;
                                case ")":
                                    a += "|$)";
                                    break;
                                default:
                                    a += "(?:" + c + "|$)"
                                }
                            });
                            try {
                                "".search(a)
                            } catch (c) {
                                a = this.pattern,
                                console.warn("RegExp error in " + this.declaredClass + ": " + this.pattern)
                            }
                            this._partialre = "^(?:" + a + ")$"
                        }
                        return d
                    },
                    postMixInProperties: function() {
                        this.inherited(arguments);
                        this.messages = w.getLocalization("dijit.form", "validate", this.lang);
                        this._setConstraintsAttr(this.constraints)
                    },
                    _setDisabledAttr: function(f) {
                        this.inherited(arguments);
                        this._refreshState()
                    },
                    _setRequiredAttr: function(f) {
                        this._set("required", f);
                        this.focusNode.setAttribute("aria-required", f);
                        this._refreshState()
                    },
                    _setMessageAttr: function(f) {
                        this._set("message", f);
                        this.displayMessage(f)
                    },
                    reset: function() {
                        this._maskValidSubsetError = !0;
                        this.inherited(arguments)
                    },
                    _onBlur: function() {
                        this.displayMessage("");
                        this.inherited(arguments)
                    },
                    destroy: function() {
                        l.hide(this.domNode);
                        this.inherited(arguments)
                    }
                });
                return h
            })
        },
        "dijit/form/TextBox": function() {
            define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "), function(C, y, b, w, m, l, k, h, f, d, a) {
                h = C("dijit.form.TextBox" + (k("dojo-bidi") ? "_NoBidi" : ""), [h, f], {
                    templateString: d,
                    _singleNodeTemplate: '\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',
                    _buttonInputDisabled: k("ie") ? "disabled" : "",
                    baseClass: "dijitTextBox",
                    postMixInProperties: function() {
                        var c = this.type.toLowerCase();
                        if (this.templateString && "input" == this.templateString.toLowerCase() || ("hidden" == c || "file" == c) && this.templateString == this.constructor.prototype.templateString)
                            this.templateString = this._singleNodeTemplate;
                        this.inherited(arguments)
                    },
                    postCreate: function() {
                        this.inherited(arguments);
                        9 > k("ie") && this.defer(function() {
                            try {
                                var c = b.getComputedStyle(this.domNode);
                                if (c) {
                                    var e = c.fontFamily;
                                    if (e) {
                                        var n = this.domNode.getElementsByTagName("INPUT");
                                        if (n)
                                            for (c = 0; c < n.length; c++)
                                                n[c].style.fontFamily = e
                                    }
                                }
                            } catch (t) {}
                        })
                    },
                    _setPlaceHolderAttr: function(c) {
                        this._set("placeHolder", c);
                        this._phspan || (this._attachPoints.push("_phspan"),
                        this._phspan = y.create("span", {
                            className: "dijitPlaceHolder dijitInputField"
                        }, this.textbox, "after"),
                        this.own(l(this._phspan, "mousedown", function(e) {
                            e.preventDefault()
                        }), l(this._phspan, "touchend, pointerup, MSPointerUp", m.hitch(this, function() {
                            this.focus()
                        }))));
                        this._phspan.innerHTML = "";
                        this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(c));
                        this._updatePlaceHolder()
                    },
                    _onInput: function(c) {
                        this.inherited(arguments);
                        this._updatePlaceHolder()
                    },
                    _updatePlaceHolder: function() {
                        this._phspan && (this._phspan.style.display = this.placeHolder && !this.textbox.value ? "" : "none")
                    },
                    _setValueAttr: function(c, e, n) {
                        this.inherited(arguments);
                        this._updatePlaceHolder()
                    },
                    getDisplayedValue: function() {
                        w.deprecated(this.declaredClass + "::getDisplayedValue() is deprecated. Use get('displayedValue') instead.", "", "2.0");
                        return this.get("displayedValue")
                    },
                    setDisplayedValue: function(c) {
                        w.deprecated(this.declaredClass + "::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.", "", "2.0");
                        this.set("displayedValue", c)
                    },
                    _onBlur: function(c) {
                        this.disabled || (this.inherited(arguments),
                        this._updatePlaceHolder(),
                        k("mozilla") && this.selectOnClick && (this.textbox.selectionStart = this.textbox.selectionEnd = void 0))
                    },
                    _onFocus: function(c) {
                        this.disabled || this.readOnly || (this.inherited(arguments),
                        this._updatePlaceHolder())
                    }
                });
                9 > k("ie") && (h.prototype._isTextSelected = function() {
                    var c = this.ownerDocument.selection.createRange();
                    return c.parentElement() == this.textbox && 0 < c.text.length
                }
                ,
                a._setSelectionRange = f._setSelectionRange = function(c, e, n) {
                    c.createTextRange && (c = c.createTextRange(),
                    c.collapse(!0),
                    c.moveStart("character", -99999),
                    c.moveStart("character", e),
                    c.moveEnd("character", n - e),
                    c.select())
                }
                );
                k("dojo-bidi") && (h = C("dijit.form.TextBox", h, {
                    _setPlaceHolderAttr: function(c) {
                        this.inherited(arguments);
                        this.applyTextDir(this._phspan)
                    }
                }));
                return h
            })
        },
        "dijit/form/_FormValueWidget": function() {
            define(["dojo/_base/declare", "dojo/sniff", "./_FormWidget", "./_FormValueMixin"], function(C, y, b, w) {
                return C("dijit.form._FormValueWidget", [b, w], {
                    _layoutHackIE7: function() {
                        if (7 == y("ie"))
                            for (var m = this.domNode, l = m.parentNode, k = m.firstChild || m, h = k.style.filter, f = this; l && 0 == l.clientHeight; )
                                (function() {
                                    var d = f.connect(l, "onscroll", function() {
                                        f.disconnect(d);
                                        k.style.filter = (new Date).getMilliseconds();
                                        f.defer(function() {
                                            k.style.filter = h
                                        })
                                    })
                                }
                                )(),
                                l = l.parentNode
                    }
                })
            })
        },
        "dijit/form/_FormValueMixin": function() {
            define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "), function(C, y, b, w, m, l, k) {
                return C("dijit.form._FormValueMixin", k, {
                    readOnly: !1,
                    _setReadOnlyAttr: function(h) {
                        l("trident") && "disabled"in this ? y.set(this.focusNode, "readOnly", h || this.disabled) : y.set(this.focusNode, "readOnly", h);
                        this._set("readOnly", h)
                    },
                    postCreate: function() {
                        this.inherited(arguments);
                        void 0 === this._resetValue && (this._lastValueReported = this._resetValue = this.value)
                    },
                    _setValueAttr: function(h, f) {
                        this._handleOnChange(h, f)
                    },
                    _handleOnChange: function(h, f) {
                        this._set("value", h);
                        this.inherited(arguments)
                    },
                    undo: function() {
                        this._setValueAttr(this._lastValueReported, !1)
                    },
                    reset: function() {
                        this._hasBeenBlurred = !1;
                        this._setValueAttr(this._resetValue, !0)
                    }
                })
            })
        },
        "dijit/form/_TextBoxMixin": function() {
            define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = y("dijit.form._TextBoxMixin" + (w("dojo-bidi") ? "_NoBidi" : ""), null, {
                    trim: !1,
                    uppercase: !1,
                    lowercase: !1,
                    propercase: !1,
                    maxLength: "",
                    selectOnClick: !1,
                    placeHolder: "",
                    _getValueAttr: function() {
                        return this.parse(this.get("displayedValue"), this.constraints)
                    },
                    _setValueAttr: function(d, a, c) {
                        if (void 0 !== d) {
                            var e = this.filter(d);
                            "string" != typeof c && (c = null === e || "number" == typeof e && isNaN(e) ? "" : this.filter(this.format(e, this.constraints)),
                            0 != this.compare(e, this.filter(this.parse(c, this.constraints))) && (c = null))
                        }
                        null == c || "number" == typeof c && isNaN(c) || this.textbox.value == c || (this.textbox.value = c,
                        this._set("displayedValue", this.get("displayedValue")));
                        this.inherited(arguments, [e, a])
                    },
                    displayedValue: "",
                    _getDisplayedValueAttr: function() {
                        return this.filter(this.textbox.value)
                    },
                    _setDisplayedValueAttr: function(d) {
                        null == d ? d = "" : "string" != typeof d && (d = String(d));
                        this.textbox.value = d;
                        this._setValueAttr(this.get("value"), void 0);
                        this._set("displayedValue", this.get("displayedValue"))
                    },
                    format: function(d) {
                        return null == d ? "" : d.toString ? d.toString() : d
                    },
                    parse: function(d) {
                        return d
                    },
                    _refreshState: function() {},
                    onInput: function() {},
                    _onInput: function(d) {
                        this._lastInputEventValue = this.textbox.value;
                        this._processInput(this._lastInputProducingEvent || d);
                        delete this._lastInputProducingEvent;
                        this.intermediateChanges && this._handleOnChange(this.get("value"), !1)
                    },
                    _processInput: function() {
                        this._refreshState();
                        this._set("displayedValue", this.get("displayedValue"))
                    },
                    postCreate: function() {
                        this.textbox.setAttribute("value", this.textbox.value);
                        this.inherited(arguments);
                        this.own(k(this.textbox, "keydown, keypress, paste, cut, compositionend", l.hitch(this, function(d) {
                            if ("keydown" == d.type && 229 != d.keyCode) {
                                var a = d.keyCode;
                                switch (a) {
                                case m.SHIFT:
                                case m.ALT:
                                case m.CTRL:
                                case m.META:
                                case m.CAPS_LOCK:
                                case m.NUM_LOCK:
                                case m.SCROLL_LOCK:
                                    return
                                }
                                if (!d.ctrlKey && !d.metaKey && !d.altKey) {
                                    switch (a) {
                                    case m.NUMPAD_0:
                                    case m.NUMPAD_1:
                                    case m.NUMPAD_2:
                                    case m.NUMPAD_3:
                                    case m.NUMPAD_4:
                                    case m.NUMPAD_5:
                                    case m.NUMPAD_6:
                                    case m.NUMPAD_7:
                                    case m.NUMPAD_8:
                                    case m.NUMPAD_9:
                                    case m.NUMPAD_MULTIPLY:
                                    case m.NUMPAD_PLUS:
                                    case m.NUMPAD_ENTER:
                                    case m.NUMPAD_MINUS:
                                    case m.NUMPAD_PERIOD:
                                    case m.NUMPAD_DIVIDE:
                                        return
                                    }
                                    if (65 <= a && 90 >= a || 48 <= a && 57 >= a || a == m.SPACE)
                                        return;
                                    a = !1;
                                    for (var c in m)
                                        if (m[c] === d.keyCode) {
                                            a = !0;
                                            break
                                        }
                                    if (!a)
                                        return
                                }
                            }
                            (a = 32 <= d.charCode ? String.fromCharCode(d.charCode) : d.charCode) || (a = 65 <= d.keyCode && 90 >= d.keyCode || 48 <= d.keyCode && 57 >= d.keyCode || d.keyCode == m.SPACE ? String.fromCharCode(d.keyCode) : d.keyCode);
                            a || (a = 229);
                            if ("keypress" == d.type) {
                                if ("string" != typeof a)
                                    return;
                                if ("a" <= a && "z" >= a || "A" <= a && "Z" >= a || "0" <= a && "9" >= a || " " === a)
                                    if (d.ctrlKey || d.metaKey || d.altKey)
                                        return
                            }
                            var e = {
                                faux: !0
                            }, n;
                            for (n in d)
                                /^(layer[XY]|returnValue|keyLocation)$/.test(n) || (c = d[n],
                                "function" != typeof c && "undefined" != typeof c && (e[n] = c));
                            l.mixin(e, {
                                charOrCode: a,
                                _wasConsumed: !1,
                                preventDefault: function() {
                                    e._wasConsumed = !0;
                                    d.preventDefault()
                                },
                                stopPropagation: function() {
                                    d.stopPropagation()
                                }
                            });
                            this._lastInputProducingEvent = e;
                            !1 === this.onInput(e) && (e.preventDefault(),
                            e.stopPropagation());
                            if (!e._wasConsumed && 9 >= w("ie"))
                                switch (d.keyCode) {
                                case m.TAB:
                                case m.ESCAPE:
                                case m.DOWN_ARROW:
                                case m.UP_ARROW:
                                case m.LEFT_ARROW:
                                case m.RIGHT_ARROW:
                                    break;
                                default:
                                    d.keyCode == m.ENTER && "textarea" != this.textbox.tagName.toLowerCase() || this.defer(function() {
                                        this.textbox.value !== this._lastInputEventValue && k.emit(this.textbox, "input", {
                                            bubbles: !0
                                        })
                                    })
                                }
                        })), k(this.textbox, "input", l.hitch(this, "_onInput")), k(this.domNode, "keypress", function(d) {
                            d.stopPropagation()
                        }))
                    },
                    _blankValue: "",
                    filter: function(d) {
                        if (null === d)
                            return this._blankValue;
                        if ("string" != typeof d)
                            return d;
                        this.trim && (d = l.trim(d));
                        this.uppercase && (d = d.toUpperCase());
                        this.lowercase && (d = d.toLowerCase());
                        this.propercase && (d = d.replace(/[^\s]+/g, function(a) {
                            return a.substring(0, 1).toUpperCase() + a.substring(1)
                        }));
                        return d
                    },
                    _setBlurValue: function() {
                        this._setValueAttr(this.get("value"), !0)
                    },
                    _onBlur: function(d) {
                        this.disabled || (this._setBlurValue(),
                        this.inherited(arguments))
                    },
                    _isTextSelected: function() {
                        return this.textbox.selectionStart != this.textbox.selectionEnd
                    },
                    _onFocus: function(d) {
                        this.disabled || this.readOnly || (this.selectOnClick && "mouse" == d && (this._selectOnClickHandle = k.once(this.domNode, "mouseup, touchend", l.hitch(this, function(a) {
                            this._isTextSelected() || f.selectInputText(this.textbox)
                        })),
                        this.own(this._selectOnClickHandle),
                        this.defer(function() {
                            this._selectOnClickHandle && (this._selectOnClickHandle.remove(),
                            this._selectOnClickHandle = null)
                        }, 500)),
                        this.inherited(arguments),
                        this._refreshState())
                    },
                    reset: function() {
                        this.textbox.value = "";
                        this.inherited(arguments)
                    }
                });
                w("dojo-bidi") && (f = y("dijit.form._TextBoxMixin", f, {
                    _setValueAttr: function() {
                        this.inherited(arguments);
                        this.applyTextDir(this.focusNode)
                    },
                    _setDisplayedValueAttr: function() {
                        this.inherited(arguments);
                        this.applyTextDir(this.focusNode)
                    },
                    _onInput: function() {
                        this.applyTextDir(this.focusNode);
                        this.inherited(arguments)
                    }
                }));
                f._setSelectionRange = h._setSelectionRange = function(d, a, c) {
                    d.setSelectionRange && d.setSelectionRange(a, c)
                }
                ;
                f.selectInputText = h.selectInputText = function(d, a, c) {
                    d = b.byId(d);
                    isNaN(a) && (a = 0);
                    isNaN(c) && (c = d.value ? d.value.length : 0);
                    try {
                        d.focus(),
                        f._setSelectionRange(d, a, c)
                    } catch (e) {}
                }
                ;
                return f
            })
        },
        "dijit/Tooltip": function() {
            define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x) {
                function v() {}
                var z = y("dijit._MasterTooltip", [n, t], {
                    duration: c.defaultDuration,
                    templateString: q,
                    postCreate: function() {
                        this.ownerDocumentBody.appendChild(this.domNode);
                        this.bgIframe = new g(this.domNode);
                        this.fadeIn = b.fadeIn({
                            node: this.domNode,
                            duration: this.duration,
                            onEnd: h.hitch(this, "_onShow")
                        });
                        this.fadeOut = b.fadeOut({
                            node: this.domNode,
                            duration: this.duration,
                            onEnd: h.hitch(this, "_onHide")
                        })
                    },
                    show: function(p, r, B, D, G, A, E) {
                        if (!this.aroundNode || this.aroundNode !== r || this.containerNode.innerHTML != p)
                            if ("playing" == this.fadeOut.status())
                                this._onDeck = arguments;
                            else {
                                this.containerNode.innerHTML = p;
                                G && this.set("textDir", G);
                                this.containerNode.align = D ? "right" : "left";
                                var H = e.around(this.domNode, r, B && B.length ? B : u.defaultPosition, !D, h.hitch(this, "orient"))
                                  , J = H.aroundNodePos;
                                "M" == H.corner.charAt(0) && "M" == H.aroundCorner.charAt(0) ? (this.connectorNode.style.top = J.y + (J.h - this.connectorNode.offsetHeight >> 1) - H.y + "px",
                                this.connectorNode.style.left = "") : "M" == H.corner.charAt(1) && "M" == H.aroundCorner.charAt(1) ? this.connectorNode.style.left = J.x + (J.w - this.connectorNode.offsetWidth >> 1) - H.x + "px" : (this.connectorNode.style.left = "",
                                this.connectorNode.style.top = "");
                                k.set(this.domNode, "opacity", 0);
                                this.fadeIn.play();
                                this.isShowingNow = !0;
                                this.aroundNode = r;
                                this.onMouseEnter = A || v;
                                this.onMouseLeave = E || v
                            }
                    },
                    orient: function(p, r, B, D, G) {
                        this.connectorNode.style.top = "";
                        var A = D.h;
                        D = D.w;
                        p.className = "dijitTooltip " + {
                            "MR-ML": "dijitTooltipRight",
                            "ML-MR": "dijitTooltipLeft",
                            "TM-BM": "dijitTooltipAbove",
                            "BM-TM": "dijitTooltipBelow",
                            "BL-TL": "dijitTooltipBelow dijitTooltipABLeft",
                            "TL-BL": "dijitTooltipAbove dijitTooltipABLeft",
                            "BR-TR": "dijitTooltipBelow dijitTooltipABRight",
                            "TR-BR": "dijitTooltipAbove dijitTooltipABRight",
                            "BR-BL": "dijitTooltipRight",
                            "BL-BR": "dijitTooltipLeft"
                        }[r + "-" + B];
                        this.domNode.style.width = "auto";
                        var E = l.position(this.domNode);
                        if (a("ie") || a("trident"))
                            E.w += 2;
                        l.setMarginBox(this.domNode, {
                            w: Math.min(Math.max(D, 1), E.w)
                        });
                        "B" == B.charAt(0) && "B" == r.charAt(0) ? (p = l.position(p),
                        r = this.connectorNode.offsetHeight,
                        p.h > A ? (this.connectorNode.style.top = A - (G.h + r >> 1) + "px",
                        this.connectorNode.style.bottom = "") : (this.connectorNode.style.bottom = Math.min(Math.max(G.h / 2 - r / 2, 0), p.h - r) + "px",
                        this.connectorNode.style.top = "")) : (this.connectorNode.style.top = "",
                        this.connectorNode.style.bottom = "");
                        return Math.max(0, E.w - D)
                    },
                    _onShow: function() {
                        a("ie") && (this.domNode.style.filter = "")
                    },
                    hide: function(p) {
                        this._onDeck && this._onDeck[1] == p ? this._onDeck = null : this.aroundNode === p && (this.fadeIn.stop(),
                        this.isShowingNow = !1,
                        this.aroundNode = null,
                        this.fadeOut.play());
                        this.onMouseEnter = this.onMouseLeave = v
                    },
                    _onHide: function() {
                        this.domNode.style.cssText = "";
                        this.containerNode.innerHTML = "";
                        this._onDeck && (this.show.apply(this, this._onDeck),
                        this._onDeck = null)
                    }
                });
                a("dojo-bidi") && z.extend({
                    _setAutoTextDir: function(p) {
                        this.applyTextDir(p);
                        C.forEach(p.children, function(r) {
                            this._setAutoTextDir(r)
                        }, this)
                    },
                    _setTextDirAttr: function(p) {
                        this._set("textDir", p);
                        "auto" == p ? this._setAutoTextDir(this.containerNode) : this.containerNode.dir = this.textDir
                    }
                });
                x.showTooltip = function(p, r, B, D, G, A, E) {
                    B && (B = C.map(B, function(H) {
                        return {
                            after: "after-centered",
                            before: "before-centered"
                        }[H] || H
                    }));
                    u._masterTT || (x._masterTT = u._masterTT = new z);
                    return u._masterTT.show(p, r, B, D, G, A, E)
                }
                ;
                x.hideTooltip = function(p) {
                    return u._masterTT && u._masterTT.hide(p)
                }
                ;
                var u = y("dijit.Tooltip", n, {
                    label: "",
                    showDelay: 400,
                    hideDelay: 400,
                    connectId: [],
                    position: [],
                    selector: "",
                    _setConnectIdAttr: function(p) {
                        C.forEach(this._connections || [], function(r) {
                            C.forEach(r, function(B) {
                                B.remove()
                            })
                        }, this);
                        this._connectIds = C.filter(h.isArrayLike(p) ? p : p ? [p] : [], function(r) {
                            return w.byId(r, this.ownerDocument)
                        }, this);
                        this._connections = C.map(this._connectIds, function(r) {
                            r = w.byId(r, this.ownerDocument);
                            var B = this.selector
                              , D = B ? function(A) {
                                return d.selector(B, A)
                            }
                            : function(A) {
                                return A
                            }
                              , G = this;
                            return [d(r, D(f.enter), function() {
                                G._onHover(this)
                            }), d(r, D("focusin"), function() {
                                G._onHover(this)
                            }), d(r, D(f.leave), h.hitch(G, "_onUnHover")), d(r, D("focusout"), h.hitch(G, "set", "state", "DORMANT"))]
                        }, this);
                        this._set("connectId", p)
                    },
                    addTarget: function(p) {
                        p = p.id || p;
                        -1 == C.indexOf(this._connectIds, p) && this.set("connectId", this._connectIds.concat(p))
                    },
                    removeTarget: function(p) {
                        p = C.indexOf(this._connectIds, p.id || p);
                        0 <= p && (this._connectIds.splice(p, 1),
                        this.set("connectId", this._connectIds))
                    },
                    buildRendering: function() {
                        this.inherited(arguments);
                        m.add(this.domNode, "dijitTooltipData")
                    },
                    startup: function() {
                        this.inherited(arguments);
                        var p = this.connectId;
                        C.forEach(h.isArrayLike(p) ? p : [p], this.addTarget, this)
                    },
                    getContent: function(p) {
                        return this.label || this.domNode.innerHTML
                    },
                    state: "DORMANT",
                    _setStateAttr: function(p) {
                        if (!(this.state == p || "SHOW TIMER" == p && "SHOWING" == this.state || "HIDE TIMER" == p && "DORMANT" == this.state)) {
                            this._hideTimer && (this._hideTimer.remove(),
                            delete this._hideTimer);
                            this._showTimer && (this._showTimer.remove(),
                            delete this._showTimer);
                            switch (p) {
                            case "DORMANT":
                                this._connectNode && (u.hide(this._connectNode),
                                delete this._connectNode,
                                this.onHide());
                                break;
                            case "SHOW TIMER":
                                "SHOWING" != this.state && (this._showTimer = this.defer(function() {
                                    this.set("state", "SHOWING")
                                }, this.showDelay));
                                break;
                            case "SHOWING":
                                var r = this.getContent(this._connectNode);
                                if (!r) {
                                    this.set("state", "DORMANT");
                                    return
                                }
                                u.show(r, this._connectNode, this.position, !this.isLeftToRight(), this.textDir, h.hitch(this, "set", "state", "SHOWING"), h.hitch(this, "set", "state", "HIDE TIMER"));
                                this.onShow(this._connectNode, this.position);
                                break;
                            case "HIDE TIMER":
                                this._hideTimer = this.defer(function() {
                                    this.set("state", "DORMANT")
                                }, this.hideDelay)
                            }
                            this._set("state", p)
                        }
                    },
                    _onHover: function(p) {
                        this._connectNode && p != this._connectNode && this.set("state", "DORMANT");
                        this._connectNode = p;
                        this.set("state", "SHOW TIMER")
                    },
                    _onUnHover: function(p) {
                        this.set("state", "HIDE TIMER")
                    },
                    open: function(p) {
                        this.set("state", "DORMANT");
                        this._connectNode = p;
                        this.set("state", "SHOWING")
                    },
                    close: function() {
                        this.set("state", "DORMANT")
                    },
                    onShow: function() {},
                    onHide: function() {},
                    destroy: function() {
                        this.set("state", "DORMANT");
                        C.forEach(this._connections || [], function(p) {
                            C.forEach(p, function(r) {
                                r.remove()
                            })
                        }, this);
                        this.inherited(arguments)
                    }
                });
                u._MasterTooltip = z;
                u.show = x.showTooltip;
                u.hide = x.hideTooltip;
                u.defaultPosition = ["after-centered", "before-centered"];
                return u
            })
        },
        "esri/OAuthSignInHandler": function() {
            define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n) {
                var t = null
                  , g = null;
                try {
                    t = window.localStorage,
                    g = window.sessionStorage
                } catch (q) {}
                return {
                    _oAuthDfd: null,
                    _oAuthIntervalId: 0,
                    _oAuthDialogContent: "\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
                    setOAuthRedirectionHandler: function(q) {
                        this._oAuthRedirectFunc = q
                    },
                    oAuthSignIn: function(q, x, v, z) {
                        var u = this._oAuthDfd = new h;
                        u.resUrl_ = q;
                        u.sinfo_ = x;
                        u.oinfo_ = v;
                        var p = !z || !1 !== z.oAuthPopupConfirmation;
                        if (!v.popup || !p)
                            return this._doOAuthSignIn(q, x, v),
                            u;
                        this._nls || (this._nls = a.identity);
                        this.oAuthDialog || (this.oAuthDialog = this._createOAuthDialog());
                        q = this.oAuthDialog;
                        v = z && z.error;
                        z = z && z.token;
                        y.hide(q.errMsg_);
                        v && 403 == v.code && z && (d.set(q.errMsg_, "innerHTML", this._nls.forbidden),
                        y.show(q.errMsg_));
                        d.set(q.serverLink_, {
                            title: x.server,
                            innerHTML: -1 !== x.server.toLowerCase().indexOf("arcgis.com") ? "ArcGIS Online" : x.server
                        });
                        q.show();
                        return u
                    },
                    setOAuthResponseHash: function(q) {
                        var x = this._oAuthDfd;
                        this._oAuthDfd = null;
                        if (x && q)
                            if (clearInterval(this._oAuthIntervalId),
                            "#" === q.charAt(0) && (q = q.substring(1)),
                            q = c.queryToObject(q),
                            q.error) {
                                var v = "access_denied" === q.error;
                                q = Error(v ? "ABORTED" : "OAuth: " + q.error + " - " + q.error_description);
                                q.name = v ? "identity-manager:user-aborted" : "identity-manager:authentication-failed";
                                q.code = "IdentityManagerBase." + (v ? 2 : 3);
                                q.log = !!k.isDebug;
                                x.errback(q)
                            } else {
                                v = x.oinfo_._oAuthCred;
                                var z = new C({
                                    userId: q.username,
                                    server: x.sinfo_.server,
                                    token: q.access_token,
                                    expires: (new Date).getTime() + 1E3 * Number(q.expires_in),
                                    ssl: "true" === q.ssl,
                                    _oAuthCred: v
                                });
                                v.storage = q.persist ? t : g;
                                v.token = z.token;
                                v.expires = z.expires;
                                v.userId = z.userId;
                                v.ssl = z.ssl;
                                v.save();
                                x.callback(z)
                            }
                    },
                    _createOAuthDialog: function() {
                        var q = this._nls
                          , x = b.substitute(q, this._oAuthDialogContent);
                        x = b.substitute({
                            server: "\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"
                        }, x);
                        var v = new m({
                            title: q.title,
                            content: x,
                            "class": "esriOAuthSignInDialog",
                            style: "min-width: 18em;",
                            esriIdMgr_: this,
                            execute_: function() {
                                var z = v.esriIdMgr_._oAuthDfd;
                                v.hide_();
                                v.esriIdMgr_._doOAuthSignIn(z.resUrl_, z.sinfo_, z.oinfo_)
                            },
                            cancel_: function() {
                                var z = v.esriIdMgr_._oAuthDfd;
                                v.esriIdMgr_._oAuthDfd = null;
                                v.hide_();
                                var u = Error("ABORTED");
                                u.code = "IdentityManager.2";
                                u.log = !!k.isDebug;
                                z.errback(u)
                            },
                            hide_: function() {
                                y.hide(v.errMsg_);
                                v.hide();
                                m._DialogLevelManager.hide(v)
                            }
                        });
                        q = v.domNode;
                        v.btnSubmit_ = l.byNode(f.query(".esriIdSubmit", q)[0]);
                        v.btnCancel_ = l.byNode(f.query(".esriIdCancel", q)[0]);
                        v.serverLink_ = f.query(".serverLink", q)[0];
                        v.errMsg_ = f.query(".esriErrorMsg", q)[0];
                        v.connect(v.btnSubmit_, "onClick", v.execute_);
                        v.connect(v.btnCancel_, "onClick", v.onCancel);
                        v.connect(v, "onCancel", v.cancel_);
                        return v
                    },
                    _doOAuthSignIn: function(q, x, v) {
                        var z = this
                          , u = {
                            portalUrl: v.portalUrl
                        };
                        !v.popup && v.preserveUrlHash && window.location.hash && (u.hash = window.location.hash);
                        u = {
                            client_id: v.appId,
                            response_type: "token",
                            state: n.stringify(u),
                            expiration: v.expiration,
                            locale: v.locale,
                            redirect_uri: v.popup ? w.getAbsoluteUrl(v.popupCallbackUrl) : window.location.href.replace(/#.*$/, "")
                        };
                        v.forceLogin && (u.force_login = !0);
                        !v.popup && this._doPortalSignIn(q) && (u.redirectToUserOrgUrl = !0);
                        var p = v.portalUrl.replace(/^http:/i, "https:") + "/sharing/oauth2/authorize"
                          , r = p + "?" + c.objectToQuery(u);
                        if (v.popup) {
                            if (7 === e("ie")) {
                                var B = window.open(v.popupCallbackUrl, "esriJSAPIOAuth", v.popupWindowFeatures);
                                B.location = r
                            } else
                                B = window.open(r, "esriJSAPIOAuth", v.popupWindowFeatures);
                            B ? (B.focus(),
                            this._oAuthDfd.oAuthWin_ = B,
                            this._oAuthIntervalId = setInterval(function() {
                                if (B.closed) {
                                    clearInterval(z._oAuthIntervalId);
                                    var D = z._oAuthDfd;
                                    if (D) {
                                        var G = Error("ABORTED");
                                        G.code = "IdentityManager.2";
                                        G.log = !!k.isDebug;
                                        D.errback(G)
                                    }
                                }
                            }, 500)) : (q = Error("ABORTED"),
                            q.name = "identity-manager:user-aborted",
                            q.code = "IdentityManager.2",
                            q.log = !!k.isDebug,
                            this._oAuthDfd.errback(q))
                        } else
                            this._rejectOnPersistedPageShow = !0,
                            this._oAuthRedirectFunc ? this._oAuthRedirectFunc({
                                authorizeParams: u,
                                authorizeUrl: p,
                                resourceUrl: q,
                                serverInfo: x,
                                oAuthInfo: v
                            }) : window.location = r
                    }
                }
            })
        },
        "esri/layers/graphics": function() {
            define(["./GraphicsLayer", "../graphic", "../renderer"], function() {
                return {}
            })
        },
        "esri/layers/agstiled": function() {
            define(["./agscommon", "./ArcGISTiledMapServiceLayer"], function() {
                return {}
            })
        },
        "esri/layers/agscommon": function() {
            define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "), function() {
                return {}
            })
        },
        "esri/layers/InheritedDomain": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "./Domain"], function(C, y, b, w, m) {
                C = C([m], {
                    declaredClass: "esri.layers.InheritedDomain"
                });
                b("extend-esri") && y.setObject("layers.InheritedDomain", C, w);
                return C
            })
        },
        "esri/layers/LayerSource": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function(C, y, b, w) {
                C = C(null, {
                    declaredClass: "esri.layers.LayerSource",
                    type: null,
                    constructor: function(m) {
                        m && y.mixin(this, m)
                    },
                    toJson: function() {}
                });
                b("extend-esri") && y.setObject("layers.LayerSource", C, w);
                return C
            })
        },
        "esri/layers/LayerMapSource": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "), function(C, y, b, w, m, l) {
                C = C(l, {
                    declaredClass: "esri.layers.LayerMapSource",
                    type: "mapLayer",
                    toJson: function() {
                        return m.fixJson({
                            type: "mapLayer",
                            mapLayerId: this.mapLayerId,
                            gdbVersion: this.gdbVersion
                        })
                    }
                });
                b("extend-esri") && y.setObject("layers.LayerMapSource", C, w);
                return C
            })
        },
        "esri/layers/LayerDataSource": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                C = C(l, {
                    declaredClass: "esri.layers.LayerDataSource",
                    type: "dataLayer",
                    constructor: function(a) {
                        if (a && a.dataSource) {
                            switch (a.dataSource.type) {
                            case "table":
                                a = new k(a.dataSource);
                                break;
                            case "queryTable":
                                a = new h(a.dataSource);
                                break;
                            case "joinTable":
                                a = new f(a.dataSource);
                                break;
                            case "raster":
                                a = new d(a.dataSource);
                                break;
                            default:
                                a = a.dataSource
                            }
                            this.dataSource = a
                        }
                    },
                    toJson: function() {
                        var a = {
                            type: "dataLayer",
                            dataSource: this.dataSource && this.dataSource.toJson()
                        };
                        return m.fixJson(a)
                    }
                });
                b("extend-esri") && y.setObject("layers.LayerDataSource", C, w);
                return C
            })
        },
        "esri/layers/TableDataSource": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "), function(C, y, b, w, m, l) {
                C = C(l, {
                    declaredClass: "esri.layers.TableDataSource",
                    toJson: function() {
                        return m.fixJson({
                            type: "table",
                            workspaceId: this.workspaceId,
                            dataSourceName: this.dataSourceName,
                            gdbVersion: this.gdbVersion
                        })
                    }
                });
                b("extend-esri") && y.setObject("layers.TableDataSource", C, w);
                return C
            })
        },
        "esri/layers/DataSource": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function(C, y, b, w) {
                C = C(null, {
                    declaredClass: "esri.layers.DataSource",
                    constructor: function(m) {
                        m && y.mixin(this, m)
                    },
                    toJson: function() {}
                });
                b("extend-esri") && y.setObject("layers.DataSource", C, w);
                return C
            })
        },
        "esri/layers/QueryDataSource": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "), function(C, y, b, w, m, l, k) {
                C = C(l, {
                    declaredClass: "esri.layers.QueryDataSource",
                    constructor: function(h) {
                        h && (h.oidFields && y.isString(h.oidFields) && (this.oidFields = h.oidFields.split(",")),
                        h.spatialReference && (this.spatialReference = new k(h.spatialReference)))
                    },
                    toJson: function() {
                        var h = {
                            type: "queryTable",
                            workspaceId: this.workspaceId,
                            query: this.query,
                            oidFields: this.oidFields && this.oidFields.join(),
                            spatialReference: this.spatialReference && this.spatialReference.toJson()
                        };
                        if (this.geometryType) {
                            var f = "point" === this.geometryType.toLowerCase() ? "esriGeometryPoint" : "multipoint" === this.geometryType.toLowerCase() ? "esriGeometryMultipoint" : "polyline" === this.geometryType.toLowerCase() ? "esriGeometryPolyline" : "polygon" === this.geometryType.toLowerCase() ? "esriGeometryPolygon" : this.geometryType;
                            h.geometryType = f
                        }
                        return m.fixJson(h)
                    }
                });
                b("extend-esri") && y.setObject("layers.QueryDataSource", C, w);
                return C
            })
        },
        "esri/layers/JoinDataSource": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                var a = C(l, {
                    declaredClass: "esri.layers.JoinDataSource",
                    constructor: function(c) {
                        c && (c.leftTableSource && (this.leftTableSource = this._createLayerSource(c.leftTableSource)),
                        c.rightTableSource && (this.rightTableSource = this._createLayerSource(c.rightTableSource)))
                    },
                    _createLayerSource: function(c) {
                        if ("mapLayer" === c.type)
                            var e = new k(c);
                        else {
                            e = {
                                type: "dataLayer"
                            };
                            switch (c.dataSource.type) {
                            case "table":
                                var n = new h(c.dataSource);
                                break;
                            case "queryTable":
                                n = new f(c.dataSource);
                                break;
                            case "joinTable":
                                n = new a(c.dataSource);
                                break;
                            case "raster":
                                n = new d(c.dataSource);
                                break;
                            default:
                                n = c.dataSource
                            }
                            e.dataSource = n;
                            e.toJson = function() {
                                var t = {
                                    type: "dataLayer",
                                    dataSource: n.toJson()
                                };
                                return m.fixJson(t)
                            }
                        }
                        return e
                    },
                    toJson: function() {
                        var c = {
                            type: "joinTable",
                            leftTableSource: this.leftTableSource && this.leftTableSource.toJson(),
                            rightTableSource: this.rightTableSource && this.rightTableSource.toJson(),
                            leftTableKey: this.leftTableKey,
                            rightTableKey: this.rightTableKey
                        };
                        var e = "left-outer-join" === this.joinType.toLowerCase() ? "esriLeftOuterJoin" : "left-inner-join" === this.joinType.toLowerCase() ? "esriLeftInnerJoin" : this.joinType;
                        c.joinType = e;
                        return m.fixJson(c)
                    }
                });
                b("extend-esri") && y.setObject("layers.JoinDataSource", a, w);
                return a
            })
        },
        "esri/layers/RasterDataSource": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "), function(C, y, b, w, m, l) {
                C = C(l, {
                    declaredClass: "esri.layers.RasterDataSource",
                    toJson: function() {
                        return m.fixJson({
                            type: "raster",
                            workspaceId: this.workspaceId,
                            dataSourceName: this.dataSourceName
                        })
                    }
                });
                b("extend-esri") && y.setObject("layers.RasterDataSource", C, w);
                return C
            })
        },
        "esri/layers/DynamicLayerInfo": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "), function(C, y, b, w, m, l, k, h) {
                C = C(l, {
                    declaredClass: "esri.layers.DynamicLayerInfo",
                    defaultVisibility: !0,
                    parentLayerId: -1,
                    maxScale: 0,
                    minScale: 0,
                    constructor: function(f) {
                        f && (f.source ? f = "mapLayer" === f.source.type ? new k(f.source) : new h(f.source) : (f = new k,
                        f.mapLayerId = this.id),
                        this.source = f)
                    },
                    toJson: function() {
                        var f = this.inherited(arguments);
                        f.source = this.source && this.source.toJson();
                        return m.fixJson(f)
                    }
                });
                b("extend-esri") && y.setObject("layers.DynamicLayerInfo", C, w);
                return C
            })
        },
        "esri/layers/LayerDrawingOptions": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "), function(C, y, b, w, m, l, k, h) {
                C = C(null, {
                    declaredClass: "esri.layers.LayerDrawingOptions",
                    constructor: function(f) {
                        if (f && (y.mixin(this, f),
                        f.renderer && (this.renderer = k.fromJson(f.renderer)),
                        f.labelingInfo && 0 < f.labelingInfo.length)) {
                            this.labelingInfo = [];
                            var d;
                            b.forEach(f.labelingInfo, function(a) {
                                d = new h(a);
                                this.labelingInfo.push(d)
                            }, this)
                        }
                    },
                    toJson: function() {
                        var f = {
                            renderer: this.renderer && this.renderer.toJson(),
                            transparency: this.transparency,
                            scaleSymbols: this.scaleSymbols,
                            showLabels: this.showLabels
                        };
                        this.labelingInfo && 0 < this.labelingInfo.length && (f.labelingInfo = [],
                        b.forEach(this.labelingInfo, function(d) {
                            f.labelingInfo.push(d.toJson())
                        }));
                        return l.fixJson(f)
                    }
                });
                w("extend-esri") && y.setObject("layers.LayerDrawingOptions", C, m);
                return C
            })
        },
        "esri/layers/LabelClass": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "), function(C, y, b, w, m, l, k, h) {
                var f = /__begin__/ig
                  , d = /__end__/ig
                  , a = /^__begin__/i
                  , c = /__end__$/i;
                C = C(null, {
                    declaredClass: "esri.layers.LabelClass",
                    labelPlacement: null,
                    labelExpression: null,
                    format: null,
                    fieldInfos: null,
                    useCodedValues: null,
                    symbol: null,
                    maxScale: 0,
                    minScale: 0,
                    where: null,
                    sizeInfo: null,
                    _labelPlacementLookup: {
                        "above-center": "esriServerPointLabelPlacementAboveCenter",
                        "above-left": "esriServerPointLabelPlacementAboveLeft",
                        "above-right": "esriServerPointLabelPlacementAboveRight",
                        "below-center": "esriServerPointLabelPlacementBelowCenter",
                        "below-left": "esriServerPointLabelPlacementBelowLeft",
                        "below-right": "esriServerPointLabelPlacementBelowRight",
                        "center-center": "esriServerPointLabelPlacementCenterCenter",
                        "center-left": "esriServerPointLabelPlacementCenterLeft",
                        "center-right": "esriServerPointLabelPlacementCenterRight",
                        "above-after": "esriServerLinePlacementAboveAfter",
                        "above-along": "esriServerLinePlacementAboveAlong",
                        "above-before": "esriServerLinePlacementAboveBefore",
                        "above-start": "esriServerLinePlacementAboveStart",
                        "above-end": "esriServerLinePlacementAboveEnd",
                        "below-after": "esriServerLinePlacementBelowAfter",
                        "below-along": "esriServerLinePlacementBelowAlong",
                        "below-before": "esriServerLinePlacementBelowBefore",
                        "below-start": "esriServerLinePlacementBelowStart",
                        "below-end": "esriServerLinePlacementBelowEnd",
                        "center-after": "esriServerLinePlacementCenterAfter",
                        "center-along": "esriServerLinePlacementCenterAlong",
                        "center-before": "esriServerLinePlacementCenterBefore",
                        "center-start": "esriServerLinePlacementCenterStart",
                        "center-end": "esriServerLinePlacementCenterEnd",
                        "always-horizontal": "esriServerPolygonPlacementAlwaysHorizontal"
                    },
                    constructor: function(e) {
                        e && (y.mixin(this, e),
                        this._labelPlacementLookup.hasOwnProperty(this.labelPlacement) || (this.labelPlacement = l.valueOf(this._labelPlacementLookup, e.labelPlacement)),
                        e.format && (this.format = e.format),
                        e.fieldInfos && (this.fieldInfos = e.fieldInfos),
                        e.symbol && (this.symbol = "esriSHD" === e.symbol.type ? new h(e.symbol) : new k(e.symbol)),
                        e = this.sizeInfo) && (e.minSize && (e.minSize = w.pt2px(e.minSize)),
                        e.maxSize && (e.maxSize = w.pt2px(e.maxSize)))
                    },
                    getSymbol: function() {
                        return this.symbol
                    },
                    toJson: function() {
                        var e = this.sizeInfo;
                        e && (e = y.mixin({}, e),
                        e.minSize && (e.minSize = w.px2pt(e.minSize)),
                        e.maxSize && (e.maxSize = w.px2pt(e.maxSize)));
                        var n = l.fixJson(this.labelExpressionInfo && y.clone(this.labelExpressionInfo));
                        this._processLabelExpressionInfo(n);
                        e = {
                            name: this.name,
                            labelExpression: this.labelExpression,
                            labelExpressionInfo: n,
                            format: this.format || void 0,
                            fieldInfos: this.fieldInfos || void 0,
                            useCodedValues: this.useCodedValues,
                            maxScale: this.maxScale,
                            minScale: this.minScale,
                            where: this.where,
                            sizeInfo: e || void 0,
                            labelPlacement: this._labelPlacementLookup.hasOwnProperty(this.labelPlacement) ? this._labelPlacementLookup[this.labelPlacement] : this.labelPlacement,
                            symbol: this.symbol && this.symbol.toJson()
                        };
                        return l.fixJson(e)
                    },
                    _processLabelExpressionInfo: function(e) {
                        e && e.value && (e.expression = this._convertTemplatedStringToArcade(e.value))
                    },
                    _convertTemplatedStringToArcade: function(e) {
                        if (e) {
                            var n = y.replace(e, function(t, g) {
                                return '__begin__$feature["' + g + '"]__end__'
                            });
                            n = a.test(n) ? n.replace(a, "") : '"' + n;
                            n = c.test(n) ? n.replace(c, "") : n + '"';
                            n = n.replace(f, '" + ').replace(d, ' + "')
                        }
                        return n
                    }
                });
                b("extend-esri") && y.setObject("layers.LabelClass", C, m);
                return C
            })
        },
        "esri/symbols/ShieldLabelSymbol": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "), function(C, y, b, w, m, l, k, h, f) {
                var d = {
                    url: "",
                    width: 12,
                    height: 12,
                    angle: 0,
                    xoffset: 0,
                    yoffset: 0
                };
                C = C(h, {
                    declaredClass: "esri.symbol.ShieldLabelSymbol",
                    type: "shieldlabelsymbol",
                    color: [255, 255, 255, 1],
                    width: 32,
                    height: 32,
                    font: w.defaultFont,
                    constructor: function(a, c, e, n, t) {
                        a ? y.isString(a) ? (this.url = a,
                        c && (this.color = c),
                        e && (this.width = e),
                        n && (this.height = n),
                        void 0 !== t && (this.font = t)) : (this.width = w.pt2px(a.width),
                        this.height = w.pt2px(a.height),
                        c = a.imageData,
                        9 > b("ie") || !c || (e = this.url,
                        this.url = "data:" + (a.contentType || "image") + ";base64," + c,
                        this.imageData = e)) : y.mixin(this, d)
                    },
                    getStroke: function() {
                        return null
                    },
                    getFill: function() {
                        return this.color
                    },
                    setWidth: function(a) {
                        this.width = a;
                        return this
                    },
                    setHeight: function(a) {
                        this.height = a;
                        return this
                    },
                    setUrl: function(a) {
                        a !== this.url && (delete this.imageData,
                        delete this.contentType);
                        this.url = a;
                        return this
                    },
                    setFont: function(a) {
                        this.font = a;
                        return this
                    },
                    setText: function(a) {
                        this.text = a;
                        return this
                    },
                    getWidth: function() {
                        return this.width
                    },
                    getHeight: function() {
                        return this.height
                    },
                    getShapeDescriptors: function() {
                        return {
                            defaultShape: {
                                type: "image",
                                x: -Math.round(this.width / 2),
                                y: -Math.round(this.height / 2),
                                width: this.width,
                                height: this.height,
                                src: this.url || ""
                            },
                            fill: null,
                            stroke: null
                        }
                    },
                    toJson: function() {
                        var a = this.url
                          , c = this.imageData;
                        if (0 === a.indexOf("data:")) {
                            var e = a;
                            a = c;
                            c = e.indexOf(";base64,") + 8;
                            c = e.substr(c)
                        }
                        a = k.getAbsoluteUrl(a);
                        e = w.px2pt(this.width);
                        e = isNaN(e) ? void 0 : e;
                        var n = w.px2pt(this.height);
                        n = isNaN(n) ? void 0 : n;
                        a = l.fixJson(y.mixin(this.inherited("toJson", arguments), {
                            type: "esriSHD",
                            url: a,
                            imageData: c,
                            contentType: this.contentType,
                            width: e,
                            height: n
                        }));
                        this.font ? (c = new f(this.font),
                        a.font = c.toJson()) : a.font = null;
                        delete a.size;
                        a.imageData || delete a.imageData;
                        return a
                    }
                });
                C.defaultProps = d;
                b("extend-esri") && (y.setObject("symbol.ShieldLabelSymbol", C, m),
                m.symbol.defaultShieldLabelSymbol = d);
                return C
            })
        },
        "esri/layers/agsdynamic": function() {
            define(["./agscommon", "./ArcGISDynamicMapServiceLayer", "../_time"], function() {
                return {}
            })
        },
        "esri/layers/ArcGISDynamicMapServiceLayer": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z) {
                C = C([n, t], {
                    declaredClass: "esri.layers.ArcGISDynamicMapServiceLayer",
                    _eventMap: {
                        "visible-layers-change": ["visibleLayers"]
                    },
                    constructor: function(u, p, r) {
                        u = p && p.imageParameters;
                        var B = y.hitch;
                        if (u) {
                            var D = u.layerDefinitions;
                            D && this.setLayerDefinitions(D);
                            u.layerOption === x.LAYER_OPTION_SHOW && (this.visibleLayers = [].concat(u.layerIds),
                            this.onVisibleLayersChange(this.visibleLayers))
                        }
                        this._setIsPNG32 = B(this, this._setIsPNG32);
                        this.dpi = u && u.dpi || 96;
                        this.imageFormat = u && u.format || "png8";
                        this.imageTransparency = u && !1 === u.transparent ? !1 : !0;
                        this._setIsPNG32();
                        this.gdbVersion = p && p.gdbVersion;
                        this._params.gdbVersion = this.gdbVersion;
                        D = u && u.layerDefinitions;
                        y.mixin(this._params, this._url.query, {
                            dpi: this.dpi,
                            transparent: this.imageTransparency,
                            format: this.imageFormat
                        }, u ? u.toJson() : {});
                        D && (this._params.layerDefs = D);
                        this.getImageUrl = B(this, this.getImageUrl);
                        this._initLayer = B(this, this._initLayer);
                        this._load = B(this, this._load);
                        this.useMapImage = p ? p.useMapImage : !1;
                        this._loadCallback = p && p.loadCallback;
                        (p = p && p.resourceInfo) ? this._initLayer(p) : (void 0 === r || !1 === r) && this._load();
                        this.registerConnectEvents()
                    },
                    disableClientCaching: !1,
                    layerDefinitions: null,
                    _initLayer: function(u, p) {
                        this.inherited(arguments);
                        u.timeInfo && (this.timeInfo = new g(u.timeInfo));
                        this.loaded = !0;
                        this.onLoad(this);
                        var r = this._loadCallback;
                        r && (delete this._loadCallback,
                        r(this))
                    },
                    getImageUrl: function(u, p, r, B) {
                        var D = this._url.path + "/export"
                          , G = this._params
                          , A = G.token = this._getToken()
                          , E = u.spatialReference.wkid || w.toJson(u.spatialReference.toJson())
                          , H = this._errorHandler;
                        delete G._ts;
                        y.mixin(G, {
                            bbox: u.xmin + "," + u.ymin + "," + u.xmax + "," + u.ymax,
                            bboxSR: E,
                            imageSR: E,
                            size: p + "," + r
                        }, this.disableClientCaching ? {
                            _ts: (new Date).getTime()
                        } : {});
                        G.layerDefs && (u = c._serializeLayerDefinitions(G.layerDefs, 10.5 <= this.version),
                        G = y.mixin({}, G),
                        delete G.layerDefs,
                        G.layerDefs = u);
                        u = a.addProxy(a.normalize(D) + "?" + l.objectToQuery(y.mixin({}, G, {
                            f: "image"
                        })));
                        u.length > h.defaults.io.postLength || this.useMapImage ? this._jsonRequest = d({
                            url: D,
                            content: y.mixin(G, {
                                f: "json"
                            }),
                            callbackParamName: "callback",
                            load: function(J) {
                                J.imageData ? J = "data:" + (J.contentType || "image") + ";base64," + J.imageData : (J = J.href,
                                A && (J += -1 === J.indexOf("?") ? "?token\x3d" + A : "\x26token\x3d" + A),
                                J = a.addProxy(J));
                                B(J)
                            },
                            error: H
                        }) : B(u)
                    },
                    _setIsPNG32: function() {
                        var u = this.imageFormat.toLowerCase()
                          , p = m("ie");
                        this.isPNG32 = p && 6 === p && ("png32" === u || "png24" === u) && this.imageTransparency
                    },
                    _setTime: function(u) {
                        var p = this.timeInfo;
                        u = this._params.time = u ? u.toJson().join(",") : null;
                        if (10.02 > this.version && p)
                            if (u)
                                this._params.layerTimeOptions = c._serializeTimeOptions(this.layerTimeOptions);
                            else {
                                var r = this.layerInfos;
                                if (r) {
                                    var B = this.layerTimeOptions
                                      , D = B ? B.slice(0) : []
                                      , G = [];
                                    b.forEach(r, function(A) {
                                        A.subLayerIds || G.push(A.id)
                                    });
                                    G.length && (b.forEach(G, function(A) {
                                        if (!D[A]) {
                                            var E = new q;
                                            E.useTime = !1;
                                            D[A] = E
                                        }
                                    }),
                                    this._params.layerTimeOptions = c._serializeTimeOptions(D, G))
                                }
                            }
                        10.02 <= this.version && p && !u && !p.hasLiveData && (this._params.time = "null,null")
                    },
                    setDPI: function(u, p) {
                        this.dpi = this._params.dpi = u;
                        p || this.refresh(!0)
                    },
                    setImageFormat: function(u, p) {
                        this.imageFormat = this._params.format = u;
                        this._setIsPNG32();
                        p || this.refresh(!0)
                    },
                    setImageTransparency: function(u, p) {
                        this.imageTransparency = this._params.transparent = u;
                        this._setIsPNG32();
                        p || this.refresh(!0)
                    },
                    setVisibleLayers: function(u, p) {
                        this.visibleLayers = u;
                        this._params.layers = x.LAYER_OPTION_SHOW + ":" + (u.length ? u.join() : "-1");
                        this._updateDynamicLayers();
                        p || this.refresh(!0);
                        this.onVisibleLayersChange(this.visibleLayers)
                    },
                    onVisibleLayersChange: function() {},
                    setDefaultVisibleLayers: function(u) {
                        this.visibleLayers = this._defaultVisibleLayers;
                        this._params.layers = null;
                        this._updateDynamicLayers();
                        u || this.refresh(!0);
                        this.onVisibleLayersChange(this.visibleLayers)
                    },
                    setLayerDefinitions: function(u, p) {
                        this.layerDefinitions = u;
                        this._params.layerDefs = u;
                        this._updateDynamicLayers();
                        p || this.refresh(!0)
                    },
                    setDefaultLayerDefinitions: function(u) {
                        this.layerDefinitions = this._params.layerDefs = null;
                        this._updateDynamicLayers();
                        u || this.refresh(!0)
                    },
                    setDisableClientCaching: function(u) {
                        this.disableClientCaching = u
                    },
                    setLayerTimeOptions: function(u, p) {
                        this.layerTimeOptions = u;
                        this._params.layerTimeOptions = c._serializeTimeOptions(u);
                        this._updateDynamicLayers();
                        p || this.refresh(!0)
                    },
                    refresh: function(u) {
                        if (!0 === u)
                            this.inherited(arguments);
                        else {
                            var p = this.disableClientCaching;
                            this.disableClientCaching = !0;
                            this.inherited(arguments);
                            this.disableClientCaching = p
                        }
                    },
                    setLayerDrawingOptions: function(u, p) {
                        this.layerDrawingOptions = u;
                        this._updateDynamicLayers();
                        p || this.refresh(!0)
                    },
                    setDynamicLayerInfos: function(u, p) {
                        u && 0 < u.length ? (this.dynamicLayerInfos = u,
                        this.visibleLayers = c._getDefaultVisibleLayers(u),
                        this.onVisibleLayersChange(this.visibleLayers)) : this.dynamicLayerInfos = this.layerDrawingOptions = null;
                        this._updateDynamicLayers();
                        p || this.refresh(!0)
                    },
                    createDynamicLayerInfosFromLayerInfos: function() {
                        var u = [], p;
                        b.forEach(this.layerInfos, function(r) {
                            p = new v(r.toJson());
                            p.source = new z({
                                mapLayerId: r.id
                            });
                            u.push(p)
                        });
                        return u
                    },
                    _onDynamicLayersChange: function() {},
                    _updateDynamicLayers: function() {
                        if (this.dynamicLayerInfos && 0 < this.dynamicLayerInfos.length || this.layerDrawingOptions && 0 < this.layerDrawingOptions.length) {
                            this.dynamicLayerInfos && 0 !== this.dynamicLayerInfos.length || (this.dynamicLayerInfos = this.createDynamicLayerInfosFromLayerInfos());
                            var u = this._map && e.getScale(this._map);
                            u = this._getDynLayerObjs(u);
                            u = w.toJson(u);
                            this._params.dynamicLayers && this._params.dynamicLayers.length === u.length && this._params.dynamicLayers === u || (this._params.dynamicLayers = u,
                            this._onDynamicLayersChange(this._params.dynamicLayers))
                        } else
                            this._params.dynamicLayers ? (this._params.dynamicLayers = null,
                            this._onDynamicLayersChange(null)) : this._params.dynamicLayers = null
                    },
                    _getDynLayerObjs: function(u) {
                        var p = this.dynamicLayerInfos
                          , r = []
                          , B = this.visibleLayers
                          , D = u ? c._getLayersForScale(u, p) : B;
                        b.forEach(p, function(G) {
                            if (!G.subLayerIds) {
                                var A = G.id;
                                if (-1 !== b.indexOf(B, A) && -1 !== b.indexOf(D, A)) {
                                    var E = {
                                        id: A,
                                        name: G.name
                                    };
                                    E.source = G.source && G.source.toJson();
                                    var H;
                                    this.layerDefinitions && this.layerDefinitions[A] && (H = this.layerDefinitions[A]);
                                    H && (E.definitionExpression = H);
                                    var J;
                                    this.layerDrawingOptions && this.layerDrawingOptions[A] && (J = this.layerDrawingOptions[A]);
                                    J && (H = J.toJson(),
                                    this._fixMarkerColor(H.renderer),
                                    E.drawingInfo = H);
                                    var O;
                                    this.layerTimeOptions && this.layerTimeOptions[A] && (O = this.layerTimeOptions[A]);
                                    O && (E.layerTimeOptions = O.toJson());
                                    E.minScale = G.minScale || 0;
                                    E.maxScale = G.maxScale || 0;
                                    r.push(E)
                                }
                            }
                        }, this);
                        return r
                    },
                    _fixMarkerColor: function(u) {
                        b.forEach(this._getAllSimpleMarkerSymbols(u), function(p) {
                            if (!p.color) {
                                var r = [0, 0, 0, 0]
                                  , B = p.outline && p.outline.color;
                                "esriSMSX" !== p.style && "esriSMSCross" !== p.style || !B || (r = B.slice(0));
                                p.color = r
                            }
                        })
                    },
                    _getAllSimpleMarkerSymbols: function(u) {
                        return b.filter(this._getAllSymbols(u), function(p) {
                            return "esriSMS" === p.type
                        })
                    },
                    _getAllSymbols: function(u) {
                        var p = [];
                        u && (p.push(u.symbol),
                        p.push(u.defaultSymbol),
                        b.forEach(u.uniqueValueInfos || u.classBreakInfos, function(r) {
                            p.push(r.symbol)
                        }),
                        p = b.filter(p, f.isDefined));
                        return p
                    },
                    _onExtentChangeHandler: function(u, p, r) {
                        r && this._updateDynamicLayers();
                        this.inherited(arguments)
                    },
                    _setMap: function(u, p, r) {
                        this._map = u;
                        this._updateDynamicLayers();
                        return this.inherited(arguments)
                    },
                    onGDBVersionChange: function() {},
                    setGDBVersion: function(u, p) {
                        this.gdbVersion = u;
                        this._params.gdbVersion = u;
                        this.onGDBVersionChange();
                        p || this.refresh(!0)
                    },
                    exportMapImage: function(u, p) {
                        var r = y.hitch(this, function() {
                            var B = h.defaults.map
                              , D = u && u.layerDefinitions;
                            u = u ? u.toJson(this.normalization) : {};
                            D && (u.layerDefs = D);
                            u = y.mixin({
                                size: B.width + "," + B.height
                            }, this._params, u, {
                                f: "json"
                            });
                            delete u._ts;
                            u.layerDefs && (B = c._serializeLayerDefinitions(u.layerDefs, 10.5 <= this.version),
                            delete u.layerDefs,
                            u.layerDefs = B);
                            this._exportMapImage(this._url.path + "/export", u, p)
                        });
                        if (this.loaded)
                            r();
                        else
                            this.on("load", r)
                    }
                });
                m("extend-esri") && y.setObject("layers.ArcGISDynamicMapServiceLayer", C, k);
                return C
            })
        },
        "esri/layers/DynamicMapServiceLayer": function() {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                var n = h.defaults.map.zoomDuration;
                C = C(c, {
                    declaredClass: "esri.layers.DynamicMapServiceLayer",
                    _eventMap: {
                        "map-image-export": ["mapImage"]
                    },
                    constructor: function(t, g) {
                        this.useMapTime = g && g.hasOwnProperty("useMapTime") ? !!g.useMapTime : !0;
                        this.extentProcessor = g && g.extentProcessor;
                        t = b.hitch;
                        this._exportMapImageHandler = t(this, this._exportMapImageHandler);
                        this._imgSrcFunc = t(this, this._imgSrcFunc);
                        this._divAlphaImageFunc = t(this, this._divAlphaImageFunc);
                        this._tileLoadHandler = t(this, this._tileLoadHandler);
                        this._tileErrorHandler = t(this, this._tileErrorHandler);
                        this.registerConnectEvents()
                    },
                    opacity: 1,
                    isPNG32: !1,
                    _setMap: function(t, g, q) {
                        this.inherited(arguments);
                        this._map = t;
                        var x = this._div = w.create("div", null, g)
                          , v = k._css.names
                          , z = {
                            position: "absolute",
                            width: t.width + "px",
                            height: t.height + "px",
                            overflow: "visible",
                            opacity: this.opacity
                        }
                          , u = f("ie")
                          , p = y.connect
                          , r = t.__visibleDelta;
                        8 === u && delete z.opacity;
                        "css-transforms" === t.navigationMode ? (this._isChildLayer || (z[v.transform] = k._css.translate(r.x, r.y),
                        m.set(x, z)),
                        this._left = r.x,
                        this._top = r.y) : (z.left = "0px",
                        z.top = "0px",
                        m.set(x, z),
                        this._left = this._top = 0);
                        m.set(x, z);
                        this._onResizeHandler_connect = p(t, "onResize", this, "_onResizeHandler");
                        this._opacityChangeHandler_connect = p(this, "onOpacityChange", this, "_opacityChangeHandler");
                        this._img_loading = null;
                        this._dragOrigin = {
                            x: 0,
                            y: 0
                        };
                        this.evaluateSuspension();
                        if (this.suspended && !t.loaded)
                            var B = y.connect(t, "onLoad", this, function() {
                                y.disconnect(B);
                                B = null;
                                this.evaluateSuspension()
                            });
                        this.extentProcessor && (this._panEndEvalHandle = y.connect(t, "onPanEnd", this, this.evaluateSuspension),
                        this._zoomEndEvalHandle = y.connect(t, "onZoomEnd", this, this.evaluateSuspension));
                        return x
                    },
                    _unsetMap: function(t, g) {
                        this._img && this._clearEventListeners(this._img);
                        this._img_loading && this._clearEventListeners(this._img_loading);
                        w.destroy(this._div);
                        this._map = this._div = this._img = this._img_loading = null;
                        var q = y.disconnect;
                        q(this._onResizeHandler_connect);
                        q(this._opacityChangeHandler_connect);
                        q(this._panEndEvalHandle);
                        q(this._zoomEndEvalHandle);
                        this._panEndEvalHandle = this._zoomEndEvalHandle = this._onResizeHandler_connect = this._opacityChangeHandler_connect = null;
                        this._fireUpdateEnd();
                        this._toggleTime();
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        this._disableDrawConnectors();
                        this.inherited(arguments)
                    },
                    _onResizeHandler: function(t, g, q) {
                        m.set(this._div, {
                            width: g + "px",
                            height: q + "px"
                        });
                        this._onExtentChangeHandler(t)
                    },
                    onSuspend: function() {
                        this.inherited(arguments);
                        this._fireUpdateEnd();
                        this._toggleTime();
                        a.hide(this._div);
                        clearTimeout(this._wakeTimer);
                        this._wakeTimer = null;
                        this._disableDrawConnectors()
                    },
                    onResume: function() {
                        this.inherited(arguments);
                        var t = this._map;
                        this._toggleTime();
                        "css-transforms" === t.navigationMode && (t = t.__visibleDelta,
                        this._left = t.x,
                        this._top = t.y,
                        this._isChildLayer || m.set(this._div, k._css.names.transform, k._css.translate(this._left, this._top)));
                        this._enableDrawConnectors();
                        this._wakeTimer = this._wakeTimer || setTimeout(b.hitch(this, function() {
                            this.suspended || this._onExtentChangeHandler(this._map.extent, null, !0)
                        }), 0)
                    },
                    canResume: function() {
                        var t = this.inherited(arguments);
                        if (t) {
                            var g = this._map.extent;
                            this.extentProcessor && g && (t = !!this.extentProcessor({
                                layer: this,
                                extent: g,
                                width: this._map.width
                            }).extent)
                        }
                        return t
                    },
                    _enableDrawConnectors: function() {
                        var t = y.connect
                          , g = this._map;
                        g && (this._onPanHandler_connect = t(g, "onPan", this, "_onPanHandler"),
                        this._onExtentChangeHandler_connect = t(g, "onExtentChange", this, "_onExtentChangeHandler"),
                        "css-transforms" === g.navigationMode ? this._onScaleHandler_connect = t(g, "onScale", this, this._onScaleHandler) : this._onZoomHandler_connect = t(g, "onZoom", this, "_onZoomHandler"))
                    },
                    _disableDrawConnectors: function() {
                        var t = y.disconnect;
                        t(this._onPanHandler_connect);
                        t(this._onExtentChangeHandler_connect);
                        t(this._onZoomHandler_connect);
                        t(this._onScaleHandler_connect);
                        this._onPanHandler_connect = this._onExtentChangeHandler_connect = this._onZoomHandler_connect = this._onScaleHandler_connect = null
                    },
                    _toggleTime: function() {
                        var t = this._map;
                        this.timeInfo && this.useMapTime && t && !this.suspended ? (this._timeConnect || (this._timeConnect = y.connect(t, "onTimeExtentChange", this, this._onTimeExtentChangeHandler)),
                        this._setTime(t.timeExtent)) : (y.disconnect(this._timeConnect),
                        this._timeConnect = null,
                        this._setTime(null))
                    },
                    _setTime: function(t) {
                        this._params && (this._params.time = t ? t.toJson().join(",") : null)
                    },
                    _onPanHandler: function(t, g) {
                        this._panDx = g.x;
                        this._panDy = g.y;
                        t = this._dragOrigin;
                        var q = this._map.__visibleDelta
                          , x = this._img;
                        x && ("css-transforms" === this._map.navigationMode ? (this._left = q.x + g.x,
                        this._top = q.y + g.y,
                        this._isChildLayer || m.set(this._div, k._css.names.transform, k._css.translate(this._left, this._top))) : m.set(x, {
                            left: t.x + g.x + "px",
                            top: t.y + g.y + "px"
                        }))
                    },
                    _onExtentChangeHandler: function(t, g, q) {
                        if (!this.suspended) {
                            clearTimeout(this._wakeTimer);
                            this._wakeTimer = null;
                            var x = this._map
                              , v = this._img
                              , z = v && v.style
                              , u = this._dragOrigin;
                            !g || q || !v || g.x === this._panDx && g.y === this._panDy || ("css-transforms" === x.navigationMode ? (g = x.__visibleDelta,
                            this._left = g.x,
                            this._top = g.y,
                            this._isChildLayer || m.set(this._div, k._css.names.transform, k._css.translate(this._left, this._top))) : m.set(v, {
                                left: u.x + g.x + "px",
                                top: u.y + g.y + "px"
                            }));
                            v ? (u.x = parseInt(z.left, 10),
                            u.y = parseInt(z.top, 10)) : u.x = u.y = 0;
                            "css-transforms" === x.navigationMode && q && v && (m.set(v, k._css.names.transition, "none"),
                            v._multiply = v._multiply ? l.multiply(v._matrix, v._multiply) : v._matrix);
                            this._fireUpdateStart();
                            if (q = this._img_loading)
                                if (this._clearEventListeners(q),
                                w.destroy(q),
                                this._img_loading = null,
                                q = this._jsonRequest) {
                                    try {
                                        q.cancel()
                                    } catch (E) {}
                                    this._jsonRequest = null
                                }
                            var p = x.width;
                            q = x.height;
                            g = p;
                            var r = 0;
                            10 <= this.version && x.wrapAround180 && (t = t._normalize(!0));
                            this.extentProcessor && (r = this.extentProcessor({
                                layer: this,
                                extent: t,
                                width: g
                            }),
                            t = r.extent,
                            g = r.width,
                            r = r.marginLeft || 0);
                            if (this.isPNG32)
                                v = this._img_loading = w.create("div"),
                                v.id = x.id + "_" + this.id + "_" + (new Date).getTime(),
                                m.set(v, {
                                    position: "absolute",
                                    left: "0px",
                                    top: "0px",
                                    width: g + "px",
                                    height: q + "px"
                                }),
                                x = v.appendChild(w.create("div")),
                                m.set(x, {
                                    opacity: 0,
                                    width: g + "px",
                                    height: q + "px"
                                }),
                                this.getImageUrl(t, g, q, this._divAlphaImageFunc),
                                v = null;
                            else {
                                var B = this._img_loading = w.create("img")
                                  , D = k._css.names
                                  , G = f("ie")
                                  , A = {
                                    position: "absolute",
                                    width: g + "px",
                                    height: q + "px"
                                };
                                B.setAttribute("decoding", "sync");
                                8 === G && (A.opacity = this.opacity);
                                null != r && 0 !== r && (A.marginLeft = r + "px");
                                "css-transforms" === x.navigationMode ? (A[D.transform] = k._css.translate(-this._left, -this._top),
                                B._tdx = -this._left,
                                B._tdy = -this._top,
                                A[D.transition] = D.transformName + " " + n + "ms ease",
                                this.extentProcessor && (A[D.origin] = p / 2 - r + "px " + q / 2 + "px")) : (A.left = "0px",
                                A.top = "0px");
                                B.id = x.id + "_" + this.id + "_" + (new Date).getTime();
                                m.set(B, A);
                                B._onload_connect = y.connect(B, "onload", this, "_onLoadHandler");
                                B._onerror_connect = y.connect(B, "onerror", this, "_onErrorHandler");
                                B._onabort_connect = y.connect(B, "onabort", this, "_onErrorHandler");
                                this._startRect = {
                                    left: u.x,
                                    top: u.y,
                                    width: v ? parseInt(z.width, 10) : g,
                                    height: v ? parseInt(z.height, 10) : q,
                                    marginLeft: v ? parseInt(z.marginLeft || "0", 10) : r,
                                    zoom: z && z.zoom ? parseFloat(z.zoom) : 1
                                };
                                this.getImageUrl(t, g, q, this._imgSrcFunc);
                                B = null
                            }
                        }
                    },
                    _onTimeExtentChangeHandler: function(t) {
                        this.suspended || (this._setTime(t),
                        this.refresh(!0))
                    },
                    getImageUrl: function(t, g, q, x) {},
                    _imgSrcFunc: function(t) {
                        this._img_loading.src = t
                    },
                    _divAlphaImageFunc: function(t) {
                        m.set(this._img_loading, "filter", "progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'" + t + "', sizingMethod\x3d'scale')");
                        this._onLoadHandler({
                            currentTarget: this._img_loading
                        })
                    },
                    _onLoadHandler: function(t) {
                        t = t.currentTarget;
                        var g = this._map;
                        this._clearEventListeners(t);
                        !g || g.__panning || g.__zooming ? w.destroy(t) : (this._img && this._div.removeChild(this._img),
                        this._img = t,
                        g = t.style,
                        this._startRect = {
                            left: 0,
                            top: 0,
                            width: parseInt(g.width, 10),
                            height: parseInt(g.height, 10),
                            marginLeft: parseInt(g.marginLeft || "0", 10),
                            zoom: 1
                        },
                        this._div.appendChild(t),
                        this.suspended || a.show(this._div),
                        this._img_loading = null,
                        t = this._dragOrigin,
                        t.x = t.y = 0,
                        this.onUpdate());
                        this._fireUpdateEnd()
                    },
                    _onErrorHandler: function(t) {
                        t = t.currentTarget;
                        m.set(t, "visibility", "hidden");
                        this._clearEventListeners(t);
                        t = Error("Unable to load image: " + t.src);
                        this.onError(t);
                        this._fireUpdateEnd(t)
                    },
                    _clearEventListeners: function(t) {
                        y.disconnect(t._onload_connect);
                        y.disconnect(t._onerror_connect);
                        y.disconnect(t._onabort_connect);
                        t._onload_connect = t._onerror_connect = t._onabort_connect = null
                    },
                    setUseMapTime: function(t, g) {
                        this.useMapTime = t;
                        this._toggleTime();
                        g || this.refresh(!0)
                    },
                    refresh: function() {
                        this._map && this._onExtentChangeHandler(this._map.extent)
                    },
                    _onScaleHandler: function(t, g) {
                        var q = {}
                          , x = k._css.names
                          , v = this._img;
                        if (v) {
                            m.set(v, x.transition, g ? "none" : x.transformName + " " + n + "ms ease");
                            v._matrix = t;
                            t = v._multiply ? l.multiply(t, v._multiply) : t;
                            if (v._tdx || v._tdy)
                                t = l.multiply(t, {
                                    xx: 1,
                                    xy: 0,
                                    yx: 0,
                                    yy: 1,
                                    dx: v._tdx,
                                    dy: v._tdy
                                });
                            q[x.transform] = k._css.matrix(t);
                            m.set(v, q)
                        }
                    },
                    _onZoomHandler: function(t, g, q) {
                        t = this._startRect;
                        var x = t.width * g
                          , v = t.height * g
                          , z = t.marginLeft * g
                          , u = this._img
                          , p = f("ie");
                        u && (p && 8 > p ? m.set(u, {
                            left: t.left - (x - t.width) * (q.x - t.left) / t.width + "px",
                            top: t.top - (v - t.height) * (q.y - t.top) / t.height + "px",
                            zoom: g * t.zoom
                        }) : m.set(u, {
                            left: t.left - (x - t.width) * (q.x - t.left) / t.width + "px",
                            top: t.top - (v - t.height) * (q.y - t.top) / t.height + "px",
                            width: x + "px",
                            height: v + "px"
                        }),
                        null != z && 0 !== z && m.set(u, {
                            marginLeft: z + "px"
                        }))
                    },
                    _exportMapImage: function(t, g, q) {
                        var x = this._exportMapImageHandler;
                        g.token = this._getToken();
                        d({
                            url: t,
                            content: g,
                            callbackParamName: "callback",
                            load: function(v, z) {
                                x(v, z, q)
                            },
                            error: h.defaults.io.errorHandler
                        })
                    },
                    _exportMapImageHandler: function(t, g, q) {
                        t = new e(t);
                        this.onMapImageExport(t);
                        q && q(t)
                    },
                    onMapImageExport: function() {},
                    setOpacity: function(t) {
                        if (this.opacity != t)
                            this.onOpacityChange(this.opacity = t)
                    },
                    onOpacityChange: function() {},
                    _opacityChangeHandler: function(t) {
                        var g = 8 === f("ie") ? this._img : this._div;
                        m.set(g, "opacity", t)
                    }
                });
                f("extend-esri") && b.setObject("layers.DynamicMapServiceLayer", C, k);
                return C
            })
        },
        "esri/layers/MapImage": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "), function(C, y, b, w, m, l, k) {
                C = C(null, {
                    declaredClass: "esri.layers.MapImage",
                    constructor: function(h) {
                        y.mixin(this, h);
                        this.extent = new k(this.extent)
                    },
                    visible: !0,
                    opacity: 1,
                    getLayer: function() {
                        return this._layer
                    },
                    getNode: function() {
                        return this._node
                    },
                    show: function() {
                        if (!this.visible) {
                            this.visible = !0;
                            var h = this._node, f = this._layer, d;
                            if (h) {
                                if (d = f && f._div)
                                    f.suspended || f._setPos(h, d._left, d._top),
                                    (f._active || d).appendChild(h);
                                l.show(h)
                            }
                        }
                    },
                    hide: function() {
                        if (this.visible) {
                            this.visible = !1;
                            var h = this._node;
                            h && (l.hide(h),
                            h.parentNode && h.parentNode.removeChild(h))
                        }
                    },
                    setOpacity: function(h) {
                        var f = this._node;
                        this.opacity = h;
                        f && b.set(f, "opacity", h)
                    }
                });
                w("extend-esri") && y.setObject("layers.MapImage", C, m);
                return C
            })
        },
        "esri/layers/ImageParameters": function() {
            define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "), function(C, y, b, w, m, l, k, h) {
                y = y(null, {
                    declaredClass: "esri.layers.ImageParameters",
                    constructor: function() {
                        this.layerDefinitions = []
                    },
                    bbox: null,
                    extent: null,
                    width: null,
                    height: null,
                    dpi: null,
                    format: null,
                    imageSpatialReference: null,
                    layerOption: null,
                    layerIds: null,
                    transparent: null,
                    timeExtent: null,
                    layerTimeOptions: null,
                    toJson: function(f) {
                        this.bbox && C.deprecated(this.declaredClass + " : Property 'bbox' deprecated. Use property 'extent'.");
                        var d = this.bbox || this.extent;
                        d = d && f && d._normalize(!0);
                        f = this.layerOption;
                        var a = d ? d.spatialReference.wkid || w.toJson(d.spatialReference.toJson()) : null
                          , c = this.imageSpatialReference;
                        d = {
                            dpi: this.dpi,
                            format: this.format,
                            transparent: this.transparent,
                            size: null !== this.width && null !== this.height ? this.width + "," + this.height : null,
                            bbox: d ? d.xmin + "," + d.ymin + "," + d.xmax + "," + d.ymax : null,
                            bboxSR: a,
                            layers: f ? f + ":" + this.layerIds.join(",") : null,
                            imageSR: c ? c.wkid || w.toJson(c.toJson()) : a
                        };
                        d.layerDefs = h._serializeLayerDefinitions(this.layerDefinitions);
                        f = this.timeExtent;
                        d.time = f ? f.toJson().join(",") : null;
                        d.layerTimeOptions = h._serializeTimeOptions(this.layerTimeOptions);
                        return k.filter(d, function(e) {
                            if (null !== e)
                                return !0
                        })
                    }
                });
                b.mixin(y, {
                    LAYER_OPTION_SHOW: "show",
                    LAYER_OPTION_HIDE: "hide",
                    LAYER_OPTION_INCLUDE: "include",
                    LAYER_OPTION_EXCLUDE: "exclude"
                });
                m("extend-esri") && b.setObject("layers.ImageParameters", y, l);
                return y
            })
        },
        "esri/_time": function() {
            define(["./TimeExtent"], function() {
                return {}
            })
        },
        "esri/layers/FeatureLayer": function() {
            define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi dojo/has!extend-esri?./agscommon".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B, D, G, A, E, H, J, O, V, aa, da, ea, Y, ia, qa, wa, K, Z, pa, L, R, ha, na, ta, xa, Aa, ca, ja, X, oa, ka, Ea, T, U, ma, sa, ya) {
                var Oa = z.defaults
                  , Ua = !!g("esri-pbf")
                  , Xa = !!g("esri-featurelayer-pbf")
                  , Ma = b(pa, {
                    declaredClass: "esri.layers.FeatureLayer",
                    invalidParams: "query contains one or more unsupported parameters",
                    reSQLCurrentTimestamp: /current_timestamp|current_date|current_time/i,
                    reHostedFS: /(https?:)?\/\/services.*\.arcgis\.com/i,
                    maxPointCountForAuto: 4E3,
                    maxRecordCountForAuto: 2E3,
                    maxVertexCountForAuto: 25E4,
                    generalizeForScale: 4E3,
                    _eventMap: {
                        "add-attachment-complete": ["result"],
                        "before-apply-edits": ["adds", "updates", "deletes"],
                        "delete-attachments-complete": ["results"],
                        "edits-complete": ["adds", "updates", "deletes"],
                        "query-attachment-infos-complete": ["results"],
                        "query-count-complete": ["count"],
                        "query-features-complete": ["featureSet"],
                        "query-ids-complete": ["objectIds"],
                        "query-related-features-complete": ["featureSets"],
                        "selection-complete": ["features", "method"],
                        "update-end": ["error", "info"]
                    },
                    constructor: function(I, Q) {
                        this._preventInit || this._initFeatureLayer(I, Q)
                    },
                    _initFeatureLayer: function(I, Q) {
                        Q = Q || {};
                        this._tileWidth = Q.tileWidth || 512;
                        this._tileHeight = Q.tileHeight || 512;
                        this.i18n = ya;
                        this._featureReduction = this._featureReduction || Q.featureReduction;
                        this._featureReductionEnabled = null != Q.featureReductionEnabled ? Q.featureReductionEnabled : !0;
                        this._featureUpdatesCheckEnabled = null != Q.featureUpdatesCheckEnabled ? Q.featureUpdatesCheckEnabled : !0;
                        this.showLabels = null != Q.showLabels ? Q.showLabels : !0;
                        this._outFields = Q.outFields;
                        this._defnExpr = Q.definitionExpression;
                        this._loadCallback = Q.loadCallback;
                        this._trackIdField = Q.trackIdField;
                        this.objectIdField = Q.objectIdField;
                        var ba = null != Q.resolution
                          , M = null != Q.maxAllowableOffset;
                        this._maxOffset = this._optMaxOffset = ba || M ? ba ? Q.resolution : Q.maxAllowableOffset : this.maxAllowableOffset;
                        this.quantize = null != Q.quantize ? Q.quantize : !0;
                        this._optEditable = Q.editable;
                        this._optAutoGen = Q.autoGeneralize;
                        this.editSummaryCallback = Q.editSummaryCallback;
                        this.userId = Q.userId;
                        this.userIsAdmin = Q.userIsAdmin;
                        this.useMapTime = Q.hasOwnProperty("useMapTime") ? !!Q.useMapTime : !0;
                        this.source = Q.source;
                        this.gdbVersion = Q.gdbVersion;
                        this.orderByFields = Q.orderByFields;
                        this.maxPointCountForAuto = null != Q.maxPointCountForAuto ? Q.maxPointCountForAuto : this.maxPointCountForAuto;
                        this.maxRecordCountForAuto = null != Q.maxRecordCountForAuto ? Q.maxRecordCountForAuto : this.maxRecordCountForAuto;
                        this.maxVertexCountForAuto = null != Q.maxVertexCountForAuto ? Q.maxVertexCountForAuto : this.maxVertexCountForAuto;
                        this.generalizeForScale = null != Q.generalizeForScale ? Q.generalizeForScale : this.generalizeForScale;
                        this.queryPagination = this._optQueryPagination = null != Q.queryPagination ? Q.queryPagination : !0;
                        this.multipatchOption = Q.multipatchOption;
                        this.subtypeSublayerInfo = Q.subtypeSublayerInfo;
                        this._selectedFeatures = {};
                        this._newFeatures = [];
                        this._deletedFeatures = {};
                        this._ulid = this._getUniqueId();
                        ba = x.isDefined(Q.mode) ? Q.mode : Ma.MODE_ONDEMAND;
                        this._isStream && (ba = Ma.MODE_STREAM);
                        this.mode = ba;
                        switch (ba) {
                        case Ma.MODE_SNAPSHOT:
                            this.currentMode = Ma.MODE_SNAPSHOT;
                            this._mode = new X(this);
                            break;
                        case Ma.MODE_ONDEMAND:
                        case Ma.MODE_AUTO:
                            this.currentMode = Ma.MODE_ONDEMAND;
                            this._mode = new oa(this);
                            this.latticeTiling = Q.latticeTiling;
                            break;
                        case Ma.MODE_SELECTION:
                            this.currentMode = Ma.MODE_SELECTION;
                            this._mode = new ka(this);
                            this._isSelOnly = !0;
                            break;
                        case Ma.MODE_STREAM:
                            this.currentMode = Ma.MODE_STREAM,
                            this._mode = new Ea(this),
                            this._isStream = !0
                        }
                        this._initLayer = m.hitch(this, this._initLayer);
                        this._selectHandler = m.hitch(this, this._selectHandler);
                        this._editable = !1;
                        if (m.isObject(I) && I.layerDefinition)
                            return this._collection = !0,
                            this.mode = this._isStream ? Ma.MODE_STREAM : Ma.MODE_SNAPSHOT,
                            this._isStream || this._outFields || (this._outFields = ["*"]),
                            this._initLayer(I),
                            this;
                        this.source && (I = {
                            source: this.source.toJson()
                        },
                        this._url.query = m.mixin(this._url.query, {
                            layer: k.toJson(I)
                        }));
                        this.gdbVersion && (this._url.query = m.mixin(this._url.query, {
                            gdbVersion: this.gdbVersion
                        }));
                        this._task = new da(this.url,{
                            source: this.source,
                            gdbVersion: this.gdbVersion
                        });
                        I = this._url.path;
                        this._fserver = !1;
                        -1 !== I.search(/\/FeatureServer\//i) && (this._fserver = !0);
                        this._checkFeatureLimit();
                        (Q = Q.resourceInfo) ? this._initLayer(Q) : v({
                            url: I,
                            content: m.mixin({
                                f: "json"
                            }, this._url.query),
                            callbackParamName: "callback",
                            load: this._initLayer,
                            error: this._errorHandler
                        });
                        this.registerConnectEvents()
                    },
                    _initLayer: function(I, Q) {
                        if (I || Q) {
                            this._json = I;
                            Q = this.subtypeSublayerInfo;
                            this._findCredential();
                            if (this.credential && this.credential.ssl || I && I._ssl)
                                this._useSSL(),
                                this._task._useSSL();
                            this._collection && (this._isStream || (this.currentMode = Ma.MODE_SNAPSHOT,
                            this._mode = new X(this)),
                            this._featureSet = I.featureSet,
                            this._nextId = I.nextObjectId,
                            I = I.layerDefinition);
                            this.version = I.currentVersion;
                            this.version || (this.version = "capabilities"in I || "drawingInfo"in I || "hasAttachments"in I || "htmlPopupType"in I || "relationships"in I || "timeInfo"in I || "typeIdField"in I || "types"in I ? 10 : 9.3);
                            this.geometryType = I.geometryType;
                            I.bandCount && I.fields && 1 < I.fields.length && (this.geometryType = "esriGeometryPolygon",
                            this._isImageService = !0);
                            "string" !== typeof this.multipatchOption && "esriGeometryMultiPatch" === this.geometryType && (this.multipatchOption = "xyFootprint");
                            if (I.hasOwnProperty("capabilities")) {
                                var ba = this.capabilities = I.capabilities;
                                ba && -1 !== ba.toLowerCase().indexOf("editing") ? this._editable = !0 : this._editable = !1
                            } else
                                this._collection || (this._editable = this._fserver);
                            x.isDefined(this._optEditable) ? (this._editable = this._optEditable,
                            delete this._optEditable) : "esriGeometryMultiPatch" === this.geometryType && (this._editable = !1);
                            this._isImageService && (this._editable = !1);
                            this._json = k.toJson(this._json);
                            this.isEditable() ? this._setMaxOffset(null) : this._canAutoGeneralize() && (this._autoGeneralize = x.isDefined(this._optAutoGen) ? this._optAutoGen : this.mode === Ma.MODE_ONDEMAND || this.mode === Ma.MODE_AUTO,
                            delete this._optAutoGen);
                            ba = I.effectiveMinScale || I.minScale;
                            var M = I.effectiveMaxScale || I.maxScale;
                            !this._hasMin && ba && this.setMinScale(ba);
                            !this._hasMax && M && this.setMaxScale(M);
                            this.layerId = I.id;
                            this.name = Q && Q.title || I.name;
                            this.description = I.description;
                            this.copyright = I.copyrightText;
                            this.type = I.type;
                            this.displayField = I.displayField;
                            this.defaultDefinitionExpression = I.definitionExpression || (I.isView ? I.viewDefinitionQuery : I.definitionQuery);
                            this.fullExtent = new qa(I.extent);
                            this.initialExtent = new qa(this.fullExtent.toJson());
                            this.fullExtent.spatialReference && (this.spatialReference = new r(this.fullExtent.spatialReference.toJson()));
                            this.defaultVisibility = I.defaultVisibility;
                            this.editingInfo = I.editingInfo;
                            this.supportsLastEditDate = !(!this.editingInfo || null == this.editingInfo.lastEditDate);
                            if ("esriGeometryPoint" === this.geometryType || "esriGeometryMultipoint" === this.geometryType)
                                this.latticeTiling = !1;
                            this.hasM = I.hasM || !1;
                            this.hasZ = I.hasZ || !1;
                            this.indexedFields = I.indexedFields;
                            this.indexes = I.indexes;
                            this.maxRecordCount = I.maxRecordCount;
                            this.canModifyLayer = I.canModifyLayer;
                            this.supportsStatistics = I.supportsStatistics;
                            this.supportsAdvancedQueries = this._collection ? !1 : I.supportsAdvancedQueries;
                            this.supportsCalculate = I.supportsCalculate;
                            this.supportsASyncCalculate = I.supportsASyncCalculate;
                            this.supportsAttachmentsByUploadId = I.supportsAttachmentsByUploadId;
                            this.supportsCoordinatesQuantization = I.supportsCoordinatesQuantization;
                            this.supportsQuantizationEditMode = I.supportsQuantizationEditMode;
                            this.supportsFieldDescription = I.supportsFieldDescriptionProperty;
                            this.supportsFormatPBF = I.supportedQueryFormats ? -1 !== l.map(I.supportedQueryFormats.toLowerCase().split(","), m.trim).indexOf("pbf") : !1;
                            this.quantize = this.quantize && this.supportsCoordinatesQuantization;
                            this.hasLabels = I.hasLabels;
                            this.canScaleSymbols = I.canScaleSymbols;
                            this.supportsRollbackOnFailureParameter = this.supportsRollbackOnFailure = I.supportsRollbackOnFailure;
                            this.syncCanReturnChanges = I.syncCanReturnChanges;
                            this.isDataVersioned = I.isDataVersioned;
                            this.editFieldsInfo = I.editFieldsInfo;
                            this.ownershipBasedAccessControlForFeatures = I.ownershipBasedAccessControlForFeatures;
                            this.editFieldsInfo && this.ownershipBasedAccessControlForFeatures && (this.creatorField = this.editFieldsInfo.creatorField);
                            this.relationships = I.relationships;
                            this.allowGeometryUpdates = x.isDefined(I.allowGeometryUpdates) ? I.allowGeometryUpdates : !0;
                            this.allowUpdateWithoutMValues = !!I.allowUpdateWithoutMValues;
                            this.enableZDefaults = !!I.enableZDefaults;
                            this.zDefault = x.isDefined(I.zDefault) ? I.zDefault : null;
                            this.advancedQueryCapabilities = I.advancedQueryCapabilities || {
                                supportsStatistics: this.supportsStatistics,
                                supportsOrderBy: this.supportsAdvancedQueries,
                                supportsDistinct: this.supportsAdvancedQueries
                            };
                            this.geometryProperties = I.hasGeometryProperties && I.geometryProperties || null;
                            this.url && (this.advancedQueryCapabilities.supportsPagination = this.advancedQueryCapabilities.supportsPagination && (this.reHostedFS.test(this.url) || 10.3 < this.version));
                            this.queryPagination = this._optQueryPagination && this.advancedQueryCapabilities.supportsPagination;
                            this.useStandardizedQueries = I.useStandardizedQueries;
                            this.tileMaxRecordCount = I.tileMaxRecordCount;
                            this.standardMaxRecordCount = I.standardMaxRecordCount;
                            if (ba = I.dateFieldsTimeReference)
                                this.dateFieldsTimeReference = new ha(ba);
                            this._setMaxOffset(this._maxOffset, !0);
                            this._isTable = "Table" === this.type;
                            M = I.fields;
                            this._createFields(M);
                            if (!this.objectIdField) {
                                this.objectIdField = I.objectIdField;
                                if (!this.objectIdField)
                                    for (M = I.fields,
                                    ba = 0; ba < M.length; ba++) {
                                        var S = M[ba];
                                        if ("esriFieldTypeOID" === S.type) {
                                            this.objectIdField = S.name;
                                            break
                                        }
                                    }
                                this.objectIdField || this._isStream || console.debug("esri.layers.FeatureLayer: " + x.substitute({
                                    url: this.url
                                }, "objectIdField is not set [url: ${url}]"))
                            }
                            if (!x.isDefined(this._nextId)) {
                                M = this.objectIdField;
                                S = -1;
                                if (this._collection && M) {
                                    var fa = (ba = this._featureSet) && ba.features
                                      , ra = fa ? fa.length : 0;
                                    for (ba = 0; ba < ra; ba++) {
                                        var va = (va = fa[ba].attributes) && va[M];
                                        va > S && (S = va)
                                    }
                                }
                                this._nextId = S + 1
                            }
                            this.globalIdField = I.globalIdField;
                            if (ba = this.typeIdField = I.typeIdField)
                                if (ba = !this._getField(ba) && this._getField(ba, !0))
                                    this.typeIdField = ba.name;
                            this.visibilityField = I.visibilityField;
                            if (M = I.defaultSymbol)
                                this.defaultSymbol = E.fromJson(M);
                            var Ca = this.types = []
                              , Da = I.types;
                            S = (ba = this.editFieldsInfo) && ba.creatorField;
                            fa = ba && ba.editorField;
                            va = S || fa;
                            ra = [];
                            if (Da)
                                for (ba = 0; ba < Da.length; ba++) {
                                    var Ra = new na(Da[ba]);
                                    var Na = Ra.templates;
                                    va && Na && Na.length && (ra = ra.concat(Na));
                                    Ca.push(Ra)
                                }
                            Da = I.templates;
                            Ra = this.templates = [];
                            if (Da)
                                for (ba = 0; ba < Da.length; ba++)
                                    Ca = new ta(Da[ba]),
                                    va && ra.push(Ca),
                                    Ra.push(Ca);
                            for (ba = 0; ba < ra.length; ba++)
                                if (va = m.getObject("prototype.attributes", !1, ra[ba]))
                                    S && delete va[S],
                                    fa && delete va[fa];
                            if (ba = I.subtypeField)
                                this.subtypeField = (ba = this.getField(ba)) ? ba.name : null;
                            this.defaultSubtypeCode = I.defaultSubtypeCode;
                            this.subtypes = l.map(I.subtypes, function(cb) {
                                return new xa(cb)
                            });
                            this._applySTSublayerInfo(Q);
                            if (Q = I.timeInfo)
                                this.timeInfo = new R(Q),
                                this._startTimeField = Q.startTimeField,
                                this._endTimeField = Q.endTimeField,
                                this._startTimeField && this._endTimeField && (this._twoTimeFields = !0),
                                this._trackIdField ? Q.trackIdField = this._trackIdField : this._trackIdField = Q.trackIdField;
                            this.hasAttachments = !this._collection && I.hasAttachments ? !0 : !1;
                            this.htmlPopupType = I.htmlPopupType;
                            Q = I.drawingInfo;
                            (ba = Q && Q.labelingInfo) && !this.labelingInfo && (this.labelingInfo = l.map(ba, function(cb) {
                                return new ca(cb)
                            }),
                            this._fixLabelExpr());
                            if (!this.renderer)
                                if (Q && Q.renderer) {
                                    var Ja = Q.renderer;
                                    this.setRenderer(O.fromJson(Ja, {
                                        geometryType: this.geometryType
                                    }));
                                    "classBreaks" === Ja.type && this.renderer.setMaxInclusive(!0);
                                    if (!this._collection) {
                                        var Pa = Ja.type;
                                        ba = [];
                                        Ja = this.renderer;
                                        switch (Pa) {
                                        case "simple":
                                            ba.push(Ja.symbol);
                                            break;
                                        case "uniqueValue":
                                        case "classBreaks":
                                            ba.push(Ja.defaultSymbol),
                                            ba = ba.concat(l.map(Ja.infos, function(cb) {
                                                return cb.symbol
                                            }))
                                        }
                                        ba = l.filter(ba, x.isDefined);
                                        var eb = this._url.path + "/images/"
                                          , bb = this._getToken();
                                        l.forEach(ba, function(cb) {
                                            var kb = cb.url;
                                            kb && (-1 === kb.search(/https?:/) && -1 === kb.indexOf("data:") && (cb.url = eb + kb),
                                            bb && -1 !== cb.url.search(/https?:/) && (cb.url += "?token\x3d" + bb))
                                        })
                                    }
                                } else if (M)
                                    Da = this.types,
                                    0 < Da.length ? (Ja = new J(this.defaultSymbol,this.typeIdField),
                                    l.forEach(Da, function(cb) {
                                        Ja.addValue(cb.id, cb.symbol)
                                    })) : Ja = new H(this.defaultSymbol),
                                    this.setRenderer(Ja);
                                else if (!this._isTable) {
                                    switch (this.geometryType) {
                                    case "esriGeometryPoint":
                                    case "esriGeometryMultipoint":
                                        Pa = new D;
                                        break;
                                    case "esriGeometryPolyline":
                                        Pa = new G;
                                        break;
                                    case "esriGeometryPolygon":
                                        Pa = new A;
                                        break;
                                    default:
                                        this.hasXYFootprint() && (Pa = new A)
                                    }
                                    this.setRenderer(Pa ? new H(Pa) : null)
                                }
                            Pa = Q && Q.transparency || 0;
                            !this.hasOwnProperty("opacity") && 0 < Pa && (this.opacity = 1 - Pa / 100);
                            (g("ie") || 7 <= g("trident") || g("safari")) && this.isEditable() && 10.02 > this.version && (this._ts = !0);
                            this.statistics = I.statistics;
                            this._fixRendererFields();
                            this._updateRequiredFieldsFromLabelingInfo();
                            this._checkFields();
                            this._updateCaps();
                            var gb = function() {
                                null == this._maxOffset || this._isFractionalOffsetAllowed() || this._setMaxOffset(this._maxOffset);
                                this.loaded = !0;
                                this.setFeatureReduction(this.getFeatureReduction());
                                this.currentMode !== Ma.MODE_SNAPSHOT && (this.queryPagination = !1);
                                this.onLoad(this);
                                var cb = this._loadCallback;
                                cb && (delete this._loadCallback,
                                cb(this))
                            };
                            I = [];
                            this._collection ? (Pa = this._featureSet,
                            this._featureSet = null,
                            this._mode._drawFeatures(new Y(Pa)),
                            this._fcAdded = !0) : (I.push(this._forceIdentity()),
                            this._limitPromise && I.push(this._limitPromise));
                            I.push(this._evalArcadeSupport());
                            I.length ? p(I).then(m.hitch(this, function() {
                                gb.call(this)
                            })) : gb.call(this)
                        }
                    },
                    _applySTSublayerInfo: function(I) {
                        I && this.subtypeField && (this.subtypeCode = I.subtypeCode,
                        this._applySTSublayerDefinitionExpression(I),
                        this._filterSubtypes(I),
                        this._applySTTemplates(I),
                        this._applySTFieldOverrides(I))
                    },
                    _applySTSublayerDefinitionExpression: function(I) {
                        var Q = []
                          , ba = this.getDefinitionExpression();
                        ba && Q.push(ba);
                        (I = I.layerDefinition && I.layerDefinition.definitionExpression) && Q.push(I);
                        1 < Q.length && (Q = l.map(Q, function(M) {
                            return "(" + M + ")"
                        }));
                        this.setDefinitionExpression(Q.length ? Q.join(" AND ") : null)
                    },
                    _applySTTemplates: function(I) {
                        if (I = I.layerDefinition && I.layerDefinition.templates)
                            this.templates = l.map(I, function(Q) {
                                return new ta(Q)
                            })
                    },
                    _filterSubtypes: function() {
                        this.subtypes && (this.subtypes = l.filter(this.subtypes, function(I) {
                            return I.code === this.subtypeCode
                        }, this))
                    },
                    _applySTFieldOverrides: function(I) {
                        var Q = I.layerDefinition && I.layerDefinition.fieldOverrides;
                        if (Q) {
                            this.fields = l.filter(this.fields, function(M) {
                                return l.some(Q, function(S) {
                                    return S.name === M.name
                                })
                            });
                            var ba = this.getSubtypeByCode(this.subtypeCode).domains;
                            this.fields.forEach(function(M) {
                                var S = l.filter(Q, function(fa) {
                                    return fa.name === M.name
                                })[0];
                                S.alias && (M.alias = S.alias);
                                if (!1 === S.editable || M.name === this.subtypeField)
                                    M.editable = !1;
                                ba && (S = ba[M.name]) && "inherited" !== S.type && (M.domain = ja.fromJson(S.toJson()))
                            }, this)
                        }
                    },
                    setShowLabels: function(I) {
                        var Q = this.showLabels;
                        this.showLabels = I;
                        Q !== this.showLabels && (this._evalSurfaceType(),
                        this.onShowLabelsChange())
                    },
                    onShowLabelsChange: function() {},
                    onRendererChange: function(I) {
                        this.inherited(arguments);
                        var Q = this._map;
                        this._ager = !!(I && I.observationAger && I.observationRenderer);
                        I && "colors"in I && "blurRadius"in I && "maxPixelIntensity"in I ? (this._evalSurfaceType(!0),
                        "esriGeometryPoint" == this.geometryType && !this._heatmapManager && Q && (this._heatmapManager = new ma(this),
                        this._heatmapManager.initialize(Q))) : this.renderer && this.renderer.getRendererInfo ? l.some(this.renderer.rendererInfos, function(S) {
                            return S.renderer && "colors"in S.renderer && "blurRadius"in S.renderer
                        }) || (this._heatmapManager = null) : this._heatmapManager = null;
                        this.timeInfo && Q && (I && (I.latestObservationRenderer || I.trackRenderer) ? this._trackManager || (this._trackManager = new U(this),
                        this._trackManager.initialize(Q),
                        this._childLayer = this._trackManager.container,
                        this._mode._applyTimeFilter()) : this._trackManager && !this._isStream && (this._trackManager.destroy(),
                        this._trackManager = null));
                        if (I) {
                            var ba = [];
                            Q = l.filter([I, I.observationRenderer, I.latestObservationRenderer, I.trackRenderer], x.isDefined);
                            var M = function(S) {
                                return null != S && "function" != typeof S && S
                            };
                            l.forEach(Q, function(S) {
                                var fa = M(S.attributeField)
                                  , ra = M(S.attributeField2);
                                S = M(S.attributeField3);
                                !1 !== fa && ba.push(fa);
                                !1 !== ra && ba.push(ra);
                                !1 !== S && ba.push(S)
                            });
                            this._requiredFields = ba
                        } else
                            this._requiredFields = [];
                        this.loaded && (this._fixRendererFields(),
                        this._checkFields(this._requiredFields),
                        this._collection && (this._typesDirty = !0))
                    },
                    setFeatureReduction: function(I) {
                        I && (I = m.mixin({}, I),
                        null != I.clusterSize && null == I.clusterRadius && (I.clusterRadius = I.clusterSize),
                        delete I.clusterSize);
                        this.loaded ? this._isFeatureReductionSupported(I) ? this._featureReduction = I : (this._featureReduction = null,
                        I && console.log("Clustering is not supported for this layer: " + this.url)) : this._featureReduction = I;
                        this._evalFeatureReduction(this._featureReduction)
                    },
                    hasFeatureReduction: function() {
                        return !!this._featureReduction
                    },
                    getFeatureReduction: function() {
                        var I = this._featureReduction;
                        if (I) {
                            I = m.mixin({}, I);
                            var Q = this._clusterManager;
                            if (Q = Q && Q.aggregationInfo)
                                I.clusterRadius = Q.clusterRadius,
                                I.infoTemplate = Q.infoTemplate
                        }
                        return I
                    },
                    isFeatureReductionActive: function() {
                        var I = this._clusterManager;
                        return !!(I && I.isClusteringEnabled() && I.isClusteringActive())
                    },
                    isFeatureReductionEnabled: function() {
                        return this._featureReductionEnabled
                    },
                    enableFeatureReduction: function() {
                        this._featureReductionEnabled || (this._featureReductionEnabled = !0,
                        this._evalFeatureReduction(this._featureReduction))
                    },
                    disableFeatureReduction: function() {
                        this._featureReductionEnabled && (this._featureReductionEnabled = !1,
                        this._evalFeatureReduction(this._featureReduction))
                    },
                    isFeatureReductionApplied: function() {
                        return this.hasFeatureReduction() && this.isFeatureReductionEnabled() && this._canCluster(this.getFeatureReduction())
                    },
                    getAggregateGraphics: function() {
                        return this._clusterManager ? this._clusterManager.getAggregateGraphics() : []
                    },
                    getChildGraphics: function(I) {
                        return this._clusterManager ? this._clusterManager.getFeaturesInCluster(I) : []
                    },
                    getSingleGraphics: function() {
                        return this._clusterManager ? this._clusterManager.getSingleGraphics() : []
                    },
                    getFeatureReductionRenderer: function() {
                        return this.isFeatureReductionActive() ? this._clusterManager.getClusterRenderer() : null
                    },
                    getFeatureReductionLayer: function() {
                        return this._clusterManager ? this._clusterManager.container : null
                    },
                    getFeatureReductionField: function(I) {
                        var Q, ba = this._clusterManager ? this._clusterManager.getClusterFields() : null;
                        I = I ? I.toLowerCase() : "";
                        l.some(ba, function(M) {
                            I === M.name.toLowerCase() && (Q = M);
                            return !!Q
                        });
                        return Q
                    },
                    _isFeatureReductionSupported: function(I) {
                        return I && "cluster" === I.type && "esriGeometryPoint" === this.geometryType && (this._collection || this._isStream || this._optQueryPagination && this.advancedQueryCapabilities.supportsPagination)
                    },
                    _isReductionCompatibleRenderer: function(I) {
                        I = I && I.declaredClass || "";
                        I = I.toLowerCase();
                        return -1 < I.indexOf("simplerenderer") || -1 < I.indexOf("classbreaksrenderer") || -1 < I.indexOf("uniquevaluerenderer")
                    },
                    _evalFeatureReduction: function(I) {
                        this.loaded && this.getMap() && (I = I || this.getFeatureReduction(),
                        this._evalModeFromFReduction(I),
                        I && this.isFeatureReductionEnabled() ? this._canCluster(I) ? this._clusterManager ? this._updateClusterManager(I) : (this._clusterManager = this._createClusterManager(I),
                        this.onFeatureReductionChange()) : (console.log("Clustering is supported only for point layers where map spatial reference is WGS84 or Web Mercator"),
                        this._destroyClusterManager()) : this._destroyClusterManager())
                    },
                    _canCluster: function(I) {
                        var Q = this._map;
                        if (!Q)
                            return !1;
                        Q = Q.spatialReference;
                        return this._isFeatureReductionSupported(I) && this._isReductionCompatibleRenderer(this.renderer) && (Q.isWebMercator() || 4326 === Q.wkid)
                    },
                    _createClusterManager: function(I) {
                        I = new sa({
                            layer: this,
                            aggregationInfo: I
                        });
                        this._clusterHandles = [I.on("renderer-change", m.hitch(this, function() {
                            this.onFeatureReductionRendererChange()
                        }))];
                        I.initialize(this._map);
                        return I
                    },
                    _updateClusterManager: function(I) {
                        var Q = this._clusterManager;
                        Q && Q.setAggregationInfo(I)
                    },
                    _destroyClusterManager: function(I) {
                        l.forEach(this._clusterHandles, function(Q) {
                            Q.remove()
                        });
                        this._clusterHandles = null;
                        this._clusterManager && (this._clusterManager.destroy(I),
                        this._clusterManager = null,
                        this.onFeatureReductionChange())
                    },
                    redraw: function() {
                        this.inherited(arguments);
                        this._clusterManager && this._clusterManager.redraw();
                        this._trackManager && this._trackManager.container && this._trackManager.container.redraw()
                    },
                    _evalSDRenderer: function(I) {
                        this.inherited(arguments);
                        var Q = this._getRenderer();
                        this._ager = !!(Q && Q.observationAger && Q.observationRenderer);
                        this._trackManager && this._trackManager.container && this._trackManager.container.setRenderer(Q && Q.trackRenderer);
                        I && this._evalFeatureReduction()
                    },
                    _graphicVisibilityChanged: function(I) {
                        this._clusterManager ? this._clusterManager.toggleFeatureVisibility(I) : this._heatmapManager && this._heatmapManager.redraw()
                    },
                    setWebGLFetchOptions: function(I) {
                        this._hasOnDemandDrillMode() && (I = I || {},
                        null != I.maxDrillLevel && (this._mode.maxDrillLevel = I.maxDrillLevel),
                        null != I.maxRecordCountFactor && (this._mode.maxRecordCountFactor = I.maxRecordCountFactor),
                        null != I.enablePBFQuery && (this._mode.enablePBFQuery = I.enablePBFQuery))
                    },
                    _isWebGLCompatible: function() {
                        return this.loaded && !this.isEditable() && !this.isFeatureReductionApplied() && (!this.labelingInfo || !1 === this.showLabels) && !this._isGeometryOperationsUsed() && this._isRendererSupportedInWebGL() && this.supportsCoordinatesQuantization && ("esriGeometryPolygon" !== this.geometryType || this.advancedQueryCapabilities.supportsReturningGeometryCentroid) && this.currentMode === Ma.MODE_ONDEMAND && (!this._preSurfaceChangeState || this._preSurfaceChangeState.currentMode === Ma.MODE_ONDEMAND)
                    },
                    _isRendererSupportedInWebGL: function() {
                        if (!this.renderer)
                            return !1;
                        var I = this.renderer
                          , Q = I.declaredClass ? I.declaredClass.toLowerCase() : "";
                        return (-1 < Q.indexOf("simplerenderer") || -1 < Q.indexOf("classbreaksrenderer") || -1 < Q.indexOf("uniquevaluerenderer")) && this._hasWebGLCompatibleSymbols(I) && this._hasWebGLCompatibleVVs(I)
                    },
                    _hasWebGLCompatibleSymbols: function(I) {
                        I = this._getAllSymbolsInRenderer(I);
                        return !(this._hasSLSWithMarker(I) || this._hasIncompatibleSMSStyles(I) || this._hasGIFMarker(I))
                    },
                    _hasWebGLCompatibleVVs: function(I) {
                        return !l.some(I && I.visualVariables, function(Q) {
                            var ba = Q.type;
                            return ("colorInfo" === ba || "opacityInfo" === ba) && Q.stops && 8 < Q.stops.length || "sizeInfo" === ba && (Q.field || Q.valueExpression && "$view.scale" !== Q.valueExpression || Q.expression && "view.scale" !== Q.expression) && Q.stops && 6 < Q.stops.length ? !0 : !1
                        })
                    },
                    _hasSLSWithMarker: function(I) {
                        return l.some(I, function(Q) {
                            return Q && "simplelinesymbol" === Q.type && !!Q.marker
                        })
                    },
                    _hasIncompatibleSMSStyles: function(I) {
                        var Q = void 0 === g("ie") && 7 == g("trident");
                        return l.some(I, function(ba) {
                            return ba && "simplemarkersymbol" === ba.type && ("triangle" === ba.style || "path" === ba.style && Q)
                        })
                    },
                    _hasGIFMarker: function(I) {
                        var Q = /\.gif$/
                          , ba = /^image\/gif$/;
                        return l.some(I, function(M) {
                            return M && "picturemarkersymbol" === M.type ? Q.test(M.url) || ba.test(M.contentType) : !1
                        })
                    },
                    _getAllSymbolsInRenderer: function(I) {
                        var Q = [];
                        I && (Q.push(I.symbol),
                        Q.push(I.defaultSymbol),
                        l.forEach(I.infos, function(ba) {
                            Q.push(ba.symbol)
                        }),
                        Q = l.filter(Q, function(ba) {
                            return !!ba
                        }));
                        return Q
                    },
                    _setMap: function(I) {
                        var Q = this.inherited(arguments)
                          , ba = this._mode
                          , M = this;
                        ba && I.loaded && ba.initialize(I);
                        this.geometryType && this.attr("data-geometry-type", this.geometryType.replace(/esriGeometry/i, "").toLowerCase());
                        this._addHandle = this.on("graphic-node-add", function(S) {
                            S = S.graphic.attributes;
                            (S = M._selectedFeatures[S && S[M.objectIdField]]) && S.attr("data-selected", "")
                        });
                        return Q
                    },
                    _unsetMap: function(I) {
                        this._suspendImpl(!0);
                        this._destroyClusterManager(!1);
                        this._trackManager && (this._trackManager.destroy(),
                        this._trackManager = null);
                        w.disconnect(this._zoomConnect);
                        w.disconnect(this._addHandle);
                        this._zoomConnect = this._addHandle = null;
                        this.inherited("_unsetMap", arguments)
                    },
                    onAttach: function() {
                        this._evalModeFromSurface()
                    },
                    onRefreshTick: function() {
                        this.isFeatureUpdatesCheckActive() && this._evalFeatureUpdates()
                    },
                    refresh: function(I) {
                        !this._needsRefresh && I && I.scheduled && this.isFeatureUpdatesCheckActive() || (this._needsRefresh = !1,
                        (I = this._mode) && I.refresh())
                    },
                    setFeatureUpdatesCheckEnabled: function(I) {
                        this._featureUpdatesCheckEnabled = I
                    },
                    isFeatureUpdatesCheckEnabled: function() {
                        return !!this._featureUpdatesCheckEnabled
                    },
                    isFeatureUpdatesCheckActive: function() {
                        return this.supportsLastEditDate && this.isFeatureUpdatesCheckEnabled() && !!this.refreshInterval && !!m.getObject("onFeatureUpdatesResult.after", !1, this)
                    },
                    hasFeatureUpdates: function() {
                        var I = new h;
                        if (!this.supportsLastEditDate)
                            return I.reject(Error("FeatureLayer does not support supportsLastEditDate")),
                            I.promise;
                        if (!this._fetchMetadataPromise || this._fetchMetadataPromise.isFulfilled())
                            this._fetchMetadataPromise = v({
                                url: this._url.path,
                                content: m.mixin({
                                    f: "json"
                                }, this._url.query),
                                callbackParamName: "callback"
                            }).then(m.hitch(this, function(Q) {
                                Q = Q.editingInfo.lastEditDate;
                                var ba = this.editingInfo.lastEditDate !== Q;
                                this.editingInfo.lastEditDate = Q;
                                return ba
                            }));
                        this._fetchMetadataPromise.then(function(Q) {
                            I.isFulfilled() || I.resolve(Q)
                        }).otherwise(function(Q) {
                            I.isFulfilled() || I.reject(Q)
                        });
                        return I.promise
                    },
                    hasXYFootprint: function() {
                        return "esriGeometryMultiPatch" === this.geometryType && "xyFootprint" === this.multipatchOption
                    },
                    getOutFields: function() {
                        return l.filter(this._getOutFields(), function(I) {
                            return "*" === I || !!this._getField(I)
                        }, this)
                    },
                    getField: function(I) {
                        return this._getField(I, !0)
                    },
                    isOutField: function(I) {
                        I = this.getField(I);
                        if (!I)
                            return !1;
                        var Q = this.getOutFields();
                        return -1 < l.indexOf(Q, "*") || -1 < l.indexOf(Q, I.name)
                    },
                    getFieldLabel: function(I) {
                        var Q = this.infoTemplate;
                        Q = Q && Q.getFieldInfo && Q.getFieldInfo(I);
                        I = m.isFunction(I) ? null : this.getField(I);
                        var ba = Q || I
                          , M = "";
                        ba && (M = Q && Q.label || I && I.alias || ba.name || ba.fieldName);
                        return M
                    },
                    getDomain: function(I, Q) {
                        var ba, M, S = (Q = Q && Q.feature) && this.typeIdField && Q.attributes && Q.attributes[this.typeIdField];
                        null != S && l.some(this.types, function(fa) {
                            return fa.id == S ? ((ba = fa.domains && fa.domains[I]) && "inherited" === ba.type && (ba = this._getLayerDomain(I),
                            M = !0),
                            !0) : !1
                        }, this);
                        M || ba || (ba = this._getLayerDomain(I));
                        return ba
                    },
                    _getLayerDomain: function(I) {
                        this._createFieldsIndex();
                        var Q = this._fieldsIndex;
                        if (Q)
                            return Q = Q.caseSensitive,
                            (Q = Q.get(I)) ? Q.domain : null;
                        var ba;
                        l.some(this.fields, function(M) {
                            M.name === I && (ba = M.domain);
                            return !!ba
                        });
                        return ba
                    },
                    getType: function(I) {
                        return this.getTypeById(I && this.typeIdField && I.attributes && I.attributes[this.typeIdField])
                    },
                    getTypeById: function(I) {
                        var Q;
                        l.some(this.types, function(ba) {
                            ba.id == I && (Q = ba);
                            return !!Q
                        });
                        return Q
                    },
                    getSubtypeByCode: function(I) {
                        var Q;
                        l.some(this.subtypes, function(ba) {
                            ba.code == I && (Q = ba);
                            return !!Q
                        });
                        return Q
                    },
                    setEditable: function(I) {
                        if (!this._collection)
                            return console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service"),
                            this;
                        if (this._isImageService)
                            return this;
                        if (!this.loaded)
                            return this._optEditable = I,
                            this;
                        var Q = this._editable;
                        this._editable = I;
                        this._updateCaps();
                        if (Q !== I)
                            this.onCapabilitiesChange();
                        return this
                    },
                    getEditCapabilities: function(I) {
                        var Q = {
                            canCreate: !1,
                            canUpdate: !1,
                            canDelete: !1,
                            canUpdateGeometry: !1
                        };
                        if (!this.loaded || !this.isEditable())
                            return Q;
                        var ba = I && I.feature;
                        I = I && I.userId || this.getUserId();
                        var M = l.map(this.capabilities ? this.capabilities.toLowerCase().split(",") : [], m.trim)
                          , S = (Q = -1 < l.indexOf(M, "editing")) && -1 < l.indexOf(M, "create")
                          , fa = Q && -1 < l.indexOf(M, "update");
                        M = Q && -1 < l.indexOf(M, "delete");
                        var ra = this.ownershipBasedAccessControlForFeatures
                          , va = this.editFieldsInfo
                          , Ca = va && va.creatorField;
                        va = va && va.realm;
                        ba = (ba = ba && ba.attributes) && Ca ? ba[Ca] : void 0;
                        var Da = !!this.userIsAdmin;
                        Ca = !ra || Da || !(!ra.allowOthersToUpdate && !ra.allowUpdateToOthers);
                        var Ra = !ra || Da || !(!ra.allowOthersToDelete && !ra.allowDeleteToOthers)
                          , Na = !ra || Da || !ra.hasOwnProperty("allowAnonymousToUpdate") || ra.allowAnonymousToUpdate;
                        ra = !ra || Da || !ra.hasOwnProperty("allowAnonymousToDelete") || ra.allowAnonymousToDelete;
                        I && va && (I = I + "@" + va);
                        if (Da || Q && !(S || fa || M))
                            S = fa = M = !0;
                        Q = {
                            canCreate: S,
                            canUpdate: fa,
                            canDelete: M,
                            canUpdateGeometry: Da || this.allowGeometryUpdates
                        };
                        I || (Q.canUpdate = Q.canUpdate && Na,
                        Q.canDelete = Q.canDelete && ra);
                        null === ba ? (Q.canUpdate = Q.canUpdate && Ca,
                        Q.canDelete = Q.canDelete && Ra) : "" !== ba && ba && I.toLowerCase() !== ba.toLowerCase() && (Q.canUpdate = Q.canUpdate && Ca,
                        Q.canDelete = Q.canDelete && Ra);
                        return Q
                    },
                    getUserId: function() {
                        var I;
                        this.loaded && (I = this.credential && this.credential.userId || this.userId || "");
                        return I
                    },
                    setUserIsAdmin: function(I) {
                        this.userIsAdmin = I
                    },
                    setEditSummaryCallback: function(I) {
                        this.editSummaryCallback = I
                    },
                    getEditSummary: function(I, Q, ba) {
                        ba = x.isDefined(ba) ? ba : (new Date).getTime();
                        var M = "";
                        ba = this.getEditInfo(I, Q, ba);
                        (Q = Q && Q.callback || this.editSummaryCallback) && (ba = Q(I, ba) || "");
                        if (m.isString(ba))
                            M = ba;
                        else {
                            if (ba) {
                                I = ba.action;
                                Q = ba.userId;
                                var S = ba.timeValue
                                  , fa = 0;
                                I && fa++;
                                Q && fa++;
                                x.isDefined(S) && fa++;
                                1 < fa && (M = ("edit" === I ? "edit" : "create") + (Q ? "User" : "") + (x.isDefined(S) ? ba.displayPattern : ""))
                            }
                            M = M && x.substitute(ba, this.i18n.layers.FeatureLayer[M])
                        }
                        return M
                    },
                    getEditInfo: function(I, Q, ba) {
                        if (this.loaded) {
                            ba = x.isDefined(ba) ? ba : (new Date).getTime();
                            Q = Q && Q.action || "last";
                            var M = this.editFieldsInfo
                              , S = M && M.creatorField
                              , fa = M && M.creationDateField
                              , ra = M && M.editorField;
                            M = M && M.editDateField;
                            ra = (I = I && I.attributes) && ra ? I[ra] : void 0;
                            M = I && M ? I[M] : null;
                            S = this._getEditData(I && S ? I[S] : void 0, I && fa ? I[fa] : null, ba);
                            ba = this._getEditData(ra, M, ba);
                            switch (Q) {
                            case "creation":
                                var va = S;
                                break;
                            case "edit":
                                va = ba;
                                break;
                            case "last":
                                va = ba || S
                            }
                            va && (va.action = va === ba ? "edit" : "creation");
                            return va
                        }
                    },
                    _getEditData: function(I, Q, ba) {
                        if (x.isDefined(Q)) {
                            var M = ba - Q;
                            var S = 0 > M ? "Full" : 6E4 > M ? "Seconds" : 12E4 > M ? "Minute" : 36E5 > M ? "Minutes" : 72E5 > M ? "Hour" : 864E5 > M ? "Hours" : 6048E5 > M ? "WeekDay" : "Full"
                        }
                        if (void 0 !== I || S) {
                            var fa = fa || {};
                            fa.userId = I;
                            S && (I = f.format,
                            ba = new Date(Q),
                            fa.minutes = Math.floor(M / 6E4),
                            fa.hours = Math.floor(M / 36E5),
                            fa.weekDay = I(ba, {
                                datePattern: "EEEE",
                                selector: "date"
                            }),
                            fa.formattedDate = I(ba, {
                                selector: "date"
                            }),
                            fa.formattedTime = I(ba, {
                                selector: "time"
                            }),
                            fa.displayPattern = S,
                            fa.timeValue = Q)
                        }
                        return fa
                    },
                    isEditable: function() {
                        return !(!this._editable && !this.userIsAdmin)
                    },
                    isQueryable: function() {
                        var I = l.map(this.capabilities ? this.capabilities.toLowerCase().split(",") : [], m.trim);
                        return this._isStream || this.userIsAdmin || this._collection || -1 !== l.indexOf(I, "query") || -1 !== l.indexOf(I, "catalog")
                    },
                    setResolution: function(I) {
                        return this.setMaxAllowableOffset(I)
                    },
                    setMaxAllowableOffset: function(I) {
                        this.isEditable() || (this._optMaxOffset = I,
                        this._setMaxOffset(I, !0));
                        return this
                    },
                    _resetMaxAllowableOffset: function() {
                        this.setMaxAllowableOffset(this._optMaxOffset);
                        this._prevScale = null;
                        this._refreshMaxAllowableOffset()
                    },
                    _refreshMaxAllowableOffset: function() {
                        this._calcMaxOffsetForAutoSnapshot();
                        this._updateMaxOffset();
                        this._needsRefresh = !1
                    },
                    getResolution: function() {
                        return this.getMaxAllowableOffset()
                    },
                    getMaxAllowableOffset: function() {
                        var I = this._quantizationParameters ? this._quantizationParameters.tolerance : void 0;
                        return null != this._maxOffset ? this._maxOffset : I
                    },
                    _setMaxOffset: function(I, Q) {
                        if (null == I)
                            return delete this._maxOffset,
                            delete this._quantizationParameters,
                            this;
                        this.quantize && this.supportsCoordinatesQuantization ? ("esriGeometryPolyline" === this.geometryType ? this._maxOffset = I : delete this._maxOffset,
                        this._quantizationParameters = I ? {
                            mode: "view",
                            originPosition: "upperLeft",
                            tolerance: I,
                            extent: this.fullExtent
                        } : null) : (this._isFractionalOffsetAllowed() && Q || (I = Math.floor(I)),
                        isNaN(I) || 0 === I ? delete this._maxOffset : this._maxOffset = I,
                        delete this._quantizationParameters);
                        return this
                    },
                    _isFractionalOffsetAllowed: function() {
                        return null == this.version || 10.1 <= this.version || navigator.languages && this._isLangWithDot(navigator.languages[0])
                    },
                    _isLangWithDot: function(I) {
                        I = (I = I && I.split("-")) && I[0] && I[0].toLowerCase();
                        return -1 !== l.indexOf(this._langsWithDot, I)
                    },
                    _langsWithDot: "ar en et fr he ja ko th vi zh".split(" "),
                    setAutoGeneralize: function(I) {
                        this.loaded ? this._canAutoGeneralize() && ((this._autoGeneralize = I) ? (this._isAutoSnapshotMode() && (this._prevScale = null),
                        this._updateMaxOffset()) : this._setMaxOffset(null)) : this._optAutoGen = I;
                        return this
                    },
                    _canAutoGeneralize: function() {
                        return !this.isEditable() && this.mode !== Ma.MODE_SNAPSHOT
                    },
                    setGDBVersion: function(I) {
                        this._collection || I === this.gdbVersion || !I && !this.gdbVersion || (this.gdbVersion = I,
                        this._task.gdbVersion = I,
                        this._url.query = m.mixin(this._url.query, {
                            gdbVersion: I
                        }),
                        this.loaded && (this.clearSelection(),
                        this._map && this.refresh()),
                        this.onGDBVersionChange());
                        return this
                    },
                    hasAllFeatures: function() {
                        return this._mode ? this._mode.hasAllFeatures() : !0
                    },
                    hasUpdateError: function() {
                        return this._mode ? this._mode.hasUpdateError() : !1
                    },
                    setDefinitionExpression: function(I) {
                        this._defnExpr = I;
                        this._hasPendingLimitQuery() || ((I = this._checkFeatureLimit()) ? this._evalModeAndApplyDefnExpr(I) : this._applyDefnExpr());
                        return this
                    },
                    _applyDefnExpr: function() {
                        var I = this._mode;
                        I && I.propertyChangeHandler(1)
                    },
                    _evalModeAndApplyDefnExpr: function(I) {
                        I.then(m.hitch(this, function(Q) {
                            Q && (Q instanceof Error || !Q.modeChanged) && this._applyDefnExpr()
                        }))
                    },
                    getDefinitionExpression: function() {
                        return this._defnExpr
                    },
                    hasDefinitionExpressionWithCurrentTimestamp: function() {
                        return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())
                    },
                    setTimeDefinition: function(I) {
                        this._isSnapshotMode() ? (this._timeDefn = I,
                        (I = this._mode) && I.propertyChangeHandler(2)) : console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id \x3d " + this.id + ", Layer URL \x3d " + this.url);
                        return this
                    },
                    getTimeDefinition: function() {
                        return this._timeDefn
                    },
                    setTimeOffset: function(I, Q) {
                        this._timeOffset = I;
                        this._timeOffsetUnits = Q;
                        (I = this._mode) && I.propertyChangeHandler(0);
                        return this
                    },
                    setUseMapTime: function(I) {
                        this.useMapTime = I;
                        this._toggleTime(!this.suspended);
                        (I = this._mode) && I.propertyChangeHandler(0)
                    },
                    selectFeatures: function(I, Q, ba, M) {
                        Q = Q || Ma.SELECTION_NEW;
                        this._hasSelectionError = this._hasPartialSelectedFeatures = !1;
                        I = this._getShallowClone(I);
                        var S = this._map
                          , fa = this
                          , ra = u._fixDfd(new h(u._dfdCanceller));
                        I.outFields = this.getOutFields();
                        I.returnGeometry = !0;
                        I.multipatchOption = this.multipatchOption;
                        S && (I.outSpatialReference = new r(S.spatialReference.toJson()));
                        if (!this._applyQueryFilters(I, !0)) {
                            var va = {
                                features: []
                            };
                            this._selectHandler(va, Q, ba, M, ra);
                            return ra
                        }
                        if (S = this._canDoClientSideQuery(I))
                            ra._pendingDfd = e(this._doQuery(I, S)),
                            ra._pendingDfd.then(function(Da) {
                                va = {
                                    features: Da
                                };
                                fa._selectHandler(va, Q, ba, M, ra)
                            });
                        else {
                            if (this._collection)
                                return this._resolve([Error("FeatureLayer::selectFeatures - " + this.invalidParams)], null, M, ra, !0),
                                ra;
                            if (this.loaded && !this.isQueryable())
                                return this._resolve([Error("Layer does not support query capability.")], null, M, ra, !0),
                                ra;
                            var Ca = this;
                            this._ts && (I._ts = (new Date).getTime());
                            S = this._canFetchPBFForQuery(I);
                            this._enableEditModeQuantization(I, S);
                            (ra._pendingDfd = this._task.execute(I, null, null, S ? {
                                format: "pbf"
                            } : null)).addCallbacks(function(Da) {
                                Ca._selectHandler(Da, Q, ba, M, ra)
                            }, function(Da) {
                                Ca._hasPartialSelectedFeatures = !0;
                                Ca._hasSelectionError = !0;
                                Ca._resolve([Da], null, M, ra, !0)
                            })
                        }
                        return ra
                    },
                    getSelectedFeatures: function() {
                        var I = this._selectedFeatures, Q = [], ba;
                        for (ba in I)
                            I.hasOwnProperty(ba) && Q.push(I[ba]);
                        return Q
                    },
                    clearSelection: function(I) {
                        var Q = this._selectedFeatures, ba = this._mode, M;
                        for (M in Q)
                            Q.hasOwnProperty(M) && (this._unSelectFeatureIIf(M, ba),
                            ba._removeFeatureIIf(M));
                        this._selectedFeatures = {};
                        this._isSelOnly && ba._applyTimeFilter(!0);
                        if (!I)
                            this.onSelectionClear();
                        return this
                    },
                    setSelectionSymbol: function(I) {
                        if (this._selectionSymbol = I) {
                            var Q = this._selectedFeatures, ba;
                            for (ba in Q)
                                Q.hasOwnProperty(ba) && Q[ba].setSymbol(I)
                        }
                        return this
                    },
                    getSelectionSymbol: function() {
                        return this._selectionSymbol
                    },
                    setLabelingInfo: function(I) {
                        I ? (this.labelingInfo = I,
                        this._fixLabelExpr()) : delete this.labelingInfo;
                        this._collection && (this._typesDirty = !0);
                        this._evalSurfaceType();
                        this.onLabelingInfoChange()
                    },
                    _fixLabelExpr: function() {
                        var I = /\[([^\[\]]+)\]/ig, Q, ba = this, M = function(S, fa) {
                            S = ba._getField(fa, !0);
                            return "[" + (S && S.name || fa) + "]"
                        };
                        l.forEach(this.labelingInfo, function(S) {
                            if (Q = S.labelExpression)
                                S.labelExpression = Q.replace(I, M)
                        })
                    },
                    _updateRequiredFieldsFromLabelingInfo: function() {
                        var I = [];
                        l.forEach(this.labelingInfo, function(Q) {
                            var ba = Q.labelExpressionInfo;
                            if (Q.labelExpression) {
                                var M = /[\[\]]/ig;
                                Q = Q.labelExpression.match(/\[[^\[\]]+\]/ig);
                                (Q = l.map(Q, function(fa) {
                                    return fa.replace(M, "")
                                })) && (I = I.concat(Q))
                            }
                            if (ba) {
                                if (ba.value) {
                                    var S = /[\{\}]/ig;
                                    Q = ba.value.match(/\{[^\{\}]+\}/ig);
                                    (Q = l.map(Q, function(fa) {
                                        return fa.replace(S, "")
                                    })) && (I = I.concat(Q))
                                }
                                ba.expression && (I = I.concat(V.extractFieldNames(ba.expression)))
                            }
                        });
                        I = l.map(I, function(Q) {
                            var ba = this.getField(Q);
                            return ba ? ba.name : Q
                        }, this);
                        this._requiredFields && (this._requiredFields = this._requiredFields.concat(I))
                    },
                    __msigns: [{
                        n: "applyEdits",
                        c: 5,
                        a: [{
                            i: 0
                        }, {
                            i: 1
                        }],
                        e: 4,
                        f: 1
                    }],
                    applyEdits: function(I, Q, ba, M, S, fa) {
                        var ra = fa.assembly
                          , va = fa.dfd;
                        this._applyNormalized(I, ra && ra[0]);
                        this._applyNormalized(Q, ra && ra[1]);
                        this.onBeforeApplyEdits(I, Q, ba);
                        var Ca = {}
                          , Da = this.objectIdField;
                        ra = {
                            f: "json"
                        };
                        var Ra = !1;
                        if (this._collection)
                            fa = {},
                            fa.addResults = I ? l.map(I, function() {
                                Ra = !0;
                                return {
                                    objectId: this._nextId++,
                                    success: !0
                                }
                            }, this) : null,
                            fa.updateResults = Q ? l.map(Q, function(Pa) {
                                Ra = !0;
                                var eb = Pa.attributes[Da];
                                Ca[eb] = Pa;
                                return {
                                    objectId: eb,
                                    success: !0
                                }
                            }, this) : null,
                            fa.deleteResults = ba ? l.map(ba, function(Pa) {
                                Ra = !0;
                                return {
                                    objectId: Pa.attributes[Da],
                                    success: !0
                                }
                            }, this) : null,
                            Ra ? this._editHandler(fa, I, Ca, M, S, va) : this._resolve([fa.addResults, fa.updateResults, fa.deleteResults], null, M, va);
                        else {
                            I && 0 < I.length && (ra.adds = this._convertFeaturesToJson(I, 0, 1),
                            Ra = !0);
                            if (Q && 0 < Q.length) {
                                for (fa = 0; fa < Q.length; fa++) {
                                    var Na = Q[fa];
                                    Ca[Na.attributes[Da]] = Na
                                }
                                ra.updates = this._convertFeaturesToJson(Q, 0, 0, 1);
                                Ra = !0
                            }
                            if (ba && 0 < ba.length) {
                                Q = [];
                                for (fa = 0; fa < ba.length; fa++)
                                    Q.push(ba[fa].attributes[Da]);
                                ra.deletes = Q.join(",");
                                Ra = !0
                            }
                            if (Ra) {
                                var Ja = this;
                                return v({
                                    url: this._url.path + "/applyEdits",
                                    content: m.mixin(ra, this._url.query),
                                    callbackParamName: "callback",
                                    load: function(Pa) {
                                        Ja._editHandler(Pa, I, Ca, M, S, va)
                                    },
                                    error: function(Pa) {
                                        Ja._resolve([Pa], null, S, va, !0)
                                    }
                                }, {
                                    usePost: !0
                                })
                            }
                            this._resolve([], null, M, va)
                        }
                    },
                    queryFeatures: function(I, Q, ba, M) {
                        return this._query("execute", "onQueryFeaturesComplete", I, Q, ba, M)
                    },
                    queryRelatedFeatures: function(I, Q, ba) {
                        return this._query("executeRelationshipQuery", "onQueryRelatedFeaturesComplete", I, Q, ba)
                    },
                    queryIds: function(I, Q, ba, M) {
                        return this._query("executeForIds", "onQueryIdsComplete", I, Q, ba, M)
                    },
                    queryCount: function(I, Q, ba, M) {
                        return this._query("executeForCount", "onQueryCountComplete", I, Q, ba, M)
                    },
                    queryExtent: function(I, Q, ba, M) {
                        return this._query("executeForExtent", "onQueryExtentComplete", I, Q, ba, M)
                    },
                    queryAttachmentInfos: function(I, Q, ba) {
                        var M = this._url.path + "/" + I + "/attachments"
                          , S = new h(u._dfdCanceller)
                          , fa = this;
                        M = B.normalize(M);
                        S._pendingDfd = v({
                            url: M,
                            content: m.mixin({
                                f: "json"
                            }, this._url.query),
                            callbackParamName: "callback",
                            load: function(ra) {
                                ra = ra.attachmentInfos;
                                var va;
                                l.forEach(ra, function(Ca) {
                                    va = d.objectToQuery({
                                        gdbVersion: fa._url.query && fa._url.query.gdbVersion,
                                        layer: fa._url.query && fa._url.query.layer,
                                        token: fa._getToken()
                                    });
                                    Ca.url = M + "/" + Ca.id + (va ? "?" + va : "");
                                    Ca.objectId = I
                                });
                                fa._resolve([ra], "onQueryAttachmentInfosComplete", Q, S)
                            },
                            error: function(ra) {
                                fa._resolve([ra], null, ba, S, !0)
                            }
                        });
                        return S
                    },
                    addAttachment: function(I, Q, ba, M) {
                        return this._sendAttachment("add", I, Q, ba, M)
                    },
                    updateAttachment: function(I, Q, ba, M, S) {
                        ba.appendChild(a.create("input", {
                            type: "hidden",
                            name: "attachmentId",
                            value: Q
                        }));
                        return this._sendAttachment("update", I, ba, M, S)
                    },
                    deleteAttachments: function(I, Q, ba, M) {
                        var S = this._url.path + "/" + I + "/deleteAttachments"
                          , fa = new h(u._dfdCanceller)
                          , ra = this;
                        Q = {
                            f: "json",
                            attachmentIds: Q.join(",")
                        };
                        fa._pendingDfd = v({
                            url: S,
                            content: m.mixin(Q, this._url.query),
                            callbackParamName: "callback",
                            load: m.hitch(this, function(va) {
                                va = va.deleteAttachmentResults;
                                va = l.map(va, function(Ca) {
                                    Ca = new Aa(Ca);
                                    Ca.attachmentId = Ca.objectId;
                                    Ca.objectId = I;
                                    return Ca
                                });
                                ra._resolve([va], "onDeleteAttachmentsComplete", ba, fa)
                            }),
                            error: function(va) {
                                ra._resolve([va], null, M, fa, !0)
                            }
                        }, {
                            usePost: !0
                        });
                        return fa
                    },
                    addType: function(I) {
                        var Q = this.types;
                        if (Q) {
                            if (l.some(Q, function(ba) {
                                return ba.id == I.id ? !0 : !1
                            }))
                                return !1;
                            Q.push(I)
                        } else
                            this.types = [I];
                        return this._typesDirty = !0
                    },
                    deleteType: function(I) {
                        if (this._collection) {
                            var Q = this.types;
                            if (Q) {
                                var ba = -1;
                                l.some(Q, function(M, S) {
                                    return M.id == I ? (ba = S,
                                    !0) : !1
                                });
                                if (-1 < ba)
                                    return this._typesDirty = !0,
                                    Q.splice(ba, 1)[0]
                            }
                        }
                    },
                    toJson: function() {
                        var I = this._cloneJson();
                        if (I) {
                            I = I.layerDefinition ? I : {
                                layerDefinition: I
                            };
                            var Q = I.layerDefinition
                              , ba = this._collection;
                            this._updateLayerDefinition(Q);
                            var M = null;
                            if (!ba || this._fcAdded)
                                M = {
                                    geometryType: Q.geometryType,
                                    features: this._convertFeaturesToJson(this.graphics, !0)
                                };
                            I.featureSet = m.mixin({}, I.featureSet || {}, M);
                            if (I.featureSet.transform) {
                                var S = I.featureSet.transform;
                                delete I.featureSet.transform;
                                M = new Y(I.featureSet);
                                M.quantize(S);
                                I.featureSet = M.toJson()
                            }
                            ba && (I.nextObjectId = this._nextId,
                            Q.capabilities = this.capabilities);
                            return I
                        }
                    },
                    getLayerDefinition: function() {
                        var I = this._cloneJson();
                        (I = I ? I.layerDefinition || I : null) && this._updateLayerDefinition(I);
                        return I
                    },
                    getFeatureCollectionLayer: function(I) {
                        var Q = new h
                          , ba = this.getLayerDefinition();
                        if (!ba)
                            return Q.reject(Error("layerDefinition not available")),
                            Q.promise;
                        I = I || [];
                        var M = new Ma({
                            layerDefinition: ba,
                            featureSet: {
                                geometryType: ba.geometryType,
                                features: l.map(I, function(ra) {
                                    return ra.toJson()
                                })
                            }
                        })
                          , S = M.on("load", function() {
                            S.remove();
                            fa.remove();
                            Q.resolve(M)
                        })
                          , fa = M.on("error", function() {
                            M.loaded || (S.remove(),
                            fa.remove(),
                            Q.reject(M.loadError))
                        });
                        return Q.promise
                    },
                    onSelectionComplete: function() {},
                    onSelectionClear: function() {},
                    onBeforeApplyEdits: function() {},
                    onEditsComplete: function() {},
                    onQueryFeaturesComplete: function() {},
                    onQueryRelatedFeaturesComplete: function() {},
                    onQueryIdsComplete: function() {},
                    onQueryCountComplete: function() {},
                    onQueryExtentComplete: function() {},
                    onQueryAttachmentInfosComplete: function() {},
                    onAddAttachmentComplete: function() {},
                    onUpdateAttachmentComplete: function() {},
                    onDeleteAttachmentsComplete: function() {},
                    onCapabilitiesChange: function() {},
                    onGDBVersionChange: function() {},
                    onQueryLimitExceeded: function() {},
                    onLabelingInfoChange: function() {},
                    onFeatureReductionRendererChange: function() {},
                    onFeatureReductionChange: function() {},
                    onFeatureUpdatesResult: function() {},
                    _cloneJson: function() {
                        var I = this._json;
                        return m.isString(I) ? k.fromJson(I) : m.clone(I)
                    },
                    _updateLayerDefinition: function(I) {
                        if (this._collection && this._typesDirty) {
                            I.types = l.map(this.types || [], function(S) {
                                return S.toJson()
                            });
                            var Q = this.renderer
                              , ba = this.labelingInfo
                              , M = I.drawingInfo;
                            !Q && !ba || M || (M = I.drawingInfo = {});
                            M && Q && -1 === Q.declaredClass.indexOf("TemporalRenderer") && (M.renderer = Q.toJson());
                            ba && (M.labelingInfo = l.map(ba, function(S) {
                                return S.toJson()
                            }))
                        }
                    },
                    _evalFeatureUpdates: function() {
                        if (!this._featureUpdatesPromise || this._featureUpdatesPromise.isFulfilled())
                            this._featureUpdatesPromise = this.hasFeatureUpdates().otherwise(function(I) {
                                return !(I && "cancel" === I.dojoType)
                            }).always(m.hitch(this, function(I) {
                                this._featureUpdatesPromise = null;
                                this.onFeatureUpdatesResult({
                                    hasUpdates: I
                                })
                            }))
                    },
                    _evalRefresh: function(I) {
                        (I.hasUpdates || this.hasDefinitionExpressionWithCurrentTimestamp()) && this.refresh()
                    },
                    _evalArcadeSupport: function() {
                        var I = new h;
                        setTimeout(m.hitch(this, function() {
                            this._initializeArcadeEngine().always(function() {
                                I.resolve()
                            })
                        }), 0);
                        return I.promise
                    },
                    _initializeArcadeEngine: function() {
                        var I = []
                          , Q = this.infoTemplate;
                        Q && Q.initializeArcadeEngine && I.push(Q.initializeArcadeEngine());
                        (Q = this.renderer) && Q.initializeArcadeEngine && I.push(Q.initializeArcadeEngine());
                        var ba = [];
                        l.forEach(this.labelingInfo, function(M) {
                            (M = M.labelExpressionInfo) && M.expression && ba.push(M.expression)
                        });
                        I.push(aa.initialize(ba));
                        return p(I)
                    },
                    _isGeometryOperationsUsed: function() {
                        var I = this.infoTemplate
                          , Q = this.renderer
                          , ba = this.labelingInfo;
                        return I && I.hasGeometryOperations && I.hasGeometryOperations() || Q && Q.hasGeometryOperations && Q.hasGeometryOperations() || l.some(ba, function(M) {
                            return V.hasGeometryOperations(M.labelExpressionInfo && M.labelExpressionInfo.expression)
                        }) ? !0 : !1
                    },
                    _forceIdentity: function() {
                        var I = new h
                          , Q = this
                          , ba = this._url && this._url.path;
                        var M = ba && ba.toLowerCase().indexOf("/rest/services");
                        var S = this.editFieldsInfo;
                        S = S && (S.creatorField || S.editorField);
                        (this.userIsAdmin || S) && !this._getToken() && -1 < M && q.id ? (M = ba.substring(0, M) + "/rest/info",
                        v({
                            url: M,
                            content: {
                                f: "json"
                            },
                            handleAs: "json",
                            callbackParamName: "callback"
                        }).then(function(fa) {
                            if (fa.owningSystemUrl)
                                return q.id.checkSignInStatus(fa.owningSystemUrl + "/sharing")
                        }).then(function(fa) {
                            if (fa)
                                return q.id.getCredential(ba)
                        }).then(function(fa) {
                            fa && Q._findCredential()
                        }).always(function() {
                            I.resolve()
                        })) : I.resolve();
                        return I.promise
                    },
                    _isSnapshotMode: function() {
                        return this._mode ? this._mode.isInstanceOf(X) : !1
                    },
                    _isOnDemandMode: function() {
                        return this._mode ? this._mode.isInstanceOf(oa) : !1
                    },
                    _isAutoSnapshotMode: function() {
                        return this._isAutoModeEnabled() && this.currentMode === Ma.MODE_SNAPSHOT
                    },
                    _getMaxFeaturesForAutoSnapshotMode: function() {
                        var I = this.geometryType;
                        if ("esriGeometryPolyline" === I || "esriGeometryPolygon" === I || "esriGeometryMultipoint" === I || this.hasXYFootprint())
                            var Q = this.maxRecordCountForAuto;
                        else
                            "esriGeometryPoint" === I && (Q = this.maxPointCountForAuto);
                        return Q
                    },
                    getLastExceedsLimitResult: function() {
                        return this._lastExceedsLimitResult
                    },
                    _canUseSnapshotMode: function(I) {
                        this._lastExceedsLimitResult = I = (I = I && I.features && I.features[0]) && I.attributes && I.attributes.exceedslimit;
                        return !(this.mode !== Ma.MODE_AUTO || this.isEditable() || 0 !== I || !(this._isPaginationAllowed() || this.maxRecordCount >= this._getMaxFeaturesForAutoSnapshotMode()))
                    },
                    _evalModeFromFLimit: function(I) {
                        this._canUseSnapshotMode(I) ? this._enableAutoSnapshotMode() : this._enableAutoOnDemandMode()
                    },
                    _enableAutoSnapshotMode: function() {
                        var I = Ma.MODE_SNAPSHOT;
                        this.isFeatureReductionApplied() ? this._updatePreFReductionState(I) : this._preSurfaceChangeState ? (this._updatePreSurfaceChangeState(I),
                        this._evalSurfaceType(!0)) : this.currentMode !== I && this._setFetchMode(Ma.MODE_AUTO, I)
                    },
                    _enableAutoOnDemandMode: function() {
                        var I = Ma.MODE_ONDEMAND;
                        this.isFeatureReductionApplied() ? this._updatePreFReductionState(I) : this._preSurfaceChangeState ? this._updatePreSurfaceChangeState(I) : this.currentMode !== I && (this._setFetchMode(Ma.MODE_AUTO, I),
                        this._evalSurfaceType())
                    },
                    _evalModeFromFReduction: function(I) {
                        this.loaded && (I && this.isFeatureReductionEnabled() && this._canCluster(I) ? this._enableFReductionMode() : this._disableFReductionMode())
                    },
                    _enableFReductionMode: function() {
                        this._evalSurfaceType(!0);
                        if (!this._preFReductionState) {
                            var I = this.currentMode;
                            I !== Ma.MODE_SNAPSHOT && I !== Ma.MODE_STREAM && I !== Ma.MODE_SELECTION && (this._preFReductionState = {
                                mode: this.mode,
                                currentMode: this.currentMode
                            },
                            this._setFetchMode(this.mode === Ma.MODE_AUTO ? Ma.MODE_AUTO : Ma.MODE_SNAPSHOT, Ma.MODE_SNAPSHOT))
                        }
                    },
                    _disableFReductionMode: function() {
                        var I = this._preFReductionState;
                        this._preFReductionState = null;
                        !I || I.mode === this.mode && I.currentMode === this.currentMode || (this._setFetchMode(I.mode, I.currentMode),
                        this._evalSurfaceType())
                    },
                    _updatePreFReductionState: function(I) {
                        this._preFReductionState = this._preFReductionState || {};
                        this._preFReductionState.mode = Ma.MODE_AUTO;
                        this._preFReductionState.currentMode = I
                    },
                    _evalModeFromSurface: function() {
                        this.hasWebGLSurface() ? this._enableWebGLSurfaceMode() : this._disableWebGLSurfaceMode()
                    },
                    _enableWebGLSurfaceMode: function() {
                        this._preSurfaceChangeState || (this._preSurfaceChangeState = {
                            mode: this.mode,
                            currentMode: this.currentMode
                        },
                        this._setFetchMode(this.mode === Ma.MODE_AUTO ? Ma.MODE_AUTO : Ma.MODE_ONDEMAND, Ma.MODE_ONDEMAND, this.webglDeps.OnDemandDrillMode))
                    },
                    _disableWebGLSurfaceMode: function() {
                        var I = this._preSurfaceChangeState;
                        I && (this._preSurfaceChangeState = null,
                        this._setFetchMode(I.mode, I.currentMode))
                    },
                    _updatePreSurfaceChangeState: function(I) {
                        this._preSurfaceChangeState = this._preSurfaceChangeState || {};
                        this._preSurfaceChangeState.mode = Ma.MODE_AUTO;
                        this._preSurfaceChangeState.currentMode = I
                    },
                    _setFetchMode: function(I, Q, ba) {
                        this.clearSelection();
                        this._mode.suspend();
                        this._mode.destroy();
                        this.mode = I;
                        this.currentMode = Q;
                        ba = ba || this._getModeConstructor(Q);
                        this._mode = new ba(this);
                        this.queryPagination = Q === Ma.MODE_ONDEMAND && -1 === ba.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode") ? !1 : this._isPaginationAllowed();
                        (I = this.getMap()) && I.loaded && (this._resetMaxAllowableOffset(),
                        this._mode.initialize(I),
                        this._mode.startup())
                    },
                    _isPaginationAllowed: function() {
                        return !(!this._optQueryPagination || this.loaded && !this.advancedQueryCapabilities.supportsPagination)
                    },
                    _getModeConstructor: function(I) {
                        var Q;
                        I === Ma.MODE_SNAPSHOT ? Q = X : I === Ma.MODE_ONDEMAND && (Q = oa);
                        return Q
                    },
                    _hasOnDemandDrillMode: function() {
                        var I = this._mode;
                        I = I && I.declaredClass;
                        return !!(I && -1 < I.toLowerCase().indexOf("ondemanddrillmode"))
                    },
                    _checkFeatureLimit: function() {
                        this._limitPromise && (this._limitPromise.cancel(),
                        this._limitPromise = null);
                        var I = this._queryLimit();
                        I && (this._lastExceedsLimitResult = null,
                        this._limitPromise = I.then(m.hitch(this, function(Q) {
                            var ba = this.currentMode;
                            this._evalModeFromFLimit(Q);
                            return {
                                modeChanged: this.currentMode !== ba
                            }
                        })).always(m.hitch(this, function(Q) {
                            this._limitPromise = null;
                            return Q
                        })));
                        return this._limitPromise
                    },
                    _hasPendingLimitQuery: function() {
                        return !!this._exceedsLimitTimer
                    },
                    _queryLimit: function() {
                        if (this._isAutoModeEnabled()) {
                            var I, Q, ba = new h(function() {
                                clearTimeout(I);
                                I = null;
                                Q && !Q.isFulfilled() && Q.cancel();
                                Q = null
                            }
                            );
                            this._exceedsLimitTimer = I = setTimeout(m.hitch(this, function() {
                                this._exceedsLimitTimer = null;
                                var M = new ea
                                  , S = new ia;
                                S.statisticType = "exceedslimit";
                                S.maxPointCount = this.maxPointCountForAuto;
                                S.maxRecordCount = this.maxRecordCountForAuto;
                                S.maxVertexCount = this.maxVertexCountForAuto;
                                S.outStatisticFieldName = "exceedslimit";
                                M.outStatistics = [S];
                                Q = this.queryFeatures(M).promise.then(function(fa) {
                                    ba.resolve(fa)
                                }).otherwise(function(fa) {
                                    ba.reject(fa)
                                })
                            }), 0);
                            return ba.promise
                        }
                    },
                    _isAutoModeEnabled: function() {
                        return this.mode === Ma.MODE_AUTO && this.reHostedFS.test(this.url)
                    },
                    _updateCaps: function() {
                        var I = this._editable
                          , Q = m.trim(this.capabilities || "")
                          , ba = l.map(Q ? Q.split(",") : [], m.trim)
                          , M = l.map(Q ? Q.toLowerCase().split(",") : [], m.trim);
                        Q = l.indexOf(M, "editing");
                        var S;
                        M = {
                            Create: l.indexOf(M, "create"),
                            Update: l.indexOf(M, "update"),
                            Delete: l.indexOf(M, "delete")
                        };
                        if (I && -1 === Q)
                            ba.push("Editing");
                        else if (!I && -1 < Q) {
                            I = [Q];
                            for (S in M)
                                -1 < M[S] && I.push(M[S]);
                            I.sort();
                            for (S = I.length - 1; 0 <= S; S--)
                                ba.splice(I[S], 1)
                        }
                        this.capabilities = ba.join(",")
                    },
                    _counter: {
                        value: 0
                    },
                    _getUniqueId: function() {
                        return this._counter.value++
                    },
                    onSuspend: function() {
                        this.inherited(arguments);
                        this._suspendImpl()
                    },
                    _suspendImpl: function(I) {
                        this._toggleTime(!1);
                        this._refreshHandle && (this._refreshHandle.remove(),
                        this._refreshHandle = null);
                        var Q = this._mode;
                        Q && (Q.suspend(),
                        I && Q.destroy())
                    },
                    onResume: function(I) {
                        this.inherited(arguments);
                        this._toggleTime(!0);
                        this._refreshHandle = this.on("feature-updates-result", m.hitch(this, this._evalRefresh));
                        var Q = this._map
                          , ba = this._getRenderer();
                        if (I.firstOccurrence) {
                            if (this._fixRendererFields(),
                            this._updateRequiredFieldsFromLabelingInfo(),
                            this._checkFields(),
                            this.clearSelection(),
                            this._evalFeatureReduction(),
                            this.timeInfo && !this._trackManager && (this._trackIdField || ba && (ba.latestObservationRenderer || ba.trackRenderer)) && (this._trackManager = new U(this),
                            this._trackManager.initialize(Q),
                            this._childLayer = this._trackManager.container),
                            ba && "colors"in ba && "blurRadius"in ba && "maxPixelIntensity"in ba && "esriGeometryPoint" == this.geometryType && !this._heatmapManager && (this._heatmapManager = new ma(this),
                            this._heatmapManager.initialize(Q)),
                            this._zoomConnect = w.connect(Q, "onZoomEnd", this, this._zoomEndHandler),
                            this._refreshMaxAllowableOffset(),
                            ba = this._mode)
                                ba._init || ba.initialize(Q),
                                ba.startup()
                        } else
                            this._zoomEndHandler(),
                            this._mode && this._mode.resume()
                    },
                    _zoomEndHandler: function() {
                        var I = this._map;
                        this._updateMaxOffset();
                        this._prevScale = I.getScale();
                        !this.suspended && this._needsRefresh && this.refresh()
                    },
                    _updateMaxOffset: function() {
                        var I = this._map;
                        I && I.loaded && this._autoGeneralize && (this._isAutoSnapshotMode() ? (I = this.getMaxAllowableOffset(),
                        this._setMaxOffset(this._getMaxOffsetForScale(), !0),
                        this._needsRefresh || (this._needsRefresh = I != this.getMaxAllowableOffset())) : this._setMaxOffset(I.extent.getWidth() / I.width, !I.extent.spatialReference.isWebMercator()))
                    },
                    _getMaxOffsetForScale: function() {
                        if (this._map) {
                            var I = this._map.getScale()
                              , Q = this._calculatedScale
                              , ba = this._calcMaxOffset
                              , M = this._prevScale;
                            return I >= Q && (null == M || M < Q) ? ba : I < Q && (null == M || M >= Q) ? null : this.getMaxAllowableOffset()
                        }
                    },
                    _calcMaxOffsetForAutoSnapshot: function() {
                        var I = this._map;
                        if (I && this._canAutoGeneralize() && this._isAutoSnapshotMode() && this._autoGeneralize && null == this.getMaxAllowableOffset()) {
                            var Q = this.generalizeForScale;
                            this._calculatedScale = Q = this.maxScale ? this.maxScale : this.minScale ? Math.min(Q, this.minScale) : Math.min(Q, Z.getScale(I, this.initialExtent));
                            this._calcMaxOffset = I.extent.getWidth() / I.width / I.getScale() * Q
                        } else
                            this._calculatedScale = this._calcMaxOffset = void 0
                    },
                    _toggleTime: function(I) {
                        var Q = this._map;
                        I && this.timeInfo && this.useMapTime && Q ? (this._mapTimeExtent = Q.timeExtent,
                        this._timeConnect || (this._timeConnect = w.connect(Q, "onTimeExtentChange", this, this._timeChangeHandler))) : (this._mapTimeExtent = null,
                        w.disconnect(this._timeConnect),
                        this._timeConnect = null)
                    },
                    _timeChangeHandler: function(I) {
                        this._mapTimeExtent = I;
                        (I = this._mode) && I.propertyChangeHandler(0)
                    },
                    _getOffsettedTE: function(I) {
                        var Q = this._timeOffset
                          , ba = this._timeOffsetUnits;
                        return I && Q && ba ? I.offset(-1 * Q, ba) : I
                    },
                    _getTimeOverlap: function(I, Q) {
                        return I && Q ? I.intersection(Q) : I || Q
                    },
                    _getTimeFilter: function(I) {
                        var Q = this.getTimeDefinition();
                        if (Q) {
                            var ba = this._getTimeOverlap(Q, null);
                            if (!ba)
                                return [!1]
                        }
                        if (I) {
                            if (I = ba ? this._getTimeOverlap(I, ba) : I,
                            !I)
                                return [!1]
                        } else
                            I = ba;
                        return [!0, I]
                    },
                    _getAttributeFilter: function(I) {
                        var Q = []
                          , ba = this.getDefinitionExpression();
                        ba && Q.push(ba);
                        I && Q.push(I);
                        this.subtypeField && this.subtypeCode && Q.push(this.subtypeField + " \x3d " + this.subtypeCode);
                        1 < Q.length && (Q = l.map(Q, function(M) {
                            return "(" + M + ")"
                        }));
                        return Q.length ? Q.join(" AND ") : null
                    },
                    _applyQueryFilters: function(I, Q) {
                        I.where = this._getAttributeFilter(I.where);
                        I.returnGeometry && null == I.maxAllowableOffset && !I.quantizationParameters && (I.maxAllowableOffset = this._maxOffset,
                        I.quantizationParameters = this._quantizationParameters);
                        Q && this.supportsAdvancedQueries && (I.orderByFields = I.orderByFields || this.getOrderByFields());
                        if (this.timeInfo)
                            if (Q = this._getTimeFilter(I.timeExtent),
                            Q[0])
                                I.timeExtent = Q[1];
                            else
                                return !1;
                        return !0
                    },
                    _add: function(I) {
                        var Q = this._selectionSymbol
                          , ba = I.attributes
                          , M = this.visibilityField;
                        Q && this._isSelOnly && I.setSymbol(Q);
                        if (M && ba && ba.hasOwnProperty(M))
                            I[ba[M] ? "show" : "hide"]();
                        return this.add.apply(this, arguments)
                    },
                    _remove: function() {
                        return this.remove.apply(this, arguments)
                    },
                    _canDoClientSideQuery: function(I, Q) {
                        var ba = [], M = this._map, S;
                        if ((this._collection || !this._isTable && M) && !(I.text || I.where && I.where !== this.getDefinitionExpression() || I.orderByFields && I.orderByFields.length && (S = this.getOrderByFields() || []) && I.orderByFields.join() !== S.join() || I.outStatistics || I.returnDistinctValues)) {
                            S = this._isSnapshotMode();
                            var fa = this._isSelOnly;
                            Q = S ? null : Q ? this._getExtentOfTiles(M.extent) : M.extent;
                            if (M = I.geometry) {
                                if (fa || I.spatialRelationship !== ea.SPATIAL_REL_INTERSECTS || "extent" !== M.type || !S && !Q.contains(M))
                                    return;
                                ba.push(1)
                            }
                            if (Q = I.objectIds)
                                if (S)
                                    ba.push(2);
                                else {
                                    M = Q.length;
                                    var ra = this._mode, va = 0, Ca;
                                    for (Ca = 0; Ca < M; Ca++)
                                        ra._getFeature(Q[Ca]) && va++;
                                    if (va === M)
                                        ba.push(2);
                                    else
                                        return
                                }
                            if (this.timeInfo)
                                if (I = I.timeExtent,
                                Q = this._mapTimeExtent,
                                S)
                                    I && ba.push(3);
                                else if (fa) {
                                    if (I)
                                        return
                                } else if (Q)
                                    if (-1 !== l.indexOf(ba, 2))
                                        I && ba.push(3);
                                    else if (-1 !== l.indexOf(ba, 1))
                                        I == Q && ba.push(3);
                                    else
                                        return;
                                else if (0 < ba.length)
                                    I && ba.push(3);
                                else if (I)
                                    return;
                            return 0 < ba.length ? ba : null
                        }
                    },
                    _getAbsMid: function(I) {
                        return C.toAbsMid ? C.toAbsMid(I) : y.id.replace(/\/[^\/]*$/ig, "/") + I
                    },
                    _doQuery: function(I, Q, ba) {
                        var M = []
                          , S = this.objectIdField
                          , fa = this
                          , ra = new h
                          , va = new h
                          , Ca = this.graphics;
                        if (-1 !== l.indexOf(Q, 1)) {
                            var Da = this.spatialIndex || this._map && this._map.spatialIndex, Ra, Na = I.geometry._normalize(null, !0);
                            null == Da && Oa.autoSpatialIndexing ? Ra = (this._map || this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(m.hitch(this, m.partial(this._getFromIndex, Na, Da)), function(Ja) {
                                va.resolve(m.hitch(this, m.partial(this._filterByExtent, Ca, Na)))
                            }) : Da && (Ra = this._getFromIndex(Na, Da));
                            Ra ? Ra.then(function(Ja) {
                                for (var Pa = 0; Pa < Ja.length; Pa++)
                                    Ja[Pa].results && (M = M.concat(Ja[Pa].results));
                                va.resolve(M)
                            }).otherwise(function(Ja) {
                                va.reject(Ja)
                            }) : va.resolve(this._filterByExtent(Ca, Na))
                        } else
                            va.resolve(Ca);
                        va.then(function(Ja) {
                            M = Ja;
                            if (-1 !== l.indexOf(Q, 2)) {
                                var Pa = I.objectIds;
                                M = l.filter(M, function(eb) {
                                    return -1 < l.indexOf(Pa, eb.attributes[S])
                                })
                            }
                            -1 !== l.indexOf(Q, 3) && fa.timeInfo && (Ja = I.timeExtent,
                            M = fa._filterByTime(M, Ja.startTime, Ja.endTime).match);
                            ba && (M = l.map(M, function(eb) {
                                return eb.attributes[S]
                            }, this));
                            ra.resolve(M)
                        });
                        return ra
                    },
                    _getFromIndex: function(I, Q) {
                        Q = Q || this.spatialIndex || this._map.spatialIndex;
                        I instanceof Array || (I = [I]);
                        var ba = this.id;
                        return t(l.map(I, function(M) {
                            return Q.intersects(M, ba)
                        }))
                    },
                    _filterByExtent: function(I, Q) {
                        for (var ba = [], M = 0, S = I.length; M < S; M++) {
                            var fa = I[M]
                              , ra = fa.geometry;
                            ra && (this.normalization && Q.length ? (Q[0].intersects(ra) || Q[1].intersects(ra)) && ba.push(fa) : Q.intersects(ra) && ba.push(fa))
                        }
                        return ba
                    },
                    _filterByTime: function(I, Q, ba) {
                        var M = this._startTimeField, S = this._endTimeField, fa;
                        this._twoTimeFields || (fa = M || S);
                        var ra = x.isDefined, va = [], Ca = [], Da, Ra = I.length;
                        Q = Q ? Q.getTime() : -Infinity;
                        ba = ba ? ba.getTime() : Infinity;
                        if (fa)
                            for (Da = 0; Da < Ra; Da++) {
                                var Na = I[Da];
                                var Ja = Na.attributes;
                                M = Ja[fa];
                                M >= Q && M <= ba ? va.push(Na) : Ca.push(Na)
                            }
                        else
                            for (Da = 0; Da < Ra; Da++)
                                Na = I[Da],
                                Ja = Na.attributes,
                                fa = Ja[M],
                                Ja = Ja[S],
                                fa = ra(fa) ? fa : -Infinity,
                                Ja = ra(Ja) ? Ja : Infinity,
                                fa >= Q && fa <= ba || Ja >= Q && Ja <= ba || Q >= fa && ba <= Ja ? va.push(Na) : Ca.push(Na);
                        return {
                            match: va,
                            noMatch: Ca
                        }
                    },
                    _getSizeVariables: function(I) {
                        return I && l.filter(I.getVisualVariablesForType("sizeInfo", !1), function(Q) {
                            return !(!Q.field && !Q.valueExpression)
                        })
                    },
                    _needClientSideSorting: function(I) {
                        return this._collection ? !(!I || !I.length) : l.some(I, function(Q) {
                            return !!Q.valueExpression
                        })
                    },
                    _sortFeatures: function(I) {
                        var Q = this.renderer
                          , ba = this._getSizeVariables(Q);
                        if (I && 1 < I.length && this._needClientSideSorting(ba)) {
                            var M = ba[0]
                              , S = this;
                            I.sort(function(fa, ra) {
                                fa._layer || (fa._layer = S);
                                ra._layer || (ra._layer = S);
                                fa = Q._getDataValue(fa, M, "sizeInfo");
                                ra = Q._getDataValue(ra, M, "sizeInfo");
                                return null == fa ? -1 : null == ra ? 1 : ra - fa
                            })
                        }
                        return I
                    },
                    _resolve: function(I, Q, ba, M, S) {
                        Q && this[Q].apply(this, I);
                        ba && ba.apply(null, I);
                        M && u._resDfd(M, I, S)
                    },
                    _getShallowClone: function(I) {
                        var Q = new ea, ba;
                        for (ba in I)
                            I.hasOwnProperty(ba) && (Q[ba] = I[ba]);
                        return Q
                    },
                    _canFetchPBF: function() {
                        return !!(Ua && Xa && this.supportsFormatPBF)
                    },
                    _canFetchPBFForQuery: function(I) {
                        return !(!this._canFetchPBF() || !this._isCacheHintEnabled(I) && this._isAutoSnapshotMode() || !(I.quantizationParameters || !this.isEditable() && this.supportsQuantizationEditMode) || I.outStatistics)
                    },
                    _enableEditModeQuantization: function(I, Q) {
                        I && Q && !I.quantizationParameters && (I.quantizationParameters = {
                            mode: "edit"
                        })
                    },
                    _enableCacheHint: function(I, Q) {
                        var ba = this.advancedQueryCapabilities;
                        ba && ba.supportsQueryWithCacheHint ? null == I.cacheHint && (I.cacheHint = !0) : ba && ba.supportsQueryWithResultType && this.reHostedFS.test(this.url) && !I.resultType && (I.resultType = Q || "coherent")
                    },
                    _isCacheHintSupported: function() {
                        var I = this.advancedQueryCapabilities;
                        return I ? !!(I.supportsQueryWithCacheHint || I.supportsQueryWithResultType && this.reHostedFS.test(this.url)) : !1
                    },
                    _isCacheHintEnabled: function(I) {
                        var Q = this.advancedQueryCapabilities;
                        return I && Q ? !!(Q.supportsQueryWithCacheHint && I.cacheHint || Q.supportsQueryWithResultType && this.reHostedFS.test(this.url) && ("coherent" === I.resultType || "tile" === I.resultType)) : !1
                    },
                    _query: function(I, Q, ba, M, S, fa) {
                        var ra = this
                          , va = this._map;
                        fa = fa && fa.snapToTiles;
                        var Ca = new h(u._dfdCanceller), Da = ba, Ra, Na, Ja;
                        if ("executeRelationshipQuery" !== I) {
                            Da = this._getShallowClone(ba);
                            var Pa = this.getOutFields();
                            Da.outFields || (Da.outFields = Pa);
                            Da.outFields && Da.outFields.length && (Na = -1 < l.indexOf(Pa, "*") ? !1 : !l.every(Da.outFields, function(bb) {
                                return -1 < l.indexOf(Pa, bb)
                            }));
                            Da.returnGeometry = ba.hasOwnProperty("returnGeometry") ? ba.returnGeometry : !ba.outStatistics;
                            Da.returnGeometry && (Da.multipatchOption = this.multipatchOption,
                            null != Da.maxAllowableOffset || Da.quantizationParameters) && (ba = null != Da.maxAllowableOffset ? Da.maxAllowableOffset : Da.quantizationParameters.tolerance,
                            null != ba && ba !== this.getMaxAllowableOffset() && (Ja = !0));
                            va && (va = va && va.spatialReference,
                            (ba = Da.outSpatialReference) ? Ra = !ba.equals(va) : Da.outSpatialReference = new r(va.toJson()));
                            fa && (va = Da.geometry) && "extent" === va.type && (Da.geometry = this._getExtentOfTiles(va),
                            va !== Da.geometry && this._enableCacheHint(Da));
                            if (!this._applyQueryFilters(Da, "execute" === I && !Da.outStatistics)) {
                                switch (I) {
                                case "execute":
                                    var eb = new Y({
                                        features: []
                                    });
                                    break;
                                case "executeForIds":
                                    eb = [];
                                    break;
                                case "executeForCount":
                                    eb = 0;
                                    break;
                                case "executeForExtent":
                                    eb = {}
                                }
                                this._resolve([eb], Q, M, Ca);
                                return Ca
                            }
                            if (fa = "executeForExtent" !== I && !Ra && !Na && !Ja && this._canDoClientSideQuery(Da, fa))
                                return Ca._pendingDfd = e(this._doQuery(Da, fa, "executeForIds" === I || "executeForCount" === I)),
                                Ca._pendingDfd.then(function(bb) {
                                    switch (I) {
                                    case "execute":
                                        eb = new Y;
                                        eb.features = bb;
                                        break;
                                    case "executeForIds":
                                        eb = bb;
                                        break;
                                    case "executeForCount":
                                        eb = bb.length
                                    }
                                    ra._resolve([eb], Q, M, Ca)
                                }),
                                Ca
                        }
                        if (this._collection)
                            return this._resolve([Error("FeatureLayer::_query - " + this.invalidParams)], null, S, Ca, !0),
                            Ca;
                        if (this.loaded && !this.isQueryable())
                            return this._resolve([Error("Layer does not support query capability.")], null, S, Ca, !0),
                            Ca;
                        this._ts && (Da._ts = (new Date).getTime());
                        fa = "execute" === I && this._canFetchPBFForQuery(Da);
                        this._enableEditModeQuantization(Da, fa);
                        (Ca._pendingDfd = this._task[I](Da, null, null, fa ? {
                            format: "pbf"
                        } : null)).addCallbacks(function(bb) {
                            var gb = !!Da.outStatistics || Ra || Na || Ja;
                            if ("execute" === I || "executeRelationshipQuery" === I)
                                if ("execute" === I) {
                                    var cb = bb.features;
                                    var kb = cb.length;
                                    for (--kb; 0 <= kb; kb--)
                                        if (cb[kb]._layer = ra,
                                        !gb && !ra._isTable) {
                                            var ub = ra._mode._getFeature(cb[kb].attributes[ra.objectIdField]);
                                            ub && cb.splice(kb, 1, ub)
                                        }
                                } else
                                    for (ub in bb)
                                        if (bb.hasOwnProperty(ub))
                                            for (cb = bb[ub].features,
                                            kb = cb.length,
                                            --kb; 0 <= kb; kb--)
                                                cb[kb]._layer = ra;
                            ra._resolve([bb], Q, M, Ca)
                        }, function(bb) {
                            ra._resolve([bb], null, S, Ca, !0)
                        });
                        return Ca
                    },
                    _getExtentOfTiles: function(I) {
                        var Q = this._isOnDemandMode() && this._mode._gridLayer || T.createFromFeatureLayer({
                            layer: this
                        })
                          , ba = this.getMap();
                        ba = ba && ba.getTargetExtent(I);
                        return Q && ba && Q.getExtentOfIntersectingCells(ba) || I
                    },
                    _convertFeaturesToJson: function(I, Q, ba, M) {
                        var S = [], fa = this._selectionSymbol, ra = this.visibilityField, va, Ca = this.objectIdField;
                        this.loaded && (ba || M) && (va = l.filter(this.fields, function(eb) {
                            return !1 === eb.editable && (!M || eb.name !== Ca)
                        }));
                        for (ba = 0; ba < I.length; ba++) {
                            var Da = I[ba]
                              , Ra = {}
                              , Na = Da.geometry
                              , Ja = Da.attributes
                              , Pa = Da.symbol;
                            !Na || M && this.loaded && !this.allowGeometryUpdates || (Ra.geometry = Na.toJson());
                            ra ? (Ra.attributes = Ja = m.mixin({}, Ja),
                            Ja[ra] = Da.visible ? 1 : 0) : Ja && (Ra.attributes = m.mixin({}, Ja));
                            Ra.attributes && va && va.length && l.forEach(va, function(eb) {
                                delete Ra.attributes[eb.name]
                            });
                            Pa && Pa !== fa && (Ra.symbol = Pa.toJson());
                            S.push(Ra)
                        }
                        return Q ? S : k.toJson(S)
                    },
                    _selectHandler: function(I, Q, ba, M, S) {
                        switch (Q) {
                        case Ma.SELECTION_NEW:
                            this.clearSelection(!0);
                            var fa = !0;
                            break;
                        case Ma.SELECTION_ADD:
                            fa = !0;
                            break;
                        case Ma.SELECTION_SUBTRACT:
                            fa = !1
                        }
                        M = I.features;
                        var ra = this._mode
                          , va = []
                          , Ca = this.objectIdField;
                        if (fa)
                            for (fa = 0; fa < M.length; fa++) {
                                var Da = M[fa];
                                var Ra = Da.attributes[Ca];
                                Da = ra._addFeatureIIf(Ra, Da);
                                va.push(Da);
                                this._selectFeatureIIf(Ra, Da, ra)
                            }
                        else
                            for (fa = 0; fa < M.length; fa++)
                                Da = M[fa],
                                Ra = Da.attributes[Ca],
                                this._unSelectFeatureIIf(Ra, ra),
                                Ra = ra._removeFeatureIIf(Ra),
                                va.push(Ra || Da);
                        this._isSelOnly && ra._applyTimeFilter(!0);
                        this._isImageService && 10.7 > this.version && void 0 === I.exceededTransferLimit && (I.exceededTransferLimit = M.length === this.maxRecordCount);
                        this._hasPartialSelectedFeatures = !!I.exceededTransferLimit;
                        this._resolve([va, Q, I.exceededTransferLimit ? {
                            queryLimitExceeded: !0
                        } : null], "onSelectionComplete", ba, S);
                        if (I.exceededTransferLimit)
                            this.onQueryLimitExceeded()
                    },
                    _selectFeatureIIf: function(I, Q, ba) {
                        var M = this._selectedFeatures
                          , S = M[I];
                        S || (ba._incRefCount(I),
                        M[I] = Q,
                        this._isTable || (this._setSelectSymbol(Q),
                        Q.attr("data-selected", "")));
                        return S || Q
                    },
                    _unSelectFeatureIIf: function(I, Q) {
                        var ba = this._selectedFeatures[I];
                        ba && (Q._decRefCount(I),
                        delete this._selectedFeatures[I],
                        this._isTable || (this._setUnSelectSymbol(ba),
                        ba.attr("data-selected")));
                        return ba
                    },
                    _setSelectSymbol: function(I) {
                        var Q = this._selectionSymbol;
                        Q && !this._isSelOnly && I.setSymbol(Q)
                    },
                    _setUnSelectSymbol: function(I) {
                        var Q = this._selectionSymbol;
                        Q && !this._isSelOnly && Q === I.symbol && I.setSymbol(null, !0)
                    },
                    _getOutFields: function() {
                        var I = [this.objectIdField, this.typeIdField, this.creatorField, this._startTimeField, this._endTimeField, this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);
                        I = l.filter(I, function(ba, M, S) {
                            return !!ba && l.indexOf(S, ba) === M
                        });
                        var Q = m.clone(this._outFields);
                        if (Q) {
                            if (-1 !== l.indexOf(Q, "*"))
                                return Q;
                            l.forEach(I, function(ba) {
                                -1 === l.indexOf(Q, ba) && Q.push(ba)
                            });
                            return Q
                        }
                        return I
                    },
                    _checkFields: function(I) {
                        var Q = I || this._getOutFields();
                        l.forEach(Q, function(ba) {
                            "*" !== ba && (this._getField(ba) || console.debug("esri.layers.FeatureLayer: " + x.substitute({
                                url: this.url,
                                field: ba
                            }, "unable to find '${field}' field in the layer 'fields' information [url: ${url}]")))
                        }, this);
                        I || this._isTable || this._fserver || this._collection || this._isStream || l.some(this.fields, function(ba) {
                            return ba && "esriFieldTypeGeometry" === ba.type ? !0 : !1
                        }) || console.debug("esri.layers.FeatureLayer: " + x.substitute({
                            url: this.url
                        }, "unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"))
                    },
                    _fixFieldCase: function(I, Q, ba) {
                        var M = I && I[Q], S;
                        if (M && !m.isFunction(M)) {
                            if (S = !this._getField(M) && this._getField(M, !0))
                                M = I[Q] = S.name;
                            ba && ba.push(M)
                        }
                        return M
                    },
                    _fixRendererFields: function() {
                        var I = this.renderer;
                        this._orderBy = null;
                        this._requiredFields = [];
                        if (I && 0 < this.fields.length) {
                            var Q = [], ba;
                            I = l.filter([I, I.observationRenderer, I.latestObservationRenderer, I.trackRenderer], x.isDefined);
                            var M = [].concat(I);
                            l.forEach(I, function(S) {
                                l.forEach(S.rendererInfos, function(fa) {
                                    fa.renderer && M.push(fa.renderer)
                                })
                            });
                            l.forEach(M, function(S) {
                                this._fixFieldCase(S, "attributeField", Q);
                                this._fixFieldCase(S, "attributeField2", Q);
                                this._fixFieldCase(S, "attributeField3", Q);
                                this._fixFieldCase(S.rotationInfo, "field", Q);
                                (ba = this._fixFieldCase(S.sizeInfo, "field", Q)) && !this._orderBy && (this._orderBy = [ba + " DESC"]);
                                this._fixFieldCase(S.sizeInfo, "normalizationField", Q);
                                this._fixFieldCase(S.colorInfo, "field", Q);
                                this._fixFieldCase(S.colorInfo, "normalizationField", Q);
                                this._fixFieldCase(S.field, "field", Q);
                                this._fixFieldCase(S.opacityInfo, "field", Q);
                                this._fixFieldCase(S.opacityInfo, "normalizationField", Q);
                                l.forEach(S.visualVariables, function(ra) {
                                    ba = this._fixFieldCase(ra, "field", Q);
                                    "sizeInfo" === ra.type && ba && !this._orderBy && (this._orderBy = [ba + " DESC"]);
                                    this._fixFieldCase(ra, "normalizationField", Q)
                                }, this);
                                var fa = l.map(S.getFieldsUsedInExpressions(), function(ra) {
                                    var va = this.getField(ra);
                                    return va ? va.name : ra
                                }, this);
                                Q = Q.concat(fa);
                                this._orderBy || !S.addBreak || m.isFunction(S.attributeField) || !S.backgroundFillSymbol && !this._hasSizeDiff(S) || (this._orderBy = [S.attributeField + " DESC"])
                            }, this);
                            this._requiredFields = l.filter(Q, x.isDefined)
                        }
                    },
                    _hasSizeDiff: function(I) {
                        var Q = Number.MAX_VALUE, ba = -Number.MAX_VALUE, M, S;
                        l.forEach(I.infos, function(fa) {
                            if (S = fa.symbol) {
                                M = 0;
                                switch (S.type) {
                                case "simplemarkersymbol":
                                    M = S.size;
                                    break;
                                case "picturemarkersymbol":
                                    M = (S.width + S.height) / 2;
                                    break;
                                case "simplelinesymbol":
                                case "cartographiclinesymbol":
                                    M = S.width;
                                    break;
                                case "simplefillsymbol":
                                case "picturefillsymbol":
                                    M = S.outline && S.outline.width
                                }
                                M && (Q = Math.min(Q, M),
                                ba = Math.max(ba, M))
                            }
                        });
                        return Q !== Number.MAX_VALUE && ba !== -Number.MAX_VALUE && 1 < Math.abs(ba - Q)
                    },
                    getOrderByFields: function() {
                        var I = this.orderByFields || this._orderBy;
                        return this.supportsAdvancedQueries && I ? l.filter(I, function(Q) {
                            Q = Q.split(" ")[0];
                            return !!this._getField(Q, !0)
                        }, this) : null
                    },
                    _createFields: function(I) {
                        var Q = I ? I.length : 0, ba, M = [];
                        for (ba = 0; ba < Q; ba++)
                            M.push(new L(I[ba]));
                        this.fields = M
                    },
                    _createFieldsIndex: function() {
                        if (this._fieldsIndexDirty) {
                            var I = this.fields
                              , Q = I ? I.length : 0;
                            if (50 < Q && this._canUseFieldsIndex()) {
                                var ba = new Map;
                                for (var M = new Map, S = 0; S < Q; S++) {
                                    var fa = I[S];
                                    ba.set(fa.name, fa);
                                    M.set(fa.name.toLowerCase(), fa)
                                }
                                ba = {
                                    caseSensitive: ba,
                                    caseInsensitive: M
                                }
                            }
                            this._fieldsIndex = ba;
                            this._fieldsIndexDirty = !1
                        }
                    },
                    _canUseFieldsIndex: function() {
                        var I = n.Map;
                        return !("function" !== typeof n.Proxy || "function" !== typeof n.Proxy.revocable || "function" !== typeof I || !I.prototype || "function" !== typeof I.prototype.set)
                    },
                    _getField: function(I, Q) {
                        var ba = this.fields;
                        if (!ba || 0 === ba.length)
                            return null;
                        Q && (I = I.toLowerCase());
                        this._createFieldsIndex();
                        var M = this._fieldsIndex;
                        if (M)
                            return M = Q ? M.caseInsensitive : M.caseSensitive,
                            M.get(I);
                        var S;
                        l.some(ba, function(fa) {
                            var ra = !1;
                            (ra = Q ? fa && fa.name.toLowerCase() === I ? !0 : !1 : fa && fa.name === I ? !0 : !1) && (S = fa);
                            return ra
                        });
                        return S
                    },
                    _getDateOpts: function() {
                        this._dtOpts || (this._dtOpts = {
                            properties: l.map(l.filter(this.fields, function(I) {
                                return !(!I || "esriFieldTypeDate" !== I.type)
                            }), function(I) {
                                return I.name
                            })
                        });
                        return this._dtOpts
                    },
                    _applyNormalized: function(I, Q) {
                        I && Q && l.forEach(I, function(ba, M) {
                            ba && Q[M] && ba.setGeometry(Q[M])
                        })
                    },
                    _editHandler: function(I, Q, ba, M, S, fa) {
                        S = I.addResults;
                        var ra = I.updateResults;
                        I = I.deleteResults;
                        var va, Ca = this.objectIdField, Da = this._mode, Ra = this._isTable;
                        var Na = this.editFieldsInfo;
                        var Ja = this.getOutFields() || [];
                        var Pa = Na && Na.creatorField
                          , eb = Na && Na.creationDateField
                          , bb = Na && Na.editorField
                          , gb = Na && Na.editDateField;
                        Na = Na && Na.realm;
                        -1 === l.indexOf(Ja, "*") && (Pa && -1 === l.indexOf(Ja, Pa) && (Pa = null),
                        eb && -1 === l.indexOf(Ja, eb) && (eb = null),
                        bb && -1 === l.indexOf(Ja, bb) && (bb = null),
                        gb && -1 === l.indexOf(Ja, gb) && (gb = null));
                        var cb = eb || gb ? (new Date).getTime() : null
                          , kb = Pa || bb ? this.getUserId() : void 0;
                        kb && Na && (kb = kb + "@" + Na);
                        if (S) {
                            var ub = this.globalIdField;
                            for (Na = 0; Na < S.length; Na++)
                                if (S[Na] = new Aa(S[Na]),
                                !Ra) {
                                    var ob = S[Na];
                                    if (ob.success) {
                                        var db = ob.objectId;
                                        Ja = Q[Na];
                                        (va = Ja._graphicsLayer) && va !== this && va.remove(Ja);
                                        va = Ja.attributes || {};
                                        va[Ca] = db;
                                        db = ob.globalId;
                                        ub && db && (va[ub] = db);
                                        Pa && (va[Pa] = kb);
                                        bb && (va[bb] = kb);
                                        eb && (va[eb] = cb);
                                        gb && (va[gb] = cb);
                                        Ja.setAttributes(va);
                                        Da._init && Da.drawFeature(Ja)
                                    }
                                }
                        }
                        if (ra)
                            for (Na = 0; Na < ra.length; Na++)
                                if (ra[Na] = new Aa(ra[Na]),
                                !Ra && (ob = ra[Na],
                                ob.success)) {
                                    db = ob.objectId;
                                    Ja = ba[db];
                                    if (Q = Da._getFeature(db))
                                        Q.geometry !== Ja.geometry && Ja.geometry && Q.setGeometry(wa.fromJson(Ja.geometry.toJson())),
                                        Q.attributes !== Ja.attributes && Ja.attributes && Q.setAttributes(m.mixin(Q.attributes, Ja.attributes)),
                                        this._repaint(Q, db);
                                    Ja = Q || Ja;
                                    va = Ja.attributes || {};
                                    bb && (va[bb] = kb);
                                    gb && (va[gb] = cb);
                                    Ja.setAttributes(va)
                                }
                        if (I) {
                            ba = [];
                            for (Na = 0; Na < I.length; Na++)
                                if (I[Na] = new Aa(I[Na]),
                                !Ra && (ob = I[Na],
                                ob.success && (db = ob.objectId,
                                Ja = Da._getFeature(db))))
                                    this._unSelectFeatureIIf(db, Da) && ba.push(Ja),
                                    Ja._count = 0,
                                    Da._removeFeatureIIf(db);
                            if (0 < ba.length)
                                this.onSelectionComplete(ba, Ma.SELECTION_SUBTRACT)
                        }
                        this._resolve([S, ra, I], "onEditsComplete", M, fa)
                    },
                    _sendAttachment: function(I, Q, ba, M, S) {
                        var fa = this;
                        return v({
                            url: this._url.path + "/" + Q + "/" + ("add" === I ? "addAttachment" : "updateAttachment"),
                            form: ba,
                            content: m.mixin(this._url.query, {
                                f: "json",
                                token: this._getToken() || void 0
                            }),
                            callbackParamName: "callback.html",
                            handleAs: "json"
                        }).addCallback(function(ra) {
                            var va = "add" === I ? "onAddAttachmentComplete" : "onUpdateAttachmentComplete";
                            ra = new Aa(ra["add" === I ? "addAttachmentResult" : "updateAttachmentResult"]);
                            ra.attachmentId = ra.objectId;
                            ra.objectId = Q;
                            fa._resolve([ra], va, M);
                            return ra
                        }).addErrback(function(ra) {
                            fa._resolve([ra], null, S, null, !0)
                        })
                    },
                    _repaint: function(I, Q, ba) {
                        Q = x.isDefined(Q) ? Q : I.attributes[this.objectIdField];
                        Q in this._selectedFeatures && this._selectionSymbol || I.setSymbol(I.symbol, ba)
                    },
                    _getKind: function(I) {
                        var Q = this._trackManager;
                        return Q ? Q.isLatestObservation(I) ? 1 : 0 : 0
                    }
                });
                m.mixin(Ma, {
                    MODE_SNAPSHOT: 0,
                    MODE_ONDEMAND: 1,
                    MODE_SELECTION: 2,
                    SELECTION_NEW: 3,
                    SELECTION_ADD: 4,
                    SELECTION_SUBTRACT: 5,
                    MODE_AUTO: 6,
                    MODE_STREAM: 7,
                    POPUP_NONE: "esriServerHTMLPopupTypeNone",
                    POPUP_HTML_TEXT: "esriServerHTMLPopupTypeAsHTMLText",
                    POPUP_URL: "esriServerHTMLPopupTypeAsURL"
                });
                K._createWrappers(Ma);
                Object.defineProperty(Ma.prototype, "graphics", {
                    get: function() {
                        return this._hasOnDemandDrillMode() ? this._mode.graphics : this._graphicsVal
                    },
                    set: function(I) {
                        this._graphicsVal = I
                    }
                });
                Object.defineProperty(Ma.prototype, "name", {
                    get: function() {
                        return this.arcgisProps && this.arcgisProps.title ? this.arcgisProps.title : this._name
                    },
                    set: function(I) {
                        this._name = I;
                        this.loaded && this.arcgisProps && (this.arcgisProps.title = null)
                    }
                });
                Object.defineProperty(Ma.prototype, "fields", {
                    get: function() {
                        return this._fields
                    },
                    set: function(I) {
                        I && this._canUseFieldsIndex() && (I = new Proxy(I,{
                            set: m.hitch(this, function(Q, ba, M) {
                                if (ba)
                                    if ("length" === ba)
                                        this._fieldsIndexDirty = !0;
                                    else {
                                        var S = Number(ba);
                                        "number" !== typeof S || isNaN(S) || (this._fieldsIndexDirty = !0)
                                    }
                                Q[ba] = M;
                                return !0
                            })
                        }));
                        this._fields = I;
                        this._fieldsIndexDirty = !0
                    }
                });
                g("extend-esri") && m.setObject("layers.FeatureLayer", Ma, q);
                return Ma
            })
        },
        "esri/arcadeProfiles/labelingProfile": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "), function(C, y, b, w, m, l, k, h) {
                C = new (C(null, {
                    declaredClass: "esri.arcadeProfiles.LabelingProfile",
                    defaults: {
                        context: {
                            vars: {
                                $feature: "any"
                            }
                        }
                    },
                    initialize: function(f) {
                        var d = [];
                        h.hasGeometryOperations(f) && d.push(k.enableGeometryOperations());
                        return m(d)
                    },
                    isAsync: function(f) {
                        return !1
                    },
                    parse: function(f) {
                        return k.createSyntaxTree(f.expression)
                    },
                    compile: function(f) {
                        var d = y.clone(this.defaults.context);
                        return f.syntaxTree ? k.createFunction(f.syntaxTree, d) : null
                    },
                    getEvalOptions: function(f) {
                        var d = f.feature;
                        return {
                            context: {
                                vars: {
                                    $feature: d && f.expression.hasVariable("$feature") ? l.createFromGraphicLikeObject(d.geometry, d.attributes, f.layer) : null
                                },
                                spatialReference: f.spatialReference
                            }
                        }
                    }
                }));
                b("extend-esri") && y.setObject("arcadeProfiles.labelingProfile", C, w);
                return C
            })
        },
        "esri/tasks/QueryTask": function() {
            define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t) {
                var g = f("esri-pbf")
                  , q = y(null, {
                    url: null,
                    query: null,
                    requestOptions: null,
                    pagination: null,
                    pageSize: null,
                    _fetchDfd: null,
                    _startPage: null,
                    _result: null,
                    constructor: function(v) {
                        this._handleSuccess = b.hitch(this, this._handleSuccess);
                        this._handleError = b.hitch(this, this._handleError);
                        b.mixin(this, v);
                        null == this.pagination && (this.pagination = !1);
                        null == this.pageSize && (this.pageSize = 1E3)
                    },
                    execute: function() {
                        var v = new m(this._canceler);
                        this._fetchDfd = v;
                        this._result = null;
                        this._sendRequest();
                        return v.promise
                    },
                    _canceler: function(v) {
                        var z = v._pendingRequest;
                        if (!v.isFulfilled() && z && !z.isFulfilled()) {
                            z.cancel();
                            var u = z.results && z.results[1]
                        }
                        v._pendingRequest = null;
                        return u
                    },
                    _sendRequest: function(v) {
                        var z = this.query;
                        this.pagination && (this._startPage = z.resultOffset = null == v ? 0 : v,
                        z.resultRecordCount = this.pageSize);
                        v = this.requestOptions;
                        this._fetchDfd._pendingRequest = d({
                            url: this.url,
                            content: z,
                            handleAs: "pbf" === z.f ? "arraybuffer" : "json",
                            callbackParamName: "callback",
                            timeout: v && v.timeout
                        }, v);
                        this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)
                    },
                    _handleSuccess: function(v) {
                        this.pagination ? (v.exceededTransferLimit && this._sendRequest(this._startPage + this.pageSize),
                        this._result ? this._result.features = this._result.features.concat(v.features) : this._result = v,
                        this._fetchDfd.progress(v),
                        v.exceededTransferLimit || this._fetchDfd.resolve(this._result)) : (this._fetchDfd.progress(v),
                        this._fetchDfd.resolve(v))
                    },
                    _handleError: function(v) {
                        this._fetchDfd.reject(v)
                    }
                })
                  , x = y(n, {
                    declaredClass: "esri.tasks.QueryTask",
                    _eventMap: {
                        complete: ["featureSet"],
                        "execute-for-count-complete": ["count"],
                        "execute-for-ids-complete": ["objectIds"],
                        "execute-relationship-query-complete": ["featureSets"]
                    },
                    constructor: function(v, z) {
                        this._handler = b.hitch(this, this._handler);
                        this._relationshipQueryHandler = b.hitch(this, this._relationshipQueryHandler);
                        this._executeForIdsHandler = b.hitch(this, this._executeForIdsHandler);
                        this._countHandler = b.hitch(this, this._countHandler);
                        this._extentHandler = b.hitch(this, this._extentHandler);
                        this.source = z && z.source;
                        this.gdbVersion = z && z.gdbVersion;
                        this.registerConnectEvents()
                    },
                    __msigns: [{
                        n: "execute",
                        c: 4,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }, {
                        n: "rawExecute",
                        c: 2,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }, {
                        n: "executeForIds",
                        c: 3,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }, {
                        n: "executeForCount",
                        c: 3,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }, {
                        n: "executeForExtent",
                        c: 3,
                        a: [{
                            i: 0,
                            p: ["geometry"]
                        }],
                        e: 2
                    }],
                    onComplete: function() {},
                    onRawExecuteComplete: function() {},
                    onExecuteRelationshipQueryComplete: function() {},
                    onExecuteForIdsComplete: function() {},
                    onExecuteForCountComplete: function() {},
                    onExecuteForExtentComplete: function() {},
                    execute: function(v, z, u, p, r) {
                        var B = r.assembly;
                        v = this._encode(b.mixin({}, this._url.query, {
                            f: p && p.format || "json"
                        }, v.toJson(B && B[0])));
                        var D = this._handler
                          , G = this._errorHandler;
                        this.source && (p = {
                            source: this.source.toJson()
                        },
                        v.layer = l.toJson(p));
                        this.gdbVersion && (v.gdbVersion = this.gdbVersion);
                        var A = "pbf" === v.f;
                        if (A) {
                            var E;
                            g || (E = "QueryTask.execute: 'pbf' format is not supported in your browser.");
                            if (E)
                                return v = new m,
                                v.addErrback(function(H) {
                                    G(H, u, r.dfd)
                                }),
                                v.reject(Error(E)),
                                v
                        }
                        E = this.requestOptions;
                        E = d({
                            url: this._url.path + "/query",
                            content: v,
                            callbackParamName: "callback",
                            handleAs: A ? "arraybuffer" : "json",
                            timeout: E && E.timeout
                        }, E);
                        v = [E];
                        A && v.push(x.loadPBFReader());
                        (new k(v)).then(function(H) {
                            r.dfd.isFulfilled() || (H = H[0],
                            H[0] ? D(H[1], A, z, u, r.dfd) : G(H[1], u, r.dfd))
                        });
                        return E
                    },
                    rawExecute: function(v, z, u) {
                        z = z || {};
                        v = this._encode(b.mixin({}, this._url.query, {
                            f: z.format || "json"
                        }, v.toJson(u.assembly && u.assembly[0])));
                        this.source && (v.layer = l.toJson({
                            source: this.source.toJson()
                        }));
                        this.gdbVersion && (v.gdbVersion = this.gdbVersion);
                        return (new q({
                            url: this._url.path + "/query",
                            query: v,
                            requestOptions: this.requestOptions,
                            pagination: z.pagination,
                            pageSize: z.pageSize
                        })).execute().then(null, null, function(p) {
                            u.dfd.progress(p)
                        }).then(b.hitch(this, function(p) {
                            this._successHandler([p], "onRawExecuteComplete", null, u.dfd)
                        })).otherwise(b.hitch(this, function(p) {
                            this._errorHandler(p, null, u.dfd)
                        }))
                    },
                    executeRelationshipQuery: function(v, z, u) {
                        v = this._encode(b.mixin({}, this._url.query, {
                            f: "json"
                        }, v.toJson()));
                        var p = this._relationshipQueryHandler
                          , r = this._errorHandler;
                        this.gdbVersion && (v.gdbVersion = this.gdbVersion);
                        var B = new m(a._dfdCanceller)
                          , D = this.requestOptions
                          , G = this._url.path;
                        this.source && void 0 !== this.source.mapLayerId && null !== this.source.mapLayerId && G.endsWith("/dynamicLayer") && (G = G.slice(0, -13),
                        G = G + "/" + this.source.mapLayerId);
                        B._pendingDfd = d({
                            url: G + "/queryRelatedRecords",
                            content: v,
                            callbackParamName: "callback",
                            timeout: D && D.timeout,
                            load: function(A, E) {
                                p(A, E, z, u, B)
                            },
                            error: function(A) {
                                r(A, u, B)
                            }
                        }, D);
                        return B
                    },
                    executeForIds: function(v, z, u, p) {
                        var r = p.assembly;
                        v = this._encode(b.mixin({}, this._url.query, {
                            f: "json",
                            returnIdsOnly: !0
                        }, v.toJson(r && r[0])));
                        var B = this._executeForIdsHandler
                          , D = this._errorHandler;
                        this.source && (r = {
                            source: this.source.toJson()
                        },
                        v.layer = l.toJson(r));
                        this.gdbVersion && (v.gdbVersion = this.gdbVersion);
                        r = this.requestOptions;
                        return d({
                            url: this._url.path + "/query",
                            content: v,
                            callbackParamName: "callback",
                            timeout: r && r.timeout,
                            load: function(G, A) {
                                B(G, A, z, u, p.dfd)
                            },
                            error: function(G) {
                                D(G, u, p.dfd)
                            }
                        }, r)
                    },
                    executeForCount: function(v, z, u, p) {
                        var r = p.assembly;
                        v = this._encode(b.mixin({}, this._url.query, {
                            f: "json",
                            returnIdsOnly: !0,
                            returnCountOnly: !0
                        }, v.toJson(r && r[0])));
                        var B = this._countHandler
                          , D = this._errorHandler;
                        this.source && (r = {
                            source: this.source.toJson()
                        },
                        v.layer = l.toJson(r));
                        this.gdbVersion && (v.gdbVersion = this.gdbVersion);
                        r = this.requestOptions;
                        return d({
                            url: this._url.path + "/query",
                            content: v,
                            callbackParamName: "callback",
                            timeout: r && r.timeout,
                            load: function(G, A) {
                                B(G, A, z, u, p.dfd)
                            },
                            error: function(G) {
                                D(G, u, p.dfd)
                            }
                        }, r)
                    },
                    executeForExtent: function(v, z, u, p) {
                        var r = p.assembly;
                        v = this._encode(b.mixin({}, this._url.query, {
                            f: "json",
                            returnExtentOnly: !0,
                            returnCountOnly: !0
                        }, v.toJson(r && r[0])));
                        var B = this._extentHandler
                          , D = this._errorHandler;
                        this.source && (r = {
                            source: this.source.toJson()
                        },
                        v.layer = l.toJson(r));
                        this.gdbVersion && (v.gdbVersion = this.gdbVersion);
                        r = this.requestOptions;
                        return d({
                            url: this._url.path + "/query",
                            content: v,
                            callbackParamName: "callback",
                            timeout: r && r.timeout,
                            load: function(G, A) {
                                B(G, A, z, u, p.dfd)
                            },
                            error: function(G) {
                                D(G, u, p.dfd)
                            }
                        }, r)
                    },
                    _handler: function(v, z, u, p, r) {
                        try {
                            v && z && (v = x.pbfDeps.optimizedFeatures.convertToFeatureSet(x.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(v)));
                            var B = new t(v);
                            this._successHandler([B], "onComplete", u, r)
                        } catch (D) {
                            this._errorHandler(D, p, r)
                        }
                    },
                    _relationshipQueryHandler: function(v, z, u, p, r) {
                        try {
                            var B = v.geometryType
                              , D = v.spatialReference
                              , G = {};
                            w.forEach(v.relatedRecordGroups, function(A) {
                                var E = {};
                                E.geometryType = B;
                                E.spatialReference = D;
                                E.features = A.relatedRecords;
                                E = new t(E);
                                if (null != A.objectId)
                                    G[A.objectId] = E;
                                else
                                    for (var H in A)
                                        A.hasOwnProperty(H) && "relatedRecords" !== H && (G[A[H]] = E)
                            });
                            this._successHandler([G], "onExecuteRelationshipQueryComplete", u, r)
                        } catch (A) {
                            this._errorHandler(A, p, r)
                        }
                    },
                    _executeForIdsHandler: function(v, z, u, p, r) {
                        try {
                            this._successHandler([v.objectIds], "onExecuteForIdsComplete", u, r)
                        } catch (B) {
                            this._errorHandler(B, p, r)
                        }
                    },
                    _countHandler: function(v, z, u, p, r) {
                        try {
                            var B = v.features
                              , D = v.objectIds;
                            if (D)
                                var G = D.length;
                            else {
                                if (B)
                                    throw Error("Unable to perform query. Please check your parameters.");
                                G = v.count
                            }
                            this._successHandler([G], "onExecuteForCountComplete", u, r)
                        } catch (A) {
                            this._errorHandler(A, p, r)
                        }
                    },
                    _extentHandler: function(v, z, u, p, r) {
                        try {
                            v.extent && (v.extent = new c(v.extent)),
                            this._successHandler([v], "onExecuteForExtentComplete", u, r)
                        } catch (B) {
                            this._errorHandler(B, p, r)
                        }
                    }
                });
                x.loadPBFReader = function() {
                    var v = new m;
                    x.pbfDeps ? v.resolve() : C(["./support/pbfDeps"], function(z) {
                        x.pbfDeps = z;
                        v.isFulfilled() || v.resolve()
                    });
                    return v.promise
                }
                ;
                e._createWrappers(x);
                f("extend-esri") && b.setObject("tasks.QueryTask", x, h);
                return x
            })
        },
        "dojo/DeferredList": function() {
            define(["./_base/kernel", "./_base/Deferred", "./_base/array"], function(C, y, b) {
                C.DeferredList = function(w, m, l, k, h) {
                    var f = [];
                    y.call(this);
                    var d = this;
                    0 !== w.length || m || this.resolve([0, []]);
                    var a = 0;
                    b.forEach(w, function(c, e) {
                        function n(t, g) {
                            f[e] = [t, g];
                            a++;
                            a === w.length && d.resolve(f)
                        }
                        c.then(function(t) {
                            m ? d.resolve([e, t]) : n(!0, t)
                        }, function(t) {
                            l ? d.reject(t) : n(!1, t);
                            if (k)
                                return null;
                            throw t;
                        })
                    })
                }
                ;
                C.DeferredList.prototype = new y;
                C.DeferredList.prototype.gatherResults = function(w) {
                    w = new C.DeferredList(w,!1,!0,!1);
                    w.addCallback(function(m) {
                        var l = [];
                        b.forEach(m, function(k) {
                            l.push(k[1])
                        });
                        return l
                    });
                    return w
                }
                ;
                return C.DeferredList
            })
        },
        "esri/tasks/Task": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "), function(C, y, b, w, m, l, k, h) {
                C = C(h, {
                    declaredClass: "esri.tasks._Task",
                    _eventMap: {
                        error: ["error"],
                        complete: ["result"]
                    },
                    constructor: function(f, d) {
                        f && y.isString(f) && (this._url = k.urlToObject(this.url = f));
                        d && d.requestOptions && (this.requestOptions = d.requestOptions);
                        this.normalization = !0;
                        this._errorHandler = y.hitch(this, this._errorHandler);
                        this.registerConnectEvents()
                    },
                    _useSSL: function() {
                        var f = this._url
                          , d = /^http:/i;
                        this.url && (this.url = this.url.replace(d, "https:"));
                        f && f.path && (f.path = f.path.replace(d, "https:"))
                    },
                    _encode: function(f, d, a) {
                        var c = {}, e;
                        for (e in f)
                            if ("declaredClass" !== e) {
                                var n = f[e];
                                var t = typeof n;
                                if (null !== n && void 0 !== n && "function" !== t)
                                    if (y.isArray(n)) {
                                        c[e] = [];
                                        var g = n.length;
                                        for (t = 0; t < g; t++)
                                            c[e][t] = this._encode(n[t])
                                    } else
                                        "object" === t ? n.toJson && (t = n.toJson(a && a[e]),
                                        "esri.tasks.FeatureSet" === n.declaredClass && t.spatialReference && (t.sr = t.spatialReference,
                                        delete t.spatialReference),
                                        c[e] = d ? t : b.toJson(t)) : c[e] = n
                            }
                        return c
                    },
                    _successHandler: function(f, d, a, c) {
                        d && this[d].apply(this, f);
                        a && a.apply(null, f);
                        c && l._resDfd(c, f)
                    },
                    _errorHandler: function(f, d, a) {
                        this.onError(f);
                        d && d(f);
                        a && a.errback(f)
                    },
                    setNormalization: function(f) {
                        this.normalization = f
                    },
                    onError: function() {}
                });
                w("extend-esri") && (m.Task = C);
                return C
            })
        },
        "esri/tasks/FeatureSet": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c) {
                C = C(null, {
                    declaredClass: "esri.tasks.FeatureSet",
                    constructor: function(e, n) {
                        if (e) {
                            y.mixin(this, e);
                            var t = this.features = this.features || []
                              , g = e.spatialReference;
                            g = this.spatialReference = a.createInstance(h.simpleConstructor, g);
                            var q = a.getGeometryType(e.geometryType);
                            this.geometryType = e.geometryType;
                            e.fields && (this.fields = e.fields);
                            e = a.supportsLazyUnquantization(this.geometryType);
                            var x = a.unquantizeFunction(this.geometryType, this.transform)
                              , v = !!(n && e && x)
                              , z = q && (v ? q.accessorConstructor : q.simpleConstructor);
                            b.forEach(t, function(u, p) {
                                var r = a.createInstance(k.simpleConstructor)
                                  , B = u.geometry;
                                if (q && B) {
                                    var D = r.geometry = a.createInstance(z, v ? null : B);
                                    D.setSpatialReference(B.spatialReference ? a.createInstance(h.simpleConstructor, B.spatialReference) : g);
                                    v && D.setupLazyUnquantization(x, B)
                                }
                                r.symbol = u.symbol ? c.fromJson(u.symbol) : null;
                                r.attributes = u.attributes;
                                t[p] = r
                            });
                            v || this._hydrate()
                        } else
                            this.features = []
                    },
                    displayFieldName: null,
                    geometryType: null,
                    spatialReference: null,
                    fieldAliases: null,
                    toJson: function(e) {
                        var n = {};
                        this.displayFieldName && (n.displayFieldName = this.displayFieldName);
                        this.fields && (n.fields = this.fields);
                        this.spatialReference ? n.spatialReference = this.spatialReference.toJson() : this.features[0] && this.features[0].geometry && (n.spatialReference = this.features[0].geometry.spatialReference.toJson());
                        this.features[0] && (this.features[0].geometry && (n.geometryType = a.getJsonType(this.features[0].geometry)),
                        n.features = f._encodeGraphics(this.features, e));
                        n.geometryType = n.geometryType || this.geometryType;
                        n.exceededTransferLimit = this.exceededTransferLimit;
                        n.transform = this.transform;
                        return l.fixJson(n)
                    },
                    _hydrate: function() {
                        a.unquantize(this.features, this.geometryType, this.transform);
                        this.transform = null
                    },
                    quantize: function(e) {
                        if (!this.geometryType)
                            return this.transform = null,
                            this;
                        var n = e.translate[0], t = e.translate[1], g = e.scale[0], q = e.scale[1], x = this.features, v = function(r, B, D) {
                            var G, A = [];
                            var E = 0;
                            for (G = r.length; E < G; E++) {
                                var H = r[E];
                                if (0 < E) {
                                    var J = B(H[0]);
                                    H = D(H[1]);
                                    if (J !== O || H !== V) {
                                        A.push([J - O, H - V]);
                                        var O = J;
                                        var V = H
                                    }
                                } else
                                    O = B(H[0]),
                                    V = D(H[1]),
                                    A.push([O, V])
                            }
                            return 0 < A.length ? A : null
                        }, z = function(r, B, D) {
                            if ("esriGeometryPoint" === r)
                                return function(G) {
                                    G.x = B(G.x);
                                    G.y = D(G.y);
                                    return G
                                }
                                ;
                            if ("esriGeometryPolyline" === r || "esriGeometryPolygon" === r)
                                return function(G) {
                                    var A;
                                    var E = G.rings || G.paths;
                                    var H = [];
                                    var J = 0;
                                    for (A = E.length; J < A; J++) {
                                        var O = E[J];
                                        (O = v(O, B, D)) && H.push(O)
                                    }
                                    return 0 < H.length ? (G.rings ? G.rings = H : G.paths = H,
                                    G) : null
                                }
                                ;
                            if ("esriGeometryMultipoint" === r)
                                return function(G) {
                                    var A = v(G.points, B, D);
                                    return 0 < A.length ? (G.points = A,
                                    G) : null
                                }
                                ;
                            if ("esriGeometryEnvelope" === r)
                                return function(G) {
                                    return G
                                }
                        }(this.geometryType, function(r) {
                            return Math.round((r - n) / g)
                        }, function(r) {
                            return Math.round((t - r) / q)
                        }), u;
                        var p = 0;
                        for (u = x.length; p < u; p++)
                            x[p].geometry && (z(x[p].geometry) || x[p].setGeometry(null));
                        this.transform = e;
                        return this
                    }
                });
                C.createGraphics = function(e) {
                    var n = e.geometryType
                      , t = a.createInstance(h.simpleConstructor, e.spatialReference)
                      , g = a.getGeometryType(n).accessorConstructor
                      , q = a.unquantizeFunction(n, e.transform);
                    return b.map(e.features, function(x, v) {
                        v = a.createInstance(k.simpleConstructor);
                        var z = x.geometry;
                        if (z) {
                            var u = v.geometry = a.createInstance(g);
                            u.setSpatialReference(t);
                            u.setupLazyUnquantization(q, z)
                        }
                        v.attributes = x.attributes;
                        return v
                    })
                }
                ;
                C.createPolygon = function(e, n, t) {
                    if (e) {
                        var g = a.createInstance(d.accessorConstructor);
                        g.setSpatialReference(n);
                        n = a.unquantizeFunction("esriGeometryPolygon", t);
                        g.setupLazyUnquantization(n, e)
                    }
                    return g
                }
                ;
                w("extend-esri") && y.setObject("tasks.FeatureSet", C, m);
                return C
            })
        },
        "esri/tasks/StatisticDefinition": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function(C, y, b, w) {
                C = C(null, {
                    declaredClass: "esri.tasks.StatisticDefinition",
                    toJson: function() {
                        return {
                            statisticType: this.statisticType,
                            onStatisticField: this.onStatisticField,
                            outStatisticFieldName: this.outStatisticFieldName,
                            maxPointCount: this.maxPointCount,
                            maxRecordCount: this.maxRecordCount,
                            maxVertexCount: this.maxVertexCount
                        }
                    }
                });
                b("extend-esri") && y.setObject("tasks.StatisticDefinition", C, w);
                return C
            })
        },
        "esri/layers/FeatureType": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "), function(C, y, b, w, m, l, k, h, f) {
                C = C(null, {
                    declaredClass: "esri.layers.FeatureType",
                    constructor: function(d) {
                        if (d && y.isObject(d)) {
                            this.id = d.id;
                            this.name = d.name;
                            var a = d.symbol;
                            a && (this.symbol = k.fromJson(a));
                            a = d.domains;
                            var c = this.domains = {};
                            for (e in a)
                                a.hasOwnProperty(e) && (c[e] = f.fromJson(a[e]));
                            if (d = d.templates) {
                                var e = this.templates = [];
                                for (a = 0; a < d.length; a++)
                                    e.push(new h(d[a]))
                            }
                        }
                    },
                    toJson: function() {
                        var d = {
                            id: this.id,
                            name: this.name,
                            symbol: this.symbol && this.symbol.toJson()
                        }, a, c = this.domains, e = this.templates, n = l.fixJson;
                        if (c) {
                            var t = d.domains = {};
                            for (a in c)
                                c.hasOwnProperty(a) && (t[a] = c[a] && c[a].toJson());
                            n(t)
                        }
                        e && (d.templates = b.map(e, function(g) {
                            return g.toJson()
                        }));
                        return n(d)
                    }
                });
                w("extend-esri") && y.setObject("layers.FeatureType", C, m);
                return C
            })
        },
        "esri/layers/FeatureTemplate": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "), function(C, y, b, w, m, l) {
                C = C(null, {
                    declaredClass: "esri.layers.FeatureTemplate",
                    constructor: function(k) {
                        k && y.isObject(k) && (this.name = k.name,
                        this.description = k.description,
                        this.drawingTool = k.drawingTool,
                        this.thumbnail = k.thumbnail,
                        k = k.prototype,
                        this.prototype = new l(k.geometry,null,k.attributes))
                    },
                    toJson: function() {
                        return m.fixJson({
                            name: this.name,
                            description: this.description,
                            drawingTool: this.drawingTool,
                            thumbnail: m.fixJson(y.clone(this.thumbnail)),
                            prototype: this.prototype && this.prototype.toJson()
                        })
                    }
                });
                y.mixin(C, {
                    TOOL_AUTO_COMPLETE_POLYGON: "esriFeatureEditToolAutoCompletePolygon",
                    TOOL_CIRCLE: "esriFeatureEditToolCircle",
                    TOOL_ELLIPSE: "esriFeatureEditToolEllipse",
                    TOOL_FREEHAND: "esriFeatureEditToolFreehand",
                    TOOL_LINE: "esriFeatureEditToolLine",
                    TOOL_NONE: "esriFeatureEditToolNone",
                    TOOL_POINT: "esriFeatureEditToolPoint",
                    TOOL_POLYGON: "esriFeatureEditToolPolygon",
                    TOOL_RECTANGLE: "esriFeatureEditToolRectangle",
                    TOOL_ARROW: "esriFeatureEditToolArrow",
                    TOOL_TRIANGLE: "esriFeatureEditToolTriangle",
                    TOOL_LEFT_ARROW: "esriFeatureEditToolLeftArrow",
                    TOOL_RIGHT_ARROW: "esriFeatureEditToolRightArrow",
                    TOOL_UP_ARROW: "esriFeatureEditToolUpArrow",
                    TOOL_DOWN_ARROW: "esriFeatureEditToolDownArrow"
                });
                b("extend-esri") && y.setObject("layers.FeatureTemplate", C, w);
                return C
            })
        },
        "esri/layers/support/domainUtils": function() {
            define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "), function(C, y, b, w, m, l) {
                var k = {
                    fromJson: function(h) {
                        if (h)
                            switch (h.type) {
                            case "range":
                                var f = new w(h);
                                break;
                            case "codedValue":
                                f = new m(h);
                                break;
                            case "inherited":
                                f = new l(h)
                            }
                        return f
                    }
                };
                y("extend-esri") && C.setObject("layers.support.domainUtils", k, b);
                return k
            })
        },
        "esri/layers/FeatureSubtype": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "), function(C, y, b, w, m, l) {
                C = C(null, {
                    declaredClass: "esri.layers.FeatureSubtype",
                    constructor: function(k) {
                        if (k && y.isObject(k)) {
                            this.code = k.code;
                            this.name = k.name;
                            this.defaultValues = k.defaultValues;
                            k = k.domains;
                            var h = this.domains = {}, f;
                            for (f in k)
                                k.hasOwnProperty(f) && (h[f] = l.fromJson(k[f]))
                        }
                    },
                    toJson: function() {
                        var k = m.fixJson
                          , h = {
                            code: this.code,
                            name: this.name,
                            defaultValues: k(y.clone(this.defaultValues))
                        }
                          , f = this.domains;
                        if (f) {
                            var d = h.domains = {}, a;
                            for (a in f)
                                f.hasOwnProperty(a) && (d[a] = f[a] && f[a].toJson());
                            k(d)
                        }
                        return k(h)
                    }
                });
                b("extend-esri") && y.setObject("layers.FeatureSubtype", C, w);
                return C
            })
        },
        "esri/layers/FeatureEditResult": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel"], function(C, y, b, w) {
                C = C(null, {
                    declaredClass: "esri.layers.FeatureEditResult",
                    constructor: function(m) {
                        m && y.isObject(m) && (this.objectId = m.objectId,
                        this.globalId = m.globalId,
                        this.success = m.success,
                        m.success || (m = m.error,
                        this.error = Error(),
                        this.error.code = m.code,
                        this.error.message = m.description))
                    }
                });
                b("extend-esri") && y.setObject("layers.FeatureEditResult", C, w);
                return C
            })
        },
        "esri/layers/SnapshotMode": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "), function(C, y, b, w, m, l, k, h, f) {
                C = C([h], {
                    declaredClass: "esri.layers._SnapshotMode",
                    maxFeatures: 5E4,
                    maxRecordCountFactor: 1,
                    scaleToTileFactor: 1,
                    _isSuspendedAtStartup: !1,
                    _pendingRefresh: !1,
                    constructor: function(d) {
                        this.featureLayer = d;
                        this._featureMap = {};
                        this._hasUpdateError = this._hasPartialFeatures = !1;
                        this._drawFeatures = y.hitch(this, this._drawFeatures);
                        this._queryErrorHandler = y.hitch(this, this._queryErrorHandler);
                        this._handleSuccess = y.hitch(this, this._handleSuccess);
                        this._handleError = y.hitch(this, this._handleError);
                        this._handleProgress = y.hitch(this, this._handleProgress)
                    },
                    startup: function() {
                        if (!this._started || this._isSuspendedAtStartup) {
                            this.inherited(arguments);
                            var d = this.featureLayer
                              , a = d.reHostedFS.test(d.url);
                            this.pagination = d.queryPagination && null != d.maxRecordCount;
                            this._cacheHintSupported = d._isCacheHintSupported();
                            this.scaleToTileFactor = this._getScaleToTileFactor();
                            a && this.pagination && (this._parallelSnapshot = new f({
                                layer: d,
                                mode: this,
                                queryTask: d._task
                            }));
                            this._isSuspendedAtStartup = d.suspended;
                            this._startup()
                        }
                    },
                    propertyChangeHandler: function(d) {
                        this._init && (d ? this.featureLayer._collection ? console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id \x3d " + this.featureLayer.id) : this._fetchAll() : this._applyTimeFilter())
                    },
                    destroy: function() {
                        this._isSuspendedAtStartup = this._pendingRefresh = !1;
                        this._cancelPendingRequest(this._pendingRequest);
                        this._parallelSnapshot && this._parallelSnapshot.destroy();
                        this.inherited(arguments)
                    },
                    drawFeature: function(d) {
                        var a = d.attributes[this.featureLayer.objectIdField];
                        this._addFeatureIIf(a, d);
                        this._incRefCount(a)
                    },
                    resume: function() {
                        this._isSuspendedAtStartup || this._pendingRefresh ? (this._isSuspendedAtStartup = !1,
                        this._startup()) : this.propertyChangeHandler(0)
                    },
                    refresh: function() {
                        var d = this.featureLayer;
                        d._collection ? (d._fireUpdateStart(),
                        d._refresh(!0),
                        d._fireUpdateEnd()) : this._fetchAll()
                    },
                    hasAllFeatures: function() {
                        return !this._hasPartialFeatures
                    },
                    hasUpdateError: function() {
                        return this._hasUpdateError
                    },
                    canFetchPBF: function(d) {
                        return this.inherited(arguments) && this.featureLayer._canFetchPBFForQuery(d)
                    },
                    _startup: function() {
                        this.featureLayer._collection ? this._applyTimeFilter() : this._fetchAll()
                    },
                    _fetchAll: function() {
                        var d = this.featureLayer;
                        d._collection || d.suspended || !d.isQueryable() ? this._pendingRefresh = d.suspended : (this._pendingRefresh = !1,
                        d._fireUpdateStart(),
                        this._clearIIf(),
                        this._hasUpdateError = this._hasPartialFeatures = !1,
                        this._parallelSnapshot ? this._parallelSnapshot.fetch().then(this._handleSuccess, this._handleError, this._handleProgress) : this._sendRequest())
                    },
                    _handleSuccess: function(d) {
                        this._hasPartialFeatures = d.hasPartialFeatures;
                        this._hasUpdateError = d.hasUpdateError;
                        this.featureLayer._fireUpdateEnd(null)
                    },
                    _handleError: function(d) {
                        this._queryErrorHandler(d)
                    },
                    _handleProgress: function(d) {
                        d.isError ? this.featureLayer._errorHandler(d.error) : this._addFeatures(d.features)
                    },
                    _getScaleToTileFactor: function() {
                        var d = this.featureLayer.tileMaxRecordCount
                          , a = this.featureLayer.maxRecordCount
                          , c = 1;
                        null != d && null != a && (c = Number((d / a).toFixed(2)));
                        return c
                    },
                    _getPageSize: function(d) {
                        var a = this.featureLayer.tileMaxRecordCount;
                        a = "tile" === d.resultType && a ? a : this.featureLayer.maxRecordCount;
                        d.maxRecordCountFactor && (a = Math.floor(a * d.maxRecordCountFactor));
                        return a
                    },
                    _sendRequest: function(d) {
                        var a = this.featureLayer
                          , c = this._createQueryInfo()
                          , e = c.query;
                        this.pagination && (this._pageSize = this._getPageSize(e),
                        this._start = e.start = null == d ? 0 : d,
                        e.num = this._pageSize);
                        this._pendingRequest && this._cancelPendingRequest(this._pendingRequest);
                        this._pendingRequest = a._task.execute(e, this._drawFeatures, this._queryErrorHandler, c.pbf ? {
                            format: "pbf"
                        } : null)
                    },
                    _drawFeatures: function(d) {
                        this._pendingRequest = null;
                        this.featureLayer._isImageService && 10.7 > this.featureLayer.version && void 0 === d.exceededTransferLimit && (d.exceededTransferLimit = d.features.length === this.featureLayer.maxRecordCount);
                        var a = this.featureLayer
                          , c = d.exceededTransferLimit
                          , e = c && !a._collection;
                        d = this._checkMaxLimit(d.features);
                        var n = d.maxLimitReached;
                        this._addFeatures(d.features);
                        this.pagination && e && !n || (this._hasPartialFeatures = !!c,
                        a._fireUpdateEnd(null, c ? {
                            queryLimitExceeded: !0
                        } : null));
                        e && (this.pagination && !n && this._sendRequest(this._start + this._pageSize),
                        a.onQueryLimitExceeded())
                    },
                    _queryErrorHandler: function(d) {
                        this._pendingRequest = null;
                        this._hasUpdateError = this._hasPartialFeatures = !0;
                        var a = this.featureLayer;
                        a._errorHandler(d);
                        a._fireUpdateEnd(d)
                    },
                    _checkMaxLimit: function(d) {
                        var a = d ? d.length : 0
                          , c = this.featureLayer.graphics.length + a
                          , e = c >= this.maxFeatures;
                        if (e) {
                            var n = c - this.maxFeatures;
                            n && d.splice(a - n, n)
                        }
                        return {
                            maxLimitReached: e,
                            featuresDiscarded: c > this.maxFeatures,
                            features: d
                        }
                    },
                    _createQueryInfo: function() {
                        var d = this.featureLayer
                          , a = new k;
                        a.outFields = d.getOutFields();
                        a.where = d._getAttributeFilter() || "1\x3d1";
                        a.returnGeometry = !0;
                        a.outSpatialReference = l.createSpatialReference(this.map.spatialReference.toJson());
                        a.timeExtent = d.getTimeDefinition();
                        a.maxAllowableOffset = d._maxOffset;
                        a.quantizationParameters = d._quantizationParameters;
                        a.orderByFields = d.supportsAdvancedQueries ? d.getOrderByFields() : null;
                        a.multipatchOption = d.multipatchOption;
                        d._ts && (a._ts = (new Date).getTime());
                        this._cacheHintSupported && d._enableCacheHint(a);
                        var c = this.canFetchPBF(a);
                        d._enableEditModeQuantization(a, c);
                        this._applyMaxRecordCountFactor(a, c);
                        return {
                            query: a,
                            pbf: c
                        }
                    },
                    _applyMaxRecordCountFactor: function(d, a) {
                        var c = this.featureLayer.advancedQueryCapabilities;
                        this.featureLayer._isCacheHintEnabled(d) && c && c.supportsMaxRecordCountFactor && ("tile" !== d.resultType && 1 < this.scaleToTileFactor && (d.maxRecordCountFactor = this.scaleToTileFactor),
                        a && 1 < this.maxRecordCountFactor && (d.maxRecordCountFactor = this.maxRecordCountFactor),
                        5 < d.maxRecordCountFactor && (d.maxRecordCountFactor = 5))
                    },
                    _addFeatures: function(d) {
                        var a = this.featureLayer
                          , c = a.objectIdField
                          , e = d.length
                          , n = a._selectedFeatures
                          , t = a.mode === a.constructor.MODE_AUTO;
                        a._fireUpdateStart();
                        a._sortFeatures(d);
                        for (a = 0; a < e; a++) {
                            var g = d[a];
                            var q = g.attributes[c];
                            var x = this._addFeatureIIf(q, g);
                            this._incRefCount(q);
                            t && x !== g && n[q] && (x.setGeometry(g.geometry),
                            x.setAttributes(g.attributes))
                        }
                        this._applyTimeFilter(!0)
                    }
                });
                b("extend-esri") && y.setObject("layers._SnapshotMode", C, w);
                return C
            })
        },
        "esri/layers/RenderMode": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/_base/array", "../sniff", "../kernel"], function(C, y, b, w, m) {
                var l = !!w("esri-pbf")
                  , k = !!w("esri-featurelayer-pbf");
                C = C(null, {
                    declaredClass: "esri.layers._RenderMode",
                    enablePBFQuery: l && k,
                    initialize: function(h) {
                        this.map = h;
                        this._init = !0
                    },
                    startup: function() {
                        this._started = !0
                    },
                    propertyChangeHandler: function(h) {},
                    destroy: function() {
                        this._init = this._started = !1
                    },
                    drawFeature: function(h) {},
                    suspend: function() {},
                    resume: function() {},
                    refresh: function() {},
                    hasAllFeatures: function() {
                        return !0
                    },
                    hasUpdateError: function() {
                        return !1
                    },
                    canFetchPBF: function(h) {
                        return !(!this.featureLayer._canFetchPBF() || !this.enablePBFQuery)
                    },
                    _incRefCount: function(h) {
                        (h = this._featureMap[h]) && h._count++
                    },
                    _decRefCount: function(h) {
                        (h = this._featureMap[h]) && h._count--
                    },
                    _getFeature: function(h) {
                        return this._featureMap[h]
                    },
                    _addFeatureIIf: function(h, f) {
                        var d = this._featureMap
                          , a = d[h]
                          , c = this.featureLayer;
                        a || (d[h] = f,
                        c._add(f),
                        f._count = 0);
                        return a || f
                    },
                    _removeFeatureIIf: function(h) {
                        var f = this._featureMap[h]
                          , d = this.featureLayer;
                        if (f) {
                            if (f._count)
                                return;
                            delete this._featureMap[h];
                            d._remove(f)
                        }
                        return f
                    },
                    _registerFeature: function(h, f) {
                        var d = this._featureMap
                          , a = d[h];
                        a ? (a.attributes = f.attributes,
                        a.geometry = f.geometry) : (d[h] = f,
                        f._count = 0,
                        f._layer = f._graphicsLayer = f._sourceLayer = this.featureLayer);
                        return a || f
                    },
                    _unregisterFeature: function(h) {
                        var f = this._featureMap
                          , d = f[h];
                        d && !d._count && (delete f[h],
                        d._graphicsLayer = null)
                    },
                    _clearIIf: function() {
                        var h = this.featureLayer;
                        var f = h.graphics
                          , d = h._selectedFeatures
                          , a = h.getSelectedFeatures().length
                          , c = h.objectIdField;
                        if (a)
                            for (h = f.length - 1; 0 <= h; h--) {
                                a = f[h];
                                var e = a.attributes[c];
                                e in d ? a._count = 1 : (a._count = 0,
                                this._removeFeatureIIf(e))
                            }
                        else
                            h.clear(),
                            this._featureMap = {}
                    },
                    _cancelPendingRequest: function(h) {
                        if (h)
                            try {
                                h.cancel()
                            } catch (f) {}
                    },
                    _toggleVisibility: function(h) {
                        var f = this.featureLayer, d = f.graphics, a = h ? "show" : "hide", c, e = d.length;
                        h = h && f._ager;
                        for (c = 0; c < e; c++) {
                            var n = d[c];
                            n[a]();
                            h && f._repaint(n)
                        }
                    },
                    _applyTimeFilter: function(h) {
                        var f = this.featureLayer;
                        if (f.timeInfo && !f.suspended) {
                            h || f._fireUpdateStart();
                            var d = f._trackManager;
                            d && d.clearTracks();
                            var a = f.getTimeDefinition()
                              , c = f._getOffsettedTE(f._mapTimeExtent);
                            c ? (c = f._getTimeOverlap(a, c)) ? (a = f._filterByTime(f.graphics, c.startTime, c.endTime),
                            d && d.addFeatures(a.match),
                            b.forEach(a.match, function(e) {
                                var n = e._shape;
                                e.visible || (e.show(),
                                (n = e._shape) && n._moveToFront());
                                f._ager && n && f._repaint(e)
                            }),
                            b.forEach(a.noMatch, function(e) {
                                e.visible && e.hide()
                            })) : this._toggleVisibility(!1) : (d && d.addFeatures(f.graphics),
                            this._toggleVisibility(!0));
                            d && (d.moveLatestToFront(),
                            d.drawTracks());
                            h || f._fireUpdateEnd()
                        }
                    }
                });
                w("extend-esri") && y.setObject("layers._RenderMode", C, m);
                return C
            })
        },
        "esri/layers/support/ParallelSnapshot": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "), function(C, y, b, w, m, l) {
                C = C(null, {
                    declaredClass: "esri.layers.support.ParallelSnapshot",
                    layer: null,
                    mode: null,
                    queryTask: null,
                    batchSize: 5,
                    _queryInfo: null,
                    _fetchDfd: null,
                    _startPage: null,
                    _lastPage: null,
                    _pageSize: null,
                    _maxPages: null,
                    _requests: null,
                    constructor: function(k) {
                        y.mixin(this, k);
                        this._requests = {}
                    },
                    destroy: function() {
                        this.cancel()
                    },
                    fetch: function() {
                        var k = new m;
                        this.cancel(!0);
                        this._queryInfo = this.mode._createQueryInfo();
                        this._pageSize = this.mode._getPageSize(this._queryInfo.query);
                        this._maxPages = Math.ceil(this._getFeatureCount() / this._pageSize);
                        this._fetchDfd = k;
                        this._sendRequests();
                        return k.promise
                    },
                    cancel: function(k) {
                        this._cancelPendingRequests(k);
                        this._reset()
                    },
                    _reset: function() {
                        this._startPage = this._lastPage = null;
                        this._requests = {}
                    },
                    _getFeatureCount: function() {
                        return this.layer.mode === this.layer.constructor.MODE_AUTO && 0 === this.layer.getLastExceedsLimitResult() ? this.layer._getMaxFeaturesForAutoSnapshotMode() : this.mode.maxFeatures
                    },
                    _sendRequests: function(k) {
                        var h = this._queryInfo.query
                          , f = this.queryTask
                          , d = this._requests;
                        k = null == k ? 1 : k;
                        var a = k + this.batchSize - 1;
                        a > this._maxPages && (a = this._maxPages);
                        if (!(k > a))
                            for (this._startPage = k,
                            this._lastPage = a; k <= a; k++)
                                h.start = (k - 1) * this._pageSize,
                                h.num = this._pageSize,
                                d[k] = f.execute(h, null, null, this._queryInfo.pbf ? {
                                    format: "pbf"
                                } : null),
                                d[k].then(y.hitch(this, this._handleSuccess, k)).otherwise(y.hitch(this, this._handleError, k))
                    },
                    _evalNextBatch: function(k) {
                        k === this._lastPage && this._sendRequests(this._lastPage + 1)
                    },
                    _handleSuccess: function(k, h) {
                        h.exceededTransferLimit || this._cancelLaterRequests(k, !0);
                        var f = this.mode._checkMaxLimit(h.features);
                        this._fetchDfd.progress({
                            features: f.features,
                            isError: !1
                        });
                        f.maxLimitReached ? ((k = f.featuresDiscarded || this._hasRejectedRequests()) || (k = !!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),
                        this._resolveFetch(k)) : (h.exceededTransferLimit && this._evalNextBatch(k),
                        this._evalResolution())
                    },
                    _handleError: function(k, h) {
                        var f = this._requests;
                        f && f[k] && (1 === k ? this._rejectFetch(h) : (this._evalNextBatch(k),
                        this._fetchDfd.progress({
                            error: h,
                            isError: !0
                        }),
                        this._evalResolution()))
                    },
                    _evalResolution: function() {
                        this._hasPendingRequests() || this._resolveFetch(this._hasRejectedRequests())
                    },
                    _resolveFetch: function(k) {
                        var h = this._hasRejectedRequests();
                        this.cancel(!0);
                        this._fetchDfd.resolve({
                            hasPartialFeatures: k,
                            hasUpdateError: h
                        })
                    },
                    _rejectFetch: function(k) {
                        this.cancel(!0);
                        this._fetchDfd.reject(k)
                    },
                    _getResult: function(k) {
                        return k && k.dfd.results[0]
                    },
                    _hasPendingRequests: function() {
                        return !!this._getPendingRequests().length
                    },
                    _getPendingRequests: function() {
                        var k = this._requests, h, f = [];
                        for (h in k) {
                            var d = k[h];
                            d.isFulfilled() || f.push({
                                pageId: Number(h),
                                dfd: d
                            })
                        }
                        return f
                    },
                    _getLastSuccessfulRequest: function() {
                        var k = this._getResolvedRequests(), h = -Infinity, f;
                        k = b.filter(k, function(d) {
                            return !!this._getResult(d).features.length || 1 === d.pageId
                        }, this);
                        b.forEach(k, function(d) {
                            d.pageId > h && (h = d.pageId,
                            f = d)
                        });
                        return f
                    },
                    _getResolvedRequests: function() {
                        var k = this._requests, h, f = [];
                        for (h in k) {
                            var d = k[h];
                            d.isResolved() && f.push({
                                pageId: Number(h),
                                dfd: d
                            })
                        }
                        return f
                    },
                    _hasRejectedRequests: function() {
                        var k = this._getRejectedRequests()
                          , h = this._getLastSuccessfulRequest()
                          , f = this._getResult(h);
                        f && !f.exceededTransferLimit && (k = b.filter(k, function(d) {
                            return d.pageId <= h.pageId
                        }));
                        return !!k.length
                    },
                    _getRejectedRequests: function() {
                        var k = this._requests, h, f = [];
                        for (h in k) {
                            var d = k[h];
                            d.isRejected() && f.push({
                                pageId: Number(h),
                                dfd: d
                            })
                        }
                        return f
                    },
                    _cancelPendingRequests: function(k) {
                        this._cancelRequests(this._getPendingRequests(), k)
                    },
                    _cancelLaterRequests: function(k, h) {
                        var f = b.filter(this._getPendingRequests(), function(d) {
                            return d.pageId > k
                        });
                        this._cancelRequests(f, h)
                    },
                    _cancelRequests: function(k, h) {
                        var f = this.mode
                          , d = this._requests;
                        b.forEach(k, function(a) {
                            h && delete d[a.pageId];
                            f._cancelPendingRequest(a.dfd)
                        })
                    }
                });
                w("extend-esri") && y.setObject("layers.support.ParallelSnapshot", C, l);
                return C
            })
        },
        "esri/layers/OnDemandMode": function() {
            define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                C = C([f], {
                    declaredClass: "esri.layers._OnDemandMode",
                    constructor: function(a) {
                        this.featureLayer = a;
                        this._featureMap = {}
                    },
                    initialize: function(a) {
                        this.inherited(arguments);
                        this._cellMap = {};
                        this._gridLayer = d.createFromFeatureLayer({
                            layer: this.featureLayer,
                            map: a
                        })
                    },
                    startup: function() {
                        if (!this._started || this._isSuspendedAtStartup)
                            this.inherited(arguments),
                            this._ioQueue = [],
                            this._isSuspendedAtStartup = this.featureLayer.suspended,
                            this.featureLayer.suspended || (this._zoomHandler(),
                            this._enableConnectors())
                    },
                    propertyChangeHandler: function(a) {
                        this._init && (2 > a ? this._zoomHandler() : console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id \x3d " + this.featureLayer.id + ", Layer URL \x3d " + this.featureLayer.url))
                    },
                    destroy: function() {
                        this._disableConnectors();
                        this._processIOQueue(!0);
                        this.inherited(arguments)
                    },
                    drawFeature: function(a) {
                        var c = a.geometry
                          , e = [];
                        if (c) {
                            e = this._gridLayer.getCellsInExtent("point" === c.type ? {
                                xmin: c.x,
                                ymin: c.y,
                                xmax: c.x,
                                ymax: c.y
                            } : c.getExtent(), !1).cells;
                            c = this._cellMap;
                            var n, t = a.attributes[this.featureLayer.objectIdField];
                            for (n = 0; n < e.length; n++) {
                                var g = e[n];
                                var q = g.latticeID;
                                var x = g.row;
                                var v = g.col;
                                q ? g = c[q] = c[q] || g : (c[x] = c[x] || {},
                                g = c[x][v] = c[x][v] || g);
                                g.features = g.features || [];
                                g.features.push(a);
                                this._addFeatureIIf(t, a);
                                this._incRefCount(t)
                            }
                        }
                    },
                    suspend: function() {
                        this._init && this._disableConnectors()
                    },
                    resume: function() {
                        this._init && (this._enableConnectors(),
                        this._zoomHandler())
                    },
                    refresh: function() {
                        this._zoomHandler()
                    },
                    hasAllFeatures: function() {
                        var a = !1, c = this._getCurrentCells(), e;
                        for (e = 0; e < c.length; e++)
                            if (c[e].hasPartialFeatures) {
                                a = !0;
                                break
                            }
                        return !a
                    },
                    hasUpdateError: function() {
                        var a = !1, c = this._getCurrentCells(), e;
                        for (e = 0; e < c.length; e++)
                            if (c[e].hasUpdateError) {
                                a = !0;
                                break
                            }
                        return a
                    },
                    canFetchPBF: function(a) {
                        return this.inherited(arguments) && this.featureLayer._canFetchPBFForQuery(a)
                    },
                    _enableConnectors: function() {
                        var a = this.map;
                        this._zoomConnect = y.connect(a, "onZoomEnd", this, this._zoomHandler);
                        this._panConnect = y.connect(a, "onPanEnd", this, this._panHandler);
                        this._resizeConnect = y.connect(a, "onResize", this, this._panHandler)
                    },
                    _disableConnectors: function() {
                        y.disconnect(this._zoomConnect);
                        y.disconnect(this._panConnect);
                        y.disconnect(this._resizeConnect)
                    },
                    _zoomHandler: function() {
                        this._processIOQueue(!0);
                        var a = this.featureLayer
                          , c = this.map;
                        !a.suspended && a.isQueryable() && (a._fireUpdateStart(),
                        this._clearIIf(),
                        (a = a._trackManager) && a.clearTracks(),
                        this._cellMap = {},
                        this._gridLayer.setResolution(c.extent),
                        this._sendRequest())
                    },
                    _panHandler: function(a) {
                        if (this.featureLayer.isQueryable()) {
                            this.featureLayer._fireUpdateStart();
                            var c = this.featureLayer._resized;
                            a = c ? a : null;
                            c && this._gridLayer.setMapState(a, this.map.width, this.map.height);
                            this._sendRequest(a)
                        }
                    },
                    _sendRequest: function(a) {
                        this._exceeds = !1;
                        var c = this.featureLayer
                          , e = this.map;
                        a = a || e.extent;
                        e = this._gridLayer.getCellsInExtent(a, c.latticeTiling).cells;
                        if (!c.isEditable()) {
                            var n = this._cellMap;
                            e = w.filter(e, function(x) {
                                if (x.lattice) {
                                    if (n[x.latticeID])
                                        return !1
                                } else if (n[x.row] && n[x.row][x.col])
                                    return !1;
                                return !0
                            })
                        }
                        this._pending = this._pending || 0;
                        var t;
                        for (t = 0; t < e.length; t++) {
                            var g = e[t]
                              , q = this._createQueryInfo(g);
                            this._pending++;
                            this._ioQueue.push(c._task.execute(q.query, b.hitch(this, this._drawFeatures, g), b.hitch(this, this._queryErrorHandler, g), q.pbf ? {
                                format: "pbf"
                            } : null))
                        }
                        this._removeOldCells(a);
                        this._endCheck()
                    },
                    _drawFeatures: function(a, c) {
                        this.featureLayer._isImageService && 10.7 > this.featureLayer.version && void 0 === c.exceededTransferLimit && (c.exceededTransferLimit = c.features.length === this.featureLayer.maxRecordCount);
                        a.hasPartialFeatures = !!c.exceededTransferLimit;
                        a.hasUpdateError = !1;
                        this._exceeds = this._exceeds || c.exceededTransferLimit;
                        this._finalizeIO();
                        var e = this.featureLayer
                          , n = this.map.extent
                          , t = a.extent
                          , g = a.row
                          , q = a.col
                          , x = e.objectIdField;
                        c = c.features;
                        var v = this._gridLayer
                          , z = this._cellMap
                          , u = a.latticeID;
                        z = u ? z[u] : z[g] && z[g][q];
                        if (a.resolution == v.resolution && (u ? u === v.getLatticeID(n) : v.intersects(t, n)))
                            if (z)
                                e._sortFeatures(c),
                                this._updateCell(z, c);
                            else
                                for (e._sortFeatures(c),
                                a.features = c,
                                this._addCellToCellMap(a),
                                e = c.length,
                                a = 0; a < e; a++)
                                    n = c[a],
                                    t = n.attributes[x],
                                    this._addFeatureIIf(t, n),
                                    this._incRefCount(t);
                        else
                            z && this._removeCell(g, q, u);
                        this._endCheck()
                    },
                    _queryErrorHandler: function(a, c) {
                        this._finalizeIO();
                        a.hasPartialFeatures = !0;
                        a.hasUpdateError = !0;
                        this._addCellToCellMap(a);
                        this.featureLayer._errorHandler(c);
                        this._endCheck(c)
                    },
                    _finalizeIO: function() {
                        this._pending--
                    },
                    _endCheck: function(a) {
                        if (0 === this._pending) {
                            this._processIOQueue();
                            var c = this.featureLayer
                              , e = c._trackManager;
                            e && (e.clearTracks(),
                            e.addFeatures(c.graphics),
                            c._ager && w.forEach(c.graphics, function(n) {
                                n._shape && c._repaint(n)
                            }),
                            e.moveLatestToFront(),
                            e.drawTracks());
                            this.featureLayer._fireUpdateEnd(!!a && Error("FeatureLayer: " + (a.message || "an error occurred while updating the layer.")), this._exceeds ? {
                                queryLimitExceeded: !0
                            } : null);
                            if (this._exceeds)
                                c.onQueryLimitExceeded()
                        }
                    },
                    _processIOQueue: function(a) {
                        this._ioQueue = w.filter(this._ioQueue, function(c) {
                            return -1 < c.fired ? !1 : !0
                        });
                        a && w.forEach(this._ioQueue, this._cancelPendingRequest)
                    },
                    _createQueryInfo: function(a) {
                        var c = this.featureLayer
                          , e = new h;
                        e.outFields = c.getOutFields();
                        e.where = c._getAttributeFilter();
                        e.returnGeometry = !0;
                        e.geometry = a.extent || a.lattice;
                        c.latticeTiling && a.extent && (e.spatialRelationship = h.SPATIAL_REL_CONTAINS);
                        e.timeExtent = c._getOffsettedTE(c._mapTimeExtent);
                        e.maxAllowableOffset = c._maxOffset;
                        e.quantizationParameters = c._quantizationParameters;
                        e.orderByFields = c.supportsAdvancedQueries ? c.getOrderByFields() : null;
                        e.multipatchOption = c.multipatchOption;
                        c._ts && (e._ts = (new Date).getTime());
                        (a = c.advancedQueryCapabilities) && a.supportsQueryWithResultType && (e.resultType = "tile");
                        a = this.canFetchPBF(e);
                        c._enableEditModeQuantization(e, a);
                        return {
                            query: e,
                            pbf: a
                        }
                    },
                    _getCurrentCells: function(a) {
                        var c = [];
                        a = a || this._cellMap;
                        for (var e in a)
                            if (a.hasOwnProperty(e)) {
                                var n = a[e];
                                n && (n.hasOwnProperty("row") || n.hasOwnProperty("latticeID") ? c.push(n) : "object" === typeof n && c.push.apply(c, this._getCurrentCells(n)))
                            }
                        return c
                    },
                    _addCellToCellMap: function(a) {
                        var c = this._cellMap;
                        if (a.latticeID)
                            c[a.latticeID] = a;
                        else {
                            var e = a.row
                              , n = a.col;
                            c[e] = c[e] || {};
                            c[e][n] = a
                        }
                    },
                    _removeOldCells: function(a) {
                        var c = this._cellMap, e = this._gridLayer, n, t;
                        for (n in c)
                            if (c[n]) {
                                var g = c[n]
                                  , q = g.latticeID
                                  , x = 0
                                  , v = 0;
                                if (q)
                                    x++,
                                    q !== e.getLatticeID(a) && (this._removeCell(null, null, q),
                                    v++);
                                else
                                    for (t in g)
                                        g[t] && (x++,
                                        e.intersects(g[t].extent, a) || (this._removeCell(n, t),
                                        v++));
                                v === x && delete c[n]
                            }
                    },
                    _updateCell: function(a, c) {
                        var e = this.featureLayer
                          , n = e.objectIdField;
                        e = e._selectedFeatures;
                        var t, g = c.length;
                        a.features = a.features || [];
                        for (t = 0; t < g; t++) {
                            var q = c[t]
                              , x = q.attributes[n]
                              , v = this._addFeatureIIf(x, q);
                            v === q ? (this._incRefCount(x),
                            a.features.push(v)) : x in e || (v.setGeometry(q.geometry),
                            v.setAttributes(q.attributes))
                        }
                    },
                    _removeCell: function(a, c, e) {
                        var n = this._cellMap
                          , t = this.featureLayer
                          , g = t.objectIdField
                          , q = e ? n[e] : n[a] && n[a][c];
                        if (q && (e ? delete n[e] : delete n[a][c],
                        a = q.features))
                            for (c = 0; c < a.length; c++)
                                e = a[c].attributes[g],
                                this._decRefCount(e),
                                e in t._selectedFeatures || this._removeFeatureIIf(e)
                    }
                });
                m("extend-esri") && b.setObject("layers._OnDemandMode", C, l);
                return C
            })
        },
        "esri/layers/GridLayout": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a) {
                var c = C(null, {
                    declaredClass: "esri.layers._GridLayout",
                    constructor: function(e, n, t, g) {
                        this.origin = e;
                        this.cellWidth = n.width;
                        this.cellHeight = n.height;
                        this.mapWidth = t.width;
                        this.mapHeight = t.height;
                        this.srInfo = g
                    },
                    setResolution: function(e) {
                        this.resolution = (e.xmax - e.xmin) / this.mapWidth;
                        this.srInfo && (e = Math.round(Math.round(2 * this.srInfo.valid[1] / this.resolution) / this.cellWidth),
                        this._frameStats = [e, 0, e - 1])
                    },
                    setMapState: function(e, n, t) {
                        this.mapWidth = n;
                        this.mapHeight = t;
                        this.setResolution(e)
                    },
                    getCellCoordinates: function(e) {
                        var n = this.resolution
                          , t = this.origin;
                        return {
                            row: Math.floor((t.y - e.y) / (this.cellHeight * n)),
                            col: Math.floor((e.x - t.x) / (this.cellWidth * n))
                        }
                    },
                    normalize: function(e) {
                        var n = this._frameStats;
                        if (n) {
                            var t = n[0]
                              , g = n[1];
                            n = n[2];
                            e < g ? (e %= t,
                            e = e < g ? e + t : e) : e > n && (e %= t)
                        }
                        return e
                    },
                    intersects: function(e, n) {
                        var t = this.srInfo;
                        return t ? b.some(n._getParts(t), function(g) {
                            return e.intersects(g.extent)
                        }) : e.intersects(n)
                    },
                    getCellExtent: function(e, n) {
                        var t = this.resolution
                          , g = this.origin
                          , q = this.cellWidth
                          , x = this.cellHeight;
                        return new k(n * q * t + g.x,g.y - (e + 1) * x * t,(n + 1) * q * t + g.x,g.y - e * x * t,a.createSpatialReference(g.spatialReference.toJson()))
                    },
                    getLatticeID: function(e) {
                        var n = this.getCellCoordinates({
                            x: e.xmin,
                            y: e.ymax
                        })
                          , t = this.getCellCoordinates({
                            x: e.xmax,
                            y: e.ymin
                        });
                        e = n.row;
                        var g = t.row;
                        n = this.normalize(n.col);
                        t = this.normalize(t.col);
                        return e + "_" + g + "_" + n + "_" + t
                    },
                    sorter: function(e, n) {
                        return e < n ? -1 : 1
                    },
                    getCellsInExtent: function(e, n) {
                        var t = this.getCellCoordinates({
                            x: e.xmin,
                            y: e.ymax
                        })
                          , g = this.getCellCoordinates({
                            x: e.xmax,
                            y: e.ymin
                        })
                          , q = t.row
                          , x = g.row;
                        t = t.col;
                        g = g.col;
                        var v = [], z, u, p = [], r = [], B = [];
                        for (z = q; z <= x; z++)
                            for (u = t; u <= g; u++) {
                                var D = this.normalize(u);
                                e = this.getCellExtent(z, D);
                                b.some(v, function(E) {
                                    return E.row === z && E.col === D
                                }) || v.push({
                                    row: z,
                                    col: D,
                                    extent: e,
                                    resolution: this.resolution
                                });
                                n && (p.push(e.xmin, e.xmax),
                                r.push(e.ymin, e.ymax))
                            }
                        t = this.normalize(t);
                        g = this.normalize(g);
                        p.sort(this.sorter);
                        r.sort(this.sorter);
                        n = p.length;
                        for (z = n - 1; 0 <= z; z--)
                            z < n - 1 && p[z] === p[z + 1] && p.splice(z, 1);
                        n = r.length;
                        for (z = n - 1; 0 <= z; z--)
                            z < n - 1 && r[z] === r[z + 1] && r.splice(z, 1);
                        if (p.length && r.length) {
                            e = p[0];
                            u = p[p.length - 1];
                            var G = r[0];
                            var A = r[r.length - 1];
                            n = p.length;
                            for (z = 0; z < n; z++)
                                B.push([[p[z], A], [p[z], G]]);
                            n = r.length;
                            for (z = 0; z < n; z++)
                                B.push([[e, r[z]], [u, r[z]]]);
                            p = new h({
                                paths: B,
                                spatialReference: this.origin.spatialReference.toJson()
                            });
                            v.push({
                                latticeID: q + "_" + x + "_" + t + "_" + g,
                                lattice: p,
                                resolution: this.resolution
                            })
                        }
                        return {
                            minRow: q,
                            maxRow: x,
                            minCol: t,
                            maxCol: g,
                            topRow: q,
                            bottomRow: x,
                            leftCol: t,
                            rightCol: g,
                            cells: v
                        }
                    },
                    _findCell: function(e, n, t) {
                        var g;
                        b.some(e, function(q) {
                            q.row === n && q.col === t && (g = q);
                            return !!g
                        });
                        return g
                    },
                    getExtentOfIntersectingCells: function(e) {
                        var n = this.getCellsInExtent(e)
                          , t = n && n.cells;
                        if (t && t.length) {
                            var g = n.topRow
                              , q = n.leftCol
                              , x = 0;
                            b.forEach(t, function(p) {
                                p.row === g && x++
                            });
                            var v = this._findCell(t, g, q).extent
                              , z = this.srInfo;
                            if (!z || x !== this._frameStats[0] && q !== n.rightCol) {
                                var u = v.xmin;
                                z = u + x * v.getWidth()
                            } else
                                u = z.valid[0],
                                z = z.valid[1];
                            n = this._findCell(t, n.bottomRow, q).extent.ymin;
                            (e = (new k(u,n,z,v.ymax,e.spatialReference))._normalize(!1, !1)) && e.rings && (e = new f(e),
                            e = d.getDenormalizedExtent(e));
                            return e
                        }
                    }
                });
                c.createFromFeatureLayer = function(e) {
                    var n = e.layer;
                    e = n.getMap() || e.map;
                    var t = n._srInfo;
                    (n = e && e.loaded ? new c(new l(t ? t.valid[0] : e.extent.xmin,t ? t.valid[1] : e.extent.ymax,e.spatialReference),{
                        width: n._tileWidth,
                        height: n._tileHeight
                    },{
                        width: e.width,
                        height: e.height
                    },t) : null) && n.setResolution(e.extent);
                    return n
                }
                ;
                w("extend-esri") && y.setObject("layers._GridLayout", c, m);
                return c
            })
        },
        "esri/layers/SelectionMode": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/has", "../kernel", "./RenderMode"], function(C, y, b, w, m) {
                C = C([m], {
                    declaredClass: "esri.layers._SelectionMode",
                    constructor: function(l) {
                        this.featureLayer = l;
                        this._featureMap = {}
                    },
                    propertyChangeHandler: function(l) {
                        this._init && 0 === l && this._applyTimeFilter()
                    },
                    resume: function() {
                        this.propertyChangeHandler(0)
                    },
                    hasAllFeatures: function() {
                        return !this.featureLayer._hasPartialSelectedFeatures
                    },
                    hasUpdateError: function() {
                        return this.featureLayer._hasSelectionError
                    }
                });
                b("extend-esri") && y.setObject("layers._SelectionMode", C, w);
                return C
            })
        },
        "esri/layers/StreamMode": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "), function(C, y, b, w, m, l, k, h, f, d, a) {
                C = C([a], {
                    declaredClass: "esri.layers._StreamMode",
                    constructor: function(c, e) {
                        this.featureLayer = c;
                        this._featureMap = {};
                        this._setRefreshRate();
                        this._drawBuffer = {
                            adds: [],
                            updates: []
                        };
                        this._timeoutId = null;
                        this._flushDrawBuffer = y.hitch(this, this._flushDrawBuffer);
                        this._featuresByTime = {};
                        this._lastEndTimeCheck = null;
                        this._maxFeatureAge = 0;
                        c.purgeOptions && c.purgeOptions.age && "number" === typeof c.purgeOptions.age && (this._maxFeatureAge = 1E3 * Math.ceil(60 * c.purgeOptions.age));
                        this._drawFeatures = y.hitch(this, this._drawFeatures);
                        this._queryErrorHandler = y.hitch(this, this._queryErrorHandler)
                    },
                    startup: function() {
                        this._started || this.inherited(arguments)
                    },
                    propertyChangeHandler: function(c) {
                        this._init && (0 === c ? this._applyTimeFilter() : 3 === c ? this._redrawAllTracks() : console.debug("StreamLayer: Stream Layer only supports changing map time or maximumTrackPoints. Layer id \x3d " + this.featureLayer.id))
                    },
                    destroy: function() {
                        this.inherited(arguments);
                        clearTimeout(this._timeoutId);
                        this._featuresByTime = this._drawBuffer = this._featureMap = null
                    },
                    drawFeature: function(c) {
                        var e = this.featureLayer
                          , n = e.objectIdField;
                        this._timeoutId || (this._timeoutId = setTimeout(this._flushDrawBuffer, this._refreshRate));
                        e._joinField && this._getFeature(c.attributes[n]) ? this._drawBuffer.updates.push({
                            oid: c.attributes[n],
                            updates: c
                        }) : this._drawBuffer.adds.push(c)
                    },
                    resume: function() {
                        this.propertyChangeHandler(0)
                    },
                    refresh: function() {
                        this._pendingRequest && this._cancelPendingRequest(this._pendingRequest);
                        var c = this.featureLayer;
                        c && (c._relatedUrl || c._keepLatestUrl ? (c._fireUpdateStart(),
                        c._refreshing = !0,
                        c.disconnect(),
                        c.clear(),
                        c._relatedQueried = !1,
                        c._keepLatestQueried = !1,
                        c.connect()) : (c._fireUpdateStart(),
                        c.clear(),
                        c._fireUpdateEnd()))
                    },
                    _drawFeatures: function(c, e) {
                        var n = this.featureLayer;
                        n._create(c.features || []);
                        n._fireUpdateEnd(null, e)
                    },
                    _applyTimeFilter: function(c) {
                        this.inherited(arguments);
                        this._redrawAllTracks()
                    },
                    _removeFeatures: function(c) {
                        var e = this.featureLayer
                          , n = e.objectIdField;
                        c && b.forEach(c, function(t) {
                            t = t.attributes[n];
                            e._unSelectFeatureIIf(t, this);
                            this._decRefCount(t);
                            this._removeFeatureIIf(t)
                        }, this)
                    },
                    _addFeatures: function(c) {
                        var e = this.featureLayer, n = e._endTimeField, t = e._startTimeField, g, q = [], x = [], v = [];
                        var z = e._trackManager;
                        var u = e.objectIdField;
                        if (z)
                            for (g in c = z.addFeatures(c),
                            c)
                                c.hasOwnProperty(g) && (q.push(g),
                                c[g].adds && (x = x.concat(c[g].adds)),
                                c[g].deletes && (v = v.concat(c[g].deletes)));
                        else
                            x = c;
                        b.forEach(x, function(p) {
                            var r = p.attributes[u];
                            var B = n && p.attributes[n];
                            !B && this._maxFeatureAge && (B = t && p.attributes[t] ? p.attributes[t] + this._maxFeatureAge : Date.now() + this._maxFeatureAge);
                            B && (B = 1E3 * Math.ceil(B / 1E3),
                            this._featuresByTime[B] ? this._featuresByTime[B].push(r) : this._featuresByTime[B] = [r]);
                            this._addFeatureIIf(r, p);
                            this._incRefCount(r)
                        }, this);
                        v.length && this._removeFeatures(v);
                        z && z.refreshTracks(q)
                    },
                    _updateFeatures: function(c) {
                        var e = this.featureLayer
                          , n = [];
                        var t = e._trackManager;
                        var g = e._trackIdField;
                        b.forEach(c, function(q) {
                            var x = q.updates;
                            q = this._getFeature(q.oid);
                            var v;
                            if (q) {
                                x.geometry && q.setGeometry(x.geometry);
                                x = x.attributes || {};
                                for (v in x)
                                    x.hasOwnProperty(v) && (q.attributes[v] = x[v]);
                                q.setAttributes(q.attributes);
                                q.visible = this._checkFeatureTimeIntersects(q);
                                t && q.attributes[g] ? n.push(q.attributes[g]) : e._repaint(q, null, !0)
                            }
                        }, this);
                        n.length && t.refreshTracks(n)
                    },
                    _redrawAllTracks: function() {
                        var c = this.featureLayer._trackManager, e;
                        c && (e = c.trimTracks()) && 0 < e.length && (this._removeFeatures(e),
                        c.refreshTracks())
                    },
                    _flushDrawBuffer: function() {
                        clearTimeout(this._timeoutId);
                        var c = this._drawBuffer
                          , e = c.adds.splice(0, c.adds.length)
                          , n = c.updates.splice(0, c.updates.length);
                        c = this.featureLayer;
                        if (!c)
                            return !1;
                        c.updating || c._fireUpdateStart();
                        this._addFeatures(e);
                        this._updateFeatures(n);
                        (e = this._getExpiredFeatures()) && e.length && (this._removeFeatures(e),
                        c._trackManager && c._trackManager.removeFeatures(e));
                        c._purge();
                        c._fireUpdateEnd();
                        this._timeoutId = null
                    },
                    _clearDrawBuffer: function() {
                        var c = this._timeoutId
                          , e = this._drawBuffer
                          , n = e.adds;
                        e = e.updates;
                        c && clearTimeout(c);
                        n.splice(0, n.length);
                        e.splice(0, e.length);
                        this._timeoutId = null
                    },
                    _clearTimeBin: function() {
                        this._featuresByTime = {};
                        this._lastEndTimeCheck = 1E3 * Math.ceil(Date.now() / 1E3)
                    },
                    _clearFeatureMap: function() {
                        this._featureMap = {}
                    },
                    _setRefreshRate: function(c) {
                        c = c || 0 === c ? c : 200;
                        0 > c && (c = 200);
                        this._refreshRate = c
                    },
                    _checkFeatureTimeIntersects: function(c) {
                        var e = this.featureLayer
                          , n = e.getMap();
                        return (n = n ? n.timeExtent : null) && e.timeInfo && (e.timeInfo.startTimeField || e.timeInfo.endTimeField) ? 0 < e._filterByTime([c], n.startTime, n.endTime).match.length : !0
                    },
                    _fetchArchive: function(c) {
                        var e = new w
                          , n = this.featureLayer;
                        this._pendingRequest && this._cancelPendingRequest(this._pendingRequest);
                        n._fireUpdateStart();
                        if (c && this.map) {
                            c = new f(c);
                            var t = new h;
                            var g = this.map;
                            var q = n.getFilter() || {};
                            var x = q.where || "1\x3d1";
                            var v = q.geometry ? d.fromJson(q.geometry) : null;
                            q = q.outFields ? q.outFields.split(",") : ["*"];
                            t.geometry = v;
                            t.where = x;
                            t.outFields = q;
                            t.returnGeometry = !0;
                            t.outSpatialReference = new k(g.spatialReference.toJson());
                            this._pendingRequest = c.execute(t).then(function(z) {
                                this._pendingRequest = null;
                                var u = this._fixFieldNameCasing(n, z);
                                z.features = u;
                                this._drawFeatures(z);
                                n._fireUpdateEnd();
                                e.resolve()
                            }
                            .bind(this)).otherwise(function(z) {
                                this._pendingRequest = null;
                                n._errorHandler(z);
                                n._fireUpdateEnd(z);
                                e.reject(z)
                            }
                            .bind(this))
                        } else
                            e.resolve();
                        return e.promise
                    },
                    _queryErrorHandler: function(c) {
                        var e = this.featureLayer;
                        e._errorHandler(c);
                        e._fireUpdateEnd(c)
                    },
                    _fixFieldNameCasing: function(c, e) {
                        var n = e.features || []
                          , t = e.fields;
                        if (!t || !n.length)
                            return n;
                        c = this._mapFieldNameDifferences(c.fields, t);
                        t = [];
                        for (var g, q = 0, x = e.features.length; q < x; q++)
                            e = n[q],
                            g = this._swizzleResponseAttributes(e.attributes, c),
                            t.push({
                                geometry: e.geometry,
                                attributes: g
                            });
                        return t
                    },
                    _mapFieldNameDifferences: function(c, e) {
                        var n = [], t = {}, g;
                        var q = 0;
                        for (g = e.length; q < g; q++)
                            n.push(e[q].name);
                        q = 0;
                        for (g = c.length; q < g; q++) {
                            e = c[q].name;
                            var x = this._checkForStreamFieldName(e, n);
                            x && (t[x] = e)
                        }
                        return t
                    },
                    _checkForStreamFieldName: function(c, e) {
                        c = c.toLowerCase();
                        for (var n, t = 0, g = e.length; t < g; t++)
                            if (e[t].toLowerCase() === c) {
                                n = e[t];
                                break
                            }
                        return n
                    },
                    _swizzleResponseAttributes: function(c, e) {
                        var n = {}, t;
                        for (t in c)
                            if (c.hasOwnProperty(t)) {
                                var g = c[t];
                                e.hasOwnProperty(t) ? n[e[t]] = g : n[t] = g
                            }
                        return n
                    },
                    _getExpiredFeatures: function() {
                        var c, e, n = [], t = [];
                        if (!this.featureLayer._endTimeField && !this._maxFeatureAge)
                            return t;
                        var g = 1E3 * Math.floor(this._lastEndTimeCheck / 1E3);
                        this._lastEndTimeCheck = c = 1E3 * Math.ceil(Date.now() / 1E3);
                        if (g && g !== c)
                            for (e = this._featuresByTime; g <= c; g += 1E3)
                                e[g] && (n = n.concat(e[g]),
                                delete e[g]);
                        b.forEach(n, function(q) {
                            (q = this._getFeature(q)) && t.push(q)
                        }, this);
                        return t
                    }
                });
                m("extend-esri") && y.setObject("layers._StreamMode", C, l);
                return C
            })
        },
        "esri/layers/TrackManager": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "), function(C, y, b, w, m, l, k, h, f, d) {
                var a = -1 !== l.renderer.toLowerCase().indexOf("canvas");
                C = C(null, {
                    declaredClass: "esri.layers._TrackManager",
                    constructor: function(c) {
                        this.layer = c;
                        this.trackMap = {};
                        this.trackLineMap = {}
                    },
                    initialize: function(c) {
                        this.map = c;
                        c = this.layer;
                        this.createTracklineContainer() && (this._handles = [c.on("visibility-change", y.hitch(this, function(e) {
                            this.container.setVisibility(e.visible);
                            this.container.evaluateSuspension()
                        })), c.on("scale-range-change", y.hitch(this, function() {
                            this.container.setScaleRange(this.layer.minScale, this.layer.maxScale)
                        }))])
                    },
                    createTracklineContainer: function() {
                        var c = this.layer;
                        if ("esriGeometryPoint" !== c.geometryType)
                            return null;
                        var e = this.map
                          , n = c._getRenderer();
                        n = n && n.trackRenderer;
                        var t = this.container = new d._GraphicsLayer({
                            id: c.id + "_tracks",
                            _child: !0,
                            visible: c.visible,
                            minScale: c.minScale,
                            maxScale: c.maxScale
                        });
                        t.loaded = !0;
                        t.onLoad(t);
                        t._setMap(e, c._div);
                        a || (e = t._div.getNode(),
                        c = c._div.getNode(),
                        e && c && m.place(e, c, "first"));
                        t.setRenderer(n);
                        return t
                    },
                    addFeatures: function(c) {
                        var e = this.trackMap
                          , n = this.layer
                          , t = n._trackIdField
                          , g = [];
                        b.forEach(c, function(z) {
                            var u = z.attributes[t];
                            (e[u] = e[u] || []).push(z);
                            -1 === b.indexOf(g, u) && g.push(u)
                        });
                        var q = n._startTimeField
                          , x = n.objectIdField
                          , v = function(z, u) {
                            var p = z.attributes[q]
                              , r = u.attributes[q];
                            return p === r ? z.attributes[x] < u.attributes[x] ? -1 : 1 : p < r ? -1 : 1
                        };
                        b.forEach(g, function(z) {
                            e[z].sort(v)
                        })
                    },
                    trimTracks: function(c) {
                        function e(x) {
                            for (x = n[x] || []; x.length > t; )
                                g.push(x.shift())
                        }
                        var n = this.trackMap, t = this.layer.maximumTrackPoints || 0, g = [], q;
                        if (!t)
                            return g;
                        if (c)
                            b.forEach(c, function(x) {
                                e(x)
                            });
                        else
                            for (q in n)
                                n.hasOwnProperty(q) && e(q);
                        return g
                    },
                    drawTracks: function(c) {
                        function e(z) {
                            var u = q[z], p, r;
                            var B = n.trackLineMap[z];
                            t.remove(B);
                            delete n.trackLineMap[z];
                            B = null;
                            if (!u || 2 > u.length)
                                return !1;
                            B = [];
                            for (p = u.length - 1; 0 <= p; p--)
                                (r = u[p].geometry) && B.push([r.x, r.y]);
                            u = {};
                            u[v] = z;
                            1 < B.length && (B = new h(new f({
                                paths: [B],
                                spatialReference: x
                            }),null,u),
                            t.add(B),
                            n.trackLineMap[z] = B)
                        }
                        var n = this, t = this.container, g;
                        if (t) {
                            var q = this.trackMap;
                            var x = this.map.spatialReference;
                            var v = this.layer._trackIdField;
                            if (c)
                                b.forEach(c, function(z) {
                                    e(z)
                                });
                            else
                                for (g in q)
                                    q.hasOwnProperty(g) && e(g)
                        }
                    },
                    refreshTracks: function(c) {
                        function e(v) {
                            var z;
                            n.drawTracks([v]);
                            if (q && q.latestObservationRenderer) {
                                v = t[v] || [];
                                var u = v.length;
                                for (z = 0; z < u; z++)
                                    g._repaint(v[z], null, !0)
                            }
                        }
                        var n = this, t = this.trackMap, g = this.layer, q = g._getRenderer(), x;
                        if (c)
                            b.forEach(c, function(v) {
                                e(v)
                            });
                        else
                            for (x in t)
                                t.hasOwnProperty(x) && e(x);
                        this.moveLatestToFront()
                    },
                    moveLatestToFront: function(c) {
                        b.forEach(this.getLatestObservations(c), function(e) {
                            var n = e._shape;
                            n && n._moveToFront();
                            this._repaint(e, null, !0)
                        }, this.layer)
                    },
                    getLatestObservations: function(c) {
                        function e(x) {
                            x = g[x];
                            return x[x.length - 1]
                        }
                        var n = [], t = this.layer._getRenderer(), g = this.trackMap, q;
                        if (!t.latestObservationRenderer)
                            return n;
                        if (c)
                            b.forEach(c, function(x) {
                                n.push(e(x))
                            });
                        else
                            for (q in g)
                                g.hasOwnProperty(q) && n.push(e(q));
                        return n
                    },
                    clearTracks: function(c) {
                        var e = this.getLatestObservations(c), n = this.container, t = this.trackMap, g;
                        if (c)
                            b.forEach(c, function(x) {
                                delete this.trackMap[x];
                                n && (q = this.trackLineMap[x],
                                n.remove(q),
                                delete this.trackLineMap[x])
                            }, this);
                        else {
                            if (n)
                                for (g in t) {
                                    var q = this.trackLineMap[g];
                                    n.remove(q)
                                }
                            this.trackMap = {};
                            this.trackLineMap = {}
                        }
                        b.forEach(e, function(x) {
                            this._repaint(x, null, !0)
                        }, this.layer)
                    },
                    isLatestObservation: function(c) {
                        var e = this.trackMap[c.attributes[this.layer._trackIdField]];
                        return e ? e[e.length - 1] === c : !1
                    },
                    destroy: function() {
                        b.forEach(this._handles, function(e) {
                            e.remove()
                        });
                        var c = this.container;
                        c && (c.clear(),
                        c._unsetMap(this.map, this.layer._div));
                        this.map = this.layer = this.trackMap = this.container = null
                    }
                });
                w("extend-esri") && y.setObject("layers._TrackManager", C, k);
                return C
            })
        },
        "esri/layers/HeatmapManager": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e) {
                function n() {}
                function t(g) {
                    var q = g.layer;
                    return {
                        geometry: g.geometry,
                        attributes: g.attributes,
                        getLayer: function() {
                            return q
                        }
                    }
                }
                C = C(null, {
                    declaredClass: "esri.layers.HeatmapManager",
                    heatmapRenderer: null,
                    sourceLayer: null,
                    imageLayer: null,
                    useTiles: !0,
                    useWorker: !1,
                    map: null,
                    constructor: function(g) {
                        this.sourceLayer = g;
                        this._hndls = []
                    },
                    initialize: function(g) {
                        this.map = g;
                        var q = this.sourceLayer
                          , x = q.renderer;
                        q.setDrawMode(!1);
                        this.imageLayer = g._getMapImageLyr();
                        var v = this;
                        this.heatmapRenderer = x instanceof a ? x : (x.getRendererInfoByZoom(g.getZoom()) || x.getRendererInfoByScale(g.getScale())).renderer;
                        this.redraw = this.redraw.bind(this);
                        this.recalculateHeatmap = this.recalculateHeatmap.bind(this);
                        this._removeRenderer = this._removeRenderer.bind(this);
                        this._handleRendererChange = this._handleRendererChange.bind(this);
                        this._rendererChangeHandle = this.sourceLayer.on("renderer-change", this._handleRendererChange);
                        this._handleOpacityChange = this._handleOpacityChange.bind(this);
                        this._reprojectFeature = this._reprojectFeature.bind(this);
                        m(["../workers/heatmapCalculator"], function(z) {
                            v._calculator = new z(y.mixin({
                                width: v.map.width,
                                height: v.map.height
                            }, v._getOptions()));
                            v._setupRenderer();
                            v.heatmapRenderer.getStats = z.calculateStats;
                            v.heatmapRenderer.getHistogramData = z.getHistogramData
                        })
                    },
                    destroy: function() {
                        this._removeHandlers();
                        this._rendererChangeHandle && this._rendererChangeHandle.remove();
                        this._rendererChangeHandle = this.sourceLayer = this.imageLayer = this.map = this.heatmapRenderer = this._hndls = null
                    },
                    _handleRendererChange: function(g) {
                        var q = g.renderer
                          , x = q instanceof a;
                        this.heatmapRenderer ? x ? this.heatmapRenderer = q : this._removeRenderer(g) : x && (this.heatmapRenderer = q,
                        this.sourceLayer && this.map && this._setupRenderer())
                    },
                    _handleOpacityChange: function(g) {
                        g = g.opacity;
                        var q = this._getImageBySourceId(this.sourceLayer.id);
                        q && q.setOpacity(g)
                    },
                    _setupRenderer: function() {
                        var g = this._hndls
                          , q = this.sourceLayer
                          , x = this.map
                          , v = this;
                        q._originalDraw = q._draw;
                        q._draw = n;
                        q._div.clear();
                        clearTimeout(this._resetTimer);
                        this._resetTimer = setTimeout(this._resetGraphics.bind(this), 250);
                        g.push(q.on("update-end", this.redraw));
                        g.push(q.on("suspend", function(z) {
                            (z = v._getImageBySourceId(v.sourceLayer.id)) && z.hide()
                        }));
                        g.push(q.on("resume", function(z) {
                            (z = v._getImageBySourceId(v.sourceLayer.id)) && z.show()
                        }));
                        g.push(b.after(q, "redraw", this.redraw));
                        g.push(x.on("layer-remove", function(z) {
                            z.layer == q && ((z = v._getImageBySourceId(v.sourceLayer.id)) && v.imageLayer.removeImage(z),
                            v._removeRenderer({
                                target: q
                            }))
                        }));
                        q._collection && g.push(q.on("graphic-add", function(z) {
                            v._reprojectFeature(z.graphic);
                            v.redraw()
                        }));
                        1 !== q.mode && (g.push(x.on("resize, pan-end", this.redraw)),
                        g.push(x.on("zoom-end", this.redraw)));
                        g.push(q.on("opacity-change", this._handleOpacityChange));
                        this.imageLayer.suspended && this.imageLayer.resume();
                        q.graphics && q.graphics.length && (q.graphics[0].geometry && !x.spatialReference.equals(q.graphics[0].geometry.spatialReference) && w.forEach(q.graphics, function(z) {
                            this._reprojectFeature(z)
                        }
                        .bind(this)),
                        this.redraw())
                    },
                    redraw: function() {
                        if (!this._drawTimer) {
                            var g = this;
                            this._drawTimer = setTimeout(function() {
                                clearTimeout(g._drawTimer);
                                g._drawTimer = null;
                                g.sourceLayer._getRenderer().isInstanceOf(a) && g.recalculateHeatmap()
                            }, 16)
                        }
                    },
                    _removeRenderer: function(g) {
                        var q = g.target;
                        q._draw = q._originalDraw;
                        delete q._originalDraw;
                        q.setDrawMode(!0);
                        this._removeHandlers();
                        this._hndls = [];
                        var x = this._getImageBySourceId(this.sourceLayer.id);
                        x && this.imageLayer.removeImage(x);
                        clearTimeout(this._drawTimer);
                        clearTimeout(this._resetTimer);
                        this._drawTimer = this._resetTimer = null;
                        q.renderer != g.renderer && q.renderer.getRendererInfo ? this.heatmapRenderer = null : (this.destroy(),
                        q.renderer && q.renderer.getRendererInfo && q.redraw())
                    },
                    recalculateHeatmap: function() {
                        this._calculator ? this._doMainCalculation() : this._calculatorClient && this._doWorkerCalculation()
                    },
                    _reprojectFeature: function(g) {
                        if (g && g.geometry) {
                            var q = g.geometry
                              , x = this.map.spatialReference;
                            x.equals(q.spatialReference) || (q = f.project(q, x),
                            null == q ? console.log("Unable to reproject features to map's spatial reference. Please convert feature geometry before adding to layer") : g.geometry = q)
                        }
                    },
                    _doWorkerCalculation: function() {},
                    _doMainCalculation: function() {
                        var g = this.sourceLayer
                          , q = this.map
                          , x = this.heatmapRenderer
                          , v = this.map.extent
                          , z = this.map.width
                          , u = this.map.height
                          , p = this._calculator
                          , r = this
                          , B = function(G) {
                            G = r._getScreenPoints(G.features, q, g);
                            G = p.calculateImageData(y.mixin({
                                screenPoints: G,
                                mapinfo: {
                                    extent: [v.xmin, v.ymin, v.xmax, v.ymax],
                                    resolution: q.getResolution()
                                },
                                width: z,
                                height: u
                            }, r._getOptions()));
                            G = x.getSymbol(t({
                                geometry: q.extent,
                                attributes: {
                                    size: [z, u],
                                    imageData: G
                                },
                                layer: g
                            }));
                            G = new d({
                                extent: q.extent,
                                href: G.url,
                                opacity: 0,
                                sourceId: g.id
                            });
                            r._swapMapImages(G, r._getImageBySourceId(g.id));
                            g.suspended && G.hide()
                        }
                          , D = {
                            geometry: q.extent,
                            timeExtent: g.useMapTime ? q.timeExtent : void 0,
                            spatialRelationship: c.SPATIAL_REL_INTERSECTS
                        };
                        null != g._canDoClientSideQuery(D) ? g.queryFeatures(D, B) : B({
                            features: g.graphics
                        })
                    },
                    _getScreenPoints: function(g, q, x) {
                        var v = []
                          , z = g.length
                          , u = 0
                          , p = 0
                          , r = new h(q.extent.xmin,q.extent.ymax,q.spatialReference)
                          , B = q.toScreen(r)
                          , D = B.x;
                        B = B.y;
                        var G = q.getResolution(), A;
                        for ((p = q.extent.getCacheValue("_parts")) && (A = w.map(p, function(H) {
                            return x._intersects(q, H.extent)[0]
                        })); z--; )
                            if (p = g[z],
                            p.geometry && p.visible) {
                                var E = {
                                    x: Math.ceil((p.geometry.x - r.x) / G + D),
                                    y: Math.floor((r.y - p.geometry.y) / G - B),
                                    attributes: p.attributes
                                };
                                A && (p = 1 < A.length && E.x < -A[0] ? A[1] : A[0],
                                E.x += p);
                                v[u++] = E
                            }
                        return v
                    },
                    _getImageBySourceId: function(g) {
                        var q = this.imageLayer.getImages();
                        q = w.filter(q, function(x) {
                            return x.sourceId == g
                        });
                        if (q.length)
                            return q[q.length - 1]
                    },
                    _swapMapImages: function(g, q) {
                        function x() {
                            v.removeImage(q)
                        }
                        var v = this.imageLayer
                          , z = this.sourceLayer.opacity;
                        v.addImage(g);
                        e.anim(g._node, {
                            opacity: z
                        }, null, null, function() {
                            g.opacity = z
                        });
                        null != q && e.anim(q._node, {
                            opacity: 0
                        }, null, null, x)
                    },
                    _removeHandlers: function() {
                        if (null != this._hndls)
                            for (var g = this._hndls.length; g--; )
                                this._hndls[g].remove()
                    },
                    _getOptions: function() {
                        var g = this.heatmapRenderer;
                        return {
                            blurRadius: g.blurRadius,
                            gradient: g.gradient,
                            maxPixelIntensity: g.maxPixelIntensity,
                            minPixelIntensity: g.minPixelIntensity,
                            field: g.field,
                            fieldOffset: g.fieldOffset
                        }
                    },
                    _resetGraphics: function() {
                        clearTimeout(this._resetTimer);
                        this._resetTimer = null;
                        for (var g = this.sourceLayer.graphics, q = g.length, x; q--; )
                            x = g[q],
                            x._shape = x._offsets = void 0
                    }
                });
                k("extend-esri") && y.setObject("layers.HeatmapManager", C, l);
                return C
            })
        },
        "esri/layers/clustering/ClusterManager": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z) {
                var u = z.layers.clusters
                  , p = z.widgets.popup
                  , r = u.numFeatures
                  , B = Math.pow(2, 53) - 1;
                C = C(l, {
                    declaredClass: "esri.layers.clustering.ClusterManager",
                    layer: null,
                    aggregationInfo: null,
                    container: null,
                    defaults: {
                        clusterRadius: 80,
                        markerSymbol: {
                            color: [77, 77, 77, 255],
                            size: 6,
                            angle: 0,
                            xoffset: 0,
                            yoffset: 0,
                            type: "esriSMS",
                            style: "esriSMSCircle",
                            outline: {
                                color: [255, 255, 255, 255],
                                width: .75,
                                type: "esriSLS",
                                style: "esriSLSSolid"
                            }
                        }
                    },
                    _initialized: !1,
                    _map: null,
                    _eventHandles: null,
                    _clusterRadius: null,
                    _renderer: null,
                    _statisticInfos: null,
                    _fields: null,
                    _infoTemplate: null,
                    _clusterGenerator: null,
                    _singleGraphics: null,
                    constructor: function(D) {
                        this._eventHandles = [];
                        this.layer = D.layer;
                        this.setAggregationInfo(D.aggregationInfo)
                    },
                    initialize: function(D) {
                        this._initialized = !0;
                        this._map = D;
                        this._removeFromPopup(this.layer);
                        this.container = this._createContainer();
                        this._clusterGenerator = this._createClusterGenerator();
                        this._initClusterGenerator();
                        this._createLayerEventListeners();
                        this._createMapEventListeners();
                        this._createPopupEventListeners()
                    },
                    destroy: function(D) {
                        this._clearSingleGraphics();
                        this._removeClusterBoundary();
                        this._destroyEventListeners();
                        this._removeFromPopup(this.container);
                        this._removeFromPopup(this.layer);
                        this._resetClusterNav();
                        this._destroyClusterGenerator(D);
                        this._destroyContainer();
                        this.layer = this.aggregationInfo = this._map = null
                    },
                    setAggregationInfo: function(D) {
                        this.aggregationInfo = D ? y.mixin({}, D) : null;
                        this._applyAggregationInfo()
                    },
                    getClusterRenderer: function() {
                        return this._renderer
                    },
                    getClusterFields: function() {
                        return this._fields || []
                    },
                    getFeaturesInCluster: function(D) {
                        D = D && D.getAggregationInfo();
                        return this._clusterGenerator ? this._clusterGenerator.getFeaturesInCluster(D) : []
                    },
                    getAggregateGraphics: function() {
                        return this.container ? this.container.graphics.slice(0) : []
                    },
                    getSingleGraphics: function() {
                        return this._singleGraphics ? this._singleGraphics.slice(0) : []
                    },
                    redraw: function() {
                        this.container && this.container.redraw()
                    },
                    isClusteringEnabled: function() {
                        return !(!this._clusterGenerator || !this._clusterGenerator.clustersEnabled)
                    },
                    isClusteringActive: function() {
                        return !!(this._clusterGenerator && 0 < this._clusterGenerator.getNumFeatures())
                    },
                    toggleFeatureVisibility: function(D) {
                        this._clusterGenerator && this._clusterGenerator.toggleFeatureVisibility(D)
                    },
                    _createContainer: function() {
                        var D = this.layer
                          , G = new g._GraphicsLayer({
                            _child: !0,
                            id: D.id + "_clusters",
                            visible: D.visible,
                            minScale: D.minScale,
                            maxScale: D.maxScale,
                            infoTemplate: this._infoTemplate
                        });
                        G.fields = this._fields;
                        G.setRenderer(this._renderer);
                        G.loaded = !0;
                        G.onLoad(G);
                        G._setMap(this._map, D._div);
                        return D._childLayer = G
                    },
                    _destroyContainer: function() {
                        var D = this.container;
                        D && (D.clear(),
                        D._unsetMap(this._map, this.layer._div),
                        this.layer._childLayer = null);
                        this.container = null
                    },
                    _createClusterGenerator: function() {
                        return new x({
                            map: this._map,
                            layer: this.layer,
                            clusterRadius: this._clusterRadius,
                            statisticInfos: this._statisticInfos
                        })
                    },
                    _initClusterGenerator: function() {
                        var D = this._clusterGenerator;
                        D.loaded ? this._awaitClusterGenerator() : this._eventHandles.push(D.on("load", y.hitch(this, function() {
                            this._awaitClusterGenerator()
                        })), D.on("load-error", y.hitch(this, function(G) {
                            console.log(G.error)
                        })))
                    },
                    _destroyClusterGenerator: function(D) {
                        this._clusterGenerator && this._clusterGenerator.destroy(D);
                        this._clusterGenerator = null
                    },
                    _awaitClusterGenerator: function() {
                        var D = this._clusterGenerator;
                        D.started ? (this._applyRenderer(),
                        this._initClusterUpdates()) : this._eventHandles.push(D.on("start", y.hitch(this, function() {
                            this._applyRenderer();
                            this._initClusterUpdates()
                        })))
                    },
                    _applyAggregationInfo: function() {
                        this._applyClusterRadius();
                        this._applyRenderer();
                        this._clusterGenerator && !this._clusterGenerator.isUpdateScheduled() && this.redraw()
                    },
                    _applyClusterRadius: function() {
                        var D = this.aggregationInfo;
                        this._clusterRadius = D && D.clusterRadius || this.defaults.clusterRadius;
                        this._clusterGenerator && this._clusterGenerator.setClusterRadius(this._clusterRadius);
                        this._computeClusterRadius()
                    },
                    _computeClusterRadius: function() {
                        var D = this.aggregationInfo || {};
                        D.clusterRadius = this._clusterRadius;
                        this.aggregationInfo = D
                    },
                    _applyRenderer: function() {
                        var D = this.container
                          , G = this._getClusterRendererInfo()
                          , A = this._compareStatInfos(this._statisticInfos, G.statisticInfos);
                        A && (this._statisticInfos = G.statisticInfos,
                        this._clusterGenerator && (this._clusterGenerator.setStatisticInfos(b.map(this._statisticInfos, function(E) {
                            return {
                                attributeInfo: E.attributeInfo,
                                statisticType: E.statisticType
                            }
                        })),
                        D && b.forEach(D.graphics, function(E) {
                            this._applyClusterAttributes(E, E.getAggregationInfo())
                        }, this)));
                        this._renderer = G.renderer;
                        this._applyFields();
                        this._applyInfoTemplate(!!A && this._initialized);
                        D && (D.setRenderer(this._renderer),
                        this.emit("renderer-change"))
                    },
                    _applyFields: function() {
                        this._fields = this._getFields(this._statisticInfos);
                        this.container && (this.container.fields = this._fields)
                    },
                    _applyInfoTemplate: function(D) {
                        var G = this.aggregationInfo
                          , A = G && G.disablePopup;
                        this.layer.infoTemplate && !A ? (G = G && G.infoTemplate || this._infoTemplate,
                        D = D || !G ? this._createInfoTemplate() : this._updateInfoTemplate(G)) : D = null;
                        this._infoTemplate = D;
                        this.container && this.container.setInfoTemplate(this._infoTemplate);
                        this._computeInfoTemplate()
                    },
                    _computeInfoTemplate: function() {
                        var D = this.aggregationInfo || {};
                        D.infoTemplate = this._infoTemplate;
                        this.aggregationInfo = D
                    },
                    _getClusterRendererInfo: function() {
                        var D = this.layer && this.layer.renderer;
                        return D ? this._createClusterRenderer(D) : this._getDefaultClusterRenderer()
                    },
                    _getDefaultClusterRenderer: function() {
                        var D = this._createContinuousCountRenderer();
                        this._addSizeByCountVariable(D);
                        return {
                            renderer: D,
                            statisticInfos: []
                        }
                    },
                    _createContinuousCountRenderer: function(D) {
                        var G = new e(null,"cluster_count");
                        G.addBreak({
                            minValue: -B,
                            maxValue: B,
                            symbol: D ? new D.constructor(D.toJson()) : new n(y.clone(this.defaults.markerSymbol))
                        });
                        return G
                    },
                    _createClusterRenderer: function(D) {
                        if (!this._isSupportedRenderer(D))
                            return this._getDefaultClusterRenderer();
                        var G = [];
                        if (this._isSimpleRenderer(D))
                            var A = this._createContinuousCountRenderer(D.symbol);
                        else {
                            A = new D.constructor(D.toJson());
                            var E = this._getRendererAttributeInfo(D);
                            if (this._isCBRenderer(A)) {
                                var H = v.getClusterField(E, "avg");
                                G.push(this._getStatInfo(E, "avg"));
                                A.normalizationType = null;
                                A.normalizationField = null;
                                A.normalizationTotal = null
                            } else
                                this._isUVRenderer(A) && (H = v.getClusterField(E, "type"),
                                G.push(this._getStatInfo(E, "type")));
                            A.attributeField = H;
                            A.setValueExpression(null);
                            A.valueExpressionTitle = null;
                            A.setVisualVariables(null);
                            this._setRendererTitle(A, D)
                        }
                        D = this._getSupportedVariables(D);
                        E = this._createClusterVariables(D.allVars, G);
                        A.setVisualVariables(E);
                        D.sizeVars.length || this._isCBSizeRenderer(A) || this._addSizeByCountVariable(A);
                        return {
                            renderer: A,
                            statisticInfos: G
                        }
                    },
                    _isSupportedRenderer: function(D) {
                        if (this._isSimpleRenderer(D))
                            return !0;
                        if (this._isCBRenderer(D)) {
                            var G = D.normalizationType;
                            return "function" === typeof D.attributeField || G && "field" !== G ? !1 : !0
                        }
                        return this._isUVRenderer(D) ? "function" === typeof D.attributeField || D.attributeField2 ? !1 : !0 : !1
                    },
                    _isSimpleRenderer: function(D) {
                        return -1 < D.declaredClass.toLowerCase().indexOf("simplerenderer")
                    },
                    _isCBRenderer: function(D) {
                        return -1 < D.declaredClass.toLowerCase().indexOf("classbreaksrenderer")
                    },
                    _isUVRenderer: function(D) {
                        return -1 < D.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")
                    },
                    _isCBSizeRenderer: function(D) {
                        var G = D.infos;
                        if (!this._isCBRenderer(D) || !G || 2 > G.length)
                            return !1;
                        var A = Infinity
                          , E = -Infinity;
                        b.forEach(G, function(H) {
                            if (H = H.symbol) {
                                var J = 0;
                                switch (H.type) {
                                case "simplemarkersymbol":
                                    J = H.size;
                                    break;
                                case "picturemarkersymbol":
                                    J = (H.width + H.height) / 2
                                }
                                A = Math.min(A, J);
                                E = Math.max(E, J)
                            }
                        });
                        return Infinity !== A && -Infinity !== E && A !== E
                    },
                    _getRendererAttributeInfo: function(D) {
                        var G = D.attributeField
                          , A = G ? this.layer.getField(G) : null;
                        return {
                            field: G,
                            attributeType: A && "esriFieldTypeDate" === A.type ? "date" : null,
                            rotationType: null,
                            valueExpression: D.valueExpression,
                            valueExpressionTitle: D.valueExpressionTitle,
                            normalizationField: D.normalizationField
                        }
                    },
                    _setRendererTitle: function(D, G) {
                        D.legendOptions = y.clone(G.legendOptions);
                        D.legendOptions && D.legendOptions.title || (D.legendOptions = D.legendOptions || {},
                        D.legendOptions.title = c.getRendererTitle(G, this.layer))
                    },
                    _getSupportedVariables: function(D) {
                        var G = D.getVisualVariablesForType("colorInfo", !1) || []
                          , A = D.getVisualVariablesForType("sizeInfo", !1) || []
                          , E = D.getVisualVariablesForType("opacityInfo", !1) || [];
                        D = D.getVisualVariablesForType("rotationInfo", !1) || [];
                        G = b.filter(G, this._variableFilter);
                        A = b.filter(A, this._variableFilter);
                        E = b.filter(E, this._variableFilter);
                        D = b.filter(D, this._variableFilter);
                        return {
                            sizeVars: A,
                            allVars: G.concat(A).concat(E).concat(D)
                        }
                    },
                    _variableFilter: function(D) {
                        return "function" !== typeof D.field && !t.viewScaleRE.test(D.valueExpression)
                    },
                    _createClusterVariables: function(D, G) {
                        return b.map(D, function(A) {
                            return this._createVarForAvg(A, G)
                        }, this)
                    },
                    _createVarForAvg: function(D, G) {
                        var A = y.clone(D)
                          , E = this._getVariableAttributeInfo(D);
                        A.field = v.getClusterField(E, "avg");
                        A.normalizationField = null;
                        A.valueExpression = null;
                        A.valueExpressionTitle = null;
                        E = this._getStatInfo(E, "avg");
                        this._addStatInfo(G, E);
                        this._setVariableTitle(A, D);
                        return A
                    },
                    _getVariableAttributeInfo: function(D) {
                        var G = "rotationInfo" === D.type
                          , A = G ? "angle" : null;
                        G = G ? D.rotationType : null;
                        var E = D.legendOptions && D.legendOptions.title
                          , H = D.field
                          , J = H ? this.layer.getField(H) : null;
                        J && "esriFieldTypeDate" === J.type && (A = "date");
                        return {
                            field: H,
                            attributeType: A,
                            rotationType: G,
                            valueExpression: D.valueExpression,
                            valueExpressionTitle: D.valueExpressionTitle || D.valueExpression && E,
                            normalizationField: D.normalizationField
                        }
                    },
                    _setVariableTitle: function(D, G) {
                        D.legendOptions && D.legendOptions.title || (D.legendOptions = D.legendOptions || {},
                        D.legendOptions.title = c.getVisualVariableTitle(G, this.layer))
                    },
                    _getStatInfo: function(D, G) {
                        return {
                            statisticHash: v.getStatisticHash(D, G),
                            attributeInfo: D,
                            statisticType: G
                        }
                    },
                    _addStatInfo: function(D, G) {
                        var A = this._findStatInfo(D, G);
                        A ? A.attributeInfo.valueExpressionTitle || (A.attributeInfo.valueExpressionTitle = G.attributeInfo.valueExpressionTitle) : D.push(G)
                    },
                    _findStatInfo: function(D, G) {
                        var A;
                        b.some(D, function(E) {
                            E.statisticHash === G.statisticHash && (A = E);
                            return !!A
                        });
                        return A
                    },
                    _compareStatInfos: function(D, G) {
                        var A = b.filter(D, function(H) {
                            return !this._findStatInfo(G, H)
                        }, this)
                          , E = b.filter(G, function(H) {
                            return !this._findStatInfo(D, H)
                        }, this);
                        return E.length || A.length ? {
                            added: E,
                            removed: A
                        } : null
                    },
                    _addSizeByCountVariable: function(D) {
                        var G = this._createSizeByCountVariable();
                        G && this._addVariable(D, G)
                    },
                    _getSizeByCountVariable: function(D) {
                        D = D.getVisualVariablesForType("sizeInfo", !1) || [];
                        return b.filter(D, function(G) {
                            return "cluster_count" === G.field
                        })[0]
                    },
                    _updateSizeByCountVariable: function() {
                        var D = this._renderer
                          , G = this._getSizeByCountVariable(D);
                        if (G) {
                            var A = this._createSizeByCountVariable();
                            A && this._replaceVariable(D, G, A)
                        }
                    },
                    _createSizeByCountVariable: function() {
                        var D = this._clusterGenerator;
                        if (D) {
                            var G = D.getCurrentLodStats();
                            if (G) {
                                var A = D.getNumFeatures();
                                D = D.clusters;
                                var E = G.min
                                  , H = G.max;
                                1 === G.count && E === A || 1 === D.length && D[0].count === A ? (E = 1,
                                H = A) : E && E === H && (H = 2 * E);
                                A = {
                                    type: "sizeInfo",
                                    field: "cluster_count",
                                    valueUnit: "unknown",
                                    minSize: 12,
                                    maxSize: 50,
                                    minDataValue: E,
                                    maxDataValue: H,
                                    legendOptions: {
                                        title: r
                                    }
                                }
                            }
                        }
                        return A
                    },
                    _addVariable: function(D, G) {
                        var A = D.visualVariables || [];
                        A.push(G);
                        D.setVisualVariables(A)
                    },
                    _replaceVariable: function(D, G, A) {
                        var E = D.visualVariables;
                        G = b.indexOf(E, G);
                        -1 < G && E.splice(G, 1);
                        E.push(A);
                        D.setVisualVariables(E)
                    },
                    _getFields: function(D) {
                        var G = [new q({
                            name: "cluster_count",
                            type: "esriFieldTypeInteger"
                        })];
                        b.forEach(D, function(A) {
                            var E = A.statisticType;
                            A = A.attributeInfo;
                            var H;
                            "avg" === E ? H = "date" === A.attributeType ? "esriFieldTypeDate" : "esriFieldTypeDouble" : "type" === E && (H = A.field ? this.layer.getField(A.field).type : "esriFieldTypeString");
                            G.push(new q({
                                name: v.getClusterField(A, E),
                                type: H
                            }))
                        }, this);
                        return G
                    },
                    _createInfoTemplate: function() {
                        var D = this._statisticInfos
                          , G = this._renderer
                          , A = [{
                            fieldName: "cluster_count",
                            label: r,
                            visible: !0,
                            format: {
                                digitSeparator: !0,
                                places: 0
                            }
                        }]
                          , E = []
                          , H = [h.substitute({
                            count: "{cluster_count}"
                        }, u.countSummary)]
                          , J = this._isUVRenderer(G) ? G.infos : [];
                        b.forEach(D, function(O) {
                            var V = O.statisticType
                              , aa = O.attributeInfo
                              , da = v.getClusterField(aa, V)
                              , ea = this._getFieldLabel(O);
                            if ("avg" === V) {
                                var Y = {
                                    fieldName: da,
                                    label: ea,
                                    visible: !0,
                                    format: "date" === aa.attributeType ? {
                                        dateFormat: "shortDateShortTime"
                                    } : {
                                        digitSeparator: !0,
                                        places: 1
                                    }
                                };
                                var ia = this._getFieldSummary(O, da)
                            } else
                                "type" === V && (ia = "expression/" + da,
                                Y = {
                                    fieldName: ia,
                                    visible: !0
                                },
                                E.push({
                                    name: da,
                                    title: ea,
                                    returnType: "string",
                                    expression: this._getExpression(J, da)
                                }),
                                ia = this._getFieldSummary(O, ia));
                            Y && A.push(Y);
                            ia && H.push(ia)
                        }, this);
                        return new a({
                            fieldInfos: A,
                            expressionInfos: E,
                            description: H.join("\x3cbr/\x3e\x3cbr/\x3e")
                        })
                    },
                    _updateInfoTemplate: function(D) {
                        var G = D.toJson()
                          , A = this._isUVRenderer(this._renderer) ? this._renderer.infos : [];
                        b.forEach(this._statisticInfos, function(E) {
                            var H = E.statisticType;
                            E = v.getClusterField(E.attributeInfo, H);
                            "type" === H && (H = this._findExpressionInfo(E, G)) && (H.expression = this._getExpression(A, E))
                        }, this);
                        return new a(G)
                    },
                    _findExpressionInfo: function(D, G) {
                        var A;
                        b.some(G.expressionInfos, function(E) {
                            E.name === D && (A = E);
                            return !!A
                        });
                        return A
                    },
                    _escapeDoubleQuotes: function(D) {
                        return D ? D.replace(/"/g, '\\"') : ""
                    },
                    _getExpression: function(D, G) {
                        return ["var uvInfos \x3d [" + this._getObjects(D).join(", ") + "];", 'var predominantType \x3d Text($feature["' + G + '"]);', 'var label \x3d "' + this._escapeDoubleQuotes(u.predominantNoneValue) + '";', "for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")
                    },
                    _getObjects: function(D) {
                        return b.map(D, function(G) {
                            return '{"value": "' + String(G.value) + '","label": "' + this._escapeDoubleQuotes(String(G.label)) + '"}'
                        }, this)
                    },
                    _getFieldLabel: function(D) {
                        var G = D.statisticType
                          , A = D.attributeInfo
                          , E = A.field;
                        D = A.normalizationField;
                        var H = "";
                        if ("avg" === G)
                            var J = D ? u.avgNormFieldLabel : u.avgFieldLabel;
                        else
                            "type" === G && (J = u.predominantFieldLabel);
                        J && (G = A.valueExpression ? A.valueExpressionTitle : this.layer.getFieldLabel(E),
                        D = D && this.layer.getFieldLabel(D),
                        H = h.substitute({
                            fieldLabel: G || "",
                            normFieldLabel: D || ""
                        }, J));
                        return H
                    },
                    _getFieldSummary: function(D, G) {
                        var A = D.statisticType
                          , E = D.attributeInfo
                          , H = E.field;
                        D = E.normalizationField;
                        var J = "";
                        if ("avg" === A)
                            var O = D ? u.avgNormFieldSummary : u.avgFieldSummary;
                        else
                            "type" === A && (O = u.predominantFieldSummary);
                        O && (A = E.valueExpression ? E.valueExpressionTitle : this.layer.getFieldLabel(H),
                        D = D && this.layer.getFieldLabel(D),
                        J = h.substitute({
                            fieldLabel: A || "",
                            normFieldLabel: D || "",
                            fieldValue: "{" + G + "}"
                        }, O));
                        return J
                    },
                    _removeFromPopup: function(D) {
                        var G = this._map.infoWindow
                          , A = G.features;
                        if (A && A.length) {
                            var E = b.filter(A, function(H) {
                                return H.getLayer() !== D
                            });
                            E.length < A.length && (E.length ? G.setFeatures(E) : (G.clearFeatures(),
                            G.hide()))
                        }
                    },
                    _resetClusterNav: function() {
                        this._resetClusterNavPartial();
                        this._popupClusterGraphic = null
                    },
                    _resetClusterNavPartial: function() {
                        this._map.infoWindow.removeActions(this._popupActions);
                        this._hideSingleGraphic(this._popupSingleGraphic);
                        this._popupSingleGraphic = null
                    },
                    _addClusterBoundary: function(D, G) {
                        (G = G.clusterFillSymbol) && (G = new G.constructor(G.toJson()));
                        D = new k(D,G);
                        this._map.graphics.add(D);
                        this._clusterBoundary = D
                    },
                    _removeClusterBoundary: function() {
                        this._map.graphics.remove(this._clusterBoundary);
                        this._clusterBoundary = null
                    },
                    _createBrowseFeaturesAction: function() {
                        return this._map.infoWindow.addActions([{
                            title: p.NLS_browseFeatures,
                            className: "browseFeatures",
                            callback: y.hitch(this, function(D) {
                                D.preventDefault();
                                D = this._map.infoWindow;
                                var G = D.getSelectedFeature()
                                  , A = G.getChildGraphics()
                                  , E = D.getCurrentAnchor();
                                D.setFeatures(A, {
                                    anchor: E
                                });
                                if (A = d.graphicsExtent(A))
                                    this._addClusterBoundary(A, D),
                                    D.show(this._getPopupLocation(A, E));
                                this._popupClusterGraphic = G
                            })
                        }])[0]
                    },
                    _getPopupLocation: function(D, G) {
                        var A = D.getCenter();
                        G = G.toLowerCase();
                        -1 < G.indexOf("top") ? A.update(A.x, D.ymax) : -1 < G.indexOf("bottom") ? A.update(A.x, D.ymin) : -1 < G.indexOf("left") ? A.update(D.xmin, A.y) : A.update(D.xmax, A.y);
                        return A
                    },
                    _createViewSummaryAction: function() {
                        return this._map.infoWindow.addActions([{
                            title: p.NLS_viewSummary,
                            className: "viewSummary",
                            callback: y.hitch(this, function(D) {
                                D.preventDefault();
                                D = this._popupClusterGraphic;
                                var G = this._map.infoWindow;
                                G.setFeatures([D]);
                                G.show(D.geometry);
                                this._popupClusterGraphic = null
                            })
                        }])[0]
                    },
                    _initClusterUpdates: function() {
                        this._updateSizeVariable();
                        this._updateClusterGraphics();
                        this._eventHandles.push(this._clusterGenerator.on("update-end", y.hitch(this, function(D) {
                            (D.mapLevelChange || D.indexChange) && this._updateSizeVariable();
                            this._updateClusterGraphics()
                        })), this._clusterGenerator.on("index-complete", y.hitch(this, function() {
                            this._updateSizeVariable()
                        })))
                    },
                    _updateClusterGraphics: function() {
                        this._hideSingleGraphics();
                        var D = []
                          , G = [];
                        b.forEach(this._clusterGenerator.clusters, function(A) {
                            var E = new k(A.centroid);
                            E.setAggregationSourceLayer(this.layer);
                            E.setAggregationInfo(A);
                            this._applyClusterAttributes(E, A);
                            1 === A.count ? (A = this._getSingleGraphic(E),
                            G.push(A)) : D.push(E)
                        }, this);
                        this._showSingleGraphics(G);
                        this._addGraphics(D)
                    },
                    _addGraphics: function(D) {
                        var G = this.container;
                        G.clear();
                        b.forEach(D, function(A) {
                            G.add(A)
                        })
                    },
                    _getSingleGraphic: function(D) {
                        var G = this._clusterGenerator.getCell(D.getAggregationInfo().primary).features[0]
                          , A = this.layer.renderer;
                        A = A && A.getSymbol(G);
                        var E = this._getSizeByCountVariable(this._renderer);
                        A && E && (D = E ? this._renderer.getSize(D, {
                            sizeInfo: E,
                            shape: A.style,
                            resolution: this._map.getResolutionInMeters(),
                            scale: this._map.getScale()
                        }) : null,
                        G.setSize(D));
                        return G
                    },
                    _showSingleGraphics: function(D) {
                        b.forEach(D, this._showSingleGraphic);
                        this._singleGraphics = D
                    },
                    _hideSingleGraphics: function() {
                        b.forEach(this._singleGraphics, function(D) {
                            D.setSize(null);
                            this._hideSingleGraphic(D)
                        }, this);
                        this._singleGraphics = null
                    },
                    _clearSingleGraphics: function() {
                        b.forEach(this._singleGraphics, function(D) {
                            D.setSize(null)
                        });
                        this._singleGraphics = null
                    },
                    _showSingleGraphic: function(D) {
                        D && D._resume()
                    },
                    _hideSingleGraphic: function(D) {
                        D && D._suspend()
                    },
                    _updateSizeVariable: function() {
                        this.isClusteringEnabled() && (this._updateSizeByCountVariable(),
                        this.emit("renderer-change"))
                    },
                    _applyClusterAttributes: function(D, G) {
                        D.setAttributes(G.attributes)
                    },
                    _createLayerEventListeners: function() {
                        var D = this.layer;
                        this._eventHandles.push(D.on("visibility-change", y.hitch(this, function(G) {
                            this.container.setVisibility(G.visible)
                        })), D.on("scale-range-change", y.hitch(this, function() {
                            this.container.setScaleRange(this.layer.minScale, this.layer.maxScale)
                        })), D.on("renderer-change", y.hitch(this, function() {
                            this._applyRenderer()
                        })), D.on("info-template-change", y.hitch(this, function() {
                            this._applyInfoTemplate()
                        })))
                    },
                    _createMapEventListeners: function() {
                        this._eventHandles.push(this._map.on("zoom-start", y.hitch(this, function() {
                            this._removeClusterBoundary();
                            this._removeFromPopup(this.container);
                            this._removeFromPopup(this.layer);
                            this._resetClusterNav();
                            this.container.clear();
                            this._hideSingleGraphics()
                        })))
                    },
                    _createPopupEventListeners: function() {
                        var D = this._map.infoWindow;
                        this._eventHandles.push(D.on("selection-change", y.hitch(this, function() {
                            this._resetClusterNavPartial();
                            var G = this._map.infoWindow.getSelectedFeature()
                              , A = G && G.getLayer();
                            if (A) {
                                if (A === this.container) {
                                    this._removeClusterBoundary();
                                    var E = this._createBrowseFeaturesAction()
                                } else
                                    A === this.layer && G._isSuspended() ? (E = this._createViewSummaryAction(),
                                    this._popupSingleGraphic = G,
                                    this._showSingleGraphic(this._popupSingleGraphic)) : this._removeClusterBoundary();
                                this._popupActions = E ? [E] : null
                            }
                        })), D.on("clear-features", y.hitch(this, function(G) {
                            this._resetClusterNav();
                            G.isIntermediate || this._removeClusterBoundary()
                        })), D.on("hide", y.hitch(this, function() {
                            this._popupSingleGraphic && this._popupSingleGraphic._suspend();
                            this._clusterBoundary && this._clusterBoundary.hide()
                        })), D.on("show", y.hitch(this, function() {
                            this._popupSingleGraphic && this._popupSingleGraphic._resume();
                            this._clusterBoundary && this._clusterBoundary.show()
                        })))
                    },
                    _destroyEventListeners: function() {
                        b.forEach(this._eventHandles, function(D) {
                            D.remove()
                        })
                    }
                });
                w("extend-esri") && y.setObject("layers.clustering.ClusterManager", C, m);
                return C
            })
        },
        "esri/dijit/PopupTemplate": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "), function(C, y, b, w, m, l, k, h) {
                C = C([l, k], {
                    declaredClass: "esri.dijit.PopupTemplate",
                    "-chains-": {
                        constructor: "manual"
                    },
                    chartTheme: null,
                    constructor: function(f, d) {
                        y.mixin(this, d);
                        this.initialize(f, d)
                    },
                    getTitle: function(f) {
                        var d;
                        this.info && (d = this.titleHasRelatedFields || this.titleHasAsyncExpressions ? "" : this._getPopupValues(f, this._fetchAttributes(f, null, this.getExpressionFieldsInTitle()), !0).title);
                        return d || ""
                    },
                    getContent: function(f) {
                        return this.info ? (new h({
                            template: this,
                            graphic: f,
                            chartTheme: this.chartTheme
                        },w.create("div"))).domNode : ""
                    }
                });
                b("extend-esri") && y.setObject("dijit.PopupTemplate", C, m);
                return C
            })
        },
        "esri/PopupInfo": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p) {
                C = C(null, {
                    declaredClass: "esri.PopupInfo",
                    _reNewline: /(\n)/ig,
                    _reExprField: /^\s*expression\//i,
                    _reExprFieldPattern: /\{expression\/([^\}]+)\}/ig,
                    _exprPrefix: "expression/",
                    _relatedFieldPrefix: "relationships/",
                    _aggregatedFeaturesVariable: "$aggregatedfeatures",
                    initialize: function(r, B) {
                        if (r) {
                            y.mixin(this, B);
                            this.info = r;
                            this.title = this.getTitle;
                            this.content = this.getContent;
                            this._exprCache = this._compileExpressions(this.info.expressionInfos);
                            var D = this._fieldLabels = {}
                              , G = this._fieldsMap = {};
                            this.info.fieldInfos && b.forEach(this.info.fieldInfos, function(A) {
                                var E = A.fieldName.toLowerCase()
                                  , H = this._isExpressionField(E) ? this.getExpressionInfo(E) : null;
                                D[E] = H ? H.title : A.label;
                                G[E] = A
                            }, this);
                            this.titleHasRelatedFields = !(!this.info.title || -1 === this.info.title.indexOf("{" + this._relatedFieldPrefix));
                            this.titleHasAsyncExpressions = this._titleHasAsyncExpressions();
                            this.contentHasAsyncExpressions = this._contentHasAyncExpressions()
                        }
                    },
                    toJson: function() {
                        return w.fromJson(w.toJson(this.info))
                    },
                    getTitle: function() {},
                    getContent: function() {},
                    getFieldInfo: function(r) {
                        var B;
                        b.some(this.info && this.info.fieldInfos, function(D) {
                            D.fieldName === r && (B = D);
                            return !!B
                        });
                        return B
                    },
                    getExpressionInfo: function(r) {
                        if (r = this._getExprField(r)) {
                            r = r.toLowerCase();
                            var B;
                            b.some(this.info.expressionInfos, function(D) {
                                D.name.toLowerCase() === r && (B = D);
                                return !!B
                            });
                            return B
                        }
                    },
                    getExpressionFieldsInTitle: function() {
                        return this._getExprFieldsFromTemplatedString(this.info.title)
                    },
                    getExpressionFieldsInContent: function() {
                        var r = this._collectExprFieldsFromTemplatedString(this.info.description, []);
                        this.info.description || b.forEach(this.info.fieldInfos, function(B) {
                            B.visible && this._collectExprField(B.fieldName, r)
                        }, this);
                        b.forEach(this.info.mediaInfos, function(B) {
                            this._collectExprFieldsFromTemplatedString(B.title, r);
                            this._collectExprFieldsFromTemplatedString(B.caption, r);
                            if (B = B.value)
                                this._collectExprFieldsFromTemplatedString(B.linkURL, r),
                                this._collectExprFieldsFromTemplatedString(B.sourceURL, r),
                                b.forEach(B.fields, function(D) {
                                    this._collectExprField(D, r)
                                }, this),
                                this._collectExprField(B.normalizeField, r),
                                this._collectExprField(B.tooltipField, r)
                        }, this);
                        return r
                    },
                    getRequiredExpressionFields: function() {
                        return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())
                    },
                    hasGeometryOperations: function() {
                        return b.some(this._getArcadeExpressions(), function(r) {
                            return r.hasGeometryOperations()
                        })
                    },
                    hasAsyncExpressions: function() {
                        return b.some(this._getArcadeExpressions(), function(r) {
                            return r.async
                        })
                    },
                    initializeArcadeEngine: function() {
                        return z.initialize(this._getArcadeExpressions())
                    },
                    getComponents: function(r, B) {
                        var D = this.info
                          , G = {
                            initArcadeEngine: this.initializeArcadeEngine()
                        };
                        D.fieldInfos && (D = b.filter(D.fieldInfos, function(A) {
                            return -1 !== A.fieldName.indexOf(this._relatedFieldPrefix)
                        }, this)) && 0 < D.length && (G.relatedInfo = this._getRelatedRecords({
                            graphic: r,
                            fieldsInfo: D
                        }));
                        this._needFullResolutionFeature(r) && (G.fullResolutionFeature = this._getFullResolutionFeature(r));
                        this._needAggregatedFeaturesLayer(r) && (G.aggregatedFeaturesLayer = this._getAggregatedFeaturesLayer(r));
                        return n(G).then(y.hitch(this, function(A) {
                            var E = A.fullResolutionFeature
                              , H = B && B.evaluateAllExpressions
                              , J = H ? null : this.getRequiredExpressionFields();
                            A = (H ? this.hasAsyncExpressions() : this._hasAsyncExpressions(J)) ? this._fetchAttributesAsync(r, E, J, A.aggregatedFeaturesLayer) : this._fetchAttributes(r, E, J);
                            return n([A]).then(y.hitch(this, function(O) {
                                return this._getPopupValues(r, O[0])
                            }))
                        }))
                    },
                    getAttachments: function(r) {
                        var B = r.getSourceLayer();
                        r = r.attributes;
                        if (this.info.showAttachments && B && B.hasAttachments && B.objectIdField && (r = r && r[B.objectIdField]))
                            return B.queryAttachmentInfos(r)
                    },
                    _needAggregatedFeaturesLayer: function(r) {
                        return r.isAggregate() ? b.some(this._getArcadeExpressions(), function(B) {
                            return B.hasVariable(this._aggregatedFeaturesVariable)
                        }, this) : !1
                    },
                    _getAggregatedFeaturesLayer: function(r) {
                        return r.getAggregationSourceLayer().getFeatureCollectionLayer(r.getChildGraphics()).always(function(B) {
                            return B instanceof Error ? null : B
                        })
                    },
                    _needFullResolutionFeature: function(r) {
                        return (r = r.getSourceLayer()) ? "function" === typeof r.getMaxAllowableOffset && 0 < r.getMaxAllowableOffset() && this.hasGeometryOperations() : !1
                    },
                    _getFullResolutionFeature: function(r) {
                        var B = r.getSourceLayer()
                          , D = B.objectIdField;
                        r = (r = r.attributes) && D && r[D];
                        if (null == r)
                            return null;
                        var G = new g;
                        G.where = D + "\x3d" + r;
                        G.maxAllowableOffset = 0;
                        G.outFields = [D];
                        B._enableCacheHint(G);
                        return B.queryFeatures(G).then(function(A) {
                            return A.features && A.features[0]
                        })
                    },
                    _isExpressionField: function(r) {
                        return this._reExprField.test(r)
                    },
                    _getExprField: function(r) {
                        return this._isExpressionField(r) ? r.replace(this._reExprField, "") : null
                    },
                    _collectExprField: function(r, B) {
                        (r = this._getExprField(r)) && B.push(r);
                        return B
                    },
                    _collectExprFieldsFromTemplatedString: function(r, B) {
                        r = this._getExprFieldsFromTemplatedString(r);
                        r.length && Array.prototype.push.apply(B, r);
                        return B
                    },
                    _getExprFieldsFromTemplatedString: function(r) {
                        r = r ? r.match(this._reExprFieldPattern) : null;
                        return b.map(r, function(B) {
                            return B.replace(this._reExprFieldPattern, "$1")
                        }, this)
                    },
                    _titleHasAsyncExpressions: function() {
                        return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())
                    },
                    _contentHasAyncExpressions: function() {
                        return this._hasAsyncExpressions(this.getExpressionFieldsInContent())
                    },
                    _hasAsyncExpressions: function(r) {
                        return b.some(r, function(B) {
                            B = this._exprCache[B];
                            return !(!B || !B.async)
                        }, this)
                    },
                    _compileExpressions: function(r) {
                        var B = {};
                        b.forEach(r, function(D) {
                            var G = D.returnType && D.returnType.toLowerCase();
                            B[D.name] = new t({
                                expression: D.expression,
                                returnType: "number" === G ? "number" : "string",
                                profile: z
                            })
                        });
                        return B
                    },
                    _getArcadeExpressions: function() {
                        var r = [], B;
                        for (B in this._exprCache)
                            r.push(this._exprCache[B]);
                        return r
                    },
                    _fetchAttributesAsync: function(r, B, D, G) {
                        var A = this._fetchAttributes(r, B, D, G);
                        r = {};
                        for (var E in A)
                            (B = A[E]) && B.then && (r[E] = B);
                        return n(r).then(y.hitch(this, function(H) {
                            for (var J in H) {
                                var O = H[J];
                                A[J] = O instanceof Error ? null : this._processArcadeResult(O)
                            }
                            return A
                        }))
                    },
                    _processArcadeResult: function(r) {
                        "string" === typeof r && (r = d.encode(r));
                        return r
                    },
                    _fetchAttributes: function(r, B, D, G) {
                        var A = y.clone(r.attributes) || {}
                          , E = B && B.geometry
                          , H = this._exprPrefix
                          , J = this._exprCache;
                        D = D || b.map(this.info.expressionInfos, function(O) {
                            return O.name
                        });
                        b.forEach(D, function(O) {
                            var V = H + O;
                            O = (O = J[O]) ? r.evaluateExpression(O, this._getEvalOptions(O, r, E, G)) : null;
                            A[V] = this._processArcadeResult(O)
                        }, this);
                        return A
                    },
                    _getEvalOptions: function(r, B, D, G) {
                        var A = r.hasGeometryOperations()
                          , E = B.getSourceLayer()
                          , H = E && (E.getMap() || E.parentLayer && E.parentLayer.getMap());
                        G && (G._map = H);
                        r = z.getEvalOptions({
                            expression: r,
                            feature: B,
                            layer: E,
                            aggregatedFeaturesLayer: G,
                            map: H,
                            spatialReference: H && H.spatialReference
                        });
                        B = r.context.vars.$feature;
                        A = !(!A || !D);
                        B && A && (B._geometry = D);
                        r.skipCache = A;
                        return r
                    },
                    _getPopupValues: function(r, B, D) {
                        B = B || this._fetchAttributes(r);
                        var G = this.info, A = r.getSourceLayer(), E = y.clone(B), H = "", J = "", O, V, aa = A && A._getDateOpts && A._getDateOpts().properties;
                        aa = aa && aa.slice(0);
                        var da = {
                            dateFormat: {
                                properties: aa,
                                formatter: "DateFormat" + this._insertOffset(this._dateFormats.shortDateShortTime)
                            },
                            format: null
                        };
                        if (this._relatedInfo)
                            for (ia in this._relatedInfo)
                                if (this._relatedInfo.hasOwnProperty(ia)) {
                                    var ea = this._relatedInfo[ia]
                                      , Y = this._relatedLayersInfo[ia];
                                    ea && (b.forEach(ea.relatedFeatures, function(pa) {
                                        for (V in pa.attributes)
                                            if (pa.attributes.hasOwnProperty(V) && "esriRelCardinalityOneToOne" === Y.relation.cardinality) {
                                                var L = this._toRelatedFieldName([Y.relation.id, V]);
                                                B[L] = E[L] = pa.attributes[V]
                                            }
                                    }, this),
                                    b.forEach(ea.relatedStatsFeatures, function(pa) {
                                        for (V in pa.attributes)
                                            if (pa.attributes.hasOwnProperty(V)) {
                                                var L = this._toRelatedFieldName([Y.relation.id, V]);
                                                B[L] = E[L] = pa.attributes[V]
                                            }
                                    }, this))
                                }
                        for (O in E) {
                            var ia = this._fieldsMap[O.toLowerCase()];
                            ea = this._getLayerFieldInfo(A, O);
                            ia && ea && (ia.fieldName = ea.name);
                            E[O] = this._formatValue(E[O], O, da);
                            aa && ia && ia.format && ia.format.dateFormat && (ia = b.indexOf(aa, O),
                            -1 < ia && aa.splice(ia, 1))
                        }
                        if (A)
                            for (O in aa = A.typeIdField,
                            B)
                                if (B.hasOwnProperty(O) && -1 === O.indexOf(this._relatedFieldPrefix)) {
                                    var qa = B[O];
                                    a.isDefined(qa) && (ia = this._getDomainName(A, r, O, qa),
                                    a.isDefined(ia) ? E[O] = ia : O === aa && (ia = this._getTypeName(A, r, qa),
                                    a.isDefined(ia) && (E[O] = ia)))
                                }
                        G.title && (H = this._processFieldsInLinks(this._fixTokens(G.title, A), B),
                        H = y.trim(this._removeEmptyHref(a.substitute(E, H, da) || "")));
                        if (D)
                            return {
                                title: H
                            };
                        G.description && (J = this._processFieldsInLinks(this._fixTokens(G.description, A), B),
                        J = y.trim(this._removeEmptyHref(a.substitute(E, J, da) || "")));
                        if (G.fieldInfos) {
                            var wa = [];
                            b.forEach(G.fieldInfos, function(pa) {
                                (O = pa.fieldName) && pa.visible && wa.push([this._fieldLabels[O.toLowerCase()] || O, a.substitute(E, "${" + O + "}", da) || ""])
                            }, this)
                        }
                        var K;
                        if (G.mediaInfos) {
                            var Z = [];
                            b.forEach(G.mediaInfos, function(pa) {
                                K = 0;
                                qa = pa.value;
                                switch (pa.type) {
                                case "image":
                                    var L = qa.sourceURL;
                                    L = L && y.trim(this._removeEmptyHref(a.substitute(B, this._fixTokens(L, A))));
                                    K = !!L;
                                    break;
                                case "piechart":
                                case "linechart":
                                case "columnchart":
                                case "barchart":
                                    L = qa.normalizeField;
                                    qa.fields = b.map(qa.fields, function(xa) {
                                        return (R = this._getLayerFieldInfo(A, xa)) ? R.name : xa
                                    }, this);
                                    if (L) {
                                        var R = this._getLayerFieldInfo(A, L);
                                        qa.normalizeField = R ? R.name : L
                                    }
                                    K = b.some(qa.fields, function(xa) {
                                        return a.isDefined(B[xa]) || -1 !== xa.indexOf(this._relatedFieldPrefix) && this._relatedInfo
                                    }, this);
                                    break;
                                default:
                                    return
                                }
                                if (K) {
                                    pa = y.clone(pa);
                                    qa = pa.value;
                                    L = pa.title ? this._processFieldsInLinks(this._fixTokens(pa.title, A), B) : "";
                                    var ha = pa.caption ? this._processFieldsInLinks(this._fixTokens(pa.caption, A), B) : "";
                                    pa.title = L ? y.trim(this._removeEmptyHref(a.substitute(E, L, da) || "")) : "";
                                    pa.caption = ha ? y.trim(this._removeEmptyHref(a.substitute(E, ha, da) || "")) : "";
                                    if ("image" === pa.type)
                                        qa.sourceURL = a.substitute(B, this._fixTokens(qa.sourceURL, A)),
                                        qa.linkURL && (qa.linkURL = y.trim(a.substitute(B, this._fixTokens(qa.linkURL, A)) || ""));
                                    else {
                                        var na, ta;
                                        b.forEach(qa.fields, function(xa, Aa) {
                                            if (-1 !== xa.indexOf(this._relatedFieldPrefix))
                                                ta = this._getRelatedChartInfos(xa, qa, B, da),
                                                ta instanceof Array ? qa.fields = ta : qa.fields[Aa] = ta;
                                            else {
                                                var ca = B[xa];
                                                ca = void 0 === ca ? null : ca;
                                                na = B[qa.normalizeField] || 0;
                                                ca && na && (ca /= na);
                                                qa.fields[Aa] = {
                                                    y: ca,
                                                    tooltip: (this._fieldLabels[xa.toLowerCase()] || xa) + ":\x3cbr/\x3e" + this._formatValue(ca, xa, da, !!na)
                                                }
                                            }
                                        }, this)
                                    }
                                    Z.push(pa)
                                }
                            }, this)
                        }
                        return {
                            title: H,
                            description: J,
                            hasDescription: !!G.description,
                            fields: wa && wa.length ? wa : null,
                            mediaInfos: Z && Z.length ? Z : null,
                            formatted: E,
                            editSummary: !1 !== G.showLastEditInfo && A && A.getEditSummary ? A.getEditSummary(r) : ""
                        }
                    },
                    _getRelatedChartInfos: function(r, B, D, G) {
                        var A, E;
                        var H = [];
                        var J = this._fromRelatedFieldName(r);
                        var O = J[0];
                        var V = this._relatedInfo[O];
                        O = this._relatedLayersInfo[O];
                        V && b.forEach(V.relatedFeatures, function(aa) {
                            aa = aa.attributes;
                            var da;
                            for (da in aa)
                                if (aa.hasOwnProperty(da) && da === J[1]) {
                                    var ea = {};
                                    E = aa[da];
                                    B.normalizeField && (A = -1 !== B.normalizeField.indexOf(this._relatedFieldPrefix) ? aa[this._fromRelatedFieldName(B.normalizeField)[1]] : D[B.normalizeField]);
                                    E && A && (E /= A);
                                    if (B.tooltipField)
                                        if (-1 !== B.tooltipField.indexOf(this._relatedFieldPrefix)) {
                                            var Y = this._fromRelatedFieldName(B.tooltipField)[1]
                                              , ia = a.isDefined(aa[Y]) ? this._formatValue(aa[Y], B.tooltipField, G, !!A) : Y;
                                            ea.tooltip = ia + ":\x3cbr/\x3e" + this._formatValue(E, Y, G, !!A)
                                        } else
                                            ea.tooltip = (this._fieldLabels[r.toLowerCase()] || r) + ":\x3cbr/\x3e" + this._formatValue(E, B.tooltipField, G, !!A);
                                    else
                                        ea.tooltip = E;
                                    ea.y = E;
                                    H.push(ea)
                                }
                        }, this);
                        return "esriRelCardinalityOneToMany" === O.relation.cardinality || "esriRelCardinalityManyToMany" === O.relation.cardinality ? H : H[0]
                    },
                    _dateFormats: {
                        shortDate: "(datePattern: 'M/d/y', selector: 'date')",
                        shortDateShortTime: "(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
                        shortDateShortTime24: "(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",
                        shortDateLongTime: "(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
                        shortDateLongTime24: "(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
                        shortDateLE: "(datePattern: 'd/M/y', selector: 'date')",
                        shortDateLEShortTime: "(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
                        shortDateLEShortTime24: "(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
                        shortDateLELongTime: "(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
                        shortDateLELongTime24: "(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",
                        longMonthDayYear: "(datePattern: 'MMMM d, y', selector: 'date')",
                        longMonthDayYearShortTime: "(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",
                        longMonthDayYearShortTime24: "(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
                        longMonthDayYearLongTime: "(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
                        longMonthDayYearLongTime24: "(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",
                        dayShortMonthYear: "(datePattern: 'd MMM y', selector: 'date')",
                        dayShortMonthYearShortTime: "(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",
                        dayShortMonthYearShortTime24: "(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",
                        dayShortMonthYearLongTime: "(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",
                        dayShortMonthYearLongTime24: "(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
                        longDate: "(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
                        longDateShortTime: "(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",
                        longDateShortTime24: "(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
                        longDateLongTime: "(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
                        longDateLongTime24: "(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",
                        longMonthYear: "(datePattern: 'MMMM y', selector: 'date')",
                        shortMonthYear: "(datePattern: 'MMM y', selector: 'date')",
                        year: "(datePattern: 'y', selector: 'date')"
                    },
                    _dateFormatsJson: {
                        shortDate: {
                            datePattern: "M/d/y",
                            selector: "date"
                        },
                        shortDateShortTime: {
                            datePattern: "M/d/y",
                            timePattern: "h:mm a",
                            selector: "date and time"
                        },
                        shortDateShortTime24: {
                            datePattern: "M/d/y",
                            timePattern: "H:mm",
                            selector: "date and time"
                        },
                        shortDateLongTime: {
                            datePattern: "M/d/y",
                            timePattern: "h:mm:ss a",
                            selector: "date and time"
                        },
                        shortDateLongTime24: {
                            datePattern: "M/d/y",
                            timePattern: "H:mm:ss",
                            selector: "date and time"
                        },
                        shortDateLE: {
                            datePattern: "d/M/y",
                            selector: "date"
                        },
                        shortDateLEShortTime: {
                            datePattern: "d/M/y",
                            timePattern: "h:mm a",
                            selector: "date and time"
                        },
                        shortDateLEShortTime24: {
                            datePattern: "d/M/y",
                            timePattern: "H:mm",
                            selector: "date and time"
                        },
                        shortDateLELongTime: {
                            datePattern: "d/M/y",
                            timePattern: "h:mm:ss a",
                            selector: "date and time"
                        },
                        shortDateLELongTime24: {
                            datePattern: "d/M/y",
                            timePattern: "H:mm:ss",
                            selector: "date and time"
                        },
                        longMonthDayYear: {
                            datePattern: "MMMM d, y",
                            selector: "date"
                        },
                        longMonthDayYearShortTime: {
                            datePattern: "MMMM d, y",
                            timePattern: "h:mm a",
                            selector: "date and time"
                        },
                        longMonthDayYearShortTime24: {
                            datePattern: "MMMM d, y",
                            timePattern: "H:mm",
                            selector: "date and time"
                        },
                        longMonthDayYearLongTime: {
                            datePattern: "MMMM d, y",
                            timePattern: "h:mm:ss a",
                            selector: "date and time"
                        },
                        longMonthDayYearLongTime24: {
                            datePattern: "MMMM d, y",
                            timePattern: "H:mm:ss",
                            selector: "date and time"
                        },
                        dayShortMonthYear: {
                            datePattern: "d MMM y",
                            selector: "date"
                        },
                        dayShortMonthYearShortTime: {
                            datePattern: "d MMM y",
                            timePattern: "h:mm a",
                            selector: "date and time"
                        },
                        dayShortMonthYearShortTime24: {
                            datePattern: "d MMM y",
                            timePattern: "H:mm",
                            selector: "date and time"
                        },
                        dayShortMonthYearLongTime: {
                            datePattern: "d MMM y",
                            timePattern: "h:mm:ss a",
                            selector: "date and time"
                        },
                        dayShortMonthYearLongTime24: {
                            datePattern: "d MMM y",
                            timePattern: "H:mm:ss",
                            selector: "date and time"
                        },
                        longDate: {
                            datePattern: "EEEE, MMMM d, y",
                            selector: "date"
                        },
                        longDateShortTime: {
                            datePattern: "EEEE, MMMM d, y",
                            timePattern: "h:mm a",
                            selector: "date and time"
                        },
                        longDateShortTime24: {
                            datePattern: "EEEE, MMMM d, y",
                            timePattern: "H:mm",
                            selector: "date and time"
                        },
                        longDateLongTime: {
                            datePattern: "EEEE, MMMM d, y",
                            timePattern: "h:mm:ss a",
                            selector: "date and time"
                        },
                        longDateLongTime24: {
                            datePattern: "EEEE, MMMM d, y",
                            timePattern: "H:mm:ss",
                            selector: "date and time"
                        },
                        longMonthYear: {
                            datePattern: "MMMM y",
                            selector: "date"
                        },
                        shortMonthYear: {
                            datePattern: "MMM y",
                            selector: "date"
                        },
                        year: {
                            datePattern: "y",
                            selector: "date"
                        }
                    },
                    _reHref: /href\s*=\s*(")([^"]+)"/ig,
                    _reHrefApos: /href\s*=\s*(')([^']+)'/ig,
                    _fixTokens: function(r, B) {
                        var D = this;
                        return r.replace(/(\{([^\{\r\n]+)\})/g, function(G, A, E) {
                            G = D._getLayerFieldInfo(B, E);
                            return "$" + (G ? "{" + G.name + "}" : A)
                        })
                    },
                    _encodeAttributes: function(r, B) {
                        r = y.clone(r) || {};
                        var D, G;
                        for (D in r)
                            (G = r[D]) && "string" === typeof G && (G = B ? G : encodeURIComponent(G),
                            G = G.replace(/'/g, "\x26apos;"),
                            r[D] = G);
                        return r
                    },
                    _processFieldsInLinks: function(r, B) {
                        var D = this._encodeAttributes(B)
                          , G = this._encodeAttributes(B, !0);
                        B = y.hitch(this, this._addValuesToHref, B, D, G);
                        r && (r = r.replace(this._reHref, B).replace(this._reHrefApos, B));
                        return r
                    },
                    _addValuesToHref: function(r, B, D, G, A, E) {
                        E = E && y.trim(E);
                        return G = a.substitute(E && 0 === E.indexOf("${") ? "'" === A ? D : r : B, G)
                    },
                    _getLayerFieldInfo: function(r, B) {
                        return r && r.getField ? r.getField(B) : null
                    },
                    _formatValue: function(r, B, D, G) {
                        var A = this._fieldsMap[B.toLowerCase()]
                          , E = A && A.format;
                        B = -1 !== b.indexOf(D.dateFormat.properties, B);
                        var H = "number" === typeof r && !B && (!E || !E.dateFormat);
                        if (!a.isDefined(r) || !A || !a.isDefined(E))
                            return this._applyFormatting(r, H);
                        A = E.hasOwnProperty("places") || E.hasOwnProperty("digitSeparator");
                        var J = E.hasOwnProperty("digitSeparator") ? E.digitSeparator : !0;
                        if (A && !B)
                            var O = {
                                formatType: "NumberFormat",
                                places: a.isDefined(E.places) && (!G || 0 < E.places) ? Number(E.places) : Infinity
                            };
                        else if (E.dateFormat)
                            O = y.mixin({
                                formatType: "DateFormat",
                                utcOffset: this.utcOffset
                            }, this._dateFormatsJson[E.dateFormat] || this._dateFormatsJson.shortDateShortTime);
                        else
                            return this._applyFormatting(r, H);
                        var V = this._applyFormatFunctions(r, O, D);
                        A && -1 < r.constructor.toString().indexOf("Array") && (V = "",
                        b.forEach(r, y.hitch(this, function(aa, da) {
                            da && (V += " ");
                            V += this._applyFormatFunctions(aa, O, D)
                        })));
                        A && !J && p.group && (V = V.replace(new RegExp("\\" + p.group,"g"), ""));
                        B && (V = '\x3cspan class\x3d"esriDateValue"\x3e' + V + "\x3c/span\x3e");
                        return this._applyFormatting(V, H)
                    },
                    _applyFormatFunctions: function(r, B, D) {
                        B && D && (D.format = {
                            myKey: B
                        });
                        r = a.substitute({
                            myKey: r
                        }, "${myKey}", D) || "";
                        B && D && (D.format = null);
                        return r
                    },
                    _applyFormatting: function(r, B) {
                        return B ? this._forceLTR(r) : this._applyPreWrap(r)
                    },
                    _forceLTR: function(r) {
                        var B = h("ie");
                        return B && 10 >= B ? r : "\x3cspan class\x3d'esriNumericValue'\x3e" + r + "\x3c/span\x3e"
                    },
                    _applyPreWrap: function(r) {
                        return "string" === typeof r ? r.replace(this._reNewline, "\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e") : r
                    },
                    _insertOffset: function(r) {
                        r && (r = a.isDefined(this.utcOffset) ? r.replace(/\)\s*$/, ", utcOffset:" + this.utcOffset + ")") : r);
                        return r
                    },
                    _getDomainName: function(r, B, D, G) {
                        return (r = r.getDomain && r.getDomain(D, {
                            feature: B
                        })) && r.codedValues ? r.getName(G) : null
                    },
                    _getTypeName: function(r, B, D) {
                        return (r = r.getType && r.getType(B)) && r.name
                    },
                    _getRelatedRecords: function(r) {
                        var B = r.graphic, D;
                        this._relatedLayersInfoPromise || (this._relatedLayersInfoPromise = this._getRelatedLayersInfo(r).then(y.hitch(this, function(G) {
                            for (D in G)
                                G.hasOwnProperty(D) && G[D] && (this._relatedLayersInfo[D].relatedLayerInfo = G[D])
                        })));
                        return this._relatedLayersInfoPromise.then(y.hitch(this, function() {
                            return this._queryRelatedLayers(B)
                        })).then(y.hitch(this, function(G) {
                            this._setRelatedRecords(B, G);
                            return G
                        }))
                    },
                    _getRelatedLayersInfo: function(r) {
                        var B = r.fieldsInfo, D, G = {};
                        var A = r.graphic.getSourceLayer();
                        this._relatedLayersInfo || (this._relatedLayersInfo = {});
                        b.forEach(B, function(E) {
                            var H;
                            var J = this._fromRelatedFieldName(E.fieldName);
                            var O = J[0];
                            J = J[1];
                            if (O && (!this._relatedLayersInfo[O] && A && A.relationships && (b.some(A.relationships, function(aa) {
                                if (aa.id == O)
                                    return H = aa,
                                    !0
                            }),
                            H && (this._relatedLayersInfo[O] = {
                                relation: H,
                                relatedFields: [],
                                outStatistics: []
                            })),
                            this._relatedLayersInfo[O] && (this._relatedLayersInfo[O].relatedFields.push(J),
                            E.statisticType))) {
                                var V = new v;
                                V.statisticType = E.statisticType;
                                V.onStatisticField = J;
                                V.outStatisticFieldName = J;
                                this._relatedLayersInfo[O].outStatistics.push(V)
                            }
                        }, this);
                        for (D in this._relatedLayersInfo)
                            this._relatedLayersInfo.hasOwnProperty(D) && this._relatedLayersInfo[D] && (r = this._relatedLayersInfo[D].relation,
                            r = A.url.replace(/[0-9]+$/, r.relatedTableId),
                            this._relatedLayersInfo[D].relatedLayerUrl = r,
                            G[D] = e({
                                url: r,
                                content: {
                                    f: "json"
                                },
                                callbackParamName: "callback"
                            }));
                        return f(G)
                    },
                    _queryRelatedLayers: function(r) {
                        var B = {}, D;
                        for (D in this._relatedLayersInfo)
                            this._relatedLayersInfo.hasOwnProperty(D) && (B[D] = this._queryRelatedLayer({
                                graphic: r,
                                relatedInfo: this._relatedLayersInfo[D]
                            }));
                        return f(B)
                    },
                    _queryRelatedLayer: function(r) {
                        var B, D;
                        var G = r.graphic;
                        var A = G.getSourceLayer();
                        var E = A.url.match(/[0-9]+$/g)[0];
                        var H = r.relatedInfo;
                        var J = H.relatedLayerInfo;
                        var O = H.relatedLayerUrl;
                        var V = H.relation;
                        r = b.filter(J.relationships, function(qa) {
                            return qa.relatedTableId === parseInt(E, 10)
                        });
                        1 === r.length ? B = r[0] : 1 < r.length && b.some(r, function(qa) {
                            qa.id === V.id && (B = qa);
                            return !!B
                        });
                        if (B) {
                            var aa = new g;
                            b.some(J.fields, function(qa) {
                                if (qa.name === B.keyField)
                                    return D = -1 !== b.indexOf(["esriFieldTypeSmallInteger", "esriFieldTypeInteger", "esriFieldTypeSingle", "esriFieldTypeDouble"], qa.type) ? "number" : "string",
                                    !0
                            });
                            if (B.relationshipTableId && B.keyFieldInRelationshipTable) {
                                var da = new k;
                                this._queryRelatedRecords(G, B).then(y.hitch(this, function(qa) {
                                    var wa;
                                    (wa = qa[G.attributes[A.objectIdField]]) ? (qa = b.map(wa.features, function(K) {
                                        return K.attributes[J.objectIdField]
                                    }, this),
                                    H.outStatistics && 0 < H.outStatistics.length && J.supportsStatistics && (Y = new g,
                                    Y.where = this._chunkWhereInClause(J.objectIdField, qa, 1E3),
                                    Y.outFields = aa.outFields,
                                    Y.outStatistics = H.outStatistics),
                                    Y && (ia = new q(O),
                                    ia.execute(Y).then(y.hitch(this, function(K) {
                                        var Z = [];
                                        Z.push(wa);
                                        Z.push(K);
                                        da.resolve(Z)
                                    })))) : da.resolve()
                                }))
                            } else {
                                var ea = "string" === D ? B.keyField + "\x3d'" + G.attributes[V.keyField] + "'" : B.keyField + "\x3d" + G.attributes[V.keyField];
                                aa.where = ea;
                                aa.outFields = H.relatedFields;
                                if (H.outStatistics && 0 < H.outStatistics.length && J.supportsStatistics) {
                                    var Y = new g;
                                    Y.where = aa.where;
                                    Y.outFields = aa.outFields;
                                    Y.outStatistics = H.outStatistics
                                }
                                var ia = new q(O);
                                ea = [];
                                ea.push(ia.execute(aa));
                                Y && ea.push(ia.execute(Y))
                            }
                        }
                        return ea ? f(ea) : da ? da.promise : void 0
                    },
                    _setRelatedRecords: function(r, B) {
                        this._relatedInfo = [];
                        for (var D in B)
                            B.hasOwnProperty(D) && B[D] && (r = B[D],
                            this._relatedInfo[D] = {},
                            this._relatedInfo[D].relatedFeatures = r[0].features,
                            a.isDefined(r[1]) && (this._relatedInfo[D].relatedStatsFeatures = r[1].features))
                    },
                    _handlerErrorResponse: function(r, B) {
                        r.reject(B)
                    },
                    _fromRelatedFieldName: function(r) {
                        var B = [];
                        -1 !== r.indexOf(this._relatedFieldPrefix) && (r = r.split("/"),
                        B = r.slice(1));
                        return B
                    },
                    _toRelatedFieldName: function(r) {
                        var B = "";
                        r && 0 < r.length && (B = this._relatedFieldPrefix + r[0] + "/" + r[1]);
                        return B
                    },
                    _queryRelatedRecords: function(r, B) {
                        var D = r.getSourceLayer()
                          , G = new x;
                        G.outFields = ["*"];
                        G.relationshipId = B.id;
                        G.objectIds = [r.attributes[D.objectIdField]];
                        return D.queryRelatedFeatures(G)
                    },
                    _removeEmptyHref: function(r) {
                        return r.replace(/href=(""|'')/gi, "")
                    },
                    _chunkWhereInClause: function(r, B, D) {
                        for (var G = 0, A = []; G < B.length; )
                            A.push(r + " IN (" + B.slice(G, D + G) + ")"),
                            G += D;
                        return A.join(" OR ")
                    }
                });
                l("extend-esri") && (c.PopupInfo = c.PopupInfoTemplate = C);
                return C
            })
        },
        "dojox/html/entities": function() {
            define(["dojo/_base/lang"], function(C) {
                var y = C.getObject("dojox.html.entities", !0)
                  , b = function(m, l) {
                    if (l._encCache && l._encCache.regexp && l._encCache.mapper && l.length == l._encCache.length) {
                        var k = l._encCache.mapper;
                        var h = l._encCache.regexp
                    } else {
                        k = {};
                        h = ["["];
                        var f;
                        for (f = 0; f < l.length; f++)
                            k[l[f][0]] = "\x26" + l[f][1] + ";",
                            h.push(l[f][0]);
                        h.push("]");
                        h = new RegExp(h.join(""),"g");
                        l._encCache = {
                            mapper: k,
                            regexp: h,
                            length: l.length
                        }
                    }
                    return m = m.replace(h, function(d) {
                        return k[d]
                    })
                }
                  , w = function(m, l) {
                    if (l._decCache && l._decCache.regexp && l._decCache.mapper && l.length == l._decCache.length) {
                        var k = l._decCache.mapper;
                        var h = l._decCache.regexp
                    } else {
                        k = {};
                        h = ["("];
                        var f;
                        for (f = 0; f < l.length; f++) {
                            var d = "\x26" + l[f][1] + ";";
                            f && h.push("|");
                            k[d] = l[f][0];
                            h.push(d)
                        }
                        h.push(")");
                        h = new RegExp(h.join(""),"g");
                        l._decCache = {
                            mapper: k,
                            regexp: h,
                            length: l.length
                        }
                    }
                    return m = m.replace(h, function(a) {
                        return k[a]
                    })
                };
                y.html = [["\x26", "amp"], ['"', "quot"], ["\x3c", "lt"], ["\x3e", "gt"], ["\u00a0", "nbsp"]];
                y.latin = [["\u00a1", "iexcl"], ["\u00a2", "cent"], ["\u00a3", "pound"], ["\u20ac", "euro"], ["\u00a4", "curren"], ["\u00a5", "yen"], ["\u00a6", "brvbar"], ["\u00a7", "sect"], ["\u00a8", "uml"], ["\u00a9", "copy"], ["\u00aa", "ordf"], ["\u00ab", "laquo"], ["\u00ac", "not"], ["\u00ad", "shy"], ["\u00ae", "reg"], ["\u00af", "macr"], ["\u00b0", "deg"], ["\u00b1", "plusmn"], ["\u00b2", "sup2"], ["\u00b3", "sup3"], ["\u00b4", "acute"], ["\u00b5", "micro"], ["\u00b6", "para"], ["\u00b7", "middot"], ["\u00b8", "cedil"], ["\u00b9", "sup1"], ["\u00ba", "ordm"], ["\u00bb", "raquo"], ["\u00bc", "frac14"], ["\u00bd", "frac12"], ["\u00be", "frac34"], ["\u00bf", "iquest"], ["\u00c0", "Agrave"], ["\u00c1", "Aacute"], ["\u00c2", "Acirc"], ["\u00c3", "Atilde"], ["\u00c4", "Auml"], ["\u00c5", "Aring"], ["\u00c6", "AElig"], ["\u00c7", "Ccedil"], ["\u00c8", "Egrave"], ["\u00c9", "Eacute"], ["\u00ca", "Ecirc"], ["\u00cb", "Euml"], ["\u00cc", "Igrave"], ["\u00cd", "Iacute"], ["\u00ce", "Icirc"], ["\u00cf", "Iuml"], ["\u00d0", "ETH"], ["\u00d1", "Ntilde"], ["\u00d2", "Ograve"], ["\u00d3", "Oacute"], ["\u00d4", "Ocirc"], ["\u00d5", "Otilde"], ["\u00d6", "Ouml"], ["\u00d7", "times"], ["\u00d8", "Oslash"], ["\u00d9", "Ugrave"], ["\u00da", "Uacute"], ["\u00db", "Ucirc"], ["\u00dc", "Uuml"], ["\u00dd", "Yacute"], ["\u00de", "THORN"], ["\u00df", "szlig"], ["\u00e0", "agrave"], ["\u00e1", "aacute"], ["\u00e2", "acirc"], ["\u00e3", "atilde"], ["\u00e4", "auml"], ["\u00e5", "aring"], ["\u00e6", "aelig"], ["\u00e7", "ccedil"], ["\u00e8", "egrave"], ["\u00e9", "eacute"], ["\u00ea", "ecirc"], ["\u00eb", "euml"], ["\u00ec", "igrave"], ["\u00ed", "iacute"], ["\u00ee", "icirc"], ["\u00ef", "iuml"], ["\u00f0", "eth"], ["\u00f1", "ntilde"], ["\u00f2", "ograve"], ["\u00f3", "oacute"], ["\u00f4", "ocirc"], ["\u00f5", "otilde"], ["\u00f6", "ouml"], ["\u00f7", "divide"], ["\u00f8", "oslash"], ["\u00f9", "ugrave"], ["\u00fa", "uacute"], ["\u00fb", "ucirc"], ["\u00fc", "uuml"], ["\u00fd", "yacute"], ["\u00fe", "thorn"], ["\u00ff", "yuml"], ["\u0192", "fnof"], ["\u0391", "Alpha"], ["\u0392", "Beta"], ["\u0393", "Gamma"], ["\u0394", "Delta"], ["\u0395", "Epsilon"], ["\u0396", "Zeta"], ["\u0397", "Eta"], ["\u0398", "Theta"], ["\u0399", "Iota"], ["\u039a", "Kappa"], ["\u039b", "Lambda"], ["\u039c", "Mu"], ["\u039d", "Nu"], ["\u039e", "Xi"], ["\u039f", "Omicron"], ["\u03a0", "Pi"], ["\u03a1", "Rho"], ["\u03a3", "Sigma"], ["\u03a4", "Tau"], ["\u03a5", "Upsilon"], ["\u03a6", "Phi"], ["\u03a7", "Chi"], ["\u03a8", "Psi"], ["\u03a9", "Omega"], ["\u03b1", "alpha"], ["\u03b2", "beta"], ["\u03b3", "gamma"], ["\u03b4", "delta"], ["\u03b5", "epsilon"], ["\u03b6", "zeta"], ["\u03b7", "eta"], ["\u03b8", "theta"], ["\u03b9", "iota"], ["\u03ba", "kappa"], ["\u03bb", "lambda"], ["\u03bc", "mu"], ["\u03bd", "nu"], ["\u03be", "xi"], ["\u03bf", "omicron"], ["\u03c0", "pi"], ["\u03c1", "rho"], ["\u03c2", "sigmaf"], ["\u03c3", "sigma"], ["\u03c4", "tau"], ["\u03c5", "upsilon"], ["\u03c6", "phi"], ["\u03c7", "chi"], ["\u03c8", "psi"], ["\u03c9", "omega"], ["\u03d1", "thetasym"], ["\u03d2", "upsih"], ["\u03d6", "piv"], ["\u2022", "bull"], ["\u2026", "hellip"], ["\u2032", "prime"], ["\u2033", "Prime"], ["\u203e", "oline"], ["\u2044", "frasl"], ["\u2118", "weierp"], ["\u2111", "image"], ["\u211c", "real"], ["\u2122", "trade"], ["\u2135", "alefsym"], ["\u2190", "larr"], ["\u2191", "uarr"], ["\u2192", "rarr"], ["\u2193", "darr"], ["\u2194", "harr"], ["\u21b5", "crarr"], ["\u21d0", "lArr"], ["\u21d1", "uArr"], ["\u21d2", "rArr"], ["\u21d3", "dArr"], ["\u21d4", "hArr"], ["\u2200", "forall"], ["\u2202", "part"], ["\u2203", "exist"], ["\u2205", "empty"], ["\u2207", "nabla"], ["\u2208", "isin"], ["\u2209", "notin"], ["\u220b", "ni"], ["\u220f", "prod"], ["\u2211", "sum"], ["\u2212", "minus"], ["\u2217", "lowast"], ["\u221a", "radic"], ["\u221d", "prop"], ["\u221e", "infin"], ["\u2220", "ang"], ["\u2227", "and"], ["\u2228", "or"], ["\u2229", "cap"], ["\u222a", "cup"], ["\u222b", "int"], ["\u2234", "there4"], ["\u223c", "sim"], ["\u2245", "cong"], ["\u2248", "asymp"], ["\u2260", "ne"], ["\u2261", "equiv"], ["\u2264", "le"], ["\u2265", "ge"], ["\u2282", "sub"], ["\u2283", "sup"], ["\u2284", "nsub"], ["\u2286", "sube"], ["\u2287", "supe"], ["\u2295", "oplus"], ["\u2297", "otimes"], ["\u22a5", "perp"], ["\u22c5", "sdot"], ["\u2308", "lceil"], ["\u2309", "rceil"], ["\u230a", "lfloor"], ["\u230b", "rfloor"], ["\u2329", "lang"], ["\u232a", "rang"], ["\u25ca", "loz"], ["\u2660", "spades"], ["\u2663", "clubs"], ["\u2665", "hearts"], ["\u2666", "diams"], ["\u0152", "OElig"], ["\u0153", "oelig"], ["\u0160", "Scaron"], ["\u0161", "scaron"], ["\u0178", "Yuml"], ["\u02c6", "circ"], ["\u02dc", "tilde"], ["\u2002", "ensp"], ["\u2003", "emsp"], ["\u2009", "thinsp"], ["\u200c", "zwnj"], ["\u200d", "zwj"], ["\u200e", "lrm"], ["\u200f", "rlm"], ["\u2013", "ndash"], ["\u2014", "mdash"], ["\u2018", "lsquo"], ["\u2019", "rsquo"], ["\u201a", "sbquo"], ["\u201c", "ldquo"], ["\u201d", "rdquo"], ["\u201e", "bdquo"], ["\u2020", "dagger"], ["\u2021", "Dagger"], ["\u2030", "permil"], ["\u2039", "lsaquo"], ["\u203a", "rsaquo"]];
                y.encode = function(m, l) {
                    m && (l ? m = b(m, l) : (m = b(m, y.html),
                    m = b(m, y.latin)));
                    return m
                }
                ;
                y.decode = function(m, l) {
                    m && (l ? m = w(m, l) : (m = w(m, y.html),
                    m = w(m, y.latin)));
                    return m
                }
                ;
                return y
            })
        },
        "esri/ArcadeExpression": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "), function(C, y, b, w, m, l) {
                C = C(null, {
                    declaredClass: "esri.ArcadeExpression",
                    expression: null,
                    profile: null,
                    returnType: null,
                    async: null,
                    id: null,
                    syntaxTree: null,
                    _traits: null,
                    _attributeDef: null,
                    _attributeCache: null,
                    _compiled: !1,
                    constructor: function(k) {
                        y.mixin(this, k);
                        this.returnType = this.returnType || "string";
                        this.id = m.getAttributeId(this.expression);
                        this._setSyntaxTree(this.profile.parse(this));
                        this.async = this.async || this.profile.isAsync(this)
                    },
                    hasGeometryOperations: function() {
                        var k = this._traits.geometryOperations;
                        void 0 === k && (k = this._traits.geometryOperations = l.hasGeometryOperations(this.syntaxTree));
                        return k
                    },
                    hasFeatureSetOperations: function() {
                        var k = this._traits.featureSetOperations;
                        void 0 === k && (k = this._traits.featureSetOperations = l.hasFeatureSetOperations(this.syntaxTree));
                        return k
                    },
                    hasVariable: function(k) {
                        var h = this._traits.variables;
                        void 0 === h[k] && (h[k] = l.hasVariable(this.syntaxTree, k));
                        return h[k]
                    },
                    hasFunction: function(k) {
                        var h = this._traits.functions;
                        void 0 === h[k] && (h[k] = l.hasFunction(this.syntaxTree, k));
                        return h[k]
                    },
                    evaluate: function(k) {
                        this._compile();
                        var h = this._attributeCache.compiledFunc;
                        return this.async ? l.executeAsyncFunction(h, k) : l.executeFunction(h, k)
                    },
                    _setSyntaxTree: function(k) {
                        this.syntaxTree = k;
                        this._compiled = !1;
                        this._traits = {
                            variables: {},
                            functions: {}
                        };
                        this._createLegacyValueObjects()
                    },
                    _createLegacyValueObjects: function() {
                        this._attributeDef = {
                            valueExpression: this.expression
                        };
                        this._attributeCache = {
                            attributeInfo: this._attributeDef,
                            isNumeric: "number" === this.returnType,
                            idSource: this.expression,
                            id: this.id,
                            hasExpr: !0,
                            compiledFunc: null,
                            syntaxTree: this.syntaxTree,
                            isScaleDriven: !1,
                            dependsOnView: this.hasVariable("$view"),
                            dependsOnGeometry: this.hasGeometryOperations(),
                            isJSFunc: !1
                        }
                    },
                    _compile: function() {
                        this._compiled || (this._attributeCache.compiledFunc = this.profile.compile(this),
                        this._compiled = !0)
                    }
                });
                b("extend-esri") && (w.ArcadeExpression = C);
                return C
            })
        },
        "esri/tasks/RelationshipQuery": function() {
            define(["dojo/_base/declare", "dojo/_base/lang", "dojo/_base/json", "dojo/has", "../kernel"], function(C, y, b, w, m) {
                C = C(null, {
                    declaredClass: "esri.tasks.RelationshipQuery",
                    definitionExpression: "",
                    relationshipId: null,
                    returnGeometry: !1,
                    objectIds: null,
                    outSpatialReference: null,
                    outFields: null,
                    orderByFields: null,
                    toJson: function() {
                        var l = {
                            definitionExpression: this.definitionExpression,
                            relationshipId: this.relationshipId,
                            returnGeometry: this.returnGeometry,
                            maxAllowableOffset: this.maxAllowableOffset,
                            geometryPrecision: this.geometryPrecision
                        }
                          , k = this.objectIds
                          , h = this.outFields
                          , f = this.outSpatialReference
                          , d = this.orderByFields;
                        k && (l.objectIds = k.join(","));
                        h && (l.outFields = h.join(","));
                        f && (l.outSR = f.wkid || b.toJson(f.toJson()));
                        d && (l.orderByFields = d.join(","));
                        l._ts = this._ts;
                        return l
                    }
                });
                w("extend-esri") && y.setObject("tasks.RelationshipQuery", C, m);
                return C
            })
        },
        "esri/arcadeProfiles/popupProfile": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "), function(C, y, b, w, m, l, k, h) {
                C = new (C(null, {
                    declaredClass: "esri.arcadeProfiles.PopupProfile",
                    defaults: {
                        globals: {
                            featureSet: ["$layer", "$datastore", "$map", "$aggregatedfeatures"],
                            async: ["$layer", "$datastore", "$map", "$aggregatedfeatures"]
                        },
                        context: {
                            vars: {
                                $feature: "any",
                                $layer: "any",
                                $datastore: "any",
                                $map: "any",
                                $aggregatedfeatures: "any"
                            }
                        }
                    },
                    initialize: function(f) {
                        var d = [];
                        h.hasGeometryOperations(f) && d.push(k.enableGeometryOperations());
                        (h.hasFeatureSetOperations(f) || h.hasVariables(f, this.defaults.globals.featureSet)) && d.push(k.enableFeatureSetOperations());
                        h.isAsync(f) && d.push(k.enableAsyncOperations());
                        return m(d)
                    },
                    isAsync: function(f) {
                        f = [f];
                        return h.hasFeatureSetOperations(f) || h.hasVariables(f, this.defaults.globals.async)
                    },
                    parse: function(f) {
                        return k.createSyntaxTree(f.expression)
                    },
                    compile: function(f) {
                        var d = y.clone(this.defaults.context);
                        d.useAsync = f.async;
                        return f.syntaxTree ? k.createFunction(f.syntaxTree, d) : null
                    },
                    getEvalOptions: function(f) {
                        var d = f.expression
                          , a = f.feature
                          , c = f.layer
                          , e = f.aggregatedFeaturesLayer
                          , n = f.map;
                        f = f.spatialReference;
                        a = a && d.hasVariable("$feature") ? l.createFromGraphicLikeObject(a.geometry, a.attributes, c) : null;
                        var t, g;
                        if (c) {
                            var q = {
                                spatialReference: f
                            };
                            d.hasVariable("$layer") && (t = c.getMap() ? k.createFeatureSetFromLayer(c, q) : k.createFeatureSetFromLayerUrl(c.url, q));
                            if (d.hasVariable("$datastore"))
                                var x = (x = h.getServiceUrl(c.url)) ? k.createFeatureSetCollectionFromServiceUrl(x, q) : null;
                            d.hasVariable("$aggregatedfeatures") && e && (g = e.getMap() ? k.createFeatureSetFromLayer(e, q) : null)
                        }
                        d = n && d.hasVariable("$map") ? k.createFeatureSetCollectionFromMap(n) : null;
                        return {
                            context: {
                                vars: {
                                    $feature: a,
                                    $layer: t,
                                    $datastore: x,
                                    $map: d,
                                    $aggregatedfeatures: g
                                },
                                spatialReference: f
                            }
                        }
                    }
                }));
                b("extend-esri") && y.setObject("arcadeProfiles.popupProfile", C, w);
                return C
            })
        },
        "esri/dijit/PopupRenderer": function() {
            define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style ../libs/sanitizer/Sanitizer dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p) {
                var r = 0
                  , B = p.widgets.popup
                  , D = p.widgets.templatePicker;
                y = y([u, g, q], {
                    declaredClass: "esri.dijit._PopupRenderer",
                    _sanitizer: new n({
                        whiteList: {
                            span: ["class"],
                            dd: [],
                            dl: [],
                            dt: [],
                            h1: [],
                            h2: [],
                            h3: [],
                            h4: [],
                            h5: [],
                            h6: [],
                            sub: [],
                            sup: [],
                            animate: [],
                            animatetransform: [],
                            circle: [],
                            clippath: [],
                            defs: [],
                            ellipse: [],
                            g: [],
                            image: [],
                            line: [],
                            lineargradient: [],
                            marker: [],
                            mask: [],
                            path: [],
                            pattern: [],
                            polygon: [],
                            polyline: [],
                            radialgradient: [],
                            rect: [],
                            stop: [],
                            svg: [],
                            "switch": [],
                            symbol: [],
                            text: [],
                            textpath: [],
                            tspan: [],
                            use: []
                        }
                    },!0),
                    constructor: function() {
                        this._nls = w.mixin({}, B)
                    },
                    templateString: "\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
                    showTitle: !0,
                    startup: function() {
                        this.inherited(arguments);
                        this._showStatus(D.loading);
                        this._contentDfd = this.template.getComponents(this.graphic).then(w.hitch(this, this._handleComponentsSuccess)).otherwise(w.hitch(this, this._handleComponentsError))
                    },
                    destroy: function() {
                        this._contentDfd && this._contentDfd.cancel();
                        this._attachmentsDfd && this._attachmentsDfd.cancel();
                        this._destroyFrame();
                        this.template = this.graphic = this._nls = this._mediaInfos = this._mediaPtr = this._contentDfd = this._attachmentsDfd = null;
                        this.inherited(arguments)
                    },
                    _goToPrevMedia: function() {
                        0 > this._mediaPtr - 1 || (this._mediaPtr--,
                        this._updateUI(),
                        this._displayMedia())
                    },
                    _goToNextMedia: function() {
                        this._mediaPtr + 1 !== this._mediaInfos.length && (this._mediaPtr++,
                        this._updateUI(),
                        this._displayMedia())
                    },
                    _updateUI: function() {
                        var G = this._mediaInfos
                          , A = G.length
                          , E = this.domNode
                          , H = this._prevMedia
                          , J = this._nextMedia;
                        if (1 < A) {
                            var O = 0
                              , V = 0;
                            m.forEach(G, function(aa) {
                                "image" === aa.type ? O++ : -1 !== aa.type.indexOf("chart") && V++
                            });
                            O && (d.set(this._imageCount, "innerHTML", O),
                            l.query(".summary .image", E).removeClass("hidden"));
                            V && (d.set(this._chartCount, "innerHTML", V),
                            l.query(".summary .chart", E).removeClass("hidden"))
                        } else
                            l.query(".summary", E).addClass("hidden"),
                            a.add(H, "hidden"),
                            a.add(J, "hidden");
                        G = this._mediaPtr;
                        0 === G ? a.add(H, "hidden") : a.remove(H, "hidden");
                        G === A - 1 ? a.add(J, "hidden") : a.remove(J, "hidden");
                        this._destroyFrame()
                    },
                    _displayMedia: function() {
                        var G = this._mediaInfos[this._mediaPtr]
                          , A = G.title
                          , E = G.caption
                          , H = l.query(".mediaSection .hzLine", this.domNode)[0];
                        d.set(this._mediaTitle, "innerHTML", this._sanitizer.sanitize(A));
                        a[A ? "remove" : "add"](this._mediaTitle, "hidden");
                        d.set(this._mediaCaption, "innerHTML", this._sanitizer.sanitize(E));
                        a[E ? "remove" : "add"](this._mediaCaption, "hidden");
                        a[A && E ? "remove" : "add"](H, "hidden");
                        this._rid = null;
                        if ("image" === G.type)
                            this._showImage(G);
                        else {
                            var J = this;
                            A = ["dojox/charting/Chart2D", "dojox/charting/action2d/Tooltip"];
                            E = G.value.theme || this.chartTheme;
                            w.isString(E) && (E = E.replace(/\./gi, "/"),
                            -1 === E.indexOf("/") && (E = "dojox/charting/themes/" + E));
                            E || (E = "./Rainbow");
                            A.push(E);
                            try {
                                var O = this._rid = r++;
                                C(A, function(V, aa, da) {
                                    O === J._rid && (J._rid = null,
                                    J._showChart(G.type, G.value, V, aa, da))
                                })
                            } catch (V) {
                                console.log("PopupRenderer: error loading modules")
                            }
                        }
                    },
                    _preventNewTab: function(G) {
                        return (G = G && w.trim(G).toLowerCase()) && (0 === G.indexOf("mailto:") || 0 === G.indexOf("tel:"))
                    },
                    _showImage: function(G) {
                        a.add(this._mediaFrame, "image");
                        var A = e.get(this._gallery, "height")
                          , E = G.value
                          , H = t.decode(E.linkURL);
                        E = t.decode(E.sourceURL);
                        var J;
                        H && (J = c.create("a", {
                            href: H,
                            target: this._preventNewTab(H) ? "" : "_blank"
                        }, this._mediaFrame));
                        H = G.refreshInterval ? this._addURLParameter(E, "timestamp", Date.now()) : E;
                        c.create("img", {
                            className: "esriPopupMediaImage",
                            src: H
                        }, J || this._mediaFrame);
                        var O = l.query(".esriPopupMediaImage", this._mediaFrame)[0];
                        this._imageLoadHandle = b.connect(O, "onload", this, function() {
                            this._clearImageHandles();
                            this._imageLoaded(O, A);
                            this._initImageRefresh(G)
                        })
                    },
                    _addURLParameter: function(G, A, E) {
                        var H = -1 === G.indexOf("?") ? "?" : "\x26";
                        return G + H + A + "\x3d" + E
                    },
                    _initImageRefresh: function(G) {
                        if (G.refreshInterval) {
                            var A = 6E4 * G.refreshInterval;
                            this._imageRefreshHandle = setTimeout(w.hitch(this, function() {
                                this._destroyFrame();
                                this._showImage(G)
                            }), A)
                        }
                    },
                    _clearImageHandles: function() {
                        b.disconnect(this._imageLoadHandle);
                        this._imageLoadHandle = null;
                        clearTimeout(this._imageRefreshHandle);
                        this._imageRefreshHandle = null
                    },
                    _showChart: function(G, A, E, H, J) {
                        a.remove(this._mediaFrame, "image");
                        E = this._chart = new E(c.create("div", {
                            "class": "chart"
                        }, this._mediaFrame),{
                            margins: {
                                l: 4,
                                t: 4,
                                r: 4,
                                b: 4
                            }
                        });
                        J && E.setTheme(J);
                        switch (G) {
                        case "piechart":
                            E.addPlot("default", {
                                type: "Pie",
                                labels: !1
                            });
                            E.addSeries("Series A", A.fields);
                            break;
                        case "linechart":
                            E.addPlot("default", {
                                type: "Markers"
                            });
                            E.addAxis("x", {
                                min: 0,
                                majorTicks: !1,
                                minorTicks: !1,
                                majorLabels: !1,
                                minorLabels: !1
                            });
                            E.addAxis("y", {
                                includeZero: !0,
                                vertical: !0,
                                fixUpper: "minor"
                            });
                            m.forEach(A.fields, function(O, V) {
                                O.x = V + 1
                            });
                            E.addSeries("Series A", A.fields);
                            break;
                        case "columnchart":
                            E.addPlot("default", {
                                type: "Columns",
                                gap: 3
                            });
                            E.addAxis("y", {
                                includeZero: !0,
                                vertical: !0,
                                fixUpper: "minor"
                            });
                            E.addSeries("Series A", A.fields);
                            break;
                        case "barchart":
                            E.addPlot("default", {
                                type: "Bars",
                                gap: 3
                            }),
                            E.addAxis("x", {
                                includeZero: !0,
                                fixUpper: "minor",
                                minorLabels: !1
                            }),
                            E.addAxis("y", {
                                vertical: !0,
                                majorTicks: !1,
                                minorTicks: !1,
                                majorLabels: !1,
                                minorLabels: !1
                            }),
                            E.addSeries("Series A", A.fields)
                        }
                        this._action = new H(E);
                        E.render()
                    },
                    _destroyFrame: function() {
                        this._rid = null;
                        this._clearImageHandles();
                        this._chart && (this._chart.destroy(),
                        this._chart = null);
                        this._action && (this._action.destroy(),
                        this._action = null);
                        d.set(this._mediaFrame, "innerHTML", "")
                    },
                    _imageLoaded: function(G, A) {
                        var E = G.height;
                        E < A && e.set(G, "marginTop", Math.round((A - E) / 2) + "px")
                    },
                    _attListHandler: function(G, A) {
                        if (G === this._attachmentsDfd) {
                            this._attachmentsDfd = null;
                            var E = "";
                            A instanceof Error || !A || !A.length || m.forEach(A, function(H) {
                                E += "\x3cli\x3e";
                                E += "\x3ca href\x3d'" + z.addProxy(H.url) + "' target\x3d'_blank'\x3e" + (H.name || "[No name]") + "\x3c/a\x3e";
                                E += "\x3c/li\x3e"
                            });
                            d.set(this._attachmentsList, "innerHTML", E || "\x3cli\x3e" + this._nls.NLS_noAttach + "\x3c/li\x3e")
                        }
                    },
                    _createLinkIfURI: function(G, A) {
                        var E = z.getURIInfo(G);
                        if (E) {
                            var H = G.match(E.pattern);
                            G = H && H[2];
                            H = t.decode(H[1]);
                            c.create("a", {
                                target: "_blank",
                                href: H,
                                title: H,
                                innerHTML: this._sanitizer.sanitize(v.substitute({
                                    appName: E.appName,
                                    hierPart: G
                                }, E.label))
                            }, A)
                        } else
                            d.set(A, "innerHTML", this._sanitizer.sanitize(G))
                    },
                    _showStatus: function(G) {
                        d.set(this._status, "innerHTML", G);
                        a.remove(this._status, "hidden");
                        l.query(".mainSection", this.domNode).addClass("hidden")
                    },
                    _hideStatus: function() {
                        d.set(this._status, "innerHTML", "");
                        a.add(this._status, "hidden");
                        l.query(".mainSection", this.domNode).removeClass("hidden")
                    },
                    _handleComponentsSuccess: function(G) {
                        if (G) {
                            this._hideStatus();
                            var A = this.showTitle ? G.title : ""
                              , E = G.description
                              , H = G.fields
                              , J = G.mediaInfos
                              , O = this.domNode
                              , V = this._nls
                              , aa = this
                              , da = this.template
                              , ea = this.graphic;
                            this._prevMedia.title = V.NLS_prevMedia;
                            this._nextMedia.title = V.NLS_nextMedia;
                            d.set(this._title, "innerHTML", this._sanitizer.sanitize(A));
                            A || a.add(this._title, "hidden");
                            if (!G.hasDescription && H && (E = "",
                            H = m.map(H, function(ia) {
                                var qa = c.create("tr", {
                                    vAlign: "top"
                                });
                                c.create("td", {
                                    className: "attrName",
                                    innerHTML: this._sanitizer.sanitize(ia[0])
                                }, qa);
                                var wa = c.create("td", {
                                    className: "attrValue"
                                }, qa);
                                this._createLinkIfURI(ia[1], wa);
                                return qa
                            }, this),
                            H.length)) {
                                var Y = c.create("table", {
                                    className: "attrTable",
                                    cellPadding: "0px",
                                    cellSpacing: "0px"
                                });
                                m.forEach(H, function(ia) {
                                    Y.appendChild(ia)
                                })
                            }
                            Y ? (this._description.appendChild(Y),
                            E = !0) : d.set(this._description, "innerHTML", this._sanitizer.sanitize(E));
                            E || a.add(this._description, "hidden");
                            l.query("a", this._description).forEach(function(ia) {
                                aa._preventNewTab(ia.href) ? "_blank" === ia.target && d.remove(ia, "target") : d.set(ia, "target", "_blank")
                            });
                            A && E ? l.query(".mainSection .hzLine", O).removeClass("hidden") : A || E ? l.query(".mainSection .hzLine", O).addClass("hidden") : l.query(".mainSection", O).addClass("hidden");
                            if (A = this._attachmentsDfd = da.getAttachments(ea))
                                A.addBoth(w.hitch(this, this._attListHandler, A)),
                                d.set(this._attachmentsList, "innerHTML", "\x3cli\x3e" + V.NLS_searching + "...\x3c/li\x3e"),
                                l.query(".attachmentsSection", O).removeClass("hidden");
                            J && J.length && (l.query(".mediaSection", O).removeClass("hidden"),
                            f.setSelectable(this._mediaFrame, !1),
                            this._mediaInfos = J,
                            this._mediaPtr = 0,
                            this._updateUI(),
                            this._displayMedia());
                            G.editSummary && (d.set(this._editSummary, "innerHTML", this._sanitizer.sanitize(G.editSummary)),
                            J && J.length && a.remove(this._mediaBreak, "hidden"),
                            a.remove(this._editSummarySection, "hidden"));
                            this.emit("content-update")
                        } else
                            this._showStatus(B.NLS_noInfo)
                    },
                    _handleComponentsError: function(G) {
                        G && "cancel" === G.dojoType || (console.log("PopupRenderer: error loading template", G),
                        this._showStatus(B.NLS_noInfo))
                    }
                });
                k("extend-esri") && w.setObject("dijit._PopupRenderer", y, x);
                return y
            })
        },
        "esri/libs/sanitizer/Sanitizer": function() {
            !function(C, y) {
                "object" == typeof exports && "undefined" != typeof module ? module.exports = y() : "function" == typeof define && define.amd ? define(y) : (C = "undefined" != typeof globalThis ? globalThis : C || self).Sanitizer = y()
            }(this, function() {
                function C() {
                    return {
                        "align-content": !1,
                        "align-items": !1,
                        "align-self": !1,
                        "alignment-adjust": !1,
                        "alignment-baseline": !1,
                        all: !1,
                        "anchor-point": !1,
                        animation: !1,
                        "animation-delay": !1,
                        "animation-direction": !1,
                        "animation-duration": !1,
                        "animation-fill-mode": !1,
                        "animation-iteration-count": !1,
                        "animation-name": !1,
                        "animation-play-state": !1,
                        "animation-timing-function": !1,
                        azimuth: !1,
                        "backface-visibility": !1,
                        background: !0,
                        "background-attachment": !0,
                        "background-clip": !0,
                        "background-color": !0,
                        "background-image": !0,
                        "background-origin": !0,
                        "background-position": !0,
                        "background-repeat": !0,
                        "background-size": !0,
                        "baseline-shift": !1,
                        binding: !1,
                        bleed: !1,
                        "bookmark-label": !1,
                        "bookmark-level": !1,
                        "bookmark-state": !1,
                        border: !0,
                        "border-bottom": !0,
                        "border-bottom-color": !0,
                        "border-bottom-left-radius": !0,
                        "border-bottom-right-radius": !0,
                        "border-bottom-style": !0,
                        "border-bottom-width": !0,
                        "border-collapse": !0,
                        "border-color": !0,
                        "border-image": !0,
                        "border-image-outset": !0,
                        "border-image-repeat": !0,
                        "border-image-slice": !0,
                        "border-image-source": !0,
                        "border-image-width": !0,
                        "border-left": !0,
                        "border-left-color": !0,
                        "border-left-style": !0,
                        "border-left-width": !0,
                        "border-radius": !0,
                        "border-right": !0,
                        "border-right-color": !0,
                        "border-right-style": !0,
                        "border-right-width": !0,
                        "border-spacing": !0,
                        "border-style": !0,
                        "border-top": !0,
                        "border-top-color": !0,
                        "border-top-left-radius": !0,
                        "border-top-right-radius": !0,
                        "border-top-style": !0,
                        "border-top-width": !0,
                        "border-width": !0,
                        bottom: !1,
                        "box-decoration-break": !0,
                        "box-shadow": !0,
                        "box-sizing": !0,
                        "box-snap": !0,
                        "box-suppress": !0,
                        "break-after": !0,
                        "break-before": !0,
                        "break-inside": !0,
                        "caption-side": !1,
                        chains: !1,
                        clear: !0,
                        clip: !1,
                        "clip-path": !1,
                        "clip-rule": !1,
                        color: !0,
                        "color-interpolation-filters": !0,
                        "column-count": !1,
                        "column-fill": !1,
                        "column-gap": !1,
                        "column-rule": !1,
                        "column-rule-color": !1,
                        "column-rule-style": !1,
                        "column-rule-width": !1,
                        "column-span": !1,
                        "column-width": !1,
                        columns: !1,
                        contain: !1,
                        content: !1,
                        "counter-increment": !1,
                        "counter-reset": !1,
                        "counter-set": !1,
                        crop: !1,
                        cue: !1,
                        "cue-after": !1,
                        "cue-before": !1,
                        cursor: !1,
                        direction: !1,
                        display: !0,
                        "display-inside": !0,
                        "display-list": !0,
                        "display-outside": !0,
                        "dominant-baseline": !1,
                        elevation: !1,
                        "empty-cells": !1,
                        filter: !1,
                        flex: !1,
                        "flex-basis": !1,
                        "flex-direction": !1,
                        "flex-flow": !1,
                        "flex-grow": !1,
                        "flex-shrink": !1,
                        "flex-wrap": !1,
                        float: !1,
                        "float-offset": !1,
                        "flood-color": !1,
                        "flood-opacity": !1,
                        "flow-from": !1,
                        "flow-into": !1,
                        font: !0,
                        "font-family": !0,
                        "font-feature-settings": !0,
                        "font-kerning": !0,
                        "font-language-override": !0,
                        "font-size": !0,
                        "font-size-adjust": !0,
                        "font-stretch": !0,
                        "font-style": !0,
                        "font-synthesis": !0,
                        "font-variant": !0,
                        "font-variant-alternates": !0,
                        "font-variant-caps": !0,
                        "font-variant-east-asian": !0,
                        "font-variant-ligatures": !0,
                        "font-variant-numeric": !0,
                        "font-variant-position": !0,
                        "font-weight": !0,
                        grid: !1,
                        "grid-area": !1,
                        "grid-auto-columns": !1,
                        "grid-auto-flow": !1,
                        "grid-auto-rows": !1,
                        "grid-column": !1,
                        "grid-column-end": !1,
                        "grid-column-start": !1,
                        "grid-row": !1,
                        "grid-row-end": !1,
                        "grid-row-start": !1,
                        "grid-template": !1,
                        "grid-template-areas": !1,
                        "grid-template-columns": !1,
                        "grid-template-rows": !1,
                        "hanging-punctuation": !1,
                        height: !0,
                        hyphens: !1,
                        icon: !1,
                        "image-orientation": !1,
                        "image-resolution": !1,
                        "ime-mode": !1,
                        "initial-letters": !1,
                        "inline-box-align": !1,
                        "justify-content": !1,
                        "justify-items": !1,
                        "justify-self": !1,
                        left: !1,
                        "letter-spacing": !0,
                        "lighting-color": !0,
                        "line-box-contain": !1,
                        "line-break": !1,
                        "line-grid": !1,
                        "line-height": !1,
                        "line-snap": !1,
                        "line-stacking": !1,
                        "line-stacking-ruby": !1,
                        "line-stacking-shift": !1,
                        "line-stacking-strategy": !1,
                        "list-style": !0,
                        "list-style-image": !0,
                        "list-style-position": !0,
                        "list-style-type": !0,
                        margin: !0,
                        "margin-bottom": !0,
                        "margin-left": !0,
                        "margin-right": !0,
                        "margin-top": !0,
                        "marker-offset": !1,
                        "marker-side": !1,
                        marks: !1,
                        mask: !1,
                        "mask-box": !1,
                        "mask-box-outset": !1,
                        "mask-box-repeat": !1,
                        "mask-box-slice": !1,
                        "mask-box-source": !1,
                        "mask-box-width": !1,
                        "mask-clip": !1,
                        "mask-image": !1,
                        "mask-origin": !1,
                        "mask-position": !1,
                        "mask-repeat": !1,
                        "mask-size": !1,
                        "mask-source-type": !1,
                        "mask-type": !1,
                        "max-height": !0,
                        "max-lines": !1,
                        "max-width": !0,
                        "min-height": !0,
                        "min-width": !0,
                        "move-to": !1,
                        "nav-down": !1,
                        "nav-index": !1,
                        "nav-left": !1,
                        "nav-right": !1,
                        "nav-up": !1,
                        "object-fit": !1,
                        "object-position": !1,
                        opacity: !1,
                        order: !1,
                        orphans: !1,
                        outline: !1,
                        "outline-color": !1,
                        "outline-offset": !1,
                        "outline-style": !1,
                        "outline-width": !1,
                        overflow: !1,
                        "overflow-wrap": !1,
                        "overflow-x": !1,
                        "overflow-y": !1,
                        padding: !0,
                        "padding-bottom": !0,
                        "padding-left": !0,
                        "padding-right": !0,
                        "padding-top": !0,
                        page: !1,
                        "page-break-after": !1,
                        "page-break-before": !1,
                        "page-break-inside": !1,
                        "page-policy": !1,
                        pause: !1,
                        "pause-after": !1,
                        "pause-before": !1,
                        perspective: !1,
                        "perspective-origin": !1,
                        pitch: !1,
                        "pitch-range": !1,
                        "play-during": !1,
                        position: !1,
                        "presentation-level": !1,
                        quotes: !1,
                        "region-fragment": !1,
                        resize: !1,
                        rest: !1,
                        "rest-after": !1,
                        "rest-before": !1,
                        richness: !1,
                        right: !1,
                        rotation: !1,
                        "rotation-point": !1,
                        "ruby-align": !1,
                        "ruby-merge": !1,
                        "ruby-position": !1,
                        "shape-image-threshold": !1,
                        "shape-outside": !1,
                        "shape-margin": !1,
                        size: !1,
                        speak: !1,
                        "speak-as": !1,
                        "speak-header": !1,
                        "speak-numeral": !1,
                        "speak-punctuation": !1,
                        "speech-rate": !1,
                        stress: !1,
                        "string-set": !1,
                        "tab-size": !1,
                        "table-layout": !1,
                        "text-align": !0,
                        "text-align-last": !0,
                        "text-combine-upright": !0,
                        "text-decoration": !0,
                        "text-decoration-color": !0,
                        "text-decoration-line": !0,
                        "text-decoration-skip": !0,
                        "text-decoration-style": !0,
                        "text-emphasis": !0,
                        "text-emphasis-color": !0,
                        "text-emphasis-position": !0,
                        "text-emphasis-style": !0,
                        "text-height": !0,
                        "text-indent": !0,
                        "text-justify": !0,
                        "text-orientation": !0,
                        "text-overflow": !0,
                        "text-shadow": !0,
                        "text-space-collapse": !0,
                        "text-transform": !0,
                        "text-underline-position": !0,
                        "text-wrap": !0,
                        top: !1,
                        transform: !1,
                        "transform-origin": !1,
                        "transform-style": !1,
                        transition: !1,
                        "transition-delay": !1,
                        "transition-duration": !1,
                        "transition-property": !1,
                        "transition-timing-function": !1,
                        "unicode-bidi": !1,
                        "vertical-align": !1,
                        visibility: !1,
                        "voice-balance": !1,
                        "voice-duration": !1,
                        "voice-family": !1,
                        "voice-pitch": !1,
                        "voice-range": !1,
                        "voice-rate": !1,
                        "voice-stress": !1,
                        "voice-volume": !1,
                        volume: !1,
                        "white-space": !1,
                        widows: !1,
                        width: !0,
                        "will-change": !1,
                        "word-break": !0,
                        "word-spacing": !0,
                        "word-wrap": !0,
                        "wrap-flow": !1,
                        "wrap-through": !1,
                        "writing-mode": !1,
                        "z-index": !1
                    }
                }
                function y(X) {
                    var oa = X || {}, ka = {}, Ea;
                    for (Ea in oa)
                        ka[Ea] = oa[Ea];
                    (X = ka).whiteList = X.whiteList || H.whiteList;
                    X.onAttr = X.onAttr || H.onAttr;
                    X.onIgnoreAttr = X.onIgnoreAttr || H.onIgnoreAttr;
                    X.safeAttrValue = X.safeAttrValue || H.safeAttrValue;
                    this.options = X
                }
                function b(X) {
                    return X.replace(ea, "\x26lt;").replace(Y, "\x26gt;")
                }
                function w(X) {
                    return X.replace(ia, "\x26quot;")
                }
                function m(X) {
                    return X.replace(qa, '"')
                }
                function l(X) {
                    return X.replace(wa, function(oa, ka) {
                        return "x" === ka[0] || "X" === ka[0] ? String.fromCharCode(parseInt(ka.substr(1), 16)) : String.fromCharCode(parseInt(ka, 10))
                    })
                }
                function k(X) {
                    return X.replace(K, ":").replace(Z, " ")
                }
                function h(X) {
                    for (var oa = "", ka = 0, Ea = X.length; ka < Ea; ka++)
                        oa += 32 > X.charCodeAt(ka) ? " " : X.charAt(ka);
                    return aa.trim(oa)
                }
                function f(X) {
                    return X = h(X = k(X = l(X = m(X))))
                }
                function d(X) {
                    return X = b(X = w(X))
                }
                function a(X, oa) {
                    for (; oa < X.length; oa++) {
                        var ka = X[oa];
                        if (" " !== ka)
                            return "\x3d" === ka ? oa : -1
                    }
                }
                function c(X, oa) {
                    for (; 0 < oa; oa--) {
                        var ka = X[oa];
                        if (" " !== ka)
                            return "\x3d" === ka ? oa : -1
                    }
                }
                function e(X) {
                    return '"' === X[0] && '"' === X[X.length - 1] || "'" === X[0] && "'" === X[X.length - 1] ? X.substr(1, X.length - 2) : X
                }
                function n(X) {
                    var oa = X || {}, ka = {}, Ea;
                    for (Ea in oa)
                        ka[Ea] = oa[Ea];
                    (X = ka).stripIgnoreTag && (X.onIgnoreTag && console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),
                    X.onIgnoreTag = Aa.onIgnoreTagStripAll);
                    X.whiteList = X.whiteList || Aa.whiteList;
                    X.onTag = X.onTag || Aa.onTag;
                    X.onTagAttr = X.onTagAttr || Aa.onTagAttr;
                    X.onIgnoreTag = X.onIgnoreTag || Aa.onIgnoreTag;
                    X.onIgnoreTagAttr = X.onIgnoreTagAttr || Aa.onIgnoreTagAttr;
                    X.safeAttrValue = X.safeAttrValue || Aa.safeAttrValue;
                    X.escapeHtml = X.escapeHtml || Aa.escapeHtml;
                    this.options = X;
                    !1 === X.css ? this.cssFilter = !1 : (X.css = X.css || {},
                    this.cssFilter = new xa(X.css))
                }
                var t, g, q = Object.prototype, x = Function.prototype.toString, v = q.hasOwnProperty, z = x.call(Object), u = q.toString, p = (t = Object.getPrototypeOf,
                g = Object,
                function(X) {
                    return t(g(X))
                }
                ), r = function(X) {
                    var oa;
                    if (!(oa = !X || "object" != typeof X || "[object Object]" != u.call(X)) && (oa = !1,
                    null != X && "function" != typeof X.toString))
                        try {
                            oa = !!(X + "")
                        } catch (ka) {}
                    if (oa)
                        return !1;
                    X = p(X);
                    if (null === X)
                        return !0;
                    X = v.call(X, "constructor") && X.constructor;
                    return "function" == typeof X && X instanceof X && x.call(X) == z
                }, B = {
                    exports: {}
                }, D = {};
                q = {
                    exports: {}
                };
                var G = {}
                  , A = /javascript\s*:/gim;
                G.whiteList = C();
                G.getDefaultWhiteList = C;
                G.onAttr = function(X, oa, ka) {}
                ;
                G.onIgnoreAttr = function(X, oa, ka) {}
                ;
                G.safeAttrValue = function(X, oa) {
                    return A.test(oa) ? "" : oa
                }
                ;
                var E = {
                    indexOf: function(X, oa) {
                        var ka;
                        if (Array.prototype.indexOf)
                            return X.indexOf(oa);
                        var Ea = 0;
                        for (ka = X.length; Ea < ka; Ea++)
                            if (X[Ea] === oa)
                                return Ea;
                        return -1
                    },
                    forEach: function(X, oa, ka) {
                        var Ea;
                        if (Array.prototype.forEach)
                            return X.forEach(oa, ka);
                        var T = 0;
                        for (Ea = X.length; T < Ea; T++)
                            oa.call(ka, X[T], T, X)
                    },
                    trim: function(X) {
                        return String.prototype.trim ? X.trim() : X.replace(/(^\s*)|(\s*$)/g, "")
                    },
                    trimRight: function(X) {
                        return String.prototype.trimRight ? X.trimRight() : X.replace(/(\s*$)/g, "")
                    }
                }
                  , H = G
                  , J = function(X, oa) {
                    function ka() {
                        if (!T) {
                            var Oa = E.trim(X.slice(U, ma))
                              , Ua = Oa.indexOf(":");
                            if (-1 !== Ua) {
                                var Xa = E.trim(Oa.slice(0, Ua));
                                Ua = E.trim(Oa.slice(Ua + 1));
                                Xa && (Oa = oa(U, sa.length, Xa, Ua, Oa)) && (sa += Oa + "; ")
                            }
                        }
                        U = ma + 1
                    }
                    ";" !== (X = E.trimRight(X))[X.length - 1] && (X += ";");
                    for (var Ea = X.length, T = !1, U = 0, ma = 0, sa = ""; ma < Ea; ma++) {
                        var ya = X[ma];
                        if ("/" === ya && "*" === X[ma + 1]) {
                            ya = X.indexOf("*/", ma + 2);
                            if (-1 === ya)
                                break;
                            U = (ma = ya + 1) + 1;
                            T = !1
                        } else
                            "(" === ya ? T = !0 : ")" === ya ? T = !1 : ";" === ya ? T || ka() : "\n" === ya && ka()
                    }
                    return E.trim(sa)
                };
                y.prototype.process = function(X) {
                    if (!(X = (X = X || "").toString()))
                        return "";
                    var oa = this.options
                      , ka = oa.whiteList
                      , Ea = oa.onAttr
                      , T = oa.onIgnoreAttr
                      , U = oa.safeAttrValue;
                    return J(X, function(ma, sa, ya, Oa, Ua) {
                        var Xa = ka[ya]
                          , Ma = !1;
                        if (!0 === Xa ? Ma = Xa : "function" == typeof Xa ? Ma = Xa(Oa) : Xa instanceof RegExp && (Ma = Xa.test(Oa)),
                        !0 !== Ma && (Ma = !1),
                        Oa = U(ya, Oa)) {
                            var I;
                            ma = {
                                position: sa,
                                sourcePosition: ma,
                                source: Ua,
                                isWhite: Ma
                            };
                            return Ma ? null == (I = Ea(ya, Oa, ma)) ? ya + ":" + Oa : I : null == (I = T(ya, Oa, ma)) ? void 0 : I
                        }
                    })
                }
                ;
                !function(X, oa) {
                    for (var ka in (oa = X.exports = function(Ea, T) {
                        return (new y(T)).process(Ea)
                    }
                    ).FilterCSS = y,
                    G)
                        oa[ka] = G[ka]
                }(q, q.exports);
                var O = {
                    indexOf: function(X, oa) {
                        var ka;
                        if (Array.prototype.indexOf)
                            return X.indexOf(oa);
                        var Ea = 0;
                        for (ka = X.length; Ea < ka; Ea++)
                            if (X[Ea] === oa)
                                return Ea;
                        return -1
                    },
                    forEach: function(X, oa, ka) {
                        var Ea;
                        if (Array.prototype.forEach)
                            return X.forEach(oa, ka);
                        var T = 0;
                        for (Ea = X.length; T < Ea; T++)
                            oa.call(ka, X[T], T, X)
                    },
                    trim: function(X) {
                        return String.prototype.trim ? X.trim() : X.replace(/(^\s*)|(\s*$)/g, "")
                    },
                    spaceIndex: function(X) {
                        return (X = /\s|\n|\t/.exec(X)) ? X.index : -1
                    }
                }
                  , V = q.exports.getDefaultWhiteList
                  , aa = O
                  , da = new q.exports.FilterCSS
                  , ea = /</g
                  , Y = />/g
                  , ia = /"/g
                  , qa = /&quot;/g
                  , wa = /&#([a-zA-Z0-9]*);?/gim
                  , K = /&colon;?/gim
                  , Z = /&newline;?/gim
                  , pa = /((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi
                  , L = /e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi
                  , R = /u\s*r\s*l\s*\(.*/gi
                  , ha = /\x3c!--[\s\S]*?--\x3e/g;
                D.whiteList = {
                    a: ["target", "href", "title"],
                    abbr: ["title"],
                    address: [],
                    area: ["shape", "coords", "href", "alt"],
                    article: [],
                    aside: [],
                    audio: "autoplay controls crossorigin loop muted preload src".split(" "),
                    b: [],
                    bdi: ["dir"],
                    bdo: ["dir"],
                    big: [],
                    blockquote: ["cite"],
                    br: [],
                    caption: [],
                    center: [],
                    cite: [],
                    code: [],
                    col: ["align", "valign", "span", "width"],
                    colgroup: ["align", "valign", "span", "width"],
                    dd: [],
                    del: ["datetime"],
                    details: ["open"],
                    div: [],
                    dl: [],
                    dt: [],
                    em: [],
                    figcaption: [],
                    figure: [],
                    font: ["color", "size", "face"],
                    footer: [],
                    h1: [],
                    h2: [],
                    h3: [],
                    h4: [],
                    h5: [],
                    h6: [],
                    header: [],
                    hr: [],
                    i: [],
                    img: ["src", "alt", "title", "width", "height"],
                    ins: ["datetime"],
                    li: [],
                    mark: [],
                    nav: [],
                    ol: [],
                    p: [],
                    pre: [],
                    s: [],
                    section: [],
                    small: [],
                    span: [],
                    sub: [],
                    summary: [],
                    sup: [],
                    strong: [],
                    strike: [],
                    table: ["width", "border", "align", "valign"],
                    tbody: ["align", "valign"],
                    td: ["width", "rowspan", "colspan", "align", "valign"],
                    tfoot: ["align", "valign"],
                    th: ["width", "rowspan", "colspan", "align", "valign"],
                    thead: ["align", "valign"],
                    tr: ["rowspan", "align", "valign"],
                    tt: [],
                    u: [],
                    ul: [],
                    video: "autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")
                };
                D.getDefaultWhiteList = function() {
                    return {
                        a: ["target", "href", "title"],
                        abbr: ["title"],
                        address: [],
                        area: ["shape", "coords", "href", "alt"],
                        article: [],
                        aside: [],
                        audio: "autoplay controls crossorigin loop muted preload src".split(" "),
                        b: [],
                        bdi: ["dir"],
                        bdo: ["dir"],
                        big: [],
                        blockquote: ["cite"],
                        br: [],
                        caption: [],
                        center: [],
                        cite: [],
                        code: [],
                        col: ["align", "valign", "span", "width"],
                        colgroup: ["align", "valign", "span", "width"],
                        dd: [],
                        del: ["datetime"],
                        details: ["open"],
                        div: [],
                        dl: [],
                        dt: [],
                        em: [],
                        figcaption: [],
                        figure: [],
                        font: ["color", "size", "face"],
                        footer: [],
                        h1: [],
                        h2: [],
                        h3: [],
                        h4: [],
                        h5: [],
                        h6: [],
                        header: [],
                        hr: [],
                        i: [],
                        img: ["src", "alt", "title", "width", "height"],
                        ins: ["datetime"],
                        li: [],
                        mark: [],
                        nav: [],
                        ol: [],
                        p: [],
                        pre: [],
                        s: [],
                        section: [],
                        small: [],
                        span: [],
                        sub: [],
                        summary: [],
                        sup: [],
                        strong: [],
                        strike: [],
                        table: ["width", "border", "align", "valign"],
                        tbody: ["align", "valign"],
                        td: ["width", "rowspan", "colspan", "align", "valign"],
                        tfoot: ["align", "valign"],
                        th: ["width", "rowspan", "colspan", "align", "valign"],
                        thead: ["align", "valign"],
                        tr: ["rowspan", "align", "valign"],
                        tt: [],
                        u: [],
                        ul: [],
                        video: "autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")
                    }
                }
                ;
                D.onTag = function(X, oa, ka) {}
                ;
                D.onIgnoreTag = function(X, oa, ka) {}
                ;
                D.onTagAttr = function(X, oa, ka) {}
                ;
                D.onIgnoreTagAttr = function(X, oa, ka) {}
                ;
                D.safeAttrValue = function(X, oa, ka, Ea) {
                    if (ka = f(ka),
                    "href" === oa || "src" === oa) {
                        if ("#" === (ka = aa.trim(ka)))
                            return "#";
                        if ("http://" !== ka.substr(0, 7) && "https://" !== ka.substr(0, 8) && "mailto:" !== ka.substr(0, 7) && "tel:" !== ka.substr(0, 4) && "data:image/" !== ka.substr(0, 11) && "ftp://" !== ka.substr(0, 6) && "./" !== ka.substr(0, 2) && "../" !== ka.substr(0, 3) && "#" !== ka[0] && "/" !== ka[0])
                            return ""
                    } else if ("background" === oa) {
                        if (pa.lastIndex = 0,
                        pa.test(ka))
                            return ""
                    } else if ("style" === oa) {
                        if ((L.lastIndex = 0,
                        L.test(ka)) || (R.lastIndex = 0,
                        R.test(ka) && (pa.lastIndex = 0,
                        pa.test(ka))))
                            return "";
                        !1 !== Ea && (ka = (Ea = Ea || da).process(ka))
                    }
                    return ka = d(ka)
                }
                ;
                D.escapeHtml = b;
                D.escapeQuote = w;
                D.unescapeQuote = m;
                D.escapeHtmlEntities = l;
                D.escapeDangerHtml5Entities = k;
                D.clearNonPrintableCharacter = h;
                D.friendlyAttrValue = f;
                D.escapeAttrValue = d;
                D.onIgnoreTagStripAll = function() {
                    return ""
                }
                ;
                D.StripTagBody = function(X, oa) {
                    "function" != typeof oa && (oa = function() {}
                    );
                    var ka = !Array.isArray(X)
                      , Ea = []
                      , T = !1;
                    return {
                        onIgnoreTag: function(U, ma, sa) {
                            return ka || -1 !== aa.indexOf(X, U) ? sa.isClosing ? (Ea.push([!1 !== T ? T : sa.position, sa.position + 10]),
                            T = !1,
                            "[/removed]") : (T || (T = sa.position),
                            "[removed]") : oa(U, ma, sa)
                        },
                        remove: function(U) {
                            var ma = ""
                              , sa = 0;
                            return aa.forEach(Ea, function(ya) {
                                ma += U.slice(sa, ya[0]);
                                sa = ya[1]
                            }),
                            ma += U.slice(sa)
                        }
                    }
                }
                ;
                D.stripCommentTag = function(X) {
                    return X.replace(ha, "")
                }
                ;
                D.stripBlankChar = function(X) {
                    X = X.split("");
                    return (X = X.filter(function(oa) {
                        oa = oa.charCodeAt(0);
                        return 127 !== oa && (!(31 >= oa) || 10 === oa || 13 === oa)
                    })).join("")
                }
                ;
                D.cssFilter = da;
                D.getDefaultCSSWhiteList = V;
                var na = {}
                  , ta = /[^a-zA-Z0-9_:\.\-]/gim;
                na.parseTag = function(X, oa, ka) {
                    var Ea = ""
                      , T = 0
                      , U = !1
                      , ma = !1
                      , sa = 0
                      , ya = X.length
                      , Oa = ""
                      , Ua = "";
                    sa = 0;
                    a: for (; sa < ya; sa++)
                        if (Ua = X.charAt(sa),
                        !1 === U)
                            "\x3c" === Ua && (U = sa);
                        else if (!1 === ma)
                            if ("\x3c" === Ua)
                                Ea += ka(X.slice(T, sa)),
                                T = U = sa;
                            else if ("\x3e" === Ua)
                                Ea += ka(X.slice(T, U)),
                                T = Ua = X.slice(U, sa + 1),
                                Oa = O.spaceIndex(T),
                                T = -1 === Oa ? T.slice(1, -1) : T.slice(1, Oa + 1),
                                Oa = ("/" === (T = O.trim(T).toLowerCase()).slice(0, 1) && (T = T.slice(1)),
                                "/" === T.slice(-1) && (T = T.slice(0, -1)),
                                T),
                                Ea += oa(U, Ea.length, Oa, Ua, "\x3c/" === Ua.slice(0, 2)),
                                T = sa + 1,
                                U = !1;
                            else {
                                if ('"' === Ua || "'" === Ua) {
                                    Oa = 1;
                                    for (var Xa = X.charAt(sa - Oa); "" === Xa.trim() || "\x3d" === Xa; ) {
                                        if ("\x3d" === Xa) {
                                            ma = Ua;
                                            continue a
                                        }
                                        Xa = X.charAt(sa - ++Oa)
                                    }
                                }
                            }
                        else
                            Ua === ma && (ma = !1);
                    return T < X.length && (Ea += ka(X.substr(T))),
                    Ea
                }
                ;
                na.parseAttr = function(X, oa) {
                    function ka(Oa, Ua) {
                        1 > (Oa = (Oa = O.trim(Oa)).replace(ta, "").toLowerCase()).length || (Oa = oa(Oa, Ua || "")) && T.push(Oa)
                    }
                    for (var Ea = 0, T = [], U = !1, ma = X.length, sa = 0; sa < ma; sa++) {
                        var ya = X.charAt(sa);
                        if (!1 !== U || "\x3d" !== ya)
                            if (!1 === U || sa !== Ea || '"' !== ya && "'" !== ya || "\x3d" !== X.charAt(sa - 1))
                                /\s|\n|\t/.test(ya) && ((X = X.replace(/\s|\n|\t/g, " "),
                                !1 === U) ? -1 === (ya = a(X, sa)) ? (ka(O.trim(X.slice(Ea, sa))),
                                U = !1,
                                Ea = sa + 1) : sa = ya - 1 : -1 === (ya = c(X, sa - 1)) && (ka(U, e(O.trim(X.slice(Ea, sa)))),
                                U = !1,
                                Ea = sa + 1));
                            else {
                                if (-1 === (ya = X.indexOf(ya, sa + 1)))
                                    break;
                                ka(U, O.trim(X.slice(Ea + 1, ya)));
                                U = !1;
                                Ea = (sa = ya) + 1
                            }
                        else
                            U = X.slice(Ea, sa),
                            Ea = sa + 1
                    }
                    return Ea < X.length && (!1 === U ? ka(X.slice(Ea)) : ka(U, e(O.trim(X.slice(Ea))))),
                    O.trim(T.join(" "))
                }
                ;
                var xa = q.exports.FilterCSS
                  , Aa = D
                  , ca = na.parseTag
                  , ja = na.parseAttr;
                n.prototype.process = function(X) {
                    if (!(X = (X = X || "").toString()))
                        return "";
                    var oa = this.options
                      , ka = oa.whiteList
                      , Ea = oa.onTag
                      , T = oa.onIgnoreTag
                      , U = oa.onTagAttr
                      , ma = oa.onIgnoreTagAttr
                      , sa = oa.safeAttrValue
                      , ya = oa.escapeHtml
                      , Oa = this.cssFilter;
                    oa.stripBlankChar && (X = Aa.stripBlankChar(X));
                    oa.allowCommentTag || (X = Aa.stripCommentTag(X));
                    var Ua = !1;
                    oa.stripIgnoreTagBody && (Ua = Aa.StripTagBody(oa.stripIgnoreTagBody, T),
                    T = Ua.onIgnoreTag);
                    X = ca(X, function(Xa, Ma, I, Q, ba) {
                        Ma = {
                            sourcePosition: Xa,
                            position: Ma,
                            isClosing: ba,
                            isWhite: ka.hasOwnProperty(I)
                        };
                        if (null != (Xa = Ea(I, Q, Ma)))
                            return Xa;
                        if (Ma.isWhite) {
                            if (Ma.isClosing)
                                return "\x3c/" + I + "\x3e";
                            Xa = function(S) {
                                var fa = O.spaceIndex(S);
                                if (-1 === fa)
                                    return {
                                        html: "",
                                        closing: "/" === S[S.length - 2]
                                    };
                                fa = "/" === (S = O.trim(S.slice(fa + 1, -1)))[S.length - 1];
                                return fa && (S = O.trim(S.slice(0, -1))),
                                {
                                    html: S,
                                    closing: fa
                                }
                            }(Q);
                            var M = ka[I];
                            Ma = ja(Xa.html, function(S, fa) {
                                var ra, va = -1 !== O.indexOf(M, S);
                                return null == (ra = U(I, S, fa, va)) ? va ? (fa = sa(I, S, fa, Oa)) ? S + '\x3d"' + fa + '"' : S : null == (ra = ma(I, S, fa, va)) ? void 0 : ra : ra
                            });
                            Q = "\x3c" + I;
                            return Ma && (Q += " " + Ma),
                            Xa.closing && (Q += " /"),
                            Q += "\x3e"
                        }
                        return null == (Xa = T(I, Q, Ma)) ? ya(Q) : Xa
                    }, ya);
                    return Ua && (X = Ua.remove(X)),
                    X
                }
                ;
                return function(X, oa) {
                    function ka(U, ma) {
                        return (new Ea(ma)).process(U)
                    }
                    var Ea = n, T;
                    for (T in (oa = X.exports = ka).filterXSS = ka,
                    oa.FilterXSS = Ea,
                    D)
                        oa[T] = D[T];
                    for (T in na)
                        oa[T] = na[T];
                    "undefined" != typeof self && "undefined" != typeof DedicatedWorkerGlobalScope && self instanceof DedicatedWorkerGlobalScope && (self.filterXSS = X.exports)
                }(B, B.exports),
                function() {
                    function X(oa, ka) {
                        var Ea, T = this;
                        this.arcgisWhiteList = {
                            a: ["href", "target", "style"],
                            abbr: ["title"],
                            img: "src width height border alt style".split(" "),
                            video: "autoplay controls height loop muted poster preload width".split(" "),
                            audio: ["autoplay", "controls", "loop", "muted", "preload"],
                            source: ["media", "src", "type"],
                            span: ["style"],
                            table: "width height cellpadding cellspacing border style".split(" "),
                            div: ["style", "align"],
                            font: ["size", "color", "style", "face"],
                            tr: ["height", "valign", "align", "style"],
                            td: "height width valign align colspan rowspan nowrap style".split(" "),
                            th: "height width valign align colspan rowspan nowrap style".split(" "),
                            p: ["style"],
                            b: [],
                            strong: [],
                            i: [],
                            em: [],
                            u: [],
                            br: [],
                            li: [],
                            ul: [],
                            ol: [],
                            hr: [],
                            tbody: []
                        };
                        this.allowedProtocols = "http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");
                        this.arcgisFilterOptions = {
                            allowCommentTag: !0,
                            safeAttrValue: function(U, ma, sa, ya) {
                                return "a" === U && "href" === ma || ("img" === U || "source" === U) && "src" === ma ? T.sanitizeUrl(sa) : B.exports.safeAttrValue(U, ma, sa, ya)
                            }
                        };
                        oa && !ka ? Ea = oa : oa && ka ? (Ea = Object.create(this.arcgisFilterOptions),
                        Object.keys(oa).forEach(function(U) {
                            "whiteList" === U ? Ea.whiteList = T._extendObjectOfArrays([T.arcgisWhiteList, oa.whiteList || {}]) : Ea[U] = oa[U]
                        })) : (Ea = Object.create(this.arcgisFilterOptions)).whiteList = this.arcgisWhiteList;
                        this.xssFilterOptions = Ea;
                        this._xssFilter = new B.exports.FilterXSS(Ea)
                    }
                    return X.prototype.sanitize = function(oa, ka) {
                        switch (void 0 === ka && (ka = {}),
                        typeof oa) {
                        case "number":
                            return isNaN(oa) || !isFinite(oa) ? null : oa;
                        case "boolean":
                            return oa;
                        case "string":
                            return this._xssFilter.process(oa);
                        case "object":
                            return this._iterateOverObject(oa, ka);
                        default:
                            if (!ka.allowUndefined || void 0 !== oa)
                                return null
                        }
                    }
                    ,
                    X.prototype.sanitizeUrl = function(oa) {
                        var ka = this._trim(oa.substring(0, oa.indexOf(":")));
                        return "/" === oa || "#" === oa || "#" === oa[0] || -1 < this.allowedProtocols.indexOf(ka.toLowerCase()) ? B.exports.escapeAttrValue(oa) : ""
                    }
                    ,
                    X.prototype.sanitizeHTMLAttribute = function(oa, ka, Ea, T) {
                        return "function" == typeof this.xssFilterOptions.safeAttrValue ? this.xssFilterOptions.safeAttrValue(oa, ka, Ea, T) : B.exports.safeAttrValue(oa, ka, Ea, T)
                    }
                    ,
                    X.prototype.validate = function(oa, ka) {
                        void 0 === ka && (ka = {});
                        ka = this.sanitize(oa, ka);
                        return {
                            isValid: oa === ka,
                            sanitized: ka
                        }
                    }
                    ,
                    X.prototype._extendObjectOfArrays = function(oa) {
                        var ka = {};
                        return oa.forEach(function(Ea) {
                            Object.keys(Ea).forEach(function(T) {
                                Array.isArray(Ea[T]) && Array.isArray(ka[T]) ? ka[T] = ka[T].concat(Ea[T]) : ka[T] = Ea[T]
                            })
                        }),
                        ka
                    }
                    ,
                    X.prototype._iterateOverObject = function(oa, ka) {
                        var Ea = this;
                        void 0 === ka && (ka = {});
                        try {
                            var T = !1
                              , U = void 0;
                            if (Array.isArray(oa))
                                U = oa.reduce(function(ma, sa) {
                                    var ya = Ea.validate(sa, ka);
                                    return ya.isValid ? ma.concat([sa]) : (T = !0,
                                    ma.concat([ya.sanitized]))
                                }, []);
                            else {
                                if (!r(oa))
                                    return ka.allowUndefined && void 0 === oa ? void 0 : null;
                                U = Object.keys(oa).reduce(function(ma, sa) {
                                    var ya = oa[sa]
                                      , Oa = Ea.validate(ya, ka);
                                    return Oa.isValid ? ma[sa] = ya : (T = !0,
                                    ma[sa] = Oa.sanitized),
                                    ma
                                }, {})
                            }
                            return T ? U : oa
                        } catch (ma) {
                            return null
                        }
                    }
                    ,
                    X.prototype._trim = function(oa) {
                        return String.prototype.trim ? oa.trim() : oa.replace(/(^\s*)|(\s*$)/g, "")
                    }
                    ,
                    X
                }()
            })
        },
        "dijit/_Templated": function() {
            define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "), function(C, y, b, w, m, l, k) {
                l.extend(C, {
                    waiRole: "",
                    waiState: ""
                });
                return m("dijit._Templated", [y, b], {
                    constructor: function() {
                        k.deprecated(this.declaredClass + ": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin", "", "2.0")
                    },
                    _processNode: function(h, f) {
                        var d = this.inherited(arguments)
                          , a = f(h, "waiRole");
                        a && h.setAttribute("role", a);
                        (a = f(h, "waiState")) && w.forEach(a.split(/\s*,\s*/), function(c) {
                            -1 != c.indexOf("-") && (c = c.split("-"),
                            h.setAttribute("aria-" + c[0], c[1]))
                        });
                        return d
                    }
                })
            })
        },
        "dijit/_WidgetsInTemplateMixin": function() {
            define(["dojo/_base/array", "dojo/aspect", "dojo/_base/declare", "dojo/_base/lang", "dojo/parser"], function(C, y, b, w, m) {
                return b("dijit._WidgetsInTemplateMixin", null, {
                    _earlyTemplatedStartup: !1,
                    contextRequire: null,
                    _beforeFillContent: function() {
                        if (/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)) {
                            var l = this.domNode;
                            this.containerNode && !this.searchContainerNode && (this.containerNode.stopParser = !0);
                            m.parse(l, {
                                noStart: !this._earlyTemplatedStartup,
                                template: !0,
                                inherited: {
                                    dir: this.dir,
                                    lang: this.lang,
                                    textDir: this.textDir
                                },
                                propsThis: this,
                                contextRequire: this.contextRequire,
                                scope: "dojo"
                            }).then(w.hitch(this, function(k) {
                                this._startupWidgets = k;
                                for (var h = 0; h < k.length; h++)
                                    this._processTemplateNode(k[h], function(f, d) {
                                        return f[d]
                                    }, function(f, d, a) {
                                        return d in f ? f.connect(f, d, a) : f.on(d, a, !0)
                                    });
                                this.containerNode && this.containerNode.stopParser && delete this.containerNode.stopParser
                            }));
                            if (!this._startupWidgets)
                                throw Error(this.declaredClass + ": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");
                        }
                    },
                    _processTemplateNode: function(l, k, h) {
                        return k(l, "dojoType") || k(l, "data-dojo-type") ? !0 : this.inherited(arguments)
                    },
                    startup: function() {
                        C.forEach(this._startupWidgets, function(l) {
                            l && !l._started && l.startup && l.startup()
                        });
                        this._startupWidgets = null;
                        this.inherited(arguments)
                    }
                })
            })
        },
        "esri/dijit/_EventedWidget": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "), function(C, y, b, w, m, l) {
                return C([l, m], {
                    _onMap: function(k) {
                        var h = this.constructor._onMap;
                        h && h.FINAL || (delete this.constructor._onMap,
                        h = this.registerConnectEvents(),
                        h.FINAL = !0);
                        k = k.toLowerCase();
                        if (h[k])
                            var f = this[h[k].method];
                        else
                            k = this._onCamelCase(k),
                            this[k] && (f = k);
                        return f
                    },
                    on: function(k, h) {
                        var f = this._onMap(k)
                          , d = k.replace(/\-/g, "")
                          , a = "on" + d in this.domNode;
                        return f || !a ? this.inherited(arguments) : this.own(w(this.domNode, d, h))[0]
                    },
                    emit: function(k, h, f) {
                        var d, a = k.toLowerCase(), c = this.constructor._onMap || this.registerConnectEvents();
                        var e = this[this._onMap(a)];
                        h = h || {};
                        h.target || (h.target = this);
                        if (e && c && c[a]) {
                            this._onObj2Arr(function() {
                                d = Array.prototype.slice.call(arguments)
                            }, c[a].argKeys)(h);
                            var n = y.mixin({}, arguments);
                            n[2] = d;
                            n[0] = c[a].name.replace(/^on/, "")
                        }
                        return this.inherited(n || arguments)
                    }
                })
            })
        },
        "esri/dijit/Legend/utils": function() {
            define(["dojo/_base/lang", "../../lang", "dojo/i18n!../../nls/jsapi"], function(C, y, b) {
                var w = b.widgets.legend;
                return {
                    getVisualVariableTitle: function(m, l) {
                        var k = m.field
                          , h = m.normalizationField
                          , f = !1
                          , d = !1
                          , a = !1;
                        k = C.isFunction(k) ? null : k;
                        h = C.isFunction(h) ? null : h;
                        if (m.legendOptions && m.legendOptions.title)
                            var c = m.legendOptions.title;
                        else if (m.valueExpressionTitle)
                            c = m.valueExpressionTitle;
                        else {
                            if (l.renderer && l.renderer.authoringInfo && l.renderer.authoringInfo.visualVariables) {
                                var e = l.renderer.authoringInfo.visualVariables;
                                for (m = 0; m < e.length; m++) {
                                    var n = e[m];
                                    if ("colorInfo" === n.type && "ratio" === n.style) {
                                        f = !0;
                                        break
                                    } else if ("colorInfo" === n.type && "percent" === n.style) {
                                        d = !0;
                                        break
                                    } else if ("colorInfo" === n.type && "percentTotal" === n.style) {
                                        a = !0;
                                        break
                                    }
                                }
                            }
                            (f = a && "showRatioPercentTotal" || d && "showRatioPercent" || f && "showRatio" || h && "showNormField" || k && "showField" || null) && (c = y.substitute({
                                field: k && l.getFieldLabel(k),
                                normField: h && l.getFieldLabel(h)
                            }, "showField" === f ? "${field}" : w[f]))
                        }
                        return c
                    },
                    getRendererTitle: function(m, l) {
                        if (m) {
                            if ("esri.renderer.ClassBreaksRenderer" === m.declaredClass) {
                                var k = m.attributeField;
                                var h = m.normalizationField;
                                var f = "percent-of-total" === m.normalizationType
                            }
                            k = C.isFunction(k) ? null : k;
                            h = C.isFunction(h) ? null : h;
                            if (m.legendOptions && m.legendOptions.title)
                                var d = m.legendOptions.title;
                            else
                                m.valueExpressionTitle ? d = m.valueExpressionTitle : (m = h && "showNormField" || (f ? "showNormPct" : null) || k && "showField" || null) && (d = y.substitute({
                                    field: k && l.getFieldLabel(k),
                                    normField: h && l.getFieldLabel(h)
                                }, "showField" === m ? "${field}" : w[m]))
                        }
                        return d
                    }
                }
            })
        },
        "esri/layers/clustering/GeohashAggregation": function() {
            define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n) {
                y = y(l, {
                    loaded: !1,
                    started: !1,
                    map: null,
                    layer: null,
                    lod: null,
                    tolerance: null,
                    clusterMode: null,
                    clusterRadius: null,
                    sortEnabled: !0,
                    filterEnabled: !0,
                    bufferEnabled: !0,
                    updateEnabled: !0,
                    clusters: null,
                    clustersEnabled: !0,
                    statisticInfos: null,
                    defaults: {
                        lod: 1,
                        tolerance: 0,
                        clusterMode: "auto",
                        clusterRadius: 80,
                        sortEnabled: !0,
                        filterEnabled: !0,
                        bufferEnabled: !0,
                        updateEnabled: !0
                    },
                    _eventHandles: null,
                    _updateHandle: null,
                    _indexHandle: null,
                    _cellIndex: null,
                    _globalIndex: null,
                    _perfProfile: null,
                    _indexUpdated: !1,
                    _cellSizeScaleFactor: 1.5,
                    _extentScaleFactor: 1.25,
                    _maxGeohashLength: 12,
                    _minClusterRadius: 15,
                    _levelChange: !0,
                    _clusterFieldPrefix: "cluster_",
                    _mapLevelChange: !1,
                    constructor: function(t) {
                        this._update = b.hitch(this, this._update);
                        this._indexFeatures = b.hitch(this, this._indexFeatures);
                        this._eventHandles = [];
                        this._globalIndex = {
                            numFeatures: null,
                            fullExtent: null,
                            lodStats: null
                        };
                        this._perfProfile = {
                            lastIndex: {
                                total: null,
                                numFeatures: 0
                            },
                            lastUpdate: {
                                cells: null,
                                clusters: null,
                                total: null
                            }
                        };
                        this.clusters = [];
                        this.map = t.map;
                        this.layer = t.layer;
                        this.setLod(t.lod);
                        this.setTolerance(t.tolerance);
                        this.setClusterMode(t.clusterMode);
                        this.setClusterRadius(t.clusterRadius);
                        this.setSortEnabled(t.sortEnabled);
                        this.setFilterEnabled(t.filterEnabled);
                        this.setBufferEnabled(t.bufferEnabled);
                        this.setUpdateEnabled(t.updateEnabled);
                        this.setStatisticInfos(t.statisticInfos);
                        this._load();
                        this.loaded ? this._startup() : this._eventHandles.push(this.on("load", b.hitch(this, this._startup)))
                    },
                    destroy: function(t) {
                        this._displayFeatures(!0, t);
                        w.forEach(this._eventHandles, function(g) {
                            g.remove()
                        });
                        a.clearTimeout(this._updateHandle);
                        a.clearTimeout(this._indexHandle);
                        this._cellIndex = this._globalIndex = this._eventHandles = this._updateHandle = this._indexHandle = this.map = this.layer = this.clusters = null
                    },
                    setLod: function(t) {
                        var g = this.lod;
                        this.lod = t || this.defaults.lod;
                        g !== this.lod && this.update()
                    },
                    setTolerance: function(t) {
                        var g = this.tolerance;
                        this.tolerance = t || this.defaults.tolerance;
                        g !== this.tolerance && this.update()
                    },
                    setClusterMode: function(t) {
                        var g = this.clusterMode;
                        this.clusterMode = t || this.defaults.clusterMode;
                        this._evalClusterParams();
                        g !== this.clusterMode && this.update()
                    },
                    setClusterRadius: function(t) {
                        var g = this.clusterRadius;
                        this.clusterRadius = null != t ? t : this.defaults.clusterRadius;
                        this._evalClusterParams();
                        g !== this.clusterRadius && this.update()
                    },
                    setSortEnabled: function(t) {
                        var g = this.sortEnabled;
                        this.sortEnabled = null != t ? !!t : this.defaults.sortEnabled;
                        g !== this.sortEnabled && this.update()
                    },
                    setFilterEnabled: function(t) {
                        var g = this.filterEnabled;
                        this.filterEnabled = null != t ? !!t : this.defaults.filterEnabled;
                        g !== this.filterEnabled && this.update()
                    },
                    setBufferEnabled: function(t) {
                        var g = this.bufferEnabled;
                        this.bufferEnabled = null != t ? !!t : this.defaults.bufferEnabled;
                        g !== this.bufferEnabled && this.update()
                    },
                    setUpdateEnabled: function(t) {
                        var g = this.updateEnabled;
                        (this.updateEnabled = null != t ? !!t : this.defaults.updateEnabled) && g !== this.updateEnabled && (this._mapLevelChange = !0,
                        this.update())
                    },
                    setStatisticInfos: function(t) {
                        this.statisticInfos = t || [];
                        this.loaded && this._applyStatInfos(this.statisticInfos)
                    },
                    update: function() {
                        this.loaded && null == this._updateHandle && (this._updateHandle = a.setTimeout(this._update, a.priority.HIGH))
                    },
                    isUpdateScheduled: function() {
                        return null != this._updateHandle
                    },
                    index: function() {
                        this.loaded && null == this._indexHandle && (this._indexHandle = a.setTimeout(this._indexFeatures, a.priority.HIGH))
                    },
                    getCell: function(t) {
                        return this._cellIndex[t.length][t]
                    },
                    getCluster: function(t) {
                        var g;
                        w.some(this.clusters, function(q) {
                            -1 < w.indexOf(q.geohashes, t) && (g = q);
                            return !!g
                        });
                        return g
                    },
                    getCellsInCluster: function(t) {
                        var g = [];
                        w.forEach(t && t.geohashes, function(q) {
                            (q = this.getCell(q)) && g.push(q)
                        }, this);
                        return g
                    },
                    getFeaturesInCluster: function(t) {
                        var g = [];
                        t = this.getCellsInCluster(t);
                        w.forEach(t, function(q) {
                            Array.prototype.push.apply(g, q.features)
                        });
                        return g
                    },
                    toggleFeatureVisibility: function(t) {
                        this.index()
                    },
                    getCurrentLodStats: function() {
                        var t = this._globalIndex.lodStats;
                        return t && t[this.lod]
                    },
                    getNumFeatures: function() {
                        return this._globalIndex.numFeatures
                    },
                    getFullExtent: function() {
                        var t = this._globalIndex.fullExtent;
                        return t && Infinity !== t.xmin ? new h(t) : null
                    },
                    _load: function() {
                        this._displayFeatures(!1);
                        this._checkLoadStatus();
                        this.map.loaded || this._eventHandles.push(this.map.on("load", b.hitch(this, this._checkLoadStatus)));
                        this.layer.loaded || this._eventHandles.push(this.layer.on("load", b.hitch(this, this._checkLoadStatus)))
                    },
                    _checkLoadStatus: function() {
                        if (this.map.loaded && this.layer.loaded) {
                            if ("esriGeometryPoint" !== this.layer.geometryType)
                                var t = Error("GeohashAggregation is supported only for points");
                            else {
                                var g = this.map.spatialReference;
                                g.isWebMercator() || 4326 === g.wkid || (t = Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))
                            }
                            t ? (this.loadError = t,
                            this.emit("load-error", {
                                error: t
                            })) : (this.loaded = !0,
                            this.emit("load"))
                        }
                    },
                    _startup: function() {
                        this._evalUpdateStatus();
                        this.index();
                        this._processExtentChange();
                        this._eventHandles.push(this.layer.on("update-end", b.hitch(this, this.index)), this.layer.on("edits-complete", b.hitch(this, this.index)), this.layer.on("graphics-clear", b.hitch(this, this.index)), this.layer.on("suspend", b.hitch(this, this._evalUpdateStatus)), this.layer.on("resume", b.hitch(this, this._evalUpdateStatus)), this.map.on("extent-change", b.hitch(this, this._processExtentChange)))
                    },
                    _evalUpdateStatus: function() {
                        this.setUpdateEnabled(!this.layer.suspended)
                    },
                    _processExtentChange: function(t) {
                        this._mapLevelChange = !(!t || !t.levelChange);
                        this._evalClusterParams();
                        this.update()
                    },
                    _update: function() {
                        this._updateHandle = null;
                        if (this.updateEnabled) {
                            this.emit("update-start");
                            if (this.clustersEnabled) {
                                var t = this.map.geographicExtent;
                                if (t) {
                                    var g = this._getIntersectingCells(t);
                                    t = this._getClusters(g.cells, t);
                                    this.clusters = t.clusters;
                                    this._applyStatInfosToClusters();
                                    g = g.profile;
                                    t = t.profile;
                                    var q = g.total + t.total;
                                    g.total = this._getElapsedTime(g.total);
                                    t.total = this._getElapsedTime(t.total);
                                    var x = this._perfProfile.lastUpdate = {};
                                    x.cells = g;
                                    x.clusters = t;
                                    x.total = this._getElapsedTime(q)
                                }
                            } else
                                this.clusters = [],
                                this._perfProfile.lastUpdate = null;
                            g = this._indexUpdated;
                            this._indexUpdated = !1;
                            t = this._mapLevelChange;
                            this._mapLevelChange = !1;
                            this.emit("update-end", {
                                levelChange: this._levelChange,
                                mapLevelChange: t,
                                indexChange: g
                            })
                        }
                    },
                    _displayFeatures: function(t, g) {
                        var q = this.layer;
                        t = !t;
                        q.suspendGraphics(t);
                        !1 !== g && (t ? q.clearNodes() : q.redraw())
                    },
                    _indexFeatures: function() {
                        this._indexHandle = null;
                        var t = this._getTime();
                        this._initializeIndexing();
                        var g = 0
                          , q = this._globalIndex.fullExtent;
                        w.forEach(this.layer.graphics, function(z) {
                            if (z.visible) {
                                var u = z.geometry
                                  , p = this._getLngLat(u);
                                if (p) {
                                    var r = u.getCacheValue("_geohash");
                                    void 0 === r && (r = e.pointToGeohash(p),
                                    u.setCacheValue("_geohash", r || null))
                                }
                                r && (this._addGeohashToIndex(r, z, p),
                                g++,
                                this._updateExtent(q, p))
                            }
                        }, this);
                        this._applyStatInfosToIndex();
                        this._globalIndex.numFeatures = g;
                        for (var x = this._globalIndex.lodStats, v = 1; v <= this._maxGeohashLength; v++)
                            x[v] = this._getLODStats(v, g);
                        this._perfProfile.lastIndex.total = this._getElapsedTime(t, this._getTime());
                        this._perfProfile.lastIndex.numFeatures = g;
                        this._indexUpdated = !0;
                        this.emit("index-complete");
                        this.started || (this.started = !0,
                        this.emit("start"));
                        this.update()
                    },
                    _initializeIndexing: function() {
                        this._globalIndex = {
                            numFeatures: 0,
                            fullExtent: {
                                xmin: Infinity,
                                ymin: Infinity,
                                xmax: -Infinity,
                                ymax: -Infinity
                            },
                            lodStats: {}
                        };
                        for (var t = this._cellIndex = [], g = 1; g <= this._maxGeohashLength; g++)
                            t[g] = {}
                    },
                    _getLngLat: function(t) {
                        if (t) {
                            var g = t.getLongitude();
                            t = t.getLatitude();
                            t = null != g && null != t ? {
                                x: g,
                                y: t
                            } : null
                        }
                        return t
                    },
                    _addGeohashToIndex: function(t, g, q) {
                        for (var x = this._cellIndex, v = "", z = 0; z < this._maxGeohashLength; z++) {
                            v += t[z];
                            var u = x[v.length]
                              , p = u[v];
                            p || (p = u[v] = {
                                count: 0,
                                centroid: {
                                    x: null,
                                    y: null
                                },
                                extent: {
                                    xmin: Infinity,
                                    ymin: Infinity,
                                    xmax: -Infinity,
                                    ymax: -Infinity
                                },
                                features: [],
                                geohash: v,
                                statistics: null
                            });
                            this._updateItem(p, 1, q, !0);
                            p.features.push(g)
                        }
                    },
                    _getLODStats: function(t, g) {
                        var q = this._cellIndex[t], x = 0, v = Infinity, z = -Infinity, u = null, p;
                        for (p in q) {
                            var r = q[p];
                            x++;
                            r.count < v && (v = r.count);
                            r.count > z && (z = r.count)
                        }
                        0 < x && (u = Number((g / x).toFixed(2)));
                        return {
                            lod: t,
                            count: x,
                            min: Infinity === v ? null : v,
                            max: -Infinity === z ? null : z,
                            avg: u
                        }
                    },
                    _evalClusterParams: function() {
                        if (this.loaded && "auto" === this.clusterMode) {
                            var t = this._getClusterParams(this.map.getResolutionInMeters(), this.clusterRadius, this._minClusterRadius);
                            this._levelChange = this.lod !== t.lod;
                            this.lod = t.lod;
                            this.tolerance = t.tolerance
                        }
                    },
                    _getClusterParams: function(t, g, q) {
                        g < q && (g = q);
                        t = Math.ceil(t * g);
                        g = this._getClosestLODRange(t).max;
                        do
                            q = this._getCellSize(g),
                            (q = t >= this._cellSizeScaleFactor * q || 1 === q) || (g += 1);
                        while (!q);
                        q = t / this._getCellSize(g);
                        return {
                            lod: g,
                            tolerance: t,
                            multiplier: Number(q.toFixed(2))
                        }
                    },
                    _getClosestLODRange: function(t) {
                        for (var g, q = this._maxGeohashLength; 1 <= q; q--)
                            if (this._getCellSize(q) >= t) {
                                g = q;
                                break
                            }
                        null == g && (g = 1);
                        t = g + 1;
                        t > this._maxGeohashLength && (t = this._maxGeohashLength);
                        return {
                            min: g,
                            max: t
                        }
                    },
                    _getCellSize: function(t) {
                        t = e.getCellSizeInMeters(t);
                        return Math.ceil(Math.min(t.width, t.height))
                    },
                    _sorter: function(t, g) {
                        var q = t.centroid
                          , x = g.centroid;
                        return t.count > g.count ? -1 : t.count < g.count ? 1 : q.x > x.x ? -1 : q.x < x.x ? 1 : 0
                    },
                    _getIntersectingCells: function(t) {
                        var g = this._getTime();
                        this.bufferEnabled && (t = t.expand(this._extentScaleFactor));
                        var q = e.getIntersecting(t, this.lod, this.bufferEnabled ? this.tolerance : 0);
                        t = this._getTime();
                        var x = []
                          , v = this.tolerance
                          , z = this.sortEnabled;
                        w.forEach(q, function(u) {
                            (u = this.getCell(u)) && x.push(u)
                        }, this);
                        v && z && x.sort(this._sorter);
                        q = this._getTime();
                        return {
                            cells: x,
                            profile: {
                                findCells: this._getElapsedTime(g, t),
                                scanAndSortCells: this._getElapsedTime(t, q),
                                total: q - g
                            }
                        }
                    },
                    _getClusters: function(t, g) {
                        var q = this._getTime()
                          , x = []
                          , v = {}
                          , z = {
                            findCells: 0
                        };
                        w.forEach(t, function(u, p) {
                            (u = this._createCluster(u, v, z)) && x.push(u)
                        }, this);
                        this._markIntersecting(x, g);
                        this.filterEnabled && (x = this._getIntersectingClusters(x));
                        t = this._getTime();
                        return {
                            clusters: x,
                            profile: {
                                findCellsInCluster: this._getElapsedTime(z.findCells),
                                total: t - q
                            }
                        }
                    },
                    _markIntersecting: function(t, g) {
                        var q = g.normalize();
                        w.forEach(t, function(x) {
                            var v = x.centroid.x
                              , z = x.centroid.y;
                            x.isIntersecting = w.some(q, function(u) {
                                return v >= u.xmin && v <= u.xmax && z >= u.ymin && z <= u.ymax
                            })
                        })
                    },
                    _getIntersectingClusters: function(t) {
                        return w.filter(t, function(g) {
                            return g.isIntersecting
                        })
                    },
                    _createCluster: function(t, g, q) {
                        if (!g[t.geohash]) {
                            var x = [{
                                cell: t,
                                distance: 0
                            }];
                            if (this.tolerance) {
                                var v = this._getTime()
                                  , z = e.getNeighborsWithinDistance(t.centroid, this.lod, this.tolerance);
                                q.findCells += this._getTime() - v;
                                w.forEach(z, function(u) {
                                    if (u !== t.geohash && (u = this.getCell(u))) {
                                        var p = this._calculateDistance(t.centroid, u.centroid);
                                        p <= this.tolerance && x.push({
                                            cell: u,
                                            distance: p
                                        })
                                    }
                                }, this)
                            }
                            return this._mergeCells(x, g)
                        }
                    },
                    _calculateDistance: function(t, g) {
                        return f.getLength(e.geographicToWebMercator(t), e.geographicToWebMercator(g))
                    },
                    _mergeCells: function(t, g) {
                        var q = this._initializeCluster({}, t[0].cell.geohash);
                        w.forEach(t, function(x) {
                            var v = x.cell
                              , z = v.geohash;
                            x = x.distance;
                            var u = g[z];
                            if (u)
                                if (x < u.distance)
                                    this._removeCellFromCluster(z, g);
                                else
                                    return;
                            g[z] = {
                                cluster: q,
                                distance: x
                            };
                            this._updateItem(q, v.count, v.centroid);
                            q.geohashes.push(z)
                        }, this);
                        return q
                    },
                    _removeCellFromCluster: function(t, g) {
                        var q = g[t].cluster;
                        delete g[t];
                        t = w.indexOf(q.geohashes, t);
                        -1 < t && q.geohashes.splice(t, 1);
                        this._reevaluateCluster(q)
                    },
                    _reevaluateCluster: function(t) {
                        var g = t.geohashes;
                        t = this._initializeCluster(t, t.primary);
                        w.forEach(g, function(q) {
                            var x = this.getCell(q);
                            x && (this._updateItem(t, x.count, x.centroid),
                            t.geohashes.push(q))
                        }, this)
                    },
                    _initializeCluster: function(t, g) {
                        t.count = 0;
                        t.centroid = new k(null,null);
                        t.geohashes = [];
                        t.primary = g;
                        t.statistics = null;
                        return t
                    },
                    _applyStatInfos: function(t) {
                        t = this._getValidStatInfos(t);
                        this._applyStatInfosToIndex(t);
                        this._applyStatInfosToClusters(t)
                    },
                    _getValidStatInfos: function(t) {
                        var g = [];
                        w.forEach(t, function(q) {
                            var x = q.attributeInfo;
                            q = q.statisticType;
                            var v = "angle" === x.attributeType;
                            if (n.isSupportedStatisticType(q) && (!v || "avg" === q)) {
                                var z = "arithmetic" === x.rotationType;
                                g.push({
                                    attributeCache: c.createAttributeCache(x, "type" === q),
                                    identifier: n.getStatisticId(x, q),
                                    statFunctions: n.getStatisticFunctions(q),
                                    isAngular: v,
                                    isDate: "date" === x.attributeType,
                                    isArithmetic: z
                                })
                            }
                        });
                        return g
                    },
                    _applyStatInfosToIndex: function(t) {
                        t = t || this._getValidStatInfos(this.statisticInfos);
                        var g = this._cellIndex;
                        if (g)
                            for (var q = 1; q <= this._maxGeohashLength; q++) {
                                var x = g[q], v;
                                for (v in x)
                                    this._applyStatInfosToCell(x[v], t)
                            }
                    },
                    _applyStatInfosToCell: function(t, g) {
                        var q = this._initializeStats(t, g);
                        w.forEach(t.features, function(x) {
                            this._calcFeatureStats(x, g, q)
                        }, this);
                        this._summarizeStats(t, q, g)
                    },
                    _calcFeatureStats: function(t, g, q) {
                        t.attributes && w.forEach(g, function(x) {
                            var v = q[x.identifier]
                              , z = x.attributeCache;
                            z = z ? t._getDataValue(z.attributeInfo, z, d) : null;
                            x.statFunctions.updateCellStat(v, z, x)
                        })
                    },
                    _applyStatInfosToClusters: function(t) {
                        t = t || this._getValidStatInfos(this.statisticInfos);
                        var g = this._clusterFieldPrefix;
                        w.forEach(this.clusters, function(q) {
                            var x = this._initializeStats(q, t);
                            w.forEach(this.getCellsInCluster(q), function(v) {
                                this._calcCellStats(v, t, x)
                            }, this);
                            this._summarizeStats(q, x, t, g);
                            q.attributes[g + "id"] = q.primary
                        }, this)
                    },
                    _calcCellStats: function(t, g, q) {
                        var x = t.statistics;
                        w.forEach(g, function(v) {
                            var z = v.identifier;
                            v.statFunctions.updateClusterStat(q[z], x[z], v)
                        })
                    },
                    _initializeStats: function(t, g) {
                        var q = t.statistics = {};
                        w.forEach(g, function(x) {
                            q[x.identifier] = x.statFunctions.initialize(x)
                        });
                        return q
                    },
                    _summarizeStats: function(t, g, q, x) {
                        var v = t.attributes = {};
                        x = x || "";
                        v[x + "count"] = t.count;
                        w.forEach(q, function(z) {
                            var u = this._getStatFieldName(z, x);
                            v[u] = z.statFunctions.summarize(g[z.identifier], z)
                        }, this)
                    },
                    _getStatFieldName: function(t, g) {
                        return (g || "") + t.identifier
                    },
                    _updateItem: function(t, g, q, x) {
                        var v = q.y
                          , z = t.centroid
                          , u = t.count;
                        z.x = (u * z.x + g * q.x) / (u + g);
                        z.y = (u * z.y + g * v) / (u + g);
                        t.count += g;
                        x && this._updateExtent(t.extent, q)
                    },
                    _updateExtent: function(t, g) {
                        var q = g.x;
                        g = g.y;
                        q < t.xmin && (t.xmin = q);
                        q > t.xmax && (t.xmax = q);
                        g < t.ymin && (t.ymin = g);
                        g > t.ymax && (t.ymax = g)
                    },
                    _getTime: function() {
                        return window.performance ? window.performance.now() : (new Date).getTime()
                    },
                    _getElapsedTime: function(t, g) {
                        t = null != t && null != g ? g - t : t;
                        if (null != t) {
                            var q = "millisecond";
                            1E3 <= t && (t /= 1E3,
                            q = "second",
                            60 <= t && (t /= 60,
                            q = "minute"));
                            q = {
                                value: Number(t.toFixed(2)),
                                unit: q
                            }
                        }
                        return q
                    }
                });
                C("extend-esri") && b.setObject("layers.clustering.GeohashAggregation", y, m);
                return y
            })
        },
        "esri/core/timerUtils": function() {
            define([], function() {
                function C(l) {
                    var k, h = l.length;
                    for (k = 0; k < h; k++)
                        l[k]()
                }
                var y = {
                    LOW: 1,
                    HIGH: 2
                }, b, w = {};
                w[y.LOW] = [];
                w[y.HIGH] = [];
                var m = function() {
                    clearTimeout(b);
                    b = null;
                    var l = w[y.HIGH];
                    w[y.HIGH] = [];
                    C(l);
                    l = w[y.LOW];
                    w[y.LOW] = [];
                    C(l)
                };
                return {
                    priority: y,
                    callbackQueue: w,
                    setTimeout: function(l, k) {
                        l = [k, w[k].push(l) - 1];
                        b || (b = setTimeout(m, 0));
                        return l
                    },
                    clearTimeout: function(l) {
                        l && w[l[0]].splice(l[1], 1)
                    }
                }
            })
        },
        "esri/layers/clustering/geohashUtils": function() {
            define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "), function(C, y, b, w, m, l, k, h, f) {
                function d(J) {
                    var O = J.spatialReference;
                    if (!O)
                        return {
                            x: J.x,
                            y: J.y
                        };
                    var V = O.isWebMercator(), aa;
                    4326 === O.wkid ? aa = {
                        x: J.x,
                        y: J.y
                    } : V && (aa = {
                        x: J.getLongitude(),
                        y: J.getLatitude()
                    });
                    return aa
                }
                function a(J) {
                    var O = J.spatialReference, V = !(!O || !O.isWebMercator()), aa;
                    O && 4326 === O.wkid ? aa = new k(J.toJson()) : V && (aa = f.webMercatorToGeographic(J, !0));
                    return aa
                }
                function c(J, O) {
                    O.x = l.prototype._normalizeX(J.x, h.prototype._info[4326]);
                    O.y = J.y;
                    return O
                }
                function e(J) {
                    J = E.decimals[J].toString(2);
                    return y.pad(J, E.bitsPerBase32Char, "0")
                }
                function n(J, O) {
                    O = O.slice();
                    O.splice(1, 0, 0);
                    for (var V = O[0], aa = O[2], da = 0; da < J.length; da++) {
                        Number(J[da]) ? O[0] = O[1] : O[2] = O[1];
                        var ea = O[1] = (O[0] + O[2]) / 2;
                        V = O[0];
                        aa = O[2]
                    }
                    return {
                        value: ea,
                        min: V,
                        max: aa
                    }
                }
                function t(J, O, V) {
                    var aa = [];
                    O = O.slice();
                    O.splice(1, 0, 0);
                    for (var da = O[0], ea = O[2], Y = 0; Y < V; Y++)
                        J >= O[1] ? (O[0] = O[1],
                        da = 1) : (O[2] = O[1],
                        da = 0),
                        O[1] = (O[0] + O[2]) / 2,
                        aa.push(da),
                        da = O[0],
                        ea = O[2];
                    return {
                        value: aa.join(""),
                        min: da,
                        max: ea
                    }
                }
                function g(J) {
                    var O = J * E.bitsPerBase32Char;
                    0 === O % 2 ? J = O /= 2 : (J = (O + 1) / 2,
                    O -= J);
                    return {
                        lon: J,
                        lat: O
                    }
                }
                function q(J) {
                    var O = 0;
                    J = J.split("").reverse().join("");
                    for (var V = 0; V < J.length; V++)
                        O += Number(J[V]) * Math.pow(2, V);
                    return E.base32[O]
                }
                function x(J, O) {
                    var V = {
                        x: J.xmin,
                        y: J.ymax
                    }
                      , aa = {
                        x: J.xmax,
                        y: J.ymin
                    }
                      , da = {
                        x: J.xmax,
                        y: J.ymax
                    };
                    return {
                        sw: H.pointToGeohash({
                            x: J.xmin,
                            y: J.ymin
                        }, O),
                        nw: H.pointToGeohash(V, O),
                        se: H.pointToGeohash(aa, O),
                        ne: H.pointToGeohash(da, O)
                    }
                }
                function v(J, O, V, aa, da) {
                    var ea = J;
                    do
                        da[ea] || (da[ea] = !0,
                        aa.push(ea)),
                        (J = ea === O) || (ea = A(ea, V));
                    while (!J)
                }
                function z(J, O, V, aa) {
                    var da = x(J, O);
                    J = [];
                    v(da.sw, da.nw, "n", J, {});
                    O = [];
                    v(da.se, da.ne, "n", O, {});
                    for (da = 0; da < J.length; da++)
                        v(J[da], O[da], "e", V, aa)
                }
                function u(J) {
                    return w.filter(J, function(O) {
                        return 180 === O.xmax ? !0 : !1
                    })[0]
                }
                function p(J) {
                    return w.filter(J, function(O) {
                        return -180 === O.xmin ? !0 : !1
                    })[0]
                }
                function r(J, O, V, aa) {
                    var da = H.geographicToWebMercator(J);
                    J = {
                        x: da.x - O,
                        y: da.y - O
                    };
                    O = H.webMercatorToGeographic({
                        x: da.x + O,
                        y: da.y + O
                    }, !0);
                    J = H.webMercatorToGeographic(J, !0);
                    return new k(null != V ? V : J.x,J.y,null != aa ? aa : O.x,O.y)
                }
                function B(J, O, V, aa) {
                    J = x(J, O);
                    var da, ea;
                    "min" === aa ? ea = 180 : "max" === aa && (da = -180);
                    var Y = da;
                    aa = ea;
                    var ia = H.geohashToCell(J.sw).extent;
                    O = H.geohashToCell(J.ne).extent;
                    J = null != Y ? Y : ia.xmin;
                    ia = ia.ymin;
                    aa = null != aa ? aa : O.xmax;
                    O = O.ymax;
                    J = r({
                        x: J,
                        y: ia
                    }, V, da, ea);
                    V = r({
                        x: aa,
                        y: O
                    }, V, da, ea);
                    return new k(J.xmin,J.ymin,V.xmax,V.ymax)
                }
                function D(J, O, V) {
                    var aa = J
                      , da = 0;
                    do
                        da++,
                        (J = aa === O) || (aa = A(aa, V));
                    while (!J);
                    return da
                }
                function G(J, O) {
                    J = x(J, O);
                    O = D(J.nw, J.ne, "e");
                    return {
                        rows: D(J.nw, J.sw, "s"),
                        cols: O
                    }
                }
                function A(J, O) {
                    var V = J.length % 2
                      , aa = J.slice(-1)
                      , da = E.decimals[aa];
                    J = J.slice(0, -1);
                    -1 != E.borders[O][V].indexOf(aa) && J && (J = A(J, O));
                    return J + E.neighbors[O][V][da]
                }
                var E = {
                    base32: "0123456789bcdefghjkmnpqrstuvwxyz",
                    decimals: function() {
                        for (var J = {}, O = 0; 32 > O; O++)
                            J["0123456789bcdefghjkmnpqrstuvwxyz"[O]] = O;
                        return J
                    }(),
                    neighbors: {
                        n: [null, "238967debc01fg45kmstqrwxuvhjyznp"],
                        s: [null, "bc01fg45238967deuvhjyznpkmstqrwx"],
                        e: [null, "14365h7k9dcfesgujnmqp0r2twvyx8zb"],
                        w: [null, "p0r21436x8zb9dcf5h7kjnmqesgutwvy"]
                    },
                    borders: {
                        n: [null, "bcfguvyz"],
                        s: [null, "0145hjnp"],
                        e: [null, "prxz"],
                        w: [null, "028b"]
                    },
                    bitsPerBase32Char: 5,
                    maxGeohashLength: 12,
                    longitudeRange: [-180, 180],
                    latitudeRange: [-90, 90]
                };
                E.neighbors.n[0] = "14365h7k9dcfesgujnmqp0r2twvyx8zb";
                E.neighbors.s[0] = "p0r21436x8zb9dcf5h7kjnmqesgutwvy";
                E.neighbors.e[0] = "238967debc01fg45kmstqrwxuvhjyznp";
                E.neighbors.w[0] = "bc01fg45238967deuvhjyznpkmstqrwx";
                E.borders.n[0] = "prxz";
                E.borders.s[0] = "028b";
                E.borders.e[0] = "bcfguvyz";
                E.borders.w[0] = "0145hjnp";
                var H = {
                    geographicToWebMercator: function(J) {
                        J = l.lngLatToXY(J.x, J.y);
                        return {
                            x: J[0],
                            y: J[1]
                        }
                    },
                    webMercatorToGeographic: function(J, O) {
                        J = l.xyToLngLat(J.x, J.y, O);
                        return {
                            x: J[0],
                            y: J[1]
                        }
                    },
                    geohashToCell: function(J) {
                        var O;
                        var V = [];
                        for (O = 0; O < J.length; O++)
                            V.push(e(J[O]));
                        V = V.join("");
                        O = [];
                        for (var aa = [], da = 0; da < V.length; da++)
                            0 === da % 2 ? O.push(V[da]) : aa.push(V[da]);
                        O = O.join("");
                        aa = aa.join("");
                        O = [O, aa];
                        V = n(O[0], E.longitudeRange);
                        aa = n(O[1], E.latitudeRange);
                        O = V.value;
                        return {
                            point: {
                                x: O,
                                y: aa.value
                            },
                            extent: {
                                xmin: V.min,
                                xmax: V.max,
                                ymin: aa.min,
                                ymax: aa.max
                            },
                            geohash: J
                        }
                    },
                    pointToCell: function(J, O) {
                        O = O || E.maxGeohashLength;
                        if (J = d(J)) {
                            J = c(J, J);
                            var V = g(O);
                            O = t(J.x, E.longitudeRange, V.lon);
                            var aa = t(J.y, E.latitudeRange, V.lat);
                            V = O.value;
                            var da = aa.value;
                            O = {
                                xmin: O.min,
                                xmax: O.max,
                                ymin: aa.min,
                                ymax: aa.max
                            };
                            aa = [];
                            for (var ea = Math.ceil((V.length + da.length) / E.bitsPerBase32Char), Y = 0, ia = 0, qa = 0; qa < ea * E.bitsPerBase32Char; qa++) {
                                var wa = 0 === qa % 2 ? V[Y++] : da[ia++];
                                null == wa && (wa = 0);
                                aa.push(wa)
                            }
                            V = aa.join("");
                            da = E.bitsPerBase32Char;
                            aa = V.length / da;
                            ea = [];
                            for (Y = 0; Y < aa; Y++)
                                ia = V.substr(Y * da, da),
                                ea.push(q(ia));
                            V = ea.join("");
                            return {
                                point: J,
                                extent: O,
                                geohash: V
                            }
                        }
                    },
                    geohashToPoint: function(J) {
                        return H.geohashToCell(J).point
                    },
                    pointToGeohash: function(J, O) {
                        return (J = H.pointToCell(J, O)) && J.geohash
                    },
                    getCells: function(J) {
                        return w.map(J, function(O) {
                            return H.geohashToCell(O)
                        })
                    },
                    getCellSize: function(J) {
                        var O = E.longitudeRange
                          , V = E.latitudeRange;
                        O = Math.abs(O[1] - O[0]);
                        V = Math.abs(V[1] - V[0]);
                        J = g(J || 1);
                        return {
                            width: O / Math.pow(2, J.lon),
                            height: V / Math.pow(2, J.lat)
                        }
                    },
                    getCellSizeInMeters: function(J) {
                        J = H.getCellSize(J);
                        var O = f.metersPerDegree;
                        J.width *= O;
                        J.height *= O;
                        return J
                    },
                    getIntersecting: function(J, O, V) {
                        O = O || 1;
                        V = V || 0;
                        var aa = []
                          , da = a(J);
                        if (da) {
                            V && (da = H.expandExtent(J, O, V));
                            J = da.normalize();
                            var ea = {};
                            w.forEach(J, function(Y) {
                                z(Y, O, aa, ea)
                            })
                        }
                        return aa
                    },
                    countIntersecting: function(J, O, V) {
                        O = O || 1;
                        V = V || 0;
                        var aa = 0
                          , da = a(J);
                        if (da) {
                            V && (da = H.expandExtent(J, O, V));
                            J = da.normalize();
                            if (2 === J.length) {
                                aa = u(J);
                                da = p(J);
                                V = G(aa, O);
                                var ea = G(da, O);
                                J = V.rows;
                                V = V.cols + ea.cols;
                                aa = {
                                    x: aa.xmin,
                                    y: aa.ymax
                                };
                                da = {
                                    x: da.xmax,
                                    y: da.ymax
                                };
                                aa = c(aa, {});
                                da = c(da, {});
                                aa = H.pointToGeohash(aa, O);
                                O = H.pointToGeohash(da, O);
                                aa === O && V--;
                                O = {
                                    rows: J,
                                    cols: V
                                }
                            } else
                                O = G(J[0], O);
                            aa = O.cols * O.rows
                        }
                        return aa
                    },
                    getChildren: function(J) {
                        J = J || "";
                        var O = [], V;
                        for (V in E.decimals)
                            O.push(J + V);
                        return O
                    },
                    getNeighbors: function(J) {
                        var O = A(J, "n")
                          , V = A(J, "s");
                        return [O, A(O, "e"), A(O, "w"), V, A(V, "e"), A(V, "w"), A(J, "e"), A(J, "w")]
                    },
                    getExtentFromDistance: function(J, O) {
                        O = O || 1E3;
                        var V;
                        (J = d(J)) && (V = r(J, O));
                        return V
                    },
                    expandExtent: function(J, O, V) {
                        O = O || 1;
                        V = V || 0;
                        if (J = a(J)) {
                            if (V) {
                                J = J.normalize();
                                if (2 === J.length) {
                                    var aa = V;
                                    V = u(J);
                                    J = p(J);
                                    V = B(V, O, aa, "min");
                                    J = B(J, O, aa, "max");
                                    360 <= V.getWidth() + J.getWidth() ? (O = -180,
                                    J = 180) : (O = V.xmin,
                                    J = J.xmax);
                                    return new k(O,V.ymin,J,V.ymax)
                                }
                                return B(J[0], O, V)
                            }
                            return J
                        }
                    },
                    getNeighborsWithinDistance: function(J, O, V) {
                        V = V || 1E3;
                        O = O || 1;
                        var aa = [];
                        if (J = d(J)) {
                            V = r(J, V).normalize();
                            var da = {};
                            w.forEach(V, function(ea) {
                                z(ea, O, aa, da)
                            })
                        }
                        return aa
                    }
                };
                C("extend-esri") && b.setObject("layers.clustering.geohashUtils", H, m);
                return H
            })
        },
        "esri/layers/clustering/statUtils": function() {
            define(["dojo/_base/lang", "../support/attributeUtils"], function(C, y) {
                function b(l) {
                    return "number" === typeof l && !isNaN(l) && Infinity !== l && -Infinity !== l
                }
                var w = {
                    sum: {
                        initialize: function() {
                            return {
                                count: 0,
                                sum: null
                            }
                        },
                        updateCellStat: function(l, k) {
                            b(k) && (l.count++,
                            l.sum += k)
                        },
                        updateClusterStat: function(l, k) {
                            k.count && (l.count += k.count,
                            l.sum += k.sum)
                        },
                        summarize: function(l) {
                            return l.sum
                        }
                    },
                    avg: {
                        initialize: function(l) {
                            return {
                                count: 0,
                                sum: null,
                                avg: null,
                                sum_cosine: null,
                                sum_sine: null
                            }
                        },
                        updateCellStat: function(l, k, h) {
                            b(k) && (l.count++,
                            h.isAngular ? (h.isArithmetic || (k = -1 * k + 90),
                            l.sum_cosine += Math.cos(k * Math.PI / 180),
                            l.sum_sine += Math.sin(k * Math.PI / 180)) : l.sum += k)
                        },
                        updateClusterStat: function(l, k, h) {
                            k.count && (l.count += k.count,
                            h.isAngular ? (l.sum_cosine += k.sum_cosine,
                            l.sum_sine += k.sum_sine) : l.sum += k.sum)
                        },
                        summarize: function(l, k) {
                            if (0 < l.count) {
                                var h = l.count;
                                k.isAngular ? (h = 180 * Math.atan2(l.sum_sine / h, l.sum_cosine / h) / Math.PI,
                                k.isArithmetic || (h = -1 * (h - 90)),
                                l.avg = 0 > h ? h + 360 : h) : (l.avg = l.sum / h,
                                k.isDate && (l.avg = Math.ceil(l.avg)))
                            }
                            return l.avg
                        }
                    },
                    type: {
                        initialize: function() {
                            return {
                                uvInfos: {}
                            }
                        },
                        updateCellStat: function(l, k) {
                            if (null == k || "" === k || "string" === typeof k && "" === C.trim(k))
                                k = null;
                            l = l.uvInfos;
                            null == l[k] ? l[k] = {
                                count: 1,
                                value: k
                            } : l[k].count++
                        },
                        updateClusterStat: function(l, k) {
                            l = l.uvInfos;
                            k = k.uvInfos;
                            for (var h in k) {
                                var f = k[h];
                                null == l[h] ? l[h] = {
                                    count: f.count,
                                    value: f.value
                                } : l[h].count += f.count
                            }
                        },
                        summarize: function(l) {
                            l = l.uvInfos;
                            var k, h = -Infinity;
                            for (k in l) {
                                var f = l[k];
                                if (f.count > h) {
                                    h = f.count;
                                    var d = f.value
                                } else
                                    f.count === h && (d = null)
                            }
                            return d
                        }
                    }
                }
                  , m = {
                    isSupportedStatisticType: function(l) {
                        return w.hasOwnProperty(l)
                    },
                    getStatisticFunctions: function(l) {
                        return w[l]
                    },
                    getStatisticId: function(l, k) {
                        var h = y.getAttributeIdSource(l);
                        l = h && y.getAttributeId(h) || l.field;
                        return k + "_" + l
                    },
                    getClusterField: function(l, k) {
                        return "cluster_" + m.getStatisticId(l, k)
                    },
                    getStatisticHash: function(l, k) {
                        k = [m.getStatisticId(l, k)];
                        l.attributeType && k.push(l.attributeType.toLowerCase());
                        l.rotationType && k.push(l.rotationType.toLowerCase());
                        return k.join("_")
                    }
                };
                return m
            })
        },
        "esri/dijit/Attribution": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry ../kernel ../lang ../SpatialReference ../geometry/webMercatorUtils ../geometry/Extent".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x) {
                C = C(null, {
                    declaredClass: "esri.dijit.Attribution",
                    itemDelimiter: " | ",
                    listClass: "esriAttributionList",
                    itemClass: "esriAttributionItem",
                    lastItemClass: "esriAttributionLastItem",
                    delimiterClass: "esriAttributionDelim",
                    constructor: function(v, z) {
                        try {
                            y.mixin(this, v);
                            this._attributions = {};
                            this._pendingDfds = {};
                            this._activeLayers = [];
                            this._sharedLayers = [];
                            this._layerHandles = {};
                            var u = this.domNode = h.byId(z)
                              , p = this.map
                              , r = "\x3cspan class\x3d'" + this.listClass + "'\x3e\x3c/span\x3e";
                            u && (f.set(u, "innerHTML", r),
                            this.listNode = m.query(".esriAttributionList", u)[0],
                            this.itemNodes = {});
                            this._eventConnections = [w.connect(p, "onLayerAdd", this, this._onLayerAdd), w.connect(p, "onLayerRemove", this, this._onLayerRemove), w.connect(p, "onLayerSuspend", this, this._onLayerSuspend), w.connect(p, "onLayerResume", this, this._onLayerResume), w.connect(p, "onResize", this, this._adjustFocus), w.connect(p, "onExtentChange", this, this._onExtentChange)];
                            if (p.loaded) {
                                var B = p.layerIds.concat(p.graphicsLayerIds), D, G = B.length;
                                for (D = 0; D < G; D++) {
                                    var A = p.getLayer(B[D]);
                                    A.loaded && this._onLayerAdd(A)
                                }
                            }
                        } catch (E) {}
                    },
                    startup: function() {},
                    destroy: function() {
                        b.forEach(this._eventConnections, w.disconnect);
                        d.destroy(this.listNode);
                        var v = this._layerHandles, z;
                        for (z in v)
                            v[z] && v[z].remove();
                        this.map = this.domNode = this._eventConnections = this.listNode = this._attributions = this._pendingDfds = this.itemNodes = this._activeLayers = this._lastItem = this._sharedLayers = this._layerHandles = null
                    },
                    _onLayerAdd: function(v) {
                        try {
                            var z = this._attributions
                              , u = v.id;
                            if (!t.isDefined(z[u]) && v.showAttribution) {
                                if (v.hasAttributionData) {
                                    var p = v.getAttributionData();
                                    this._pendingDfds[u] = 1;
                                    z[u] = p;
                                    p.addBoth(y.partial(this._onAttributionLoad, this, v))
                                } else
                                    z[u] = v.copyright || v.copyrightText || "",
                                    z[u] ? (v.suspended || this._activeLayers.push(u),
                                    this._createNode(u)) : this._onLayerRemove(v);
                                -1 < v.declaredClass.toLowerCase().indexOf("vetiledlayer") && (this._layerHandles[u] = v.on("map-style-change", y.hitch(this, function() {
                                    this._onLayerRemove(v);
                                    this._onLayerAdd(v)
                                })))
                            }
                        } catch (r) {}
                    },
                    _onAttributionLoad: function(v, z, u) {
                        var p = v._attributions
                          , r = v._pendingDfds
                          , B = z.id;
                        if (r && r[B]) {
                            delete r[B];
                            if (!u || u instanceof Error)
                                u = "";
                            p[B] = u ? v._createIndexByLevel(u, -1 !== z.declaredClass.toLowerCase().indexOf("vetiledlayer")) : z.copyright || z.copyrightText || "";
                            p[B] ? (z.suspended || v._activeLayers.push(B),
                            v._createNode(B)) : v._onLayerRemove(z)
                        }
                    },
                    _onLayerRemove: function(v) {
                        try {
                            var z = v.id
                              , u = this.itemNodes
                              , p = -1;
                            this._onLayerSuspend(v);
                            this._layerHandles[z] && this._layerHandles[z].remove();
                            delete this._attributions[z];
                            delete this._pendingDfds[z];
                            delete this._layerHandles[z];
                            var r = this._getGroupIndex(z);
                            -1 !== r && (p = b.indexOf(this._sharedLayers[r], z),
                            -1 !== p && (this._sharedLayers[r].splice(p, 1),
                            1 >= this._sharedLayers[r].length && this._sharedLayers.splice(r, 1)));
                            u[z] && -1 === p && d.destroy(u[z]);
                            delete u[z];
                            this._updateLastItem()
                        } catch (B) {}
                    },
                    _onLayerSuspend: function(v) {
                        try {
                            var z = v.id;
                            if (this._attributions[z]) {
                                var u = b.indexOf(this._activeLayers, z)
                                  , p = this.itemNodes[z];
                                -1 !== u && this._activeLayers.splice(u, 1);
                                p && this._toggleItem(p, !1, this._getGroupIndex(z))
                            }
                        } catch (r) {}
                    },
                    _adjustFocus: function() {
                        var v = this.domNode.scrollWidth > this.domNode.clientWidth
                          , z = c.contains(this.domNode, "esriAttributionOpen");
                        f.set(this.domNode, "tabIndex", v || z ? "0" : "")
                    },
                    _onLayerResume: function(v) {
                        try {
                            var z = v.id
                              , u = this._attributions[z]
                              , p = this.itemNodes[z];
                            if (u && (-1 === b.indexOf(this._activeLayers, z) && this._activeLayers.push(z),
                            p)) {
                                var r = y.isString(u) ? u : this._getContributorsList(u, this.map.extent, this.map.getLevel());
                                y.isString(u) || f.set(p, "innerHTML", r ? r + this._getDelimiter() : "");
                                r && this._toggleItem(p, !0, this._getGroupIndex(z))
                            }
                        } catch (B) {}
                    },
                    _onExtentChange: function(v, z, u, p) {
                        try {
                            var r = this._activeLayers, B = this._attributions, D = this.itemNodes, G, A, E = r.length || 0;
                            for (A = 0; A < E; A++) {
                                var H = r[A];
                                var J = B[H];
                                if ((G = D[H]) && !y.isString(J)) {
                                    var O = this._getContributorsList(J, v, p ? p.level : -1);
                                    f.set(G, "innerHTML", O ? O + this._getDelimiter() : "");
                                    this._toggleItem(G, !!O, -1)
                                }
                            }
                        } catch (V) {}
                        this._adjustCursorStyle()
                    },
                    _createNode: function(v) {
                        if (this.domNode) {
                            var z = this._checkShareInfo(v)
                              , u = z && z.sharedWith;
                            u = u && this.itemNodes[u];
                            var p = this.map
                              , r = this._attributions[v];
                            r = y.isString(r) ? r : this._getContributorsList(r, p.extent, p.getLevel());
                            p = !!r && !p.getLayer(v).suspended;
                            u ? (this.itemNodes[v] = u,
                            this._toggleItem(u, p, z.index)) : (v = this.itemNodes[v] = d.create("span", {
                                "class": this.itemClass,
                                innerHTML: r ? r + this._getDelimiter() : "",
                                style: {
                                    display: p ? "inline" : "none"
                                }
                            }, this.listNode),
                            p && this._setLastItem(v));
                            this._adjustCursorStyle()
                        }
                    },
                    _checkShareInfo: function(v) {
                        var z = this._attributions, u, p = -1, r = z[v];
                        if (r && y.isString(r)) {
                            for (u in z) {
                                var B = z[u];
                                if (u !== v && B && y.isString(B) && B.length === r.length && B.toLowerCase() === r.toLowerCase()) {
                                    var D = u;
                                    break
                                }
                            }
                            z = this._sharedLayers;
                            B = z.length;
                            if (D) {
                                for (u = 0; u < B; u++)
                                    if (r = z[u],
                                    -1 !== b.indexOf(r, D)) {
                                        p = u;
                                        r.push(v);
                                        break
                                    }
                                -1 === p && (p = z.push([D, v]) - 1)
                            }
                        }
                        return -1 < p ? {
                            index: p,
                            sharedWith: D
                        } : null
                    },
                    _getGroupIndex: function(v) {
                        var z = this._sharedLayers, u, p = z.length, r = -1;
                        for (u = 0; u < p; u++)
                            if (-1 !== b.indexOf(z[u], v)) {
                                r = u;
                                break
                            }
                        return r
                    },
                    _getDelimiter: function() {
                        var v = this.itemDelimiter;
                        return v ? "\x3cspan class\x3d'" + this.delimiterClass + "'\x3e" + v + "\x3c/span\x3e" : ""
                    },
                    _toggleItem: function(v, z, u) {
                        if (-1 < u && !z) {
                            u = this._sharedLayers[u];
                            var p, r = u.length, B = this._activeLayers;
                            for (p = 0; p < r; p++)
                                if (-1 !== b.indexOf(B, u[p]))
                                    return
                        }
                        a.set(v, "display", z ? "inline" : "none");
                        this._updateLastItem()
                    },
                    _updateLastItem: function() {
                        var v = this.listNode.childNodes;
                        var z = v.length;
                        if (z)
                            for (--z; 0 <= z; z--) {
                                var u = v[z];
                                if ("none" !== a.get(u, "display")) {
                                    this._setLastItem(u);
                                    break
                                }
                            }
                        this._adjustCursorStyle()
                    },
                    _setLastItem: function(v) {
                        var z = this.itemClass
                          , u = this.lastItemClass;
                        this._lastItem && c.replace(this._lastItem, z, u);
                        v && (c.replace(v, u, z),
                        this._lastItem = v)
                    },
                    _createIndexByLevel: function(v, z) {
                        v = v.contributors;
                        var u, p, r = v ? v.length : 0, B, D = new g(4326), G = {};
                        for (p = 0; p < r; p++) {
                            var A = v[p];
                            var E = (u = A.coverageAreas) ? u.length : 0;
                            for (B = 0; B < E; B++) {
                                var H = u[B];
                                var J = H.bbox;
                                J = {
                                    extent: q.geographicToWebMercator(new x(J[1],J[0],J[3],J[2],D)),
                                    attribution: A.attribution || "",
                                    zoomMin: H.zoomMin - (z && H.zoomMin ? 1 : 0),
                                    zoomMax: H.zoomMax - (z && H.zoomMax ? 1 : 0),
                                    score: t.isDefined(H.score) ? H.score : 100,
                                    objectId: p
                                };
                                for (H = J.zoomMin; H <= J.zoomMax; H++)
                                    G[H] = G[H] || [],
                                    G[H].push(J)
                            }
                        }
                        return G
                    },
                    _getContributorsList: function(v, z, u) {
                        var p = "";
                        if (z && t.isDefined(u) && -1 < u) {
                            v = v[u];
                            u = z.getCenter().normalize();
                            var r = v ? v.length : 0
                              , B = []
                              , D = {};
                            for (p = 0; p < r; p++)
                                z = v[p],
                                !D[z.objectId] && z.extent.contains(u) && (D[z.objectId] = 1,
                                B.push(z));
                            B.sort(function(G, A) {
                                return A.score - G.score || G.objectId - A.objectId
                            });
                            r = B.length;
                            for (p = 0; p < r; p++)
                                B[p] = B[p].attribution;
                            p = B.join(", ")
                        }
                        return p
                    },
                    _adjustCursorStyle: function() {
                        var v = e.position(this.listNode.parentNode, !0).h;
                        c.contains(this.listNode.parentNode, "esriAttributionOpen") ? (c.remove(this.listNode.parentNode, "esriAttributionOpen"),
                        v > e.position(this.listNode.parentNode, !0).h ? (a.set(this.listNode.parentNode, "cursor", "pointer"),
                        c.add(this.listNode.parentNode, "esriAttributionOpen")) : a.set(this.listNode.parentNode, "cursor", "default")) : (c.add(this.listNode.parentNode, "esriAttributionOpen"),
                        v < e.position(this.listNode.parentNode, !0).h ? a.set(this.listNode.parentNode, "cursor", "pointer") : a.set(this.listNode.parentNode, "cursor", "default"),
                        c.remove(this.listNode.parentNode, "esriAttributionOpen"));
                        this._adjustFocus()
                    }
                });
                l("extend-esri") && y.setObject("dijit.Attribution", C, n);
                return C
            })
        },
        "esri/arcgis/utils": function() {
            define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t, g, q, x, v, z, u, p, r, B, D, G, A, E, H, J, O, V, aa) {
                function da(P) {
                    return !(!P || "BingMapsAerial" !== P.layerType && "BingMapsAerial" !== P.type)
                }
                function ea(P) {
                    return !(!P || "BingMapsRoad" !== P.layerType && "BingMapsRoad" !== P.type)
                }
                function Y(P) {
                    return da(P) || ea(P) || !(!P || "BingMapsHybrid" !== P.layerType && "BingMapsHybrid" !== P.type)
                }
                function ia(P) {
                    return !(!P || "OpenStreetMap" !== P.layerType && "OpenStreetMap" !== P.type)
                }
                function qa(P) {
                    return !!(P && P.url && (-1 < "ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(P.layerType) || !P.layerType && !P.type))
                }
                function wa(P) {
                    return q({
                        url: rb.arcgisUrl + "/" + P.itemId + "/data",
                        content: {
                            f: "json"
                        },
                        callbackParamName: "callback"
                    }, {
                        disableIdentityLookup: !0,
                        _preLookup: !0
                    })
                }
                function K(P, Fa) {
                    var Ba = {
                        f: "json"
                    };
                    Fa && (Ba.token = Fa);
                    return q({
                        url: P,
                        content: Ba,
                        callbackParamName: "callback"
                    }, {
                        disableIdentityLookup: !0
                    })
                }
                function Z(P) {
                    !P.layerDefinition || P.layerDefinition.drawingInfo && P.layerDefinition.drawingInfo.labelingInfo || (P.showLabels = !1);
                    P.itemProperties.layerDefinition && (P.layerDefinition ? (P.layerDefinition.drawingInfo || (P.layerDefinition.drawingInfo = P.itemProperties.layerDefinition.drawingInfo),
                    g.isDefined(P.layerDefinition.definitionExpression) || (P.layerDefinition.definitionExpression = P.itemProperties.layerDefinition.definitionExpression),
                    g.isDefined(P.layerDefinition.minScale) || (P.layerDefinition.minScale = P.itemProperties.layerDefinition.minScale),
                    g.isDefined(P.layerDefinition.maxScale) || (P.layerDefinition.maxScale = P.itemProperties.layerDefinition.maxScale)) : P.layerDefinition = P.itemProperties.layerDefinition);
                    !P.itemProperties.popupInfo || P.popupInfo || P.disablePopup || (P.popupInfo = P.itemProperties.popupInfo);
                    g.isDefined(P.itemProperties.showLabels) && !g.isDefined(P.showLabels) && (P.showLabels = P.itemProperties.showLabels);
                    g.isDefined(P.itemProperties.showLegend) && !g.isDefined(P.showLegend) && (P.showLegend = P.itemProperties.showLegend);
                    g.isDefined(P.itemProperties.refreshInterval) && !g.isDefined(P.refreshInterval) && (P.refreshInterval = P.itemProperties.refreshInterval)
                }
                function pa(P) {
                    Z(P);
                    P.itemProperties.layerDefinition && P.layerDefinition && (!g.isDefined(P.layerDefinition.maximumTrackPoints) && g.isDefined(P.itemProperties.layerDefinition.maximumTrackPoints) && (P.layerDefinition.maximumTrackPoints = P.itemProperties.layerDefinition.maximumTrackPoints),
                    !P.layerDefinition.definitionGeometry && P.itemProperties.layerDefinition.definitionGeometry && (P.layerDefinition.definitionGeometry = P.itemProperties.layerDefinition.definitionGeometry));
                    P.itemProperties.purgeOptions && !P.purgeOptions && (P.purgeOptions = P.itemProperties.purgeOptions)
                }
                function L(P, Fa) {
                    var Ba = new m;
                    Fa = P.itemData;
                    var ua = []
                      , za = [];
                    b.forEach(Fa.operationalLayers, function(Ia) {
                        if (Ia.itemId && qa(Ia)) {
                            var Ga = Ia.url.toLowerCase();
                            -1 < Ga.indexOf("/featureserver") || -1 < Ga.indexOf("/mapserver/") ? (za.push(Ia),
                            ua.push(wa(Ia))) : -1 < Ga.indexOf("/mapserver") && -1 === Ga.indexOf("/mapserver/") && (!Ia.layers || !g.isDefined(Ia.minScale) && !g.isDefined(Ia.maxScale)) ? (za.push(Ia),
                            ua.push(wa(Ia))) : -1 < Ga.indexOf("/imageserver") ? (za.push(Ia),
                            ua.push(wa(Ia))) : -1 < Ga.indexOf("/streamserver") && (za.push(Ia),
                            ua.push(wa(Ia)))
                        }
                    });
                    Fa.baseMap && Fa.baseMap.baseMapLayers && b.forEach(Fa.baseMap.baseMapLayers, function(Ia) {
                        Ia.itemId && "VectorTileLayer" !== Ia.layerType && (za.push(Ia),
                        ua.push(wa(Ia)))
                    });
                    if (0 < ua.length) {
                        var Ka = {};
                        (new f(ua)).addCallback(function(Ia) {
                            b.forEach(za, function(Ga, La) {
                                if ((La = Ia[La][1]) && !(La instanceof Error) && (Ka[Ga.itemId] = La,
                                qa(Ga))) {
                                    var Sa = Ga.url.toLowerCase();
                                    (-1 < Sa.indexOf("/featureserver") || -1 < Sa.indexOf("/mapserver/")) && La.layers ? b.forEach(La.layers, function(Wa) {
                                        var $a = "/featureserver/" + Wa.id;
                                        ($a = Sa.match($a + "$") == $a) || ($a = "/mapserver/" + Wa.id,
                                        $a = Sa.match($a + "$") == $a);
                                        $a && (Ga.itemProperties = Wa,
                                        Z(Ga))
                                    }) : -1 < Sa.indexOf("/streamserver") ? (Ga.itemProperties = La,
                                    pa(Ga)) : -1 < Sa.indexOf("/mapserver") ? (La.layers && !Ga.layers && (Ga.layers = La.layers),
                                    g.isDefined(La.minScale) && !g.isDefined(Ga.minScale) && (Ga.minScale = La.minScale),
                                    g.isDefined(La.maxScale) && !g.isDefined(Ga.maxScale) && (Ga.maxScale = La.maxScale),
                                    g.isDefined(La.refreshInterval) && !g.isDefined(Ga.refreshInterval) && (Ga.refreshInterval = La.refreshInterval),
                                    La.visibleLayers && !Ga.visibleLayers && (Ga.visibleLayers = La.visibleLayers)) : -1 < Sa.indexOf("/imageserver") && (g.isDefined(La.minScale) && !g.isDefined(Ga.minScale) && (Ga.minScale = La.minScale),
                                    g.isDefined(La.maxScale) && !g.isDefined(Ga.maxScale) && (Ga.maxScale = La.maxScale),
                                    g.isDefined(La.refreshInterval) && !g.isDefined(Ga.refreshInterval) && (Ga.refreshInterval = La.refreshInterval),
                                    !La.popupInfo || Ga.popupInfo || Ga.disablePopup || (Ga.popupInfo = La.popupInfo),
                                    La.renderingRule && !Ga.renderingRule && (Ga.renderingRule = La.renderingRule,
                                    La.renderingRule.functionName && (Ga.renderingRule.rasterFunction = La.renderingRule.functionName)),
                                    La.bandIds && !Ga.bandIds && (Ga.bandIds = La.bandIds),
                                    La.mosaicRule && !Ga.mosaicRule && (Ga.mosaicRule = La.mosaicRule),
                                    La.format && !Ga.format && (Ga.format = La.format),
                                    g.isDefined(La.compressionQuality) && !g.isDefined(Ga.compressionQuality) && (Ga.compressionQuality = La.compressionQuality),
                                    !La.layerDefinition || !La.layerDefinition.definitionExpression || g.isDefined(Ga.layerDefinition) && g.isDefined(Ga.layerDefinition.definitionExpression) || (Ga.layerDefinition = Ga.layerDefinition || {},
                                    Ga.layerDefinition.definitionExpression = La.layerDefinition.definitionExpression),
                                    La = y.getObject("layerDefinition.drawingInfo.renderer", !1, La),
                                    null == y.getObject("layerDefinition.drawingInfo.renderer", !1, Ga) && null != La && (Ga.layerDefinition = Ga.layerDefinition || {},
                                    Ga.layerDefinition.drawingInfo = Ga.layerDefinition.drawingInfo || {},
                                    Ga.layerDefinition.drawingInfo.renderer = La))
                                }
                            });
                            P.relatedItemsData = Ka;
                            Ba.callback(P)
                        })
                    } else
                        Ba.callback(P);
                    return Ba
                }
                function R(P, Fa) {
                    var Ba = new m
                      , ua = P.itemData
                      , za = ua.baseMap.baseMapLayers[0];
                    if (Y(za))
                        if (za.portalUrl && e.id)
                            delete Fa.bingMapsKey,
                            e.id.checkSignInStatus(z.urlToObject(rb.arcgisUrl).path).then(y.hitch(null, function(Ia, Ga, La, Sa, Wa) {
                                K(za.portalUrl, Wa.token).then(y.hitch(null, na, Ia, Ga, La, Sa), y.hitch(null, ta, Ia, Ga, La, Sa))
                            }, P, Fa, ua, Ba), y.hitch(null, function(Ia, Ga, La, Sa, Wa) {
                                K(za.portalUrl).then(y.hitch(null, na, Ia, Ga, La, Sa), y.hitch(null, ta, Ia, Ga, La, Sa))
                            }, P, Fa, ua, Ba));
                        else if (Fa.bingMapsKey) {
                            var Ka = new Eb({
                                bingMapsKey: Fa.bingMapsKey,
                                mapStyle: Eb.MAP_STYLE_AERIAL
                            });
                            w.connect(Ka, "onLoad", y.hitch(this, function() {
                                Ba.callback([P, Fa])
                            }));
                            w.connect(Ka, "onError", function(Ia) {
                                delete Fa.bingMapsKey;
                                P.itemData = xa(ua);
                                za = P.itemData.baseMap.baseMapLayers[0];
                                za.errors = [];
                                za.errors.push({
                                    message: "The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."
                                });
                                Ba.callback([P, Fa])
                            })
                        } else
                            P.itemData = xa(ua),
                            za = P.itemData.baseMap.baseMapLayers[0],
                            za.errors = [],
                            za.errors.push({
                                message: "The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."
                            }),
                            Ba.callback([P, Fa]);
                    else
                        Ba.callback([P, Fa]);
                    return Ba
                }
                function ha(P) {
                    var Fa = new m;
                    P = P.itemData;
                    var Ba = P.baseMap && P.baseMap.baseMapLayers;
                    if (bc && !bc.supported())
                        for (P = 0; P < Ba.length; P++) {
                            var ua = Ba[P];
                            if (!ua.isReference) {
                                if ("VectorTileLayer" === ua.layerType) {
                                    var za = ua.itemId;
                                    var Ka = P
                                }
                                break
                            }
                        }
                    za ? db(za, !1).addBoth(function(Ia) {
                        var Ga = /^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;
                        Ia && Ia.item && Ga.test(Ia.item.url) && (Ba[Ka] = {
                            id: "FB_" + ua.id,
                            layerType: "ArcGISTiledMapServiceLayer",
                            opacity: "opacity"in ua ? ua.opacity : 1,
                            visibility: "visibility"in ua ? ua.visibility : !0,
                            url: "https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"
                        });
                        Fa.resolve()
                    }) : Fa.resolve();
                    return Fa
                }
                function na(P, Fa, Ba, ua, za) {
                    za.bingKey ? (Fa.bingMapsKey = za.bingKey,
                    za = new Eb({
                        bingMapsKey: Fa.bingMapsKey,
                        mapStyle: Eb.MAP_STYLE_AERIAL
                    }),
                    w.connect(za, "onLoad", y.hitch(this, function() {
                        ua.callback([P, Fa])
                    })),
                    w.connect(za, "onError", function(Ka) {
                        delete Fa.bingMapsKey;
                        P.itemData = xa(Ba);
                        Ka = P.itemData.baseMap.baseMapLayers[0];
                        Ka.errors = [];
                        Ka.errors.push({
                            message: "The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."
                        });
                        ua.callback([P, Fa])
                    })) : ta(P, Fa, Ba, ua)
                }
                function ta(P, Fa, Ba, ua) {
                    delete Fa.bingMapsKey;
                    P.itemData = xa(Ba);
                    Ba = P.itemData.baseMap.baseMapLayers[0];
                    Ba.errors = [];
                    Ba.errors.push({
                        message: "The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."
                    });
                    ua.callback([P, Fa])
                }
                function xa(P) {
                    da(P.baseMap.baseMapLayers[0]) ? P.baseMap = {
                        title: "Imagery",
                        baseMapLayers: [{
                            id: "World_Imagery_2017",
                            visibility: !0,
                            opacity: 1,
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
                        }]
                    } : ea(P.baseMap.baseMapLayers[0]) ? P.baseMap = {
                        title: "Streets",
                        baseMapLayers: [{
                            id: "World_Street_Map_8421",
                            opacity: 1,
                            visibility: !0,
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"
                        }]
                    } : P.baseMap = {
                        title: "Imagery with Labels",
                        baseMapLayers: [{
                            id: "World_Imagery_6611",
                            opacity: 1,
                            visibility: !0,
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"
                        }, {
                            id: "World_Boundaries_and_Places_1145",
                            isReference: !0,
                            opacity: 1,
                            visibility: !0,
                            url: "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"
                        }]
                    };
                    return P
                }
                function Aa(P, Fa, Ba, ua) {
                    var za = P.dynamicLayerInfos || P.layerInfos
                      , Ka = Fa.layers;
                    if (Ka && za)
                        if (ua.usePopupManager) {
                            var Ia;
                            b.forEach(za, function(Za) {
                                var ab = Za.id;
                                if (!Za.subLayerIds)
                                    for (Za = 0; Za < Ka.length; Za++) {
                                        var fb = Ka[Za];
                                        if (fb.id === ab && fb.popupInfo && !fb.disablePopup) {
                                            Ia || (Ia = {});
                                            Ia[ab] = {
                                                infoTemplate: new Ba(fb.popupInfo),
                                                layerUrl: fb.layerUrl
                                            };
                                            break
                                        }
                                    }
                            });
                            Ia && P.setInfoTemplates(Ia)
                        } else {
                            var Ga = []
                              , La = []
                              , Sa = []
                              , Wa = []
                              , $a = []
                              , Ta = [];
                            b.forEach(za, function(Za) {
                                var ab = Za.id;
                                if (!Za.subLayerIds && -1 !== b.indexOf(P.visibleLayers, ab))
                                    for (Za = 0; Za < Ka.length; Za++) {
                                        var fb = Ka[Za];
                                        if (fb.id === ab) {
                                            La.push(ab);
                                            Ga.push(fb.popupInfo);
                                            Sa.push(fb.layerUrl || "");
                                            fb.layerDefinition && fb.layerDefinition.definitionExpression ? Wa.push(fb.layerDefinition.definitionExpression) : Wa.push("");
                                            $a.push(g.isDefined(fb.minScale) ? fb.minScale : null);
                                            Ta.push(g.isDefined(fb.maxScale) ? fb.maxScale : null);
                                            break
                                        }
                                    }
                            });
                            Ga.length && (P.__popups = Ga,
                            P.__popupIds = La,
                            P.__popupUrls = Sa,
                            P.__popupWhereClauses = Wa,
                            P.__popupMinScales = $a,
                            P.__popupMaxScales = Ta,
                            P.__resourceInfo = Fa.resourceInfo)
                        }
                }
                function ca(P) {
                    if (!P)
                        return !1;
                    var Fa = (new k(rb.arcgisUrl)).authority;
                    return -1 !== P.indexOf(".arcgis.com/") || -1 !== P.indexOf(Fa)
                }
                function ja(P) {
                    return P ? -1 !== P.indexOf("/services.arcgisonline.com/") || -1 !== P.indexOf("/server.arcgisonline.com/") : !1
                }
                function X(P) {
                    "https:" === location.protocol && (ca(P) || ja(P)) && (P = P.replace("http:", "https:"));
                    return P
                }
                function oa(P, Fa, Ba) {
                    var ua = [];
                    P.displayLevels || (ua = b.map(P.resourceInfo.tileInfo.lods, function(Ia) {
                        return Ia.level
                    }));
                    if (P.exclusionAreas) {
                        var za = y.clone(P.exclusionAreas);
                        za = b.map(za, function(Ia) {
                            Ia.geometry = new r(Ia.geometry);
                            return Ia
                        })
                    }
                    var Ka = P.resourceInfo && "Raster" === P.resourceInfo.cacheType;
                    Ka ? (ua = P.layerDefinition && P.layerDefinition.drawingInfo && P.layerDefinition.drawingInfo.renderer,
                    ua = new ac(X(P.url),{
                        resourceInfo: P.resourceInfo,
                        opacity: P.opacity,
                        visible: P.visibility,
                        id: P.id,
                        minScale: P.minScale,
                        maxScale: P.maxScale,
                        refreshInterval: P.refreshInterval,
                        multidimensionalDefinition: P.multidimensionalDefinition,
                        bandIds: P.bandIds,
                        renderer: ua || null
                    })) : ua = new O(X(P.url),{
                        resourceInfo: P.resourceInfo,
                        opacity: P.opacity,
                        visible: P.visibility,
                        displayLevels: P.displayLevels || ua,
                        id: P.id,
                        minScale: P.minScale,
                        maxScale: P.maxScale,
                        refreshInterval: P.refreshInterval,
                        exclusionAreas: za
                    });
                    Ba.ignorePopups || (Ka && P.popupInfo && !P.disablePopup ? ua.setInfoTemplate(new Fa(P.popupInfo)) : Aa(ua, P, Fa, Ba));
                    return ua
                }
                function ka(P, Fa) {
                    if (!P || !Fa || 0 === Fa.length)
                        return [];
                    Fa = "," + Fa + ",";
                    var Ba = [], ua, za = ",";
                    for (ua = 0; ua < P.length; ua++)
                        if (null !== P[ua].subLayerIds) {
                            if (-1 === Fa.indexOf("," + P[ua].id + ",") || -1 < za.indexOf("," + P[ua].id + ","))
                                za += P[ua].subLayerIds.toString() + ","
                        } else
                            -1 < Fa.indexOf("," + P[ua].id + ",") && -1 === za.indexOf("," + P[ua].id + ",") && Ba.push(P[ua].id);
                    return Ba
                }
                function Ea(P, Fa, Ba) {
                    var ua = new zb;
                    ua.format = "png24";
                    P.resourceInfo && P.resourceInfo.supportedImageFormatTypes && -1 < P.resourceInfo.supportedImageFormatTypes.indexOf("PNG32") && (ua.format = "png32");
                    ua = new jb(X(P.url),{
                        resourceInfo: P.resourceInfo,
                        opacity: P.opacity,
                        visible: P.visibility,
                        id: P.id,
                        imageParameters: ua,
                        minScale: P.minScale,
                        maxScale: P.maxScale,
                        refreshInterval: P.refreshInterval
                    });
                    var za = P.visibleLayers;
                    if (!P.visibleLayers) {
                        var Ka = "";
                        b.forEach(ua.layerInfos, function(Ta) {
                            Ta.defaultVisibility && (Ka += (0 < Ka.length ? "," : "") + Ta.id)
                        });
                        za = Ka
                    }
                    if (P.layers && 0 < P.layers.length) {
                        var Ia = [], Ga = [], La, Sa = [], Wa, $a;
                        b.forEach(P.layers, function(Ta) {
                            var Za = Ta.layerDefinition;
                            Za && Za.definitionExpression && (Ia[Ta.id] = Za.definitionExpression);
                            if (Za && Za.source) {
                                La = null;
                                $a = Za.source;
                                if ("mapLayer" === $a.type) {
                                    var ab = b.filter(P.resourceInfo.layers, function(fb) {
                                        return fb.id === $a.mapLayerId
                                    });
                                    ab.length && (La = y.mixin(ab[0], Ta))
                                } else
                                    La = y.mixin({}, Ta);
                                La && (La.source = $a,
                                delete La.popupInfo,
                                La = new vb(La),
                                P.visibleLayers && (ab = "string" == typeof P.visibleLayers ? P.visibleLayers.split(",") : P.visibleLayers,
                                -1 < b.indexOf(ab, Ta.id) ? La.defaultVisibility = !0 : La.defaultVisibility = !1),
                                Ga.push(La))
                            }
                            Za && null != Za.transparency && (ab = Za.drawingInfo || {},
                            null == ab.transparency && (ab.transparency = Za.transparency,
                            Za.drawingInfo = ab));
                            Za && Za.source && Za.drawingInfo && (Wa = new Gb(Za.drawingInfo),
                            Sa[Ta.id] = Wa)
                        }, this);
                        0 < Ia.length && ua.setLayerDefinitions(Ia);
                        0 < Ga.length ? (ua.setDynamicLayerInfos(Ga, !0),
                        0 < Sa.length && ua.setLayerDrawingOptions(Sa, !0)) : (za = ka(ua.layerInfos, za),
                        ua.setVisibleLayers(za))
                    } else
                        za = ka(ua.layerInfos, za),
                        ua.setVisibleLayers(za);
                    Ba.ignorePopups || Aa(ua, P, Fa, Ba);
                    return ua
                }
                function T(P, Fa, Ba) {
                    var ua = new Db;
                    ua.bandIds = P.bandIds;
                    null != P.format && (ua.format = P.format,
                    null != P.compressionQuality && (ua.compressionQuality = P.compressionQuality));
                    if (P.renderingRule && P.renderingRule.rasterFunction) {
                        var za = new $b(P.renderingRule);
                        ua.renderingRule = za
                    }
                    P.mosaicRule && (za = new Rb(P.mosaicRule),
                    ua.mosaicRule = za);
                    g.isDefined(P.noData) && (ua.noData = P.noData);
                    g.isDefined(P.noDataInterpretation) && (ua.noDataInterpretation = P.noDataInterpretation);
                    g.isDefined(P.interpolation) && (ua.interpolation = P.interpolation);
                    za = P.layerType ? "ArcGISImageServiceVectorLayer" === P.layerType : !1;
                    g.isDefined(P.layerType) || (za = P.resourceInfo.hasMultidimensions && ("esriImageServiceDataTypeVector-UV" === P.resourceInfo.serviceDataType || "esriImageServiceDataTypeVector-MagDir" === P.resourceInfo.serviceDataType));
                    ua = {
                        resourceInfo: P.resourceInfo,
                        opacity: P.opacity,
                        visible: P.visibility,
                        id: P.id,
                        imageServiceParameters: ua,
                        minScale: P.minScale,
                        maxScale: P.maxScale,
                        refreshInterval: P.refreshInterval
                    };
                    ua = za ? new Jb(X(P.url),ua) : new nb(X(P.url),ua);
                    P.layerDefinition && (P.layerDefinition.drawingInfo && P.layerDefinition.drawingInfo.renderer && (za = G.fromJson(P.layerDefinition.drawingInfo.renderer),
                    ua.setRenderer(za)),
                    P.layerDefinition.definitionExpression && ua.setDefinitionExpression(P.layerDefinition.definitionExpression, !0));
                    Ba.ignorePopups || !P.popupInfo || P.disablePopup || ua.setInfoTemplate(new Fa(P.popupInfo));
                    return ua
                }
                function U(P, Fa, Ba) {
                    var ua = [102113, 102100, 3857]
                      , za = Ba || new x(Fa[0].layerObject.fullExtent.spatialReference)
                      , Ka = new x(P.resourceInfo.fullExtent.spatialReference);
                    return za.wkt == Ka.wkt && (za.wkid == Ka.wkid || g.isDefined(za.latestWkid) && za.latestWkid == Ka.wkid || g.isDefined(Ka.latestWkid) && za.wkid == Ka.latestWkid || g.isDefined(za.latestWkid) && za.latestWkid == Ka.latestWkid) || za.wkid && Ka.wkid && b.some(ua, function(Ia) {
                        return Ia === Ka.wkid
                    }) && b.some(ua, function(Ia) {
                        return Ia === za.wkid
                    }) ? !0 : !1
                }
                function ma(P, Fa, Ba) {
                    if (!Fa[0].layerObject.tileInfo)
                        return !1;
                    P = P.resourceInfo.tileInfo;
                    Fa = Fa[0].layerObject.tileInfo;
                    Ba = Ba.width > Ba.height ? Ba.width : Ba.height;
                    for (var ua = !1, za = !1, Ka = 0; Ka < P.lods.length; Ka++) {
                        for (var Ia = P.lods[Ka].scale / P.dpi, Ga = 0; Ga < Fa.lods.length; Ga++) {
                            var La = Fa.lods[Ga].scale / Fa.dpi;
                            if (Math.abs(La - Ia) / La < 1 / Ba)
                                if (ua) {
                                    za = !0;
                                    break
                                } else
                                    ua = !0
                        }
                        if (za)
                            break
                    }
                    return za || ua && (1 === P.lods.length || 1 === Fa.lods.length) ? !0 : !1
                }
                function sa(P, Fa, Ba, ua, za, Ka) {
                    var Ia = Ba._clazz;
                    if (ia(P))
                        var Ga = new jc({
                            id: P.id,
                            opacity: P.opacity,
                            visible: null !== P.visibility && void 0 !== P.visibility ? P.visibility : !0
                        });
                    else if (P && ("WFS" === P.layerType || "WFS" === P.type)) {
                        var La = {
                            customParameters: P.wfsInfo.customParameters,
                            geometryType: P.layerDefinition.geometryType,
                            id: P.id,
                            labelingInfo: P.layerDefinition.drawingInfo.labelingInfo,
                            maxFeatures: P.wfsInfo.maxFeatures,
                            mode: P.mode,
                            name: P.wfsInfo.name,
                            showLabels: !0,
                            swapXY: P.wfsInfo.swapXY,
                            title: P.title,
                            url: P.url,
                            version: P.wfsInfo.version,
                            visible: P.visibility,
                            wkid: P.layerDefinition.spatialReference.wkid
                        };
                        Ga = new lc;
                        Ga.fromJson(La, function() {
                            g.isDefined(P.opacity) && Ga.setOpacity(P.opacity);
                            g.isDefined(P.visibility) && Ga.setVisibility(P.visibility);
                            (P.minScale || P.maxScale) && Ga.setScaleRange(P.minScale, P.maxScale);
                            Ga.renderer = G.fromJson(P.layerDefinition.drawingInfo.renderer, {
                                geometryType: La.geometryType
                            });
                            !Ba.ignorePopups && P.popupInfo && Ga.setInfoTemplate(new Ia(P.popupInfo));
                            Ga.emit("fromJsonComplete")
                        })
                    } else if (P && ("WMS" === P.layerType || "WMS" === P.type)) {
                        var Sa = []
                          , Wa = [];
                        b.forEach(P.layers, function(ab) {
                            Wa.push(new mc({
                                name: ab.name,
                                title: ab.title,
                                legendURL: ab.legendURL || ab.legendUrl,
                                queryable: ab.queryable,
                                showPopup: ab.showPopup
                            }));
                            Sa.push(ab.name)
                        }, this);
                        P.visibleLayers && (Sa = P.visibleLayers);
                        ua = new r(P.extent[0][0],P.extent[0][1],P.extent[1][0],P.extent[1][1],new x({
                            wkid: 4326
                        }));
                        ua = {
                            customLayerParameters: P.customLayerParameters,
                            customParameters: P.customParameters,
                            extent: ua,
                            layerInfos: Wa,
                            version: P.version,
                            maxWidth: P.maxWidth,
                            maxHeight: P.maxHeight,
                            featureInfoFormat: P.featureInfoFormat,
                            getFeatureInfoURL: P.featureInfoUrl,
                            getMapURL: P.mapUrl,
                            spatialReferences: P.spatialReferences,
                            title: P.title,
                            copyright: P.copyright,
                            minScale: P.minScale || 0,
                            maxScale: P.maxScale || 0,
                            format: P.format
                        };
                        Ga = new cc(P.url,{
                            id: P.id,
                            visibleLayers: Sa,
                            format: "png",
                            transparent: P.firstLayer ? !1 : !0,
                            opacity: P.opacity,
                            visible: null !== P.visibility ? P.visibility : !0,
                            resourceInfo: ua,
                            refreshInterval: P.refreshInterval
                        });
                        Ga.spatialReference.wkid = ua.spatialReferences[0]
                    } else if (P && ("KML" === P.layerType || "KML" === P.type)) {
                        var $a = P.url;
                        if (e.id) {
                            var Ta = e.id.findCredential(z.urlToObject(rb.arcgisUrl).path);
                            Ta && (Fa = rb.arcgisUrl.substring(rb.arcgisUrl.indexOf("//") + 2, rb.arcgisUrl.indexOf("/", rb.arcgisUrl.indexOf("//") + 3)),
                            za = Fa.split("."),
                            za = za[za.length - 2] + "." + za[za.length - 1],
                            Ka = $a.indexOf(za),
                            -1 < Ka && ($a = "https://" + Fa + $a.substring(Ka + za.length),
                            $a += "?token\x3d" + Ta.token))
                        }
                        Ga = new Kb($a,{
                            id: P.id,
                            visible: null !== P.visibility ? P.visibility : !0,
                            outSR: ua,
                            refreshInterval: P.refreshInterval
                        });
                        w.connect(Ga, "onLoad", function() {
                            (P.opacity || 0 === P.opacity) && Ga.setOpacity(P.opacity);
                            g.isDefined(P.minScale) && g.isDefined(P.maxScale) && Ga.setScaleRange(P.minScale, P.maxScale);
                            P.visibleFolders && b.forEach(Ga.folders, function(ab) {
                                -1 < b.indexOf(P.visibleFolders, ab.id) ? Ga.setFolderVisibility(ab, !0) : Ga.setFolderVisibility(ab, !1)
                            }, this)
                        })
                    } else if (!P || "WebTiledLayer" !== P.layerType && "WebTiledLayer" !== P.type)
                        if (!P || "GeoRSS" !== P.layerType && "GeoRSS" !== P.type)
                            if (P && ("CSV" === P.layerType || "CSV" === P.type) && P.url)
                                ua = {
                                    layerDefinition: P.layerDefinition,
                                    columnDelimiter: P.columnDelimiter,
                                    id: P.id ? P.id : null,
                                    visible: null !== P.visibility ? P.visibility : !0,
                                    opacity: P.opacity,
                                    refreshInterval: P.refreshInterval
                                },
                                P.locationInfo && (ua.latitudeFieldName = P.locationInfo.latitudeFieldName,
                                ua.longitudeFieldName = P.locationInfo.longitudeFieldName),
                                !Ba.ignorePopups && P.popupInfo && (ua.infoTemplate = new Ia(P.popupInfo)),
                                Ga = new Ab(P.url,ua);
                            else if ("VectorTileLayer" === P.layerType && P.styleUrl)
                                Ga = new bc(P.styleUrl,{
                                    id: P.id,
                                    minScale: P.minScale,
                                    maxScale: P.maxScale,
                                    opacity: P.opacity,
                                    visible: P.visibility
                                });
                            else if (P.layerDefinition && !P.url)
                                ua = l.fromJson(l.toJson(P)),
                                delete ua.id,
                                delete ua.opacity,
                                delete ua.visibility,
                                Ga = new V(ua,{
                                    id: P.id,
                                    opacity: P.opacity,
                                    visible: P.visibility,
                                    outFields: ["*"],
                                    autoGeneralize: !0
                                }),
                                Ba.ignorePopups || !ua.popupInfo || ua.disablePopup || Ga.setInfoTemplate(new Ia(ua.popupInfo)),
                                Xa(Ga);
                            else if (Y(P))
                                Ba.bingMapsKey ? (ua = Eb.MAP_STYLE_AERIAL_WITH_LABELS,
                                da(P) ? ua = Eb.MAP_STYLE_AERIAL : ea(P) && (ua = Eb.MAP_STYLE_ROAD),
                                Ga = new Eb({
                                    bingMapsKey: Ba.bingMapsKey,
                                    mapStyle: ua,
                                    opacity: P.opacity,
                                    id: P.id
                                }),
                                w.connect(Ga, "onError", y.hitch(this, function(ab) {
                                    ab.errors = ab.errors || [];
                                    ab.errors.push({
                                        message: "This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:" + (ab ? ab.layerType || ab.type : "") + "]"
                                    })
                                }, P))) : (P.errors = P.errors || [],
                                P.errors.push({
                                    message: "This application does not provide a Bing Key for the Bing layer that is included in this map. [type:" + (P ? P.layerType || P.type : "") + "]"
                                }));
                            else if (P.resourceInfo && (P.resourceInfo.mapName || "" === P.resourceInfo.mapName))
                                Ga = !0 === P.resourceInfo.singleFusedMapCache && (P.baseMapLayer || U(P, Fa, ua) && ma(P, za, Ka)) ? oa(P, Ia, Ba) : Ea(P, Ia, Ba);
                            else if (P.resourceInfo && P.resourceInfo.pixelSizeX)
                                Ga = !0 === P.resourceInfo.singleFusedMapCache && "ArcGISImageServiceLayer" !== P.layerType && (P.baseMapLayer || "Raster" === P.resourceInfo.cacheType || U(P, Fa, ua) && ma(P, za, Ka)) ? oa(P, Ia, Ba) : T(P, Ia, Ba);
                            else if (P.resourceInfo && "Feature Layer" === P.resourceInfo.type) {
                                P.capabilities && (P.resourceInfo.capabilities = P.capabilities);
                                var Za;
                                !1 === Ba.editable ? Za = !1 : Ba.privileges && -1 === b.indexOf(Ba.privileges, "features:user:edit") && e.id && e.id.findCredential(P.url) && (Za = !1);
                                Ga = new V(X(P.url),{
                                    resourceInfo: P.resourceInfo,
                                    opacity: P.opacity,
                                    visible: P.visibility,
                                    id: P.id,
                                    mode: P.mode === V.MODE_SELECTION ? V.MODE_SELECTION : V.MODE_AUTO,
                                    editable: Za,
                                    outFields: ["*"],
                                    autoGeneralize: !0,
                                    refreshInterval: P.refreshInterval
                                });
                                Ba.ignorePopups || !P.popupInfo || P.disablePopup || Ga.setInfoTemplate(new Ia(P.popupInfo));
                                P.layerDefinition && (P.layerDefinition.drawingInfo && P.layerDefinition.drawingInfo.renderer && (ua = G.fromJson(P.layerDefinition.drawingInfo.renderer, {
                                    geometryType: Ga.geometryType
                                }),
                                ua.isMaxInclusive = !0,
                                Ga.setRenderer(ua)),
                                P.layerDefinition.drawingInfo && P.layerDefinition.drawingInfo.labelingInfo && (ua = b.map(P.layerDefinition.drawingInfo.labelingInfo, function(ab) {
                                    return new Qb(ab)
                                }),
                                Ga.setLabelingInfo(ua)),
                                P.layerDefinition.definitionExpression && Ga.setDefinitionExpression(P.layerDefinition.definitionExpression),
                                g.isDefined(P.layerDefinition.minScale) && Ga.setMinScale(P.layerDefinition.minScale),
                                g.isDefined(P.layerDefinition.maxScale) && Ga.setMaxScale(P.layerDefinition.maxScale));
                                Xa(Ga)
                            } else
                                P.resourceInfo && P.resourceInfo.streamUrls && (ua = {
                                    resourceInfo: P.resourceInfo,
                                    opacity: P.opacity,
                                    visible: P.visibility,
                                    id: P.id
                                },
                                P.layerDefinition && ($a = P.layerDefinition.drawingInfo,
                                P.layerDefinition.definitionGeometry && (Ta = Ta || {},
                                Ta.geometry = P.layerDefinition.definitionGeometry),
                                g.isDefined(P.layerDefinition.definitionExpression) && (Ta = Ta || {},
                                Ta.where = P.layerDefinition.definitionExpression),
                                g.isDefined(P.layerDefinition.maximumTrackPoints) && (ua.maximumTrackPoints = P.layerDefinition.maximumTrackPoints)),
                                Ta && (ua.filter = Ta),
                                P.purgeOptions && (ua.purgeOptions = P.purgeOptions),
                                Ga = new Vb(X(P.url),ua),
                                $a && $a.renderer && (ua = $a.renderer,
                                Ga.setRenderer(G.fromJson(ua, {
                                    geometryType: P.resourceInfo.geometryType
                                }))),
                                $a && $a.labelingInfo && (ua = b.map($a.labelingInfo, function(ab) {
                                    return new Qb(ab)
                                }),
                                Ga.setLabelingInfo(ua)),
                                Ba.ignorePopups || !P.popupInfo || P.disablePopup || Ga.setInfoTemplate(new Ia(P.popupInfo)),
                                P.layerDefinition && (g.isDefined(P.layerDefinition.minScale) && Ga.setMinScale(P.layerDefinition.minScale),
                                g.isDefined(P.layerDefinition.maxScale) && Ga.setMaxScale(P.layerDefinition.maxScale)),
                                h.once(Ga, "error", function(ab) {
                                    P.errors.push({
                                        message: "Error loading stream layer. Check websocket url"
                                    })
                                }));
                        else
                            Ga = new Tb(P.url,{
                                id: P.id,
                                opacity: P.opacity,
                                outSpatialReference: ua,
                                refreshInterval: P.refreshInterval
                            }),
                            w.connect(Ga, "onLoad", function() {
                                !1 === P.visibility && Ga.hide();
                                g.isDefined(P.minScale) && g.isDefined(P.maxScale) && Ga.setScaleRange(P.minScale, P.maxScale);
                                var ab = Ga.getFeatureLayers();
                                b.forEach(ab, function(fb) {
                                    P.pointSymbol && "esriGeometryPoint" === fb.geometryType ? (fb.renderer.symbol = D.fromJson(P.pointSymbol),
                                    1 === ab.length && (Ga.pointSymbol = D.fromJson(P.pointSymbol))) : P.lineSymbol && "esriGeometryPolyline" === fb.geometryType ? (fb.renderer.symbol = D.fromJson(P.lineSymbol),
                                    1 === ab.length && (Ga.polylineSymbol = D.fromJson(P.lineSymbol))) : P.polygonSymbol && "esriGeometryPolygon" === fb.geometryType && (fb.renderer.symbol = D.fromJson(P.polygonSymbol),
                                    1 === ab.length && (Ga.polygonSymbol = D.fromJson(P.polygonSymbol)))
                                })
                            });
                    else if (Ga = new Wb(P.templateUrl,{
                        id: P.id,
                        visible: null !== P.visibility ? P.visibility : !0,
                        opacity: P.opacity,
                        copyright: P.copyright,
                        fullExtent: P.fullExtent && new r(P.fullExtent),
                        initialExtent: P.fullExtent && new r(P.fullExtent),
                        subDomains: P.subDomains,
                        tileInfo: P.tileInfo ? new kc(P.tileInfo) : null,
                        refreshInterval: P.refreshInterval,
                        wmtsInfo: P.wmtsInfo
                    }),
                    g.isDefined(P.minScale) || g.isDefined(P.maxScale))
                        Ga.loaded ? Ga.setScaleRange(P.minScale, P.maxScale) : w.connect(Ga, "onLoad", function() {
                            Ga.setScaleRange(P.minScale, P.maxScale)
                        });
                    Ga && (Ga.arcgisProps = {
                        title: P.title
                    },
                    P.baseMapLayer && (P.isReference ? (Ga.attr("data-reference", !0),
                    Ga._basemapGalleryLayerType = "reference") : Ga._basemapGalleryLayerType = "basemap"),
                    Ga instanceof V && P.layerDefinition && P.layerDefinition.featureReduction && "cluster" === P.layerDefinition.featureReduction.type && (ua = P.layerDefinition.featureReduction,
                    ua.clusterSize && (ua.clusterSize = c.pt2px(ua.clusterSize)),
                    ua.clusterRadius && (ua.clusterRadius = c.pt2px(ua.clusterRadius)),
                    ua.popupInfo && (ua.infoTemplate = new A(ua.popupInfo),
                    delete ua.popupInfo),
                    Ga.setFeatureReduction(ua)));
                    return Ga
                }
                function ya(P, Fa, Ba, ua, za) {
                    b.forEach(P, function(Ga) {
                        Ga.layerObject = sa(Ga, P, Fa, Ba, ua, za)
                    });
                    var Ka = b.filter(P, function(Ga) {
                        return !Ga.isReference
                    })
                      , Ia = b.filter(P, function(Ga) {
                        return !!Ga.isReference
                    });
                    return P = Ka.concat(Ia)
                }
                function Oa(P) {
                    var Fa = null;
                    P = P[0];
                    P.url && qa(P) && P.resourceInfo.spatialReference && (Fa = new x,
                    P.resourceInfo.spatialReference.wkid && (Fa.wkid = P.resourceInfo.spatialReference.wkid),
                    P.resourceInfo.spatialReference.wkt && (Fa.wkt = P.resourceInfo.spatialReference.wkt));
                    Y(P) || ia(P) ? Fa = new x({
                        wkid: 102100
                    }) : P && ("WMS" === P.layerType || "WMS" === P.type) && (Fa = new x({
                        wkid: P.spatialReferences[0]
                    }));
                    return Fa
                }
                function Ua(P, Fa, Ba, ua, za, Ka, Ia, Ga) {
                    b.forEach(Fa, function(La) {
                        La.url && qa(La) && (La.resourceInfo = P[La.deferredsPos][1],
                        delete La.deferredsPos)
                    });
                    Ka = Ka || Oa(Fa);
                    Fa = ya(Fa, Ba, Ka, Ia, Ga);
                    za.callback(Fa);
                    return za
                }
                function Xa(P) {
                    !window.CanvasRenderingContext2D && P.renderer && "esri.renderer.HeatmapRenderer" === P.renderer.declaredClass && P.setRenderer(G.fromJson({
                        type: "simple",
                        symbol: {
                            color: [77, 77, 77, 255],
                            size: 6,
                            angle: 0,
                            xoffset: 0,
                            yoffset: 0,
                            type: "esriSMS",
                            style: "esriSMSCircle",
                            outline: {
                                color: [255, 255, 255, 255],
                                width: .75,
                                type: "esriSLS",
                                style: "esriSLSSolid"
                            }
                        }
                    }))
                }
                function Ma(P, Fa) {
                    var Ba = X(P);
                    return q({
                        url: Ba,
                        content: {
                            f: "json"
                        },
                        callbackParamName: "callback",
                        error: function(ua, za) {
                            ua.message = ua.message ? ua.message + (" [url:" + Ba + "]") : "[url:" + Ba + "]";
                            Fa.push(ua);
                            n.defaults.io.errorHandler(ua, za)
                        }
                    })
                }
                function I(P) {
                    var Fa = rb.arcgisUrl + "/" + P.itemId + "/data";
                    return q({
                        url: Fa,
                        content: {
                            f: "json"
                        },
                        callbackParamName: "callback",
                        error: function(Ba, ua) {
                            Ba.message = Ba.message ? Ba.message + (" [url:" + Fa + "]") : "[url:" + Fa + "]";
                            P.errors = P.errors || [];
                            P.errors.push(Ba);
                            n.defaults.io.errorHandler(Ba, ua)
                        }
                    })
                }
                function Q(P, Fa, Ba) {
                    var ua = new m;
                    if (!(Ba.featureCollection && Ba.featureCollection.layers || Ba.layers))
                        return console.log("Invalid Feature Collection item data [item id: " + P.itemId + "]: ", Ba),
                        P.errors = P.errors || [],
                        P.errors.push({
                            message: "Invalid Feature Collection item data. [item id: " + P.itemId + "]"
                        }),
                        ua.errback(),
                        ua;
                    Ba.layers && (Ba.featureCollection = {
                        layers: Ba.layers
                    },
                    delete Ba.layers,
                    g.isDefined(Ba.showLegend) && (Ba.featureCollection.showLegend = Ba.showLegend,
                    delete Ba.showLegend));
                    ba(P, Ba.featureCollection, Fa).then(function(za) {
                        Ba.featureCollection = za;
                        P.featureCollection && P.featureCollection.layers ? b.forEach(Ba.featureCollection.layers, function(Ka, Ia) {
                            Ia = P.featureCollection.layers[Ia];
                            Ia.popupInfo || Ia.layerDefinition ? Ia.layerDefinition ? (g.isDefined(Ia.layerDefinition.minScale) && g.isDefined(Ia.layerDefinition.maxScale) && (Ia.layerDefinition.minScale !== Ka.layerDefinition.minScale || Ia.layerDefinition.maxScale !== Ka.layerDefinition.maxScale) && (delete Ka.layerDefinition.minScale,
                            delete Ka.layerDefinition.maxScale),
                            Ia.layerDefinition.drawingInfo && l.toJson(Ia.layerDefinition.drawingInfo) !== l.toJson(Ka.layerDefinition.drawingInfo) && delete Ka.layerDefinition.drawingInfo,
                            Ia.layerDefinition.showLegend !== Ka.layerDefinition.showLegend && delete Ka.layerDefinition.showLegend,
                            Ia.layerDefinition = y.mixin(Ia.layerDefinition, Ka.layerDefinition)) : Ia.layerDefinition = Ka.layerDefinition : (Ia.popupInfo = Ka.popupInfo,
                            Ia.layerDefinition = Ka.layerDefinition);
                            Ia.featureSet = Ka.featureSet;
                            Ia.nextObjectId = Ka.nextObjectId
                        }) : (P.featureCollection = P.featureCollection || {},
                        P.featureCollection = y.mixin(P.featureCollection, Ba.featureCollection));
                        ua.callback(P)
                    });
                    return ua
                }
                function ba(P, Fa, Ba) {
                    var ua = new m;
                    C(["./csv"], function(za) {
                        var Ka = [];
                        b.forEach(Fa.layers, function(Ia) {
                            Ia.featureSet && Ia.featureSet.features && Ia.featureSet.features.length && Ia.featureSet.features[0].geometry && Ia.featureSet.features[0].geometry.spatialReference && (Ia.deferredsPos = Ka.length,
                            Ka.push(za.projectFeatureCollection(Ia, Ba, Ia.featureSet.features[0].geometry.spatialReference)))
                        });
                        (new f(Ka)).addCallback(function() {
                            b.forEach(Fa.layers, function(Ia) {
                                g.isDefined(Ia.deferredsPos) && (Ka[Ia.deferredsPos].results && Ka[Ia.deferredsPos].results.length ? Ia = Ka[Ia.deferredsPos].results[0] : (console.log("Errors projecting feature collection. [" + P.title + " - " + Ia.layerDefinition.name + "]"),
                                Ia.errors = Ia.errors || [],
                                Ia.errors.push({
                                    message: "Errors projecting feature collection. [" + P.title + " - " + Ia.layerDefinition.name + "]"
                                })),
                                delete Ia.deferredsPos)
                            });
                            ua.callback(Fa)
                        })
                    });
                    return ua
                }
                function M(P, Fa, Ba, ua, za) {
                    var Ka = new m
                      , Ia = new m
                      , Ga = [];
                    b.forEach(P.operationalLayers, function(Sa) {
                        Sa.itemId && "Feature Collection" == Sa.type && Ga.push(I(Sa).then(y.hitch(null, Q, Sa, Ba)))
                    });
                    if (0 === Ga.length)
                        S(P, Fa, Ba, ua, Ia, za);
                    else {
                        var La = new f(Ga);
                        La.addCallback(function(Sa) {
                            S(P, Fa, Ba, ua, Ia, za)
                        })
                    }
                    Ia.then(function(Sa) {
                        Ga = [];
                        b.forEach(Sa, function($a) {
                            $a = $a.layerObject;
                            if ($a instanceof V && !$a.loaded && !$a.loadError) {
                                var Ta = new m;
                                h.once($a, "load, error", function() {
                                    Ta.callback($a)
                                });
                                Ga.push(Ta)
                            } else
                                $a && "esri.layers.WFSLayer" === $a.declaredClass && !$a.loadError && (Ta = new m,
                                h.once($a, "fromJsonComplete, error", function(Za) {
                                    Ta.callback($a)
                                }),
                                Ga.push(Ta))
                        });
                        if (Ga.length) {
                            var Wa = new m;
                            La = new f(Ga);
                            La.addCallback(function() {
                                Wa.callback(Sa)
                            });
                            return Wa.promise
                        }
                        return Sa
                    }).then(function(Sa) {
                        var Wa = [];
                        b.forEach(Sa, function($a) {
                            var Ta = $a.layerObject;
                            Ta && (Ta instanceof V || "esri.layers.StreamLayer" === Ta.declaredClass) ? Ta.loaded && Ta.labelingInfo && ($a.showLabels || Ta._collection ? Wa.push(Ta) : Ta.setShowLabels && Ta.setShowLabels(!1)) : Ta && "esri.layers.WFSLayer" === Ta.declaredClass && Ta.loaded && Ta.labelingInfo && Wa.push(Ta)
                        });
                        Wa.length ? C(["../layers/LabelLayer"], function($a) {
                            var Ta = new $a;
                            b.forEach(Wa, function(Za) {
                                Ta.addFeatureLayer(Za)
                            });
                            Sa.push({
                                layerObject: Ta
                            });
                            Ka.callback(Sa)
                        }) : Ka.callback(Sa)
                    });
                    return Ka
                }
                function S(P, Fa, Ba, ua, za, Ka) {
                    var Ia = []
                      , Ga = []
                      , La = [];
                    b.forEach(P.operationalLayers, function(Sa, Wa) {
                        if (Sa.featureCollection && Sa.featureCollection.layers) {
                            var $a = Sa.featureCollection.layers.length;
                            b.forEach(Sa.featureCollection.layers, function(Ta, Za) {
                                var ab = !0;
                                Sa.visibleLayers && -1 == b.indexOf(Sa.visibleLayers, Za) && (ab = !1);
                                Ta.visibility = (null != Sa.visibility ? !!Sa.visibility : !0) && ab;
                                Ta.opacity = Sa.opacity;
                                Ta.id = (Sa.id || "operational" + Wa) + "_" + Za;
                                Sa.title && (Ta.title = 1 !== $a && Ta.layerDefinition.name && Sa.title !== Ta.layerDefinition.name ? Sa.title + " - " + Ta.layerDefinition.name : Sa.title);
                                null == Ta.disablePopup && (Ta.disablePopup = Sa.disablePopup);
                                La.push(Ta)
                            }, this)
                        } else
                            La.push(Sa)
                    });
                    b.forEach(P.baseMap.baseMapLayers, function(Sa, Wa) {
                        Sa.baseMapLayer = !0;
                        Sa.id = Sa.id || "base" + Wa;
                        Ia.push(Sa)
                    });
                    b.forEach(La, function(Sa, Wa) {
                        Sa.id = Sa.id || "operational" + Wa;
                        Ia.push(Sa)
                    });
                    b.forEach(Ia, function(Sa) {
                        Sa.url && qa(Sa) && (Sa.deferredsPos = Ga.length,
                        Sa.errors = Sa.errors || [],
                        Ga.push(Ma(Sa.url, Sa.errors)))
                    });
                    0 === Ga.length ? (Ba = Ba || Oa(Ia),
                    Ia = ya(Ia, Fa, Ba, ua, Ka),
                    za.callback(Ia)) : (new f(Ga)).addCallback(function(Sa) {
                        Ua(Sa, Ia, Fa, Ga, za, Ba, ua, Ka)
                    });
                    return za
                }
                function fa(P, Fa, Ba, ua) {
                    var za = P.minScale
                      , Ka = P.maxScale;
                    if (10.1 >= Ba.version && Fa)
                        for (P = Fa.length - 1; 0 <= P; P--) {
                            if (Fa[P].id == ua)
                                if (0 == za && 0 < Fa[P].minScale ? za = Fa[P].minScale : 0 < za && 0 == Fa[P].minScale ? za = Ba.minScale : 0 < za && 0 < Fa[P].minScale && (za = Math.min(za, Fa[P].minScale)),
                                Ka = Math.max(Ba.maxScale || 0, Fa[P].maxScale || 0),
                                Ba.setScaleRange(za, Ka),
                                -1 < Fa[P].parentLayerId)
                                    ua = Fa[P].parentLayerId;
                                else
                                    break
                        }
                    else
                        10.1 < Ba.version && (b.forEach(P.layerInfos, function(Ia) {
                            Ia.id == ua && (0 == za && 0 < Ia.minScale ? za = Ia.minScale : 0 < za && 0 == Ia.minScale || 0 < za && 0 < Ia.minScale && (za = Math.min(za, Ia.minScale)),
                            Ka = Math.max(Ka || 0, Ia.maxScale || 0))
                        }),
                        Ba.setScaleRange(za, Ka))
                }
                function ra(P, Fa, Ba, ua) {
                    var za = P.url
                      , Ka = P.__popupIds
                      , Ia = P.__popupUrls
                      , Ga = P.__popupWhereClauses
                      , La = P.__popupMinScales
                      , Sa = P.__popupMaxScales
                      , Wa = P.__resourceInfo
                      , $a = [];
                    b.forEach(P.__popups, function(Ta, Za) {
                        if (Ta) {
                            var ab = [];
                            b.forEach(Ta.fieldInfos, function(tb) {
                                "shape" !== tb.fieldName.toLowerCase() && ab.push(tb.fieldName)
                            });
                            if (P.dynamicLayerInfos && 0 < P.dynamicLayerInfos.length) {
                                var fb = b.filter(P.dynamicLayerInfos, function(tb) {
                                    return Ka[Za] == tb.id
                                })[0].source;
                                var Bb = new V(za + "/dynamicLayer",{
                                    parentLayer: P,
                                    id: P.id + "_" + Ka[Za],
                                    source: fb,
                                    outFields: ab,
                                    mode: V.MODE_SELECTION,
                                    infoTemplate: Ta && new Ba(Ta),
                                    drawMode: !1,
                                    visible: P.visible,
                                    autoGeneralize: !0
                                });
                                var dc = function(tb, Yb) {
                                    0 < Ga[tb].length && Yb.setDefinitionExpression(Ga[tb]);
                                    if (g.isDefined(La[tb]) || g.isDefined(Sa[tb]))
                                        if (g.isDefined(P.minScale) || g.isDefined(P.maxScale)) {
                                            var Fb = P.minScale
                                              , Zb = P.maxScale;
                                            0 == Fb && 0 < La[tb] ? Fb = La[tb] : 0 < Fb && 0 == La[tb] || 0 < Fb && 0 < La[tb] && (Fb = Math.min(Fb, La[tb]));
                                            Zb = Math.max(Zb || 0, Sa[tb] || 0);
                                            Yb.setScaleRange(Fb, Zb)
                                        } else
                                            Yb.setScaleRange(La[tb], Sa[tb]);
                                    else
                                        fa(P, Fa || Wa.layers, Yb, Ka[tb])
                                };
                                Bb.loaded ? dc(Za, Bb) : w.connect(Bb, "onLoad", function(tb) {
                                    dc(Za, Bb)
                                })
                            } else {
                                var Xb = null
                                  , qb = za + "/" + Ka[Za];
                                if (Ia[Za].length)
                                    qb = Ia[Za];
                                else if (Fa)
                                    for (fb = 0; fb < Fa.length; fb++)
                                        if (Fa[fb].id === Ka[Za]) {
                                            Xb = Fa[fb];
                                            break
                                        }
                                Bb = new V(X(qb),{
                                    parentLayer: P,
                                    id: P.id + "_" + Ka[Za],
                                    outFields: ab,
                                    mode: V.MODE_SELECTION,
                                    infoTemplate: Ta && new Ba(Ta),
                                    drawMode: !1,
                                    visible: P.visible,
                                    resourceInfo: Xb,
                                    autoGeneralize: !0
                                });
                                Bb.loaded ? (0 < Ga[Za].length && Bb.setDefinitionExpression(Ga[Za]),
                                fa(P, Fa || Wa.layers, Bb, Ka[Za])) : w.connect(Bb, "onLoad", function(tb) {
                                    0 < Ga[Za].length && Bb.setDefinitionExpression(Ga[Za]);
                                    fa(P, Fa || Wa.layers, tb, Ka[Za])
                                })
                            }
                            $a.push(Bb)
                        }
                    });
                    0 < $a.length && (w.connect(P, "onVisibilityChange", y.hitch(this, function(Ta, Za) {
                        b.forEach(Ta, function(ab) {
                            Za ? ab.show() : ab.hide()
                        })
                    }, $a)),
                    w.connect(ua, "onLayerRemove", y.hitch(this, function(Ta, Za, ab) {
                        Ta.id === ab.id && b.forEach(Za, function(fb) {
                            ua.removeLayer(fb)
                        })
                    }, P, $a)));
                    delete P.__popups;
                    delete P.__popupIds;
                    delete P.__popupUrls;
                    delete P.__popupWhereClauses;
                    delete P.__popupMinScales;
                    delete P.__popupMaxScales;
                    delete P.__resourceInfo;
                    return $a
                }
                function va(P) {
                    return q({
                        url: X(P.url + "/layers"),
                        content: {
                            f: "json"
                        },
                        callbackParamName: "callback",
                        error: function() {}
                    })
                }
                function Ca(P, Fa, Ba) {
                    var ua = [];
                    b.forEach(P, function(Ka) {
                        var Ia = Ka.__popups;
                        Ia && 1 < Ia.length && 10 <= Ka.version && (Ka.__deferredsPos = ua.length,
                        ua.push(va(Ka)))
                    });
                    var za = [];
                    0 < ua.length ? (new f(ua)).addCallback(function(Ka) {
                        b.forEach(P, function(Ia) {
                            Ia.__popups && 0 < Ia.__popups.length && (Ia.__deferredsPos || 0 === Ia.__deferredsPos ? (za = za.concat(ra(Ia, Ka[Ia.__deferredsPos][1].layers, Ba, Fa)),
                            delete Ia.__deferredsPos) : za = za.concat(ra(Ia, null, Ba, Fa)))
                        });
                        Fa.addLayers(za)
                    }) : (b.forEach(P, function(Ka) {
                        Ka.__popups && 0 < Ka.__popups.length && (za = za.concat(ra(Ka, null, Ba, Fa)))
                    }),
                    Fa.addLayers(za))
                }
                function Da(P) {
                    b.forEach(P, function(Fa) {
                        var Ba = Fa.layer;
                        Ba.toJson && (Fa = Ba.toJson(),
                        Fa.featureSet && Ba.name && -1 < Ba.name.indexOf("Text") && b.forEach(Fa.featureSet.features, function(ua, za) {
                            ua.attributes.TEXT && (za = Ba.graphics[za],
                            za.symbol.setText(ua.attributes.TEXT),
                            ua.symbol.horizontalAlignment && (za.symbol.align = ua.symbol.horizontalAlignment),
                            za.setSymbol(za.symbol),
                            za.setAttributes(ua.attributes))
                        }, this))
                    })
                }
                function Ra(P) {
                    var Fa = 6;
                    b.forEach(P, function(Ba) {
                        if (Ba = Ba.renderer)
                            "esri.renderer.SimpleRenderer" === Ba.declaredClass ? ((Ba = Ba.symbol) && Ba.xoffset && (Fa = Math.max(Fa, Math.abs(Ba.xoffset))),
                            Ba && Ba.yoffset && (Fa = Math.max(Fa, Math.abs(Ba.yoffset)))) : "esri.renderer.UniqueValueRenderer" !== Ba.declaredClass && "esri.renderer.ClassBreaksRenderer" !== Ba.declaredClass || b.forEach(Ba.infos, function(ua) {
                                (ua = ua.symbol) && ua.xoffset && (Fa = Math.max(Fa, Math.abs(ua.xoffset)));
                                ua && ua.yoffset && (Fa = Math.max(Fa, Math.abs(ua.yoffset)))
                            })
                    });
                    return Fa
                }
                function Na(P) {
                    var Fa = this
                      , Ba = Fa.infoWindow
                      , ua = P.graphic;
                    if (Fa.loaded) {
                        Ba.hide();
                        Ba.clearFeatures();
                        var za = [];
                        b.forEach(Fa.graphicsLayerIds, function(Ta) {
                            (Ta = Fa.getLayer(Ta)) && Ta instanceof V && Ta.loaded && Ta.visible && (Ta.clearSelection(),
                            Ta.infoTemplate && !Ta.suspended && za.push(Ta))
                        });
                        b.forEach(Fa.layerIds, function(Ta) {
                            (Ta = Fa.getLayer(Ta)) && (-1 !== Ta.declaredClass.indexOf("ArcGISImageServiceLayer") || -1 !== Ta.declaredClass.indexOf("RasterXLayer")) && Ta.loaded && Ta.visible && Ta.infoTemplate && za.push(Ta)
                        });
                        ua = ua && ua.getInfoTemplate() ? ua : null;
                        if (za.length || ua) {
                            var Ka = Ra(za)
                              , Ia = P.screenPoint
                              , Ga = Fa.toMap(new p(Ia.x - Ka,Ia.y + Ka));
                            Ka = Fa.toMap(new p(Ia.x + Ka,Ia.y - Ka));
                            var La = new r(Ga.x,Ga.y,Ka.x,Ka.y,Fa.spatialReference)
                              , Sa = new H;
                            Sa.geometry = La;
                            Sa.timeExtent = Fa.timeExtent;
                            var Wa = !0;
                            Ga = b.map(za, function(Ta) {
                                Ta = Ta && Ta.isFeatureReductionActive && Ta.isFeatureReductionActive() ? Ta.getFeatureReductionLayer() : Ta;
                                if (-1 !== Ta.declaredClass.indexOf("ArcGISImageServiceLayer")) {
                                    Sa.geometry = P.mapPoint;
                                    Wa = !1;
                                    var Za = Ta.queryVisibleRasters(Sa, {
                                        rasterAttributeTableFieldPrefix: "Raster.",
                                        returnDomainValues: !0
                                    });
                                    Za.addCallback(function() {
                                        return Ta.getVisibleRasters()
                                    })
                                } else if (-1 !== Ta.declaredClass.indexOf("RasterXLayer"))
                                    Za = Ta.fetchPopupFromTiles({
                                        geometry: P.mapPoint
                                    });
                                else if ("function" === typeof Ta.selectFeatures)
                                    Za = Ta.selectFeatures(Sa),
                                    Za.addCallback(function() {
                                        return Ta.getSelectedFeatures()
                                    });
                                else {
                                    Za = new m;
                                    var ab = b.filter(Ta.graphics, function(fb) {
                                        return fb && fb.visible && La.intersects(fb.geometry)
                                    });
                                    Za.resolve(ab)
                                }
                                return Za
                            });
                            ua && (Ka = new m,
                            Ka.callback([ua]),
                            Ga.splice(0, 0, Ka));
                            if (!b.some(Ga, function(Ta) {
                                return -1 === Ta.fired
                            })) {
                                var $a = ua ? 1 : 0;
                                b.forEach(za, function(Ta) {
                                    $a = -1 !== Ta.declaredClass.indexOf("ArcGISImageServiceLayer") ? $a + Ta.getVisibleRasters().length : -1 !== Ta.declaredClass.indexOf("RasterXLayer") ? $a + Ta.getPopupFromTiles().length : $a + Ta.getSelectedFeatures().length
                                });
                                if (!$a)
                                    return
                            }
                            Ba.setFeatures(Ga);
                            Ba.show(P.mapPoint, {
                                closestFirst: Wa
                            })
                        }
                    }
                }
                function Ja(P, Fa) {
                    var Ba = Fa.mapOptions || {};
                    if (!Ba.infoWindow) {
                        var ua = new E({
                            visibleWhenEmpty: !1
                        },d.create("div"));
                        Ba.infoWindow = ua
                    }
                    g.isDefined(Ba.showInfoWindowOnClick) || Fa.usePopupManager || (Ba.showInfoWindowOnClick = !1);
                    P = new v(P,Ba);
                    w.connect(P, "onLayersAddResult", Da);
                    return P
                }
                function Pa(P, Fa, Ba, ua, za, Ka) {
                    if (ua.map) {
                        var Ia = ua.map;
                        var Ga = ua.clickEventHandle;
                        var La = ua.clickEventListener;
                        var Sa = ua.errors
                    } else {
                        var Wa = Ba.itemData;
                        !za.mapOptions.backgroundColor && Wa.background && Wa.background.color && null != Wa.background.color[0] && (za.mapOptions.backgroundColor = t.toDojoColor(Wa.background.color));
                        Ia = Ja(ua, za);
                        za.ignorePopups || za.disableClickBehavior || za.usePopupManager || (Ga = w.connect(Ia, "onClick", Na),
                        La = Na)
                    }
                    Ia.addLayers(P);
                    za.ignorePopups || za.usePopupManager || Ca(P, Ia, za._clazz);
                    var $a = Sa || [];
                    b.forEach(Fa, function(Ta) {
                        Ta.errors && ($a = $a.concat(Ta.errors))
                    }, this);
                    Ia.loaded ? Ka.callback({
                        map: Ia,
                        itemInfo: Ba,
                        errors: $a,
                        clickEventHandle: Ga,
                        clickEventListener: La
                    }) : w.connect(Ia, "onLoad", function() {
                        Ka.callback({
                            map: Ia,
                            itemInfo: Ba,
                            errors: $a,
                            clickEventHandle: Ga,
                            clickEventListener: La
                        })
                    })
                }
                function eb(P, Fa, Ba, ua, za) {
                    var Ka = [];
                    b.forEach(za, function(La) {
                        y.isArray(La.layerObject) ? b.forEach(La.layerObject, function(Sa) {
                            Ka.push(Sa)
                        }) : Ka.push(La.layerObject)
                    });
                    if (Y(za[0]))
                        var Ia = setInterval(function() {
                            if (za[0].layerObject && za[0].layerObject.loaded)
                                clearInterval(Ia),
                                bb(P, Fa, Ba, ua, za, Ka);
                            else if (za[0].errors) {
                                clearInterval(Ia);
                                var La = "";
                                za[0].errors && za[0].errors.length && (La = " (" + za[0].errors[0].message + ")");
                                ua.errback(Error(aa.arcgis.utils.baseLayerError + La))
                            }
                        }, 10);
                    else if (!Ka[0] && za[0].baseMapLayer) {
                        var Ga = "";
                        za[0].errors && za[0].errors.length && (Ga = " (" + za[0].errors[0].message + ")");
                        ua.errback(Error(aa.arcgis.utils.baseLayerError + Ga))
                    } else
                        bb(P, Fa, Ba, ua, za, Ka)
                }
                function bb(P, Fa, Ba, ua, za, Ka) {
                    try {
                        var Ia = Ba.mapOptions || {};
                        Ba.mapOptions = Ia;
                        Ka = b.filter(Ka, g.isDefined);
                        if (Fa.map || Ia.extent)
                            Pa(Ka, za, P, Fa, Ba, ua);
                        else {
                            var Ga = Ka[0].spatialReference;
                            if (Ia.center && (null != Ia.zoom || Ia.scale) && (y.isArray(Ia.center) && (Ia.center = new u(Ia.center)),
                            B.canProject(Ia.center, Ga))) {
                                Pa(Ka, za, P, Fa, Ba, ua);
                                return
                            }
                            var La = P.item;
                            if (La && La.extent && La.extent.length) {
                                var Sa = new r(La.extent[0][0],La.extent[0][1],La.extent[1][0],La.extent[1][1],new x({
                                    wkid: 4326
                                }));
                                4326 === Ga.wkid ? (Ia.extent = Sa,
                                Pa(Ka, za, P, Fa, Ba, ua)) : 900913 === Ga.wkid || 102100 === Ga.wkid || 102113 === Ga.wkid || 3857 === Ga.wkid ? (Sa.xmin = Math.max(Sa.xmin, -180),
                                Sa.xmax = Math.min(Sa.xmax, 180),
                                Sa.ymin = Math.max(Sa.ymin, -89.99),
                                Sa.ymax = Math.min(Sa.ymax, 89.99),
                                Ia.extent = B.geographicToWebMercator(Sa),
                                Pa(Ka, za, P, Fa, Ba, ua)) : Ba.geometryServiceURL || n.defaults.geometryService ? (Ba.geometryServiceURL ? new J(Ba.geometryServiceURL) : n.defaults.geometryService).project([Sa], Ga, function(Wa) {
                                    Wa = Wa[0];
                                    Ia.extent = Ia.extent || Wa;
                                    Pa(Ka, za, P, Fa, Ba, ua)
                                }, function() {
                                    Pa(Ka, za, P, Fa, Ba, ua)
                                }) : ua.errback(Error(aa.arcgis.utils.geometryServiceError))
                            } else
                                Pa(Ka, za, P, Fa, Ba, ua)
                        }
                    } catch (Wa) {
                        ua.errback(Wa)
                    }
                }
                function gb(P) {
                    var Fa = [];
                    b.forEach(P.operationalLayers, function(Ba) {
                        Ba.featureCollection ? Fa.push({
                            featureCollection: Ba.featureCollection,
                            visibility: null != Ba.visibility ? !!Ba.visibility : !0,
                            title: Ba.title
                        }) : Ba.layerObject && Fa.push({
                            layer: Ba.layerObject,
                            visibility: null != Ba.visibility ? !!Ba.visibility : !0,
                            title: Ba.title
                        })
                    });
                    return Fa
                }
                function cb(P) {
                    var Fa = []
                      , Ba = P.baseMap.baseMapLayers;
                    P.operationalLayers && (Ba = Ba.concat(P.operationalLayers));
                    b.forEach(Ba, function(ua) {
                        var za = {};
                        if (ua.featureCollection && (!ua || "CSV" !== ua.layerType && "CSV" !== ua.type))
                            !0 === ua.featureCollection.showLegend && b.forEach(ua.featureCollection.layers, function(Ga) {
                                if (!1 !== Ga.showLegend) {
                                    var La = Ga.layerObject.renderer;
                                    za = {
                                        layer: Ga.layerObject,
                                        title: ua.title,
                                        defaultSymbol: La && La.defaultSymbol && La.defaultLabel ? !0 : !1
                                    };
                                    1 < ua.featureCollection.layers.length && (za.title += " - " + Ga.layerDefinition.name);
                                    Fa.push(za)
                                }
                            });
                        else if (ua.baseMapLayer && !0 === ua.showLegend && ua.layerObject || !ua.baseMapLayer && !1 !== ua.showLegend && ua.layerObject && !(ua.layerObject instanceof V && ua.layerObject.mode === V.MODE_SELECTION)) {
                            var Ka = ua.layerObject.renderer
                              , Ia = ua.layerObject.declaredClass;
                            Ka = !Ka || Ka && Ka.defaultSymbol && Ka.defaultLabel ? !0 : !1;
                            if (10.1 > ua.layerObject.version && ("esri.layers.ArcGISDynamicMapServiceLayer" === Ia || "esri.layers.ArcGISTiledMapServiceLayer" === Ia) || "esri.layers.ArcGISImageServiceLayer" === Ia)
                                Ka = !0;
                            za = {
                                layer: ua.layerObject,
                                title: ua.title,
                                defaultSymbol: Ka
                            };
                            ua.layers && (Ia = b.map(b.filter(ua.layers, function(Ga) {
                                return !1 === Ga.showLegend
                            }), function(Ga) {
                                return Ga.id
                            }),
                            Ia.length && (za.hideLayers = Ia));
                            Fa.push(za)
                        }
                    });
                    return Fa
                }
                function kb(P, Fa) {
                    function Ba(Ga, La) {
                        b.forEach(Ga, function(Sa, Wa) {
                            switch (Sa) {
                            case "../layers/ArcGISDynamicMapServiceLayer":
                                jb = La[Wa];
                                break;
                            case "../layers/ArcGISImageServiceLayer":
                                nb = La[Wa];
                                break;
                            case "../layers/ArcGISImageServiceVectorLayer":
                                Jb = La[Wa];
                                break;
                            case "../layers/CSVLayer":
                                Ab = La[Wa];
                                break;
                            case "../layers/DynamicLayerInfo":
                                vb = La[Wa];
                                break;
                            case "../layers/GeoRSSLayer":
                                Tb = La[Wa];
                                break;
                            case "../layers/ImageParameters":
                                zb = La[Wa];
                                break;
                            case "../layers/ImageServiceParameters":
                                Db = La[Wa];
                                break;
                            case "../layers/KMLLayer":
                                Kb = La[Wa];
                                break;
                            case "../layers/LabelClass":
                                Qb = La[Wa];
                                break;
                            case "../layers/LayerDrawingOptions":
                                Gb = La[Wa];
                                break;
                            case "../layers/MosaicRule":
                                Rb = La[Wa];
                                break;
                            case "../layers/OpenStreetMapLayer":
                                jc = La[Wa];
                                break;
                            case "../layers/RasterFunction":
                                $b = La[Wa];
                                break;
                            case "../layers/RasterXLayer":
                                ac = La[Wa];
                                break;
                            case "../layers/StreamLayer":
                                Vb = La[Wa];
                                break;
                            case "../layers/TileInfo":
                                kc = La[Wa];
                                break;
                            case "../layers/VectorTileLayer":
                                bc = La[Wa];
                                break;
                            case "../virtualearth/VETiledLayer":
                                Eb = La[Wa];
                                break;
                            case "../layers/WebTiledLayer":
                                Wb = La[Wa];
                                break;
                            case "../layers/WFSLayer":
                                lc = La[Wa];
                                break;
                            case "../layers/WMSLayer":
                                cc = La[Wa];
                                break;
                            case "../layers/WMSLayerInfo":
                                mc = La[Wa]
                            }
                        })
                    }
                    var ua = new m;
                    P = P.itemData;
                    Fa = [];
                    P.baseMap && P.baseMap.baseMapLayers && (Fa = Fa.concat(P.baseMap.baseMapLayers));
                    P.operationalLayers && (Fa = Fa.concat(P.operationalLayers));
                    P = b.map(Fa, function(Ga) {
                        return Ga && Ga.layerType
                    });
                    var za = []
                      , Ka = [];
                    Fa = !1;
                    for (var Ia = 0; Ia < P.length; Ia++) {
                        switch (P[Ia]) {
                        case "ArcGISFeatureLayer":
                            -1 === b.indexOf(za, "../layers/LabelClass") && za.push("../layers/LabelClass");
                            break;
                        case "ArcGISImageServiceLayer":
                        case "ArcGISTiledImageServiceLayer":
                            -1 === b.indexOf(za, "../layers/ArcGISImageServiceLayer") && (za.push("../layers/ArcGISImageServiceLayer"),
                            Ka.push("../layers/ImageServiceParameters"),
                            Ka.push("../layers/MosaicRule"),
                            Ka.push("../layers/RasterFunction"),
                            za.push("../layers/RasterXLayer"));
                            break;
                        case "ArcGISImageServiceVectorLayer":
                            -1 === b.indexOf(za, "../layers/ArcGISImageServiceVectorLayer") && (za.push("../layers/ArcGISImageServiceVectorLayer"),
                            Ka.push("../layers/ImageServiceParameters"),
                            Ka.push("../layers/MosaicRule"),
                            Ka.push("../layers/RasterFunction"));
                            break;
                        case "ArcGISMapServiceLayer":
                        case "ArcGISTiledMapServiceLayer":
                            -1 === b.indexOf(za, "../layers/ArcGISDynamicMapServiceLayer") && (za.push("../layers/ArcGISDynamicMapServiceLayer"),
                            Ka.push("../layers/DynamicLayerInfo"),
                            Ka.push("../layers/ImageParameters"),
                            Ka.push("../layers/LayerDrawingOptions"));
                            break;
                        case "ArcGISStreamLayer":
                            -1 === b.indexOf(za, "../layers/StreamLayer") && za.push("../layers/StreamLayer");
                            -1 === b.indexOf(za, "../layers/LabelClass") && za.push("../layers/LabelClass");
                            break;
                        case "BingMapsAerial":
                        case "BingMapsHybrid":
                        case "BingMapsRoad":
                            -1 === b.indexOf(za, "../virtualearth/VETiledLayer") && za.push("../virtualearth/VETiledLayer");
                            break;
                        case "CSV":
                            -1 === b.indexOf(za, "../layers/CSVLayer") && (za.push("../layers/CSVLayer"),
                            Ka.push("./csv"));
                            break;
                        case "GeoRSS":
                            -1 === b.indexOf(za, "../layers/GeoRSSLayer") && za.push("../layers/GeoRSSLayer");
                            break;
                        case "KML":
                            -1 === b.indexOf(za, "../layers/KMLLayer") && za.push("../layers/KMLLayer");
                            break;
                        case "OpenStreetMap":
                            -1 === b.indexOf(za, "../layers/OpenStreetMapLayer") && za.push("../layers/OpenStreetMapLayer");
                            break;
                        case "VectorTileLayer":
                            -1 === b.indexOf(za, "../layers/VectorTileLayer") && za.push("../layers/VectorTileLayer");
                            break;
                        case "WebTiledLayer":
                            -1 === b.indexOf(za, "../layers/WebTiledLayer") && (za.push("../layers/WebTiledLayer"),
                            Ka.push("../layers/TileInfo"));
                            break;
                        case "WFS":
                            -1 === b.indexOf(za, "../layers/WFSLayer") && za.push("../layers/WFSLayer");
                            break;
                        case "WMS":
                            -1 === b.indexOf(za, "../layers/WMSLayer") && (za.push("../layers/WMSLayer"),
                            Ka.push("../layers/WMSLayerInfo"));
                            break;
                        default:
                            Fa = !0
                        }
                        if (Fa)
                            break
                    }
                    Fa && (za = pc,
                    Ka = Ib);
                    za.length ? C(za, function() {
                        Ba(za, arguments);
                        Ka.length ? C(Ka, function() {
                            Ba(Ka, arguments);
                            ua.resolve()
                        }) : ua.resolve()
                    }) : ua.resolve();
                    return ua
                }
                function ub(P) {
                    P = P.itemData;
                    var Fa = function(ua, za) {
                        "GroupLayer" === ua.layerType ? b.forEach(ua.layers, function(Ka) {
                            Ka.visibility = !1 === ua.visibility ? !1 : Ka.visibility;
                            Ka.opacity = g.isDefined(ua.opacity) ? g.isDefined(Ka.opacity) ? Ka.opacity * ua.opacity : ua.opacity : Ka.opacity;
                            Fa(Ka, za)
                        }) : za.push(ua)
                    }
                      , Ba = [];
                    b.forEach(P.operationalLayers, function(ua) {
                        Fa(ua, Ba)
                    });
                    P.operationalLayers = Ba
                }
                function ob(P, Fa, Ba, ua) {
                    ub(ua);
                    var za = ua.itemData;
                    za.baseMap && za.baseMap.baseMapLayers && za.baseMap.baseMapLayers.length && (za.baseMap.baseMapLayers[0].firstLayer = !0);
                    var Ka = Fa.layerMixins
                      , Ia = Ka && Ka.length;
                    if (Ia) {
                        var Ga = function(La) {
                            for (var Sa = 0; Sa < Ia; Sa++) {
                                var Wa = Ka[Sa];
                                if (Wa.mixin)
                                    if (Wa.hasOwnProperty("id")) {
                                        if (La.id === Wa.id) {
                                            y.mixin(La, Wa.mixin);
                                            break
                                        }
                                    } else if (La.url === Wa.url) {
                                        y.mixin(La, Wa.mixin);
                                        break
                                    }
                            }
                        };
                        b.forEach(za.baseMap && za.baseMap.baseMapLayers, Ga);
                        b.forEach(za.operationalLayers, Ga)
                    }
                    kb(ua, Fa).then(function() {
                        return ha(ua, Fa)
                    }).then(function() {
                        return R(ua, Fa)
                    }).then(function(La) {
                        var Sa = La[0]
                          , Wa = La[1];
                        if (Sa.itemData.operationalLayers && 0 !== Sa.itemData.operationalLayers.length) {
                            var $a = new m
                              , Ta = Sa.itemData.baseMap.baseMapLayers.slice()
                              , Za = b.filter(Sa.itemData.baseMap.baseMapLayers, function(ab) {
                                return !ab.isReference
                            });
                            La = {
                                item: Sa.item,
                                itemData: {
                                    baseMap: {
                                        baseMapLayers: Za
                                    },
                                    background: y.clone(Sa.itemData.background)
                                }
                            };
                            Sa.itemData.baseMap.baseMapLayers = b.filter(Sa.itemData.baseMap.baseMapLayers, function(ab) {
                                return ab.isReference
                            });
                            L(La, Wa).addCallback(function(ab) {
                                M(ab.itemData, Wa).addCallback(y.hitch(null, eb, ab, P, Wa, $a))
                            });
                            $a.then(function(ab) {
                                L(Sa, Wa).addCallback(function(fb) {
                                    M(fb.itemData, Wa, ab.map.spatialReference, Za, ab.map).addCallback(function(Bb) {
                                        fb.itemData.baseMap.baseMapLayers = Ta;
                                        eb(fb, ab, Wa, Ba, Bb)
                                    })
                                })
                            }, y.hitch(Ba, Ba.errback))
                        } else
                            L(Sa, Wa).addCallback(function(ab) {
                                M(ab.itemData, Wa).addCallback(y.hitch(null, eb, ab, P, Wa, Ba))
                            })
                    })
                }
                function db(P, Fa) {
                    "undefined" === typeof Fa && (Fa = !0);
                    rb._arcgisUrl && 0 < rb._arcgisUrl.length && (rb.arcgisUrl = rb._arcgisUrl);
                    var Ba = {}
                      , ua = new m;
                    q({
                        url: rb.arcgisUrl + "/" + P,
                        content: {
                            f: "json"
                        },
                        callbackParamName: "callback",
                        load: function(za) {
                            Ba.item = za;
                            Fa ? q({
                                url: rb.arcgisUrl + "/" + P + "/data",
                                content: {
                                    f: "json"
                                },
                                callbackParamName: "callback",
                                load: function(Ka) {
                                    Ba.itemData = Ka;
                                    ua.callback(Ba)
                                },
                                error: function(Ka) {
                                    ua.errback(Ka)
                                }
                            }) : ua.callback(Ba)
                        },
                        error: function(za) {
                            ua.errback(za)
                        }
                    });
                    return ua
                }
                var jb, nb, Jb, Ab, vb, Tb, zb, Db, Kb, Qb, Gb, Rb, jc, $b, ac, Vb, kc, bc, Eb, Wb, lc, cc, mc, pc = "../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "), Ib = "./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/WMSLayerInfo".split(" ");
                var rb = {
                    arcgisUrl: z.getProtocolForWebResource() + "//www.arcgis.com/sharing/rest/content/items",
                    getItem: db,
                    createMap: function(P, Fa, Ba) {
                        var ua = new m;
                        Ba = Ba || {};
                        var za = Ba.infoTemplateClass;
                        Ba._clazz = za && (y.isObject(za) ? za : y.getObject(za)) || A;
                        y.isString(P) ? db(P).addCallback(y.hitch(null, ob, Fa, Ba, ua)).addErrback(y.hitch(ua, ua.errback)) : ob(Fa, Ba, ua, P);
                        ua.addCallback(function(Ka) {
                            var Ia = Ka.map;
                            Ia && (Ia.tables = y.getObject("itemInfo.itemData.tables", !1, Ka) || [])
                        });
                        return ua
                    },
                    getLayerList: function(P) {
                        return P && P.itemInfo && P.itemInfo.itemData ? gb(P.itemInfo.itemData) : []
                    },
                    getLegendLayers: function(P) {
                        return P && P.itemInfo && P.itemInfo.itemData ? cb(P.itemInfo.itemData) : []
                    },
                    _arcgisUrl: null,
                    _getItemProps: L,
                    _getItemData: wa,
                    _getBingKey: K,
                    _portalUrlResponse: na,
                    _portalUrlFailure: ta,
                    _processFSItemProperties: Z,
                    _processSSItemProperties: pa,
                    _getLayers: M,
                    _preBuildLayerObjects: Ua,
                    _buildLayerObjects: ya,
                    _preCreateMap: eb,
                    _getMapSR: Oa,
                    _createMap: Pa,
                    _addSelectionLayers: Ca,
                    _createSelectionFeatureLayers: ra,
                    _getServiceInfo: Ma,
                    _getFeatureCollectionItem: I,
                    _mergeFeatureCollectionItem: Q,
                    _projectFeatureCollection: ba,
                    _getLayersInfo: va,
                    _initLayer: sa,
                    _loadAsCached: oa,
                    _loadAsDynamic: Ea,
                    _processPopups: Aa,
                    _onLayersAddResult: Da,
                    _sameSpatialReferenceAsBasemap: U,
                    _sameTilingSchemeAsBasemap: ma,
                    _showPopup: Na,
                    _calculateClickTolerance: Ra,
                    _getVisibleFeatureLayers: ka,
                    _updateLayerScaleInfo: fa,
                    _checkUrl: X,
                    _isHostedService: ca,
                    _isAgolService: ja,
                    _getLegendLayers: cb
                };
                y.setObject("arcgis.utils", rb, e);
                return rb
            })
        },
        "esri/tasks/GeometryService": function() {
            define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "), function(C, y, b, w, m, l, k, h, f, d, a, c, e, n, t) {
                C = C(d, {
                    declaredClass: "esri.tasks.GeometryService",
                    _eventMap: {
                        "areas-and-lengths-complete": ["result"],
                        "auto-complete-complete": ["geometries"],
                        "buffer-complete": ["geometries"],
                        "convex-hull-complete": ["geometry"],
                        "cut-complete": ["result"],
                        "densify-complete": ["geometries"],
                        "difference-complete": ["geometries"],
                        "distance-complete": ["distance"],
                        "generalize-complete": ["geometries"],
                        "intersect-complete": ["geometries"],
                        "label-points-complete": ["geometries"],
                        "lengths-complete": ["result"],
                        "offset-complete": ["geometries"],
                        "project-complete": ["geometries"],
                        "relation-complete": ["relations"],
                        "reshape-complete": ["geometry"],
                        "simplify-complete": ["geometries"],
                        "trim-extend-complete": ["geometries"],
                        "union-complete": ["geometry"]
                    },
                    constructor: function(g) {
                        g = y.hitch;
                        this._projectHandler = g(this, this._projectHandler);
                        this._simplifyHandler = g(this, this._simplifyHandler);
                        this._bufferHandler = g(this, this._bufferHandler);
                        this._areasAndLengthsHandler = g(this, this._areasAndLengthsHandler);
                        this._lengthsHandler = g(this, this._lengthsHandler);
                        this._labelPointsHandler = g(this, this._labelPointsHandler);
                        this._relationHandler = g(this, this._relationHandler);
                        this._convexHullHandler = g(this, this._convexHullHandler);
                        this._unionHandler = g(this, this._unionHandler);
                        this._autoCompleteHandler = g(this, this._autoCompleteHandler);
                        this._reshapeHandler = g(this, this._reshapeHandler);
                        this._cutHandler = g(this, this._cutHandler);
                        this._intersectHandler = g(this, this._intersectHandler);
                        this._differenceHandler = g(this, this._differenceHandler);
                        this._trimExtendHandler = g(this, this._trimExtendHandler);
                        this._densifyHandler = g(this, this._densifyHandler);
                        this._generalizeHandler = g(this, this._densifyHandler);
                        this._offsetHandler = g(this, this._offsetHandler);
                        this._distanceHandler = g(this, this._distanceHandler);
                        this._toGeoCoordinateHandler = g(this, this._toGeoCoordinateHandler);
                        this._fromGeoCoordinateHandler = g(this, this._fromGeoCoordinateHandler);
                        this.registerConnectEvents()
                    },
                    _encodeGeometries: function(g) {
                        var q = [], x, v = g.length;
                        for (x = 0; x < v; x++)
                            q.push(g[x].toJson());
                        return {
                            geometryType: t.getJsonType(g[0]),
                            geometries: q
                        }
                    },
                    _decodeGeometries: function(g, q, x) {
                        var v = t.getGeometryType(q);
                        g = g.geometries;
                        var z = []
                          , u = {
                            spatialReference: x.toJson()
                        }
                          , p = y.mixin;
                        b.forEach(g, function(r, B) {
                            z[B] = new v(p(r, u))
                        });
                        return z
                    },
                    _toProjectGeometry: function(g) {
                        var q = g.spatialReference.toJson();
                        return g instanceof a ? new e({
                            rings: [[[g.xmin, g.ymin], [g.xmin, g.ymax], [g.xmax, g.ymax], [g.xmax, g.ymin], [g.xmin, g.ymin]]],
                            spatialReference: q
                        }) : new c({
                            paths: [[].concat(g.points)],
                            spatialReference: q
                        })
                    },
                    _fromProjectedGeometry: function(g, q, x) {
                        return "esriGeometryEnvelope" === q ? (g = g.rings[0],
                        new a(g[0][0],g[0][1],g[2][0],g[2][1],x)) : new n({
                            points: g.paths[0],
                            spatialReference: x.toJson()
                        })
                    },
                    project: function(g, q, x, v) {
                        var z = y.mixin({}, this._url.query, {
                            f: "json"
                        });
                        if (g.geometries) {
                            v = x;
                            x = q;
                            q = g.outSR;
                            var u = g.geometries[0];
                            z = y.mixin(z, g.toJson())
                        } else
                            u = g[0],
                            z = y.mixin(z, {
                                outSR: q.wkid || w.toJson(q.toJson()),
                                inSR: u.spatialReference.wkid || w.toJson(u.spatialReference.toJson()),
                                geometries: w.toJson(this._encodeGeometries(g))
                            });
                        var p = t.getJsonType(u)
                          , r = this._projectHandler
                          , B = this._errorHandler
                          , D = new m(f._dfdCanceller);
                        D._pendingDfd = h({
                            url: this._url.path + "/project",
                            content: z,
                            callbackParamName: "callback",
                            load: function(G, A) {
                                r(G, A, p, q, x, v, D)
                            },
                            error: function(G) {
                                B(G, v, D)
                            }
                        });
                        return D
                    },
                    _projectHandler: function(g, q, x, v, z, u, p) {
                        try {
                            var r = this._decodeGeometries(g, x, v);
                            this._successHandler([r], "onProjectComplete", z, p)
                        } catch (B) {
                            this._errorHandler(B, u, p)
                        }
                    },
                    onProjectComplete: function() {},
                    simplify: function(g, q, x) {
                        var v = g[0].spatialReference
                          , z = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: v.wkid ? v.wkid : w.toJson(v.toJson()),
                            geometries: w.toJson(this._encodeGeometries(g))
                        })
                          , u = t.getJsonType(g[0])
                          , p = this._simplifyHandler
                          , r = this._errorHandler
                          , B = new m(f._dfdCanceller);
                        B._pendingDfd = h({
                            url: this._url.path + "/simplify",
                            content: z,
                            callbackParamName: "callback",
                            load: function(D, G) {
                                p(D, G, u, v, q, x, B)
                            },
                            error: function(D) {
                                r(D, x, B)
                            }
                        });
                        return B
                    },
                    _simplifyHandler: function(g, q, x, v, z, u, p) {
                        try {
                            var r = this._decodeGeometries(g, x, v);
                            this._successHandler([r], "onSimplifyComplete", z, p)
                        } catch (B) {
                            this._errorHandler(B, u, p)
                        }
                    },
                    onSimplifyComplete: function() {},
                    convexHull: function(g, q, x) {
                        var v = g[0].spatialReference;
                        g = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: w.toJson(v.toJson()),
                            geometries: w.toJson(this._encodeGeometries(g))
                        });
                        var z = this._convexHullHandler
                          , u = this._errorHandler
                          , p = new m(f._dfdCanceller);
                        p._pendingDfd = h({
                            url: this._url.path + "/convexHull",
                            content: g,
                            callbackParamName: "callback",
                            load: function(r, B) {
                                z(r, B, v, q, x, p)
                            },
                            error: function(r) {
                                u(r, x, p)
                            }
                        });
                        return p
                    },
                    _convexHullHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = t.fromJson(g.geometry).setSpatialReference(x);
                            this._successHandler([p], "onConvexHullComplete", v, u)
                        } catch (r) {
                            this._errorHandler(r, z, u)
                        }
                    },
                    onConvexHullComplete: function() {},
                    union: function(g, q, x) {
                        var v = g[0].spatialReference;
                        g = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: w.toJson(v.toJson()),
                            geometries: w.toJson(this._encodeGeometries(g))
                        });
                        var z = this._unionHandler
                          , u = this._errorHandler
                          , p = new m(f._dfdCanceller);
                        p._pendingDfd = h({
                            url: this._url.path + "/union",
                            content: g,
                            callbackParamName: "callback",
                            load: function(r, B) {
                                z(r, B, v, q, x, p)
                            },
                            error: function(r) {
                                u(r, x, p)
                            }
                        });
                        return p
                    },
                    _unionHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = t.fromJson(g.geometry).setSpatialReference(x);
                            this._successHandler([p], "onUnionComplete", v, u)
                        } catch (r) {
                            this._errorHandler(r, z, u)
                        }
                    },
                    onUnionComplete: function() {},
                    autoComplete: function(g, q, x, v) {
                        var z = g[0].spatialReference;
                        g = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: w.toJson(z.toJson()),
                            polygons: w.toJson(this._encodeGeometries(g).geometries),
                            polylines: w.toJson(this._encodeGeometries(q).geometries)
                        });
                        var u = this._autoCompleteHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/autoComplete",
                            content: g,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, x, v, r)
                            },
                            error: function(B) {
                                p(B, v, r)
                            }
                        });
                        return r
                    },
                    _autoCompleteHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = g.geometries;
                            g = [];
                            var r, B = p.length;
                            for (r = 0; r < B; r++)
                                g[r] = new e({
                                    spatialReference: x,
                                    rings: p[r].rings
                                });
                            this._successHandler([g], "onAutoCompleteComplete", v, u)
                        } catch (D) {
                            this._errorHandler(D, z, u)
                        }
                    },
                    onAutoCompleteComplete: function() {},
                    reshape: function(g, q, x, v) {
                        var z = g.spatialReference;
                        g = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: w.toJson(z.toJson()),
                            target: w.toJson({
                                geometryType: t.getJsonType(g),
                                geometry: g.toJson()
                            }),
                            reshaper: w.toJson(q.toJson())
                        });
                        var u = this._reshapeHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/reshape",
                            content: g,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, x, v, r)
                            },
                            error: function(B) {
                                p(B, v, r)
                            }
                        });
                        return r
                    },
                    _reshapeHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = t.fromJson(g.geometry).setSpatialReference(x);
                            this._successHandler([p], "onReshapeComplete", v, u)
                        } catch (r) {
                            this._errorHandler(r, z, u)
                        }
                    },
                    onReshapeComplete: function() {},
                    cut: function(g, q, x, v) {
                        var z = g[0].spatialReference
                          , u = b.map(g, function(D) {
                            return D.toJson()
                        });
                        g = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: w.toJson(z.toJson()),
                            target: w.toJson({
                                geometryType: t.getJsonType(g[0]),
                                geometries: u
                            }),
                            cutter: w.toJson(q.toJson())
                        });
                        var p = this._cutHandler
                          , r = this._errorHandler
                          , B = new m(f._dfdCanceller);
                        B._pendingDfd = h({
                            url: this._url.path + "/cut",
                            content: g,
                            callbackParamName: "callback",
                            load: function(D, G) {
                                p(D, G, z, x, v, B)
                            },
                            error: function(D) {
                                r(D, v, B)
                            }
                        });
                        return B
                    },
                    _cutHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = g.geometries
                              , r = {};
                            r.cutIndexes = g.cutIndexes;
                            r.geometries = [];
                            b.forEach(p, function(B) {
                                r.geometries.push(t.fromJson(B).setSpatialReference(x))
                            });
                            this._successHandler([r], "onCutComplete", v, u)
                        } catch (B) {
                            this._errorHandler(B, z, u)
                        }
                    },
                    onCutComplete: function() {},
                    intersect: function(g, q, x, v) {
                        var z = g[0].spatialReference;
                        g = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: w.toJson(z.toJson()),
                            geometries: w.toJson(this._encodeGeometries(g)),
                            geometry: w.toJson({
                                geometryType: t.getJsonType(q),
                                geometry: q.toJson()
                            })
                        });
                        var u = this._intersectHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/intersect",
                            content: g,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, x, v, r)
                            },
                            error: function(B) {
                                p(B, v, r)
                            }
                        });
                        return r
                    },
                    _intersectHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = [];
                            b.forEach(g.geometries, function(r) {
                                p.push(t.fromJson(r).setSpatialReference(x))
                            });
                            this._successHandler([p], "onIntersectComplete", v, u)
                        } catch (r) {
                            this._errorHandler(r, z, u)
                        }
                    },
                    onIntersectComplete: function() {},
                    difference: function(g, q, x, v) {
                        var z = g[0].spatialReference;
                        g = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: w.toJson(z.toJson()),
                            geometries: w.toJson(this._encodeGeometries(g)),
                            geometry: w.toJson({
                                geometryType: t.getJsonType(q),
                                geometry: q.toJson()
                            })
                        });
                        var u = this._differenceHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/difference",
                            content: g,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, x, v, r)
                            },
                            error: function(B) {
                                p(B, v, r)
                            }
                        });
                        return r
                    },
                    _differenceHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = [];
                            b.forEach(g.geometries, function(r) {
                                p.push(t.fromJson(r).setSpatialReference(x))
                            });
                            this._successHandler([p], "onDifferenceComplete", v, u)
                        } catch (r) {
                            this._errorHandler(r, z, u)
                        }
                    },
                    onDifferenceComplete: function() {},
                    buffer: function(g, q, x) {
                        var v = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson())
                          , z = g.outSpatialReference || g.geometries[0].spatialReference
                          , u = this._bufferHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/buffer",
                            content: v,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, q, x, r)
                            },
                            error: function(B) {
                                p(B, x, r)
                            }
                        });
                        return r
                    },
                    _bufferHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = g.geometries;
                            g = [];
                            var r, B = p.length;
                            for (r = 0; r < B; r++)
                                g[r] = new e({
                                    spatialReference: x,
                                    rings: p[r].rings
                                });
                            this._successHandler([g], "onBufferComplete", v, u)
                        } catch (D) {
                            this._errorHandler(D, z, u)
                        }
                    },
                    onBufferComplete: function() {},
                    areasAndLengths: function(g, q, x) {
                        g = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson());
                        var v = this._areasAndLengthsHandler
                          , z = this._errorHandler
                          , u = new m(f._dfdCanceller);
                        u._pendingDfd = h({
                            url: this._url.path + "/areasAndLengths",
                            content: g,
                            callbackParamName: "callback",
                            load: function(p, r) {
                                v(p, r, q, x, u)
                            },
                            error: function(p) {
                                z(p, x, u)
                            }
                        });
                        return u
                    },
                    _areasAndLengthsHandler: function(g, q, x, v, z) {
                        try {
                            this._successHandler([g], "onAreasAndLengthsComplete", x, z)
                        } catch (u) {
                            this._errorHandler(u, v, z)
                        }
                    },
                    onAreasAndLengthsComplete: function() {},
                    lengths: function(g, q, x) {
                        g = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson());
                        var v = this._lengthsHandler
                          , z = this._errorHandler
                          , u = new m(f._dfdCanceller);
                        u._pendingDfd = h({
                            url: this._url.path + "/lengths",
                            content: g,
                            callbackParamName: "callback",
                            load: function(p, r) {
                                v(p, r, q, x, u)
                            },
                            error: function(p) {
                                z(p, x, u)
                            }
                        });
                        return u
                    },
                    _lengthsHandler: function(g, q, x, v, z) {
                        try {
                            this._successHandler([g], "onLengthsComplete", x, z)
                        } catch (u) {
                            this._errorHandler(u, v, z)
                        }
                    },
                    onLengthsComplete: function() {},
                    labelPoints: function(g, q, x) {
                        var v = b.map(g, function(B) {
                            return B.toJson()
                        })
                          , z = g[0].spatialReference;
                        v = y.mixin({}, this._url.query, {
                            f: "json",
                            sr: z.wkid ? z.wkid : w.toJson(z.toJson()),
                            polygons: w.toJson(v)
                        });
                        var u = this._labelPointsHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/labelPoints",
                            content: v,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, g, z, q, x, r)
                            },
                            error: function(B) {
                                p(B, x, r)
                            }
                        });
                        return r
                    },
                    _labelPointsHandler: function(g, q, x, v, z, u, p) {
                        try {
                            var r = [];
                            b.forEach(g.labelPoints, function(B) {
                                r.push(t.fromJson(B).setSpatialReference(v))
                            });
                            this._successHandler([r], "onLabelPointsComplete", z, p)
                        } catch (B) {
                            this._errorHandler(B, u, p)
                        }
                    },
                    onLabelPointsComplete: function() {},
                    relation: function(g, q, x) {
                        g = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson());
                        var v = this._relationHandler
                          , z = this._errorHandler
                          , u = new m(f._dfdCanceller);
                        u._pendingDfd = h({
                            url: this._url.path + "/relation",
                            content: g,
                            callbackParamName: "callback",
                            load: function(p, r) {
                                v(p, r, q, x, u)
                            },
                            error: function(p) {
                                z(p, x, u)
                            }
                        });
                        return u
                    },
                    _relationHandler: function(g, q, x, v, z) {
                        try {
                            this._successHandler([g.relations], "onRelationComplete", x, z)
                        } catch (u) {
                            this._errorHandler(u, v, z)
                        }
                    },
                    onRelationComplete: function() {},
                    trimExtend: function(g, q, x) {
                        var v = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson())
                          , z = g.sr
                          , u = this._trimExtendHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/trimExtend",
                            content: v,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, q, x, r)
                            },
                            error: function(B) {
                                p(B, x, r)
                            }
                        });
                        return r
                    },
                    _trimExtendHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = g.geometries;
                            g = [];
                            var r, B = p.length;
                            for (r = 0; r < B; r++)
                                g[r] = new c({
                                    spatialReference: x,
                                    paths: p[r].paths
                                });
                            this._successHandler([g], "onTrimExtendComplete", v, u)
                        } catch (D) {
                            this._errorHandler(D, z, u)
                        }
                    },
                    onTrimExtendComplete: function() {},
                    densify: function(g, q, x) {
                        var v = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson())
                          , z = g.geometries[0].spatialReference
                          , u = this._densifyHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/densify",
                            content: v,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, q, x, r)
                            },
                            error: function(B) {
                                p(B, x, r)
                            }
                        });
                        return r
                    },
                    _densifyHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = [];
                            b.forEach(g.geometries, function(r) {
                                p.push(t.fromJson(r).setSpatialReference(x))
                            });
                            this._successHandler([p], "onDensifyComplete", v, u)
                        } catch (r) {
                            this._errorHandler(r, z, u)
                        }
                    },
                    onDensifyComplete: function() {},
                    generalize: function(g, q, x) {
                        var v = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson())
                          , z = g.geometries[0].spatialReference
                          , u = this._generalizeHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/generalize",
                            content: v,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, q, x, r)
                            },
                            error: function(B) {
                                p(B, x, r)
                            }
                        });
                        return r
                    },
                    _generalizeHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = [];
                            b.forEach(g.geometries, function(r) {
                                p.push(t.fromJson(r).setSpatialReference(x))
                            });
                            this._successHandler([p], "onGeneralizeComplete", v, u)
                        } catch (r) {
                            this._errorHandler(r, z, u)
                        }
                    },
                    onGeneralizeComplete: function() {},
                    offset: function(g, q, x) {
                        var v = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson())
                          , z = g.geometries[0].spatialReference
                          , u = this._offsetHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/offset",
                            content: v,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, q, x, r)
                            },
                            error: function(B) {
                                p(B, x, r)
                            }
                        });
                        return r
                    },
                    _offsetHandler: function(g, q, x, v, z, u) {
                        try {
                            var p = [];
                            b.forEach(g.geometries, function(r) {
                                p.push(t.fromJson(r).setSpatialReference(x))
                            });
                            this._successHandler([p], "onOffsetComplete", v, u)
                        } catch (r) {
                            this._errorHandler(r, z, u)
                        }
                    },
                    onOffsetComplete: function() {},
                    distance: function(g, q, x) {
                        var v = y.mixin({}, this._url.query, {
                            f: "json"
                        }, g.toJson())
                          , z = g.geometry1.spatialReference
                          , u = this._distanceHandler
                          , p = this._errorHandler
                          , r = new m(f._dfdCanceller);
                        r._pendingDfd = h({
                            url: this._url.path + "/distance",
                            content: v,
                            callbackParamName: "callback",
                            load: function(B, D) {
                                u(B, D, z, q, x, r)
                            },
                            error: function(B) {
                                p(B, x, r)
                            }
                        });
                        return r
                    },
                    _distanceHandler: function(g, q, x, v, z, u) {
                        try {
                            g = g && g.distance,
                            this._successHandler([g], "onDistanceComplete", v, u)
                        } catch (p) {
                            this._errorHandler(p, z, u)
                        }
                    },
                    onDistanceComplete: function() {},
                    toGeoCoordinateString: function(g, q, x) {
                        var v = {};
                        y.isObject(g.sr) ? v.sr = g.sr.wkid || w.toJson(g.sr.toJson()) : v.sr = g.sr;
                        v.coordinates = w.toJson(g.coordinates);
                        v.conversionType = g.conversionType || "MGRS";
                        v.conversionMode = g.conversionMode;
                        v.numOfDigits = g.numOfDigits;
                        v.rounding = g.rounding;
                        v.addSpaces = g.addSpaces;
                        g = y.mixin({}, this._url.query, {
                            f: "json"
                        }, v);
                        var z = this._toGeoCoordinateHandler
                          , u = this._errorHandler
                          , p = new m(f._dfdCanceller);
                        p._pendingDfd = h({
                            url: this._url.path + "/toGeoCoordinateString",
                            content: g,
                            callbackParamName: "callback",
                            load: function(r, B) {
                                z(r, B, q, x, p)
                            },
                            error: function(r) {
                                u(r, x, p)
                            }
                        });
                        return p
                    },
                    _toGeoCoordinateHandler: function(g, q, x, v, z) {
                        try {
                            this._successHandler([g.strings], "onToGeoCoordinateStringComplete", x, z)
                        } catch (u) {
                            this._errorHandler(u, v, z)
                        }
                    },
                    onToGeoCoordinateStringComplete: function() {},
                    fromGeoCoordinateString: function(g, q, x) {
                        var v = {};
                        y.isObject(g.sr) ? v.sr = g.sr.wkid || w.toJson(g.sr.toJson()) : v.sr = g.sr;
                        v.strings = w.toJson(g.strings);
                        v.conversionType = g.conversionType || "MGRS";
                        v.conversionMode = g.conversionMode;
                        g = y.mixin({}, this._url.query, {
                            f: "json"
                        }, v);
                        var z = this._fromGeoCoordinateHandler
                          , u = this._errorHandler
                          , p = new m(f._dfdCanceller);
                        p._pendingDfd = h({
                            url: this._url.path + "/fromGeoCoordinateString",
                            content: g,
                            callbackParamName: "callback",
                            load: function(r, B) {
                                z(r, B, q, x, p)
                            },
                            error: function(r) {
                                u(r, x, p)
                            }
                        });
                        return p
                    },
                    _fromGeoCoordinateHandler: function(g, q, x, v, z) {
                        try {
                            this._successHandler([g.coordinates], "onToGeoCoordinateStringComplete", x, z)
                        } catch (u) {
                            this._errorHandler(u, v, z)
                        }
                    },
                    onFromGeoCoordinateStringComplete: function() {}
                });
                y.mixin(C, {
                    UNIT_METER: 9001,
                    UNIT_GERMAN_METER: 9031,
                    UNIT_FOOT: 9002,
                    UNIT_SURVEY_FOOT: 9003,
                    UNIT_CLARKE_FOOT: 9005,
                    UNIT_FATHOM: 9014,
                    UNIT_NAUTICAL_MILE: 9030,
                    UNIT_SURVEY_CHAIN: 9033,
                    UNIT_SURVEY_LINK: 9034,
                    UNIT_SURVEY_MILE: 9035,
                    UNIT_KILOMETER: 9036,
                    UNIT_CLARKE_YARD: 9037,
                    UNIT_CLARKE_CHAIN: 9038,
                    UNIT_CLARKE_LINK: 9039,
                    UNIT_SEARS_YARD: 9040,
                    UNIT_SEARS_FOOT: 9041,
                    UNIT_SEARS_CHAIN: 9042,
                    UNIT_SEARS_LINK: 9043,
                    UNIT_BENOIT_1895A_YARD: 9050,
                    UNIT_BENOIT_1895A_FOOT: 9051,
                    UNIT_BENOIT_1895A_CHAIN: 9052,
                    UNIT_BENOIT_1895A_LINK: 9053,
                    UNIT_BENOIT_1895B_YARD: 9060,
                    UNIT_BENOIT_1895B_FOOT: 9061,
                    UNIT_BENOIT_1895B_CHAIN: 9062,
                    UNIT_BENOIT_1895B_LINK: 9063,
                    UNIT_INDIAN_FOOT: 9080,
                    UNIT_INDIAN_1937_FOOT: 9081,
                    UNIT_INDIAN_1962_FOOT: 9082,
                    UNIT_INDIAN_1975_FOOT: 9083,
                    UNIT_INDIAN_YARD: 9084,
                    UNIT_INDIAN_1937_YARD: 9085,
                    UNIT_INDIAN_1962_YARD: 9086,
                    UNIT_INDIAN_1975_YARD: 9087,
                    UNIT_FOOT_1865: 9070,
                    UNIT_RADIAN: 9101,
                    UNIT_DEGREE: 9102,
                    UNIT_ARCMINUTE: 9103,
                    UNIT_ARCSECOND: 9104,
                    UNIT_GRAD: 9105,
                    UNIT_GON: 9106,
                    UNIT_MICRORADIAN: 9109,
                    UNIT_ARCMINUTE_CENTESIMAL: 9112,
                    UNIT_ARCSECOND_CENTESIMAL: 9113,
                    UNIT_MIL6400: 9114,
                    UNIT_BRITISH_1936_FOOT: 9095,
                    UNIT_GOLDCOAST_FOOT: 9094,
                    UNIT_INTERNATIONAL_CHAIN: 109003,
                    UNIT_INTERNATIONAL_LINK: 109004,
                    UNIT_INTERNATIONAL_YARD: 109001,
                    UNIT_STATUTE_MILE: 9093,
                    UNIT_SURVEY_YARD: 109002,
                    UNIT_50KILOMETER_LENGTH: 109030,
                    UNIT_150KILOMETER_LENGTH: 109031,
                    UNIT_DECIMETER: 109005,
                    UNIT_CENTIMETER: 109006,
                    UNIT_MILLIMETER: 109007,
                    UNIT_INTERNATIONAL_INCH: 109008,
                    UNIT_US_SURVEY_INCH: 109009,
                    UNIT_INTERNATIONAL_ROD: 109010,
                    UNIT_US_SURVEY_ROD: 109011,
                    UNIT_US_NAUTICAL_MILE: 109012,
                    UNIT_UK_NAUTICAL_MILE: 109013,
                    UNIT_SQUARE_INCHES: "esriSquareInches",
                    UNIT_SQUARE_FEET: "esriSquareFeet",
                    UNIT_SQUARE_YARDS: "esriSquareYards",
                    UNIT_ACRES: "esriAcres",
                    UNIT_SQUARE_MILES: "esriSquareMiles",
                    UNIT_SQUARE_MILLIMETERS: "esriSquareMillimeters",
                    UNIT_SQUARE_CENTIMETERS: "esriSquareCentimeters",
                    UNIT_SQUARE_DECIMETERS: "esriSquareDecimeters",
                    UNIT_SQUARE_METERS: "esriSquareMeters",
                    UNIT_ARES: "esriAres",
                    UNIT_HECTARES: "esriHectares",
                    UNIT_SQUARE_KILOMETERS: "esriSquareKilometers"
                });
                l("extend-esri") && y.setObject("tasks.GeometryService", C, k);
                return C
            })
        },
        "url:dijit/form/templates/Button.html": '\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
        "url:dijit/form/templates/DropDownButton.html": '\x3cspan class\x3d"dijit dijitReset dijitInline"\r\n\t\x3e\x3cspan class\x3d\'dijitReset dijitInline dijitButtonNode\'\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" data-dojo-attach-point\x3d"_buttonNode"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon"\r\n\t\t\t\tdata-dojo-attach-point\x3d"iconNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitArrowButtonChar"\x3e\x26#9660;\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen" tabIndex\x3d"-1"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick" data-dojo-attach-point\x3d"valueNode" aria-hidden\x3d"true"\r\n/\x3e\x3c/span\x3e\r\n',
        "url:dijit/form/templates/ComboButton.html": '\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
        "url:dijit/templates/TooltipDialog.html": '\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
        "url:esri/core/request/iframe.html": '\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
        "url:dijit/templates/Dialog.html": '\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
        "url:dijit/form/templates/TextBox.html": '\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
        "url:dijit/templates/Tooltip.html": '\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
        "url:dijit/form/templates/ValidationTextBox.html": '\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
        "*now": function(C) {
            C(['dojo/i18n!*preload*esri/nls/jsapi*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])
        },
        "*noref": 1
    }
});
define("esri/jsapi", "dojo/fx/Toggler dojo/_base/html dijit/_base dijit/form/DropDownButton dijit/form/ComboButton dijit/form/ToggleButton dijit/_base/manager dijit/TooltipDialog ./main ./map ./geometry ./symbol ./renderer ./utils ./IdentityManager ./layers/graphics ./layers/agstiled ./layers/agsdynamic ./layers/FeatureLayer ./dijit/PopupTemplate ./dijit/PopupRenderer ./dijit/Attribution ./arcgis/utils ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition".split(" "), function() {
    return {}
});
